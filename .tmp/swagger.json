{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getApp","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/health":{"get":{"operationId":"HealthController_root","parameters":[],"responses":{"200":{"description":""}},"tags":["Health"]}},"/health/email":{"get":{"operationId":"HealthController_getEmailHealth","parameters":[],"responses":{"200":{"description":""}},"tags":["Health"]}},"/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":""}},"summary":"Register new user and create tenant","tags":["auth"]}},"/auth/signup":{"post":{"operationId":"AuthController_signup","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":""}},"summary":"Signup (alias of register) - issues email verification token","tags":["auth"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":""}},"summary":"Login user","tags":["auth"]}},"/auth/me":{"get":{"operationId":"AuthController_getProfile","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get current user profile","tags":["auth"]}},"/auth/refresh":{"post":{"operationId":"AuthController_refresh","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Refresh access token (sliding session)","tags":["auth"]}},"/auth/refresh-token":{"post":{"operationId":"AuthController_refreshAlt","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Refresh access token (alt path)","tags":["auth"]}},"/auth/resend-verification":{"post":{"operationId":"AuthController_resendVerification","parameters":[],"responses":{"201":{"description":""}},"summary":"Resend email verification link","tags":["auth"]}},"/auth/verify-email":{"get":{"operationId":"AuthController_verifyEmailLegacy","parameters":[{"name":"token","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Verify email using legacy token (backward compatible)","tags":["auth"]}},"/auth/verify":{"get":{"operationId":"AuthController_verifyEmail","parameters":[{"name":"token","required":true,"in":"query","schema":{"type":"string"}},{"name":"u","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Verify email using hashed token table","tags":["auth"]}},"/auth/forgot-password":{"post":{"operationId":"AuthController_forgotPasswordLegacy","parameters":[],"responses":{"201":{"description":""}},"summary":"Send password reset email (legacy)","tags":["auth"]}},"/auth/forgot":{"post":{"operationId":"AuthController_forgotPassword","parameters":[],"responses":{"201":{"description":""}},"summary":"Issue password reset token and send email","tags":["auth"]}},"/auth/reset-password":{"post":{"operationId":"AuthController_resetPasswordLegacy","parameters":[],"responses":{"201":{"description":""}},"summary":"Reset password with legacy token (backward compatible)","tags":["auth"]}},"/auth/reset":{"post":{"operationId":"AuthController_resetPassword","parameters":[],"responses":{"201":{"description":""}},"summary":"Reset password using hashed token table","tags":["auth"]}},"/users/me":{"get":{"operationId":"UsersController_getProfile","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]},"put":{"operationId":"UsersController_updateProfile","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]}},"/users/me/notification-preferences":{"get":{"operationId":"UsersController_getNotificationPreferences","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]},"put":{"operationId":"UsersController_updateNotificationPreferences","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]}},"/users/me/password":{"put":{"operationId":"UsersController_changePassword","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]}},"/users/me/export":{"get":{"operationId":"UsersController_exportData","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]}},"/users/me/delete":{"post":{"operationId":"UsersController_requestDeletion","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]}},"/users/2fa/setup":{"post":{"operationId":"UsersController_setupTwoFactor","parameters":[],"responses":{"201":{"description":""}},"tags":["Users"]}},"/users/2fa/enable":{"post":{"operationId":"UsersController_enableTwoFactor","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Enable2FADto"}}}},"responses":{"201":{"description":""}},"tags":["Users"]}},"/users/2fa/verify":{"post":{"operationId":"UsersController_verifyTwoFactor","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Verify2FADto"}}}},"responses":{"201":{"description":""}},"tags":["Users"]}},"/users/2fa/disable":{"post":{"operationId":"UsersController_disableTwoFactor","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Disable2FADto"}}}},"responses":{"201":{"description":""}},"tags":["Users"]}},"/users/2fa/status":{"get":{"operationId":"UsersController_getTwoFactorStatus","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]}},"/users/2fa/backup-codes/regenerate":{"post":{"operationId":"UsersController_regenerateBackupCodes","parameters":[],"responses":{"201":{"description":""}},"tags":["Users"]}},"/users/sessions/terminate-all":{"post":{"operationId":"UsersController_terminateAllSessions","parameters":[],"responses":{"200":{"description":""}},"tags":["Users"]}},"/audit/test":{"get":{"operationId":"AuditController_test","parameters":[],"responses":{"200":{"description":""}},"tags":["Audit"]}},"/audit/logs":{"get":{"operationId":"AuditController_getAuditLogs","parameters":[{"name":"page","required":true,"in":"query","schema":{"type":"string"}},{"name":"limit","required":true,"in":"query","schema":{"type":"string"}},{"name":"userId","required":true,"in":"query","schema":{"type":"string"}},{"name":"entity","required":true,"in":"query","schema":{"type":"string"}},{"name":"action","required":true,"in":"query","schema":{"type":"string"}},{"name":"startDate","required":true,"in":"query","schema":{"type":"string"}},{"name":"endDate","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Audit"]}},"/audit/entities":{"get":{"operationId":"AuditController_getAuditableEntities","parameters":[],"responses":{"200":{"description":""}},"tags":["Audit"]}},"/audit/entity/{entity}/{entityId}":{"get":{"operationId":"AuditController_getEntityAuditHistory","parameters":[{"name":"entity","required":true,"in":"query","schema":{"type":"string"}},{"name":"entityId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Audit"]}},"/tenants/my-tenant":{"get":{"operationId":"TenantsController_getMyTenant","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get current user's tenant","tags":["tenants"]},"patch":{"operationId":"TenantsController_updateMyTenant","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update current user's tenant","tags":["tenants"]}},"/tenants/my-tenant/subscription":{"patch":{"operationId":"TenantsController_updateMySubscription","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update subscription (plan/users) for current tenant","tags":["tenants"]}},"/tenants/my-tenant/subscription/history":{"get":{"operationId":"TenantsController_getMySubscriptionHistory","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get mock subscription history","tags":["tenants"]}},"/organizations":{"post":{"operationId":"OrganizationsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrganizationDto"}}}},"responses":{"201":{"description":"Organization created successfully"}},"security":[{"bearer":[]}],"summary":"Create a new organization","tags":["organizations"]},"get":{"operationId":"OrganizationsController_findAll","parameters":[],"responses":{"200":{"description":"List of user organizations"}},"security":[{"bearer":[]}],"summary":"Get all organizations for the current user","tags":["organizations"]}},"/organizations/{id}":{"get":{"operationId":"OrganizationsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Organization details"},"404":{"description":"Organization not found"}},"security":[{"bearer":[]}],"summary":"Get organization by ID","tags":["organizations"]},"patch":{"operationId":"OrganizationsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOrganizationDto"}}}},"responses":{"200":{"description":"Organization updated successfully"},"403":{"description":"Insufficient permissions"}},"security":[{"bearer":[]}],"summary":"Update organization","tags":["organizations"]},"delete":{"operationId":"OrganizationsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Organization deleted successfully"},"403":{"description":"Only owners can delete organizations"}},"security":[{"bearer":[]}],"summary":"Delete organization","tags":["organizations"]}},"/organizations/{id}/invite":{"post":{"operationId":"OrganizationsController_inviteUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteUserDto"}}}},"responses":{"201":{"description":"Invitation sent successfully"},"403":{"description":"Insufficient permissions"}},"security":[{"bearer":[]}],"summary":"Invite user to organization","tags":["organizations"]}},"/organizations/accept-invite":{"post":{"operationId":"OrganizationsController_acceptInvite","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AcceptInviteDto"}}}},"responses":{"200":{"description":"Invitation accepted successfully"},"404":{"description":"Invalid or expired invitation"}},"security":[{"bearer":[]}],"summary":"Accept organization invitation","tags":["organizations"]}},"/organizations/invites/validate/{token}":{"get":{"operationId":"OrganizationsController_validateInvite","parameters":[{"name":"token","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Invite details returned"},"404":{"description":"Invalid invite token"}},"security":[{"bearer":[]}],"summary":"Validate invitation token and return invite details","tags":["organizations"]}},"/organizations/{id}/members":{"get":{"operationId":"OrganizationsController_getMembers","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"List of organization members"}},"security":[{"bearer":[]}],"summary":"Get organization members","tags":["organizations"]}},"/organizations/{id}/members/{memberId}":{"patch":{"operationId":"OrganizationsController_updateMemberRole","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"memberId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateMemberRoleDto"}}}},"responses":{"200":{"description":"Member role updated successfully"},"403":{"description":"Insufficient permissions"}},"security":[{"bearer":[]}],"summary":"Update member role","tags":["organizations"]},"delete":{"operationId":"OrganizationsController_removeMember","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"memberId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Member removed successfully"},"403":{"description":"Insufficient permissions"}},"security":[{"bearer":[]}],"summary":"Remove member from organization","tags":["organizations"]}},"/organizations/{id}/invites":{"get":{"operationId":"OrganizationsController_getPendingInvites","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"List of pending invitations"},"403":{"description":"Insufficient permissions"}},"security":[{"bearer":[]}],"summary":"Get pending invitations","tags":["organizations"]}},"/organizations/{id}/membership-stats":{"get":{"operationId":"OrganizationsController_getMembershipStats","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Membership statistics including current/max members and plan limits"},"403":{"description":"Access denied"}},"security":[{"bearer":[]}],"summary":"Get organization membership statistics","tags":["organizations"]}},"/organizations/{id}/invites/{inviteId}":{"delete":{"operationId":"OrganizationsController_cancelInvite","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"inviteId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Invitation cancelled successfully"},"403":{"description":"Insufficient permissions"},"404":{"description":"Invitation not found"}},"security":[{"bearer":[]}],"summary":"Cancel pending invitation","tags":["organizations"]}},"/organizations/{id}/invites/{inviteId}/resend":{"post":{"operationId":"OrganizationsController_resendInvite","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"inviteId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Invitation resent successfully"},"403":{"description":"Insufficient permissions"},"404":{"description":"Invitation not found"}},"security":[{"bearer":[]}],"summary":"Resend invitation","tags":["organizations"]}},"/public/invites/{token}":{"get":{"operationId":"PublicInvitesController_validate","parameters":[{"name":"token","required":true,"in":"path","schema":{"type":"string"}},{"name":"turnstileToken","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Invite details returned"},"404":{"description":"Invalid invite token"}},"summary":"Public: Validate invitation token (no auth)","tags":["public-invites"]}},"/public/invites/{token}/register":{"post":{"operationId":"PublicInvitesController_complete","parameters":[{"name":"token","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicCompleteInviteDto"}}}},"responses":{"200":{"description":"Invite completed, user ready to login"}},"summary":"Public: Complete invite by setting password (no auth)","tags":["public-invites"]}},"/customers":{"post":{"operationId":"CustomersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCustomerDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create customer","tags":["customers"]},"get":{"operationId":"CustomersController_findAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get all customers for tenant","tags":["customers"]}},"/customers/{id}":{"get":{"operationId":"CustomersController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get customer by id","tags":["customers"]},"patch":{"operationId":"CustomersController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCustomerDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update customer","tags":["customers"]},"delete":{"operationId":"CustomersController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete customer","tags":["customers"]}},"/suppliers":{"post":{"operationId":"SuppliersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSupplierDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create supplier","tags":["suppliers"]},"get":{"operationId":"SuppliersController_findAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get all suppliers for tenant","tags":["suppliers"]}},"/suppliers/{id}":{"get":{"operationId":"SuppliersController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get supplier by id","tags":["suppliers"]},"patch":{"operationId":"SuppliersController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSupplierDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update supplier","tags":["suppliers"]},"delete":{"operationId":"SuppliersController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete supplier","tags":["suppliers"]}},"/products":{"post":{"operationId":"ProductsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create product","tags":["products"]},"get":{"operationId":"ProductsController_findAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get all products for tenant","tags":["products"]}},"/products/low-stock":{"get":{"operationId":"ProductsController_findLowStock","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get products with low stock","tags":["products"]}},"/products/{id}":{"get":{"operationId":"ProductsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get product by id","tags":["products"]},"patch":{"operationId":"ProductsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update product","tags":["products"]},"delete":{"operationId":"ProductsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete product","tags":["products"]}},"/product-categories":{"get":{"operationId":"ProductCategoriesController_findAll","parameters":[{"name":"includeInactive","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["ProductCategories"]},"post":{"operationId":"ProductCategoriesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductCategoryDto"}}}},"responses":{"201":{"description":""}},"tags":["ProductCategories"]}},"/product-categories/{id}":{"get":{"operationId":"ProductCategoriesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["ProductCategories"]},"patch":{"operationId":"ProductCategoriesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductCategoryExtraDto"}}}},"responses":{"200":{"description":""}},"tags":["ProductCategories"]},"delete":{"operationId":"ProductCategoriesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["ProductCategories"]}},"/invoices":{"post":{"operationId":"InvoicesController_create","parameters":[],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"tags":["invoices"]},"get":{"operationId":"InvoicesController_findAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["invoices"]}},"/invoices/statistics":{"get":{"operationId":"InvoicesController_getStatistics","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["invoices"]}},"/invoices/{id}":{"get":{"operationId":"InvoicesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["invoices"]},"patch":{"operationId":"InvoicesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["invoices"]},"delete":{"operationId":"InvoicesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["invoices"]}},"/invoices/{id}/status":{"patch":{"operationId":"InvoicesController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["invoices"]}},"/invoices/{id}/void":{"patch":{"operationId":"InvoicesController_voidInvoice","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["invoices"]}},"/invoices/{id}/restore":{"patch":{"operationId":"InvoicesController_restoreInvoice","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["invoices"]}},"/expenses":{"post":{"operationId":"ExpensesController_create","parameters":[],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"tags":["expenses"]},"get":{"operationId":"ExpensesController_findAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["expenses"]}},"/expenses/statistics":{"get":{"operationId":"ExpensesController_getStatistics","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["expenses"]}},"/expenses/{id}":{"get":{"operationId":"ExpensesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["expenses"]},"patch":{"operationId":"ExpensesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["expenses"]},"delete":{"operationId":"ExpensesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["expenses"]}},"/expenses/{id}/status":{"patch":{"operationId":"ExpensesController_updateStatus","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["expenses"]}},"/expenses/{id}/void":{"patch":{"operationId":"ExpensesController_voidExpense","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["expenses"]}},"/expenses/{id}/restore":{"patch":{"operationId":"ExpensesController_restoreExpense","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["expenses"]}},"/quotes":{"post":{"operationId":"QuotesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateQuoteDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create quote","tags":["quotes"]},"get":{"operationId":"QuotesController_findAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"List quotes (tenant scoped)","tags":["quotes"]}},"/quotes/{id}":{"get":{"operationId":"QuotesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get quote by id (tenant scoped)","tags":["quotes"]},"patch":{"operationId":"QuotesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateQuoteDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update quote","tags":["quotes"]},"delete":{"operationId":"QuotesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete quote","tags":["quotes"]}},"/public/quotes/{publicId}":{"get":{"operationId":"QuotesController_getPublic","parameters":[{"name":"publicId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Public: Get quote by publicId","tags":["quotes"]}},"/public/quotes/{publicId}/viewed":{"post":{"operationId":"QuotesController_viewed","parameters":[{"name":"publicId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"summary":"Public: mark viewed if draft/sent","tags":["quotes"]}},"/public/quotes/{publicId}/accept":{"post":{"operationId":"QuotesController_accept","parameters":[{"name":"publicId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"summary":"Public: accept quote","tags":["quotes"]}},"/public/quotes/{publicId}/decline":{"post":{"operationId":"QuotesController_decline","parameters":[{"name":"publicId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"summary":"Public: decline quote","tags":["quotes"]}},"/sales":{"post":{"operationId":"SalesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSaleDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create sale","tags":["sales"]},"get":{"operationId":"SalesController_findAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get all sales for tenant","tags":["sales"]}},"/sales/{id}":{"get":{"operationId":"SalesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get sale by id","tags":["sales"]},"patch":{"operationId":"SalesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSaleDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update sale","tags":["sales"]},"delete":{"operationId":"SalesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete sale","tags":["sales"]}},"/sales/purge/all":{"delete":{"operationId":"SalesController_purgeAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete ALL sales for current tenant (dev only)","tags":["sales"]}},"/bank-accounts":{"post":{"operationId":"BankAccountsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBankAccountDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Banka hesabı oluştur","tags":["bank-accounts"]},"get":{"operationId":"BankAccountsController_findAll","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Mevcut tenant içine kayıtlı banka hesaplarını listele","tags":["bank-accounts"]}},"/bank-accounts/{id}":{"patch":{"operationId":"BankAccountsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Banka hesabını güncelle","tags":["bank-accounts"]},"delete":{"operationId":"BankAccountsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Banka hesabını sil","tags":["bank-accounts"]}},"/admin/login":{"post":{"operationId":"AdminController_adminLogin","parameters":[],"responses":{"200":{"description":"Admin logged in successfully"}},"summary":"Admin login","tags":["admin"]}},"/admin/users":{"get":{"operationId":"AdminController_getAllUsers","parameters":[{"name":"tenantId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"List of users"}},"summary":"Get all users (optionally filtered by tenant)","tags":["admin"]}},"/admin/users/export-csv":{"get":{"operationId":"AdminController_exportUsersCsv","parameters":[{"name":"tenantId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"CSV file stream"}},"summary":"Export users as CSV (optionally filtered by tenant)","tags":["admin"]}},"/admin/tenants":{"get":{"operationId":"AdminController_getAllTenants","parameters":[{"name":"status","required":true,"in":"query","schema":{"type":"string"}},{"name":"plan","required":true,"in":"query","schema":{"type":"string"}},{"name":"startFrom","required":true,"in":"query","schema":{"type":"string"}},{"name":"startTo","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"List of tenants"}},"summary":"Get all tenants with optional filters","tags":["admin"]}},"/admin/users/{userId}/status":{"patch":{"operationId":"AdminController_updateUserStatus","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User status updated"}},"summary":"Update user active status","tags":["admin"]}},"/admin/users/{userId}/verify":{"post":{"operationId":"AdminController_markUserVerified","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User email verification status updated"}},"summary":"Mark user email as verified","tags":["admin"]}},"/admin/users/{userId}":{"patch":{"operationId":"AdminController_updateUser","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User updated"}},"summary":"Update user profile (firstName, lastName, email, phone)","tags":["admin"]},"delete":{"operationId":"AdminController_deleteUser","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User deletion result"}},"summary":"Delete user (soft or hard)","tags":["admin"]}},"/admin/users/{userId}/password-reset":{"post":{"operationId":"AdminController_sendPasswordReset","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Password reset email sent (simulated)"}},"summary":"Send password reset email to user","tags":["admin"]}},"/admin/users/{userId}/tenant":{"patch":{"operationId":"AdminController_updateUserTenant","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User tenant updated"}},"summary":"Update user tenantId (admin only)","tags":["admin"]}},"/admin/user/{userId}/data":{"get":{"operationId":"AdminController_getUserData","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User data"}},"summary":"Get all data for a specific user","tags":["admin"]}},"/admin/tenant/{tenantId}/data":{"get":{"operationId":"AdminController_getTenantData","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Tenant data"}},"summary":"Get all data for a specific tenant","tags":["admin"]}},"/admin/tenant/{tenantId}/subscription":{"patch":{"operationId":"AdminController_updateTenantSubscription","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Subscription updated"}},"summary":"Update tenant subscription (plan/status/billing)","tags":["admin"]}},"/admin/tables":{"get":{"operationId":"AdminController_getAllTables","parameters":[],"responses":{"200":{"description":"Database table information"}},"summary":"Get all table information","tags":["admin"]}},"/admin/table/{tableName}":{"get":{"operationId":"AdminController_getTableData","parameters":[{"name":"tableName","required":true,"in":"path","schema":{"type":"string"}},{"name":"tenantId","required":true,"in":"query","schema":{"type":"string"}},{"name":"limit","required":true,"in":"query","schema":{"type":"number"}},{"name":"offset","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Table data"}},"summary":"Get data from specific table","tags":["admin"]}},"/admin/retention/config":{"get":{"operationId":"AdminController_getRetentionConfig","parameters":[],"responses":{"200":{"description":"Retention configuration"}},"summary":"Get data retention configuration","tags":["admin"]}},"/admin/retention/status":{"get":{"operationId":"AdminController_getRetentionStatus","parameters":[],"responses":{"200":{"description":"Retention status and stats"}},"summary":"Get retention job status and statistics","tags":["admin"]}},"/admin/retention/history":{"get":{"operationId":"AdminController_getRetentionHistory","parameters":[{"name":"limit","required":true,"in":"query","schema":{"type":"number"}},{"name":"offset","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Retention job history"}},"summary":"Get retention job execution history","tags":["admin"]}},"/admin/retention/dry-run":{"post":{"operationId":"AdminController_executeRetentionDryRun","parameters":[],"responses":{"200":{"description":"Dry-run results"}},"summary":"Execute retention job in dry-run mode","tags":["admin"]}},"/admin/retention/execute":{"post":{"operationId":"AdminController_executeRetention","parameters":[],"responses":{"200":{"description":"Live purge results"}},"summary":"Execute retention job (live purge)","tags":["admin"]}},"/admin/plan-limits":{"get":{"operationId":"AdminController_getPlanLimits","parameters":[],"responses":{"200":{"description":"Plan limits"}},"summary":"Mevcut plan limitlerini getir (runtime)","tags":["admin"]}},"/admin/plan-limits/{plan}":{"patch":{"operationId":"AdminController_updatePlanLimits","parameters":[{"name":"plan","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Updated plan limits"}},"summary":"Belirli bir plan için limitleri güncelle","tags":["admin"]}},"/admin/tenant/{tenantId}/limits":{"get":{"operationId":"AdminController_getTenantLimits","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Tenant limits and usage"}},"summary":"Belirli bir tenant için limitleri (default+override+effective) ve kullanım istatistiklerini getir","tags":["admin"]},"patch":{"operationId":"AdminController_updateTenantLimits","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Updated tenant limits"}},"summary":"Belirli bir tenant için limit override değerlerini güncelle","tags":["admin"]}},"/admin/tenant/{tenantId}/overview":{"get":{"operationId":"AdminController_getTenantOverview","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Tenant overview"}},"summary":"Tek ekranda tenant özeti: kullanıcılar, limitler, kullanım, organizasyonlar, davetler","tags":["admin"]}},"/admin/tenant/{tenantId}/subscription-raw":{"get":{"operationId":"AdminController_getSubscriptionRaw","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Subscription raw details"}},"summary":"Get raw Stripe subscription items and computed seats","tags":["admin"]}},"/admin/tenant/{tenantId}":{"patch":{"operationId":"AdminController_updateTenantBasic","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Tenant updated"}},"summary":"Update tenant basic fields (name/companyName)","tags":["admin"]}},"/admin/tenant/{tenantId}/enforce-downgrade":{"post":{"operationId":"AdminController_enforceTenantDowngrade","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Enforcement result"}},"summary":"Enforce plan downgrade by randomly deactivating excess users after deadline","tags":["admin"]}},"/admin/tenant/{tenantId}/invoices":{"get":{"operationId":"AdminController_listTenantInvoices","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Tenant invoices"}},"summary":"List Stripe invoices for a tenant (admin)","tags":["admin"]}},"/admin/tenant/{tenantId}/debug":{"get":{"operationId":"AdminController_debugTenant","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"Debug tenant billing + limits","tags":["admin"]}},"/admin/tenant/{tenantId}/delete":{"patch":{"operationId":"AdminController_deleteTenant","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Tenant deletion result"}},"summary":"Delete tenant account (soft or hard)","tags":["admin"]}},"/admin/tenant/{tenantId}/users":{"post":{"operationId":"AdminController_addUserToTenant","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User created/attached"}},"summary":"Create or attach a user to a tenant without email verification","tags":["admin"]}},"/admin/tenant/{tenantId}/purge-demo":{"delete":{"operationId":"AdminController_purgeTenantDemo","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Purge result summary"}},"summary":"Purge ALL demo data for a tenant (dev only)","tags":["admin"]}},"/admin/users/{userId}/revoke-sessions":{"post":{"operationId":"AdminController_revokeUserSessions","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"All sessions revoked"}},"summary":"Invalidate all active JWT tokens for a user","tags":["admin"]}},"/admin/backups":{"get":{"operationId":"BackupController_listBackups","parameters":[{"name":"type","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Backup"]}},"/admin/backups/user/{userId}":{"get":{"operationId":"BackupController_listUserBackups","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Backup"]},"post":{"operationId":"BackupController_createUserBackup","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Backup"]}},"/admin/backups/system":{"post":{"operationId":"BackupController_createSystemBackup","parameters":[],"responses":{"201":{"description":""}},"tags":["Backup"]}},"/admin/backups/tenant/{tenantId}":{"post":{"operationId":"BackupController_createTenantBackup","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Backup"]}},"/admin/backups/restore/system/{backupId}":{"post":{"operationId":"BackupController_restoreSystem","parameters":[{"name":"backupId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Backup"]}},"/admin/backups/restore/user/{userId}/{backupId}":{"post":{"operationId":"BackupController_restoreUser","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}},{"name":"backupId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Backup"]}},"/admin/backups/restore/tenant/{tenantId}/{backupId}":{"post":{"operationId":"BackupController_restoreTenant","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}},{"name":"backupId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Backup"]}},"/admin/backups/{backupId}":{"delete":{"operationId":"BackupController_deleteBackup","parameters":[{"name":"backupId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Backup"]}},"/admin/backups/cleanup":{"post":{"operationId":"BackupController_cleanupOldBackups","parameters":[],"responses":{"201":{"description":""}},"tags":["Backup"]}},"/admin/backups/statistics":{"get":{"operationId":"BackupController_getStatistics","parameters":[],"responses":{"200":{"description":""}},"tags":["Backup"]}},"/admin/organizations":{"get":{"operationId":"AdminOrganizationsController_listOrganizations","parameters":[],"responses":{"200":{"description":""}},"tags":["AdminOrganizations"]}},"/admin/organizations/{orgId}/members":{"get":{"operationId":"AdminOrganizationsController_listMembers","parameters":[{"name":"orgId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["AdminOrganizations"]}},"/admin/organizations/{orgId}/invites":{"get":{"operationId":"AdminOrganizationsController_listInvites","parameters":[{"name":"orgId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["AdminOrganizations"]}},"/admin/organizations/{orgId}/members/{memberId}/role":{"patch":{"operationId":"AdminOrganizationsController_updateMemberRole","parameters":[{"name":"orgId","required":true,"in":"path","schema":{"type":"string"}},{"name":"memberId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateMemberRoleDto"}}}},"responses":{"200":{"description":""}},"tags":["AdminOrganizations"]}},"/admin/organizations/{orgId}/members/{memberId}":{"delete":{"operationId":"AdminOrganizationsController_removeMember","parameters":[{"name":"orgId","required":true,"in":"path","schema":{"type":"string"}},{"name":"memberId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["AdminOrganizations"]}},"/admin/organizations/{orgId}/invite":{"post":{"operationId":"AdminOrganizationsController_adminCreateInvite","parameters":[{"name":"orgId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteUserDto"}}}},"responses":{"201":{"description":""}},"tags":["AdminOrganizations"]}},"/admin/organizations/{orgId}/invites/{inviteId}/resend":{"post":{"operationId":"AdminOrganizationsController_adminResendInvite","parameters":[{"name":"orgId","required":true,"in":"path","schema":{"type":"string"}},{"name":"inviteId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["AdminOrganizations"]}},"/admin/suppression":{"get":{"operationId":"SuppressionAdminController_list","parameters":[{"name":"q","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["SuppressionAdmin"]}},"/admin/suppression/{email}":{"delete":{"operationId":"SuppressionAdminController_remove","parameters":[{"name":"email","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["SuppressionAdmin"]}},"/admin/security/config":{"get":{"operationId":"AdminSecurityController_getConfig","parameters":[],"responses":{"200":{"description":""}},"tags":["AdminSecurity"]}},"/admin/security/credentials":{"post":{"operationId":"AdminSecurityController_updateCredentials","parameters":[],"responses":{"201":{"description":""}},"tags":["AdminSecurity"]}},"/admin/security/2fa/setup":{"post":{"operationId":"AdminSecurityController_setup2FA","parameters":[],"responses":{"201":{"description":""}},"tags":["AdminSecurity"]}},"/admin/security/2fa/verify":{"post":{"operationId":"AdminSecurityController_verify2FA","parameters":[],"responses":{"201":{"description":""}},"tags":["AdminSecurity"]}},"/admin/security/2fa/disable":{"post":{"operationId":"AdminSecurityController_disable2FA","parameters":[],"responses":{"201":{"description":""}},"tags":["AdminSecurity"]}},"/billing/checkout":{"post":{"operationId":"BillingController_createCheckout","parameters":[],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/portal":{"get":{"operationId":"BillingController_portal","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}},{"name":"returnUrl","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/seats":{"post":{"operationId":"BillingController_updateSeats","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/cancel":{"post":{"operationId":"BillingController_cancelAtPeriodEnd","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/resume":{"post":{"operationId":"BillingController_resume","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/invoices":{"get":{"operationId":"BillingController_invoices","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/history":{"get":{"operationId":"BillingController_history","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/upgrade-status":{"get":{"operationId":"BillingController_upgradeStatus","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/sync":{"post":{"operationId":"BillingController_manualSync","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/plan-update":{"post":{"operationId":"BillingController_planUpdate","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/addon/checkout":{"post":{"operationId":"BillingController_addonCheckout","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/billing/{tenantId}/addon/charge":{"post":{"operationId":"BillingController_addonCharge","parameters":[{"name":"tenantId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/billing/addon/charge":{"post":{"operationId":"BillingController_addonChargeAlt","parameters":[],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/billing/addon/prorate":{"post":{"operationId":"BillingController_addonProrateAlt","parameters":[],"responses":{"201":{"description":""}},"tags":["Billing"]}},"/fiscal-periods":{"post":{"operationId":"FiscalPeriodsController_create","parameters":[],"responses":{"201":{"description":""}},"tags":["FiscalPeriods"]},"get":{"operationId":"FiscalPeriodsController_findAll","parameters":[],"responses":{"200":{"description":""}},"tags":["FiscalPeriods"]}},"/fiscal-periods/{id}":{"get":{"operationId":"FiscalPeriodsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["FiscalPeriods"]},"patch":{"operationId":"FiscalPeriodsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["FiscalPeriods"]},"delete":{"operationId":"FiscalPeriodsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["FiscalPeriods"]}},"/fiscal-periods/{id}/lock":{"patch":{"operationId":"FiscalPeriodsController_lockPeriod","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["FiscalPeriods"]}},"/fiscal-periods/{id}/unlock":{"patch":{"operationId":"FiscalPeriodsController_unlockPeriod","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["FiscalPeriods"]}},"/api/subprocessors":{"get":{"operationId":"SubprocessorsController_getSubprocessors","parameters":[],"responses":{"200":{"description":""}},"tags":["Subprocessors"]}},"/api/subprocessors/health":{"get":{"operationId":"SubprocessorsController_getHealth","parameters":[],"responses":{"200":{"description":""}},"tags":["Subprocessors"]}},"/site-settings":{"get":{"operationId":"SiteSettingsController_getSettings","parameters":[],"responses":{"200":{"description":"Site settings retrieved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SiteSettings"}}}}},"summary":"Get site settings (public - for injecting meta tags)","tags":["site-settings"]},"put":{"operationId":"SiteSettingsController_updateSettings","parameters":[],"responses":{"200":{"description":"Settings updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SiteSettings"}}}},"401":{"description":"Unauthorized"}},"summary":"Update site settings (admin only)","tags":["site-settings"]}},"/webhooks/mailersend/events":{"post":{"operationId":"MailerSendWebhookController_handle","parameters":[],"responses":{"200":{"description":""}},"tags":["MailerSendWebhook"]}},"/webhooks/stripe":{"post":{"operationId":"StripeWebhookController_handle","parameters":[{"name":"stripe-signature","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["StripeWebhook"]}},"/crm/leads":{"get":{"operationId":"CrmController_listLeads","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"List CRM leads","tags":["crm"]},"post":{"operationId":"CrmController_createLead","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLeadDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create CRM lead","tags":["crm"]}},"/crm/leads/{id}":{"patch":{"operationId":"CrmController_updateLead","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateLeadDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update CRM lead","tags":["crm"]},"delete":{"operationId":"CrmController_deleteLead","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete CRM lead","tags":["crm"]}},"/crm/contacts":{"get":{"operationId":"CrmController_listContacts","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"List CRM contacts","tags":["crm"]},"post":{"operationId":"CrmController_createContact","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateContactDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create CRM contact","tags":["crm"]}},"/crm/contacts/{id}":{"patch":{"operationId":"CrmController_updateContact","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateContactDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update CRM contact","tags":["crm"]},"delete":{"operationId":"CrmController_deleteContact","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete CRM contact","tags":["crm"]}},"/crm/pipeline/bootstrap":{"post":{"operationId":"CrmController_bootstrap","parameters":[],"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Bootstrap default pipeline (single pipeline for now)","tags":["crm"]}},"/crm/board":{"get":{"operationId":"CrmController_board","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get pipeline board (stages + opportunities) scoped by visibility","tags":["crm"]}},"/crm/opportunities":{"post":{"operationId":"CrmController_createOpportunity","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOpportunityDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create opportunity (owner=user; team optional)","tags":["crm"]}},"/crm/opportunities/{id}/move":{"post":{"operationId":"CrmController_move","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MoveOpportunityDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Move opportunity to another stage","tags":["crm"]}},"/crm/opportunities/{id}/team":{"post":{"operationId":"CrmController_setTeam","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetOpportunityTeamDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Set opportunity team (owner is always included)","tags":["crm"]}},"/crm/opportunities/{id}":{"patch":{"operationId":"CrmController_updateOpportunity","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOpportunityDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update opportunity fields (name, account, amount, currency, expectedCloseDate)","tags":["crm"]}},"/crm/activities":{"get":{"operationId":"CrmController_listActivities","parameters":[{"name":"opportunityId","required":true,"in":"query","schema":{"type":"string"}},{"name":"accountId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"List CRM activities (optionally filtered by opportunityId)","tags":["crm"]},"post":{"operationId":"CrmController_createActivity","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateActivityDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create CRM activity","tags":["crm"]}},"/crm/activities/{id}":{"patch":{"operationId":"CrmController_updateActivity","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateActivityDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update CRM activity","tags":["crm"]},"delete":{"operationId":"CrmController_deleteActivity","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete CRM activity","tags":["crm"]}},"/crm/tasks":{"get":{"operationId":"CrmController_listTasks","parameters":[{"name":"opportunityId","required":true,"in":"query","schema":{"type":"string"}},{"name":"accountId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"List CRM tasks (filtered by opportunityId or accountId)","tags":["crm"]},"post":{"operationId":"CrmController_createTask","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTaskDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create CRM task","tags":["crm"]}},"/crm/tasks/{id}":{"patch":{"operationId":"CrmController_updateTask","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTaskDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update CRM task","tags":["crm"]},"delete":{"operationId":"CrmController_deleteTask","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete CRM task","tags":["crm"]}}},"info":{"title":"Comptario API","description":"Multi-tenant accounting and finance management API","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"RegisterDto":{"type":"object","properties":{"email":{"type":"string","description":"Valid email address","example":"user@example.com"},"password":{"type":"string","description":"Password (minimum 6 characters)","example":"Password123","minLength":6},"firstName":{"type":"string","description":"First name","example":"John"},"lastName":{"type":"string","description":"Last name","example":"Doe"},"companyName":{"type":"string","description":"Company name (optional)","example":"ACME Corp"},"turnstileToken":{"type":"string","description":"Cloudflare Turnstile token for human verification (mandatory for public signup when Turnstile enabled)."}},"required":["email","password","firstName","lastName"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","description":"Valid email address","example":"user@example.com"},"password":{"type":"string","description":"Password","example":"your_password"},"twoFactorToken":{"type":"string","description":"Two-factor token (6-digit TOTP or 8-char backup code). Optional; required if 2FA is enabled.","example":"123456"},"clientTimeZone":{"type":"string","description":"IANA time zone identifier reported by client (e.g., Europe/Istanbul). Optional.","example":"Europe/Istanbul"},"clientUtcOffsetMinutes":{"type":"number","description":"Client UTC offset minutes relative to UTC (e.g., +180 for GMT+3). Optional.","example":180},"clientLocale":{"type":"string","description":"Client locale reported by browser (e.g., tr-TR). Optional.","example":"tr-TR"},"turnstileToken":{"type":"string","description":"Cloudflare Turnstile token. Required after captcha threshold reached for this email+IP."}},"required":["email","password"]},"Enable2FADto":{"type":"object","properties":{}},"Verify2FADto":{"type":"object","properties":{}},"Disable2FADto":{"type":"object","properties":{}},"CreateOrganizationDto":{"type":"object","properties":{}},"UpdateOrganizationDto":{"type":"object","properties":{}},"InviteUserDto":{"type":"object","properties":{}},"AcceptInviteDto":{"type":"object","properties":{}},"UpdateMemberRoleDto":{"type":"object","properties":{}},"PublicCompleteInviteDto":{"type":"object","properties":{"password":{"type":"string","description":"Password for the invited account","minLength":6},"turnstileToken":{"type":"string","description":"Cloudflare Turnstile token proving the request is human"}},"required":["password"]},"CreateCustomerDto":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"address":{"type":"string"},"taxNumber":{"type":"string"},"company":{"type":"string"}},"required":["name"]},"UpdateCustomerDto":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"address":{"type":"string"},"taxNumber":{"type":"string"},"company":{"type":"string"}}},"CreateSupplierDto":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"address":{"type":"string"},"taxNumber":{"type":"string"},"company":{"type":"string"}},"required":["name"]},"UpdateSupplierDto":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"address":{"type":"string"},"taxNumber":{"type":"string"},"company":{"type":"string"}}},"CreateProductDto":{"type":"object","properties":{"name":{"type":"string"},"code":{"type":"string"},"description":{"type":"string"},"price":{"type":"number"},"cost":{"type":"number"},"stock":{"type":"number"},"minStock":{"type":"number"},"unit":{"type":"string"},"category":{"type":"string"},"barcode":{"type":"string"},"taxRate":{"type":"number"},"categoryTaxRateOverride":{"type":"number"}},"required":["name","code","price"]},"UpdateProductDto":{"type":"object","properties":{"name":{"type":"string"},"code":{"type":"string"},"description":{"type":"string"},"price":{"type":"number"},"cost":{"type":"number"},"stock":{"type":"number"},"minStock":{"type":"number"},"unit":{"type":"string"},"category":{"type":"string"},"barcode":{"type":"string"},"taxRate":{"type":"number"},"categoryTaxRateOverride":{"type":"number"},"isActive":{"type":"boolean"}}},"CreateProductCategoryDto":{"type":"object","properties":{}},"UpdateProductCategoryExtraDto":{"type":"object","properties":{}},"CreateQuoteDto":{"type":"object","properties":{"quoteNumber":{"type":"string","description":"Quote number, if omitted server will generate","maxLength":32},"customerId":{"type":"string","description":"Customer ID (UUID)"},"issueDate":{"type":"string","description":"Issue date (YYYY-MM-DD)"},"validUntil":{"type":"string","description":"Valid until (YYYY-MM-DD)"},"currency":{"type":"string","description":"Currency (TRY|USD|EUR|GBP)","example":"TRY"},"total":{"type":"number","description":"Total amount"},"status":{"type":"string","description":"Initial status","enum":["draft","sent","viewed","accepted","declined","expired"]},"items":{"description":"Line items","type":"array","items":{"type":"array"}},"scopeOfWorkHtml":{"type":"string","description":"Scope of work (sanitized HTML)"},"customerName":{"type":"string","description":"Customer name (denormalized)"}},"required":["issueDate","currency","total"]},"UpdateQuoteDto":{"type":"object","properties":{}},"SaleItemDto":{"type":"object","properties":{"productId":{"type":"string"},"productName":{"type":"string"},"quantity":{"type":"number"},"unitPrice":{"type":"number"},"taxRate":{"type":"number","description":"KDV oranı (%) örn: 18"}},"required":["quantity","unitPrice"]},"CreateSaleDto":{"type":"object","properties":{"saleNumber":{"type":"string","description":"Satış numarası (örn: SAL-2025-11-001). Gönderilmezse sunucu üretir."},"customerId":{"type":"string"},"customerName":{"type":"string","description":"Müşteri adı (ID yoksa otomatik oluşturma için)"},"customerEmail":{"type":"string","description":"Müşteri e-posta (otomatik oluşturma için opsiyonel)"},"saleDate":{"type":"string","description":"Satış tarihi (YYYY-MM-DD)"},"items":{"type":"array","items":{"$ref":"#/components/schemas/SaleItemDto"}},"discountAmount":{"type":"number"},"notes":{"type":"string"},"sourceQuoteId":{"type":"string"},"invoiceId":{"type":"string"}},"required":["saleDate","items"]},"UpdateSaleDto":{"type":"object","properties":{"saleNumber":{"type":"string","description":"Satış numarası (örn: SAL-2025-11-001). Gönderilmezse sunucu üretir."},"customerId":{"type":"string"},"customerName":{"type":"string","description":"Müşteri adı (ID yoksa otomatik oluşturma için)"},"customerEmail":{"type":"string","description":"Müşteri e-posta (otomatik oluşturma için opsiyonel)"},"saleDate":{"type":"string","description":"Satış tarihi (YYYY-MM-DD)"},"items":{"type":"array","items":{"$ref":"#/components/schemas/SaleItemDto"}},"discountAmount":{"type":"number"},"notes":{"type":"string"},"sourceQuoteId":{"type":"string"},"invoiceId":{"type":"string"},"status":{"type":"string"}}},"CreateBankAccountDto":{"type":"object","properties":{"name":{"type":"string","example":"İş Bankası TL Hesabı"},"iban":{"type":"string","example":"TR000000000000000000000000"},"bankName":{"type":"string","example":"Türkiye İş Bankası"},"currency":{"type":"string","example":"TRY"}},"required":["name","iban"]},"SiteSettings":{"type":"object","properties":{}},"CreateLeadDto":{"type":"object","properties":{}},"UpdateLeadDto":{"type":"object","properties":{}},"CreateContactDto":{"type":"object","properties":{}},"UpdateContactDto":{"type":"object","properties":{}},"CreateOpportunityDto":{"type":"object","properties":{}},"MoveOpportunityDto":{"type":"object","properties":{}},"SetOpportunityTeamDto":{"type":"object","properties":{}},"UpdateOpportunityDto":{"type":"object","properties":{}},"CreateActivityDto":{"type":"object","properties":{}},"UpdateActivityDto":{"type":"object","properties":{}},"CreateTaskDto":{"type":"object","properties":{"dueAt":{"type":"object","example":"2025-12-15"}}},"UpdateTaskDto":{"type":"object","properties":{"dueAt":{"type":"object","example":"2025-12-15"}}}}}}