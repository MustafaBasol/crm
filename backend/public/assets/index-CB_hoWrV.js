(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))f(h);new MutationObserver(h=>{for(const d of h)if(d.type==="childList")for(const n of d.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function t(h){const d={};return h.integrity&&(d.integrity=h.integrity),h.referrerPolicy&&(d.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?d.credentials="include":h.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function f(h){if(h.ep)return;h.ep=!0;const d=t(h);fetch(h.href,d)}})();var Br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pb(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var tf={exports:{}},dc={},rf={exports:{}},Ir={};var W0;function Xw(){if(W0)return Ir;W0=1;var a=Symbol.for("react.element"),o=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),n=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),i=Symbol.for("react.suspense"),r=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),c=Symbol.iterator;function u(R){return R===null||typeof R!="object"?null:(R=c&&R[c]||R["@@iterator"],typeof R=="function"?R:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function p(R,L,Y){this.props=R,this.context=L,this.refs=b,this.updater=Y||m}p.prototype.isReactComponent={},p.prototype.setState=function(R,L){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,L,"setState")},p.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function v(){}v.prototype=p.prototype;function y(R,L,Y){this.props=R,this.context=L,this.refs=b,this.updater=Y||m}var N=y.prototype=new v;N.constructor=y,x(N,p.prototype),N.isPureReactComponent=!0;var T=Array.isArray,_=Object.prototype.hasOwnProperty,O={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function F(R,L,Y){var X,ae={},$=null,Q=null;if(L!=null)for(X in L.ref!==void 0&&(Q=L.ref),L.key!==void 0&&($=""+L.key),L)_.call(L,X)&&!H.hasOwnProperty(X)&&(ae[X]=L[X]);var z=arguments.length-2;if(z===1)ae.children=Y;else if(1<z){for(var M=Array(z),U=0;U<z;U++)M[U]=arguments[U+2];ae.children=M}if(R&&R.defaultProps)for(X in z=R.defaultProps,z)ae[X]===void 0&&(ae[X]=z[X]);return{$$typeof:a,type:R,key:$,ref:Q,props:ae,_owner:O.current}}function V(R,L){return{$$typeof:a,type:R.type,key:L,ref:R.ref,props:R.props,_owner:R._owner}}function q(R){return typeof R=="object"&&R!==null&&R.$$typeof===a}function W(R){var L={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(Y){return L[Y]})}var B=/\/+/g;function E(R,L){return typeof R=="object"&&R!==null&&R.key!=null?W(""+R.key):L.toString(36)}function P(R,L,Y,X,ae){var $=typeof R;($==="undefined"||$==="boolean")&&(R=null);var Q=!1;if(R===null)Q=!0;else switch($){case"string":case"number":Q=!0;break;case"object":switch(R.$$typeof){case a:case o:Q=!0}}if(Q)return Q=R,ae=ae(Q),R=X===""?"."+E(Q,0):X,T(ae)?(Y="",R!=null&&(Y=R.replace(B,"$&/")+"/"),P(ae,L,Y,"",function(U){return U})):ae!=null&&(q(ae)&&(ae=V(ae,Y+(!ae.key||Q&&Q.key===ae.key?"":(""+ae.key).replace(B,"$&/")+"/")+R)),L.push(ae)),1;if(Q=0,X=X===""?".":X+":",T(R))for(var z=0;z<R.length;z++){$=R[z];var M=X+E($,z);Q+=P($,L,Y,M,ae)}else if(M=u(R),typeof M=="function")for(R=M.call(R),z=0;!($=R.next()).done;)$=$.value,M=X+E($,z++),Q+=P($,L,Y,M,ae);else if($==="object")throw L=String(R),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Q}function A(R,L,Y){if(R==null)return R;var X=[],ae=0;return P(R,X,"","",function($){return L.call(Y,$,ae++)}),X}function k(R){if(R._status===-1){var L=R._result;L=L(),L.then(function(Y){(R._status===0||R._status===-1)&&(R._status=1,R._result=Y)},function(Y){(R._status===0||R._status===-1)&&(R._status=2,R._result=Y)}),R._status===-1&&(R._status=0,R._result=L)}if(R._status===1)return R._result.default;throw R._result}var j={current:null},S={transition:null},C={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:S,ReactCurrentOwner:O};function D(){throw Error("act(...) is not supported in production builds of React.")}return Ir.Children={map:A,forEach:function(R,L,Y){A(R,function(){L.apply(this,arguments)},Y)},count:function(R){var L=0;return A(R,function(){L++}),L},toArray:function(R){return A(R,function(L){return L})||[]},only:function(R){if(!q(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ir.Component=p,Ir.Fragment=t,Ir.Profiler=h,Ir.PureComponent=y,Ir.StrictMode=f,Ir.Suspense=i,Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C,Ir.act=D,Ir.cloneElement=function(R,L,Y){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var X=x({},R.props),ae=R.key,$=R.ref,Q=R._owner;if(L!=null){if(L.ref!==void 0&&($=L.ref,Q=O.current),L.key!==void 0&&(ae=""+L.key),R.type&&R.type.defaultProps)var z=R.type.defaultProps;for(M in L)_.call(L,M)&&!H.hasOwnProperty(M)&&(X[M]=L[M]===void 0&&z!==void 0?z[M]:L[M])}var M=arguments.length-2;if(M===1)X.children=Y;else if(1<M){z=Array(M);for(var U=0;U<M;U++)z[U]=arguments[U+2];X.children=z}return{$$typeof:a,type:R.type,key:ae,ref:$,props:X,_owner:Q}},Ir.createContext=function(R){return R={$$typeof:n,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:d,_context:R},R.Consumer=R},Ir.createElement=F,Ir.createFactory=function(R){var L=F.bind(null,R);return L.type=R,L},Ir.createRef=function(){return{current:null}},Ir.forwardRef=function(R){return{$$typeof:l,render:R}},Ir.isValidElement=q,Ir.lazy=function(R){return{$$typeof:s,_payload:{_status:-1,_result:R},_init:k}},Ir.memo=function(R,L){return{$$typeof:r,type:R,compare:L===void 0?null:L}},Ir.startTransition=function(R){var L=S.transition;S.transition={};try{R()}finally{S.transition=L}},Ir.unstable_act=D,Ir.useCallback=function(R,L){return j.current.useCallback(R,L)},Ir.useContext=function(R){return j.current.useContext(R)},Ir.useDebugValue=function(){},Ir.useDeferredValue=function(R){return j.current.useDeferredValue(R)},Ir.useEffect=function(R,L){return j.current.useEffect(R,L)},Ir.useId=function(){return j.current.useId()},Ir.useImperativeHandle=function(R,L,Y){return j.current.useImperativeHandle(R,L,Y)},Ir.useInsertionEffect=function(R,L){return j.current.useInsertionEffect(R,L)},Ir.useLayoutEffect=function(R,L){return j.current.useLayoutEffect(R,L)},Ir.useMemo=function(R,L){return j.current.useMemo(R,L)},Ir.useReducer=function(R,L,Y){return j.current.useReducer(R,L,Y)},Ir.useRef=function(R){return j.current.useRef(R)},Ir.useState=function(R){return j.current.useState(R)},Ir.useSyncExternalStore=function(R,L,Y){return j.current.useSyncExternalStore(R,L,Y)},Ir.useTransition=function(){return j.current.useTransition()},Ir.version="18.3.1",Ir}var Y0;function pm(){return Y0||(Y0=1,rf.exports=Xw()),rf.exports}var Q0;function Jw(){if(Q0)return dc;Q0=1;var a=pm(),o=Symbol.for("react.element"),t=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,h=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function n(l,i,r){var s,c={},u=null,m=null;r!==void 0&&(u=""+r),i.key!==void 0&&(u=""+i.key),i.ref!==void 0&&(m=i.ref);for(s in i)f.call(i,s)&&!d.hasOwnProperty(s)&&(c[s]=i[s]);if(l&&l.defaultProps)for(s in i=l.defaultProps,i)c[s]===void 0&&(c[s]=i[s]);return{$$typeof:o,type:l,key:u,ref:m,props:c,_owner:h.current}}return dc.Fragment=t,dc.jsx=n,dc.jsxs=n,dc}var Z0;function e1(){return Z0||(Z0=1,tf.exports=Jw()),tf.exports}var e=e1(),G=pm();const _t=pb(G);var nu={},sf={exports:{}},Mn={},nf={exports:{}},af={};var X0;function t1(){return X0||(X0=1,(function(a){function o(S,C){var D=S.length;S.push(C);e:for(;0<D;){var R=D-1>>>1,L=S[R];if(0<h(L,C))S[R]=C,S[D]=L,D=R;else break e}}function t(S){return S.length===0?null:S[0]}function f(S){if(S.length===0)return null;var C=S[0],D=S.pop();if(D!==C){S[0]=D;e:for(var R=0,L=S.length,Y=L>>>1;R<Y;){var X=2*(R+1)-1,ae=S[X],$=X+1,Q=S[$];if(0>h(ae,D))$<L&&0>h(Q,ae)?(S[R]=Q,S[$]=D,R=$):(S[R]=ae,S[X]=D,R=X);else if($<L&&0>h(Q,D))S[R]=Q,S[$]=D,R=$;else break e}}return C}function h(S,C){var D=S.sortIndex-C.sortIndex;return D!==0?D:S.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var n=Date,l=n.now();a.unstable_now=function(){return n.now()-l}}var i=[],r=[],s=1,c=null,u=3,m=!1,x=!1,b=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(S){for(var C=t(r);C!==null;){if(C.callback===null)f(r);else if(C.startTime<=S)f(r),C.sortIndex=C.expirationTime,o(i,C);else break;C=t(r)}}function T(S){if(b=!1,N(S),!x)if(t(i)!==null)x=!0,k(_);else{var C=t(r);C!==null&&j(T,C.startTime-S)}}function _(S,C){x=!1,b&&(b=!1,v(F),F=-1),m=!0;var D=u;try{for(N(C),c=t(i);c!==null&&(!(c.expirationTime>C)||S&&!W());){var R=c.callback;if(typeof R=="function"){c.callback=null,u=c.priorityLevel;var L=R(c.expirationTime<=C);C=a.unstable_now(),typeof L=="function"?c.callback=L:c===t(i)&&f(i),N(C)}else f(i);c=t(i)}if(c!==null)var Y=!0;else{var X=t(r);X!==null&&j(T,X.startTime-C),Y=!1}return Y}finally{c=null,u=D,m=!1}}var O=!1,H=null,F=-1,V=5,q=-1;function W(){return!(a.unstable_now()-q<V)}function B(){if(H!==null){var S=a.unstable_now();q=S;var C=!0;try{C=H(!0,S)}finally{C?E():(O=!1,H=null)}}else O=!1}var E;if(typeof y=="function")E=function(){y(B)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,A=P.port2;P.port1.onmessage=B,E=function(){A.postMessage(null)}}else E=function(){p(B,0)};function k(S){H=S,O||(O=!0,E())}function j(S,C){F=p(function(){S(a.unstable_now())},C)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(S){S.callback=null},a.unstable_continueExecution=function(){x||m||(x=!0,k(_))},a.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<S?Math.floor(1e3/S):5},a.unstable_getCurrentPriorityLevel=function(){return u},a.unstable_getFirstCallbackNode=function(){return t(i)},a.unstable_next=function(S){switch(u){case 1:case 2:case 3:var C=3;break;default:C=u}var D=u;u=C;try{return S()}finally{u=D}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(S,C){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var D=u;u=S;try{return C()}finally{u=D}},a.unstable_scheduleCallback=function(S,C,D){var R=a.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?R+D:R):D=R,S){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=D+L,S={id:s++,callback:C,priorityLevel:S,startTime:D,expirationTime:L,sortIndex:-1},D>R?(S.sortIndex=D,o(r,S),t(i)===null&&S===t(r)&&(b?(v(F),F=-1):b=!0,j(T,D-R))):(S.sortIndex=L,o(i,S),x||m||(x=!0,k(_))),S},a.unstable_shouldYield=W,a.unstable_wrapCallback=function(S){var C=u;return function(){var D=u;u=C;try{return S.apply(this,arguments)}finally{u=D}}}})(af)),af}var J0;function r1(){return J0||(J0=1,nf.exports=t1()),nf.exports}var ex;function s1(){if(ex)return Mn;ex=1;var a=pm(),o=r1();function t(g){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)w+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,h={};function d(g,w){n(g,w),n(g+"Capture",w)}function n(g,w){for(h[g]=w,g=0;g<w.length;g++)f.add(w[g])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i=Object.prototype.hasOwnProperty,r=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s={},c={};function u(g){return i.call(c,g)?!0:i.call(s,g)?!1:r.test(g)?c[g]=!0:(s[g]=!0,!1)}function m(g,w,I,K){if(I!==null&&I.type===0)return!1;switch(typeof w){case"function":case"symbol":return!0;case"boolean":return K?!1:I!==null?!I.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function x(g,w,I,K){if(w===null||typeof w>"u"||m(g,w,I,K))return!0;if(K)return!1;if(I!==null)switch(I.type){case 3:return!w;case 4:return w===!1;case 5:return isNaN(w);case 6:return isNaN(w)||1>w}return!1}function b(g,w,I,K,ee,re,ge){this.acceptsBooleans=w===2||w===3||w===4,this.attributeName=K,this.attributeNamespace=ee,this.mustUseProperty=I,this.propertyName=g,this.type=w,this.sanitizeURL=re,this.removeEmptyString=ge}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){p[g]=new b(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var w=g[0];p[w]=new b(w,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){p[g]=new b(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){p[g]=new b(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){p[g]=new b(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){p[g]=new b(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){p[g]=new b(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){p[g]=new b(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){p[g]=new b(g,5,!1,g.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var w=g.replace(v,y);p[w]=new b(w,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var w=g.replace(v,y);p[w]=new b(w,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var w=g.replace(v,y);p[w]=new b(w,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){p[g]=new b(g,1,!1,g.toLowerCase(),null,!1,!1)}),p.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){p[g]=new b(g,1,!1,g.toLowerCase(),null,!0,!0)});function N(g,w,I,K){var ee=p.hasOwnProperty(w)?p[w]:null;(ee!==null?ee.type!==0:K||!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(x(w,I,ee,K)&&(I=null),K||ee===null?u(w)&&(I===null?g.removeAttribute(w):g.setAttribute(w,""+I)):ee.mustUseProperty?g[ee.propertyName]=I===null?ee.type===3?!1:"":I:(w=ee.attributeName,K=ee.attributeNamespace,I===null?g.removeAttribute(w):(ee=ee.type,I=ee===3||ee===4&&I===!0?"":""+I,K?g.setAttributeNS(K,w,I):g.setAttribute(w,I))))}var T=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),O=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),W=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(g){return g===null||typeof g!="object"?null:(g=S&&g[S]||g["@@iterator"],typeof g=="function"?g:null)}var D=Object.assign,R;function L(g){if(R===void 0)try{throw Error()}catch(I){var w=I.stack.trim().match(/\n( *(at )?)/);R=w&&w[1]||""}return`
`+R+g}var Y=!1;function X(g,w){if(!g||Y)return"";Y=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(vt){var K=vt}Reflect.construct(g,[],w)}else{try{w.call()}catch(vt){K=vt}g.call(w.prototype)}else{try{throw Error()}catch(vt){K=vt}g()}}catch(vt){if(vt&&K&&typeof vt.stack=="string"){for(var ee=vt.stack.split(`
`),re=K.stack.split(`
`),ge=ee.length-1,Fe=re.length-1;1<=ge&&0<=Fe&&ee[ge]!==re[Fe];)Fe--;for(;1<=ge&&0<=Fe;ge--,Fe--)if(ee[ge]!==re[Fe]){if(ge!==1||Fe!==1)do if(ge--,Fe--,0>Fe||ee[ge]!==re[Fe]){var We=`
`+ee[ge].replace(" at new "," at ");return g.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",g.displayName)),We}while(1<=ge&&0<=Fe);break}}}finally{Y=!1,Error.prepareStackTrace=I}return(g=g?g.displayName||g.name:"")?L(g):""}function ae(g){switch(g.tag){case 5:return L(g.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return g=X(g.type,!1),g;case 11:return g=X(g.type.render,!1),g;case 1:return g=X(g.type,!0),g;default:return""}}function $(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case H:return"Fragment";case O:return"Portal";case V:return"Profiler";case F:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case W:return(g.displayName||"Context")+".Consumer";case q:return(g._context.displayName||"Context")+".Provider";case B:var w=g.render;return g=g.displayName,g||(g=w.displayName||w.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case A:return w=g.displayName||null,w!==null?w:$(g.type)||"Memo";case k:w=g._payload,g=g._init;try{return $(g(w))}catch{}}return null}function Q(g){var w=g.type;switch(g.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=w.render,g=g.displayName||g.name||"",w.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(w);case 8:return w===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function z(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function M(g){var w=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(w==="checkbox"||w==="radio")}function U(g){var w=M(g)?"checked":"value",I=Object.getOwnPropertyDescriptor(g.constructor.prototype,w),K=""+g[w];if(!g.hasOwnProperty(w)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var ee=I.get,re=I.set;return Object.defineProperty(g,w,{configurable:!0,get:function(){return ee.call(this)},set:function(ge){K=""+ge,re.call(this,ge)}}),Object.defineProperty(g,w,{enumerable:I.enumerable}),{getValue:function(){return K},setValue:function(ge){K=""+ge},stopTracking:function(){g._valueTracker=null,delete g[w]}}}}function te(g){g._valueTracker||(g._valueTracker=U(g))}function ie(g){if(!g)return!1;var w=g._valueTracker;if(!w)return!0;var I=w.getValue(),K="";return g&&(K=M(g)?g.checked?"true":"false":g.value),g=K,g!==I?(w.setValue(g),!0):!1}function se(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function le(g,w){var I=w.checked;return D({},w,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:I??g._wrapperState.initialChecked})}function Ne(g,w){var I=w.defaultValue==null?"":w.defaultValue,K=w.checked!=null?w.checked:w.defaultChecked;I=z(w.value!=null?w.value:I),g._wrapperState={initialChecked:K,initialValue:I,controlled:w.type==="checkbox"||w.type==="radio"?w.checked!=null:w.value!=null}}function ke(g,w){w=w.checked,w!=null&&N(g,"checked",w,!1)}function Z(g,w){ke(g,w);var I=z(w.value),K=w.type;if(I!=null)K==="number"?(I===0&&g.value===""||g.value!=I)&&(g.value=""+I):g.value!==""+I&&(g.value=""+I);else if(K==="submit"||K==="reset"){g.removeAttribute("value");return}w.hasOwnProperty("value")?ve(g,w.type,I):w.hasOwnProperty("defaultValue")&&ve(g,w.type,z(w.defaultValue)),w.checked==null&&w.defaultChecked!=null&&(g.defaultChecked=!!w.defaultChecked)}function ce(g,w,I){if(w.hasOwnProperty("value")||w.hasOwnProperty("defaultValue")){var K=w.type;if(!(K!=="submit"&&K!=="reset"||w.value!==void 0&&w.value!==null))return;w=""+g._wrapperState.initialValue,I||w===g.value||(g.value=w),g.defaultValue=w}I=g.name,I!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,I!==""&&(g.name=I)}function ve(g,w,I){(w!=="number"||se(g.ownerDocument)!==g)&&(I==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+I&&(g.defaultValue=""+I))}var De=Array.isArray;function Ae(g,w,I,K){if(g=g.options,w){w={};for(var ee=0;ee<I.length;ee++)w["$"+I[ee]]=!0;for(I=0;I<g.length;I++)ee=w.hasOwnProperty("$"+g[I].value),g[I].selected!==ee&&(g[I].selected=ee),ee&&K&&(g[I].defaultSelected=!0)}else{for(I=""+z(I),w=null,ee=0;ee<g.length;ee++){if(g[ee].value===I){g[ee].selected=!0,K&&(g[ee].defaultSelected=!0);return}w!==null||g[ee].disabled||(w=g[ee])}w!==null&&(w.selected=!0)}}function Ie(g,w){if(w.dangerouslySetInnerHTML!=null)throw Error(t(91));return D({},w,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function Ue(g,w){var I=w.value;if(I==null){if(I=w.children,w=w.defaultValue,I!=null){if(w!=null)throw Error(t(92));if(De(I)){if(1<I.length)throw Error(t(93));I=I[0]}w=I}w==null&&(w=""),I=w}g._wrapperState={initialValue:z(I)}}function Ge(g,w){var I=z(w.value),K=z(w.defaultValue);I!=null&&(I=""+I,I!==g.value&&(g.value=I),w.defaultValue==null&&g.defaultValue!==I&&(g.defaultValue=I)),K!=null&&(g.defaultValue=""+K)}function Le(g){var w=g.textContent;w===g._wrapperState.initialValue&&w!==""&&w!==null&&(g.value=w)}function at(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(g,w){return g==null||g==="http://www.w3.org/1999/xhtml"?at(w):g==="http://www.w3.org/2000/svg"&&w==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var Ce,it=(function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(w,I,K,ee){MSApp.execUnsafeLocalFunction(function(){return g(w,I,K,ee)})}:g})(function(g,w){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=w;else{for(Ce=Ce||document.createElement("div"),Ce.innerHTML="<svg>"+w.valueOf().toString()+"</svg>",w=Ce.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;w.firstChild;)g.appendChild(w.firstChild)}});function xt(g,w){if(w){var I=g.firstChild;if(I&&I===g.lastChild&&I.nodeType===3){I.nodeValue=w;return}}g.textContent=w}var jt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ee=["Webkit","ms","Moz","O"];Object.keys(jt).forEach(function(g){Ee.forEach(function(w){w=w+g.charAt(0).toUpperCase()+g.substring(1),jt[w]=jt[g]})});function xe(g,w,I){return w==null||typeof w=="boolean"||w===""?"":I||typeof w!="number"||w===0||jt.hasOwnProperty(g)&&jt[g]?(""+w).trim():w+"px"}function Be(g,w){g=g.style;for(var I in w)if(w.hasOwnProperty(I)){var K=I.indexOf("--")===0,ee=xe(I,w[I],K);I==="float"&&(I="cssFloat"),K?g.setProperty(I,ee):g[I]=ee}}var $e=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(g,w){if(w){if($e[g]&&(w.children!=null||w.dangerouslySetInnerHTML!=null))throw Error(t(137,g));if(w.dangerouslySetInnerHTML!=null){if(w.children!=null)throw Error(t(60));if(typeof w.dangerouslySetInnerHTML!="object"||!("__html"in w.dangerouslySetInnerHTML))throw Error(t(61))}if(w.style!=null&&typeof w.style!="object")throw Error(t(62))}}function oe(g,w){if(g.indexOf("-")===-1)return typeof w.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var me=null;function ue(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var ze=null,tt=null,kt=null;function we(g){if(g=Yl(g)){if(typeof ze!="function")throw Error(t(280));var w=g.stateNode;w&&(w=bd(w),ze(g.stateNode,g.type,w))}}function st(g){tt?kt?kt.push(g):kt=[g]:tt=g}function wt(){if(tt){var g=tt,w=kt;if(kt=tt=null,we(g),w)for(g=0;g<w.length;g++)we(w[g])}}function pe(g,w){return g(w)}function Qe(){}var fe=!1;function He(g,w,I){if(fe)return g(w,I);fe=!0;try{return pe(g,w,I)}finally{fe=!1,(tt!==null||kt!==null)&&(Qe(),wt())}}function lt(g,w){var I=g.stateNode;if(I===null)return null;var K=bd(I);if(K===null)return null;I=K[w];e:switch(w){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(K=!K.disabled)||(g=g.type,K=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!K;break e;default:g=!1}if(g)return null;if(I&&typeof I!="function")throw Error(t(231,w,typeof I));return I}var Pe=!1;if(l)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{Pe=!1}function je(g,w,I,K,ee,re,ge,Fe,We){var vt=Array.prototype.slice.call(arguments,3);try{w.apply(I,vt)}catch(Vt){this.onError(Vt)}}var Me=!1,Ye=null,dt=!1,mt=null,yt={onError:function(g){Me=!0,Ye=g}};function Gt(g,w,I,K,ee,re,ge,Fe,We){Me=!1,Ye=null,je.apply(yt,arguments)}function Lt(g,w,I,K,ee,re,ge,Fe,We){if(Gt.apply(this,arguments),Me){if(Me){var vt=Ye;Me=!1,Ye=null}else throw Error(t(198));dt||(dt=!0,mt=vt)}}function Oe(g){var w=g,I=g;if(g.alternate)for(;w.return;)w=w.return;else{g=w;do w=g,(w.flags&4098)!==0&&(I=w.return),g=w.return;while(g)}return w.tag===3?I:null}function ot(g){if(g.tag===13){var w=g.memoizedState;if(w===null&&(g=g.alternate,g!==null&&(w=g.memoizedState)),w!==null)return w.dehydrated}return null}function ht(g){if(Oe(g)!==g)throw Error(t(188))}function It(g){var w=g.alternate;if(!w){if(w=Oe(g),w===null)throw Error(t(188));return w!==g?null:g}for(var I=g,K=w;;){var ee=I.return;if(ee===null)break;var re=ee.alternate;if(re===null){if(K=ee.return,K!==null){I=K;continue}break}if(ee.child===re.child){for(re=ee.child;re;){if(re===I)return ht(ee),g;if(re===K)return ht(ee),w;re=re.sibling}throw Error(t(188))}if(I.return!==K.return)I=ee,K=re;else{for(var ge=!1,Fe=ee.child;Fe;){if(Fe===I){ge=!0,I=ee,K=re;break}if(Fe===K){ge=!0,K=ee,I=re;break}Fe=Fe.sibling}if(!ge){for(Fe=re.child;Fe;){if(Fe===I){ge=!0,I=re,K=ee;break}if(Fe===K){ge=!0,K=re,I=ee;break}Fe=Fe.sibling}if(!ge)throw Error(t(189))}}if(I.alternate!==K)throw Error(t(190))}if(I.tag!==3)throw Error(t(188));return I.stateNode.current===I?g:w}function Tt(g){return g=It(g),g!==null?Mt(g):null}function Mt(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var w=Mt(g);if(w!==null)return w;g=g.sibling}return null}var Re=o.unstable_scheduleCallback,pt=o.unstable_cancelCallback,Ot=o.unstable_shouldYield,Se=o.unstable_requestPaint,qe=o.unstable_now,ft=o.unstable_getCurrentPriorityLevel,Ct=o.unstable_ImmediatePriority,er=o.unstable_UserBlockingPriority,Rt=o.unstable_NormalPriority,Ht=o.unstable_LowPriority,ir=o.unstable_IdlePriority,Zt=null,qt=null;function nr(g){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Zt,g,void 0,(g.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:xr,rr=Math.log,yr=Math.LN2;function xr(g){return g>>>=0,g===0?32:31-(rr(g)/yr|0)|0}var Rr=64,jr=4194304;function Ds(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Sr(g,w){var I=g.pendingLanes;if(I===0)return 0;var K=0,ee=g.suspendedLanes,re=g.pingedLanes,ge=I&268435455;if(ge!==0){var Fe=ge&~ee;Fe!==0?K=Ds(Fe):(re&=ge,re!==0&&(K=Ds(re)))}else ge=I&~ee,ge!==0?K=Ds(ge):re!==0&&(K=Ds(re));if(K===0)return 0;if(w!==0&&w!==K&&(w&ee)===0&&(ee=K&-K,re=w&-w,ee>=re||ee===16&&(re&4194240)!==0))return w;if((K&4)!==0&&(K|=I&16),w=g.entangledLanes,w!==0)for(g=g.entanglements,w&=K;0<w;)I=31-fr(w),ee=1<<I,K|=g[I],w&=~ee;return K}function Wr(g,w){switch(g){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qn(g,w){for(var I=g.suspendedLanes,K=g.pingedLanes,ee=g.expirationTimes,re=g.pendingLanes;0<re;){var ge=31-fr(re),Fe=1<<ge,We=ee[ge];We===-1?((Fe&I)===0||(Fe&K)!==0)&&(ee[ge]=Wr(Fe,w)):We<=w&&(g.expiredLanes|=Fe),re&=~Fe}}function Ws(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Pr(){var g=Rr;return Rr<<=1,(Rr&4194240)===0&&(Rr=64),g}function Cr(g){for(var w=[],I=0;31>I;I++)w.push(g);return w}function es(g,w,I){g.pendingLanes|=w,w!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,w=31-fr(w),g[w]=I}function Fs(g,w){var I=g.pendingLanes&~w;g.pendingLanes=w,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=w,g.mutableReadLanes&=w,g.entangledLanes&=w,w=g.entanglements;var K=g.eventTimes;for(g=g.expirationTimes;0<I;){var ee=31-fr(I),re=1<<ee;w[ee]=0,K[ee]=-1,g[ee]=-1,I&=~re}}function da(g,w){var I=g.entangledLanes|=w;for(g=g.entanglements;I;){var K=31-fr(I),ee=1<<K;ee&w|g[K]&w&&(g[K]|=w),I&=~ee}}var kr=0;function mn(g){return g&=-g,1<g?4<g?(g&268435455)!==0?16:536870912:4:1}var kn,Ca,Un,Ts,zr,Ua=!1,ua=[],tn=null,ps=null,Ys=null,Xt=new Map,hn=new Map,_s=[],rs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function El(g,w){switch(g){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":Xt.delete(w.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(w.pointerId)}}function $i(g,w,I,K,ee,re){return g===null||g.nativeEvent!==re?(g={blockedOn:w,domEventName:I,eventSystemFlags:K,nativeEvent:re,targetContainers:[ee]},w!==null&&(w=Yl(w),w!==null&&Ca(w)),g):(g.eventSystemFlags|=K,w=g.targetContainers,ee!==null&&w.indexOf(ee)===-1&&w.push(ee),g)}function ed(g,w,I,K,ee){switch(w){case"focusin":return tn=$i(tn,g,w,I,K,ee),!0;case"dragenter":return ps=$i(ps,g,w,I,K,ee),!0;case"mouseover":return Ys=$i(Ys,g,w,I,K,ee),!0;case"pointerover":var re=ee.pointerId;return Xt.set(re,$i(Xt.get(re)||null,g,w,I,K,ee)),!0;case"gotpointercapture":return re=ee.pointerId,hn.set(re,$i(hn.get(re)||null,g,w,I,K,ee)),!0}return!1}function Dl(g){var w=Ji(g.target);if(w!==null){var I=Oe(w);if(I!==null){if(w=I.tag,w===13){if(w=ot(I),w!==null){g.blockedOn=w,zr(g.priority,function(){Un(I)});return}}else if(w===3&&I.stateNode.current.memoizedState.isDehydrated){g.blockedOn=I.tag===3?I.stateNode.containerInfo:null;return}}}g.blockedOn=null}function Yr(g){if(g.blockedOn!==null)return!1;for(var w=g.targetContainers;0<w.length;){var I=Do(g.domEventName,g.eventSystemFlags,w[0],g.nativeEvent);if(I===null){I=g.nativeEvent;var K=new I.constructor(I.type,I);me=K,I.target.dispatchEvent(K),me=null}else return w=Yl(I),w!==null&&Ca(w),g.blockedOn=I,!1;w.shift()}return!0}function _l(g,w,I){Yr(g)&&I.delete(w)}function Ao(){Ua=!1,tn!==null&&Yr(tn)&&(tn=null),ps!==null&&Yr(ps)&&(ps=null),Ys!==null&&Yr(Ys)&&(Ys=null),Xt.forEach(_l),hn.forEach(_l)}function Va(g,w){g.blockedOn===w&&(g.blockedOn=null,Ua||(Ua=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ao)))}function hi(g){function w(ee){return Va(ee,g)}if(0<ua.length){Va(ua[0],g);for(var I=1;I<ua.length;I++){var K=ua[I];K.blockedOn===g&&(K.blockedOn=null)}}for(tn!==null&&Va(tn,g),ps!==null&&Va(ps,g),Ys!==null&&Va(Ys,g),Xt.forEach(w),hn.forEach(w),I=0;I<_s.length;I++)K=_s[I],K.blockedOn===g&&(K.blockedOn=null);for(;0<_s.length&&(I=_s[0],I.blockedOn===null);)Dl(I),I.blockedOn===null&&_s.shift()}var qa=T.ReactCurrentBatchConfig,To=!0;function Pm(g,w,I,K){var ee=kr,re=qa.transition;qa.transition=null;try{kr=1,Hi(g,w,I,K)}finally{kr=ee,qa.transition=re}}function Im(g,w,I,K){var ee=kr,re=qa.transition;qa.transition=null;try{kr=4,Hi(g,w,I,K)}finally{kr=ee,qa.transition=re}}function Hi(g,w,I,K){if(To){var ee=Do(g,w,I,K);if(ee===null)xi(g,w,K,Eo,I),El(g,K);else if(ed(ee,g,w,I,K))K.stopPropagation();else if(El(g,K),w&4&&-1<rs.indexOf(g)){for(;ee!==null;){var re=Yl(ee);if(re!==null&&kn(re),re=Do(g,w,I,K),re===null&&xi(g,w,K,Eo,I),re===ee)break;ee=re}ee!==null&&K.stopPropagation()}else xi(g,w,K,null,I)}}var Eo=null;function Do(g,w,I,K){if(Eo=null,g=ue(K),g=Ji(g),g!==null)if(w=Oe(g),w===null)g=null;else if(I=w.tag,I===13){if(g=ot(w),g!==null)return g;g=null}else if(I===3){if(w.stateNode.current.memoizedState.isDehydrated)return w.tag===3?w.stateNode.containerInfo:null;g=null}else w!==g&&(g=null);return Eo=g,null}function td(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ft()){case Ct:return 1;case er:return 4;case Rt:case Ht:return 16;case ir:return 536870912;default:return 16}default:return 16}}var Aa=null,Pl=null,_o=null;function rd(){if(_o)return _o;var g,w=Pl,I=w.length,K,ee="value"in Aa?Aa.value:Aa.textContent,re=ee.length;for(g=0;g<I&&w[g]===ee[g];g++);var ge=I-g;for(K=1;K<=ge&&w[I-K]===ee[re-K];K++);return _o=ee.slice(g,1<K?1-K:void 0)}function Po(g){var w=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&w===13&&(g=13)):g=w,g===10&&(g=13),32<=g||g===13?g:0}function Io(){return!0}function sd(){return!1}function fn(g){function w(I,K,ee,re,ge){this._reactName=I,this._targetInst=ee,this.type=K,this.nativeEvent=re,this.target=ge,this.currentTarget=null;for(var Fe in g)g.hasOwnProperty(Fe)&&(I=g[Fe],this[Fe]=I?I(re):re[Fe]);return this.isDefaultPrevented=(re.defaultPrevented!=null?re.defaultPrevented:re.returnValue===!1)?Io:sd,this.isPropagationStopped=sd,this}return D(w.prototype,{preventDefault:function(){this.defaultPrevented=!0;var I=this.nativeEvent;I&&(I.preventDefault?I.preventDefault():typeof I.returnValue!="unknown"&&(I.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var I=this.nativeEvent;I&&(I.stopPropagation?I.stopPropagation():typeof I.cancelBubble!="unknown"&&(I.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),w}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=fn(Ta),fi=D({},Ta,{view:0,detail:0}),nd=fn(fi),Mo,Ml,Ki,Ro=D({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==Ki&&(Ki&&g.type==="mousemove"?(Mo=g.screenX-Ki.screenX,Ml=g.screenY-Ki.screenY):Ml=Mo=0,Ki=g),Mo)},movementY:function(g){return"movementY"in g?g.movementY:Ml}}),ad=fn(Ro),Mm=D({},Ro,{dataTransfer:0}),Gi=fn(Mm),id=D({},fi,{relatedTarget:0}),zo=fn(id),od=D({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),Rm=fn(od),zm=D({},Ta,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),Zn=fn(zm),ld=D({},Ta,{data:0}),cd=fn(ld),Lm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Om={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bm(g){var w=this.nativeEvent;return w.getModifierState?w.getModifierState(g):(g=Fm[g])?!!w[g]:!1}function pi(){return Bm}var Rl=D({},fi,{key:function(g){if(g.key){var w=Lm[g.key]||g.key;if(w!=="Unidentified")return w}return g.type==="keypress"?(g=Po(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?Om[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(g){return g.type==="keypress"?Po(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?Po(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),Ea=fn(Rl),Qs=D({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dd=fn(Qs),Um=D({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),Vm=fn(Um),qm=D({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),$m=fn(qm),$a=D({},Ro,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),ma=fn($a),Lo=[9,13,27,32],zl=l&&"CompositionEvent"in window,Wi=null;l&&"documentMode"in document&&(Wi=document.documentMode);var Ll=l&&"TextEvent"in window&&!Wi,Ol=l&&(!zl||Wi&&8<Wi&&11>=Wi),Fl=" ",Bl=!1;function Ul(g,w){switch(g){case"keyup":return Lo.indexOf(w.keyCode)!==-1;case"keydown":return w.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vl(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var Ha=!1;function Hm(g,w){switch(g){case"compositionend":return Vl(w);case"keypress":return w.which!==32?null:(Bl=!0,Fl);case"textInput":return g=w.data,g===Fl&&Bl?null:g;default:return null}}function ud(g,w){if(Ha)return g==="compositionend"||!zl&&Ul(g,w)?(g=rd(),_o=Pl=Aa=null,Ha=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(w.ctrlKey||w.altKey||w.metaKey)||w.ctrlKey&&w.altKey){if(w.char&&1<w.char.length)return w.char;if(w.which)return String.fromCharCode(w.which)}return null;case"compositionend":return Ol&&w.locale!=="ko"?null:w.data;default:return null}}var Km={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function md(g){var w=g&&g.nodeName&&g.nodeName.toLowerCase();return w==="input"?!!Km[g.type]:w==="textarea"}function hd(g,w,I,K){st(K),w=Wa(w,"onChange"),0<w.length&&(I=new Il("onChange","change",null,I,K),g.push({event:I,listeners:w}))}var Yi=null,Qi=null;function Gm(g){Ga(g,0)}function Oo(g){var w=$o(g);if(ie(w))return g}function Fo(g,w){if(g==="change")return w}var fd=!1;if(l){var Bo;if(l){var ql="oninput"in document;if(!ql){var $l=document.createElement("div");$l.setAttribute("oninput","return;"),ql=typeof $l.oninput=="function"}Bo=ql}else Bo=!1;fd=Bo&&(!document.documentMode||9<document.documentMode)}function Da(){Yi&&(Yi.detachEvent("onpropertychange",gi),Qi=Yi=null)}function gi(g){if(g.propertyName==="value"&&Oo(Qi)){var w=[];hd(w,Qi,g,ue(g)),He(Gm,w)}}function Uo(g,w,I){g==="focusin"?(Da(),Yi=w,Qi=I,Yi.attachEvent("onpropertychange",gi)):g==="focusout"&&Da()}function Zi(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return Oo(Qi)}function Wm(g,w){if(g==="click")return Oo(w)}function Hl(g,w){if(g==="input"||g==="change")return Oo(w)}function Kl(g,w){return g===w&&(g!==0||1/g===1/w)||g!==g&&w!==w}var jn=typeof Object.is=="function"?Object.is:Kl;function Xi(g,w){if(jn(g,w))return!0;if(typeof g!="object"||g===null||typeof w!="object"||w===null)return!1;var I=Object.keys(g),K=Object.keys(w);if(I.length!==K.length)return!1;for(K=0;K<I.length;K++){var ee=I[K];if(!i.call(w,ee)||!jn(g[ee],w[ee]))return!1}return!0}function pd(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function gd(g,w){var I=pd(g);g=0;for(var K;I;){if(I.nodeType===3){if(K=g+I.textContent.length,g<=w&&K>=w)return{node:I,offset:w-g};g=K}e:{for(;I;){if(I.nextSibling){I=I.nextSibling;break e}I=I.parentNode}I=void 0}I=pd(I)}}function xd(g,w){return g&&w?g===w?!0:g&&g.nodeType===3?!1:w&&w.nodeType===3?xd(g,w.parentNode):"contains"in g?g.contains(w):g.compareDocumentPosition?!!(g.compareDocumentPosition(w)&16):!1:!1}function J(){for(var g=window,w=se();w instanceof g.HTMLIFrameElement;){try{var I=typeof w.contentWindow.location.href=="string"}catch{I=!1}if(I)g=w.contentWindow;else break;w=se(g.document)}return w}function de(g){var w=g&&g.nodeName&&g.nodeName.toLowerCase();return w&&(w==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||w==="textarea"||g.contentEditable==="true")}function ne(g){var w=J(),I=g.focusedElem,K=g.selectionRange;if(w!==I&&I&&I.ownerDocument&&xd(I.ownerDocument.documentElement,I)){if(K!==null&&de(I)){if(w=K.start,g=K.end,g===void 0&&(g=w),"selectionStart"in I)I.selectionStart=w,I.selectionEnd=Math.min(g,I.value.length);else if(g=(w=I.ownerDocument||document)&&w.defaultView||window,g.getSelection){g=g.getSelection();var ee=I.textContent.length,re=Math.min(K.start,ee);K=K.end===void 0?re:Math.min(K.end,ee),!g.extend&&re>K&&(ee=K,K=re,re=ee),ee=gd(I,re);var ge=gd(I,K);ee&&ge&&(g.rangeCount!==1||g.anchorNode!==ee.node||g.anchorOffset!==ee.offset||g.focusNode!==ge.node||g.focusOffset!==ge.offset)&&(w=w.createRange(),w.setStart(ee.node,ee.offset),g.removeAllRanges(),re>K?(g.addRange(w),g.extend(ge.node,ge.offset)):(w.setEnd(ge.node,ge.offset),g.addRange(w)))}}for(w=[],g=I;g=g.parentNode;)g.nodeType===1&&w.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<w.length;I++)g=w[I],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var be=l&&"documentMode"in document&&11>=document.documentMode,Te=null,Ve=null,_e=null,Ke=!1;function nt(g,w,I){var K=I.window===I?I.document:I.nodeType===9?I:I.ownerDocument;Ke||Te==null||Te!==se(K)||(K=Te,"selectionStart"in K&&de(K)?K={start:K.selectionStart,end:K.selectionEnd}:(K=(K.ownerDocument&&K.ownerDocument.defaultView||window).getSelection(),K={anchorNode:K.anchorNode,anchorOffset:K.anchorOffset,focusNode:K.focusNode,focusOffset:K.focusOffset}),_e&&Xi(_e,K)||(_e=K,K=Wa(Ve,"onSelect"),0<K.length&&(w=new Il("onSelect","select",null,w,I),g.push({event:w,listeners:K}),w.target=Te)))}function et(g,w){var I={};return I[g.toLowerCase()]=w.toLowerCase(),I["Webkit"+g]="webkit"+w,I["Moz"+g]="moz"+w,I}var Je={animationend:et("Animation","AnimationEnd"),animationiteration:et("Animation","AnimationIteration"),animationstart:et("Animation","AnimationStart"),transitionend:et("Transition","TransitionEnd")},St={},bt={};l&&(bt=document.createElement("div").style,"AnimationEvent"in window||(delete Je.animationend.animation,delete Je.animationiteration.animation,delete Je.animationstart.animation),"TransitionEvent"in window||delete Je.transitionend.transition);function Dt(g){if(St[g])return St[g];if(!Je[g])return g;var w=Je[g],I;for(I in w)if(w.hasOwnProperty(I)&&I in bt)return St[g]=w[I];return g}var Ft=Dt("animationend"),tr=Dt("animationiteration"),Bt=Dt("animationstart"),vr=Dt("transitionend"),Jt=new Map,ur="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pt(g,w){Jt.set(g,w),d(w,[g])}for(var Dr=0;Dr<ur.length;Dr++){var lr=ur[Dr],us=lr.toLowerCase(),Vn=lr[0].toUpperCase()+lr.slice(1);Pt(us,"on"+Vn)}Pt(Ft,"onAnimationEnd"),Pt(tr,"onAnimationIteration"),Pt(Bt,"onAnimationStart"),Pt("dblclick","onDoubleClick"),Pt("focusin","onFocus"),Pt("focusout","onBlur"),Pt(vr,"onTransitionEnd"),n("onMouseEnter",["mouseout","mouseover"]),n("onMouseLeave",["mouseout","mouseover"]),n("onPointerEnter",["pointerout","pointerover"]),n("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ka=new Set("cancel close invalid load scroll toggle".split(" ").concat(ws));function Sn(g,w,I){var K=g.type||"unknown-event";g.currentTarget=I,Lt(K,w,void 0,g),g.currentTarget=null}function Ga(g,w){w=(w&4)!==0;for(var I=0;I<g.length;I++){var K=g[I],ee=K.event;K=K.listeners;e:{var re=void 0;if(w)for(var ge=K.length-1;0<=ge;ge--){var Fe=K[ge],We=Fe.instance,vt=Fe.currentTarget;if(Fe=Fe.listener,We!==re&&ee.isPropagationStopped())break e;Sn(ee,Fe,vt),re=We}else for(ge=0;ge<K.length;ge++){if(Fe=K[ge],We=Fe.instance,vt=Fe.currentTarget,Fe=Fe.listener,We!==re&&ee.isPropagationStopped())break e;Sn(ee,Fe,vt),re=We}}}if(dt)throw g=mt,dt=!1,mt=null,g}function Lr(g,w){var I=w[Zm];I===void 0&&(I=w[Zm]=new Set);var K=g+"__bubble";I.has(K)||(Ns(w,g,2,!1),I.add(K))}function Cn(g,w,I){var K=0;w&&(K|=4),Ns(I,g,K,w)}var An="_reactListening"+Math.random().toString(36).slice(2);function Tn(g){if(!g[An]){g[An]=!0,f.forEach(function(I){I!=="selectionchange"&&(Ka.has(I)||Cn(I,!1,g),Cn(I,!0,g))});var w=g.nodeType===9?g:g.ownerDocument;w===null||w[An]||(w[An]=!0,Cn("selectionchange",!1,w))}}function Ns(g,w,I,K){switch(td(w)){case 1:var ee=Pm;break;case 4:ee=Im;break;default:ee=Hi}I=ee.bind(null,w,I,g),ee=void 0,!Pe||w!=="touchstart"&&w!=="touchmove"&&w!=="wheel"||(ee=!0),K?ee!==void 0?g.addEventListener(w,I,{capture:!0,passive:ee}):g.addEventListener(w,I,!0):ee!==void 0?g.addEventListener(w,I,{passive:ee}):g.addEventListener(w,I,!1)}function xi(g,w,I,K,ee){var re=K;if((w&1)===0&&(w&2)===0&&K!==null)e:for(;;){if(K===null)return;var ge=K.tag;if(ge===3||ge===4){var Fe=K.stateNode.containerInfo;if(Fe===ee||Fe.nodeType===8&&Fe.parentNode===ee)break;if(ge===4)for(ge=K.return;ge!==null;){var We=ge.tag;if((We===3||We===4)&&(We=ge.stateNode.containerInfo,We===ee||We.nodeType===8&&We.parentNode===ee))return;ge=ge.return}for(;Fe!==null;){if(ge=Ji(Fe),ge===null)return;if(We=ge.tag,We===5||We===6){K=re=ge;continue e}Fe=Fe.parentNode}}K=K.return}He(function(){var vt=re,Vt=ue(I),Wt=[];e:{var Ut=Jt.get(g);if(Ut!==void 0){var sr=Il,or=g;switch(g){case"keypress":if(Po(I)===0)break e;case"keydown":case"keyup":sr=Ea;break;case"focusin":or="focus",sr=zo;break;case"focusout":or="blur",sr=zo;break;case"beforeblur":case"afterblur":sr=zo;break;case"click":if(I.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":sr=ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":sr=Gi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":sr=Vm;break;case Ft:case tr:case Bt:sr=Rm;break;case vr:sr=$m;break;case"scroll":sr=nd;break;case"wheel":sr=ma;break;case"copy":case"cut":case"paste":sr=Zn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":sr=dd}var cr=(w&4)!==0,js=!cr&&g==="scroll",ct=cr?Ut!==null?Ut+"Capture":null:Ut;cr=[];for(var Ze=vt,gt;Ze!==null;){gt=Ze;var Qt=gt.stateNode;if(gt.tag===5&&Qt!==null&&(gt=Qt,ct!==null&&(Qt=lt(Ze,ct),Qt!=null&&cr.push(ha(Ze,Qt,gt)))),js)break;Ze=Ze.return}0<cr.length&&(Ut=new sr(Ut,or,null,I,Vt),Wt.push({event:Ut,listeners:cr}))}}if((w&7)===0){e:{if(Ut=g==="mouseover"||g==="pointerover",sr=g==="mouseout"||g==="pointerout",Ut&&I!==me&&(or=I.relatedTarget||I.fromElement)&&(Ji(or)||or[Ya]))break e;if((sr||Ut)&&(Ut=Vt.window===Vt?Vt:(Ut=Vt.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,sr?(or=I.relatedTarget||I.toElement,sr=vt,or=or?Ji(or):null,or!==null&&(js=Oe(or),or!==js||or.tag!==5&&or.tag!==6)&&(or=null)):(sr=null,or=vt),sr!==or)){if(cr=ad,Qt="onMouseLeave",ct="onMouseEnter",Ze="mouse",(g==="pointerout"||g==="pointerover")&&(cr=dd,Qt="onPointerLeave",ct="onPointerEnter",Ze="pointer"),js=sr==null?Ut:$o(sr),gt=or==null?Ut:$o(or),Ut=new cr(Qt,Ze+"leave",sr,I,Vt),Ut.target=js,Ut.relatedTarget=gt,Qt=null,Ji(Vt)===vt&&(cr=new cr(ct,Ze+"enter",or,I,Vt),cr.target=gt,cr.relatedTarget=js,Qt=cr),js=Qt,sr&&or)t:{for(cr=sr,ct=or,Ze=0,gt=cr;gt;gt=_a(gt))Ze++;for(gt=0,Qt=ct;Qt;Qt=_a(Qt))gt++;for(;0<Ze-gt;)cr=_a(cr),Ze--;for(;0<gt-Ze;)ct=_a(ct),gt--;for(;Ze--;){if(cr===ct||ct!==null&&cr===ct.alternate)break t;cr=_a(cr),ct=_a(ct)}cr=null}else cr=null;sr!==null&&fa(Wt,Ut,sr,cr,!1),or!==null&&js!==null&&fa(Wt,js,or,cr,!0)}}e:{if(Ut=vt?$o(vt):window,sr=Ut.nodeName&&Ut.nodeName.toLowerCase(),sr==="select"||sr==="input"&&Ut.type==="file")var dr=Fo;else if(md(Ut))if(fd)dr=Hl;else{dr=Zi;var pr=Uo}else(sr=Ut.nodeName)&&sr.toLowerCase()==="input"&&(Ut.type==="checkbox"||Ut.type==="radio")&&(dr=Wm);if(dr&&(dr=dr(g,vt))){hd(Wt,dr,I,Vt);break e}pr&&pr(g,Ut,vt),g==="focusout"&&(pr=Ut._wrapperState)&&pr.controlled&&Ut.type==="number"&&ve(Ut,"number",Ut.value)}switch(pr=vt?$o(vt):window,g){case"focusin":(md(pr)||pr.contentEditable==="true")&&(Te=pr,Ve=vt,_e=null);break;case"focusout":_e=Ve=Te=null;break;case"mousedown":Ke=!0;break;case"contextmenu":case"mouseup":case"dragend":Ke=!1,nt(Wt,I,Vt);break;case"selectionchange":if(be)break;case"keydown":case"keyup":nt(Wt,I,Vt)}var gr;if(zl)e:{switch(g){case"compositionstart":var br="onCompositionStart";break e;case"compositionend":br="onCompositionEnd";break e;case"compositionupdate":br="onCompositionUpdate";break e}br=void 0}else Ha?Ul(g,I)&&(br="onCompositionEnd"):g==="keydown"&&I.keyCode===229&&(br="onCompositionStart");br&&(Ol&&I.locale!=="ko"&&(Ha||br!=="onCompositionStart"?br==="onCompositionEnd"&&Ha&&(gr=rd()):(Aa=Vt,Pl="value"in Aa?Aa.value:Aa.textContent,Ha=!0)),pr=Wa(vt,br),0<pr.length&&(br=new cd(br,g,null,I,Vt),Wt.push({event:br,listeners:pr}),gr?br.data=gr:(gr=Vl(I),gr!==null&&(br.data=gr)))),(gr=Ll?Hm(g,I):ud(g,I))&&(vt=Wa(vt,"onBeforeInput"),0<vt.length&&(Vt=new cd("onBeforeInput","beforeinput",null,I,Vt),Wt.push({event:Vt,listeners:vt}),Vt.data=gr))}Ga(Wt,w)})}function ha(g,w,I){return{instance:g,listener:w,currentTarget:I}}function Wa(g,w){for(var I=w+"Capture",K=[];g!==null;){var ee=g,re=ee.stateNode;ee.tag===5&&re!==null&&(ee=re,re=lt(g,I),re!=null&&K.unshift(ha(g,re,ee)),re=lt(g,w),re!=null&&K.push(ha(g,re,ee))),g=g.return}return K}function _a(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function fa(g,w,I,K,ee){for(var re=w._reactName,ge=[];I!==null&&I!==K;){var Fe=I,We=Fe.alternate,vt=Fe.stateNode;if(We!==null&&We===K)break;Fe.tag===5&&vt!==null&&(Fe=vt,ee?(We=lt(I,re),We!=null&&ge.unshift(ha(I,We,Fe))):ee||(We=lt(I,re),We!=null&&ge.push(ha(I,We,Fe)))),I=I.return}ge.length!==0&&g.push({event:w,listeners:ge})}var ns=/\r\n?/g,Ym=/\u0000|\uFFFD/g;function Kt(g){return(typeof g=="string"?g:""+g).replace(ns,`
`).replace(Ym,"")}function Tr(g,w,I){if(w=Kt(w),Kt(g)!==w&&I)throw Error(t(425))}function gs(){}var Qr=null,qn=null;function rn(g,w){return g==="textarea"||g==="noscript"||typeof w.children=="string"||typeof w.children=="number"||typeof w.dangerouslySetInnerHTML=="object"&&w.dangerouslySetInnerHTML!==null&&w.dangerouslySetInnerHTML.__html!=null}var Vo=typeof setTimeout=="function"?setTimeout:void 0,yd=typeof clearTimeout=="function"?clearTimeout:void 0,Gl=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof Gl<"u"?function(g){return Gl.resolve(null).then(g).catch(fw)}:Vo;function fw(g){setTimeout(function(){throw g})}function Qm(g,w){var I=w,K=0;do{var ee=I.nextSibling;if(g.removeChild(I),ee&&ee.nodeType===8)if(I=ee.data,I==="/$"){if(K===0){g.removeChild(ee),hi(w);return}K--}else I!=="$"&&I!=="$?"&&I!=="$!"||K++;I=ee}while(I);hi(w)}function yi(g){for(;g!=null;g=g.nextSibling){var w=g.nodeType;if(w===1||w===3)break;if(w===8){if(w=g.data,w==="$"||w==="$!"||w==="$?")break;if(w==="/$")return null}}return g}function pg(g){g=g.previousSibling;for(var w=0;g;){if(g.nodeType===8){var I=g.data;if(I==="$"||I==="$!"||I==="$?"){if(w===0)return g;w--}else I==="/$"&&w++}g=g.previousSibling}return null}var qo=Math.random().toString(36).slice(2),Pa="__reactFiber$"+qo,Wl="__reactProps$"+qo,Ya="__reactContainer$"+qo,Zm="__reactEvents$"+qo,pw="__reactListeners$"+qo,gw="__reactHandles$"+qo;function Ji(g){var w=g[Pa];if(w)return w;for(var I=g.parentNode;I;){if(w=I[Ya]||I[Pa]){if(I=w.alternate,w.child!==null||I!==null&&I.child!==null)for(g=pg(g);g!==null;){if(I=g[Pa])return I;g=pg(g)}return w}g=I,I=g.parentNode}return null}function Yl(g){return g=g[Pa]||g[Ya],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function $o(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(t(33))}function bd(g){return g[Wl]||null}var Xm=[],Ho=-1;function bi(g){return{current:g}}function as(g){0>Ho||(g.current=Xm[Ho],Xm[Ho]=null,Ho--)}function ss(g,w){Ho++,Xm[Ho]=g.current,g.current=w}var vi={},sn=bi(vi),En=bi(!1),eo=vi;function Ko(g,w){var I=g.type.contextTypes;if(!I)return vi;var K=g.stateNode;if(K&&K.__reactInternalMemoizedUnmaskedChildContext===w)return K.__reactInternalMemoizedMaskedChildContext;var ee={},re;for(re in I)ee[re]=w[re];return K&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=w,g.__reactInternalMemoizedMaskedChildContext=ee),ee}function Dn(g){return g=g.childContextTypes,g!=null}function vd(){as(En),as(sn)}function gg(g,w,I){if(sn.current!==vi)throw Error(t(168));ss(sn,w),ss(En,I)}function xg(g,w,I){var K=g.stateNode;if(w=w.childContextTypes,typeof K.getChildContext!="function")return I;K=K.getChildContext();for(var ee in K)if(!(ee in w))throw Error(t(108,Q(g)||"Unknown",ee));return D({},I,K)}function wd(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||vi,eo=sn.current,ss(sn,g),ss(En,En.current),!0}function yg(g,w,I){var K=g.stateNode;if(!K)throw Error(t(169));I?(g=xg(g,w,eo),K.__reactInternalMemoizedMergedChildContext=g,as(En),as(sn),ss(sn,g)):as(En),ss(En,I)}var Qa=null,Nd=!1,Jm=!1;function bg(g){Qa===null?Qa=[g]:Qa.push(g)}function xw(g){Nd=!0,bg(g)}function wi(){if(!Jm&&Qa!==null){Jm=!0;var g=0,w=kr;try{var I=Qa;for(kr=1;g<I.length;g++){var K=I[g];do K=K(!0);while(K!==null)}Qa=null,Nd=!1}catch(ee){throw Qa!==null&&(Qa=Qa.slice(g+1)),Re(Ct,wi),ee}finally{kr=w,Jm=!1}}return null}var Go=[],Wo=0,kd=null,jd=0,Xn=[],Jn=0,to=null,Za=1,Xa="";function ro(g,w){Go[Wo++]=jd,Go[Wo++]=kd,kd=g,jd=w}function vg(g,w,I){Xn[Jn++]=Za,Xn[Jn++]=Xa,Xn[Jn++]=to,to=g;var K=Za;g=Xa;var ee=32-fr(K)-1;K&=~(1<<ee),I+=1;var re=32-fr(w)+ee;if(30<re){var ge=ee-ee%5;re=(K&(1<<ge)-1).toString(32),K>>=ge,ee-=ge,Za=1<<32-fr(w)+ee|I<<ee|K,Xa=re+g}else Za=1<<re|I<<ee|K,Xa=g}function eh(g){g.return!==null&&(ro(g,1),vg(g,1,0))}function th(g){for(;g===kd;)kd=Go[--Wo],Go[Wo]=null,jd=Go[--Wo],Go[Wo]=null;for(;g===to;)to=Xn[--Jn],Xn[Jn]=null,Xa=Xn[--Jn],Xn[Jn]=null,Za=Xn[--Jn],Xn[Jn]=null}var $n=null,Hn=null,ms=!1,pa=null;function wg(g,w){var I=sa(5,null,null,0);I.elementType="DELETED",I.stateNode=w,I.return=g,w=g.deletions,w===null?(g.deletions=[I],g.flags|=16):w.push(I)}function Ng(g,w){switch(g.tag){case 5:var I=g.type;return w=w.nodeType!==1||I.toLowerCase()!==w.nodeName.toLowerCase()?null:w,w!==null?(g.stateNode=w,$n=g,Hn=yi(w.firstChild),!0):!1;case 6:return w=g.pendingProps===""||w.nodeType!==3?null:w,w!==null?(g.stateNode=w,$n=g,Hn=null,!0):!1;case 13:return w=w.nodeType!==8?null:w,w!==null?(I=to!==null?{id:Za,overflow:Xa}:null,g.memoizedState={dehydrated:w,treeContext:I,retryLane:1073741824},I=sa(18,null,null,0),I.stateNode=w,I.return=g,g.child=I,$n=g,Hn=null,!0):!1;default:return!1}}function rh(g){return(g.mode&1)!==0&&(g.flags&128)===0}function sh(g){if(ms){var w=Hn;if(w){var I=w;if(!Ng(g,w)){if(rh(g))throw Error(t(418));w=yi(I.nextSibling);var K=$n;w&&Ng(g,w)?wg(K,I):(g.flags=g.flags&-4097|2,ms=!1,$n=g)}}else{if(rh(g))throw Error(t(418));g.flags=g.flags&-4097|2,ms=!1,$n=g}}}function kg(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;$n=g}function Sd(g){if(g!==$n)return!1;if(!ms)return kg(g),ms=!0,!1;var w;if((w=g.tag!==3)&&!(w=g.tag!==5)&&(w=g.type,w=w!=="head"&&w!=="body"&&!rn(g.type,g.memoizedProps)),w&&(w=Hn)){if(rh(g))throw jg(),Error(t(418));for(;w;)wg(g,w),w=yi(w.nextSibling)}if(kg(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));e:{for(g=g.nextSibling,w=0;g;){if(g.nodeType===8){var I=g.data;if(I==="/$"){if(w===0){Hn=yi(g.nextSibling);break e}w--}else I!=="$"&&I!=="$!"&&I!=="$?"||w++}g=g.nextSibling}Hn=null}}else Hn=$n?yi(g.stateNode.nextSibling):null;return!0}function jg(){for(var g=Hn;g;)g=yi(g.nextSibling)}function Yo(){Hn=$n=null,ms=!1}function nh(g){pa===null?pa=[g]:pa.push(g)}var yw=T.ReactCurrentBatchConfig;function Ql(g,w,I){if(g=I.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(t(309));var K=I.stateNode}if(!K)throw Error(t(147,g));var ee=K,re=""+g;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===re?w.ref:(w=function(ge){var Fe=ee.refs;ge===null?delete Fe[re]:Fe[re]=ge},w._stringRef=re,w)}if(typeof g!="string")throw Error(t(284));if(!I._owner)throw Error(t(290,g))}return g}function Cd(g,w){throw g=Object.prototype.toString.call(w),Error(t(31,g==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":g))}function Sg(g){var w=g._init;return w(g._payload)}function Cg(g){function w(ct,Ze){if(g){var gt=ct.deletions;gt===null?(ct.deletions=[Ze],ct.flags|=16):gt.push(Ze)}}function I(ct,Ze){if(!g)return null;for(;Ze!==null;)w(ct,Ze),Ze=Ze.sibling;return null}function K(ct,Ze){for(ct=new Map;Ze!==null;)Ze.key!==null?ct.set(Ze.key,Ze):ct.set(Ze.index,Ze),Ze=Ze.sibling;return ct}function ee(ct,Ze){return ct=Ei(ct,Ze),ct.index=0,ct.sibling=null,ct}function re(ct,Ze,gt){return ct.index=gt,g?(gt=ct.alternate,gt!==null?(gt=gt.index,gt<Ze?(ct.flags|=2,Ze):gt):(ct.flags|=2,Ze)):(ct.flags|=1048576,Ze)}function ge(ct){return g&&ct.alternate===null&&(ct.flags|=2),ct}function Fe(ct,Ze,gt,Qt){return Ze===null||Ze.tag!==6?(Ze=Yh(gt,ct.mode,Qt),Ze.return=ct,Ze):(Ze=ee(Ze,gt),Ze.return=ct,Ze)}function We(ct,Ze,gt,Qt){var dr=gt.type;return dr===H?Vt(ct,Ze,gt.props.children,Qt,gt.key):Ze!==null&&(Ze.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===k&&Sg(dr)===Ze.type)?(Qt=ee(Ze,gt.props),Qt.ref=Ql(ct,Ze,gt),Qt.return=ct,Qt):(Qt=Qd(gt.type,gt.key,gt.props,null,ct.mode,Qt),Qt.ref=Ql(ct,Ze,gt),Qt.return=ct,Qt)}function vt(ct,Ze,gt,Qt){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==gt.containerInfo||Ze.stateNode.implementation!==gt.implementation?(Ze=Qh(gt,ct.mode,Qt),Ze.return=ct,Ze):(Ze=ee(Ze,gt.children||[]),Ze.return=ct,Ze)}function Vt(ct,Ze,gt,Qt,dr){return Ze===null||Ze.tag!==7?(Ze=uo(gt,ct.mode,Qt,dr),Ze.return=ct,Ze):(Ze=ee(Ze,gt),Ze.return=ct,Ze)}function Wt(ct,Ze,gt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Ze=Yh(""+Ze,ct.mode,gt),Ze.return=ct,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case _:return gt=Qd(Ze.type,Ze.key,Ze.props,null,ct.mode,gt),gt.ref=Ql(ct,null,Ze),gt.return=ct,gt;case O:return Ze=Qh(Ze,ct.mode,gt),Ze.return=ct,Ze;case k:var Qt=Ze._init;return Wt(ct,Qt(Ze._payload),gt)}if(De(Ze)||C(Ze))return Ze=uo(Ze,ct.mode,gt,null),Ze.return=ct,Ze;Cd(ct,Ze)}return null}function Ut(ct,Ze,gt,Qt){var dr=Ze!==null?Ze.key:null;if(typeof gt=="string"&&gt!==""||typeof gt=="number")return dr!==null?null:Fe(ct,Ze,""+gt,Qt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case _:return gt.key===dr?We(ct,Ze,gt,Qt):null;case O:return gt.key===dr?vt(ct,Ze,gt,Qt):null;case k:return dr=gt._init,Ut(ct,Ze,dr(gt._payload),Qt)}if(De(gt)||C(gt))return dr!==null?null:Vt(ct,Ze,gt,Qt,null);Cd(ct,gt)}return null}function sr(ct,Ze,gt,Qt,dr){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number")return ct=ct.get(gt)||null,Fe(Ze,ct,""+Qt,dr);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case _:return ct=ct.get(Qt.key===null?gt:Qt.key)||null,We(Ze,ct,Qt,dr);case O:return ct=ct.get(Qt.key===null?gt:Qt.key)||null,vt(Ze,ct,Qt,dr);case k:var pr=Qt._init;return sr(ct,Ze,gt,pr(Qt._payload),dr)}if(De(Qt)||C(Qt))return ct=ct.get(gt)||null,Vt(Ze,ct,Qt,dr,null);Cd(Ze,Qt)}return null}function or(ct,Ze,gt,Qt){for(var dr=null,pr=null,gr=Ze,br=Ze=0,Vs=null;gr!==null&&br<gt.length;br++){gr.index>br?(Vs=gr,gr=null):Vs=gr.sibling;var $r=Ut(ct,gr,gt[br],Qt);if($r===null){gr===null&&(gr=Vs);break}g&&gr&&$r.alternate===null&&w(ct,gr),Ze=re($r,Ze,br),pr===null?dr=$r:pr.sibling=$r,pr=$r,gr=Vs}if(br===gt.length)return I(ct,gr),ms&&ro(ct,br),dr;if(gr===null){for(;br<gt.length;br++)gr=Wt(ct,gt[br],Qt),gr!==null&&(Ze=re(gr,Ze,br),pr===null?dr=gr:pr.sibling=gr,pr=gr);return ms&&ro(ct,br),dr}for(gr=K(ct,gr);br<gt.length;br++)Vs=sr(gr,ct,br,gt[br],Qt),Vs!==null&&(g&&Vs.alternate!==null&&gr.delete(Vs.key===null?br:Vs.key),Ze=re(Vs,Ze,br),pr===null?dr=Vs:pr.sibling=Vs,pr=Vs);return g&&gr.forEach(function(Di){return w(ct,Di)}),ms&&ro(ct,br),dr}function cr(ct,Ze,gt,Qt){var dr=C(gt);if(typeof dr!="function")throw Error(t(150));if(gt=dr.call(gt),gt==null)throw Error(t(151));for(var pr=dr=null,gr=Ze,br=Ze=0,Vs=null,$r=gt.next();gr!==null&&!$r.done;br++,$r=gt.next()){gr.index>br?(Vs=gr,gr=null):Vs=gr.sibling;var Di=Ut(ct,gr,$r.value,Qt);if(Di===null){gr===null&&(gr=Vs);break}g&&gr&&Di.alternate===null&&w(ct,gr),Ze=re(Di,Ze,br),pr===null?dr=Di:pr.sibling=Di,pr=Di,gr=Vs}if($r.done)return I(ct,gr),ms&&ro(ct,br),dr;if(gr===null){for(;!$r.done;br++,$r=gt.next())$r=Wt(ct,$r.value,Qt),$r!==null&&(Ze=re($r,Ze,br),pr===null?dr=$r:pr.sibling=$r,pr=$r);return ms&&ro(ct,br),dr}for(gr=K(ct,gr);!$r.done;br++,$r=gt.next())$r=sr(gr,ct,br,$r.value,Qt),$r!==null&&(g&&$r.alternate!==null&&gr.delete($r.key===null?br:$r.key),Ze=re($r,Ze,br),pr===null?dr=$r:pr.sibling=$r,pr=$r);return g&&gr.forEach(function(Zw){return w(ct,Zw)}),ms&&ro(ct,br),dr}function js(ct,Ze,gt,Qt){if(typeof gt=="object"&&gt!==null&&gt.type===H&&gt.key===null&&(gt=gt.props.children),typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case _:e:{for(var dr=gt.key,pr=Ze;pr!==null;){if(pr.key===dr){if(dr=gt.type,dr===H){if(pr.tag===7){I(ct,pr.sibling),Ze=ee(pr,gt.props.children),Ze.return=ct,ct=Ze;break e}}else if(pr.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===k&&Sg(dr)===pr.type){I(ct,pr.sibling),Ze=ee(pr,gt.props),Ze.ref=Ql(ct,pr,gt),Ze.return=ct,ct=Ze;break e}I(ct,pr);break}else w(ct,pr);pr=pr.sibling}gt.type===H?(Ze=uo(gt.props.children,ct.mode,Qt,gt.key),Ze.return=ct,ct=Ze):(Qt=Qd(gt.type,gt.key,gt.props,null,ct.mode,Qt),Qt.ref=Ql(ct,Ze,gt),Qt.return=ct,ct=Qt)}return ge(ct);case O:e:{for(pr=gt.key;Ze!==null;){if(Ze.key===pr)if(Ze.tag===4&&Ze.stateNode.containerInfo===gt.containerInfo&&Ze.stateNode.implementation===gt.implementation){I(ct,Ze.sibling),Ze=ee(Ze,gt.children||[]),Ze.return=ct,ct=Ze;break e}else{I(ct,Ze);break}else w(ct,Ze);Ze=Ze.sibling}Ze=Qh(gt,ct.mode,Qt),Ze.return=ct,ct=Ze}return ge(ct);case k:return pr=gt._init,js(ct,Ze,pr(gt._payload),Qt)}if(De(gt))return or(ct,Ze,gt,Qt);if(C(gt))return cr(ct,Ze,gt,Qt);Cd(ct,gt)}return typeof gt=="string"&&gt!==""||typeof gt=="number"?(gt=""+gt,Ze!==null&&Ze.tag===6?(I(ct,Ze.sibling),Ze=ee(Ze,gt),Ze.return=ct,ct=Ze):(I(ct,Ze),Ze=Yh(gt,ct.mode,Qt),Ze.return=ct,ct=Ze),ge(ct)):I(ct,Ze)}return js}var Qo=Cg(!0),Ag=Cg(!1),Ad=bi(null),Td=null,Zo=null,ah=null;function ih(){ah=Zo=Td=null}function oh(g){var w=Ad.current;as(Ad),g._currentValue=w}function lh(g,w,I){for(;g!==null;){var K=g.alternate;if((g.childLanes&w)!==w?(g.childLanes|=w,K!==null&&(K.childLanes|=w)):K!==null&&(K.childLanes&w)!==w&&(K.childLanes|=w),g===I)break;g=g.return}}function Xo(g,w){Td=g,ah=Zo=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&w)!==0&&(_n=!0),g.firstContext=null)}function ea(g){var w=g._currentValue;if(ah!==g)if(g={context:g,memoizedValue:w,next:null},Zo===null){if(Td===null)throw Error(t(308));Zo=g,Td.dependencies={lanes:0,firstContext:g}}else Zo=Zo.next=g;return w}var so=null;function ch(g){so===null?so=[g]:so.push(g)}function Tg(g,w,I,K){var ee=w.interleaved;return ee===null?(I.next=I,ch(w)):(I.next=ee.next,ee.next=I),w.interleaved=I,Ja(g,K)}function Ja(g,w){g.lanes|=w;var I=g.alternate;for(I!==null&&(I.lanes|=w),I=g,g=g.return;g!==null;)g.childLanes|=w,I=g.alternate,I!==null&&(I.childLanes|=w),I=g,g=g.return;return I.tag===3?I.stateNode:null}var Ni=!1;function dh(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Eg(g,w){g=g.updateQueue,w.updateQueue===g&&(w.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function ei(g,w){return{eventTime:g,lane:w,tag:0,payload:null,callback:null,next:null}}function ki(g,w,I){var K=g.updateQueue;if(K===null)return null;if(K=K.shared,(qr&2)!==0){var ee=K.pending;return ee===null?w.next=w:(w.next=ee.next,ee.next=w),K.pending=w,Ja(g,I)}return ee=K.interleaved,ee===null?(w.next=w,ch(K)):(w.next=ee.next,ee.next=w),K.interleaved=w,Ja(g,I)}function Ed(g,w,I){if(w=w.updateQueue,w!==null&&(w=w.shared,(I&4194240)!==0)){var K=w.lanes;K&=g.pendingLanes,I|=K,w.lanes=I,da(g,I)}}function Dg(g,w){var I=g.updateQueue,K=g.alternate;if(K!==null&&(K=K.updateQueue,I===K)){var ee=null,re=null;if(I=I.firstBaseUpdate,I!==null){do{var ge={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};re===null?ee=re=ge:re=re.next=ge,I=I.next}while(I!==null);re===null?ee=re=w:re=re.next=w}else ee=re=w;I={baseState:K.baseState,firstBaseUpdate:ee,lastBaseUpdate:re,shared:K.shared,effects:K.effects},g.updateQueue=I;return}g=I.lastBaseUpdate,g===null?I.firstBaseUpdate=w:g.next=w,I.lastBaseUpdate=w}function Dd(g,w,I,K){var ee=g.updateQueue;Ni=!1;var re=ee.firstBaseUpdate,ge=ee.lastBaseUpdate,Fe=ee.shared.pending;if(Fe!==null){ee.shared.pending=null;var We=Fe,vt=We.next;We.next=null,ge===null?re=vt:ge.next=vt,ge=We;var Vt=g.alternate;Vt!==null&&(Vt=Vt.updateQueue,Fe=Vt.lastBaseUpdate,Fe!==ge&&(Fe===null?Vt.firstBaseUpdate=vt:Fe.next=vt,Vt.lastBaseUpdate=We))}if(re!==null){var Wt=ee.baseState;ge=0,Vt=vt=We=null,Fe=re;do{var Ut=Fe.lane,sr=Fe.eventTime;if((K&Ut)===Ut){Vt!==null&&(Vt=Vt.next={eventTime:sr,lane:0,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null});e:{var or=g,cr=Fe;switch(Ut=w,sr=I,cr.tag){case 1:if(or=cr.payload,typeof or=="function"){Wt=or.call(sr,Wt,Ut);break e}Wt=or;break e;case 3:or.flags=or.flags&-65537|128;case 0:if(or=cr.payload,Ut=typeof or=="function"?or.call(sr,Wt,Ut):or,Ut==null)break e;Wt=D({},Wt,Ut);break e;case 2:Ni=!0}}Fe.callback!==null&&Fe.lane!==0&&(g.flags|=64,Ut=ee.effects,Ut===null?ee.effects=[Fe]:Ut.push(Fe))}else sr={eventTime:sr,lane:Ut,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null},Vt===null?(vt=Vt=sr,We=Wt):Vt=Vt.next=sr,ge|=Ut;if(Fe=Fe.next,Fe===null){if(Fe=ee.shared.pending,Fe===null)break;Ut=Fe,Fe=Ut.next,Ut.next=null,ee.lastBaseUpdate=Ut,ee.shared.pending=null}}while(!0);if(Vt===null&&(We=Wt),ee.baseState=We,ee.firstBaseUpdate=vt,ee.lastBaseUpdate=Vt,w=ee.shared.interleaved,w!==null){ee=w;do ge|=ee.lane,ee=ee.next;while(ee!==w)}else re===null&&(ee.shared.lanes=0);io|=ge,g.lanes=ge,g.memoizedState=Wt}}function _g(g,w,I){if(g=w.effects,w.effects=null,g!==null)for(w=0;w<g.length;w++){var K=g[w],ee=K.callback;if(ee!==null){if(K.callback=null,K=I,typeof ee!="function")throw Error(t(191,ee));ee.call(K)}}}var Zl={},Ia=bi(Zl),Xl=bi(Zl),Jl=bi(Zl);function no(g){if(g===Zl)throw Error(t(174));return g}function uh(g,w){switch(ss(Jl,w),ss(Xl,g),ss(Ia,Zl),g=w.nodeType,g){case 9:case 11:w=(w=w.documentElement)?w.namespaceURI:ut(null,"");break;default:g=g===8?w.parentNode:w,w=g.namespaceURI||null,g=g.tagName,w=ut(w,g)}as(Ia),ss(Ia,w)}function Jo(){as(Ia),as(Xl),as(Jl)}function Pg(g){no(Jl.current);var w=no(Ia.current),I=ut(w,g.type);w!==I&&(ss(Xl,g),ss(Ia,I))}function mh(g){Xl.current===g&&(as(Ia),as(Xl))}var xs=bi(0);function _d(g){for(var w=g;w!==null;){if(w.tag===13){var I=w.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||I.data==="$?"||I.data==="$!"))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var hh=[];function fh(){for(var g=0;g<hh.length;g++)hh[g]._workInProgressVersionPrimary=null;hh.length=0}var Pd=T.ReactCurrentDispatcher,ph=T.ReactCurrentBatchConfig,ao=0,ys=null,Ps=null,Bs=null,Id=!1,ec=!1,tc=0,bw=0;function nn(){throw Error(t(321))}function gh(g,w){if(w===null)return!1;for(var I=0;I<w.length&&I<g.length;I++)if(!jn(g[I],w[I]))return!1;return!0}function xh(g,w,I,K,ee,re){if(ao=re,ys=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,Pd.current=g===null||g.memoizedState===null?kw:jw,g=I(K,ee),ec){re=0;do{if(ec=!1,tc=0,25<=re)throw Error(t(301));re+=1,Bs=Ps=null,w.updateQueue=null,Pd.current=Sw,g=I(K,ee)}while(ec)}if(Pd.current=zd,w=Ps!==null&&Ps.next!==null,ao=0,Bs=Ps=ys=null,Id=!1,w)throw Error(t(300));return g}function yh(){var g=tc!==0;return tc=0,g}function Ma(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bs===null?ys.memoizedState=Bs=g:Bs=Bs.next=g,Bs}function ta(){if(Ps===null){var g=ys.alternate;g=g!==null?g.memoizedState:null}else g=Ps.next;var w=Bs===null?ys.memoizedState:Bs.next;if(w!==null)Bs=w,Ps=g;else{if(g===null)throw Error(t(310));Ps=g,g={memoizedState:Ps.memoizedState,baseState:Ps.baseState,baseQueue:Ps.baseQueue,queue:Ps.queue,next:null},Bs===null?ys.memoizedState=Bs=g:Bs=Bs.next=g}return Bs}function rc(g,w){return typeof w=="function"?w(g):w}function bh(g){var w=ta(),I=w.queue;if(I===null)throw Error(t(311));I.lastRenderedReducer=g;var K=Ps,ee=K.baseQueue,re=I.pending;if(re!==null){if(ee!==null){var ge=ee.next;ee.next=re.next,re.next=ge}K.baseQueue=ee=re,I.pending=null}if(ee!==null){re=ee.next,K=K.baseState;var Fe=ge=null,We=null,vt=re;do{var Vt=vt.lane;if((ao&Vt)===Vt)We!==null&&(We=We.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),K=vt.hasEagerState?vt.eagerState:g(K,vt.action);else{var Wt={lane:Vt,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};We===null?(Fe=We=Wt,ge=K):We=We.next=Wt,ys.lanes|=Vt,io|=Vt}vt=vt.next}while(vt!==null&&vt!==re);We===null?ge=K:We.next=Fe,jn(K,w.memoizedState)||(_n=!0),w.memoizedState=K,w.baseState=ge,w.baseQueue=We,I.lastRenderedState=K}if(g=I.interleaved,g!==null){ee=g;do re=ee.lane,ys.lanes|=re,io|=re,ee=ee.next;while(ee!==g)}else ee===null&&(I.lanes=0);return[w.memoizedState,I.dispatch]}function vh(g){var w=ta(),I=w.queue;if(I===null)throw Error(t(311));I.lastRenderedReducer=g;var K=I.dispatch,ee=I.pending,re=w.memoizedState;if(ee!==null){I.pending=null;var ge=ee=ee.next;do re=g(re,ge.action),ge=ge.next;while(ge!==ee);jn(re,w.memoizedState)||(_n=!0),w.memoizedState=re,w.baseQueue===null&&(w.baseState=re),I.lastRenderedState=re}return[re,K]}function Ig(){}function Mg(g,w){var I=ys,K=ta(),ee=w(),re=!jn(K.memoizedState,ee);if(re&&(K.memoizedState=ee,_n=!0),K=K.queue,wh(Lg.bind(null,I,K,g),[g]),K.getSnapshot!==w||re||Bs!==null&&Bs.memoizedState.tag&1){if(I.flags|=2048,sc(9,zg.bind(null,I,K,ee,w),void 0,null),Us===null)throw Error(t(349));(ao&30)!==0||Rg(I,w,ee)}return ee}function Rg(g,w,I){g.flags|=16384,g={getSnapshot:w,value:I},w=ys.updateQueue,w===null?(w={lastEffect:null,stores:null},ys.updateQueue=w,w.stores=[g]):(I=w.stores,I===null?w.stores=[g]:I.push(g))}function zg(g,w,I,K){w.value=I,w.getSnapshot=K,Og(w)&&Fg(g)}function Lg(g,w,I){return I(function(){Og(w)&&Fg(g)})}function Og(g){var w=g.getSnapshot;g=g.value;try{var I=w();return!jn(g,I)}catch{return!0}}function Fg(g){var w=Ja(g,1);w!==null&&ba(w,g,1,-1)}function Bg(g){var w=Ma();return typeof g=="function"&&(g=g()),w.memoizedState=w.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rc,lastRenderedState:g},w.queue=g,g=g.dispatch=Nw.bind(null,ys,g),[w.memoizedState,g]}function sc(g,w,I,K){return g={tag:g,create:w,destroy:I,deps:K,next:null},w=ys.updateQueue,w===null?(w={lastEffect:null,stores:null},ys.updateQueue=w,w.lastEffect=g.next=g):(I=w.lastEffect,I===null?w.lastEffect=g.next=g:(K=I.next,I.next=g,g.next=K,w.lastEffect=g)),g}function Ug(){return ta().memoizedState}function Md(g,w,I,K){var ee=Ma();ys.flags|=g,ee.memoizedState=sc(1|w,I,void 0,K===void 0?null:K)}function Rd(g,w,I,K){var ee=ta();K=K===void 0?null:K;var re=void 0;if(Ps!==null){var ge=Ps.memoizedState;if(re=ge.destroy,K!==null&&gh(K,ge.deps)){ee.memoizedState=sc(w,I,re,K);return}}ys.flags|=g,ee.memoizedState=sc(1|w,I,re,K)}function Vg(g,w){return Md(8390656,8,g,w)}function wh(g,w){return Rd(2048,8,g,w)}function qg(g,w){return Rd(4,2,g,w)}function $g(g,w){return Rd(4,4,g,w)}function Hg(g,w){if(typeof w=="function")return g=g(),w(g),function(){w(null)};if(w!=null)return g=g(),w.current=g,function(){w.current=null}}function Kg(g,w,I){return I=I!=null?I.concat([g]):null,Rd(4,4,Hg.bind(null,w,g),I)}function Nh(){}function Gg(g,w){var I=ta();w=w===void 0?null:w;var K=I.memoizedState;return K!==null&&w!==null&&gh(w,K[1])?K[0]:(I.memoizedState=[g,w],g)}function Wg(g,w){var I=ta();w=w===void 0?null:w;var K=I.memoizedState;return K!==null&&w!==null&&gh(w,K[1])?K[0]:(g=g(),I.memoizedState=[g,w],g)}function Yg(g,w,I){return(ao&21)===0?(g.baseState&&(g.baseState=!1,_n=!0),g.memoizedState=I):(jn(I,w)||(I=Pr(),ys.lanes|=I,io|=I,g.baseState=!0),w)}function vw(g,w){var I=kr;kr=I!==0&&4>I?I:4,g(!0);var K=ph.transition;ph.transition={};try{g(!1),w()}finally{kr=I,ph.transition=K}}function Qg(){return ta().memoizedState}function ww(g,w,I){var K=Ai(g);if(I={lane:K,action:I,hasEagerState:!1,eagerState:null,next:null},Zg(g))Xg(w,I);else if(I=Tg(g,w,I,K),I!==null){var ee=gn();ba(I,g,K,ee),Jg(I,w,K)}}function Nw(g,w,I){var K=Ai(g),ee={lane:K,action:I,hasEagerState:!1,eagerState:null,next:null};if(Zg(g))Xg(w,ee);else{var re=g.alternate;if(g.lanes===0&&(re===null||re.lanes===0)&&(re=w.lastRenderedReducer,re!==null))try{var ge=w.lastRenderedState,Fe=re(ge,I);if(ee.hasEagerState=!0,ee.eagerState=Fe,jn(Fe,ge)){var We=w.interleaved;We===null?(ee.next=ee,ch(w)):(ee.next=We.next,We.next=ee),w.interleaved=ee;return}}catch{}finally{}I=Tg(g,w,ee,K),I!==null&&(ee=gn(),ba(I,g,K,ee),Jg(I,w,K))}}function Zg(g){var w=g.alternate;return g===ys||w!==null&&w===ys}function Xg(g,w){ec=Id=!0;var I=g.pending;I===null?w.next=w:(w.next=I.next,I.next=w),g.pending=w}function Jg(g,w,I){if((I&4194240)!==0){var K=w.lanes;K&=g.pendingLanes,I|=K,w.lanes=I,da(g,I)}}var zd={readContext:ea,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},kw={readContext:ea,useCallback:function(g,w){return Ma().memoizedState=[g,w===void 0?null:w],g},useContext:ea,useEffect:Vg,useImperativeHandle:function(g,w,I){return I=I!=null?I.concat([g]):null,Md(4194308,4,Hg.bind(null,w,g),I)},useLayoutEffect:function(g,w){return Md(4194308,4,g,w)},useInsertionEffect:function(g,w){return Md(4,2,g,w)},useMemo:function(g,w){var I=Ma();return w=w===void 0?null:w,g=g(),I.memoizedState=[g,w],g},useReducer:function(g,w,I){var K=Ma();return w=I!==void 0?I(w):w,K.memoizedState=K.baseState=w,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:w},K.queue=g,g=g.dispatch=ww.bind(null,ys,g),[K.memoizedState,g]},useRef:function(g){var w=Ma();return g={current:g},w.memoizedState=g},useState:Bg,useDebugValue:Nh,useDeferredValue:function(g){return Ma().memoizedState=g},useTransition:function(){var g=Bg(!1),w=g[0];return g=vw.bind(null,g[1]),Ma().memoizedState=g,[w,g]},useMutableSource:function(){},useSyncExternalStore:function(g,w,I){var K=ys,ee=Ma();if(ms){if(I===void 0)throw Error(t(407));I=I()}else{if(I=w(),Us===null)throw Error(t(349));(ao&30)!==0||Rg(K,w,I)}ee.memoizedState=I;var re={value:I,getSnapshot:w};return ee.queue=re,Vg(Lg.bind(null,K,re,g),[g]),K.flags|=2048,sc(9,zg.bind(null,K,re,I,w),void 0,null),I},useId:function(){var g=Ma(),w=Us.identifierPrefix;if(ms){var I=Xa,K=Za;I=(K&~(1<<32-fr(K)-1)).toString(32)+I,w=":"+w+"R"+I,I=tc++,0<I&&(w+="H"+I.toString(32)),w+=":"}else I=bw++,w=":"+w+"r"+I.toString(32)+":";return g.memoizedState=w},unstable_isNewReconciler:!1},jw={readContext:ea,useCallback:Gg,useContext:ea,useEffect:wh,useImperativeHandle:Kg,useInsertionEffect:qg,useLayoutEffect:$g,useMemo:Wg,useReducer:bh,useRef:Ug,useState:function(){return bh(rc)},useDebugValue:Nh,useDeferredValue:function(g){var w=ta();return Yg(w,Ps.memoizedState,g)},useTransition:function(){var g=bh(rc)[0],w=ta().memoizedState;return[g,w]},useMutableSource:Ig,useSyncExternalStore:Mg,useId:Qg,unstable_isNewReconciler:!1},Sw={readContext:ea,useCallback:Gg,useContext:ea,useEffect:wh,useImperativeHandle:Kg,useInsertionEffect:qg,useLayoutEffect:$g,useMemo:Wg,useReducer:vh,useRef:Ug,useState:function(){return vh(rc)},useDebugValue:Nh,useDeferredValue:function(g){var w=ta();return Ps===null?w.memoizedState=g:Yg(w,Ps.memoizedState,g)},useTransition:function(){var g=vh(rc)[0],w=ta().memoizedState;return[g,w]},useMutableSource:Ig,useSyncExternalStore:Mg,useId:Qg,unstable_isNewReconciler:!1};function ga(g,w){if(g&&g.defaultProps){w=D({},w),g=g.defaultProps;for(var I in g)w[I]===void 0&&(w[I]=g[I]);return w}return w}function kh(g,w,I,K){w=g.memoizedState,I=I(K,w),I=I==null?w:D({},w,I),g.memoizedState=I,g.lanes===0&&(g.updateQueue.baseState=I)}var Ld={isMounted:function(g){return(g=g._reactInternals)?Oe(g)===g:!1},enqueueSetState:function(g,w,I){g=g._reactInternals;var K=gn(),ee=Ai(g),re=ei(K,ee);re.payload=w,I!=null&&(re.callback=I),w=ki(g,re,ee),w!==null&&(ba(w,g,ee,K),Ed(w,g,ee))},enqueueReplaceState:function(g,w,I){g=g._reactInternals;var K=gn(),ee=Ai(g),re=ei(K,ee);re.tag=1,re.payload=w,I!=null&&(re.callback=I),w=ki(g,re,ee),w!==null&&(ba(w,g,ee,K),Ed(w,g,ee))},enqueueForceUpdate:function(g,w){g=g._reactInternals;var I=gn(),K=Ai(g),ee=ei(I,K);ee.tag=2,w!=null&&(ee.callback=w),w=ki(g,ee,K),w!==null&&(ba(w,g,K,I),Ed(w,g,K))}};function e0(g,w,I,K,ee,re,ge){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(K,re,ge):w.prototype&&w.prototype.isPureReactComponent?!Xi(I,K)||!Xi(ee,re):!0}function t0(g,w,I){var K=!1,ee=vi,re=w.contextType;return typeof re=="object"&&re!==null?re=ea(re):(ee=Dn(w)?eo:sn.current,K=w.contextTypes,re=(K=K!=null)?Ko(g,ee):vi),w=new w(I,re),g.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Ld,g.stateNode=w,w._reactInternals=g,K&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=ee,g.__reactInternalMemoizedMaskedChildContext=re),w}function r0(g,w,I,K){g=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(I,K),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(I,K),w.state!==g&&Ld.enqueueReplaceState(w,w.state,null)}function jh(g,w,I,K){var ee=g.stateNode;ee.props=I,ee.state=g.memoizedState,ee.refs={},dh(g);var re=w.contextType;typeof re=="object"&&re!==null?ee.context=ea(re):(re=Dn(w)?eo:sn.current,ee.context=Ko(g,re)),ee.state=g.memoizedState,re=w.getDerivedStateFromProps,typeof re=="function"&&(kh(g,w,re,I),ee.state=g.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof ee.getSnapshotBeforeUpdate=="function"||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(w=ee.state,typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount(),w!==ee.state&&Ld.enqueueReplaceState(ee,ee.state,null),Dd(g,I,ee,K),ee.state=g.memoizedState),typeof ee.componentDidMount=="function"&&(g.flags|=4194308)}function el(g,w){try{var I="",K=w;do I+=ae(K),K=K.return;while(K);var ee=I}catch(re){ee=`
Error generating stack: `+re.message+`
`+re.stack}return{value:g,source:w,stack:ee,digest:null}}function Sh(g,w,I){return{value:g,source:null,stack:I??null,digest:w??null}}function Ch(g,w){try{console.error(w.value)}catch(I){setTimeout(function(){throw I})}}var Cw=typeof WeakMap=="function"?WeakMap:Map;function s0(g,w,I){I=ei(-1,I),I.tag=3,I.payload={element:null};var K=w.value;return I.callback=function(){$d||($d=!0,Uh=K),Ch(g,w)},I}function n0(g,w,I){I=ei(-1,I),I.tag=3;var K=g.type.getDerivedStateFromError;if(typeof K=="function"){var ee=w.value;I.payload=function(){return K(ee)},I.callback=function(){Ch(g,w)}}var re=g.stateNode;return re!==null&&typeof re.componentDidCatch=="function"&&(I.callback=function(){Ch(g,w),typeof K!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var ge=w.stack;this.componentDidCatch(w.value,{componentStack:ge!==null?ge:""})}),I}function a0(g,w,I){var K=g.pingCache;if(K===null){K=g.pingCache=new Cw;var ee=new Set;K.set(w,ee)}else ee=K.get(w),ee===void 0&&(ee=new Set,K.set(w,ee));ee.has(I)||(ee.add(I),g=Bw.bind(null,g,w,I),w.then(g,g))}function i0(g){do{var w;if((w=g.tag===13)&&(w=g.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return g;g=g.return}while(g!==null);return null}function o0(g,w,I,K,ee){return(g.mode&1)===0?(g===w?g.flags|=65536:(g.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(w=ei(-1,1),w.tag=2,ki(I,w,1))),I.lanes|=1),g):(g.flags|=65536,g.lanes=ee,g)}var Aw=T.ReactCurrentOwner,_n=!1;function pn(g,w,I,K){w.child=g===null?Ag(w,null,I,K):Qo(w,g.child,I,K)}function l0(g,w,I,K,ee){I=I.render;var re=w.ref;return Xo(w,ee),K=xh(g,w,I,K,re,ee),I=yh(),g!==null&&!_n?(w.updateQueue=g.updateQueue,w.flags&=-2053,g.lanes&=~ee,ti(g,w,ee)):(ms&&I&&eh(w),w.flags|=1,pn(g,w,K,ee),w.child)}function c0(g,w,I,K,ee){if(g===null){var re=I.type;return typeof re=="function"&&!Wh(re)&&re.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(w.tag=15,w.type=re,d0(g,w,re,K,ee)):(g=Qd(I.type,null,K,w,w.mode,ee),g.ref=w.ref,g.return=w,w.child=g)}if(re=g.child,(g.lanes&ee)===0){var ge=re.memoizedProps;if(I=I.compare,I=I!==null?I:Xi,I(ge,K)&&g.ref===w.ref)return ti(g,w,ee)}return w.flags|=1,g=Ei(re,K),g.ref=w.ref,g.return=w,w.child=g}function d0(g,w,I,K,ee){if(g!==null){var re=g.memoizedProps;if(Xi(re,K)&&g.ref===w.ref)if(_n=!1,w.pendingProps=K=re,(g.lanes&ee)!==0)(g.flags&131072)!==0&&(_n=!0);else return w.lanes=g.lanes,ti(g,w,ee)}return Ah(g,w,I,K,ee)}function u0(g,w,I){var K=w.pendingProps,ee=K.children,re=g!==null?g.memoizedState:null;if(K.mode==="hidden")if((w.mode&1)===0)w.memoizedState={baseLanes:0,cachePool:null,transitions:null},ss(rl,Kn),Kn|=I;else{if((I&1073741824)===0)return g=re!==null?re.baseLanes|I:I,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:g,cachePool:null,transitions:null},w.updateQueue=null,ss(rl,Kn),Kn|=g,null;w.memoizedState={baseLanes:0,cachePool:null,transitions:null},K=re!==null?re.baseLanes:I,ss(rl,Kn),Kn|=K}else re!==null?(K=re.baseLanes|I,w.memoizedState=null):K=I,ss(rl,Kn),Kn|=K;return pn(g,w,ee,I),w.child}function m0(g,w){var I=w.ref;(g===null&&I!==null||g!==null&&g.ref!==I)&&(w.flags|=512,w.flags|=2097152)}function Ah(g,w,I,K,ee){var re=Dn(I)?eo:sn.current;return re=Ko(w,re),Xo(w,ee),I=xh(g,w,I,K,re,ee),K=yh(),g!==null&&!_n?(w.updateQueue=g.updateQueue,w.flags&=-2053,g.lanes&=~ee,ti(g,w,ee)):(ms&&K&&eh(w),w.flags|=1,pn(g,w,I,ee),w.child)}function h0(g,w,I,K,ee){if(Dn(I)){var re=!0;wd(w)}else re=!1;if(Xo(w,ee),w.stateNode===null)Fd(g,w),t0(w,I,K),jh(w,I,K,ee),K=!0;else if(g===null){var ge=w.stateNode,Fe=w.memoizedProps;ge.props=Fe;var We=ge.context,vt=I.contextType;typeof vt=="object"&&vt!==null?vt=ea(vt):(vt=Dn(I)?eo:sn.current,vt=Ko(w,vt));var Vt=I.getDerivedStateFromProps,Wt=typeof Vt=="function"||typeof ge.getSnapshotBeforeUpdate=="function";Wt||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Fe!==K||We!==vt)&&r0(w,ge,K,vt),Ni=!1;var Ut=w.memoizedState;ge.state=Ut,Dd(w,K,ge,ee),We=w.memoizedState,Fe!==K||Ut!==We||En.current||Ni?(typeof Vt=="function"&&(kh(w,I,Vt,K),We=w.memoizedState),(Fe=Ni||e0(w,I,Fe,K,Ut,We,vt))?(Wt||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=K,w.memoizedState=We),ge.props=K,ge.state=We,ge.context=vt,K=Fe):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),K=!1)}else{ge=w.stateNode,Eg(g,w),Fe=w.memoizedProps,vt=w.type===w.elementType?Fe:ga(w.type,Fe),ge.props=vt,Wt=w.pendingProps,Ut=ge.context,We=I.contextType,typeof We=="object"&&We!==null?We=ea(We):(We=Dn(I)?eo:sn.current,We=Ko(w,We));var sr=I.getDerivedStateFromProps;(Vt=typeof sr=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Fe!==Wt||Ut!==We)&&r0(w,ge,K,We),Ni=!1,Ut=w.memoizedState,ge.state=Ut,Dd(w,K,ge,ee);var or=w.memoizedState;Fe!==Wt||Ut!==or||En.current||Ni?(typeof sr=="function"&&(kh(w,I,sr,K),or=w.memoizedState),(vt=Ni||e0(w,I,vt,K,Ut,or,We)||!1)?(Vt||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(K,or,We),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(K,or,We)),typeof ge.componentDidUpdate=="function"&&(w.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ge.componentDidUpdate!="function"||Fe===g.memoizedProps&&Ut===g.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Fe===g.memoizedProps&&Ut===g.memoizedState||(w.flags|=1024),w.memoizedProps=K,w.memoizedState=or),ge.props=K,ge.state=or,ge.context=We,K=vt):(typeof ge.componentDidUpdate!="function"||Fe===g.memoizedProps&&Ut===g.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Fe===g.memoizedProps&&Ut===g.memoizedState||(w.flags|=1024),K=!1)}return Th(g,w,I,K,re,ee)}function Th(g,w,I,K,ee,re){m0(g,w);var ge=(w.flags&128)!==0;if(!K&&!ge)return ee&&yg(w,I,!1),ti(g,w,re);K=w.stateNode,Aw.current=w;var Fe=ge&&typeof I.getDerivedStateFromError!="function"?null:K.render();return w.flags|=1,g!==null&&ge?(w.child=Qo(w,g.child,null,re),w.child=Qo(w,null,Fe,re)):pn(g,w,Fe,re),w.memoizedState=K.state,ee&&yg(w,I,!0),w.child}function f0(g){var w=g.stateNode;w.pendingContext?gg(g,w.pendingContext,w.pendingContext!==w.context):w.context&&gg(g,w.context,!1),uh(g,w.containerInfo)}function p0(g,w,I,K,ee){return Yo(),nh(ee),w.flags|=256,pn(g,w,I,K),w.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function Dh(g){return{baseLanes:g,cachePool:null,transitions:null}}function g0(g,w,I){var K=w.pendingProps,ee=xs.current,re=!1,ge=(w.flags&128)!==0,Fe;if((Fe=ge)||(Fe=g!==null&&g.memoizedState===null?!1:(ee&2)!==0),Fe?(re=!0,w.flags&=-129):(g===null||g.memoizedState!==null)&&(ee|=1),ss(xs,ee&1),g===null)return sh(w),g=w.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?((w.mode&1)===0?w.lanes=1:g.data==="$!"?w.lanes=8:w.lanes=1073741824,null):(ge=K.children,g=K.fallback,re?(K=w.mode,re=w.child,ge={mode:"hidden",children:ge},(K&1)===0&&re!==null?(re.childLanes=0,re.pendingProps=ge):re=Zd(ge,K,0,null),g=uo(g,K,I,null),re.return=w,g.return=w,re.sibling=g,w.child=re,w.child.memoizedState=Dh(I),w.memoizedState=Eh,g):_h(w,ge));if(ee=g.memoizedState,ee!==null&&(Fe=ee.dehydrated,Fe!==null))return Tw(g,w,ge,K,Fe,ee,I);if(re){re=K.fallback,ge=w.mode,ee=g.child,Fe=ee.sibling;var We={mode:"hidden",children:K.children};return(ge&1)===0&&w.child!==ee?(K=w.child,K.childLanes=0,K.pendingProps=We,w.deletions=null):(K=Ei(ee,We),K.subtreeFlags=ee.subtreeFlags&14680064),Fe!==null?re=Ei(Fe,re):(re=uo(re,ge,I,null),re.flags|=2),re.return=w,K.return=w,K.sibling=re,w.child=K,K=re,re=w.child,ge=g.child.memoizedState,ge=ge===null?Dh(I):{baseLanes:ge.baseLanes|I,cachePool:null,transitions:ge.transitions},re.memoizedState=ge,re.childLanes=g.childLanes&~I,w.memoizedState=Eh,K}return re=g.child,g=re.sibling,K=Ei(re,{mode:"visible",children:K.children}),(w.mode&1)===0&&(K.lanes=I),K.return=w,K.sibling=null,g!==null&&(I=w.deletions,I===null?(w.deletions=[g],w.flags|=16):I.push(g)),w.child=K,w.memoizedState=null,K}function _h(g,w){return w=Zd({mode:"visible",children:w},g.mode,0,null),w.return=g,g.child=w}function Od(g,w,I,K){return K!==null&&nh(K),Qo(w,g.child,null,I),g=_h(w,w.pendingProps.children),g.flags|=2,w.memoizedState=null,g}function Tw(g,w,I,K,ee,re,ge){if(I)return w.flags&256?(w.flags&=-257,K=Sh(Error(t(422))),Od(g,w,ge,K)):w.memoizedState!==null?(w.child=g.child,w.flags|=128,null):(re=K.fallback,ee=w.mode,K=Zd({mode:"visible",children:K.children},ee,0,null),re=uo(re,ee,ge,null),re.flags|=2,K.return=w,re.return=w,K.sibling=re,w.child=K,(w.mode&1)!==0&&Qo(w,g.child,null,ge),w.child.memoizedState=Dh(ge),w.memoizedState=Eh,re);if((w.mode&1)===0)return Od(g,w,ge,null);if(ee.data==="$!"){if(K=ee.nextSibling&&ee.nextSibling.dataset,K)var Fe=K.dgst;return K=Fe,re=Error(t(419)),K=Sh(re,K,void 0),Od(g,w,ge,K)}if(Fe=(ge&g.childLanes)!==0,_n||Fe){if(K=Us,K!==null){switch(ge&-ge){case 4:ee=2;break;case 16:ee=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ee=32;break;case 536870912:ee=268435456;break;default:ee=0}ee=(ee&(K.suspendedLanes|ge))!==0?0:ee,ee!==0&&ee!==re.retryLane&&(re.retryLane=ee,Ja(g,ee),ba(K,g,ee,-1))}return Gh(),K=Sh(Error(t(421))),Od(g,w,ge,K)}return ee.data==="$?"?(w.flags|=128,w.child=g.child,w=Uw.bind(null,g),ee._reactRetry=w,null):(g=re.treeContext,Hn=yi(ee.nextSibling),$n=w,ms=!0,pa=null,g!==null&&(Xn[Jn++]=Za,Xn[Jn++]=Xa,Xn[Jn++]=to,Za=g.id,Xa=g.overflow,to=w),w=_h(w,K.children),w.flags|=4096,w)}function x0(g,w,I){g.lanes|=w;var K=g.alternate;K!==null&&(K.lanes|=w),lh(g.return,w,I)}function Ph(g,w,I,K,ee){var re=g.memoizedState;re===null?g.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:K,tail:I,tailMode:ee}:(re.isBackwards=w,re.rendering=null,re.renderingStartTime=0,re.last=K,re.tail=I,re.tailMode=ee)}function y0(g,w,I){var K=w.pendingProps,ee=K.revealOrder,re=K.tail;if(pn(g,w,K.children,I),K=xs.current,(K&2)!==0)K=K&1|2,w.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=w.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&x0(g,I,w);else if(g.tag===19)x0(g,I,w);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===w)break e;for(;g.sibling===null;){if(g.return===null||g.return===w)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}K&=1}if(ss(xs,K),(w.mode&1)===0)w.memoizedState=null;else switch(ee){case"forwards":for(I=w.child,ee=null;I!==null;)g=I.alternate,g!==null&&_d(g)===null&&(ee=I),I=I.sibling;I=ee,I===null?(ee=w.child,w.child=null):(ee=I.sibling,I.sibling=null),Ph(w,!1,ee,I,re);break;case"backwards":for(I=null,ee=w.child,w.child=null;ee!==null;){if(g=ee.alternate,g!==null&&_d(g)===null){w.child=ee;break}g=ee.sibling,ee.sibling=I,I=ee,ee=g}Ph(w,!0,I,null,re);break;case"together":Ph(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function Fd(g,w){(w.mode&1)===0&&g!==null&&(g.alternate=null,w.alternate=null,w.flags|=2)}function ti(g,w,I){if(g!==null&&(w.dependencies=g.dependencies),io|=w.lanes,(I&w.childLanes)===0)return null;if(g!==null&&w.child!==g.child)throw Error(t(153));if(w.child!==null){for(g=w.child,I=Ei(g,g.pendingProps),w.child=I,I.return=w;g.sibling!==null;)g=g.sibling,I=I.sibling=Ei(g,g.pendingProps),I.return=w;I.sibling=null}return w.child}function Ew(g,w,I){switch(w.tag){case 3:f0(w),Yo();break;case 5:Pg(w);break;case 1:Dn(w.type)&&wd(w);break;case 4:uh(w,w.stateNode.containerInfo);break;case 10:var K=w.type._context,ee=w.memoizedProps.value;ss(Ad,K._currentValue),K._currentValue=ee;break;case 13:if(K=w.memoizedState,K!==null)return K.dehydrated!==null?(ss(xs,xs.current&1),w.flags|=128,null):(I&w.child.childLanes)!==0?g0(g,w,I):(ss(xs,xs.current&1),g=ti(g,w,I),g!==null?g.sibling:null);ss(xs,xs.current&1);break;case 19:if(K=(I&w.childLanes)!==0,(g.flags&128)!==0){if(K)return y0(g,w,I);w.flags|=128}if(ee=w.memoizedState,ee!==null&&(ee.rendering=null,ee.tail=null,ee.lastEffect=null),ss(xs,xs.current),K)break;return null;case 22:case 23:return w.lanes=0,u0(g,w,I)}return ti(g,w,I)}var b0,Ih,v0,w0;b0=function(g,w){for(var I=w.child;I!==null;){if(I.tag===5||I.tag===6)g.appendChild(I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===w)break;for(;I.sibling===null;){if(I.return===null||I.return===w)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},Ih=function(){},v0=function(g,w,I,K){var ee=g.memoizedProps;if(ee!==K){g=w.stateNode,no(Ia.current);var re=null;switch(I){case"input":ee=le(g,ee),K=le(g,K),re=[];break;case"select":ee=D({},ee,{value:void 0}),K=D({},K,{value:void 0}),re=[];break;case"textarea":ee=Ie(g,ee),K=Ie(g,K),re=[];break;default:typeof ee.onClick!="function"&&typeof K.onClick=="function"&&(g.onclick=gs)}ye(I,K);var ge;I=null;for(vt in ee)if(!K.hasOwnProperty(vt)&&ee.hasOwnProperty(vt)&&ee[vt]!=null)if(vt==="style"){var Fe=ee[vt];for(ge in Fe)Fe.hasOwnProperty(ge)&&(I||(I={}),I[ge]="")}else vt!=="dangerouslySetInnerHTML"&&vt!=="children"&&vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&vt!=="autoFocus"&&(h.hasOwnProperty(vt)?re||(re=[]):(re=re||[]).push(vt,null));for(vt in K){var We=K[vt];if(Fe=ee?.[vt],K.hasOwnProperty(vt)&&We!==Fe&&(We!=null||Fe!=null))if(vt==="style")if(Fe){for(ge in Fe)!Fe.hasOwnProperty(ge)||We&&We.hasOwnProperty(ge)||(I||(I={}),I[ge]="");for(ge in We)We.hasOwnProperty(ge)&&Fe[ge]!==We[ge]&&(I||(I={}),I[ge]=We[ge])}else I||(re||(re=[]),re.push(vt,I)),I=We;else vt==="dangerouslySetInnerHTML"?(We=We?We.__html:void 0,Fe=Fe?Fe.__html:void 0,We!=null&&Fe!==We&&(re=re||[]).push(vt,We)):vt==="children"?typeof We!="string"&&typeof We!="number"||(re=re||[]).push(vt,""+We):vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&(h.hasOwnProperty(vt)?(We!=null&&vt==="onScroll"&&Lr("scroll",g),re||Fe===We||(re=[])):(re=re||[]).push(vt,We))}I&&(re=re||[]).push("style",I);var vt=re;(w.updateQueue=vt)&&(w.flags|=4)}},w0=function(g,w,I,K){I!==K&&(w.flags|=4)};function nc(g,w){if(!ms)switch(g.tailMode){case"hidden":w=g.tail;for(var I=null;w!==null;)w.alternate!==null&&(I=w),w=w.sibling;I===null?g.tail=null:I.sibling=null;break;case"collapsed":I=g.tail;for(var K=null;I!==null;)I.alternate!==null&&(K=I),I=I.sibling;K===null?w||g.tail===null?g.tail=null:g.tail.sibling=null:K.sibling=null}}function an(g){var w=g.alternate!==null&&g.alternate.child===g.child,I=0,K=0;if(w)for(var ee=g.child;ee!==null;)I|=ee.lanes|ee.childLanes,K|=ee.subtreeFlags&14680064,K|=ee.flags&14680064,ee.return=g,ee=ee.sibling;else for(ee=g.child;ee!==null;)I|=ee.lanes|ee.childLanes,K|=ee.subtreeFlags,K|=ee.flags,ee.return=g,ee=ee.sibling;return g.subtreeFlags|=K,g.childLanes=I,w}function Dw(g,w,I){var K=w.pendingProps;switch(th(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(w),null;case 1:return Dn(w.type)&&vd(),an(w),null;case 3:return K=w.stateNode,Jo(),as(En),as(sn),fh(),K.pendingContext&&(K.context=K.pendingContext,K.pendingContext=null),(g===null||g.child===null)&&(Sd(w)?w.flags|=4:g===null||g.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,pa!==null&&($h(pa),pa=null))),Ih(g,w),an(w),null;case 5:mh(w);var ee=no(Jl.current);if(I=w.type,g!==null&&w.stateNode!=null)v0(g,w,I,K,ee),g.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!K){if(w.stateNode===null)throw Error(t(166));return an(w),null}if(g=no(Ia.current),Sd(w)){K=w.stateNode,I=w.type;var re=w.memoizedProps;switch(K[Pa]=w,K[Wl]=re,g=(w.mode&1)!==0,I){case"dialog":Lr("cancel",K),Lr("close",K);break;case"iframe":case"object":case"embed":Lr("load",K);break;case"video":case"audio":for(ee=0;ee<ws.length;ee++)Lr(ws[ee],K);break;case"source":Lr("error",K);break;case"img":case"image":case"link":Lr("error",K),Lr("load",K);break;case"details":Lr("toggle",K);break;case"input":Ne(K,re),Lr("invalid",K);break;case"select":K._wrapperState={wasMultiple:!!re.multiple},Lr("invalid",K);break;case"textarea":Ue(K,re),Lr("invalid",K)}ye(I,re),ee=null;for(var ge in re)if(re.hasOwnProperty(ge)){var Fe=re[ge];ge==="children"?typeof Fe=="string"?K.textContent!==Fe&&(re.suppressHydrationWarning!==!0&&Tr(K.textContent,Fe,g),ee=["children",Fe]):typeof Fe=="number"&&K.textContent!==""+Fe&&(re.suppressHydrationWarning!==!0&&Tr(K.textContent,Fe,g),ee=["children",""+Fe]):h.hasOwnProperty(ge)&&Fe!=null&&ge==="onScroll"&&Lr("scroll",K)}switch(I){case"input":te(K),ce(K,re,!0);break;case"textarea":te(K),Le(K);break;case"select":case"option":break;default:typeof re.onClick=="function"&&(K.onclick=gs)}K=ee,w.updateQueue=K,K!==null&&(w.flags|=4)}else{ge=ee.nodeType===9?ee:ee.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=at(I)),g==="http://www.w3.org/1999/xhtml"?I==="script"?(g=ge.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof K.is=="string"?g=ge.createElement(I,{is:K.is}):(g=ge.createElement(I),I==="select"&&(ge=g,K.multiple?ge.multiple=!0:K.size&&(ge.size=K.size))):g=ge.createElementNS(g,I),g[Pa]=w,g[Wl]=K,b0(g,w,!1,!1),w.stateNode=g;e:{switch(ge=oe(I,K),I){case"dialog":Lr("cancel",g),Lr("close",g),ee=K;break;case"iframe":case"object":case"embed":Lr("load",g),ee=K;break;case"video":case"audio":for(ee=0;ee<ws.length;ee++)Lr(ws[ee],g);ee=K;break;case"source":Lr("error",g),ee=K;break;case"img":case"image":case"link":Lr("error",g),Lr("load",g),ee=K;break;case"details":Lr("toggle",g),ee=K;break;case"input":Ne(g,K),ee=le(g,K),Lr("invalid",g);break;case"option":ee=K;break;case"select":g._wrapperState={wasMultiple:!!K.multiple},ee=D({},K,{value:void 0}),Lr("invalid",g);break;case"textarea":Ue(g,K),ee=Ie(g,K),Lr("invalid",g);break;default:ee=K}ye(I,ee),Fe=ee;for(re in Fe)if(Fe.hasOwnProperty(re)){var We=Fe[re];re==="style"?Be(g,We):re==="dangerouslySetInnerHTML"?(We=We?We.__html:void 0,We!=null&&it(g,We)):re==="children"?typeof We=="string"?(I!=="textarea"||We!=="")&&xt(g,We):typeof We=="number"&&xt(g,""+We):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(h.hasOwnProperty(re)?We!=null&&re==="onScroll"&&Lr("scroll",g):We!=null&&N(g,re,We,ge))}switch(I){case"input":te(g),ce(g,K,!1);break;case"textarea":te(g),Le(g);break;case"option":K.value!=null&&g.setAttribute("value",""+z(K.value));break;case"select":g.multiple=!!K.multiple,re=K.value,re!=null?Ae(g,!!K.multiple,re,!1):K.defaultValue!=null&&Ae(g,!!K.multiple,K.defaultValue,!0);break;default:typeof ee.onClick=="function"&&(g.onclick=gs)}switch(I){case"button":case"input":case"select":case"textarea":K=!!K.autoFocus;break e;case"img":K=!0;break e;default:K=!1}}K&&(w.flags|=4)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return an(w),null;case 6:if(g&&w.stateNode!=null)w0(g,w,g.memoizedProps,K);else{if(typeof K!="string"&&w.stateNode===null)throw Error(t(166));if(I=no(Jl.current),no(Ia.current),Sd(w)){if(K=w.stateNode,I=w.memoizedProps,K[Pa]=w,(re=K.nodeValue!==I)&&(g=$n,g!==null))switch(g.tag){case 3:Tr(K.nodeValue,I,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&Tr(K.nodeValue,I,(g.mode&1)!==0)}re&&(w.flags|=4)}else K=(I.nodeType===9?I:I.ownerDocument).createTextNode(K),K[Pa]=w,w.stateNode=K}return an(w),null;case 13:if(as(xs),K=w.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(ms&&Hn!==null&&(w.mode&1)!==0&&(w.flags&128)===0)jg(),Yo(),w.flags|=98560,re=!1;else if(re=Sd(w),K!==null&&K.dehydrated!==null){if(g===null){if(!re)throw Error(t(318));if(re=w.memoizedState,re=re!==null?re.dehydrated:null,!re)throw Error(t(317));re[Pa]=w}else Yo(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;an(w),re=!1}else pa!==null&&($h(pa),pa=null),re=!0;if(!re)return w.flags&65536?w:null}return(w.flags&128)!==0?(w.lanes=I,w):(K=K!==null,K!==(g!==null&&g.memoizedState!==null)&&K&&(w.child.flags|=8192,(w.mode&1)!==0&&(g===null||(xs.current&1)!==0?Is===0&&(Is=3):Gh())),w.updateQueue!==null&&(w.flags|=4),an(w),null);case 4:return Jo(),Ih(g,w),g===null&&Tn(w.stateNode.containerInfo),an(w),null;case 10:return oh(w.type._context),an(w),null;case 17:return Dn(w.type)&&vd(),an(w),null;case 19:if(as(xs),re=w.memoizedState,re===null)return an(w),null;if(K=(w.flags&128)!==0,ge=re.rendering,ge===null)if(K)nc(re,!1);else{if(Is!==0||g!==null&&(g.flags&128)!==0)for(g=w.child;g!==null;){if(ge=_d(g),ge!==null){for(w.flags|=128,nc(re,!1),K=ge.updateQueue,K!==null&&(w.updateQueue=K,w.flags|=4),w.subtreeFlags=0,K=I,I=w.child;I!==null;)re=I,g=K,re.flags&=14680066,ge=re.alternate,ge===null?(re.childLanes=0,re.lanes=g,re.child=null,re.subtreeFlags=0,re.memoizedProps=null,re.memoizedState=null,re.updateQueue=null,re.dependencies=null,re.stateNode=null):(re.childLanes=ge.childLanes,re.lanes=ge.lanes,re.child=ge.child,re.subtreeFlags=0,re.deletions=null,re.memoizedProps=ge.memoizedProps,re.memoizedState=ge.memoizedState,re.updateQueue=ge.updateQueue,re.type=ge.type,g=ge.dependencies,re.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),I=I.sibling;return ss(xs,xs.current&1|2),w.child}g=g.sibling}re.tail!==null&&qe()>sl&&(w.flags|=128,K=!0,nc(re,!1),w.lanes=4194304)}else{if(!K)if(g=_d(ge),g!==null){if(w.flags|=128,K=!0,I=g.updateQueue,I!==null&&(w.updateQueue=I,w.flags|=4),nc(re,!0),re.tail===null&&re.tailMode==="hidden"&&!ge.alternate&&!ms)return an(w),null}else 2*qe()-re.renderingStartTime>sl&&I!==1073741824&&(w.flags|=128,K=!0,nc(re,!1),w.lanes=4194304);re.isBackwards?(ge.sibling=w.child,w.child=ge):(I=re.last,I!==null?I.sibling=ge:w.child=ge,re.last=ge)}return re.tail!==null?(w=re.tail,re.rendering=w,re.tail=w.sibling,re.renderingStartTime=qe(),w.sibling=null,I=xs.current,ss(xs,K?I&1|2:I&1),w):(an(w),null);case 22:case 23:return Kh(),K=w.memoizedState!==null,g!==null&&g.memoizedState!==null!==K&&(w.flags|=8192),K&&(w.mode&1)!==0?(Kn&1073741824)!==0&&(an(w),w.subtreeFlags&6&&(w.flags|=8192)):an(w),null;case 24:return null;case 25:return null}throw Error(t(156,w.tag))}function _w(g,w){switch(th(w),w.tag){case 1:return Dn(w.type)&&vd(),g=w.flags,g&65536?(w.flags=g&-65537|128,w):null;case 3:return Jo(),as(En),as(sn),fh(),g=w.flags,(g&65536)!==0&&(g&128)===0?(w.flags=g&-65537|128,w):null;case 5:return mh(w),null;case 13:if(as(xs),g=w.memoizedState,g!==null&&g.dehydrated!==null){if(w.alternate===null)throw Error(t(340));Yo()}return g=w.flags,g&65536?(w.flags=g&-65537|128,w):null;case 19:return as(xs),null;case 4:return Jo(),null;case 10:return oh(w.type._context),null;case 22:case 23:return Kh(),null;case 24:return null;default:return null}}var Bd=!1,on=!1,Pw=typeof WeakSet=="function"?WeakSet:Set,ar=null;function tl(g,w){var I=g.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(K){ks(g,w,K)}else I.current=null}function Mh(g,w,I){try{I()}catch(K){ks(g,w,K)}}var N0=!1;function Iw(g,w){if(Qr=To,g=J(),de(g)){if("selectionStart"in g)var I={start:g.selectionStart,end:g.selectionEnd};else e:{I=(I=g.ownerDocument)&&I.defaultView||window;var K=I.getSelection&&I.getSelection();if(K&&K.rangeCount!==0){I=K.anchorNode;var ee=K.anchorOffset,re=K.focusNode;K=K.focusOffset;try{I.nodeType,re.nodeType}catch{I=null;break e}var ge=0,Fe=-1,We=-1,vt=0,Vt=0,Wt=g,Ut=null;t:for(;;){for(var sr;Wt!==I||ee!==0&&Wt.nodeType!==3||(Fe=ge+ee),Wt!==re||K!==0&&Wt.nodeType!==3||(We=ge+K),Wt.nodeType===3&&(ge+=Wt.nodeValue.length),(sr=Wt.firstChild)!==null;)Ut=Wt,Wt=sr;for(;;){if(Wt===g)break t;if(Ut===I&&++vt===ee&&(Fe=ge),Ut===re&&++Vt===K&&(We=ge),(sr=Wt.nextSibling)!==null)break;Wt=Ut,Ut=Wt.parentNode}Wt=sr}I=Fe===-1||We===-1?null:{start:Fe,end:We}}else I=null}I=I||{start:0,end:0}}else I=null;for(qn={focusedElem:g,selectionRange:I},To=!1,ar=w;ar!==null;)if(w=ar,g=w.child,(w.subtreeFlags&1028)!==0&&g!==null)g.return=w,ar=g;else for(;ar!==null;){w=ar;try{var or=w.alternate;if((w.flags&1024)!==0)switch(w.tag){case 0:case 11:case 15:break;case 1:if(or!==null){var cr=or.memoizedProps,js=or.memoizedState,ct=w.stateNode,Ze=ct.getSnapshotBeforeUpdate(w.elementType===w.type?cr:ga(w.type,cr),js);ct.__reactInternalSnapshotBeforeUpdate=Ze}break;case 3:var gt=w.stateNode.containerInfo;gt.nodeType===1?gt.textContent="":gt.nodeType===9&&gt.documentElement&&gt.removeChild(gt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Qt){ks(w,w.return,Qt)}if(g=w.sibling,g!==null){g.return=w.return,ar=g;break}ar=w.return}return or=N0,N0=!1,or}function ac(g,w,I){var K=w.updateQueue;if(K=K!==null?K.lastEffect:null,K!==null){var ee=K=K.next;do{if((ee.tag&g)===g){var re=ee.destroy;ee.destroy=void 0,re!==void 0&&Mh(w,I,re)}ee=ee.next}while(ee!==K)}}function Ud(g,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var I=w=w.next;do{if((I.tag&g)===g){var K=I.create;I.destroy=K()}I=I.next}while(I!==w)}}function Rh(g){var w=g.ref;if(w!==null){var I=g.stateNode;switch(g.tag){case 5:g=I;break;default:g=I}typeof w=="function"?w(g):w.current=g}}function k0(g){var w=g.alternate;w!==null&&(g.alternate=null,k0(w)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(w=g.stateNode,w!==null&&(delete w[Pa],delete w[Wl],delete w[Zm],delete w[pw],delete w[gw])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function j0(g){return g.tag===5||g.tag===3||g.tag===4}function S0(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||j0(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function zh(g,w,I){var K=g.tag;if(K===5||K===6)g=g.stateNode,w?I.nodeType===8?I.parentNode.insertBefore(g,w):I.insertBefore(g,w):(I.nodeType===8?(w=I.parentNode,w.insertBefore(g,I)):(w=I,w.appendChild(g)),I=I._reactRootContainer,I!=null||w.onclick!==null||(w.onclick=gs));else if(K!==4&&(g=g.child,g!==null))for(zh(g,w,I),g=g.sibling;g!==null;)zh(g,w,I),g=g.sibling}function Lh(g,w,I){var K=g.tag;if(K===5||K===6)g=g.stateNode,w?I.insertBefore(g,w):I.appendChild(g);else if(K!==4&&(g=g.child,g!==null))for(Lh(g,w,I),g=g.sibling;g!==null;)Lh(g,w,I),g=g.sibling}var Zs=null,xa=!1;function ji(g,w,I){for(I=I.child;I!==null;)C0(g,w,I),I=I.sibling}function C0(g,w,I){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Zt,I)}catch{}switch(I.tag){case 5:on||tl(I,w);case 6:var K=Zs,ee=xa;Zs=null,ji(g,w,I),Zs=K,xa=ee,Zs!==null&&(xa?(g=Zs,I=I.stateNode,g.nodeType===8?g.parentNode.removeChild(I):g.removeChild(I)):Zs.removeChild(I.stateNode));break;case 18:Zs!==null&&(xa?(g=Zs,I=I.stateNode,g.nodeType===8?Qm(g.parentNode,I):g.nodeType===1&&Qm(g,I),hi(g)):Qm(Zs,I.stateNode));break;case 4:K=Zs,ee=xa,Zs=I.stateNode.containerInfo,xa=!0,ji(g,w,I),Zs=K,xa=ee;break;case 0:case 11:case 14:case 15:if(!on&&(K=I.updateQueue,K!==null&&(K=K.lastEffect,K!==null))){ee=K=K.next;do{var re=ee,ge=re.destroy;re=re.tag,ge!==void 0&&((re&2)!==0||(re&4)!==0)&&Mh(I,w,ge),ee=ee.next}while(ee!==K)}ji(g,w,I);break;case 1:if(!on&&(tl(I,w),K=I.stateNode,typeof K.componentWillUnmount=="function"))try{K.props=I.memoizedProps,K.state=I.memoizedState,K.componentWillUnmount()}catch(Fe){ks(I,w,Fe)}ji(g,w,I);break;case 21:ji(g,w,I);break;case 22:I.mode&1?(on=(K=on)||I.memoizedState!==null,ji(g,w,I),on=K):ji(g,w,I);break;default:ji(g,w,I)}}function A0(g){var w=g.updateQueue;if(w!==null){g.updateQueue=null;var I=g.stateNode;I===null&&(I=g.stateNode=new Pw),w.forEach(function(K){var ee=Vw.bind(null,g,K);I.has(K)||(I.add(K),K.then(ee,ee))})}}function ya(g,w){var I=w.deletions;if(I!==null)for(var K=0;K<I.length;K++){var ee=I[K];try{var re=g,ge=w,Fe=ge;e:for(;Fe!==null;){switch(Fe.tag){case 5:Zs=Fe.stateNode,xa=!1;break e;case 3:Zs=Fe.stateNode.containerInfo,xa=!0;break e;case 4:Zs=Fe.stateNode.containerInfo,xa=!0;break e}Fe=Fe.return}if(Zs===null)throw Error(t(160));C0(re,ge,ee),Zs=null,xa=!1;var We=ee.alternate;We!==null&&(We.return=null),ee.return=null}catch(vt){ks(ee,w,vt)}}if(w.subtreeFlags&12854)for(w=w.child;w!==null;)T0(w,g),w=w.sibling}function T0(g,w){var I=g.alternate,K=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(ya(w,g),Ra(g),K&4){try{ac(3,g,g.return),Ud(3,g)}catch(cr){ks(g,g.return,cr)}try{ac(5,g,g.return)}catch(cr){ks(g,g.return,cr)}}break;case 1:ya(w,g),Ra(g),K&512&&I!==null&&tl(I,I.return);break;case 5:if(ya(w,g),Ra(g),K&512&&I!==null&&tl(I,I.return),g.flags&32){var ee=g.stateNode;try{xt(ee,"")}catch(cr){ks(g,g.return,cr)}}if(K&4&&(ee=g.stateNode,ee!=null)){var re=g.memoizedProps,ge=I!==null?I.memoizedProps:re,Fe=g.type,We=g.updateQueue;if(g.updateQueue=null,We!==null)try{Fe==="input"&&re.type==="radio"&&re.name!=null&&ke(ee,re),oe(Fe,ge);var vt=oe(Fe,re);for(ge=0;ge<We.length;ge+=2){var Vt=We[ge],Wt=We[ge+1];Vt==="style"?Be(ee,Wt):Vt==="dangerouslySetInnerHTML"?it(ee,Wt):Vt==="children"?xt(ee,Wt):N(ee,Vt,Wt,vt)}switch(Fe){case"input":Z(ee,re);break;case"textarea":Ge(ee,re);break;case"select":var Ut=ee._wrapperState.wasMultiple;ee._wrapperState.wasMultiple=!!re.multiple;var sr=re.value;sr!=null?Ae(ee,!!re.multiple,sr,!1):Ut!==!!re.multiple&&(re.defaultValue!=null?Ae(ee,!!re.multiple,re.defaultValue,!0):Ae(ee,!!re.multiple,re.multiple?[]:"",!1))}ee[Wl]=re}catch(cr){ks(g,g.return,cr)}}break;case 6:if(ya(w,g),Ra(g),K&4){if(g.stateNode===null)throw Error(t(162));ee=g.stateNode,re=g.memoizedProps;try{ee.nodeValue=re}catch(cr){ks(g,g.return,cr)}}break;case 3:if(ya(w,g),Ra(g),K&4&&I!==null&&I.memoizedState.isDehydrated)try{hi(w.containerInfo)}catch(cr){ks(g,g.return,cr)}break;case 4:ya(w,g),Ra(g);break;case 13:ya(w,g),Ra(g),ee=g.child,ee.flags&8192&&(re=ee.memoizedState!==null,ee.stateNode.isHidden=re,!re||ee.alternate!==null&&ee.alternate.memoizedState!==null||(Bh=qe())),K&4&&A0(g);break;case 22:if(Vt=I!==null&&I.memoizedState!==null,g.mode&1?(on=(vt=on)||Vt,ya(w,g),on=vt):ya(w,g),Ra(g),K&8192){if(vt=g.memoizedState!==null,(g.stateNode.isHidden=vt)&&!Vt&&(g.mode&1)!==0)for(ar=g,Vt=g.child;Vt!==null;){for(Wt=ar=Vt;ar!==null;){switch(Ut=ar,sr=Ut.child,Ut.tag){case 0:case 11:case 14:case 15:ac(4,Ut,Ut.return);break;case 1:tl(Ut,Ut.return);var or=Ut.stateNode;if(typeof or.componentWillUnmount=="function"){K=Ut,I=Ut.return;try{w=K,or.props=w.memoizedProps,or.state=w.memoizedState,or.componentWillUnmount()}catch(cr){ks(K,I,cr)}}break;case 5:tl(Ut,Ut.return);break;case 22:if(Ut.memoizedState!==null){_0(Wt);continue}}sr!==null?(sr.return=Ut,ar=sr):_0(Wt)}Vt=Vt.sibling}e:for(Vt=null,Wt=g;;){if(Wt.tag===5){if(Vt===null){Vt=Wt;try{ee=Wt.stateNode,vt?(re=ee.style,typeof re.setProperty=="function"?re.setProperty("display","none","important"):re.display="none"):(Fe=Wt.stateNode,We=Wt.memoizedProps.style,ge=We!=null&&We.hasOwnProperty("display")?We.display:null,Fe.style.display=xe("display",ge))}catch(cr){ks(g,g.return,cr)}}}else if(Wt.tag===6){if(Vt===null)try{Wt.stateNode.nodeValue=vt?"":Wt.memoizedProps}catch(cr){ks(g,g.return,cr)}}else if((Wt.tag!==22&&Wt.tag!==23||Wt.memoizedState===null||Wt===g)&&Wt.child!==null){Wt.child.return=Wt,Wt=Wt.child;continue}if(Wt===g)break e;for(;Wt.sibling===null;){if(Wt.return===null||Wt.return===g)break e;Vt===Wt&&(Vt=null),Wt=Wt.return}Vt===Wt&&(Vt=null),Wt.sibling.return=Wt.return,Wt=Wt.sibling}}break;case 19:ya(w,g),Ra(g),K&4&&A0(g);break;case 21:break;default:ya(w,g),Ra(g)}}function Ra(g){var w=g.flags;if(w&2){try{e:{for(var I=g.return;I!==null;){if(j0(I)){var K=I;break e}I=I.return}throw Error(t(160))}switch(K.tag){case 5:var ee=K.stateNode;K.flags&32&&(xt(ee,""),K.flags&=-33);var re=S0(g);Lh(g,re,ee);break;case 3:case 4:var ge=K.stateNode.containerInfo,Fe=S0(g);zh(g,Fe,ge);break;default:throw Error(t(161))}}catch(We){ks(g,g.return,We)}g.flags&=-3}w&4096&&(g.flags&=-4097)}function Mw(g,w,I){ar=g,E0(g)}function E0(g,w,I){for(var K=(g.mode&1)!==0;ar!==null;){var ee=ar,re=ee.child;if(ee.tag===22&&K){var ge=ee.memoizedState!==null||Bd;if(!ge){var Fe=ee.alternate,We=Fe!==null&&Fe.memoizedState!==null||on;Fe=Bd;var vt=on;if(Bd=ge,(on=We)&&!vt)for(ar=ee;ar!==null;)ge=ar,We=ge.child,ge.tag===22&&ge.memoizedState!==null?P0(ee):We!==null?(We.return=ge,ar=We):P0(ee);for(;re!==null;)ar=re,E0(re),re=re.sibling;ar=ee,Bd=Fe,on=vt}D0(g)}else(ee.subtreeFlags&8772)!==0&&re!==null?(re.return=ee,ar=re):D0(g)}}function D0(g){for(;ar!==null;){var w=ar;if((w.flags&8772)!==0){var I=w.alternate;try{if((w.flags&8772)!==0)switch(w.tag){case 0:case 11:case 15:on||Ud(5,w);break;case 1:var K=w.stateNode;if(w.flags&4&&!on)if(I===null)K.componentDidMount();else{var ee=w.elementType===w.type?I.memoizedProps:ga(w.type,I.memoizedProps);K.componentDidUpdate(ee,I.memoizedState,K.__reactInternalSnapshotBeforeUpdate)}var re=w.updateQueue;re!==null&&_g(w,re,K);break;case 3:var ge=w.updateQueue;if(ge!==null){if(I=null,w.child!==null)switch(w.child.tag){case 5:I=w.child.stateNode;break;case 1:I=w.child.stateNode}_g(w,ge,I)}break;case 5:var Fe=w.stateNode;if(I===null&&w.flags&4){I=Fe;var We=w.memoizedProps;switch(w.type){case"button":case"input":case"select":case"textarea":We.autoFocus&&I.focus();break;case"img":We.src&&(I.src=We.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(w.memoizedState===null){var vt=w.alternate;if(vt!==null){var Vt=vt.memoizedState;if(Vt!==null){var Wt=Vt.dehydrated;Wt!==null&&hi(Wt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}on||w.flags&512&&Rh(w)}catch(Ut){ks(w,w.return,Ut)}}if(w===g){ar=null;break}if(I=w.sibling,I!==null){I.return=w.return,ar=I;break}ar=w.return}}function _0(g){for(;ar!==null;){var w=ar;if(w===g){ar=null;break}var I=w.sibling;if(I!==null){I.return=w.return,ar=I;break}ar=w.return}}function P0(g){for(;ar!==null;){var w=ar;try{switch(w.tag){case 0:case 11:case 15:var I=w.return;try{Ud(4,w)}catch(We){ks(w,I,We)}break;case 1:var K=w.stateNode;if(typeof K.componentDidMount=="function"){var ee=w.return;try{K.componentDidMount()}catch(We){ks(w,ee,We)}}var re=w.return;try{Rh(w)}catch(We){ks(w,re,We)}break;case 5:var ge=w.return;try{Rh(w)}catch(We){ks(w,ge,We)}}}catch(We){ks(w,w.return,We)}if(w===g){ar=null;break}var Fe=w.sibling;if(Fe!==null){Fe.return=w.return,ar=Fe;break}ar=w.return}}var Rw=Math.ceil,Vd=T.ReactCurrentDispatcher,Oh=T.ReactCurrentOwner,ra=T.ReactCurrentBatchConfig,qr=0,Us=null,Es=null,Xs=0,Kn=0,rl=bi(0),Is=0,ic=null,io=0,qd=0,Fh=0,oc=null,Pn=null,Bh=0,sl=1/0,ri=null,$d=!1,Uh=null,Si=null,Hd=!1,Ci=null,Kd=0,lc=0,Vh=null,Gd=-1,Wd=0;function gn(){return(qr&6)!==0?qe():Gd!==-1?Gd:Gd=qe()}function Ai(g){return(g.mode&1)===0?1:(qr&2)!==0&&Xs!==0?Xs&-Xs:yw.transition!==null?(Wd===0&&(Wd=Pr()),Wd):(g=kr,g!==0||(g=window.event,g=g===void 0?16:td(g.type)),g)}function ba(g,w,I,K){if(50<lc)throw lc=0,Vh=null,Error(t(185));es(g,I,K),((qr&2)===0||g!==Us)&&(g===Us&&((qr&2)===0&&(qd|=I),Is===4&&Ti(g,Xs)),In(g,K),I===1&&qr===0&&(w.mode&1)===0&&(sl=qe()+500,Nd&&wi()))}function In(g,w){var I=g.callbackNode;Qn(g,w);var K=Sr(g,g===Us?Xs:0);if(K===0)I!==null&&pt(I),g.callbackNode=null,g.callbackPriority=0;else if(w=K&-K,g.callbackPriority!==w){if(I!=null&&pt(I),w===1)g.tag===0?xw(M0.bind(null,g)):bg(M0.bind(null,g)),hw(function(){(qr&6)===0&&wi()}),I=null;else{switch(mn(K)){case 1:I=Ct;break;case 4:I=er;break;case 16:I=Rt;break;case 536870912:I=ir;break;default:I=Rt}I=V0(I,I0.bind(null,g))}g.callbackPriority=w,g.callbackNode=I}}function I0(g,w){if(Gd=-1,Wd=0,(qr&6)!==0)throw Error(t(327));var I=g.callbackNode;if(nl()&&g.callbackNode!==I)return null;var K=Sr(g,g===Us?Xs:0);if(K===0)return null;if((K&30)!==0||(K&g.expiredLanes)!==0||w)w=Yd(g,K);else{w=K;var ee=qr;qr|=2;var re=z0();(Us!==g||Xs!==w)&&(ri=null,sl=qe()+500,lo(g,w));do try{Ow();break}catch(Fe){R0(g,Fe)}while(!0);ih(),Vd.current=re,qr=ee,Es!==null?w=0:(Us=null,Xs=0,w=Is)}if(w!==0){if(w===2&&(ee=Ws(g),ee!==0&&(K=ee,w=qh(g,ee))),w===1)throw I=ic,lo(g,0),Ti(g,K),In(g,qe()),I;if(w===6)Ti(g,K);else{if(ee=g.current.alternate,(K&30)===0&&!zw(ee)&&(w=Yd(g,K),w===2&&(re=Ws(g),re!==0&&(K=re,w=qh(g,re))),w===1))throw I=ic,lo(g,0),Ti(g,K),In(g,qe()),I;switch(g.finishedWork=ee,g.finishedLanes=K,w){case 0:case 1:throw Error(t(345));case 2:co(g,Pn,ri);break;case 3:if(Ti(g,K),(K&130023424)===K&&(w=Bh+500-qe(),10<w)){if(Sr(g,0)!==0)break;if(ee=g.suspendedLanes,(ee&K)!==K){gn(),g.pingedLanes|=g.suspendedLanes&ee;break}g.timeoutHandle=Vo(co.bind(null,g,Pn,ri),w);break}co(g,Pn,ri);break;case 4:if(Ti(g,K),(K&4194240)===K)break;for(w=g.eventTimes,ee=-1;0<K;){var ge=31-fr(K);re=1<<ge,ge=w[ge],ge>ee&&(ee=ge),K&=~re}if(K=ee,K=qe()-K,K=(120>K?120:480>K?480:1080>K?1080:1920>K?1920:3e3>K?3e3:4320>K?4320:1960*Rw(K/1960))-K,10<K){g.timeoutHandle=Vo(co.bind(null,g,Pn,ri),K);break}co(g,Pn,ri);break;case 5:co(g,Pn,ri);break;default:throw Error(t(329))}}}return In(g,qe()),g.callbackNode===I?I0.bind(null,g):null}function qh(g,w){var I=oc;return g.current.memoizedState.isDehydrated&&(lo(g,w).flags|=256),g=Yd(g,w),g!==2&&(w=Pn,Pn=I,w!==null&&$h(w)),g}function $h(g){Pn===null?Pn=g:Pn.push.apply(Pn,g)}function zw(g){for(var w=g;;){if(w.flags&16384){var I=w.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var K=0;K<I.length;K++){var ee=I[K],re=ee.getSnapshot;ee=ee.value;try{if(!jn(re(),ee))return!1}catch{return!1}}}if(I=w.child,w.subtreeFlags&16384&&I!==null)I.return=w,w=I;else{if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Ti(g,w){for(w&=~Fh,w&=~qd,g.suspendedLanes|=w,g.pingedLanes&=~w,g=g.expirationTimes;0<w;){var I=31-fr(w),K=1<<I;g[I]=-1,w&=~K}}function M0(g){if((qr&6)!==0)throw Error(t(327));nl();var w=Sr(g,0);if((w&1)===0)return In(g,qe()),null;var I=Yd(g,w);if(g.tag!==0&&I===2){var K=Ws(g);K!==0&&(w=K,I=qh(g,K))}if(I===1)throw I=ic,lo(g,0),Ti(g,w),In(g,qe()),I;if(I===6)throw Error(t(345));return g.finishedWork=g.current.alternate,g.finishedLanes=w,co(g,Pn,ri),In(g,qe()),null}function Hh(g,w){var I=qr;qr|=1;try{return g(w)}finally{qr=I,qr===0&&(sl=qe()+500,Nd&&wi())}}function oo(g){Ci!==null&&Ci.tag===0&&(qr&6)===0&&nl();var w=qr;qr|=1;var I=ra.transition,K=kr;try{if(ra.transition=null,kr=1,g)return g()}finally{kr=K,ra.transition=I,qr=w,(qr&6)===0&&wi()}}function Kh(){Kn=rl.current,as(rl)}function lo(g,w){g.finishedWork=null,g.finishedLanes=0;var I=g.timeoutHandle;if(I!==-1&&(g.timeoutHandle=-1,yd(I)),Es!==null)for(I=Es.return;I!==null;){var K=I;switch(th(K),K.tag){case 1:K=K.type.childContextTypes,K!=null&&vd();break;case 3:Jo(),as(En),as(sn),fh();break;case 5:mh(K);break;case 4:Jo();break;case 13:as(xs);break;case 19:as(xs);break;case 10:oh(K.type._context);break;case 22:case 23:Kh()}I=I.return}if(Us=g,Es=g=Ei(g.current,null),Xs=Kn=w,Is=0,ic=null,Fh=qd=io=0,Pn=oc=null,so!==null){for(w=0;w<so.length;w++)if(I=so[w],K=I.interleaved,K!==null){I.interleaved=null;var ee=K.next,re=I.pending;if(re!==null){var ge=re.next;re.next=ee,K.next=ge}I.pending=K}so=null}return g}function R0(g,w){do{var I=Es;try{if(ih(),Pd.current=zd,Id){for(var K=ys.memoizedState;K!==null;){var ee=K.queue;ee!==null&&(ee.pending=null),K=K.next}Id=!1}if(ao=0,Bs=Ps=ys=null,ec=!1,tc=0,Oh.current=null,I===null||I.return===null){Is=1,ic=w,Es=null;break}e:{var re=g,ge=I.return,Fe=I,We=w;if(w=Xs,Fe.flags|=32768,We!==null&&typeof We=="object"&&typeof We.then=="function"){var vt=We,Vt=Fe,Wt=Vt.tag;if((Vt.mode&1)===0&&(Wt===0||Wt===11||Wt===15)){var Ut=Vt.alternate;Ut?(Vt.updateQueue=Ut.updateQueue,Vt.memoizedState=Ut.memoizedState,Vt.lanes=Ut.lanes):(Vt.updateQueue=null,Vt.memoizedState=null)}var sr=i0(ge);if(sr!==null){sr.flags&=-257,o0(sr,ge,Fe,re,w),sr.mode&1&&a0(re,vt,w),w=sr,We=vt;var or=w.updateQueue;if(or===null){var cr=new Set;cr.add(We),w.updateQueue=cr}else or.add(We);break e}else{if((w&1)===0){a0(re,vt,w),Gh();break e}We=Error(t(426))}}else if(ms&&Fe.mode&1){var js=i0(ge);if(js!==null){(js.flags&65536)===0&&(js.flags|=256),o0(js,ge,Fe,re,w),nh(el(We,Fe));break e}}re=We=el(We,Fe),Is!==4&&(Is=2),oc===null?oc=[re]:oc.push(re),re=ge;do{switch(re.tag){case 3:re.flags|=65536,w&=-w,re.lanes|=w;var ct=s0(re,We,w);Dg(re,ct);break e;case 1:Fe=We;var Ze=re.type,gt=re.stateNode;if((re.flags&128)===0&&(typeof Ze.getDerivedStateFromError=="function"||gt!==null&&typeof gt.componentDidCatch=="function"&&(Si===null||!Si.has(gt)))){re.flags|=65536,w&=-w,re.lanes|=w;var Qt=n0(re,Fe,w);Dg(re,Qt);break e}}re=re.return}while(re!==null)}O0(I)}catch(dr){w=dr,Es===I&&I!==null&&(Es=I=I.return);continue}break}while(!0)}function z0(){var g=Vd.current;return Vd.current=zd,g===null?zd:g}function Gh(){(Is===0||Is===3||Is===2)&&(Is=4),Us===null||(io&268435455)===0&&(qd&268435455)===0||Ti(Us,Xs)}function Yd(g,w){var I=qr;qr|=2;var K=z0();(Us!==g||Xs!==w)&&(ri=null,lo(g,w));do try{Lw();break}catch(ee){R0(g,ee)}while(!0);if(ih(),qr=I,Vd.current=K,Es!==null)throw Error(t(261));return Us=null,Xs=0,Is}function Lw(){for(;Es!==null;)L0(Es)}function Ow(){for(;Es!==null&&!Ot();)L0(Es)}function L0(g){var w=U0(g.alternate,g,Kn);g.memoizedProps=g.pendingProps,w===null?O0(g):Es=w,Oh.current=null}function O0(g){var w=g;do{var I=w.alternate;if(g=w.return,(w.flags&32768)===0){if(I=Dw(I,w,Kn),I!==null){Es=I;return}}else{if(I=_w(I,w),I!==null){I.flags&=32767,Es=I;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{Is=6,Es=null;return}}if(w=w.sibling,w!==null){Es=w;return}Es=w=g}while(w!==null);Is===0&&(Is=5)}function co(g,w,I){var K=kr,ee=ra.transition;try{ra.transition=null,kr=1,Fw(g,w,I,K)}finally{ra.transition=ee,kr=K}return null}function Fw(g,w,I,K){do nl();while(Ci!==null);if((qr&6)!==0)throw Error(t(327));I=g.finishedWork;var ee=g.finishedLanes;if(I===null)return null;if(g.finishedWork=null,g.finishedLanes=0,I===g.current)throw Error(t(177));g.callbackNode=null,g.callbackPriority=0;var re=I.lanes|I.childLanes;if(Fs(g,re),g===Us&&(Es=Us=null,Xs=0),(I.subtreeFlags&2064)===0&&(I.flags&2064)===0||Hd||(Hd=!0,V0(Rt,function(){return nl(),null})),re=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||re){re=ra.transition,ra.transition=null;var ge=kr;kr=1;var Fe=qr;qr|=4,Oh.current=null,Iw(g,I),T0(I,g),ne(qn),To=!!Qr,qn=Qr=null,g.current=I,Mw(I),Se(),qr=Fe,kr=ge,ra.transition=re}else g.current=I;if(Hd&&(Hd=!1,Ci=g,Kd=ee),re=g.pendingLanes,re===0&&(Si=null),nr(I.stateNode),In(g,qe()),w!==null)for(K=g.onRecoverableError,I=0;I<w.length;I++)ee=w[I],K(ee.value,{componentStack:ee.stack,digest:ee.digest});if($d)throw $d=!1,g=Uh,Uh=null,g;return(Kd&1)!==0&&g.tag!==0&&nl(),re=g.pendingLanes,(re&1)!==0?g===Vh?lc++:(lc=0,Vh=g):lc=0,wi(),null}function nl(){if(Ci!==null){var g=mn(Kd),w=ra.transition,I=kr;try{if(ra.transition=null,kr=16>g?16:g,Ci===null)var K=!1;else{if(g=Ci,Ci=null,Kd=0,(qr&6)!==0)throw Error(t(331));var ee=qr;for(qr|=4,ar=g.current;ar!==null;){var re=ar,ge=re.child;if((ar.flags&16)!==0){var Fe=re.deletions;if(Fe!==null){for(var We=0;We<Fe.length;We++){var vt=Fe[We];for(ar=vt;ar!==null;){var Vt=ar;switch(Vt.tag){case 0:case 11:case 15:ac(8,Vt,re)}var Wt=Vt.child;if(Wt!==null)Wt.return=Vt,ar=Wt;else for(;ar!==null;){Vt=ar;var Ut=Vt.sibling,sr=Vt.return;if(k0(Vt),Vt===vt){ar=null;break}if(Ut!==null){Ut.return=sr,ar=Ut;break}ar=sr}}}var or=re.alternate;if(or!==null){var cr=or.child;if(cr!==null){or.child=null;do{var js=cr.sibling;cr.sibling=null,cr=js}while(cr!==null)}}ar=re}}if((re.subtreeFlags&2064)!==0&&ge!==null)ge.return=re,ar=ge;else e:for(;ar!==null;){if(re=ar,(re.flags&2048)!==0)switch(re.tag){case 0:case 11:case 15:ac(9,re,re.return)}var ct=re.sibling;if(ct!==null){ct.return=re.return,ar=ct;break e}ar=re.return}}var Ze=g.current;for(ar=Ze;ar!==null;){ge=ar;var gt=ge.child;if((ge.subtreeFlags&2064)!==0&&gt!==null)gt.return=ge,ar=gt;else e:for(ge=Ze;ar!==null;){if(Fe=ar,(Fe.flags&2048)!==0)try{switch(Fe.tag){case 0:case 11:case 15:Ud(9,Fe)}}catch(dr){ks(Fe,Fe.return,dr)}if(Fe===ge){ar=null;break e}var Qt=Fe.sibling;if(Qt!==null){Qt.return=Fe.return,ar=Qt;break e}ar=Fe.return}}if(qr=ee,wi(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Zt,g)}catch{}K=!0}return K}finally{kr=I,ra.transition=w}}return!1}function F0(g,w,I){w=el(I,w),w=s0(g,w,1),g=ki(g,w,1),w=gn(),g!==null&&(es(g,1,w),In(g,w))}function ks(g,w,I){if(g.tag===3)F0(g,g,I);else for(;w!==null;){if(w.tag===3){F0(w,g,I);break}else if(w.tag===1){var K=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof K.componentDidCatch=="function"&&(Si===null||!Si.has(K))){g=el(I,g),g=n0(w,g,1),w=ki(w,g,1),g=gn(),w!==null&&(es(w,1,g),In(w,g));break}}w=w.return}}function Bw(g,w,I){var K=g.pingCache;K!==null&&K.delete(w),w=gn(),g.pingedLanes|=g.suspendedLanes&I,Us===g&&(Xs&I)===I&&(Is===4||Is===3&&(Xs&130023424)===Xs&&500>qe()-Bh?lo(g,0):Fh|=I),In(g,w)}function B0(g,w){w===0&&((g.mode&1)===0?w=1:(w=jr,jr<<=1,(jr&130023424)===0&&(jr=4194304)));var I=gn();g=Ja(g,w),g!==null&&(es(g,w,I),In(g,I))}function Uw(g){var w=g.memoizedState,I=0;w!==null&&(I=w.retryLane),B0(g,I)}function Vw(g,w){var I=0;switch(g.tag){case 13:var K=g.stateNode,ee=g.memoizedState;ee!==null&&(I=ee.retryLane);break;case 19:K=g.stateNode;break;default:throw Error(t(314))}K!==null&&K.delete(w),B0(g,I)}var U0;U0=function(g,w,I){if(g!==null)if(g.memoizedProps!==w.pendingProps||En.current)_n=!0;else{if((g.lanes&I)===0&&(w.flags&128)===0)return _n=!1,Ew(g,w,I);_n=(g.flags&131072)!==0}else _n=!1,ms&&(w.flags&1048576)!==0&&vg(w,jd,w.index);switch(w.lanes=0,w.tag){case 2:var K=w.type;Fd(g,w),g=w.pendingProps;var ee=Ko(w,sn.current);Xo(w,I),ee=xh(null,w,K,g,ee,I);var re=yh();return w.flags|=1,typeof ee=="object"&&ee!==null&&typeof ee.render=="function"&&ee.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,Dn(K)?(re=!0,wd(w)):re=!1,w.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,dh(w),ee.updater=Ld,w.stateNode=ee,ee._reactInternals=w,jh(w,K,g,I),w=Th(null,w,K,!0,re,I)):(w.tag=0,ms&&re&&eh(w),pn(null,w,ee,I),w=w.child),w;case 16:K=w.elementType;e:{switch(Fd(g,w),g=w.pendingProps,ee=K._init,K=ee(K._payload),w.type=K,ee=w.tag=$w(K),g=ga(K,g),ee){case 0:w=Ah(null,w,K,g,I);break e;case 1:w=h0(null,w,K,g,I);break e;case 11:w=l0(null,w,K,g,I);break e;case 14:w=c0(null,w,K,ga(K.type,g),I);break e}throw Error(t(306,K,""))}return w;case 0:return K=w.type,ee=w.pendingProps,ee=w.elementType===K?ee:ga(K,ee),Ah(g,w,K,ee,I);case 1:return K=w.type,ee=w.pendingProps,ee=w.elementType===K?ee:ga(K,ee),h0(g,w,K,ee,I);case 3:e:{if(f0(w),g===null)throw Error(t(387));K=w.pendingProps,re=w.memoizedState,ee=re.element,Eg(g,w),Dd(w,K,null,I);var ge=w.memoizedState;if(K=ge.element,re.isDehydrated)if(re={element:K,isDehydrated:!1,cache:ge.cache,pendingSuspenseBoundaries:ge.pendingSuspenseBoundaries,transitions:ge.transitions},w.updateQueue.baseState=re,w.memoizedState=re,w.flags&256){ee=el(Error(t(423)),w),w=p0(g,w,K,I,ee);break e}else if(K!==ee){ee=el(Error(t(424)),w),w=p0(g,w,K,I,ee);break e}else for(Hn=yi(w.stateNode.containerInfo.firstChild),$n=w,ms=!0,pa=null,I=Ag(w,null,K,I),w.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(Yo(),K===ee){w=ti(g,w,I);break e}pn(g,w,K,I)}w=w.child}return w;case 5:return Pg(w),g===null&&sh(w),K=w.type,ee=w.pendingProps,re=g!==null?g.memoizedProps:null,ge=ee.children,rn(K,ee)?ge=null:re!==null&&rn(K,re)&&(w.flags|=32),m0(g,w),pn(g,w,ge,I),w.child;case 6:return g===null&&sh(w),null;case 13:return g0(g,w,I);case 4:return uh(w,w.stateNode.containerInfo),K=w.pendingProps,g===null?w.child=Qo(w,null,K,I):pn(g,w,K,I),w.child;case 11:return K=w.type,ee=w.pendingProps,ee=w.elementType===K?ee:ga(K,ee),l0(g,w,K,ee,I);case 7:return pn(g,w,w.pendingProps,I),w.child;case 8:return pn(g,w,w.pendingProps.children,I),w.child;case 12:return pn(g,w,w.pendingProps.children,I),w.child;case 10:e:{if(K=w.type._context,ee=w.pendingProps,re=w.memoizedProps,ge=ee.value,ss(Ad,K._currentValue),K._currentValue=ge,re!==null)if(jn(re.value,ge)){if(re.children===ee.children&&!En.current){w=ti(g,w,I);break e}}else for(re=w.child,re!==null&&(re.return=w);re!==null;){var Fe=re.dependencies;if(Fe!==null){ge=re.child;for(var We=Fe.firstContext;We!==null;){if(We.context===K){if(re.tag===1){We=ei(-1,I&-I),We.tag=2;var vt=re.updateQueue;if(vt!==null){vt=vt.shared;var Vt=vt.pending;Vt===null?We.next=We:(We.next=Vt.next,Vt.next=We),vt.pending=We}}re.lanes|=I,We=re.alternate,We!==null&&(We.lanes|=I),lh(re.return,I,w),Fe.lanes|=I;break}We=We.next}}else if(re.tag===10)ge=re.type===w.type?null:re.child;else if(re.tag===18){if(ge=re.return,ge===null)throw Error(t(341));ge.lanes|=I,Fe=ge.alternate,Fe!==null&&(Fe.lanes|=I),lh(ge,I,w),ge=re.sibling}else ge=re.child;if(ge!==null)ge.return=re;else for(ge=re;ge!==null;){if(ge===w){ge=null;break}if(re=ge.sibling,re!==null){re.return=ge.return,ge=re;break}ge=ge.return}re=ge}pn(g,w,ee.children,I),w=w.child}return w;case 9:return ee=w.type,K=w.pendingProps.children,Xo(w,I),ee=ea(ee),K=K(ee),w.flags|=1,pn(g,w,K,I),w.child;case 14:return K=w.type,ee=ga(K,w.pendingProps),ee=ga(K.type,ee),c0(g,w,K,ee,I);case 15:return d0(g,w,w.type,w.pendingProps,I);case 17:return K=w.type,ee=w.pendingProps,ee=w.elementType===K?ee:ga(K,ee),Fd(g,w),w.tag=1,Dn(K)?(g=!0,wd(w)):g=!1,Xo(w,I),t0(w,K,ee),jh(w,K,ee,I),Th(null,w,K,!0,g,I);case 19:return y0(g,w,I);case 22:return u0(g,w,I)}throw Error(t(156,w.tag))};function V0(g,w){return Re(g,w)}function qw(g,w,I,K){this.tag=g,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=K,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sa(g,w,I,K){return new qw(g,w,I,K)}function Wh(g){return g=g.prototype,!(!g||!g.isReactComponent)}function $w(g){if(typeof g=="function")return Wh(g)?1:0;if(g!=null){if(g=g.$$typeof,g===B)return 11;if(g===A)return 14}return 2}function Ei(g,w){var I=g.alternate;return I===null?(I=sa(g.tag,w,g.key,g.mode),I.elementType=g.elementType,I.type=g.type,I.stateNode=g.stateNode,I.alternate=g,g.alternate=I):(I.pendingProps=w,I.type=g.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=g.flags&14680064,I.childLanes=g.childLanes,I.lanes=g.lanes,I.child=g.child,I.memoizedProps=g.memoizedProps,I.memoizedState=g.memoizedState,I.updateQueue=g.updateQueue,w=g.dependencies,I.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},I.sibling=g.sibling,I.index=g.index,I.ref=g.ref,I}function Qd(g,w,I,K,ee,re){var ge=2;if(K=g,typeof g=="function")Wh(g)&&(ge=1);else if(typeof g=="string")ge=5;else e:switch(g){case H:return uo(I.children,ee,re,w);case F:ge=8,ee|=8;break;case V:return g=sa(12,I,w,ee|2),g.elementType=V,g.lanes=re,g;case E:return g=sa(13,I,w,ee),g.elementType=E,g.lanes=re,g;case P:return g=sa(19,I,w,ee),g.elementType=P,g.lanes=re,g;case j:return Zd(I,ee,re,w);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case q:ge=10;break e;case W:ge=9;break e;case B:ge=11;break e;case A:ge=14;break e;case k:ge=16,K=null;break e}throw Error(t(130,g==null?g:typeof g,""))}return w=sa(ge,I,w,ee),w.elementType=g,w.type=K,w.lanes=re,w}function uo(g,w,I,K){return g=sa(7,g,K,w),g.lanes=I,g}function Zd(g,w,I,K){return g=sa(22,g,K,w),g.elementType=j,g.lanes=I,g.stateNode={isHidden:!1},g}function Yh(g,w,I){return g=sa(6,g,null,w),g.lanes=I,g}function Qh(g,w,I){return w=sa(4,g.children!==null?g.children:[],g.key,w),w.lanes=I,w.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},w}function Hw(g,w,I,K,ee){this.tag=w,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=K,this.onRecoverableError=ee,this.mutableSourceEagerHydrationData=null}function Zh(g,w,I,K,ee,re,ge,Fe,We){return g=new Hw(g,w,I,Fe,We),w===1?(w=1,re===!0&&(w|=8)):w=0,re=sa(3,null,null,w),g.current=re,re.stateNode=g,re.memoizedState={element:K,isDehydrated:I,cache:null,transitions:null,pendingSuspenseBoundaries:null},dh(re),g}function Kw(g,w,I){var K=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:K==null?null:""+K,children:g,containerInfo:w,implementation:I}}function q0(g){if(!g)return vi;g=g._reactInternals;e:{if(Oe(g)!==g||g.tag!==1)throw Error(t(170));var w=g;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(Dn(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(t(171))}if(g.tag===1){var I=g.type;if(Dn(I))return xg(g,I,w)}return w}function $0(g,w,I,K,ee,re,ge,Fe,We){return g=Zh(I,K,!0,g,ee,re,ge,Fe,We),g.context=q0(null),I=g.current,K=gn(),ee=Ai(I),re=ei(K,ee),re.callback=w??null,ki(I,re,ee),g.current.lanes=ee,es(g,ee,K),In(g,K),g}function Xd(g,w,I,K){var ee=w.current,re=gn(),ge=Ai(ee);return I=q0(I),w.context===null?w.context=I:w.pendingContext=I,w=ei(re,ge),w.payload={element:g},K=K===void 0?null:K,K!==null&&(w.callback=K),g=ki(ee,w,ge),g!==null&&(ba(g,ee,ge,re),Ed(g,ee,ge)),ge}function Jd(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function H0(g,w){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var I=g.retryLane;g.retryLane=I!==0&&I<w?I:w}}function Xh(g,w){H0(g,w),(g=g.alternate)&&H0(g,w)}function Gw(){return null}var K0=typeof reportError=="function"?reportError:function(g){console.error(g)};function Jh(g){this._internalRoot=g}eu.prototype.render=Jh.prototype.render=function(g){var w=this._internalRoot;if(w===null)throw Error(t(409));Xd(g,w,null,null)},eu.prototype.unmount=Jh.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var w=g.containerInfo;oo(function(){Xd(null,g,null,null)}),w[Ya]=null}};function eu(g){this._internalRoot=g}eu.prototype.unstable_scheduleHydration=function(g){if(g){var w=Ts();g={blockedOn:null,target:g,priority:w};for(var I=0;I<_s.length&&w!==0&&w<_s[I].priority;I++);_s.splice(I,0,g),I===0&&Dl(g)}};function ef(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function tu(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function G0(){}function Ww(g,w,I,K,ee){if(ee){if(typeof K=="function"){var re=K;K=function(){var vt=Jd(ge);re.call(vt)}}var ge=$0(w,K,g,0,null,!1,!1,"",G0);return g._reactRootContainer=ge,g[Ya]=ge.current,Tn(g.nodeType===8?g.parentNode:g),oo(),ge}for(;ee=g.lastChild;)g.removeChild(ee);if(typeof K=="function"){var Fe=K;K=function(){var vt=Jd(We);Fe.call(vt)}}var We=Zh(g,0,!1,null,null,!1,!1,"",G0);return g._reactRootContainer=We,g[Ya]=We.current,Tn(g.nodeType===8?g.parentNode:g),oo(function(){Xd(w,We,I,K)}),We}function ru(g,w,I,K,ee){var re=I._reactRootContainer;if(re){var ge=re;if(typeof ee=="function"){var Fe=ee;ee=function(){var We=Jd(ge);Fe.call(We)}}Xd(w,ge,g,ee)}else ge=Ww(I,w,g,ee,K);return Jd(ge)}kn=function(g){switch(g.tag){case 3:var w=g.stateNode;if(w.current.memoizedState.isDehydrated){var I=Ds(w.pendingLanes);I!==0&&(da(w,I|1),In(w,qe()),(qr&6)===0&&(sl=qe()+500,wi()))}break;case 13:oo(function(){var K=Ja(g,1);if(K!==null){var ee=gn();ba(K,g,1,ee)}}),Xh(g,1)}},Ca=function(g){if(g.tag===13){var w=Ja(g,134217728);if(w!==null){var I=gn();ba(w,g,134217728,I)}Xh(g,134217728)}},Un=function(g){if(g.tag===13){var w=Ai(g),I=Ja(g,w);if(I!==null){var K=gn();ba(I,g,w,K)}Xh(g,w)}},Ts=function(){return kr},zr=function(g,w){var I=kr;try{return kr=g,w()}finally{kr=I}},ze=function(g,w,I){switch(w){case"input":if(Z(g,I),w=I.name,I.type==="radio"&&w!=null){for(I=g;I.parentNode;)I=I.parentNode;for(I=I.querySelectorAll("input[name="+JSON.stringify(""+w)+'][type="radio"]'),w=0;w<I.length;w++){var K=I[w];if(K!==g&&K.form===g.form){var ee=bd(K);if(!ee)throw Error(t(90));ie(K),Z(K,ee)}}}break;case"textarea":Ge(g,I);break;case"select":w=I.value,w!=null&&Ae(g,!!I.multiple,w,!1)}},pe=Hh,Qe=oo;var Yw={usingClientEntryPoint:!1,Events:[Yl,$o,bd,st,wt,Hh]},cc={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qw={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=Tt(g),g===null?null:g.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||Gw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{Zt=su.inject(Qw),qt=su}catch{}}return Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yw,Mn.createPortal=function(g,w){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(w))throw Error(t(200));return Kw(g,w,null,I)},Mn.createRoot=function(g,w){if(!ef(g))throw Error(t(299));var I=!1,K="",ee=K0;return w!=null&&(w.unstable_strictMode===!0&&(I=!0),w.identifierPrefix!==void 0&&(K=w.identifierPrefix),w.onRecoverableError!==void 0&&(ee=w.onRecoverableError)),w=Zh(g,1,!1,null,null,I,!1,K,ee),g[Ya]=w.current,Tn(g.nodeType===8?g.parentNode:g),new Jh(w)},Mn.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var w=g._reactInternals;if(w===void 0)throw typeof g.render=="function"?Error(t(188)):(g=Object.keys(g).join(","),Error(t(268,g)));return g=Tt(w),g=g===null?null:g.stateNode,g},Mn.flushSync=function(g){return oo(g)},Mn.hydrate=function(g,w,I){if(!tu(w))throw Error(t(200));return ru(null,g,w,!0,I)},Mn.hydrateRoot=function(g,w,I){if(!ef(g))throw Error(t(405));var K=I!=null&&I.hydratedSources||null,ee=!1,re="",ge=K0;if(I!=null&&(I.unstable_strictMode===!0&&(ee=!0),I.identifierPrefix!==void 0&&(re=I.identifierPrefix),I.onRecoverableError!==void 0&&(ge=I.onRecoverableError)),w=$0(w,null,g,1,I??null,ee,!1,re,ge),g[Ya]=w.current,Tn(g),K)for(g=0;g<K.length;g++)I=K[g],ee=I._getVersion,ee=ee(I._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[I,ee]:w.mutableSourceEagerHydrationData.push(I,ee);return new eu(w)},Mn.render=function(g,w,I){if(!tu(w))throw Error(t(200));return ru(null,g,w,!1,I)},Mn.unmountComponentAtNode=function(g){if(!tu(g))throw Error(t(40));return g._reactRootContainer?(oo(function(){ru(null,null,g,!1,function(){g._reactRootContainer=null,g[Ya]=null})}),!0):!1},Mn.unstable_batchedUpdates=Hh,Mn.unstable_renderSubtreeIntoContainer=function(g,w,I,K){if(!tu(I))throw Error(t(200));if(g==null||g._reactInternals===void 0)throw Error(t(38));return ru(g,w,I,!1,K)},Mn.version="18.3.1-next-f1338f8080-20240426",Mn}var tx;function gb(){if(tx)return sf.exports;tx=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(o){console.error(o)}}return a(),sf.exports=s1(),sf.exports}var rx;function n1(){if(rx)return nu;rx=1;var a=gb();return nu.createRoot=a.createRoot,nu.hydrateRoot=a.hydrateRoot,nu}var a1=n1();const i1="modulepreload",o1=function(a){return"/"+a},sx={},Mr=function(o,t,f){let h=Promise.resolve();if(t&&t.length>0){let i=function(r){return Promise.all(r.map(s=>Promise.resolve(s).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),l=n?.nonce||n?.getAttribute("nonce");h=i(t.map(r=>{if(r=o1(r),r in sx)return;sx[r]=!0;const s=r.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${c}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":i1,s||(u.as="script"),u.crossOrigin="",u.href=r,l&&u.setAttribute("nonce",l),document.head.appendChild(u),s)return new Promise((m,x)=>{u.addEventListener("load",m),u.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${r}`)))})}))}function d(n){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=n,window.dispatchEvent(l),!l.defaultPrevented)throw n}return h.then(n=>{for(const l of n||[])l.status==="rejected"&&d(l.reason);return o().catch(d)})};function xb(a,o){return function(){return a.apply(o,arguments)}}const{toString:l1}=Object.prototype,{getPrototypeOf:Vp}=Object,{iterator:gm,toStringTag:yb}=Symbol,xm=(a=>o=>{const t=l1.call(o);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Sa=a=>(a=a.toLowerCase(),o=>xm(o)===a),ym=a=>o=>typeof o===a,{isArray:Sl}=Array,bl=ym("undefined");function Wc(a){return a!==null&&!bl(a)&&a.constructor!==null&&!bl(a.constructor)&&On(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const bb=Sa("ArrayBuffer");function c1(a){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(a):o=a&&a.buffer&&bb(a.buffer),o}const d1=ym("string"),On=ym("function"),vb=ym("number"),Yc=a=>a!==null&&typeof a=="object",u1=a=>a===!0||a===!1,ju=a=>{if(xm(a)!=="object")return!1;const o=Vp(a);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(yb in a)&&!(gm in a)},m1=a=>{if(!Yc(a)||Wc(a))return!1;try{return Object.keys(a).length===0&&Object.getPrototypeOf(a)===Object.prototype}catch{return!1}},h1=Sa("Date"),f1=Sa("File"),p1=Sa("Blob"),g1=Sa("FileList"),x1=a=>Yc(a)&&On(a.pipe),y1=a=>{let o;return a&&(typeof FormData=="function"&&a instanceof FormData||On(a.append)&&((o=xm(a))==="formdata"||o==="object"&&On(a.toString)&&a.toString()==="[object FormData]"))},b1=Sa("URLSearchParams"),[v1,w1,N1,k1]=["ReadableStream","Request","Response","Headers"].map(Sa),j1=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qc(a,o,{allOwnKeys:t=!1}={}){if(a===null||typeof a>"u")return;let f,h;if(typeof a!="object"&&(a=[a]),Sl(a))for(f=0,h=a.length;f<h;f++)o.call(null,a[f],f,a);else{if(Wc(a))return;const d=t?Object.getOwnPropertyNames(a):Object.keys(a),n=d.length;let l;for(f=0;f<n;f++)l=d[f],o.call(null,a[l],l,a)}}function wb(a,o){if(Wc(a))return null;o=o.toLowerCase();const t=Object.keys(a);let f=t.length,h;for(;f-- >0;)if(h=t[f],o===h.toLowerCase())return h;return null}const yo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Nb=a=>!bl(a)&&a!==yo;function tp(){const{caseless:a,skipUndefined:o}=Nb(this)&&this||{},t={},f=(h,d)=>{const n=a&&wb(t,d)||d;ju(t[n])&&ju(h)?t[n]=tp(t[n],h):ju(h)?t[n]=tp({},h):Sl(h)?t[n]=h.slice():(!o||!bl(h))&&(t[n]=h)};for(let h=0,d=arguments.length;h<d;h++)arguments[h]&&Qc(arguments[h],f);return t}const S1=(a,o,t,{allOwnKeys:f}={})=>(Qc(o,(h,d)=>{t&&On(h)?a[d]=xb(h,t):a[d]=h},{allOwnKeys:f}),a),C1=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),A1=(a,o,t,f)=>{a.prototype=Object.create(o.prototype,f),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:o.prototype}),t&&Object.assign(a.prototype,t)},T1=(a,o,t,f)=>{let h,d,n;const l={};if(o=o||{},a==null)return o;do{for(h=Object.getOwnPropertyNames(a),d=h.length;d-- >0;)n=h[d],(!f||f(n,a,o))&&!l[n]&&(o[n]=a[n],l[n]=!0);a=t!==!1&&Vp(a)}while(a&&(!t||t(a,o))&&a!==Object.prototype);return o},E1=(a,o,t)=>{a=String(a),(t===void 0||t>a.length)&&(t=a.length),t-=o.length;const f=a.indexOf(o,t);return f!==-1&&f===t},D1=a=>{if(!a)return null;if(Sl(a))return a;let o=a.length;if(!vb(o))return null;const t=new Array(o);for(;o-- >0;)t[o]=a[o];return t},_1=(a=>o=>a&&o instanceof a)(typeof Uint8Array<"u"&&Vp(Uint8Array)),P1=(a,o)=>{const f=(a&&a[gm]).call(a);let h;for(;(h=f.next())&&!h.done;){const d=h.value;o.call(a,d[0],d[1])}},I1=(a,o)=>{let t;const f=[];for(;(t=a.exec(o))!==null;)f.push(t);return f},M1=Sa("HTMLFormElement"),R1=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,f,h){return f.toUpperCase()+h}),nx=(({hasOwnProperty:a})=>(o,t)=>a.call(o,t))(Object.prototype),z1=Sa("RegExp"),kb=(a,o)=>{const t=Object.getOwnPropertyDescriptors(a),f={};Qc(t,(h,d)=>{let n;(n=o(h,d,a))!==!1&&(f[d]=n||h)}),Object.defineProperties(a,f)},L1=a=>{kb(a,(o,t)=>{if(On(a)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const f=a[t];if(On(f)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},O1=(a,o)=>{const t={},f=h=>{h.forEach(d=>{t[d]=!0})};return Sl(a)?f(a):f(String(a).split(o)),t},F1=()=>{},B1=(a,o)=>a!=null&&Number.isFinite(a=+a)?a:o;function U1(a){return!!(a&&On(a.append)&&a[yb]==="FormData"&&a[gm])}const V1=a=>{const o=new Array(10),t=(f,h)=>{if(Yc(f)){if(o.indexOf(f)>=0)return;if(Wc(f))return f;if(!("toJSON"in f)){o[h]=f;const d=Sl(f)?[]:{};return Qc(f,(n,l)=>{const i=t(n,h+1);!bl(i)&&(d[l]=i)}),o[h]=void 0,d}}return f};return t(a,0)},q1=Sa("AsyncFunction"),$1=a=>a&&(Yc(a)||On(a))&&On(a.then)&&On(a.catch),jb=((a,o)=>a?setImmediate:o?((t,f)=>(yo.addEventListener("message",({source:h,data:d})=>{h===yo&&d===t&&f.length&&f.shift()()},!1),h=>{f.push(h),yo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",On(yo.postMessage)),H1=typeof queueMicrotask<"u"?queueMicrotask.bind(yo):typeof process<"u"&&process.nextTick||jb,K1=a=>a!=null&&On(a[gm]),Nt={isArray:Sl,isArrayBuffer:bb,isBuffer:Wc,isFormData:y1,isArrayBufferView:c1,isString:d1,isNumber:vb,isBoolean:u1,isObject:Yc,isPlainObject:ju,isEmptyObject:m1,isReadableStream:v1,isRequest:w1,isResponse:N1,isHeaders:k1,isUndefined:bl,isDate:h1,isFile:f1,isBlob:p1,isRegExp:z1,isFunction:On,isStream:x1,isURLSearchParams:b1,isTypedArray:_1,isFileList:g1,forEach:Qc,merge:tp,extend:S1,trim:j1,stripBOM:C1,inherits:A1,toFlatObject:T1,kindOf:xm,kindOfTest:Sa,endsWith:E1,toArray:D1,forEachEntry:P1,matchAll:I1,isHTMLForm:M1,hasOwnProperty:nx,hasOwnProp:nx,reduceDescriptors:kb,freezeMethods:L1,toObjectSet:O1,toCamelCase:R1,noop:F1,toFiniteNumber:B1,findKey:wb,global:yo,isContextDefined:Nb,isSpecCompliantForm:U1,toJSONObject:V1,isAsyncFn:q1,isThenable:$1,setImmediate:jb,asap:H1,isIterable:K1};function Ar(a,o,t,f,h){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",o&&(this.code=o),t&&(this.config=t),f&&(this.request=f),h&&(this.response=h,this.status=h.status?h.status:null)}Nt.inherits(Ar,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Nt.toJSONObject(this.config),code:this.code,status:this.status}}});const Sb=Ar.prototype,Cb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{Cb[a]={value:a}});Object.defineProperties(Ar,Cb);Object.defineProperty(Sb,"isAxiosError",{value:!0});Ar.from=(a,o,t,f,h,d)=>{const n=Object.create(Sb);Nt.toFlatObject(a,n,function(s){return s!==Error.prototype},r=>r!=="isAxiosError");const l=a&&a.message?a.message:"Error",i=o==null&&a?a.code:o;return Ar.call(n,l,i,t,f,h),a&&n.cause==null&&Object.defineProperty(n,"cause",{value:a,configurable:!0}),n.name=a&&a.name||"Error",d&&Object.assign(n,d),n};const G1=null;function rp(a){return Nt.isPlainObject(a)||Nt.isArray(a)}function Ab(a){return Nt.endsWith(a,"[]")?a.slice(0,-2):a}function ax(a,o,t){return a?a.concat(o).map(function(h,d){return h=Ab(h),!t&&d?"["+h+"]":h}).join(t?".":""):o}function W1(a){return Nt.isArray(a)&&!a.some(rp)}const Y1=Nt.toFlatObject(Nt,{},null,function(o){return/^is[A-Z]/.test(o)});function bm(a,o,t){if(!Nt.isObject(a))throw new TypeError("target must be an object");o=o||new FormData,t=Nt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,p){return!Nt.isUndefined(p[b])});const f=t.metaTokens,h=t.visitor||s,d=t.dots,n=t.indexes,i=(t.Blob||typeof Blob<"u"&&Blob)&&Nt.isSpecCompliantForm(o);if(!Nt.isFunction(h))throw new TypeError("visitor must be a function");function r(x){if(x===null)return"";if(Nt.isDate(x))return x.toISOString();if(Nt.isBoolean(x))return x.toString();if(!i&&Nt.isBlob(x))throw new Ar("Blob is not supported. Use a Buffer instead.");return Nt.isArrayBuffer(x)||Nt.isTypedArray(x)?i&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function s(x,b,p){let v=x;if(x&&!p&&typeof x=="object"){if(Nt.endsWith(b,"{}"))b=f?b:b.slice(0,-2),x=JSON.stringify(x);else if(Nt.isArray(x)&&W1(x)||(Nt.isFileList(x)||Nt.endsWith(b,"[]"))&&(v=Nt.toArray(x)))return b=Ab(b),v.forEach(function(N,T){!(Nt.isUndefined(N)||N===null)&&o.append(n===!0?ax([b],T,d):n===null?b:b+"[]",r(N))}),!1}return rp(x)?!0:(o.append(ax(p,b,d),r(x)),!1)}const c=[],u=Object.assign(Y1,{defaultVisitor:s,convertValue:r,isVisitable:rp});function m(x,b){if(!Nt.isUndefined(x)){if(c.indexOf(x)!==-1)throw Error("Circular reference detected in "+b.join("."));c.push(x),Nt.forEach(x,function(v,y){(!(Nt.isUndefined(v)||v===null)&&h.call(o,v,Nt.isString(y)?y.trim():y,b,u))===!0&&m(v,b?b.concat(y):[y])}),c.pop()}}if(!Nt.isObject(a))throw new TypeError("data must be an object");return m(a),o}function ix(a){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(f){return o[f]})}function qp(a,o){this._pairs=[],a&&bm(a,this,o)}const Tb=qp.prototype;Tb.append=function(o,t){this._pairs.push([o,t])};Tb.toString=function(o){const t=o?function(f){return o.call(this,f,ix)}:ix;return this._pairs.map(function(h){return t(h[0])+"="+t(h[1])},"").join("&")};function Q1(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Eb(a,o,t){if(!o)return a;const f=t&&t.encode||Q1;Nt.isFunction(t)&&(t={serialize:t});const h=t&&t.serialize;let d;if(h?d=h(o,t):d=Nt.isURLSearchParams(o)?o.toString():new qp(o,t).toString(f),d){const n=a.indexOf("#");n!==-1&&(a=a.slice(0,n)),a+=(a.indexOf("?")===-1?"?":"&")+d}return a}class ox{constructor(){this.handlers=[]}use(o,t,f){return this.handlers.push({fulfilled:o,rejected:t,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){Nt.forEach(this.handlers,function(f){f!==null&&o(f)})}}const Db={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z1=typeof URLSearchParams<"u"?URLSearchParams:qp,X1=typeof FormData<"u"?FormData:null,J1=typeof Blob<"u"?Blob:null,e2={isBrowser:!0,classes:{URLSearchParams:Z1,FormData:X1,Blob:J1},protocols:["http","https","file","blob","url","data"]},$p=typeof window<"u"&&typeof document<"u",sp=typeof navigator=="object"&&navigator||void 0,t2=$p&&(!sp||["ReactNative","NativeScript","NS"].indexOf(sp.product)<0),r2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",s2=$p&&window.location.href||"http://localhost",n2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$p,hasStandardBrowserEnv:t2,hasStandardBrowserWebWorkerEnv:r2,navigator:sp,origin:s2},Symbol.toStringTag,{value:"Module"})),dn={...n2,...e2};function a2(a,o){return bm(a,new dn.classes.URLSearchParams,{visitor:function(t,f,h,d){return dn.isNode&&Nt.isBuffer(t)?(this.append(f,t.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...o})}function i2(a){return Nt.matchAll(/\w+|\[(\w*)]/g,a).map(o=>o[0]==="[]"?"":o[1]||o[0])}function o2(a){const o={},t=Object.keys(a);let f;const h=t.length;let d;for(f=0;f<h;f++)d=t[f],o[d]=a[d];return o}function _b(a){function o(t,f,h,d){let n=t[d++];if(n==="__proto__")return!0;const l=Number.isFinite(+n),i=d>=t.length;return n=!n&&Nt.isArray(h)?h.length:n,i?(Nt.hasOwnProp(h,n)?h[n]=[h[n],f]:h[n]=f,!l):((!h[n]||!Nt.isObject(h[n]))&&(h[n]=[]),o(t,f,h[n],d)&&Nt.isArray(h[n])&&(h[n]=o2(h[n])),!l)}if(Nt.isFormData(a)&&Nt.isFunction(a.entries)){const t={};return Nt.forEachEntry(a,(f,h)=>{o(i2(f),h,t,0)}),t}return null}function l2(a,o,t){if(Nt.isString(a))try{return(o||JSON.parse)(a),Nt.trim(a)}catch(f){if(f.name!=="SyntaxError")throw f}return(t||JSON.stringify)(a)}const Zc={transitional:Db,adapter:["xhr","http","fetch"],transformRequest:[function(o,t){const f=t.getContentType()||"",h=f.indexOf("application/json")>-1,d=Nt.isObject(o);if(d&&Nt.isHTMLForm(o)&&(o=new FormData(o)),Nt.isFormData(o))return h?JSON.stringify(_b(o)):o;if(Nt.isArrayBuffer(o)||Nt.isBuffer(o)||Nt.isStream(o)||Nt.isFile(o)||Nt.isBlob(o)||Nt.isReadableStream(o))return o;if(Nt.isArrayBufferView(o))return o.buffer;if(Nt.isURLSearchParams(o))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let l;if(d){if(f.indexOf("application/x-www-form-urlencoded")>-1)return a2(o,this.formSerializer).toString();if((l=Nt.isFileList(o))||f.indexOf("multipart/form-data")>-1){const i=this.env&&this.env.FormData;return bm(l?{"files[]":o}:o,i&&new i,this.formSerializer)}}return d||h?(t.setContentType("application/json",!1),l2(o)):o}],transformResponse:[function(o){const t=this.transitional||Zc.transitional,f=t&&t.forcedJSONParsing,h=this.responseType==="json";if(Nt.isResponse(o)||Nt.isReadableStream(o))return o;if(o&&Nt.isString(o)&&(f&&!this.responseType||h)){const n=!(t&&t.silentJSONParsing)&&h;try{return JSON.parse(o,this.parseReviver)}catch(l){if(n)throw l.name==="SyntaxError"?Ar.from(l,Ar.ERR_BAD_RESPONSE,this,null,this.response):l}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dn.classes.FormData,Blob:dn.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Nt.forEach(["delete","get","head","post","put","patch"],a=>{Zc.headers[a]={}});const c2=Nt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),d2=a=>{const o={};let t,f,h;return a&&a.split(`
`).forEach(function(n){h=n.indexOf(":"),t=n.substring(0,h).trim().toLowerCase(),f=n.substring(h+1).trim(),!(!t||o[t]&&c2[t])&&(t==="set-cookie"?o[t]?o[t].push(f):o[t]=[f]:o[t]=o[t]?o[t]+", "+f:f)}),o},lx=Symbol("internals");function uc(a){return a&&String(a).trim().toLowerCase()}function Su(a){return a===!1||a==null?a:Nt.isArray(a)?a.map(Su):String(a)}function u2(a){const o=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let f;for(;f=t.exec(a);)o[f[1]]=f[2];return o}const m2=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function of(a,o,t,f,h){if(Nt.isFunction(f))return f.call(this,o,t);if(h&&(o=t),!!Nt.isString(o)){if(Nt.isString(f))return o.indexOf(f)!==-1;if(Nt.isRegExp(f))return f.test(o)}}function h2(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,t,f)=>t.toUpperCase()+f)}function f2(a,o){const t=Nt.toCamelCase(" "+o);["get","set","has"].forEach(f=>{Object.defineProperty(a,f+t,{value:function(h,d,n){return this[f].call(this,o,h,d,n)},configurable:!0})})}let Fn=class{constructor(o){o&&this.set(o)}set(o,t,f){const h=this;function d(l,i,r){const s=uc(i);if(!s)throw new Error("header name must be a non-empty string");const c=Nt.findKey(h,s);(!c||h[c]===void 0||r===!0||r===void 0&&h[c]!==!1)&&(h[c||i]=Su(l))}const n=(l,i)=>Nt.forEach(l,(r,s)=>d(r,s,i));if(Nt.isPlainObject(o)||o instanceof this.constructor)n(o,t);else if(Nt.isString(o)&&(o=o.trim())&&!m2(o))n(d2(o),t);else if(Nt.isObject(o)&&Nt.isIterable(o)){let l={},i,r;for(const s of o){if(!Nt.isArray(s))throw TypeError("Object iterator must return a key-value pair");l[r=s[0]]=(i=l[r])?Nt.isArray(i)?[...i,s[1]]:[i,s[1]]:s[1]}n(l,t)}else o!=null&&d(t,o,f);return this}get(o,t){if(o=uc(o),o){const f=Nt.findKey(this,o);if(f){const h=this[f];if(!t)return h;if(t===!0)return u2(h);if(Nt.isFunction(t))return t.call(this,h,f);if(Nt.isRegExp(t))return t.exec(h);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,t){if(o=uc(o),o){const f=Nt.findKey(this,o);return!!(f&&this[f]!==void 0&&(!t||of(this,this[f],f,t)))}return!1}delete(o,t){const f=this;let h=!1;function d(n){if(n=uc(n),n){const l=Nt.findKey(f,n);l&&(!t||of(f,f[l],l,t))&&(delete f[l],h=!0)}}return Nt.isArray(o)?o.forEach(d):d(o),h}clear(o){const t=Object.keys(this);let f=t.length,h=!1;for(;f--;){const d=t[f];(!o||of(this,this[d],d,o,!0))&&(delete this[d],h=!0)}return h}normalize(o){const t=this,f={};return Nt.forEach(this,(h,d)=>{const n=Nt.findKey(f,d);if(n){t[n]=Su(h),delete t[d];return}const l=o?h2(d):String(d).trim();l!==d&&delete t[d],t[l]=Su(h),f[l]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const t=Object.create(null);return Nt.forEach(this,(f,h)=>{f!=null&&f!==!1&&(t[h]=o&&Nt.isArray(f)?f.join(", "):f)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,t])=>o+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...t){const f=new this(o);return t.forEach(h=>f.set(h)),f}static accessor(o){const f=(this[lx]=this[lx]={accessors:{}}).accessors,h=this.prototype;function d(n){const l=uc(n);f[l]||(f2(h,n),f[l]=!0)}return Nt.isArray(o)?o.forEach(d):d(o),this}};Fn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Nt.reduceDescriptors(Fn.prototype,({value:a},o)=>{let t=o[0].toUpperCase()+o.slice(1);return{get:()=>a,set(f){this[t]=f}}});Nt.freezeMethods(Fn);function lf(a,o){const t=this||Zc,f=o||t,h=Fn.from(f.headers);let d=f.data;return Nt.forEach(a,function(l){d=l.call(t,d,h.normalize(),o?o.status:void 0)}),h.normalize(),d}function Pb(a){return!!(a&&a.__CANCEL__)}function Cl(a,o,t){Ar.call(this,a??"canceled",Ar.ERR_CANCELED,o,t),this.name="CanceledError"}Nt.inherits(Cl,Ar,{__CANCEL__:!0});function Ib(a,o,t){const f=t.config.validateStatus;!t.status||!f||f(t.status)?a(t):o(new Ar("Request failed with status code "+t.status,[Ar.ERR_BAD_REQUEST,Ar.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function p2(a){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return o&&o[1]||""}function g2(a,o){a=a||10;const t=new Array(a),f=new Array(a);let h=0,d=0,n;return o=o!==void 0?o:1e3,function(i){const r=Date.now(),s=f[d];n||(n=r),t[h]=i,f[h]=r;let c=d,u=0;for(;c!==h;)u+=t[c++],c=c%a;if(h=(h+1)%a,h===d&&(d=(d+1)%a),r-n<o)return;const m=s&&r-s;return m?Math.round(u*1e3/m):void 0}}function x2(a,o){let t=0,f=1e3/o,h,d;const n=(r,s=Date.now())=>{t=s,h=null,d&&(clearTimeout(d),d=null),a(...r)};return[(...r)=>{const s=Date.now(),c=s-t;c>=f?n(r,s):(h=r,d||(d=setTimeout(()=>{d=null,n(h)},f-c)))},()=>h&&n(h)]}const qu=(a,o,t=3)=>{let f=0;const h=g2(50,250);return x2(d=>{const n=d.loaded,l=d.lengthComputable?d.total:void 0,i=n-f,r=h(i),s=n<=l;f=n;const c={loaded:n,total:l,progress:l?n/l:void 0,bytes:i,rate:r||void 0,estimated:r&&l&&s?(l-n)/r:void 0,event:d,lengthComputable:l!=null,[o?"download":"upload"]:!0};a(c)},t)},cx=(a,o)=>{const t=a!=null;return[f=>o[0]({lengthComputable:t,total:a,loaded:f}),o[1]]},dx=a=>(...o)=>Nt.asap(()=>a(...o)),y2=dn.hasStandardBrowserEnv?((a,o)=>t=>(t=new URL(t,dn.origin),a.protocol===t.protocol&&a.host===t.host&&(o||a.port===t.port)))(new URL(dn.origin),dn.navigator&&/(msie|trident)/i.test(dn.navigator.userAgent)):()=>!0,b2=dn.hasStandardBrowserEnv?{write(a,o,t,f,h,d){const n=[a+"="+encodeURIComponent(o)];Nt.isNumber(t)&&n.push("expires="+new Date(t).toGMTString()),Nt.isString(f)&&n.push("path="+f),Nt.isString(h)&&n.push("domain="+h),d===!0&&n.push("secure"),document.cookie=n.join("; ")},read(a){const o=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function v2(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function w2(a,o){return o?a.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):a}function Mb(a,o,t){let f=!v2(o);return a&&(f||t==!1)?w2(a,o):o}const ux=a=>a instanceof Fn?{...a}:a;function jo(a,o){o=o||{};const t={};function f(r,s,c,u){return Nt.isPlainObject(r)&&Nt.isPlainObject(s)?Nt.merge.call({caseless:u},r,s):Nt.isPlainObject(s)?Nt.merge({},s):Nt.isArray(s)?s.slice():s}function h(r,s,c,u){if(Nt.isUndefined(s)){if(!Nt.isUndefined(r))return f(void 0,r,c,u)}else return f(r,s,c,u)}function d(r,s){if(!Nt.isUndefined(s))return f(void 0,s)}function n(r,s){if(Nt.isUndefined(s)){if(!Nt.isUndefined(r))return f(void 0,r)}else return f(void 0,s)}function l(r,s,c){if(c in o)return f(r,s);if(c in a)return f(void 0,r)}const i={url:d,method:d,data:d,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:l,headers:(r,s,c)=>h(ux(r),ux(s),c,!0)};return Nt.forEach(Object.keys({...a,...o}),function(s){const c=i[s]||h,u=c(a[s],o[s],s);Nt.isUndefined(u)&&c!==l||(t[s]=u)}),t}const Rb=a=>{const o=jo({},a);let{data:t,withXSRFToken:f,xsrfHeaderName:h,xsrfCookieName:d,headers:n,auth:l}=o;if(o.headers=n=Fn.from(n),o.url=Eb(Mb(o.baseURL,o.url,o.allowAbsoluteUrls),a.params,a.paramsSerializer),l&&n.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Nt.isFormData(t)){if(dn.hasStandardBrowserEnv||dn.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if(Nt.isFunction(t.getHeaders)){const i=t.getHeaders(),r=["content-type","content-length"];Object.entries(i).forEach(([s,c])=>{r.includes(s.toLowerCase())&&n.set(s,c)})}}if(dn.hasStandardBrowserEnv&&(f&&Nt.isFunction(f)&&(f=f(o)),f||f!==!1&&y2(o.url))){const i=h&&d&&b2.read(d);i&&n.set(h,i)}return o},N2=typeof XMLHttpRequest<"u",k2=N2&&function(a){return new Promise(function(t,f){const h=Rb(a);let d=h.data;const n=Fn.from(h.headers).normalize();let{responseType:l,onUploadProgress:i,onDownloadProgress:r}=h,s,c,u,m,x;function b(){m&&m(),x&&x(),h.cancelToken&&h.cancelToken.unsubscribe(s),h.signal&&h.signal.removeEventListener("abort",s)}let p=new XMLHttpRequest;p.open(h.method.toUpperCase(),h.url,!0),p.timeout=h.timeout;function v(){if(!p)return;const N=Fn.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),_={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:N,config:a,request:p};Ib(function(H){t(H),b()},function(H){f(H),b()},_),p=null}"onloadend"in p?p.onloadend=v:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(v)},p.onabort=function(){p&&(f(new Ar("Request aborted",Ar.ECONNABORTED,a,p)),p=null)},p.onerror=function(T){const _=T&&T.message?T.message:"Network Error",O=new Ar(_,Ar.ERR_NETWORK,a,p);O.event=T||null,f(O),p=null},p.ontimeout=function(){let T=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded";const _=h.transitional||Db;h.timeoutErrorMessage&&(T=h.timeoutErrorMessage),f(new Ar(T,_.clarifyTimeoutError?Ar.ETIMEDOUT:Ar.ECONNABORTED,a,p)),p=null},d===void 0&&n.setContentType(null),"setRequestHeader"in p&&Nt.forEach(n.toJSON(),function(T,_){p.setRequestHeader(_,T)}),Nt.isUndefined(h.withCredentials)||(p.withCredentials=!!h.withCredentials),l&&l!=="json"&&(p.responseType=h.responseType),r&&([u,x]=qu(r,!0),p.addEventListener("progress",u)),i&&p.upload&&([c,m]=qu(i),p.upload.addEventListener("progress",c),p.upload.addEventListener("loadend",m)),(h.cancelToken||h.signal)&&(s=N=>{p&&(f(!N||N.type?new Cl(null,a,p):N),p.abort(),p=null)},h.cancelToken&&h.cancelToken.subscribe(s),h.signal&&(h.signal.aborted?s():h.signal.addEventListener("abort",s)));const y=p2(h.url);if(y&&dn.protocols.indexOf(y)===-1){f(new Ar("Unsupported protocol "+y+":",Ar.ERR_BAD_REQUEST,a));return}p.send(d||null)})},j2=(a,o)=>{const{length:t}=a=a?a.filter(Boolean):[];if(o||t){let f=new AbortController,h;const d=function(r){if(!h){h=!0,l();const s=r instanceof Error?r:this.reason;f.abort(s instanceof Ar?s:new Cl(s instanceof Error?s.message:s))}};let n=o&&setTimeout(()=>{n=null,d(new Ar(`timeout ${o} of ms exceeded`,Ar.ETIMEDOUT))},o);const l=()=>{a&&(n&&clearTimeout(n),n=null,a.forEach(r=>{r.unsubscribe?r.unsubscribe(d):r.removeEventListener("abort",d)}),a=null)};a.forEach(r=>r.addEventListener("abort",d));const{signal:i}=f;return i.unsubscribe=()=>Nt.asap(l),i}},S2=function*(a,o){let t=a.byteLength;if(t<o){yield a;return}let f=0,h;for(;f<t;)h=f+o,yield a.slice(f,h),f=h},C2=async function*(a,o){for await(const t of A2(a))yield*S2(t,o)},A2=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const o=a.getReader();try{for(;;){const{done:t,value:f}=await o.read();if(t)break;yield f}}finally{await o.cancel()}},mx=(a,o,t,f)=>{const h=C2(a,o);let d=0,n,l=i=>{n||(n=!0,f&&f(i))};return new ReadableStream({async pull(i){try{const{done:r,value:s}=await h.next();if(r){l(),i.close();return}let c=s.byteLength;if(t){let u=d+=c;t(u)}i.enqueue(new Uint8Array(s))}catch(r){throw l(r),r}},cancel(i){return l(i),h.return()}},{highWaterMark:2})},hx=64*1024,{isFunction:au}=Nt,T2=(({Request:a,Response:o})=>({Request:a,Response:o}))(Nt.global),{ReadableStream:fx,TextEncoder:px}=Nt.global,gx=(a,...o)=>{try{return!!a(...o)}catch{return!1}},E2=a=>{a=Nt.merge.call({skipUndefined:!0},T2,a);const{fetch:o,Request:t,Response:f}=a,h=o?au(o):typeof fetch=="function",d=au(t),n=au(f);if(!h)return!1;const l=h&&au(fx),i=h&&(typeof px=="function"?(x=>b=>x.encode(b))(new px):async x=>new Uint8Array(await new t(x).arrayBuffer())),r=d&&l&&gx(()=>{let x=!1;const b=new t(dn.origin,{body:new fx,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!b}),s=n&&l&&gx(()=>Nt.isReadableStream(new f("").body)),c={stream:s&&(x=>x.body)};h&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!c[x]&&(c[x]=(b,p)=>{let v=b&&b[x];if(v)return v.call(b);throw new Ar(`Response type '${x}' is not supported`,Ar.ERR_NOT_SUPPORT,p)})});const u=async x=>{if(x==null)return 0;if(Nt.isBlob(x))return x.size;if(Nt.isSpecCompliantForm(x))return(await new t(dn.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(Nt.isArrayBufferView(x)||Nt.isArrayBuffer(x))return x.byteLength;if(Nt.isURLSearchParams(x)&&(x=x+""),Nt.isString(x))return(await i(x)).byteLength},m=async(x,b)=>{const p=Nt.toFiniteNumber(x.getContentLength());return p??u(b)};return async x=>{let{url:b,method:p,data:v,signal:y,cancelToken:N,timeout:T,onDownloadProgress:_,onUploadProgress:O,responseType:H,headers:F,withCredentials:V="same-origin",fetchOptions:q}=Rb(x),W=o||fetch;H=H?(H+"").toLowerCase():"text";let B=j2([y,N&&N.toAbortSignal()],T),E=null;const P=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let A;try{if(O&&r&&p!=="get"&&p!=="head"&&(A=await m(F,v))!==0){let R=new t(b,{method:"POST",body:v,duplex:"half"}),L;if(Nt.isFormData(v)&&(L=R.headers.get("content-type"))&&F.setContentType(L),R.body){const[Y,X]=cx(A,qu(dx(O)));v=mx(R.body,hx,Y,X)}}Nt.isString(V)||(V=V?"include":"omit");const k=d&&"credentials"in t.prototype,j={...q,signal:B,method:p.toUpperCase(),headers:F.normalize().toJSON(),body:v,duplex:"half",credentials:k?V:void 0};E=d&&new t(b,j);let S=await(d?W(E,q):W(b,j));const C=s&&(H==="stream"||H==="response");if(s&&(_||C&&P)){const R={};["status","statusText","headers"].forEach(ae=>{R[ae]=S[ae]});const L=Nt.toFiniteNumber(S.headers.get("content-length")),[Y,X]=_&&cx(L,qu(dx(_),!0))||[];S=new f(mx(S.body,hx,Y,()=>{X&&X(),P&&P()}),R)}H=H||"text";let D=await c[Nt.findKey(c,H)||"text"](S,x);return!C&&P&&P(),await new Promise((R,L)=>{Ib(R,L,{data:D,headers:Fn.from(S.headers),status:S.status,statusText:S.statusText,config:x,request:E})})}catch(k){throw P&&P(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Ar("Network Error",Ar.ERR_NETWORK,x,E),{cause:k.cause||k}):Ar.from(k,k&&k.code,x,E)}}},D2=new Map,zb=a=>{let o=a?a.env:{};const{fetch:t,Request:f,Response:h}=o,d=[f,h,t];let n=d.length,l=n,i,r,s=D2;for(;l--;)i=d[l],r=s.get(i),r===void 0&&s.set(i,r=l?new Map:E2(o)),s=r;return r};zb();const np={http:G1,xhr:k2,fetch:{get:zb}};Nt.forEach(np,(a,o)=>{if(a){try{Object.defineProperty(a,"name",{value:o})}catch{}Object.defineProperty(a,"adapterName",{value:o})}});const xx=a=>`- ${a}`,_2=a=>Nt.isFunction(a)||a===null||a===!1,Lb={getAdapter:(a,o)=>{a=Nt.isArray(a)?a:[a];const{length:t}=a;let f,h;const d={};for(let n=0;n<t;n++){f=a[n];let l;if(h=f,!_2(f)&&(h=np[(l=String(f)).toLowerCase()],h===void 0))throw new Ar(`Unknown adapter '${l}'`);if(h&&(Nt.isFunction(h)||(h=h.get(o))))break;d[l||"#"+n]=h}if(!h){const n=Object.entries(d).map(([i,r])=>`adapter ${i} `+(r===!1?"is not supported by the environment":"is not available in the build"));let l=t?n.length>1?`since :
`+n.map(xx).join(`
`):" "+xx(n[0]):"as no adapter specified";throw new Ar("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return h},adapters:np};function cf(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new Cl(null,a)}function yx(a){return cf(a),a.headers=Fn.from(a.headers),a.data=lf.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),Lb.getAdapter(a.adapter||Zc.adapter,a)(a).then(function(f){return cf(a),f.data=lf.call(a,a.transformResponse,f),f.headers=Fn.from(f.headers),f},function(f){return Pb(f)||(cf(a),f&&f.response&&(f.response.data=lf.call(a,a.transformResponse,f.response),f.response.headers=Fn.from(f.response.headers))),Promise.reject(f)})}const Ob="1.12.2",vm={};["object","boolean","number","function","string","symbol"].forEach((a,o)=>{vm[a]=function(f){return typeof f===a||"a"+(o<1?"n ":" ")+a}});const bx={};vm.transitional=function(o,t,f){function h(d,n){return"[Axios v"+Ob+"] Transitional option '"+d+"'"+n+(f?". "+f:"")}return(d,n,l)=>{if(o===!1)throw new Ar(h(n," has been removed"+(t?" in "+t:"")),Ar.ERR_DEPRECATED);return t&&!bx[n]&&(bx[n]=!0,console.warn(h(n," has been deprecated since v"+t+" and will be removed in the near future"))),o?o(d,n,l):!0}};vm.spelling=function(o){return(t,f)=>(console.warn(`${f} is likely a misspelling of ${o}`),!0)};function P2(a,o,t){if(typeof a!="object")throw new Ar("options must be an object",Ar.ERR_BAD_OPTION_VALUE);const f=Object.keys(a);let h=f.length;for(;h-- >0;){const d=f[h],n=o[d];if(n){const l=a[d],i=l===void 0||n(l,d,a);if(i!==!0)throw new Ar("option "+d+" must be "+i,Ar.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ar("Unknown option "+d,Ar.ERR_BAD_OPTION)}}const Cu={assertOptions:P2,validators:vm},za=Cu.validators;let vo=class{constructor(o){this.defaults=o||{},this.interceptors={request:new ox,response:new ox}}async request(o,t){try{return await this._request(o,t)}catch(f){if(f instanceof Error){let h={};Error.captureStackTrace?Error.captureStackTrace(h):h=new Error;const d=h.stack?h.stack.replace(/^.+\n/,""):"";try{f.stack?d&&!String(f.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(f.stack+=`
`+d):f.stack=d}catch{}}throw f}}_request(o,t){typeof o=="string"?(t=t||{},t.url=o):t=o||{},t=jo(this.defaults,t);const{transitional:f,paramsSerializer:h,headers:d}=t;f!==void 0&&Cu.assertOptions(f,{silentJSONParsing:za.transitional(za.boolean),forcedJSONParsing:za.transitional(za.boolean),clarifyTimeoutError:za.transitional(za.boolean)},!1),h!=null&&(Nt.isFunction(h)?t.paramsSerializer={serialize:h}:Cu.assertOptions(h,{encode:za.function,serialize:za.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Cu.assertOptions(t,{baseUrl:za.spelling("baseURL"),withXsrfToken:za.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=d&&Nt.merge(d.common,d[t.method]);d&&Nt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete d[x]}),t.headers=Fn.concat(n,d);const l=[];let i=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(i=i&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const r=[];this.interceptors.response.forEach(function(b){r.push(b.fulfilled,b.rejected)});let s,c=0,u;if(!i){const x=[yx.bind(this),void 0];for(x.unshift(...l),x.push(...r),u=x.length,s=Promise.resolve(t);c<u;)s=s.then(x[c++],x[c++]);return s}u=l.length;let m=t;for(;c<u;){const x=l[c++],b=l[c++];try{m=x(m)}catch(p){b.call(this,p);break}}try{s=yx.call(this,m)}catch(x){return Promise.reject(x)}for(c=0,u=r.length;c<u;)s=s.then(r[c++],r[c++]);return s}getUri(o){o=jo(this.defaults,o);const t=Mb(o.baseURL,o.url,o.allowAbsoluteUrls);return Eb(t,o.params,o.paramsSerializer)}};Nt.forEach(["delete","get","head","options"],function(o){vo.prototype[o]=function(t,f){return this.request(jo(f||{},{method:o,url:t,data:(f||{}).data}))}});Nt.forEach(["post","put","patch"],function(o){function t(f){return function(d,n,l){return this.request(jo(l||{},{method:o,headers:f?{"Content-Type":"multipart/form-data"}:{},url:d,data:n}))}}vo.prototype[o]=t(),vo.prototype[o+"Form"]=t(!0)});let I2=class Fb{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(d){t=d});const f=this;this.promise.then(h=>{if(!f._listeners)return;let d=f._listeners.length;for(;d-- >0;)f._listeners[d](h);f._listeners=null}),this.promise.then=h=>{let d;const n=new Promise(l=>{f.subscribe(l),d=l}).then(h);return n.cancel=function(){f.unsubscribe(d)},n},o(function(d,n,l){f.reason||(f.reason=new Cl(d,n,l),t(f.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const t=this._listeners.indexOf(o);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const o=new AbortController,t=f=>{o.abort(f)};return this.subscribe(t),o.signal.unsubscribe=()=>this.unsubscribe(t),o.signal}static source(){let o;return{token:new Fb(function(h){o=h}),cancel:o}}};function M2(a){return function(t){return a.apply(null,t)}}function R2(a){return Nt.isObject(a)&&a.isAxiosError===!0}const ap={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ap).forEach(([a,o])=>{ap[o]=a});function Bb(a){const o=new vo(a),t=xb(vo.prototype.request,o);return Nt.extend(t,vo.prototype,o,{allOwnKeys:!0}),Nt.extend(t,o,null,{allOwnKeys:!0}),t.create=function(h){return Bb(jo(a,h))},t}const As=Bb(Zc);As.Axios=vo;As.CanceledError=Cl;As.CancelToken=I2;As.isCancel=Pb;As.VERSION=Ob;As.toFormData=bm;As.AxiosError=Ar;As.Cancel=As.CanceledError;As.all=function(o){return Promise.all(o)};As.spread=M2;As.isAxiosError=R2;As.mergeConfig=jo;As.AxiosHeaders=Fn;As.formToJSON=a=>_b(Nt.isHTMLForm(a)?new FormData(a):a);As.getAdapter=Lb.getAdapter;As.HttpStatusCode=ap;As.default=As;const{Axios:iP,AxiosError:oP,CanceledError:lP,isCancel:cP,CancelToken:dP,VERSION:uP,all:mP,Cancel:hP,isAxiosError:fP,spread:pP,toFormData:gP,AxiosHeaders:Ub,HttpStatusCode:xP,formToJSON:yP,getAdapter:bP,mergeConfig:vP}=As,Au=()=>{try{return typeof window>"u"||!window.localStorage?null:window.localStorage}catch(a){return he.warn("[storage] localStorage is not accessible",a),null}},df=()=>{try{return typeof window>"u"||!window.sessionStorage?null:window.sessionStorage}catch(a){return he.warn("[storage] sessionStorage is not accessible",a),null}},Et={getItem:a=>{const o=Au();if(!o)return null;try{return o.getItem(a)}catch(t){return he.warn(`[storage] Failed to read key ${a}`,t),null}},setItem:(a,o)=>{const t=Au();if(t)try{t.setItem(a,o)}catch(f){he.warn(`[storage] Failed to write key ${a}`,f)}},removeItem:a=>{const o=Au();if(o)try{o.removeItem(a)}catch(t){he.warn(`[storage] Failed to remove key ${a}`,t)}}},Er={getItem:a=>{const o=df();if(!o)return null;try{return o.getItem(a)}catch(t){return he.warn(`[storage] Failed to read session key ${a}`,t),null}},setItem:(a,o)=>{const t=df();if(t)try{t.setItem(a,o)}catch(f){he.warn(`[storage] Failed to write session key ${a}`,f)}},removeItem:a=>{const o=df();if(o)try{o.removeItem(a)}catch(t){he.warn(`[storage] Failed to remove session key ${a}`,t)}}},Vb=()=>{const a=Au();if(!a)return[];try{return Object.keys(a)}catch(o){return he.warn("[storage] Failed to enumerate keys",o),[]}},qb=(a,o)=>{if(!a)return null;try{return JSON.parse(a)}catch(t){return he.warn(`[storage] JSON parse failed for ${o}`,{error:t,sample:a.slice(0,64)}),null}},Wn=(a,o)=>{const t=qb(a,o);return t&&typeof t=="object"?t:(t!==null&&he.warn(`[storage] Parsed value for ${o} is not an object`,{context:o}),null)},vx=(a,o)=>{const t=qb(a,o);return Array.isArray(t)?t:(t!==null&&he.warn(`[storage] Parsed value for ${o} is not an array`,{context:o}),null)},vl=a=>{if(typeof a=="number"&&Number.isFinite(a))return String(a);if(typeof a=="string"){const o=a.trim();return o||null}return null},z2=a=>a?vl(a.id)??vl(a._id)??null:null,wo=()=>en()??"default",wm=()=>{const a=Nm();return z2(a)??"anon"},L2=(a,o)=>`notif_prefs:${a}:${o}`,mi=(a,o)=>{const t=typeof a=="string"&&a.trim()?a.trim():a;if(!t)return a;const f=vl(o)??wo();return f&&f!=="default"?`${t}_${f}`:t},is=(a,o)=>{const t=mi(a,o?.tenantId),f=vx(Et.getItem(t),`tenant scoped array (${t})`);return f!==null?f:(o?.fallbackToBase??!0)&&t!==a?vx(Et.getItem(a),`tenant scoped array (${a})`):null},Ur=(a,o,t)=>{if(!Array.isArray(o))return;const f=mi(a,t?.tenantId);try{const h=JSON.stringify(o);Et.setItem(f,h),(t?.mirrorToBase??!0)&&f!==a&&Et.setItem(a,h)}catch(h){he.warn(`[storage] Failed to serialize tenant scoped array (${f})`,h)}},$u=(a,o)=>{const t=mi(a,o?.tenantId),f=Et.getItem(t);return f!==null?f:(o?.fallbackToBase??!0)&&t!==a?Et.getItem(a):null},pl=(a,o,t)=>{if(o==null)return;const f=mi(a,t?.tenantId);try{const h=typeof o=="string"?o:String(o);Et.setItem(f,h),(t?.mirrorToBase??!0)&&f!==a&&Et.setItem(a,h)}catch(h){he.warn(`[storage] Failed to persist tenant scoped value (${f})`,h)}},Rc=(a,o)=>{const t=mi(a,o?.tenantId),f=Wn(Et.getItem(t),`tenant scoped object (${t})`);return f||((o?.fallbackToBase??!0)&&t!==a?Wn(Et.getItem(a),`tenant scoped object (${a})`):null)},Tu=(a,o,t)=>{if(!o||typeof o!="object")return;const f=mi(a,t?.tenantId);try{const h=JSON.stringify(o);Et.setItem(f,h),(t?.mirrorToBase??!0)&&f!==a&&Et.setItem(a,h)}catch(h){he.warn(`[storage] Failed to persist tenant scoped object (${f})`,h)}},uf=a=>{const o=new Set;return a.forEach(t=>{const f=vl(t??null);f&&o.add(f)}),Array.from(o.values())},$b=a=>{const o=a?.includeDefaultTenant??!0,t=a?.tenantIds?.length?a.tenantIds:[wo()],f=uf(o?[...t,"default"]:t),h=a?.userIds?.length?a.userIds:[wm()],d=uf(h.length?h:["anon"]),n=[];return f.forEach(l=>{d.forEach(i=>{n.push(L2(l,i))})}),n},wl=a=>{const o=$b(a);for(const t of o){const f=Wn(Et.getItem(t),`notification preferences cache (${t})`);if(f)return f}return null},Hb=(a,o)=>{if(!a)return;$b(o).forEach(f=>{try{Et.setItem(f,JSON.stringify(a))}catch(h){he.warn(`[storage] Failed to persist notification preferences to ${f}`,h)}})},Hu="auth_token",Ku="tenantId",Gu="user",Wu="tenant",zn=()=>Et.getItem(Hu),Kb=a=>{if(!a){Et.removeItem(Hu);return}Et.setItem(Hu,a)},en=()=>vl(Et.getItem(Ku)),O2=a=>{const o=vl(a??null);if(!o){Et.removeItem(Ku);return}Et.setItem(Ku,o)},Nm=()=>Wn(Et.getItem(Gu),"legacy user cache"),Gb=a=>{if(!a){Et.removeItem(Gu);return}try{Et.setItem(Gu,JSON.stringify(a))}catch(o){he.warn("[storage] Failed to persist legacy user profile",o)}},Yu=()=>Wn(Et.getItem(Wu),"legacy tenant cache"),F2=a=>{if(!a){Et.removeItem(Wu);return}try{Et.setItem(Wu,JSON.stringify(a))}catch(o){he.warn("[storage] Failed to persist legacy tenant profile",o)}},B2=[Hu,Gu,Wu,Ku],Hp=()=>{B2.forEach(a=>{try{Et.removeItem(a)}catch(o){he.warn(`[storage] Failed to remove legacy session key ${a}`,o)}})},xo=()=>{},U2=()=>typeof globalThis<"u"&&globalThis.console?globalThis.console:{log:xo,info:xo,warn:xo,error:xo,debug:xo},iu=U2(),V2=()=>!1,mf=()=>V2(),he={debug:(...a)=>{mf()&&iu.log?.(...a)},info:(...a)=>{mf()&&iu.info?.(...a)},warn:(...a)=>{iu.warn?.(...a)},error:(...a)=>{iu.error?.(...a)},installConsoleMute:()=>{if(mf()||typeof globalThis>"u"||!globalThis.console)return;const a=globalThis.console;a.log=xo,a.debug=xo}},_i="admin-token";let mc=null;const No={getToken(){const a=Er.getItem(_i);if(a)return mc=a,a;const o=Et.getItem(_i);return o?(mc=o,Er.setItem(_i,o),Et.removeItem(_i),o):mc},setToken(a){mc=a,Er.setItem(_i,a),Et.removeItem(_i)},clearToken(){mc=null,Er.removeItem(_i),Et.removeItem(_i)}},Wb="https://api.comptario.com/api";let ip=null;const Yb=a=>typeof a=="object"&&a!==null,q2=(a,o,t)=>a instanceof Ub?(a.set(o,t),a):{...a??{},[o]:t},$2=(a,o)=>{if(!a)return;const t=o.toLowerCase();if(a instanceof Ub)return a.get(t)??a.get(o)??a.get(o.toUpperCase())??void 0;for(const[f,h]of Object.entries(a))if(f.toLowerCase()===t)return typeof h=="string"?h:String(h)},wx=a=>typeof a=="string"?a:void 0,H2=a=>{if(a){if(typeof a=="string")return a;if(Array.isArray(a))return a.filter(t=>typeof t=="string").join(", ")||void 0;if(Yb(a)&&"message"in a){const o=a.message;if(typeof o=="string")return o;if(Array.isArray(o))return o.filter(f=>typeof f=="string").join(", ")||void 0}}},Xe=As.create({baseURL:Wb,timeout:3e4,headers:{"Content-Type":"application/json"},validateStatus:a=>a>=200&&a<300});Xe.interceptors.request.use(a=>{const o=zn(),t=a.url||"",f=typeof t=="string"&&(t.startsWith("/public/")||t.startsWith("/auth/public")||t.includes("/public/"));o&&a.headers&&!f&&(a.headers.Authorization=`Bearer ${o}`);const h=(a.method||"get").toLowerCase();return["post","put","patch","delete"].includes(h)&&ip&&(a.headers=q2(a.headers,"X-CSRF-Token",ip)),a},a=>(he.error(" Request Error:",a),Promise.reject(a)));Xe.interceptors.response.use(a=>{const o=$2(a.headers,"x-csrf-token");return o&&(ip=o),a},async a=>{const o=a.config?.url||"";if(a.response?.status===404&&typeof o=="string"&&/^\/admin\/tenant\/.+\/invoices/.test(o)||he.error(" API Error:",{message:a.message,code:a.code,url:a.config?.url,status:a.response?.status}),a.code==="ERR_NETWORK"||a.code==="ECONNREFUSED")return he.error("Network error - Backend unavailable:",a.config?.url),Promise.reject({message:"Backend servisi eriilebilir deil. Port 3000 kontrol edin.",code:"NETWORK_ERROR",originalError:a});const h=a.response?.status,d=H2(a.response?.data);if(typeof window<"u"&&h===400&&typeof d=="string"&&d.includes("Plan limitine ulald"))try{window.dispatchEvent(new CustomEvent("showToast",{detail:{message:d,tone:"error"}}))}catch(c){he.debug("Plan limit toast dispatch failed",c)}const n=a.response?.status,l=Yb(a.response?.data)?a.response?.data:void 0,i=wx(l?.error),r=wx(l?.message),s=r?.toLowerCase().includes("maintenance")??!1;if(n===503&&(i==="MAINTENANCE_MODE"||s)){const c=r||"Sistem bakm modunda (salt okunur). Ltfen daha sonra tekrar deneyin.";try{typeof window<"u"&&window.dispatchEvent(new CustomEvent("showToast",{detail:{message:c,tone:"error"}}))}catch(u){he.debug("Maintenance toast dispatch failed",u)}}if(a.response?.status===401){const c=a.config?.url||"";if(c.startsWith("/admin"))try{No.clearToken(),typeof window<"u"&&window.dispatchEvent(new CustomEvent("adminAuthExpired"))}catch(u){he.debug("Admin token cleanup failed",u)}if(zn()&&!c.includes("/auth/")){try{const u=Date.now(),m="__auth_401_count",x="__auth_401_ts",b=parseInt(Et.getItem(m)||"0",10)||0,p=parseInt(Et.getItem(x)||"0",10)||0,y=u-p<15e3?b+1:1;if(Et.setItem(m,String(y)),Et.setItem(x,String(u)),typeof c=="string"&&(c.includes("/site-settings")||c.includes("/status")||c.includes("/health")))return Promise.reject(a);y>=2&&(Et.removeItem(m),Et.removeItem(x),Hp(),typeof window<"u"&&(window.location.href="/"))}catch(u){he.debug("Auth 401 logout flow failed",u)}return Promise.reject(a)}}return Promise.reject(a)});const K2=(a,o)=>{if(typeof a=="string")return a;if(a&&typeof a=="object"){const t=a;return t.response?.data?.message||t.message||o}return o},yn={async register(a){try{return(await Xe.post("/auth/register",a)).data}catch(o){throw new Error(K2(o,"Kayt srasnda hata olutu"))}},async login(a){try{he.debug(" auth.login called");let o={};try{const n=Intl.DateTimeFormat().resolvedOptions().timeZone,l=-new Date().getTimezoneOffset(),i=typeof navigator<"u"&&navigator.language?navigator.language:void 0;o={clientTimeZone:n||void 0,clientUtcOffsetMinutes:Number.isNaN(l)?void 0:l,clientLocale:i}}catch(n){he.debug("Client hint detection failed",n)}const t={...a,...o},f=(Wb||"").replace(/\/+$/,""),h=await fetch(`${f}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(he.debug(" Fetch response status:",h.status),!h.ok){const l=(await h.json().catch(()=>({}))).message||"Geersiz email veya ifre";if(l==="MFA_REQUIRED")return{mfaRequired:!0};throw new Error(l)}const d=await h.json();return he.debug(" Auth service response received"),d}catch(o){throw he.error(" Auth service error:",o),o}},async getProfile(){return(await Xe.get("/auth/me")).data},async refresh(){try{return(await Xe.post("/auth/refresh-token",{})).data}catch(a){return he.debug("refresh-token endpoint unavailable, falling back",a),(await Xe.post("/auth/refresh",{})).data}},async resendVerification(a){return(await Xe.post("/auth/resend-verification",{email:a})).data},async verifyEmail(a){return(await Xe.get("/auth/verify-email",{params:{token:a}})).data},async verifyEmailHashed(a,o){return(await Xe.get("/auth/verify",{params:{token:a,u:o}})).data},async forgotPassword(a){try{return(await Xe.post("/auth/forgot",{email:a})).data}catch(o){if(o.response?.status===404)return(await Xe.post("/auth/forgot-password",{email:a})).data;throw o}},async resetPassword(a,o){return(await Xe.post("/auth/reset-password",{token:a,newPassword:o})).data},async resetPasswordHashed(a,o,t){return(await Xe.post("/auth/reset",{token:a,u:o,newPassword:t})).data},async signup(a){return(await Xe.post("/auth/register",a)).data},logout(){Hp(),["bankAccounts","customers_cache","suppliers_cache","products_cache","invoices_cache","expenses_cache","notifications"].forEach(o=>Et.removeItem(o)),he.info(" Auth/logout: Cleared cached session keys")}},Qb=Object.freeze(Object.defineProperty({__proto__:null,authService:yn},Symbol.toStringTag,{value:"Module"})),G2={};class W2{lastActiveAt=Date.now();intervalId=null;options;getToken;setToken;onLogout;boundActivityHandler;stopped=!0;constructor(o,t,f,h){this.getToken=o,this.setToken=t,this.onLogout=f;const d=G2,n=(()=>{const l=d?.VITE_IDLE_TIMEOUT_MINUTES,i=Number(l);return Number.isFinite(i)&&i>0?i:30})();this.options={idleTimeoutMinutes:n,refreshBeforeSeconds:300,checkIntervalSeconds:60,...h||{}},this.boundActivityHandler=this.recordActivity.bind(this)}start(){if(!this.stopped)return;if(typeof window>"u"){he.warn("SessionManager start ars tarayc dnda yapld");return}this.stopped=!1,this.lastActiveAt=Date.now();const o=["click","keydown","mousemove","scroll","touchstart","visibilitychange","hashchange"],t={passive:!0};o.forEach(f=>window.addEventListener(f,this.boundActivityHandler,t)),this.intervalId=window.setInterval(()=>this.tick(),this.options.checkIntervalSeconds*1e3),he.info(" SessionManager started",this.options)}stop(){if(this.stopped||typeof window>"u")return;this.stopped=!0,["click","keydown","mousemove","scroll","touchstart","visibilitychange","hashchange"].forEach(t=>window.removeEventListener(t,this.boundActivityHandler)),this.intervalId!=null&&(clearInterval(this.intervalId),this.intervalId=null),he.info(" SessionManager stopped")}recordActivity(){this.lastActiveAt=Date.now()}decodeJwtExp(o){if(!o)return null;const t=typeof window<"u"&&window.atob?window.atob:typeof globalThis<"u"&&typeof globalThis.atob=="function"?globalThis.atob.bind(globalThis):null;if(!t)return null;try{const f=o.split(".");if(f.length!==3)return null;const h=JSON.parse(t(f[1]));return!h||typeof h.exp!="number"?null:h.exp*1e3}catch{return null}}async tick(){try{const o=Date.now(),t=this.options.idleTimeoutMinutes*60*1e3;if(o-this.lastActiveAt>t){he.info(" Idle timeout reached. Logging out."),this.stop(),this.onLogout();return}const f=this.getToken();if(!f)return;const h=o-this.lastActiveAt<300*1e3;if(typeof document>"u"||document.visibilityState==="hidden"||!h)return;const d=this.decodeJwtExp(f);if(!d)return;const n=Math.floor((d-o)/1e3);if(n<=this.options.refreshBeforeSeconds){he.debug(` Refreshing token. Seconds left: ${n}`);try{const l=await yn.refresh();l?.token&&(this.setToken(l.token),he.info(" Token refreshed"))}catch(l){he.error(" Token refresh failed",l)}}}catch(o){he.error("SessionManager tick srasnda hata olutu",o)}}}const Y2=(a,o,t,f)=>new W2(a,o,t,f),Q2={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Z2=new Set(["true","1","yes","on"]),Qu=()=>{try{const a=String(Q2?.VITE_EMAIL_VERIFICATION_REQUIRED??"").trim().toLowerCase();return a===""||Z2.has(a)}catch{return!0}},X2={},Zb=G.createContext(void 0),J2=a=>typeof a=="object"&&a!==null&&("user"in a||"tenant"in a),eN=a=>typeof a=="object"&&a!==null&&"id"in a&&"email"in a&&"tenantId"in a,tN=a=>J2(a)?a:eN(a)?{user:a}:{},rN="user",sN="tenant",ou="pending_invite_token",nN=()=>{const a=Nm();return a||Et.removeItem(rN),a},aN=()=>{const a=Yu();return a||Et.removeItem(sN),a},lu=a=>{Gb(a)},cu=a=>{F2(a)},hf=()=>zn(),ff=a=>{Kb(a)},iN=()=>{const o=X2?.VITE_IDLE_TIMEOUT_MINUTES,t=Number(o);return Number.isFinite(t)&&t>0?t:30},Nx=a=>typeof a=="object"&&a!==null?a:{};function oN({children:a}){const[o,t]=G.useState(null),[f,h]=G.useState(null),[d,n]=G.useState(!0),l=G.useRef(null),i=G.useRef(null),r=G.useRef(0);G.useEffect(()=>{const p=hf(),v=nN(),y=aN();return he.info(" AuthContext local cache kontrol:",{token:p?"var":"yok",cachedUserEmail:v?.email??null,cachedTenantName:y?.name??null}),(async()=>{try{if(v&&(t(v),he.info(" User local cache'den yklendi:",v.email)),y&&(h(y),he.info(" Tenant local cache'den yklendi:",y.name)),p)try{he.info(" Backend'den gncel user bilgisi ekiliyor...");const T=await yn.getProfile(),{user:_,tenant:O}=tN(T);_&&(t(_),lu(_),he.info(" User bilgisi backend'den gncellendi")),O&&(h(O),cu(O))}catch(T){console.error(" Backend'den profil ekilemedi:",T)}}finally{n(!1)}})(),()=>{try{l.current?.stop()}catch(T){he.warn("Session manager cleanup failed",T)}}},[]);const s=p=>{if(he.info(" Auth data received:",p),!p||!p.user||!p.token)throw console.error(" Invalid auth data:",p),new Error("Geersiz auth verisi alnd");ff(null),lu(null),cu(null),ff(p.token),lu(p.user),t(p.user),p.tenant&&(cu(p.tenant),h(p.tenant));try{l.current?.stop(),l.current=Y2(()=>hf(),v=>ff(v),()=>x(),{idleTimeoutMinutes:iN()}),l.current.start()}catch(v){he.warn("Session manager balatlrken hata olutu",v)}he.info(" Yeni kullanc girii:",{email:p.user?.email,tenantId:p.user?.tenantId,tenant:p.tenant?.name});try{const v=Er.getItem(ou)||Et.getItem(ou);v&&Mr(()=>Promise.resolve().then(()=>iT),void 0).then(async y=>{try{await y.organizationsApi.acceptInvite({token:v}),Er.removeItem(ou),Et.removeItem(ou);try{await b()}catch(N){he.warn("Org invite sonras refreshUser baarsz",N)}try{window.dispatchEvent(new Event("org-invite-accepted"))}catch(N){he.warn("Org invite event dispatch baarsz",N)}}catch(N){console.error("Invite accept after login failed:",N)}})}catch(v){he.warn("Invite token kontrol srasnda hata olutu",v)}},c=async(p,v,y,N)=>{try{he.info(" Login balatlyor:",{email:p});const T=await yn.login({email:p,password:v,twoFactorToken:y,turnstileToken:N});if(he.debug(" Login response:",T),"mfaRequired"in T)return{mfaRequired:!0};s(T);try{await b()}catch(_){he.warn("Login sonras refreshUser baarsz",_)}he.info(" Login tamamland")}catch(T){console.error(" Login failed:",T);const O=(typeof T=="object"&&T!==null?T:void 0)?.response?.data?.message,H=typeof O=="string"?O:T instanceof Error?T.message:"Giri srasnda bir hata olutu";throw new Error(H)}},u=async p=>{try{const v=p.name.trim().split(" "),y=v[0]||"",N=v.slice(1).join(" ")||"",T={email:p.email,password:p.password,firstName:y,lastName:N,companyName:p.company,turnstileToken:p.turnstileToken},_=Qu();if(_){await yn.signup(T);try{Er.setItem("pending_verification_email",p.email)}catch(O){he.warn("pending_verification_email kaydedilemedi",O)}}else{const O=await yn.register(T);s(O)}_&&(window.location.hash="verify-notice")}catch(v){console.error("Registration failed:",v);const y=Nx(v),N=y.response?.status,T=y.response?.data?.message||y.message||"Kayt srasnda bir hata olutu";if(N===409){const _=new Error("EMAIL_IN_USE");throw _.status=409,_}throw new Error(T)}},m=()=>{he.warn(" Corrupted localStorage verileri temizleniyor..."),Hp(),["customers_cache","suppliers_cache","products_cache","invoices_cache","expenses_cache","bankAccounts"].forEach(p=>Et.removeItem(p));try{const p=["customers_cache_","suppliers_cache_","products_cache_","invoices_cache_","expenses_cache_","sales_","sales_cache_","sales_backup_","sales_last_seen_ts_","bankAccounts_","quotes_cache_"];Vb().forEach(y=>{p.some(N=>y.startsWith(N))&&Et.removeItem(y)})}catch(p){he.warn("Cache temizleme srasnda hata olutu",p)}},x=async()=>{try{await yn.logout()}catch(p){console.error("Logout error:",p)}finally{try{l.current?.stop()}catch(p){he.warn("Logout srasnda session manager durdurulamad",p)}t(null),h(null),m();try{Er.removeItem("pending_verification_email")}catch(p){he.warn("pending_verification_email temizlenemedi",p)}}},b=G.useCallback(async p=>{if(!hf()){he.warn(" Token yok, refreshUser iptal");return}if(i.current)return he.debug(" refreshUser beklemede, mevcut arya eklendi"),i.current;const y=Date.now(),N=5e3,T=15e3;if(!p?.force&&y<r.current){he.debug(" refreshUser throttled",{msLeft:r.current-y});return}const _=(async()=>{try{he.info(" Backend'den gncel user bilgisi alnyor...");const O=await yn.getProfile();he.info(" User bilgisi backend'den gncellendi:",O),he.debug(" Detay - firstName:",O?.user?.firstName,"lastName:",O?.user?.lastName),he.info(" Email dorulama durumu:",O?.user?.isEmailVerified),O?.user&&(t(O.user),lu(O.user)),O?.tenant&&(h(O.tenant),cu(O.tenant)),he.debug(" Yerel user/tenant cache gncellendi"),r.current=Date.now()+N}catch(O){Nx(O).response?.status===429?(he.warn(" refreshUser rate limit (429). Geici olarak bekleniyor."),r.current=Date.now()+T):(console.error(" HATA: User refresh baarsz oldu!",O),O instanceof Error&&console.error(" Error message:",O.message),r.current=Date.now()+N)}})();i.current=_;try{await _}finally{i.current=null}},[]);return e.jsx(Zb.Provider,{value:{user:o,tenant:f,isAuthenticated:!!o,isLoading:d,login:c,register:u,logout:x,refreshUser:b},children:a})}function Gs(){const a=G.useContext(Zb);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a}const wr=a=>typeof a=="string",hc=()=>{let a,o;const t=new Promise((f,h)=>{a=f,o=h});return t.resolve=a,t.reject=o,t},kx=a=>a==null?"":""+a,lN=(a,o,t)=>{a.forEach(f=>{o[f]&&(t[f]=o[f])})},cN=/###/g,jx=a=>a&&a.indexOf("###")>-1?a.replace(cN,"."):a,Sx=a=>!a||wr(a),Oc=(a,o,t)=>{const f=wr(o)?o.split("."):o;let h=0;for(;h<f.length-1;){if(Sx(a))return{};const d=jx(f[h]);!a[d]&&t&&(a[d]=new t),Object.prototype.hasOwnProperty.call(a,d)?a=a[d]:a={},++h}return Sx(a)?{}:{obj:a,k:jx(f[h])}},Cx=(a,o,t)=>{const{obj:f,k:h}=Oc(a,o,Object);if(f!==void 0||o.length===1){f[h]=t;return}let d=o[o.length-1],n=o.slice(0,o.length-1),l=Oc(a,n,Object);for(;l.obj===void 0&&n.length;)d=`${n[n.length-1]}.${d}`,n=n.slice(0,n.length-1),l=Oc(a,n,Object),l?.obj&&typeof l.obj[`${l.k}.${d}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${d}`]=t},dN=(a,o,t,f)=>{const{obj:h,k:d}=Oc(a,o,Object);h[d]=h[d]||[],h[d].push(t)},Zu=(a,o)=>{const{obj:t,k:f}=Oc(a,o);if(t&&Object.prototype.hasOwnProperty.call(t,f))return t[f]},uN=(a,o,t)=>{const f=Zu(a,t);return f!==void 0?f:Zu(o,t)},Xb=(a,o,t)=>{for(const f in o)f!=="__proto__"&&f!=="constructor"&&(f in a?wr(a[f])||a[f]instanceof String||wr(o[f])||o[f]instanceof String?t&&(a[f]=o[f]):Xb(a[f],o[f],t):a[f]=o[f]);return a},al=a=>a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var mN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const hN=a=>wr(a)?a.replace(/[&<>"'\/]/g,o=>mN[o]):a;class fN{constructor(o){this.capacity=o,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(o){const t=this.regExpMap.get(o);if(t!==void 0)return t;const f=new RegExp(o);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(o,f),this.regExpQueue.push(o),f}}const pN=[" ",",","?","!",";"],gN=new fN(20),xN=(a,o,t)=>{o=o||"",t=t||"";const f=pN.filter(n=>o.indexOf(n)<0&&t.indexOf(n)<0);if(f.length===0)return!0;const h=gN.getRegExp(`(${f.map(n=>n==="?"?"\\?":n).join("|")})`);let d=!h.test(a);if(!d){const n=a.indexOf(t);n>0&&!h.test(a.substring(0,n))&&(d=!0)}return d},op=(a,o,t=".")=>{if(!a)return;if(a[o])return Object.prototype.hasOwnProperty.call(a,o)?a[o]:void 0;const f=o.split(t);let h=a;for(let d=0;d<f.length;){if(!h||typeof h!="object")return;let n,l="";for(let i=d;i<f.length;++i)if(i!==d&&(l+=t),l+=f[i],n=h[l],n!==void 0){if(["string","number","boolean"].indexOf(typeof n)>-1&&i<f.length-1)continue;d+=i-d+1;break}h=n}return h},Uc=a=>a?.replace("_","-"),yN={type:"logger",log(a){this.output("log",a)},warn(a){this.output("warn",a)},error(a){this.output("error",a)},output(a,o){console?.[a]?.apply?.(console,o)}};class Xu{constructor(o,t={}){this.init(o,t)}init(o,t={}){this.prefix=t.prefix||"i18next:",this.logger=o||yN,this.options=t,this.debug=t.debug}log(...o){return this.forward(o,"log","",!0)}warn(...o){return this.forward(o,"warn","",!0)}error(...o){return this.forward(o,"error","")}deprecate(...o){return this.forward(o,"warn","WARNING DEPRECATED: ",!0)}forward(o,t,f,h){return h&&!this.debug?null:(wr(o[0])&&(o[0]=`${f}${this.prefix} ${o[0]}`),this.logger[t](o))}create(o){return new Xu(this.logger,{prefix:`${this.prefix}:${o}:`,...this.options})}clone(o){return o=o||this.options,o.prefix=o.prefix||this.prefix,new Xu(this.logger,o)}}var Oa=new Xu;class km{constructor(){this.observers={}}on(o,t){return o.split(" ").forEach(f=>{this.observers[f]||(this.observers[f]=new Map);const h=this.observers[f].get(t)||0;this.observers[f].set(t,h+1)}),this}off(o,t){if(this.observers[o]){if(!t){delete this.observers[o];return}this.observers[o].delete(t)}}emit(o,...t){this.observers[o]&&Array.from(this.observers[o].entries()).forEach(([h,d])=>{for(let n=0;n<d;n++)h(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([h,d])=>{for(let n=0;n<d;n++)h.apply(h,[o,...t])})}}class Ax extends km{constructor(o,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=o||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(o){this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}removeNamespaces(o){const t=this.options.ns.indexOf(o);t>-1&&this.options.ns.splice(t,1)}getResource(o,t,f,h={}){const d=h.keySeparator!==void 0?h.keySeparator:this.options.keySeparator,n=h.ignoreJSONStructure!==void 0?h.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;o.indexOf(".")>-1?l=o.split("."):(l=[o,t],f&&(Array.isArray(f)?l.push(...f):wr(f)&&d?l.push(...f.split(d)):l.push(f)));const i=Zu(this.data,l);return!i&&!t&&!f&&o.indexOf(".")>-1&&(o=l[0],t=l[1],f=l.slice(2).join(".")),i||!n||!wr(f)?i:op(this.data?.[o]?.[t],f,d)}addResource(o,t,f,h,d={silent:!1}){const n=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator;let l=[o,t];f&&(l=l.concat(n?f.split(n):f)),o.indexOf(".")>-1&&(l=o.split("."),h=t,t=l[1]),this.addNamespaces(t),Cx(this.data,l,h),d.silent||this.emit("added",o,t,f,h)}addResources(o,t,f,h={silent:!1}){for(const d in f)(wr(f[d])||Array.isArray(f[d]))&&this.addResource(o,t,d,f[d],{silent:!0});h.silent||this.emit("added",o,t,f)}addResourceBundle(o,t,f,h,d,n={silent:!1,skipCopy:!1}){let l=[o,t];o.indexOf(".")>-1&&(l=o.split("."),h=f,f=t,t=l[1]),this.addNamespaces(t);let i=Zu(this.data,l)||{};n.skipCopy||(f=JSON.parse(JSON.stringify(f))),h?Xb(i,f,d):i={...i,...f},Cx(this.data,l,i),n.silent||this.emit("added",o,t,f)}removeResourceBundle(o,t){this.hasResourceBundle(o,t)&&delete this.data[o][t],this.removeNamespaces(t),this.emit("removed",o,t)}hasResourceBundle(o,t){return this.getResource(o,t)!==void 0}getResourceBundle(o,t){return t||(t=this.options.defaultNS),this.getResource(o,t)}getDataByLanguage(o){return this.data[o]}hasLanguageSomeTranslations(o){const t=this.getDataByLanguage(o);return!!(t&&Object.keys(t)||[]).find(h=>t[h]&&Object.keys(t[h]).length>0)}toJSON(){return this.data}}var Jb={processors:{},addPostProcessor(a){this.processors[a.name]=a},handle(a,o,t,f,h){return a.forEach(d=>{o=this.processors[d]?.process(o,t,f,h)??o}),o}};const ev=Symbol("i18next/PATH_KEY");function bN(){const a=[],o=Object.create(null);let t;return o.get=(f,h)=>(t?.revoke?.(),h===ev?a:(a.push(h),t=Proxy.revocable(f,o),t.proxy)),Proxy.revocable(Object.create(null),o).proxy}function lp(a,o){const{[ev]:t}=a(bN());return t.join(o?.keySeparator??".")}const Tx={},pf=a=>!wr(a)&&typeof a!="boolean"&&typeof a!="number";class Ju extends km{constructor(o,t={}){super(),lN(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],o,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Oa.create("translator")}changeLanguage(o){o&&(this.language=o)}exists(o,t={interpolation:{}}){const f={...t};if(o==null)return!1;const h=this.resolve(o,f);if(h?.res===void 0)return!1;const d=pf(h.res);return!(f.returnObjects===!1&&d)}extractFromKey(o,t){let f=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const h=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let d=t.ns||this.options.defaultNS||[];const n=f&&o.indexOf(f)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!xN(o,f,h);if(n&&!l){const i=o.match(this.interpolator.nestingRegexp);if(i&&i.length>0)return{key:o,namespaces:wr(d)?[d]:d};const r=o.split(f);(f!==h||f===h&&this.options.ns.indexOf(r[0])>-1)&&(d=r.shift()),o=r.join(h)}return{key:o,namespaces:wr(d)?[d]:d}}translate(o,t,f){let h=typeof t=="object"?{...t}:t;if(typeof h!="object"&&this.options.overloadTranslationOptionHandler&&(h=this.options.overloadTranslationOptionHandler(arguments)),typeof h=="object"&&(h={...h}),h||(h={}),o==null)return"";typeof o=="function"&&(o=lp(o,{...this.options,...h})),Array.isArray(o)||(o=[String(o)]);const d=h.returnDetails!==void 0?h.returnDetails:this.options.returnDetails,n=h.keySeparator!==void 0?h.keySeparator:this.options.keySeparator,{key:l,namespaces:i}=this.extractFromKey(o[o.length-1],h),r=i[i.length-1];let s=h.nsSeparator!==void 0?h.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const c=h.lng||this.language,u=h.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c?.toLowerCase()==="cimode")return u?d?{res:`${r}${s}${l}`,usedKey:l,exactUsedKey:l,usedLng:c,usedNS:r,usedParams:this.getUsedParamsDetails(h)}:`${r}${s}${l}`:d?{res:l,usedKey:l,exactUsedKey:l,usedLng:c,usedNS:r,usedParams:this.getUsedParamsDetails(h)}:l;const m=this.resolve(o,h);let x=m?.res;const b=m?.usedKey||l,p=m?.exactUsedKey||l,v=["[object Number]","[object Function]","[object RegExp]"],y=h.joinArrays!==void 0?h.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,T=h.count!==void 0&&!wr(h.count),_=Ju.hasDefaultValue(h),O=T?this.pluralResolver.getSuffix(c,h.count,h):"",H=h.ordinal&&T?this.pluralResolver.getSuffix(c,h.count,{ordinal:!1}):"",F=T&&!h.ordinal&&h.count===0,V=F&&h[`defaultValue${this.options.pluralSeparator}zero`]||h[`defaultValue${O}`]||h[`defaultValue${H}`]||h.defaultValue;let q=x;N&&!x&&_&&(q=V);const W=pf(q),B=Object.prototype.toString.apply(q);if(N&&q&&W&&v.indexOf(B)<0&&!(wr(y)&&Array.isArray(q))){if(!h.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,q,{...h,ns:i}):`key '${l} (${this.language})' returned an object instead of string.`;return d?(m.res=E,m.usedParams=this.getUsedParamsDetails(h),m):E}if(n){const E=Array.isArray(q),P=E?[]:{},A=E?p:b;for(const k in q)if(Object.prototype.hasOwnProperty.call(q,k)){const j=`${A}${n}${k}`;_&&!x?P[k]=this.translate(j,{...h,defaultValue:pf(V)?V[k]:void 0,joinArrays:!1,ns:i}):P[k]=this.translate(j,{...h,joinArrays:!1,ns:i}),P[k]===j&&(P[k]=q[k])}x=P}}else if(N&&wr(y)&&Array.isArray(x))x=x.join(y),x&&(x=this.extendTranslation(x,o,h,f));else{let E=!1,P=!1;!this.isValidLookup(x)&&_&&(E=!0,x=V),this.isValidLookup(x)||(P=!0,x=l);const k=(h.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:x,j=_&&V!==x&&this.options.updateMissing;if(P||E||j){if(this.logger.log(j?"updateKey":"missingKey",c,r,l,j?V:x),n){const R=this.resolve(l,{...h,keySeparator:!1});R&&R.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let S=[];const C=this.languageUtils.getFallbackCodes(this.options.fallbackLng,h.lng||this.language);if(this.options.saveMissingTo==="fallback"&&C&&C[0])for(let R=0;R<C.length;R++)S.push(C[R]);else this.options.saveMissingTo==="all"?S=this.languageUtils.toResolveHierarchy(h.lng||this.language):S.push(h.lng||this.language);const D=(R,L,Y)=>{const X=_&&Y!==x?Y:k;this.options.missingKeyHandler?this.options.missingKeyHandler(R,r,L,X,j,h):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(R,r,L,X,j,h),this.emit("missingKey",R,r,L,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?S.forEach(R=>{const L=this.pluralResolver.getSuffixes(R,h);F&&h[`defaultValue${this.options.pluralSeparator}zero`]&&L.indexOf(`${this.options.pluralSeparator}zero`)<0&&L.push(`${this.options.pluralSeparator}zero`),L.forEach(Y=>{D([R],l+Y,h[`defaultValue${Y}`]||V)})}):D(S,l,V))}x=this.extendTranslation(x,o,h,m,f),P&&x===l&&this.options.appendNamespaceToMissingKey&&(x=`${r}${s}${l}`),(P||E)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${r}${s}${l}`:l,E?x:void 0,h))}return d?(m.res=x,m.usedParams=this.getUsedParamsDetails(h),m):x}extendTranslation(o,t,f,h,d){if(this.i18nFormat?.parse)o=this.i18nFormat.parse(o,{...this.options.interpolation.defaultVariables,...f},f.lng||this.language||h.usedLng,h.usedNS,h.usedKey,{resolved:h});else if(!f.skipInterpolation){f.interpolation&&this.interpolator.init({...f,interpolation:{...this.options.interpolation,...f.interpolation}});const i=wr(o)&&(f?.interpolation?.skipOnVariables!==void 0?f.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let r;if(i){const c=o.match(this.interpolator.nestingRegexp);r=c&&c.length}let s=f.replace&&!wr(f.replace)?f.replace:f;if(this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),o=this.interpolator.interpolate(o,s,f.lng||this.language||h.usedLng,f),i){const c=o.match(this.interpolator.nestingRegexp),u=c&&c.length;r<u&&(f.nest=!1)}!f.lng&&h&&h.res&&(f.lng=this.language||h.usedLng),f.nest!==!1&&(o=this.interpolator.nest(o,(...c)=>d?.[0]===c[0]&&!f.context?(this.logger.warn(`It seems you are nesting recursively key: ${c[0]} in key: ${t[0]}`),null):this.translate(...c,t),f)),f.interpolation&&this.interpolator.reset()}const n=f.postProcess||this.options.postProcess,l=wr(n)?[n]:n;return o!=null&&l?.length&&f.applyPostProcessor!==!1&&(o=Jb.handle(l,o,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...h,usedParams:this.getUsedParamsDetails(f)},...f}:f,this)),o}resolve(o,t={}){let f,h,d,n,l;return wr(o)&&(o=[o]),o.forEach(i=>{if(this.isValidLookup(f))return;const r=this.extractFromKey(i,t),s=r.key;h=s;let c=r.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=t.count!==void 0&&!wr(t.count),m=u&&!t.ordinal&&t.count===0,x=t.context!==void 0&&(wr(t.context)||typeof t.context=="number")&&t.context!=="",b=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(p=>{this.isValidLookup(f)||(l=p,!Tx[`${b[0]}-${p}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(Tx[`${b[0]}-${p}`]=!0,this.logger.warn(`key "${h}" for languages "${b.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(v=>{if(this.isValidLookup(f))return;n=v;const y=[s];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(y,s,v,p,t);else{let T;u&&(T=this.pluralResolver.getSuffix(v,t.count,t));const _=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&T.indexOf(O)===0&&y.push(s+T.replace(O,this.options.pluralSeparator)),y.push(s+T),m&&y.push(s+_)),x){const H=`${s}${this.options.contextSeparator||"_"}${t.context}`;y.push(H),u&&(t.ordinal&&T.indexOf(O)===0&&y.push(H+T.replace(O,this.options.pluralSeparator)),y.push(H+T),m&&y.push(H+_))}}let N;for(;N=y.pop();)this.isValidLookup(f)||(d=N,f=this.getResource(v,p,N,t))}))})}),{res:f,usedKey:h,exactUsedKey:d,usedLng:n,usedNS:l}}isValidLookup(o){return o!==void 0&&!(!this.options.returnNull&&o===null)&&!(!this.options.returnEmptyString&&o==="")}getResource(o,t,f,h={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(o,t,f,h):this.resourceStore.getResource(o,t,f,h)}getUsedParamsDetails(o={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],f=o.replace&&!wr(o.replace);let h=f?o.replace:o;if(f&&typeof o.count<"u"&&(h.count=o.count),this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),!f){h={...h};for(const d of t)delete h[d]}return h}static hasDefaultValue(o){const t="defaultValue";for(const f in o)if(Object.prototype.hasOwnProperty.call(o,f)&&t===f.substring(0,t.length)&&o[f]!==void 0)return!0;return!1}}class Ex{constructor(o){this.options=o,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Oa.create("languageUtils")}getScriptPartFromCode(o){if(o=Uc(o),!o||o.indexOf("-")<0)return null;const t=o.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(o){if(o=Uc(o),!o||o.indexOf("-")<0)return o;const t=o.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(o){if(wr(o)&&o.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(o)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?o.toLowerCase():o)}return this.options.cleanCode||this.options.lowerCaseLng?o.toLowerCase():o}isSupportedCode(o){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(o=this.getLanguagePartFromCode(o)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(o)>-1}getBestMatchFromCodes(o){if(!o)return null;let t;return o.forEach(f=>{if(t)return;const h=this.formatLanguageCode(f);(!this.options.supportedLngs||this.isSupportedCode(h))&&(t=h)}),!t&&this.options.supportedLngs&&o.forEach(f=>{if(t)return;const h=this.getScriptPartFromCode(f);if(this.isSupportedCode(h))return t=h;const d=this.getLanguagePartFromCode(f);if(this.isSupportedCode(d))return t=d;t=this.options.supportedLngs.find(n=>{if(n===d)return n;if(!(n.indexOf("-")<0&&d.indexOf("-")<0)&&(n.indexOf("-")>0&&d.indexOf("-")<0&&n.substring(0,n.indexOf("-"))===d||n.indexOf(d)===0&&d.length>1))return n})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(o,t){if(!o)return[];if(typeof o=="function"&&(o=o(t)),wr(o)&&(o=[o]),Array.isArray(o))return o;if(!t)return o.default||[];let f=o[t];return f||(f=o[this.getScriptPartFromCode(t)]),f||(f=o[this.formatLanguageCode(t)]),f||(f=o[this.getLanguagePartFromCode(t)]),f||(f=o.default),f||[]}toResolveHierarchy(o,t){const f=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],o),h=[],d=n=>{n&&(this.isSupportedCode(n)?h.push(n):this.logger.warn(`rejecting language code not found in supportedLngs: ${n}`))};return wr(o)&&(o.indexOf("-")>-1||o.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&d(this.formatLanguageCode(o)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&d(this.getScriptPartFromCode(o)),this.options.load!=="currentOnly"&&d(this.getLanguagePartFromCode(o))):wr(o)&&d(this.formatLanguageCode(o)),f.forEach(n=>{h.indexOf(n)<0&&d(this.formatLanguageCode(n))}),h}}const Dx={zero:0,one:1,two:2,few:3,many:4,other:5},_x={select:a=>a===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class vN{constructor(o,t={}){this.languageUtils=o,this.options=t,this.logger=Oa.create("pluralResolver"),this.pluralRulesCache={}}addRule(o,t){this.rules[o]=t}clearCache(){this.pluralRulesCache={}}getRule(o,t={}){const f=Uc(o==="dev"?"en":o),h=t.ordinal?"ordinal":"cardinal",d=JSON.stringify({cleanedCode:f,type:h});if(d in this.pluralRulesCache)return this.pluralRulesCache[d];let n;try{n=new Intl.PluralRules(f,{type:h})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),_x;if(!o.match(/-|_/))return _x;const i=this.languageUtils.getLanguagePartFromCode(o);n=this.getRule(i,t)}return this.pluralRulesCache[d]=n,n}needsPlural(o,t={}){let f=this.getRule(o,t);return f||(f=this.getRule("dev",t)),f?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(o,t,f={}){return this.getSuffixes(o,f).map(h=>`${t}${h}`)}getSuffixes(o,t={}){let f=this.getRule(o,t);return f||(f=this.getRule("dev",t)),f?f.resolvedOptions().pluralCategories.sort((h,d)=>Dx[h]-Dx[d]).map(h=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${h}`):[]}getSuffix(o,t,f={}){const h=this.getRule(o,f);return h?`${this.options.prepend}${f.ordinal?`ordinal${this.options.prepend}`:""}${h.select(t)}`:(this.logger.warn(`no plural rule found for: ${o}`),this.getSuffix("dev",t,f))}}const Px=(a,o,t,f=".",h=!0)=>{let d=uN(a,o,t);return!d&&h&&wr(t)&&(d=op(a,t,f),d===void 0&&(d=op(o,t,f))),d},gf=a=>a.replace(/\$/g,"$$$$");class wN{constructor(o={}){this.logger=Oa.create("interpolator"),this.options=o,this.format=o?.interpolation?.format||(t=>t),this.init(o)}init(o={}){o.interpolation||(o.interpolation={escapeValue:!0});const{escape:t,escapeValue:f,useRawValueToEscape:h,prefix:d,prefixEscaped:n,suffix:l,suffixEscaped:i,formatSeparator:r,unescapeSuffix:s,unescapePrefix:c,nestingPrefix:u,nestingPrefixEscaped:m,nestingSuffix:x,nestingSuffixEscaped:b,nestingOptionsSeparator:p,maxReplaces:v,alwaysFormat:y}=o.interpolation;this.escape=t!==void 0?t:hN,this.escapeValue=f!==void 0?f:!0,this.useRawValueToEscape=h!==void 0?h:!1,this.prefix=d?al(d):n||"{{",this.suffix=l?al(l):i||"}}",this.formatSeparator=r||",",this.unescapePrefix=s?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":s||"",this.nestingPrefix=u?al(u):m||al("$t("),this.nestingSuffix=x?al(x):b||al(")"),this.nestingOptionsSeparator=p||",",this.maxReplaces=v||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const o=(t,f)=>t?.source===f?(t.lastIndex=0,t):new RegExp(f,"g");this.regexp=o(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=o(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=o(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(o,t,f,h){let d,n,l;const i=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},r=m=>{if(m.indexOf(this.formatSeparator)<0){const v=Px(t,i,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(v,void 0,f,{...h,...t,interpolationkey:m}):v}const x=m.split(this.formatSeparator),b=x.shift().trim(),p=x.join(this.formatSeparator).trim();return this.format(Px(t,i,b,this.options.keySeparator,this.options.ignoreJSONStructure),p,f,{...h,...t,interpolationkey:b})};this.resetRegExp();const s=h?.missingInterpolationHandler||this.options.missingInterpolationHandler,c=h?.interpolation?.skipOnVariables!==void 0?h.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>gf(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?gf(this.escape(m)):gf(m)}].forEach(m=>{for(l=0;d=m.regex.exec(o);){const x=d[1].trim();if(n=r(x),n===void 0)if(typeof s=="function"){const p=s(o,d,h);n=wr(p)?p:""}else if(h&&Object.prototype.hasOwnProperty.call(h,x))n="";else if(c){n=d[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${o}`),n="";else!wr(n)&&!this.useRawValueToEscape&&(n=kx(n));const b=m.safeValue(n);if(o=o.replace(d[0],b),c?(m.regex.lastIndex+=n.length,m.regex.lastIndex-=d[0].length):m.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),o}nest(o,t,f={}){let h,d,n;const l=(i,r)=>{const s=this.nestingOptionsSeparator;if(i.indexOf(s)<0)return i;const c=i.split(new RegExp(`${s}[ ]*{`));let u=`{${c[1]}`;i=c[0],u=this.interpolate(u,n);const m=u.match(/'/g),x=u.match(/"/g);((m?.length??0)%2===0&&!x||x.length%2!==0)&&(u=u.replace(/'/g,'"'));try{n=JSON.parse(u),r&&(n={...r,...n})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${i}`,b),`${i}${s}${u}`}return n.defaultValue&&n.defaultValue.indexOf(this.prefix)>-1&&delete n.defaultValue,i};for(;h=this.nestingRegexp.exec(o);){let i=[];n={...f},n=n.replace&&!wr(n.replace)?n.replace:n,n.applyPostProcessor=!1,delete n.defaultValue;const r=/{.*}/.test(h[1])?h[1].lastIndexOf("}")+1:h[1].indexOf(this.formatSeparator);if(r!==-1&&(i=h[1].slice(r).split(this.formatSeparator).map(s=>s.trim()).filter(Boolean),h[1]=h[1].slice(0,r)),d=t(l.call(this,h[1].trim(),n),n),d&&h[0]===o&&!wr(d))return d;wr(d)||(d=kx(d)),d||(this.logger.warn(`missed to resolve ${h[1]} for nesting ${o}`),d=""),i.length&&(d=i.reduce((s,c)=>this.format(s,c,f.lng,{...f,interpolationkey:h[1].trim()}),d.trim())),o=o.replace(h[0],d),this.regexp.lastIndex=0}return o}}const NN=a=>{let o=a.toLowerCase().trim();const t={};if(a.indexOf("(")>-1){const f=a.split("(");o=f[0].toLowerCase().trim();const h=f[1].substring(0,f[1].length-1);o==="currency"&&h.indexOf(":")<0?t.currency||(t.currency=h.trim()):o==="relativetime"&&h.indexOf(":")<0?t.range||(t.range=h.trim()):h.split(";").forEach(n=>{if(n){const[l,...i]=n.split(":"),r=i.join(":").trim().replace(/^'+|'+$/g,""),s=l.trim();t[s]||(t[s]=r),r==="false"&&(t[s]=!1),r==="true"&&(t[s]=!0),isNaN(r)||(t[s]=parseInt(r,10))}})}return{formatName:o,formatOptions:t}},Ix=a=>{const o={};return(t,f,h)=>{let d=h;h&&h.interpolationkey&&h.formatParams&&h.formatParams[h.interpolationkey]&&h[h.interpolationkey]&&(d={...d,[h.interpolationkey]:void 0});const n=f+JSON.stringify(d);let l=o[n];return l||(l=a(Uc(f),h),o[n]=l),l(t)}},kN=a=>(o,t,f)=>a(Uc(t),f)(o);class jN{constructor(o={}){this.logger=Oa.create("formatter"),this.options=o,this.init(o)}init(o,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const f=t.cacheInBuiltFormats?Ix:kN;this.formats={number:f((h,d)=>{const n=new Intl.NumberFormat(h,{...d});return l=>n.format(l)}),currency:f((h,d)=>{const n=new Intl.NumberFormat(h,{...d,style:"currency"});return l=>n.format(l)}),datetime:f((h,d)=>{const n=new Intl.DateTimeFormat(h,{...d});return l=>n.format(l)}),relativetime:f((h,d)=>{const n=new Intl.RelativeTimeFormat(h,{...d});return l=>n.format(l,d.range||"day")}),list:f((h,d)=>{const n=new Intl.ListFormat(h,{...d});return l=>n.format(l)})}}add(o,t){this.formats[o.toLowerCase().trim()]=t}addCached(o,t){this.formats[o.toLowerCase().trim()]=Ix(t)}format(o,t,f,h={}){const d=t.split(this.formatSeparator);if(d.length>1&&d[0].indexOf("(")>1&&d[0].indexOf(")")<0&&d.find(l=>l.indexOf(")")>-1)){const l=d.findIndex(i=>i.indexOf(")")>-1);d[0]=[d[0],...d.splice(1,l)].join(this.formatSeparator)}return d.reduce((l,i)=>{const{formatName:r,formatOptions:s}=NN(i);if(this.formats[r]){let c=l;try{const u=h?.formatParams?.[h.interpolationkey]||{},m=u.locale||u.lng||h.locale||h.lng||f;c=this.formats[r](l,m,{...s,...h,...u})}catch(u){this.logger.warn(u)}return c}else this.logger.warn(`there was no format function for ${r}`);return l},o)}}const SN=(a,o)=>{a.pending[o]!==void 0&&(delete a.pending[o],a.pendingCount--)};class CN extends km{constructor(o,t,f,h={}){super(),this.backend=o,this.store=t,this.services=f,this.languageUtils=f.languageUtils,this.options=h,this.logger=Oa.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=h.maxParallelReads||10,this.readingCalls=0,this.maxRetries=h.maxRetries>=0?h.maxRetries:5,this.retryTimeout=h.retryTimeout>=1?h.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(f,h.backend,h)}queueLoad(o,t,f,h){const d={},n={},l={},i={};return o.forEach(r=>{let s=!0;t.forEach(c=>{const u=`${r}|${c}`;!f.reload&&this.store.hasResourceBundle(r,c)?this.state[u]=2:this.state[u]<0||(this.state[u]===1?n[u]===void 0&&(n[u]=!0):(this.state[u]=1,s=!1,n[u]===void 0&&(n[u]=!0),d[u]===void 0&&(d[u]=!0),i[c]===void 0&&(i[c]=!0)))}),s||(l[r]=!0)}),(Object.keys(d).length||Object.keys(n).length)&&this.queue.push({pending:n,pendingCount:Object.keys(n).length,loaded:{},errors:[],callback:h}),{toLoad:Object.keys(d),pending:Object.keys(n),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(i)}}loaded(o,t,f){const h=o.split("|"),d=h[0],n=h[1];t&&this.emit("failedLoading",d,n,t),!t&&f&&this.store.addResourceBundle(d,n,f,void 0,void 0,{skipCopy:!0}),this.state[o]=t?-1:2,t&&f&&(this.state[o]=0);const l={};this.queue.forEach(i=>{dN(i.loaded,[d],n),SN(i,o),t&&i.errors.push(t),i.pendingCount===0&&!i.done&&(Object.keys(i.loaded).forEach(r=>{l[r]||(l[r]={});const s=i.loaded[r];s.length&&s.forEach(c=>{l[r][c]===void 0&&(l[r][c]=!0)})}),i.done=!0,i.errors.length?i.callback(i.errors):i.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(i=>!i.done)}read(o,t,f,h=0,d=this.retryTimeout,n){if(!o.length)return n(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:o,ns:t,fcName:f,tried:h,wait:d,callback:n});return}this.readingCalls++;const l=(r,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const c=this.waitingReads.shift();this.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}if(r&&s&&h<this.maxRetries){setTimeout(()=>{this.read.call(this,o,t,f,h+1,d*2,n)},d);return}n(r,s)},i=this.backend[f].bind(this.backend);if(i.length===2){try{const r=i(o,t);r&&typeof r.then=="function"?r.then(s=>l(null,s)).catch(l):l(null,r)}catch(r){l(r)}return}return i(o,t,l)}prepareLoading(o,t,f={},h){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),h&&h();wr(o)&&(o=this.languageUtils.toResolveHierarchy(o)),wr(t)&&(t=[t]);const d=this.queueLoad(o,t,f,h);if(!d.toLoad.length)return d.pending.length||h(),null;d.toLoad.forEach(n=>{this.loadOne(n)})}load(o,t,f){this.prepareLoading(o,t,{},f)}reload(o,t,f){this.prepareLoading(o,t,{reload:!0},f)}loadOne(o,t=""){const f=o.split("|"),h=f[0],d=f[1];this.read(h,d,"read",void 0,void 0,(n,l)=>{n&&this.logger.warn(`${t}loading namespace ${d} for language ${h} failed`,n),!n&&l&&this.logger.log(`${t}loaded namespace ${d} for language ${h}`,l),this.loaded(o,n,l)})}saveMissing(o,t,f,h,d,n={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${f}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(f==null||f==="")){if(this.backend?.create){const i={...n,isUpdate:d},r=this.backend.create.bind(this.backend);if(r.length<6)try{let s;r.length===5?s=r(o,t,f,h,i):s=r(o,t,f,h),s&&typeof s.then=="function"?s.then(c=>l(null,c)).catch(l):l(null,s)}catch(s){l(s)}else r(o,t,f,h,l,i)}!o||!o[0]||this.store.addResource(o[0],t,f,h)}}}const Mx=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:a=>{let o={};if(typeof a[1]=="object"&&(o=a[1]),wr(a[1])&&(o.defaultValue=a[1]),wr(a[2])&&(o.tDescription=a[2]),typeof a[2]=="object"||typeof a[3]=="object"){const t=a[3]||a[2];Object.keys(t).forEach(f=>{o[f]=t[f]})}return o},interpolation:{escapeValue:!0,format:a=>a,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Rx=a=>(wr(a.ns)&&(a.ns=[a.ns]),wr(a.fallbackLng)&&(a.fallbackLng=[a.fallbackLng]),wr(a.fallbackNS)&&(a.fallbackNS=[a.fallbackNS]),a.supportedLngs?.indexOf?.("cimode")<0&&(a.supportedLngs=a.supportedLngs.concat(["cimode"])),typeof a.initImmediate=="boolean"&&(a.initAsync=a.initImmediate),a),du=()=>{},AN=a=>{Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(t=>{typeof a[t]=="function"&&(a[t]=a[t].bind(a))})};class Vc extends km{constructor(o={},t){if(super(),this.options=Rx(o),this.services={},this.logger=Oa,this.modules={external:[]},AN(this),t&&!this.isInitialized&&!o.isClone){if(!this.options.initAsync)return this.init(o,t),this;setTimeout(()=>{this.init(o,t)},0)}}init(o={},t){this.isInitializing=!0,typeof o=="function"&&(t=o,o={}),o.defaultNS==null&&o.ns&&(wr(o.ns)?o.defaultNS=o.ns:o.ns.indexOf("translation")<0&&(o.defaultNS=o.ns[0]));const f=Mx();this.options={...f,...this.options,...Rx(o)},this.options.interpolation={...f.interpolation,...this.options.interpolation},o.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=o.keySeparator),o.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=o.nsSeparator);const h=r=>r?typeof r=="function"?new r:r:null;if(!this.options.isClone){this.modules.logger?Oa.init(h(this.modules.logger),this.options):Oa.init(null,this.options);let r;this.modules.formatter?r=this.modules.formatter:r=jN;const s=new Ex(this.options);this.store=new Ax(this.options.resources,this.options);const c=this.services;c.logger=Oa,c.resourceStore=this.store,c.languageUtils=s,c.pluralResolver=new vN(s,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==f.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),r&&(!this.options.interpolation.format||this.options.interpolation.format===f.interpolation.format)&&(c.formatter=h(r),c.formatter.init&&c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new wN(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new CN(h(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(m,...x)=>{this.emit(m,...x)}),this.modules.languageDetector&&(c.languageDetector=h(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=h(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new Ju(this.services,this.options),this.translator.on("*",(m,...x)=>{this.emit(m,...x)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,t||(t=du),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const r=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);r.length>0&&r[0]!=="dev"&&(this.options.lng=r[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(r=>{this[r]=(...s)=>this.store[r](...s)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(r=>{this[r]=(...s)=>(this.store[r](...s),this)});const l=hc(),i=()=>{const r=(s,c)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(c),t(s,c)};if(this.languages&&!this.isInitialized)return r(null,this.t.bind(this));this.changeLanguage(this.options.lng,r)};return this.options.resources||!this.options.initAsync?i():setTimeout(i,0),l}loadResources(o,t=du){let f=t;const h=wr(o)?o:this.language;if(typeof o=="function"&&(f=o),!this.options.resources||this.options.partialBundledLanguages){if(h?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return f();const d=[],n=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(r=>{r!=="cimode"&&d.indexOf(r)<0&&d.push(r)})};h?n(h):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(i=>n(i)),this.options.preload?.forEach?.(l=>n(l)),this.services.backendConnector.load(d,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),f(l)})}else f(null)}reloadResources(o,t,f){const h=hc();return typeof o=="function"&&(f=o,o=void 0),typeof t=="function"&&(f=t,t=void 0),o||(o=this.languages),t||(t=this.options.ns),f||(f=du),this.services.backendConnector.reload(o,t,d=>{h.resolve(),f(d)}),h}use(o){if(!o)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!o.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return o.type==="backend"&&(this.modules.backend=o),(o.type==="logger"||o.log&&o.warn&&o.error)&&(this.modules.logger=o),o.type==="languageDetector"&&(this.modules.languageDetector=o),o.type==="i18nFormat"&&(this.modules.i18nFormat=o),o.type==="postProcessor"&&Jb.addPostProcessor(o),o.type==="formatter"&&(this.modules.formatter=o),o.type==="3rdParty"&&this.modules.external.push(o),this}setResolvedLanguage(o){if(!(!o||!this.languages)&&!(["cimode","dev"].indexOf(o)>-1)){for(let t=0;t<this.languages.length;t++){const f=this.languages[t];if(!(["cimode","dev"].indexOf(f)>-1)&&this.store.hasLanguageSomeTranslations(f)){this.resolvedLanguage=f;break}}!this.resolvedLanguage&&this.languages.indexOf(o)<0&&this.store.hasLanguageSomeTranslations(o)&&(this.resolvedLanguage=o,this.languages.unshift(o))}}changeLanguage(o,t){this.isLanguageChangingTo=o;const f=hc();this.emit("languageChanging",o);const h=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},d=(l,i)=>{i?this.isLanguageChangingTo===o&&(h(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,f.resolve((...r)=>this.t(...r)),t&&t(l,(...r)=>this.t(...r))},n=l=>{!o&&!l&&this.services.languageDetector&&(l=[]);const i=wr(l)?l:l&&l[0],r=this.store.hasLanguageSomeTranslations(i)?i:this.services.languageUtils.getBestMatchFromCodes(wr(l)?[l]:l);r&&(this.language||h(r),this.translator.language||this.translator.changeLanguage(r),this.services.languageDetector?.cacheUserLanguage?.(r)),this.loadResources(r,s=>{d(s,r)})};return!o&&this.services.languageDetector&&!this.services.languageDetector.async?n(this.services.languageDetector.detect()):!o&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(n):this.services.languageDetector.detect(n):n(o),f}getFixedT(o,t,f){const h=(d,n,...l)=>{let i;typeof n!="object"?i=this.options.overloadTranslationOptionHandler([d,n].concat(l)):i={...n},i.lng=i.lng||h.lng,i.lngs=i.lngs||h.lngs,i.ns=i.ns||h.ns,i.keyPrefix!==""&&(i.keyPrefix=i.keyPrefix||f||h.keyPrefix);const r=this.options.keySeparator||".";let s;return i.keyPrefix&&Array.isArray(d)?s=d.map(c=>(typeof c=="function"&&(c=lp(c,{...this.options,...n})),`${i.keyPrefix}${r}${c}`)):(typeof d=="function"&&(d=lp(d,{...this.options,...n})),s=i.keyPrefix?`${i.keyPrefix}${r}${d}`:d),this.t(s,i)};return wr(o)?h.lng=o:h.lngs=o,h.ns=t,h.keyPrefix=f,h}t(...o){return this.translator?.translate(...o)}exists(...o){return this.translator?.exists(...o)}setDefaultNamespace(o){this.options.defaultNS=o}hasLoadedNamespace(o,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const f=t.lng||this.resolvedLanguage||this.languages[0],h=this.options?this.options.fallbackLng:!1,d=this.languages[this.languages.length-1];if(f.toLowerCase()==="cimode")return!0;const n=(l,i)=>{const r=this.services.backendConnector.state[`${l}|${i}`];return r===-1||r===0||r===2};if(t.precheck){const l=t.precheck(this,n);if(l!==void 0)return l}return!!(this.hasResourceBundle(f,o)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||n(f,o)&&(!h||n(d,o)))}loadNamespaces(o,t){const f=hc();return this.options.ns?(wr(o)&&(o=[o]),o.forEach(h=>{this.options.ns.indexOf(h)<0&&this.options.ns.push(h)}),this.loadResources(h=>{f.resolve(),t&&t(h)}),f):(t&&t(),Promise.resolve())}loadLanguages(o,t){const f=hc();wr(o)&&(o=[o]);const h=this.options.preload||[],d=o.filter(n=>h.indexOf(n)<0&&this.services.languageUtils.isSupportedCode(n));return d.length?(this.options.preload=h.concat(d),this.loadResources(n=>{f.resolve(),t&&t(n)}),f):(t&&t(),Promise.resolve())}dir(o){if(o||(o=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!o)return"rtl";try{const h=new Intl.Locale(o);if(h&&h.getTextInfo){const d=h.getTextInfo();if(d&&d.direction)return d.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],f=this.services?.languageUtils||new Ex(Mx());return o.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(f.getLanguagePartFromCode(o))>-1||o.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(o={},t){return new Vc(o,t)}cloneInstance(o={},t=du){const f=o.forkResourceStore;f&&delete o.forkResourceStore;const h={...this.options,...o,isClone:!0},d=new Vc(h);if((o.debug!==void 0||o.prefix!==void 0)&&(d.logger=d.logger.clone(o)),["store","services","language"].forEach(l=>{d[l]=this[l]}),d.services={...this.services},d.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},f){const l=Object.keys(this.store.data).reduce((i,r)=>(i[r]={...this.store.data[r]},i[r]=Object.keys(i[r]).reduce((s,c)=>(s[c]={...i[r][c]},s),i[r]),i),{});d.store=new Ax(l,h),d.services.resourceStore=d.store}return d.translator=new Ju(d.services,h),d.translator.on("*",(l,...i)=>{d.emit(l,...i)}),d.init(h,t),d.translator.options=h,d.translator.backendConnector.services.utils={hasLoadedNamespace:d.hasLoadedNamespace.bind(d)},d}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ls=Vc.createInstance();ls.createInstance=Vc.createInstance;ls.createInstance;ls.dir;ls.init;ls.loadResources;ls.reloadResources;ls.use;ls.changeLanguage;ls.getFixedT;ls.t;ls.exists;ls.setDefaultNamespace;ls.hasLoadedNamespace;ls.loadNamespaces;ls.loadLanguages;const TN=(a,o,t,f)=>{const h=[t,{code:o,...f||{}}];if(a?.services?.logger?.forward)return a.services.logger.forward(h,"warn","react-i18next::",!0);So(h[0])&&(h[0]=`react-i18next:: ${h[0]}`),a?.services?.logger?.warn?a.services.logger.warn(...h):console?.warn&&console.warn(...h)},zx={},tv=(a,o,t,f)=>{So(t)&&zx[t]||(So(t)&&(zx[t]=new Date),TN(a,o,t,f))},rv=(a,o)=>()=>{if(a.isInitialized)o();else{const t=()=>{setTimeout(()=>{a.off("initialized",t)},0),o()};a.on("initialized",t)}},cp=(a,o,t)=>{a.loadNamespaces(o,rv(a,t))},Lx=(a,o,t,f)=>{if(So(t)&&(t=[t]),a.options.preload&&a.options.preload.indexOf(o)>-1)return cp(a,t,f);t.forEach(h=>{a.options.ns.indexOf(h)<0&&a.options.ns.push(h)}),a.loadLanguages(o,rv(a,f))},EN=(a,o,t={})=>!o.languages||!o.languages.length?(tv(o,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:o.languages}),!0):o.hasLoadedNamespace(a,{lng:t.lng,precheck:(f,h)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&f.services.backendConnector.backend&&f.isLanguageChangingTo&&!h(f.isLanguageChangingTo,a))return!1}}),So=a=>typeof a=="string",DN=a=>typeof a=="object"&&a!==null,_N=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,PN={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},IN=a=>PN[a],MN=a=>a.replace(_N,IN);let dp={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:MN};const RN=(a={})=>{dp={...dp,...a}},zN=()=>dp;let sv;const LN=a=>{sv=a},ON=()=>sv,FN={type:"3rdParty",init(a){RN(a.options.react),LN(a)}},nv=G.createContext();class BN{constructor(){this.usedNamespaces={}}addUsedNamespaces(o){o.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var xf={exports:{}},yf={};var Ox;function UN(){if(Ox)return yf;Ox=1;var a=pm();function o(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var t=typeof Object.is=="function"?Object.is:o,f=a.useState,h=a.useEffect,d=a.useLayoutEffect,n=a.useDebugValue;function l(c,u){var m=u(),x=f({inst:{value:m,getSnapshot:u}}),b=x[0].inst,p=x[1];return d(function(){b.value=m,b.getSnapshot=u,i(b)&&p({inst:b})},[c,m,u]),h(function(){return i(b)&&p({inst:b}),c(function(){i(b)&&p({inst:b})})},[c]),n(m),m}function i(c){var u=c.getSnapshot;c=c.value;try{var m=u();return!t(c,m)}catch{return!0}}function r(c,u){return u()}var s=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r:l;return yf.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:s,yf}var Fx;function VN(){return Fx||(Fx=1,xf.exports=UN()),xf.exports}var qN=VN();const $N=(a,o)=>So(o)?o:DN(o)&&So(o.defaultValue)?o.defaultValue:Array.isArray(a)?a[a.length-1]:a,HN={t:$N,ready:!1},KN=()=>()=>{},$t=(a,o={})=>{const{i18n:t}=o,{i18n:f,defaultNS:h}=G.useContext(nv)||{},d=t||f||ON();d&&!d.reportNamespaces&&(d.reportNamespaces=new BN),d||tv(d,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const n=G.useMemo(()=>({...zN(),...d?.options?.react,...o}),[d,o]),{useSuspense:l,keyPrefix:i}=n,r=G.useMemo(()=>{const T=a||h||d?.options?.defaultNS;return So(T)?[T]:T||["translation"]},[a,h,d]);d?.reportNamespaces?.addUsedNamespaces?.(r);const s=G.useRef(0),c=G.useCallback(T=>{if(!d)return KN;const{bindI18n:_,bindI18nStore:O}=n,H=()=>{s.current+=1,T()};return _&&d.on(_,H),O&&d.store.on(O,H),()=>{_&&_.split(" ").forEach(F=>d.off(F,H)),O&&O.split(" ").forEach(F=>d.store.off(F,H))}},[d,n]),u=G.useRef(),m=G.useCallback(()=>{if(!d)return HN;const T=!!(d.isInitialized||d.initializedStoreOnce)&&r.every(q=>EN(q,d,n)),_=o.lng||d.language,O=s.current,H=u.current;if(H&&H.ready===T&&H.lng===_&&H.keyPrefix===i&&H.revision===O)return H;const V={t:d.getFixedT(_,n.nsMode==="fallback"?r:r[0],i),ready:T,lng:_,keyPrefix:i,revision:O};return u.current=V,V},[d,r,i,n,o.lng]),[x,b]=G.useState(0),{t:p,ready:v}=qN.useSyncExternalStore(c,m,m);G.useEffect(()=>{if(d&&!v&&!l){const T=()=>b(_=>_+1);o.lng?Lx(d,o.lng,r,T):cp(d,r,T)}},[d,o.lng,r,v,l,x]);const y=d||{},N=G.useMemo(()=>{const T=[p,y,v];return T.t=p,T.i18n=y,T.ready=v,T},[p,y,v]);if(d&&l&&!v)throw new Promise(T=>{const _=()=>T();o.lng?Lx(d,o.lng,r,_):cp(d,r,_)});return N};function GN({i18n:a,defaultNS:o,children:t}){const f=G.useMemo(()=>({i18n:a,defaultNS:o}),[a,o]);return G.createElement(nv.Provider,{value:f},t)}const{slice:WN,forEach:YN}=[];function QN(a){return YN.call(WN.call(arguments,1),o=>{if(o)for(const t in o)a[t]===void 0&&(a[t]=o[t])}),a}function ZN(a){return typeof a!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(a))}const Bx=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,XN=function(a,o){const f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},h=encodeURIComponent(o);let d=`${a}=${h}`;if(f.maxAge>0){const n=f.maxAge-0;if(Number.isNaN(n))throw new Error("maxAge should be a Number");d+=`; Max-Age=${Math.floor(n)}`}if(f.domain){if(!Bx.test(f.domain))throw new TypeError("option domain is invalid");d+=`; Domain=${f.domain}`}if(f.path){if(!Bx.test(f.path))throw new TypeError("option path is invalid");d+=`; Path=${f.path}`}if(f.expires){if(typeof f.expires.toUTCString!="function")throw new TypeError("option expires is invalid");d+=`; Expires=${f.expires.toUTCString()}`}if(f.httpOnly&&(d+="; HttpOnly"),f.secure&&(d+="; Secure"),f.sameSite)switch(typeof f.sameSite=="string"?f.sameSite.toLowerCase():f.sameSite){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return f.partitioned&&(d+="; Partitioned"),d},Ux={create(a,o,t,f){let h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(h.expires=new Date,h.expires.setTime(h.expires.getTime()+t*60*1e3)),f&&(h.domain=f),document.cookie=XN(a,o,h)},read(a){const o=`${a}=`,t=document.cookie.split(";");for(let f=0;f<t.length;f++){let h=t[f];for(;h.charAt(0)===" ";)h=h.substring(1,h.length);if(h.indexOf(o)===0)return h.substring(o.length,h.length)}return null},remove(a,o){this.create(a,"",-1,o)}};var JN={name:"cookie",lookup(a){let{lookupCookie:o}=a;if(o&&typeof document<"u")return Ux.read(o)||void 0},cacheUserLanguage(a,o){let{lookupCookie:t,cookieMinutes:f,cookieDomain:h,cookieOptions:d}=o;t&&typeof document<"u"&&Ux.create(t,a,f,h,d)}},ek={name:"querystring",lookup(a){let{lookupQuerystring:o}=a,t;if(typeof window<"u"){let{search:f}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(f=window.location.hash.substring(window.location.hash.indexOf("?")));const d=f.substring(1).split("&");for(let n=0;n<d.length;n++){const l=d[n].indexOf("=");l>0&&d[n].substring(0,l)===o&&(t=d[n].substring(l+1))}}return t}},tk={name:"hash",lookup(a){let{lookupHash:o,lookupFromHashIndex:t}=a,f;if(typeof window<"u"){const{hash:h}=window.location;if(h&&h.length>2){const d=h.substring(1);if(o){const n=d.split("&");for(let l=0;l<n.length;l++){const i=n[l].indexOf("=");i>0&&n[l].substring(0,i)===o&&(f=n[l].substring(i+1))}}if(f)return f;if(!f&&t>-1){const n=h.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?n[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return f}};let il=null;const Vx=()=>{if(il!==null)return il;try{if(il=typeof window<"u"&&window.localStorage!==null,!il)return!1;const a="i18next.translate.boo";window.localStorage.setItem(a,"foo"),window.localStorage.removeItem(a)}catch{il=!1}return il};var rk={name:"localStorage",lookup(a){let{lookupLocalStorage:o}=a;if(o&&Vx())return window.localStorage.getItem(o)||void 0},cacheUserLanguage(a,o){let{lookupLocalStorage:t}=o;t&&Vx()&&window.localStorage.setItem(t,a)}};let ol=null;const qx=()=>{if(ol!==null)return ol;try{if(ol=typeof window<"u"&&window.sessionStorage!==null,!ol)return!1;const a="i18next.translate.boo";window.sessionStorage.setItem(a,"foo"),window.sessionStorage.removeItem(a)}catch{ol=!1}return ol};var sk={name:"sessionStorage",lookup(a){let{lookupSessionStorage:o}=a;if(o&&qx())return window.sessionStorage.getItem(o)||void 0},cacheUserLanguage(a,o){let{lookupSessionStorage:t}=o;t&&qx()&&window.sessionStorage.setItem(t,a)}},nk={name:"navigator",lookup(a){const o=[];if(typeof navigator<"u"){const{languages:t,userLanguage:f,language:h}=navigator;if(t)for(let d=0;d<t.length;d++)o.push(t[d]);f&&o.push(f),h&&o.push(h)}return o.length>0?o:void 0}},ak={name:"htmlTag",lookup(a){let{htmlTag:o}=a,t;const f=o||(typeof document<"u"?document.documentElement:null);return f&&typeof f.getAttribute=="function"&&(t=f.getAttribute("lang")),t}},ik={name:"path",lookup(a){let{lookupFromPathIndex:o}=a;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof o=="number"?o:0]?.replace("/",""):void 0}},ok={name:"subdomain",lookup(a){let{lookupFromSubdomainIndex:o}=a;const t=typeof o=="number"?o+1:1,f=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(f)return f[t]}};let av=!1;try{document.cookie,av=!0}catch{}const iv=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];av||iv.splice(1,1);const lk=()=>({order:iv,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:a=>a});class ov{constructor(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(o,t)}init(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=o,this.options=QN(t,this.options||{},lk()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=h=>h.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=f,this.addDetector(JN),this.addDetector(ek),this.addDetector(rk),this.addDetector(sk),this.addDetector(nk),this.addDetector(ak),this.addDetector(ik),this.addDetector(ok),this.addDetector(tk)}addDetector(o){return this.detectors[o.name]=o,this}detect(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return o.forEach(f=>{if(this.detectors[f]){let h=this.detectors[f].lookup(this.options);h&&typeof h=="string"&&(h=[h]),h&&(t=t.concat(h))}}),t=t.filter(f=>f!=null&&!ZN(f)).map(f=>this.options.convertDetectedLanguage(f)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(o)>-1||t.forEach(f=>{this.detectors[f]&&this.detectors[f].cacheUserLanguage(o,this.options)}))}}ov.type="languageDetector";const ck={sort:{label:"Sralama",updatedDesc:"Gncellenme (yeniden eskiye)",updatedAsc:"Gncellenme (eskiden yeniye)",createdDesc:"Oluturulma (yeniden eskiye)",createdAsc:"Oluturulma (eskiden yeniye)",nameAsc:"sim (AZ)",nameDesc:"sim (ZA)",titleAsc:"Balk (AZ)",titleDesc:"Balk (ZA)"},name:"comptario",subtitle:"Muhasebe Sistemi"},dk={fields:{name:"Ad",email:"E-posta",phone:"Telefon",company:"irket",account:"Hesap",status:"Durum",contact:"Kii",title:"Balk",type:"Tip",assignee:"Atanan",dueAt:"Tarih / Vade",completed:"Tamamland",actions:"lemler"},confirmDelete:{title:"Silme Onay",message:'"{{name}}" kayd silinsin mi?'},validation:{nameRequired:"Ad zorunlu",titleRequired:"Balk zorunlu"},dashboard:{subtitle:"Pipeline ve aktiviteler iin zet grnm."},pipeline:{title:"Sat Sreci",defaultName:"Varsaylan Pipeline",loading:"Pipeline ykleniyor",visibilityOwnerAndTeam:"Grnrlk: owner + takm",addOpportunity:"Frsat Ekle",createTitle:"Frsat Olutur",selectPlaceholder:"Seiniz",saving:"Kaydediliyor",opportunityCount:"{{count}} frsat",empty:"Bo",noMembers:"yeler bulunamad",ownerAutoInTeam:"Not: Owner otomatik olarak takmdadr.",fields:{opportunityName:"Frsat Ad",account:"Hesap",amount:"Tutar",currency:"Para Birimi",expectedCloseDate:"Tahmini Kapan",stage:"Aama",team:"Takm"},validation:{nameRequired:"Frsat ad zorunlu",accountRequired:"Hesap semelisiniz",amountInvalid:"Tutar geersiz"},stages:{lead:"Lead",qualified:"Qualified",proposal:"Proposal",negotiation:"Negotiation",won:"Won",lost:"Lost"}},opportunities:{title:"Frsatlar",subtitle:"Arama ve filtrelerle frsatlar listeleyin.",searchPlaceholder:"Frsat ara...",empty:"Henz frsat yok.",filters:{search:"Arama",account:"Hesap",status:"Durum",stage:"Aama",allAccounts:"Tm hesaplar",allStages:"Tm aamalar"},status:{all:"Tm",open:"Ak",won:"Kazanld",lost:"Kaybedildi"},actions:{open:"A"}},leads:{title:"Potansiyeller",subtitle:"Potansiyel kaytlarn listeleyin ve ynetin.",empty:"Henz lead yok.",modal:{createTitle:"Lead Ekle",editTitle:"Lead Dzenle"}},contacts:{title:"Kiiler",subtitle:"Kii kaytlarn listeleyin ve ynetin.",empty:"Henz kii yok.",modal:{createTitle:"Kii Ekle",editTitle:"Kii Dzenle"}},activities:{title:"Aktiviteler",subtitle:"Arama, e-posta ve grevleri takip edin.",subtitleForDeal:'"{{dealName}}" iin aktiviteler',subtitleForAccount:'"{{accountName}}" iin aktiviteler',subtitleForContact:'"{{contactName}}" iin aktiviteler',empty:"Henz aktivite yok.",dueAtPlaceholder:"rn: 2025-12-15 veya 15.12.2025",filters:{all:"Tm",open:"Ak",completed:"Tamamland"},modal:{createTitle:"Aktivite Ekle",editTitle:"Aktivite Dzenle"}},tasks:{title:"Grevler",subtitleForDeal:'"{{dealName}}" iin grevler',subtitleForAccount:'"{{accountName}}" iin grevler',empty:"Henz grev yok.",dueAtPlaceholder:"rn: 2025-12-15 veya 15.12.2025",unassigned:"Atanmam",filters:{all:"Tm",open:"Ak",completed:"Tamamland"},modal:{createTitle:"Grev Ekle",editTitle:"Grev Dzenle"}},dealDetail:{title:"Frsat detaylar",backToPipeline:"Pipeline'a dn",notFound:"Frsat bulunamad."},errors:{boardFetch:"CRM verisi alnamad"}},uk={blocks:{actions:"Aksiyonlar",receivables:"Alacaklar",criticalStock:"Kritik Stok",salesFlow:"Sat Ak",openQuotes:"Ak Teklifler",awaitingInvoiceSales:"Faturalanmay Bekleyen",crmFlow:"CRM Ak",latestActivities:"Son Aktiviteler"},today:"Bugn",thisWeek:"Bu Hafta",pending:"Bekleyen",overdue:"Gecikmi",criticalProducts:"Kritik rnler",todayOrders:"Bugn",weekOrders:"Bu Hafta",openQuotesCount:"Ak Teklif",awaitingInvoiceCount:"Fatura Bekleyen",loading:"Ykleniyor",latestActivitiesPlaceholder:"Henz bir aktivite yok.",crm:{openDeals:"Ak frsatlar",expectedAmount:"Beklenen tutar",noStageData:"Henz aama verisi yok.",unknownStage:"Bilinmeyen aama"}},mk={thisMonth:"Bu Ay",lastMonth:"Geen Ay",thisYear:"Bu Yl",addedThisMonth:"Bu Ay Eklenenler",withEmail:"E-posta var",withPhone:"Telefon var",withCompany:"irketi olanlar"},hk=JSON.parse(`{"nav.features":"zellikler","nav.pricing":"Fiyatlar","nav.faq":"SSS","nav.contact":"letiim","cta.try":"cretsiz Deneyin","cta.signin":"Giri Yapn","cta.watchDemo":"Demo zleyin","hero.title":"Fatura, gider ve tekliflerinizi tek yerden ynetin.","hero.sub":"Fatura, gider ve tekliflerinizi tek ve basit bir alma alannda ynetin. oklu para birimi (EUR, USD, TRY) destei, kategori bazl vergi takibi ve PDF fatura/teklif oluturma ile n muhasebenizi dzenli tutun. Paylalabilir teklif linkleri sayesinde hesaplarnz teklifleri evrimii inceleyip tek tkla kabul veya reddedebilir.","features.title":"n muhasebe iin ihtiyacnz olan her ey","features.inv.title":"Faturalandrma","features.inv.desc":"Numaralandrma, hesaplar ve PDF da aktarma.","features.exp.title":"Giderler","features.exp.desc":"Dosya ykleme ve kategori bazl KDV (r. %20 FR, %18 TR).","features.vat.title":"KDV ve Vergi zetleri","features.vat.desc":"Girdi/kt KDV vurgular ile net dnem raporlar.","features.fx.title":"oklu Para Birimi","features.fx.desc":"Sistem para birimi seenekleri: USD, EUR, TRY","value.title":"Serbest alanlardan KOB'lere kadar leklenir","security.title":"Gvenlik ve Uyumluluk","security.items":"AB barndrma (placeholder), aktarm ve dinlenimde ifreleme, otomatik yedeklemeler.","testimonials.title":"Kullanclarmz ne diyor","pricing.title":"Basit fiyatlandrma","pricing.starter":"Balang","pricing.pro":"Pro","pricing.business":"letme","pricing.price.free":"0/ay","pricing.price.pro":"29/ay","pricing.price.biz":"59/ay","pricing.annualLine.free":"","pricing.annualLine.pro":"Yllk pein: 290/yl (2 ay cretsiz)","pricing.annualLine.biz":"Yllk pein: 590/yl (2 ay cretsiz)","pricing.cta":"imdi Balayn","pricing.ctaStarter":"imdi Balayn","pricing.ctaPro":"imdi Proya Gein","pricing.ctaBusiness":"letme Plann Sein","pricing.ctaContact":"Bize ulan","pricing":{"planNames":{"starter":"Balang","pro":"Pro","business":"letme"}},"faq.title":"Sk sorulan sorular","faq.q1":"cretsiz olarak balayabilir miyim?","faq.a1":"Evet, Balang plan snrl fatura dzenlemenizi cretsiz salar.","faq.q2":"KDV destei var m?","faq.a2":"Evet, kategori bazl KDV ve basit zetlerle.","faq.q3":"Teklif destei var m?","faq.a3":"Evet. Teklif hazrlayabilir, link veya PDF ile gnderebilirsiniz.","faq.q4":"Birden fazla para birimini destekliyor musunuz?","faq.a4":"Evet, sistem para birimini EUR, USD veya TRY olarak kullanabilirsiniz.","faq.q5":"Nasl iptal edebilirim?","faq.a5":"Fatura ayarlarndan istediiniz zaman iptal edebilirsiniz.","faq.q6":"Verilerim nerede barndrlyor?","faq.a6":"AB'de (placeholder), ifreleme ve dzenli yedeklemelerle.","finalCta.title":"n muhasebeyi basit hale getirin.","finalCta.cta":"cretsiz Deneyin","seo.title":"Comptario  n Muhasebe Yazlm","seo.description":"Comptario fatura, gider ve KDV'yi oklu para birimi destei ve PDF fatura oluturma ile basit, gvenli bir alma alannda ynetmenize yardmc olur.","hero.badge":"Comptario  n Muhasebe Yazlm","hero.features.pdf":"PDF Fatura ve Teklif Oluturma","hero.features.currency":"oklu Para Birimi (EUR / USD / TRY)","hero.features.vat":"KDV / Vergi Ynetimi","hero.mockup.revenue":"Aylk Gelir","hero.mockup.expenses":"Aylk Giderler","hero.mockup.vat":"denecek KDV","hero.mockup.rate":"Kur","features.subtitle":"Modern iletmeler iin tasarlanm kapsaml ara setimizi kullanarak n muhasebenizi gvenle ynetin.","value.subtitle":"Yeni balyor olun veya kkl bir iletme yrtyor olun, Comptario ihtiyalarnza uyum salar.","value.freelancers.title":"Serbest alanlar in","value.freelancers.desc":"inizi organize tutmak iin basit faturalandrma ve gider takibi","value.freelancers.basic":"Temel faturalandrma","value.freelancers.expense":"Gider ynetimi","value.freelancers.tax":"Vergi zetleri","value.small.title":"Kk letmeler in","value.small.desc":"inizle birlikte byyen kapsaml n muhasebe aralar","value.small.currency":"oklu para birimi destei","value.small.customer":"Hesap ynetimi","value.small.reporting":"Gelimi raporlama","value.growing.title":"Byyen irketler in","value.growing.desc":"Genileyen operasyonlarnza uyum salayan leklenebilir zmler","value.growing.team":"Takm ibirlii","value.growing.api":"Link ile teklif gnderme","value.growing.support":"Esnek filtreleme seenekleri","value.cta.title":"n muhasebenizi dzenlemeye hazr msnz?","value.cta.subtitle":"Finanslarn verimli bir ekilde ynetmek iin Comptario'ya gvenen binlerce iletmeye katln.","value.cta.trial":"cretsiz Deneme Balat","value.cta.demo":"Demo Planla","value.stats.users":"Aktif Kullanc","value.stats.invoices":"Oluturulan Fatura","value.stats.uptime":"alma Sresi","security.badge":"Kurumsal Dzey Gvenlik","finalCta.subtitle":"n muhasebeliini Comptario ile dzenlemi binlerce iletmeye katln. Bugn cretsiz denemenizi balatn  kredi kart gerekmez.","finalCta.trial":"30 gn cretsiz deneme","finalCta.noSetup":"Kurulum creti yok","finalCta.cancel":"stediiniz zaman iptal edin","finalCta.stats.countries":"Hizmet Verilen lke","security.features.hosting.title":"AB Veri Barndrma","security.features.hosting.desc":"Verileriniz GDPR uyumlu gvenli AB veri merkezlerinde barndrlr","security.features.encryption.title":"Utan Uca ifreleme","security.features.encryption.desc":"Tm veriler endstri standard protokoller kullanlarak aktarm ve dinlenimde ifrelenir","security.features.backups.title":"Otomatik Yedeklemeler","security.features.backups.desc":"Gnlk otomatik yedeklemeler verilerinizin her zaman gvende ve kurtarlabilir olmasn salar","security.features.gdpr.title":"GDPR Uyumlu","security.features.gdpr.desc":"Avrupa veri koruma dzenlemeleriyle tam uyumluluk","security.features.monitoring.title":"7/24 zleme","security.features.monitoring.desc":"Srekli gvenlik izleme ve tehdit tespiti","security.features.uptime.title":"99.9% alma Sresi","security.features.uptime.desc":"Garantili alma sresi SLA's ile gvenilir altyap","security.trusted.title":"Avrupa genelinde iletmelerin gvendii","security.trusted.gdpr":"Uyumlu","security.trusted.iso":"Sertifikal","security.trusted.soc":"Tip II","security.trusted.ssl":"ifrelenmi","security.trusted.desc":"Finansal verileriniz bankalar ve finansal kurumlar tarafndan kullanlan ayn gvenlik standartlaryla korunur. Verilerinizi asla nc taraflarla paylamayz ve bilgileriniz zerinde tam kontrole sahip olursunuz.","testimonials.subtitle":"Sadece bizim szmze gvenmeyin. Kullanclarmzn Comptario deneyimleri hakknda sylediklerini grn.","testimonials.sarah.content":"Comptario faturalandrma srecimi tamamen basitletirdi. Artk dakikalar iinde profesyonel faturalar oluturabiliyor ve giderlerimi zahmetsizce takip edebiliyorum.","testimonials.sarah.role":"Serbest Tasarmc","testimonials.sarah.company":"Design Studio Pro","testimonials.marcus.content":"oklu para birimi zellii uluslararas i ortaklarmz iin hayat kurtarc. KDV hesaplamalar otomatik ve doru, saatlerce manuel almay kaydediyor.","testimonials.marcus.role":"CEO","testimonials.marcus.company":"Tech Solutions GmbH","testimonials.elena.content":"Kk bir iletme olarak basit ama gl bir eye ihtiyacmz vard. Comptario bize kurumsal yazlmn karmakl olmadan ihtiyacmz olan her eyi veriyor.","testimonials.elena.role":"Kk letme Sahibi","testimonials.elena.company":"Yerel Frn","testimonials.stats.rating":"Ortalama Deerlendirme","testimonials.stats.customers":"Mutlu Hesap","testimonials.stats.countries":"lke","pricing.subtitle":" ihtiyalarnza uygun plan sein. cretsiz balayn ve bydke ykseltin.","faq.support.title":"Hala sorularnz m var?","faq.support.desc":"Destek ekibimiz Comptario'dan en iyi ekilde yararlanmanz iin burada size yardmc olmak iin.","faq.support.contact":"Destek letiim","faq.support.demo":"Demo Planla","pricing.popular":"En Popler","pricing.plans.starter.desc":"Serbest alanlar ve kk projeler iin ideal","pricing.plans.pro.desc":"Byyen iletmeler iin ideal","pricing.plans.business.desc":"Ekipli alan kkl irketler iin","pricing.features.users1":"1 kullanc dahildir","pricing.features.users3":"3 kullanc dahildir","pricing.features.users10":"10 kullanc dahildir","pricing.features.usersUnlimited":"Snrsz kullanc","pricing.features.invoices5":"Ayda en fazla 5 fatura","pricing.features.expenses5":"Ayda en fazla 5 gider kayd","pricing.features.bank1":"1 banka hesab","pricing.features.bankUnlimited":"Snrsz banka hesab","pricing.features.customerSupplier1":"1 hesap ve 1 tedariki","pricing.features.customerSupplierUnlimited":"Snrsz hesap ve tedariki kayd","pricing.features.unlimitedInvoicesExpenses":"Snrsz fatura ve gider kayd","pricing.features.vat":"Kategori bazl KDV takibi","pricing.features.pdf":"PDF fatura ve teklif oluturma","pricing.features.quoteTemplate1":"1 teklif ablonu","pricing.features.quoteTemplatesUnlimited":"Snrsz teklif ablonu","pricing.features.saveListViews":"Kaytl liste grnmleri (filtrelerinizi kaydedin)","pricing.features.emailSupport":"E-posta destei","pricing.features.quotesBasic":"Teklif oluturma ve paylalabilir link","pricing.features.quotesAdvanced":"Teklif: grntlendi/kabul/red, PDF","pricing.features.multiCurrency":"oklu para birimi (TRY/EUR/USD/GBP)","pricing.features.products":"rn ve stok ynetimi","pricing.features.reports":"Gelimi raporlar ve ayrntl analizler","pricing.features.prioritySupport":"ncelikli destek","pricing.features.everythingPro":"Pro planndaki tm zellikler","pricing.features.teamCollaboration":"Takm ibirlii (ok kullanc)","pricing.features.dedicatedSupport":"ncelikli destek","pricing.features.noCredit":"Kredi kart gerekmez  birka dakika iinde hesabn a.","pricing.notes.vatAndCurrency":"Fiyatlara KDV uygulanmaz.","pricing.notes.cancelAnytime":"stediiniz zaman iptal edebilirsiniz.","pricing.pro.extraUser":"+ her ek kullanc 5/ay","pricing.trust":"Freelancer, ajans ve KOB'ler tarafndan gvenilir.","pricing.questions":"Fiyatlandrma hakknda sorularnz m var?","pricing.checkFaq":"SSS'imize bakn","pricing.or":"veya","pricing.contactSupport":"destek ile iletiime gein","pricing.guarantee":"Tm cretli planlarda 30 gnlk para iade garantisi","faq.subtitle":"Comptario hakknda bilmeniz gereken her ey. Aradnz cevab bulamyor musunuz? Bizimle iletiime gemekten ekinmeyin.","faq.contactUs":"bize ulan","footer.product":"RN","footer.company":"RKET","footer.support":"DESTEK","footer.legal":"HUKUK","footer.features":"zellikler","footer.pricing":"Fiyatlar","footer.security":"Gvenlik","footer.api":"API","footer.about":"Hakknda","footer.blog":"Blog","footer.careers":"Kariyer","footer.press":"Basn","footer.helpCenter":"Yardm Merkezi","footer.contactUs":"letiim","footer.status":"Durum","footer.community":"Topluluk","footer.privacy":"Gizlilik Politikas","footer.terms":"Hizmet artlar","footer.gdpr":"GDPR","footer.cookies":"erez Politikas","footer.imprint":"Knye","footer.description":"Modern iletmeler iin basit, gvenli n muhasebe yazlm. Faturalar, giderleri ve KDV'yi gvenle ynetin.","footer.stayUpdated":"Gncel kaln","footer.updatesDesc":"Yeni zellikler ve en iyi uygulamalar hakknda gncellemeler aln.","footer.email":"support@comptario.com","footer.languages":"4 dilde mevcut","footer.gdprCompliant":"GDPR Uyumlu","footer.emailPlaceholder":"E-posta adresinizi girin","footer.subscribe":"Abone Ol","footer.copyright":" {{year}} Comptario. Tm haklar sakldr.","footer.madeWith":"Avrupa'da  ile yapld"}`),fk={terms:"Hizmet artlar",privacy:"Gizlilik Politikas",cookies:"erez Politikas"},pk={welcomeTitle:"Ho Geldiniz",welcomeSubtitle:"Devam etmek iin hesabnza giri yapn",validUntil:"Geerlilik Tarihi",emailPlaceholder:"ad@ornek.com",password:"ifre",version:"v{{n}}",passwordPlaceholder:"",rememberMe:"Beni hatrla",forgotPassword:"ifremi unuttum",forgotPasswordHelp:"E-postanz girin, sfrlama balants gnderelim.",resetEmailSent:"Eer bu e-posta kaytlysa sfrlama balants gnderildi.",emailAddress:"E-posta Adresi",sendResetLink:"Balant Gnder",resendIn:"Tekrar gndermek iin bekleyin: {{seconds}}s",resetPassword:"ifre Sfrla",resetPasswordHelp:"Yeni ifrenizi belirleyin.",newPassword:"Yeni ifre",confirmPassword:"ifreyi Dorula",passwordTooShort:"ifre en az 8 karakter olmal",passwordTooWeak:"Ltfen daha gl bir ifre belirleyin",passwordMismatch:"ifreler elemiyor",passwordResetSuccess:"ifreniz gncellendi",updatePassword:"ifreyi Gncelle",signIn:"Giri Yap",demoAccount:"Demo Hesap:",email:"E-posta",resendEmail:"E-postay yeniden gnder",revise:"Revize Et",adminLogin:"Ynetici Girii",noAccount:"Hesabnz yok mu?",createFreeAccount:"cretsiz hesap oluturun",registerTitle:"Hesap Olutur",registerSubtitle:"cretsiz hesabnz oluturun ve hemen balayn",fullName:"Ad Soyad",fullNamePlaceholder:"Adnz ve soyadnz girin",companyName:"irket Ad",companyPlaceholder:"irket adnz (opsiyonel)",phone:"Telefon",phonePlaceholder:"(opsiyonel)",passwordHint:"En az 6 karakter",passwordConfirm:"ifre Onay",passwordConfirmPlaceholder:"ifrenizi tekrar girin",termsText:{prefix:"unlar kabul ederim: ",suffix:""},and:" ve ",dataProcessing:"Veri leme Szlemesi",captchaHint:"Birden fazla baarsz giri denemesi algland - ltfen insan dorulamasn tamamlayn.",captchaRequired:"Ltfen insan dorulamasn tamamlayn.",captchaPrompt:"Devam etmeden nce insan dorulamasn tamamlayn.",captchaVerificationFailed:"nsan dorulamas dorulanamad. Ltfen tekrar deneyin.",verifyRequiredTitle:"E-posta dorulamas gerekiyor",verifyRequiredBody:"{{email}} adresine dorulama balants gnderdik. Balantya tklayana kadar hesap tamamen kilitlidir.",verifyRequiredHint:"Dorulama tamamlanmadan hibir mali ilem gerekletiremezsiniz.",verifyRequiredAction:"Dorulama Durumunu A",verifyRequiredLogout:"k Yap",verifyYourEmail:"E-postanz dorulayn",verifySentTo:"Dorulama balants e-posta adresinize gnderildi:",verifySent:"E-posta adresinize dorulama balants gnderdik.",resend:"Tekrar gnder",resendCooldown:"Gvenlik iin 60 saniye bekleme uygulanr",securityVerificationRequired:"Gvenlik dorulamas gerekli. Ltfen dorulamay tamamlayn.",emailNotVerified:"E-posta henz dorulanmad. Ltfen devam etmeden nce e-postanz dorulayn.",verificationEmailSent:"Dorulama e-postas gnderildi. Ltfen gelen kutunuzu kontrol edin.",resendVerification:"Dorulama e-postasn tekrar gnder",registerCta:"Hesap Olutur",alreadyHaveAccount:"Zaten hesabnz var m?",goToLogin:"Giri yapn"},gk={itemsPerPage:"Sayfa bana",previous:"nceki",next:"Sonraki",range:"{{start}}-{{end}} / {{total}}"},xk={title:"Mali Dnemler",subtitle:"Mali dnem ayarlarnz ynetin",newPeriod:"Yeni Dnem",search:"Dnem ara...",periodsRegistered:"dnem kaytl",noPeriods:"Henz mali dnem yok",noPeriodsFound:"Mali dnem bulunamad",noPeriodsDesc:"lk mali dneminizi oluturarak balayn.",noPeriodsFoundDesc:"Arama kriterlerinizle eleen mali dnem yok.",createFirstPeriod:"lk Mali Dnem Olutur",periodName:"Dnem Ad",startDate:"Balang Tarihi",endDate:"Biti Tarihi",status:"Durum",actions:"lemler",view:"Grntle",edit:"Dzenle",lock:"Kilitle",unlock:"Kilit A",delete:"Sil",viewPeriod:"Mali dnemi grntle",editPeriod:"Mali Dnemi Dzenle",addPeriod:"Mali Dnem Ekle",enterPeriodInfo:"Mali dnem bilgilerini girin",periodNamePlaceholder:"rn: 2024 Yl",periodDuration:"dnem sresi",days:"gn",locked:"Kilitli",active:"Aktif",planned:"Planl",statusLabels:{active:"Aktif",locked:"Kilitli",planned:"Planl"},lockPeriod:"Mali dnemi kilitle",unlockPeriod:"Mali dnem kilidini a",lockConfirm:"Bu mali dnemi kilitlemek istediinizden emin misiniz? Kilitlenmi dnemler dzenlenemez.",unlockConfirm:"Bu mali dnemin kilidini amak istediinizden emin misiniz?",deleteConfirm:"Bu mali dnemi silmek istediinizden emin misiniz?",validation:{nameRequired:"Dnem ad gereklidir",startDateRequired:"Balang tarihi gereklidir",endDateRequired:"Biti tarihi gereklidir",endDateAfterStart:"Biti tarihi balang tarihinden sonra olmaldr",periodOverlap:"Bu tarihler mevcut bir dnemle akyor",minimumDuration:"Mali dnem en az 1 gn olmaldr"},errors:{createFailed:"Mali dnem oluturulamad",updateFailed:"Mali dnem gncellenemedi",deleteFailed:"Mali dnem silinemedi",lockFailed:"Mali dnem kilitlenemedi",unlockFailed:"Mali dnem kilidi alamad",loadFailed:"Mali dnemler yklenemedi",periodLocked:"Bu mali dnem kilitli ve deitirilemez",periodNotFound:"Mali dnem bulunamad",operationNotAllowed:"Bu ilem iin mali dnem kilitli"},success:{created:"Mali dnem baaryla oluturuldu",updated:"Mali dnem baaryla gncellendi",deleted:"Mali dnem baaryla silindi",locked:"Mali dnem baaryla kilitlendi",unlocked:"Mali dnem kilidi baaryla ald"},widget:{title:"Mali Dnemler",activePeriod:"Aktif Dnem",totalPeriods:"Toplam Dnem",lockedPeriods:"Kilitli Dnem",daysRemaining:"Kalan Gn",noActivePeriod:"Aktif dnem yok",periodsOverlapping:"akan dnemler var",allPeriodsLocked:"Tm dnemler kilitli",modal:{newTitle:"Yeni Tedariki Ekle",editTitle:"Tedarikiyi Dzenle",subtitle:"Tedariki bilgilerini girin",nameLabel:"Tedariki Ad",companyLabel:"irket Ad",emailLabel:"E-posta",phoneLabel:"Telefon",categoryLabel:"Kategori",taxNumberLabel:"Vergi Numaras",addressLabel:"Adres",namePlaceholder:"ABC Tedarik Ltd.",companyPlaceholder:"ABC Tedarik Ltd. ti.",emailPlaceholder:"info@abctedarik.com",phonePlaceholder:"+90 555 123 45 67",taxNumberPlaceholder:"1234567890",addressPlaceholder:"Tam adres bilgisi..."},createActivePeriod:"Aktif dnem oluturun",managePeriods:"Dnemleri Ynet",warnings:{overlapping:"Baz mali dnemler akyor",noActive:"u anda aktif mali dnem yok",allLocked:"Tm mali dnemler kilitli"}},filters:{showVoided:"ptal edilenleri gster",hideVoided:"ptal edilenleri gizle",voidedRecords:"iptal edilmi kayt"}},yk={back:"Geri",save:"Kaydet",cancel:"ptal",confirm:"Onay",delete:"Sil",edit:"Dzenle",view:"Grntle",update:"Gncelle",add:"Ekle",search:"Ara",noResults:"Sonu bulunamad",close:"Kapat",backToHome:"Anasayfaya Dn",yes:"Evet",no:"Hayr",loading:"Ykleniyor...",error:"Hata",success:"Baarl",warning:"Uyar",ok:"Tamam",periodLockedError:"Bu kayt kilitli mali dnemde yer ald iin silinemez",monthlyIncomeExpense:"Aylk Gelir/Gider",last6MonthsPerformance:"Son 6 ay performans (en yeni  en eski)",allCategories:"Tm kategoriler",dateRanges:{thisMonth:"Bu ay",last30Days:"Son 30 gn",thisYear:"Bu yl"},filters:{status:"Durum",filterByStatus:"Duruma gre filtrele"},actions:{clear:"Temizle",view:"Grntle",copyLink:"Balanty kopyala",downloadPDF:"PDF indir"},exportCSV:"CSVe aktar","dateRanges.thisMonth":"Bu ay","dateRanges.last30Days":"Son 30 gn","dateRanges.thisYear":"Bu yl","common.total":"Toplam","common.exportCSV":"CSVe aktar","filters.status":"Durum","filters.filterByStatus":"Duruma gre filtrele","actions.clear":"Temizle","actions.view":"Grntle","actions.copyLink":"Balanty kopyala","actions.downloadPDF":"PDF indir",allStock:"Tm stoklar",newest:"En yeni",income:"Gelir",expense:"Gider",hideChart:"Grafii Gizle",showChart:"Grafii Gster",chartHidden:"Grafik gizlendi",incomeLabel:"Gelir",expenseLabel:"Gider",description:"Aklama",dueDate:"Vade Tarihi",startDate:"Balang Tarihi",endDate:"Biti Tarihi",allStatuses:"Tm Durumlar",allAccounts:"Tm Hesaplar",cash:"Nakit",card:"Kart",transfer:"Transfer",check:"ek",email:"E-posta",quantity:"Miktar",statusLabel:"Durum",status:{pending:"Beklemede",approved:"Onayland",paid:"dendi",rejected:"Reddedildi",sent:"Gnderildi",draft:"Taslak",overdue:"Vadesi Geti",created:"Oluturuldu",invoiced:"Faturaland",refunded:"ade Edildi",accepted:"Kabul Edildi",declined:"Reddedildi",viewed:"Grntlendi",expired:"Sresi Doldu",completed:"Tamamland"},notes:"Notlar"},bk={TRY:"Trk Liras",USD:"Amerikan Dolar",EUR:"Euro",GBP:"ngiliz Sterlini"},vk={newInvoice:"Yeni Fatura",newSale:"Yeni Sat",search:"Ara...",areas:{label:"Alan seimi",summary:"zet",crm:"CRM",finance:"Finans"},language:"Dil",notifications:"Bildirimler",noNotifications:"Yeni bildirim yok.",settings:"Ayarlar",logout:"k Yap"},wk={title:"Ana Sayfa",overview:"Genel Bak",revenue:"Gelir",expense:"Gider",profit:"Kar",unpaidInvoices:"denmemi Faturalar",recentActivity:"Son Aktiviteler",totalRevenue:"Toplam Gelir",totalExpense:"Toplam Gider",pendingInvoices:"Bekleyen Faturalar",activeCustomers:"Aktif Hesaplar",vatToPay:"denecek KDV",vatToPaySubtitle:"Bu ay denen faturalar",quickActions:"Hzl lemler",recentTransactions:"Son lemler",quickAccess:"Hzl Eriim",lastTransactions:"Son {count} ileminiz",allGood:"Her ey yolunda!",noAlerts:"Bekleyen grev veya uyar yok.",viewAll:"Tmn Gster"},Nk={newInvoice:"Yeni Fatura",newInvoiceDesc:"Hesap faturas olutur",newExpense:"Yeni Gider",newExpenseDesc:"Gider kayd ekle",newSale:"Yeni Sat",newSaleDesc:"Sat ilemi kaydet",newQuote:"Yeni Teklif",newQuoteDesc:"Hesap iin teklif olutur",newCustomer:"Yeni Hesap",newCustomerDesc:"Hesap bilgisi ekle",newProduct:"Yeni rn",newProductDesc:"rn bilgisi ekle",customers:"Hesaplar",suppliers:"Tedarikiler",banks:"Banka Hesaplar",products:"rnler"},kk={invoice:"Fatura",expense:"Gider",sale:"Sat",paid:"dendi",unpaid:"denmedi",pending:"Bekliyor",actions:"lemler",transaction:"lem",customerDescription:"Hesap/Aklama",amount:"Tutar",status:"Durum",date:"Tarih",noTransactions:"Henz ilem yok"},jk={overdueInvoices:"Gecikmi Faturalar",overdueDesc:"Gecikmi fatura",dueSoon:"Yaknda Vadesi Dolan",dueSoonDesc:"7 gn iinde vadesi dolan",pendingExpenses:"Bekleyen Giderler",pendingExpensesDesc:"Onay bekleyen gider",allGood:"Her ey Yolunda!",noAlerts:"Bekleyen grev veya uyar yok.",attentionRequired:"Dikkat Gerekli"},Sk={short:{jan:"Oca",feb:"ub",mar:"Mar",apr:"Nis",may:"May",jun:"Haz",jul:"Tem",aug:"Au",sep:"Eyl",oct:"Eki",nov:"Kas",dec:"Ara"}},Ck={summary:"zet",dashboard:"Ana Sayfa",invoices:"Faturalar",expenses:"Giderler",customers:"Hesaplar",products:"rnler",suppliers:"Tedarikiler",banks:"Bankalar",sales:"Satlar",crm:"CRM",crmDashboard:"CRM zeti",crmPipeline:"Sat Sreci",crmOpportunities:"Frsatlar",crmLeads:"Potansiyeller",crmContacts:"Kiiler",crmActivities:"Aktiviteler",crmTasks:"Grevler",quotes:"Teklifler",reports:"Raporlar",accounting:"Muhasebe",chartOfAccounts:"Hesap Plan",archive:"Ariv",organization:"Organizasyon",settings:"Ayarlar",close:"Kapat"},Ak={title:"Teklifler",newQuote:"Yeni Teklif",comingSoon:"Teklifler modl iin temel sayfa hazr. Gelimi liste, durumlar ve PDF ablonlar srada.",placeholderDescription:"Teklif oluturma, gnderme, hesap tarafndan grntleme ve kabul/ret aklar bu sayfada yer alacaktr. imdilik ynlendirme ve men entegrasyonu tamamland.",search:"Teklif ara...",filterAll:"Tm Durumlar",viewModal:{details:"Teklif Detaylar"},validUntil:"Geerlilik Tarihi",expiresIn:"({{days}} gn iinde sona erer)",expiredOn:"({{date}} tarihinde sona erdi)",version:"v{{n}}",confirmAccept:"Teklifi kabul etmek istediinizden emin misiniz?",acceptedThanks:"Teekkrler, teklif kabul edildi.",confirmDecline:"Teklifi reddetmek istediinizden emin misiniz?",declinedInfo:"Teklif reddedildi.",duplicateConfirm:"Yinele ilemine devam edilsin mi?",reviseConfirm:"Bu teklifi revize etmek istiyor musunuz? Mevcut srm gemie tanacak ve yeni bir srm oluturulacak.",createConfirm:"Bu teklifi kaydetmek istediinizden emin misiniz?",saveConfirm:"Deiiklikleri kaydetmek istediinizden emin misiniz?",actions:{send:"Gnder",accept:"Kabul Et",decline:"Reddet",downloadPdf:"PDF ndir",copyLink:"Genel balanty kopyala",copyPublicLink:"Balanty Kopyala",copyPublicLinkSuccess:"Balant kopyaland.",resendEmail:"E-postay yeniden gnder",revise:"Revize Et",duplicate:"Yinele"},editModal:{title:"Teklifi Dzenle",subtitle:"Teklif bilgilerini gncelleyin",quoteNumber:"Teklif No"},table:{quote:"Teklif",customer:"Hesap",amount:"Tutar",status:"Durum",date:"Tarih",actions:"lemler"},noQuotes:"Henz teklif yok",noQuotesDesc:"lk teklifinizi oluturarak balayn.",noQuotesFound:"Teklif bulunamad",noQuotesFoundDesc:"Arama kriterlerinizle eleen teklif yok.",createFirstQuote:"lk Teklifi Olutur",view:"Grntle",edit:"Dzenle",delete:"Sil",statusLabels:{draft:"Taslak",sent:"Gnderildi",viewed:"Grntlendi",accepted:"Kabul Edildi",declined:"Reddedildi",expired:"Sresi Doldu"},createModal:{title:"Teklif Olutur",customer:"Hesap",customerPlaceholder:"Hesap ad girin",currency:"Para Birimi",date:"Dzenleme Tarihi",amount:"Tutar",create:"Olutur"},scopeOfWork:{title:"in Kapsam",placeholder:"Proje kapsam, teslimatlar, varsaymlar ve hariler...",note:"Bu ierik teklif PDFinde mevcut blmden sonra yeni bir sayfa olarak eklenecek ve genel linkte grnecek."},templates:{title:"Teklif ablonlar",manage:"ablonlar Ynet",manageTitle:"Teklif ablonlarn ynet",list:"ablonlar",new:"Yeni",newTemplate:"Yeni ablon",placeholderName:"ablon ad",apply:"Uygula",create:"ablon Olutur",selectPlaceholder:"ablon sein",freeHidden:"ablonlar Starter planda grnmez.",proLimit:"Pro planda en fazla 1 ablon kaydedebilirsiniz.",requirePlan:"Plan gerekli",manageUpgrade:"ablon ynetimi iin Pro veya Business planna gein.",setDefault:"Varsaylan",availableTokens:"Kullanlabilir alanlar (tkla ve ierie ekle):",defaultBodyHtml:"<h3>Teklif zeti</h3><p>Tarih: [quote.date]  Geerlilik: [quote.valid_until]</p><p>Sayn [client.name] ([client.company]), aada belirtilen kapsam iin teklifimizi bilgilerinize sunarz.</p><h4>Kapsam</h4><ul><li>Madde 1</li><li>Madde 2</li><li>Madde 3</li></ul><h4>Toplam</h4><p>Toplam: [quote.total] [quote.currency]</p><h4>letiim</h4><p>[org.name]  [org.email]  [org.phone]  [org.address]</p>"}},Tk={subscriptionUpdated:"Abonelik gncellendi.",payment:{successTitle:"deme Baarl",cancelledTitle:"deme ptal",cancelledMessage:"deme iptal edildi veya tamamlanamad."},addonAdded:"lave kullanclar eklendi.",portal:{cancelAtPeriodEnd:"Abonelik dnem sonunda iptal edilecek. ptal tarihi: {{date}}",activeApplied:"Abonelik aktif. Portal deiiklikleri uyguland.",synced:"Portal deiiklikleri senkronize edildi."},redirecting:"deme ekranna ynlendiriliyorsunuz",interval:{updated:"Plan dnemi gncellendi."},checkout:{failed:"deme oturumu oluturulamad."},cancelAtPeriodEnd:{confirm:"Abonelik dnem sonunda iptal edilecek. Onaylyor musunuz?"},cancel:{requestedShort:"ptal talebi alnd (dnem sonunda)."},resumeCancellation:{confirm:"ptal kaldrlacak ve aboneliiniz dnem sonunda yenilenmeye devam edecek. Onaylyor musunuz?",done:"ptal kaldrld. Abonelik aktif."}},Ek={thisMonth:"bu ay",all:"tm"},Dk={paid:"dendi",unpaid:"denmedi",pending:"Bekliyor",overdue:"Gecikmi",draft:"Taslak",sent:"Gnderildi",approved:"Onayland",rejected:"Reddedildi",cancelled:"ptal Edildi",completed:"Tamamland",active:"Aktif",inactive:"Pasif",viewed:"Grntlendi",accepted:"Kabul Edildi",declined:"Reddedildi",expired:"Sresi Doldu",invoiced:"Faturaland",created:"Oluturuldu",refunded:"ade Edildi"},_k={details:"Fatura Detaylar",downloadPdf:"PDF ndir",information:"Fatura Bilgileri",type:"Fatura Tr",productSale:"rn Sat",serviceSale:"Hizmet Sat",issueDate:"Dzenleme Tarihi",dueDate:"Vade Tarihi",customerInfo:"Hesap Bilgileri",itemsServices:"rnler/Hizmetler",generalSale:"Genel",description:"Aklama",quantity:"Miktar",unitPrice:"Birim Fiyat",total:"Toplam",subtotal:"Ara Toplam",vat:"KDV",grandTotal:"Genel Toplam",notes:"Notlar"},Pk={details:"Gider Detaylar",information:"Gider Bilgileri",number:"Gider No",date:"Gider Tarihi",category:"Kategori",supplier:"Tedariki",amount:"Tutar",receipt:"Fi",viewReceipt:"Fi Grntle"},Ik={history:"lem Gemii",transactions:"ilem bulundu",noHistory:"Henz lem Gemii Yok",noHistoryDesc:"henz fatura veya ilem kayd bulunmuyor.",tip:"pucu:",tipDesc:"Bu hesap iin yeni bir fatura oluturarak ilem gemiini balatabilirsiniz.",createInvoice:"Fatura Olutur",sale:"Sat",completed:"Tamamland",waiting:"Bekliyor",historyPageTitle:"Hesap Gemii",historySubtitle:"{{name}} iin tm gemi ilemler",historyColumns:{name:"lem Ad/No",date:"Tarih",status:"Durum",createdBy:"Oluturan",type:"Tr",description:"Aklama"}},Mk={expenseHistory:"Gider Gemii",expensesFound:"gider bulundu",noExpenseHistory:"Henz Gider Gemii Yok",noExpenseHistoryDesc:"henz gider kayd bulunmuyor.",tip:"pucu:",tipDesc:"Bu tedariki iin yeni bir gider oluturarak ilem gemiini balatabilirsiniz.",createExpense:"Gider Olutur",viewExpense:"Gider grntle"},Rk={title:"rnler",newProduct:"Yeni rn",search:"rn ara...",filterCategory:"Tm Kategoriler",name:"rn Ad",category:"Kategori",price:"Fiyat",stock:"Stok",sort:"Sralama",status:"Durum",actions:"lemler",noProducts:"Henz rn yok",addFirstProduct:"lk rnnz ekleyin",edit:"Dzenle",delete:"Sil",deleteConfirm:"Bu rn silmek istediinizden emin misiniz?",manageCategories:"Kategorileri Ynet",totalProducts:"Toplam rn",stockValue:"Stok Deeri",totalStock:"Toplam Stok",lowStock:"Dk Stok",activeProductsDesc:"Aktif olarak satlan rn says",totalStockCostDesc:"Tahmini toplam stok maliyeti",totalUnitsDesc:"Depodaki toplam adet",criticalLevelDesc:"Kritik seviyenin altndaki rnler",productCategories:"rn Kategorileri",archivedCategories:"Arivlenmi Kategoriler",showArchived:"Arivlenmileri gster",hideArchived:"Arivlenmileri gizle",activate:"Aktif Et",noArchivedCategories:"Arivlenmi kategori yok",addCategory:"Kategori ekle",categoriesCount:"kategori",allProducts:"Tm rnler",noCategories:"Henz kategori yok.",mainCategoriesTitle:"Ana Kategoriler",subCategories:"Alt Kategoriler",editCategory:"Dzenle",deleteCategory:"Sil",editCategoryTooltip:"Kategoriyi dzenle",mainCategoryEditTooltip:"Ana kategorilerin sadece KDV'si deitirilebilir",generalCategoryCannotDelete:"Genel kategorisi silinemez",mainCategoryCannotDelete:"Ana kategori silinemez",deleteCategoryConfirm:"Bu kategoriyi silmek istediinizden emin misiniz?",deleteCategoryWithProducts:"Bu kategoride {{count}} aktif rn var. nce rnleri baka kategoriye tayn.",cannotArchiveCategoryWithProducts:"Bu kategoride {{count}} rn var. Arivlemeden nce rnleri baka bir kategoriye tayn veya silin.",categoryCannotDeleteProtected:'"{category}" ana kategori olduu iin silinemez.',generalCategoryCannotDeleteAlert:"Genel kategorisi silinemez.",updatePrice:"Fiyat gncelle",assignCategory:"Kategori ata",archive:"Arivle",archiveConfirm:"Bu kategoriyi arivlemek istediinize emin misiniz?",noProductsYet:"Henz rn yok",costPrice:"Maliyet",unit:"Birim",productsCount:"rn",allStock:"Tm stok",lowStockFilter:"Dk stok",outOfStock:"Tkendi",overstock:"Fazla stok",newest:"En yeni",priceHighLow:"Fiyat (Yksek-Dk)",priceLowHigh:"Fiyat (Dk-Yksek)",stockHighLow:"Stok (Yksek-Dk)",stockLowHigh:"Stok (Dk-Yksek)",inStock:"Stokta",critical:"Kritik",depleted:"Tkendi",cost:"Maliyet",minStock:"Min. Stok",view:"Grntle",viewProduct:"rn grntle",mainCategories:{products:"rnler",services:"Hizmetler"},editProduct:"rn Dzenle",enterProductInfo:"rn bilgilerini doldurun ve stok durumunu gncelleyin",productServiceName:"rn/Hizmet Ad",selectFromList:"Listeden rn sein",productsFound:"rn bulundu",createCategoryFirst:"nce yeni bir kategori oluturmanz gerekiyor.",generalInfo:"GENEL BLGLER",priceAndStock:"FYAT VE STOK",notes:"NOTLAR",namePlaceholder:"rn/hizmet ad",unitPlaceholder:"Birim (rn: adet, kg, saat)",descriptionPlaceholder:"rn zellikleri, garanti bilgisi vb.",useCustomTax:"zel KDV oran kullan",customTaxNote:"Bu rn iin farkl bir KDV oran belirleyebilirsiniz. Bo braklrsa kategori KDV'si kullanlr.",categoryTax:"Kategori KDV",salePrice:"Sat fiyat",stockQuantity:"Stok adedi",criticalStock:"Kritik stok",customTaxRate:"zel KDV Oran",taxRatePlaceholder:"18.0",customTaxRateHelper:"Bu rn iin zel KDV oran. Kategori KDV'sini geersiz klar.",noCategoriesFound:"Kategori bulunamad",useCustomTaxRate:"zel KDV oran kullan",description:"Aklama",categoryModal:{titleNew:"Kategori Ekle",titleEdit:"Kategori Dzenle",subtitleNew:"Yeni rn kategorisini kaydedin.",subtitleEdit:"Kategori bilgilerini gncelleyin.",parentLabel:"Ana Kategori",parentHelper:"Bu kategori hangi ana kategoriye ait olacak?",nameLabel:"Kategori ad",namePlaceholder:"rn: Elektronik",taxLabel:"KDV Oran (%)",taxPlaceholder:"rn: 18",taxHelperChildOverrides:"Alt kategori KDV'si varsa ana kategori KDV'sini geersiz klar",taxHelperDefault:"Bu kategorideki rnler iin varsaylan KDV oran",nameRequired:"Kategori ad zorunludur",parentRequired:"Ana kategori seimi zorunludur",taxInvalid:"KDV oran 0-100 arasnda olmaldr",nameExists:"Bu kategori zaten mevcut"}},zk={title:"Hesap Plan",subtitle:"Muhasebe hesap plannz ynetin",newAccount:"Yeni Hesap",search:"Hesap kodu veya adyla ara...",code:"Kod",accountName:"Hesap Ad",type:"Tip",balance:"Bakiye",status:"Durum",actions:"lemler",accountsRegistered:"hesap kaytl",clickToEdit:"Dzenlemek iin hesap ad, kod veya bakiyeye tklayn",addAccountTip:"Yeni hesap eklemek iin yukardaki dmeyi kullann",active:"Aktif",passive:"Pasif",allSummed:"tm topland",accountTypes:{all:"Tm",asset:"Varlk",liability:"Ykmllk",equity:"zkaynaklar",revenue:"Gelir",expense:"Gider"},accountTypesPlural:{asset:"Varlklar",liability:"Ykmllkler",equity:"zkaynaklar",revenue:"Gelirler",expense:"Giderler"},statusLabels:{active:"Aktif",inactive:"Pasif"},tooltips:{editHint:"Dzenlemek iin hesap satrna tklayn"},accountNames:{100:"DNEN VARLIKLAR",101:"Kasa",102:"Bankalar",120:"Alclar",150:"DURAN VARLIKLAR",200:"KISA VADEL YKMLLKLER",201:"Satclar",300:"ZKAYNAKLAR",600:"GELRLER",601:"Sat Gelirleri",602:"Hizmet Gelirleri",700:"GDERLER",701:"Kira Giderleri",702:"Personel Giderleri",703:"Fatura Giderleri"},accountTypeLabels:{asset:"Varlk",liability:"Ykmllk",equity:"zkaynaklar",revenue:"Gelir",expense:"Gider"}},Lk={title:"Faturalar",newInvoice:"Yeni Fatura",deleteConfirm:"Bu faturay silmek istediinizden emin misiniz?",deleteSuccess:"Fatura silindi",search:"Fatura numaras veya hesap ara...",filterAll:"Tm Durumlar",invoicesRegistered:"fatura kaytl",inArchive:"arivde",noInvoices:"Henz fatura yok",noInvoicesFound:"Fatura bulunamad",showVoided:"ptal Edilenleri Gster",hideVoided:"ptal Edilenleri Gizle",noInvoicesDesc:"lk faturanz oluturarak balayn.",noInvoicesFoundDesc:"Arama kriterlerinizle eleen fatura yok.",createFirstInvoice:"lk Fatura Olutur",invoiceNumber:"Fatura",customer:"Hesap",date:"Tarih",amount:"Tutar",status:"Durum",actions:"lemler",view:"Grntle",edit:"Dzenle",download:"ndir",exportCsv:"CSV Da Aktar",delete:"Sil",viewInvoice:"Faturay grntle",editInvoice:"Faturay Dzenle",createInvoice:"Fatura Olutur",enterInvoiceInfo:"Hesap bilgilerini ve rn detaylarn girin",selectInvoiceType:"Fatura trn sein",newSale:"Yeni Sat",newSaleDescription:"Yeni bir sat kayd oluturup fatura kesin",newSaleNote:"Sat ve fatura otomatik olarak oluturulur",existingSale:"Mevcut Sat",existingSaleDescription:"Daha nce yaplm satlardan birine fatura kesin",existingSaleNote:"Sadece fatura bilgileri dzenlenebilir",returnInvoice:"ade Faturas",returnInvoiceDescription:"Daha nce kesilen bir fatura iin iade/iade faturas oluturun",returnInvoiceNote:"Mevcut faturadan seim yaparak iade oluturulur",invoiceNumberAutoGenerated:"Fatura numaras otomatik oluturulur",invoiceType:"Fatura Tr",productInvoice:"rn Faturas (Normal)",selectInvoiceToReturn:"-- ade edilecek faturay sein --",invoiceToReturn:"ade Edilecek Fatura (zorunlu)",returnInvoiceAutoLoad:" Seilen faturann rnleri otomatik olarak negatif miktarlarla yklenecektir.",issueDate:"Dzenleme Tarihi",dueDate:"Vade Tarihi",customerName:"Hesap Ad",customerSearchPlaceholder:"Hesap ara veya yeni hesap ad girin",productsAndServices:"rn ve Hizmetler",addLine:"Satr Ekle",description:"Aklama",quantity:"Miktar",unitPriceExclVAT:"Birim Fiyat (KDV Hari)",totalInclVAT:"Toplam (KDV Dahil)",notes:"Notlar",notesPlaceholder:"Sat ile ilgili ek notlar",autoGenerated:"Otomatik oluturulacak",statusCompleted:"Tamamland",statusPending:"Bekliyor",statusCancelled:"ptal",enterSaleInfo:"Sat bilgilerini girin",productServiceDescription:"rn veya hizmet aklamas",subtotalExclVAT:"Ara Toplam (KDV Hari)",vat:"KDV",discount:"skonto",grandTotalInclVAT:"Genel Toplam (KDV Dahil)",grandTotalExclVAT:"Genel Toplam (KDV Hari)",createInvoiceFromSale:"Sata Fatura Kes",completeInvoiceInfo:"Fatura bilgilerini tamamlayn",invoiceInfo:"Fatura Bilgileri",invoiceStatus:"Fatura Durumu",invoiceNotes:"Fatura Notlar",invoiceTotals:"Fatura Tutarlar",amountExclTax:"Tutar (KDV Hari)"},Ok={title:"Giderler",newExpense:"Yeni Gider",deleteConfirm:"Bu gideri silmek istediinizden emin misiniz?",deleteSuccess:"Gider silindi",deleteError:"Gider silinemedi",search:"Gider aklamas veya tedariki ara...",filterAll:"Tm Durumlar",expensesRegistered:"gider kaytl",noExpenses:"Henz gider yok",noExpensesFound:"Gider bulunamad",noExpensesDesc:"lk giderinizi kaydederek balayn.",noExpensesFoundDesc:"Arama kriterlerinizle eleen gider yok.",createFirstExpense:"lk Gider Olutur",description:"Aklama",supplier:"Tedariki",category:"Kategori",date:"Tarih",amount:"Tutar",status:"Durum",actions:"lemler",view:"Grntle",edit:"Dzenle",download:"ndir",exportCsv:"CSV Da Aktar",delete:"Sil",viewExpense:"Gideri grntle",enterExpenseDetails:"Gider bilgilerini girin",editExpense:"Gideri Dzenle",addExpense:"Gider Ekle",enterExpenseInfo:"Gider bilgilerini girin",expenseNumber:"Gider Numaras",expenseDate:"Gider Tarihi",paymentDate:"deme Tarihi",totalExpense:"Toplam Gider",receiptUrl:"Fi/Fatura URL'si",receiptUrlHelper:"Fi veya fatura grselinin/PDF'inin balantsn ekleyebilirsiniz",descriptionPlaceholder:"Gider aklamas...",supplierPlaceholder:"Tedariki ad yazn..."},Fk={descriptionRequired:"Ltfen aklama girin",amountRequired:"Ltfen geerli bir tutar girin",categoryRequired:"Ltfen kategori sein",dueDateRequired:"Ltfen vade tarihi sein",saleDateRequired:"Sat tarihi gereklidir",unitPriceRequired:"Birim fiyat sfrdan byk olmaldr",quantityRequired:"Miktar sfrdan byk olmaldr",customerNameRequired:"Hesap ad gereklidir",customerNotFound:"Hesap sistemde bulunamad. Ltfen listeden sein.",productNameRequired:"rn veya hizmet ad gereklidir",productNotFound:"rn sistemde bulunamad. Ltfen listeden sein.",skuRequired:"SKU zorunlu",validPriceRequired:"Geerli bir fiyat girin",validStockRequired:"Geerli stok adedi girin"},Bk={title:"Hesaplar",newCustomer:"Yeni Hesap",search:"Hesap ara...",customersRegistered:"hesap kaytl",noCustomers:"Henz hesap yok",noCustomersFound:"Hesap bulunamad",noCustomersDesc:"lk hesabnz ekleyerek balayn.",noCustomersFoundDesc:"Arama kriterlerinizle eleen hesap yok.",createFirstCustomer:"lk Hesab Ekle",name:"Hesap Ad",email:"E-posta",phone:"Telefon",totalInvoices:"Toplam Fatura",totalAmount:"Toplam Tutar",actions:"lemler",importCSV:"CSV/Excel e Aktar",downloadTemplate:"ablon ndir",editCustomer:"Hesab Dzenle",addCustomer:"Hesap Ekle",selectFromList:"Listeden hesap sein",customersFound:"hesap bulundu",enterCustomerInfo:"Hesap bilgilerini girin",address:"Adres",emailPlaceholder:"musteri@example.com",addressPlaceholder:"Tam adres bilgisi...",taxNumber:"Vergi Numaras",company:"irket Ad",namePlaceholder:"Ahmet Ylmaz",companyPlaceholder:"ABC Teknoloji Ltd.",duplicate:{title:"Ayn E-posta ile Kayt Var",message:"Bu e-posta ({{email}}) ile zaten bir hesap kaytl: {{name}}. Ltfen listeden mevcut kayd sein veya dzenleyin.",openExisting:"Mevcut hesab a"},import:{noDataFound:"Dosyada veri bulunamad.",noCustomersFound:"Dosyada aktarlacak hesap bulunamad.",success:"{{count}} hesap baaryla ie aktarld!",error:"e aktarma srasnda hata olutu."}},Uk={title:"Tedarikiler",newSupplier:"Yeni Tedariki",search:"Tedariki ara...",suppliersRegistered:"tedariki kaytl",noSuppliers:"Henz tedariki yok",noSuppliersFound:"Tedariki bulunamad",noSuppliersDesc:"lk tedarikinizi ekleyerek balayn.",noSuppliersFoundDesc:"Arama kriterlerinizle eleen tedariki yok.",createFirstSupplier:"lk Tedariki Ekle",name:"Ad",email:"E-posta",phone:"Telefon",totalExpenses:"Toplam Gider",totalAmount:"Toplam Tutar",actions:"lemler",modal:{newTitle:"Yeni Tedariki Ekle",editTitle:"Tedarikiyi Dzenle",subtitle:"Tedariki bilgilerini girin",nameLabel:"Tedariki Ad",companyLabel:"irket Ad",emailLabel:"E-posta",phoneLabel:"Telefon",categoryLabel:"Kategori",taxNumberLabel:"Vergi Numaras",addressLabel:"Adres",namePlaceholder:"ABC Tedarik Ltd.",companyPlaceholder:"ABC Tedarik Ltd. ti.",emailPlaceholder:"info@abctedarik.com",phonePlaceholder:"+90 555 123 45 67",taxNumberPlaceholder:"Vergi Numaras",addressPlaceholder:"Tam adres bilgisi..."}},Vk={title:"Banka Hesaplar",newAccount:"Yeni Hesap",search:"Banka ad, hesap ad veya numaras ara...",filterAll:"Tm Hesaplar",accountsRegistered:"hesap kaytl",totalBalance:"Toplam bakiye",noBanks:"Henz banka hesab yok",noBanksFound:"Hesap bulunamad",noBanksDesc:"lk banka hesabnz ekleyerek balayn.",noBanksFoundDesc:"Arama kriterlerinizle eleen hesap yok.",createFirstAccount:"lk Hesap Ekle",bankName:"Banka",accountName:"Hesap Ad",accountNumber:"Hesap No",balance:"Bakiye",status:"Durum",actions:"lemler",editAccount:"Hesab Dzenle",enterAccountInfo:"Banka hesap bilgilerini girin",selectBank:"Banka sein",accountNamePlaceholder:"irket Ad veya Kii Ad",accountType:"Hesap Tr",accountTypes:{checking:"Vadesiz Hesap",savings:"Vadeli Hesap",business:"Ticari Hesap"},ibanAutoFormat:"IBAN otomatik olarak formatlanacaktr",currentBalance:"Mevcut Bakiye",currency:"Para Birimi",accountActive:"Hesap aktif",addAccount:"Hesap Ekle",routingNumber:"Routing Numaras (ABA)",swiftBic:"SWIFT/BIC",branchCode:"ube Kodu",deleteConfirm:"Bu banka hesabn silmek istediinizden emin misiniz?"},qk={title:"Ayarlar",subtitle:"Sistem ve hesap ayarlarnz ynetin",save:"Kaydet",cancel:"ptal",profile:"Profil",company:"irket Bilgileri",system:"Sistem Ayarlar",security:"Gvenlik",data:"Veri Ynetimi",currency:"Para Birimi",language:"Dil",notifications:"Bildirimler",theme:"Tema",success:"Baarl",error:"Hata",saved:"Ayarlar kaydedildi",saveFailed:"Ayarlar kaydedilemedi",companyFields:{officialName:"Resmi irket Ad",brandName:"Fatura/Marka Ad",brandNameHelper:"Bu alan faturada/ekranda marka ad olarak kullanlabilir.",officialNameTooltip:"irket adn yalnzca irket sahibi veya ynetici gncelleyebilir",officialNameOwnerOnly:"Bu alan yalnzca irket sahibi tarafndan deitirilebilir."}},$k={twofa:{reminderTitle:"ki Aamal Dorulamay Etkinletirin",reminderDesc:"Hesabnz daha gl korumak iin 2FA'y etkinletirin.",modalTitle:"Hesabnz Gvenceye Aln",modalMessage:"ki Aamal Dorulama (2FA) hesap gvenliinizi nemli lde artrr. imdi etkinletirmek ister misiniz?",enableNow:"imdi Etkinletir",neverRemind:"Bir daha hatrlatma"}},Hk={common:{dataLoadError:"Veriler yklenirken hata olutu"},invoices:{updateSuccess:"Fatura gncellendi",updateError:"Fatura gncellenemedi",createPartialError:"Fatura oluturuldu, ancak sat kayd oluturulamad",createWithSaleSuccess:"Fatura ve sat oluturuldu",cancelSuccess:"Fatura iptal edildi",cancelError:"Fatura iptal edilemedi",restoreSuccess:"Fatura geri yklendi",restoreError:"Fatura geri yklenemedi",createSuccess:"Fatura baaryla oluturuldu"},customers:{updateSuccess:"Hesap gncellendi",createSuccess:"Hesap eklendi",deleteSuccess:"Hesap silindi",deleteError:"Hesap silinemedi"},suppliers:{updateSuccess:"Tedariki gncellendi",createSuccess:"Tedariki eklendi",deleteSuccess:"Tedariki silindi",deleteError:"Tedariki silinemedi"},sales:{customerNotSelected:"Hesap seilmedi! Ltfen geerli bir hesap sein.",insufficientStock:" Yetersiz stok! {{name}} - Mevcut: {{available}}, stenen: {{requested}}",createSuccess:"Sat kaydedildi",updateSuccess:"Sat gncellendi",localSaved:"Sat yerel olarak kaydedildi (offline)",stockUpdateFailed:"Sat kaydedildi ancak stok gncellenemedi",deleteError:"Sat silinemedi",deleteSuccess:"Sat baaryla silindi",customerNotFound:"Hesap bulunamad! Ltfen nce hesap oluturun."},expenses:{updateSuccess:"Gider gncellendi",createSuccess:"Gider eklendi",cancelSuccess:"Gider iptal edildi",cancelError:"Gider iptal edilemedi",statusUpdateSuccess:"Gider durumu gncellendi",restoreSuccess:"Gider geri yklendi",restoreError:"Gider geri yklenemedi"},products:{updateSuccess:"rn gncellendi",createSuccess:"rn eklendi",deleteSuccess:"rn silindi",deleteError:"rn silinemedi",bulkRemoved:"{{count}} rn silindi",bulkNotFound:"Seilen rnler bulunamad",bulkArchived:"{{count}} rn arivlendi",bulkAlreadyArchived:"Seilen rnler zaten arivde",bulkPriceUpdateSaved:"Toplu fiyat gncelleme iin seiminizi kaydettik. Dzenlemeyi rn detaynda yapabilirsiniz."},categories:{added:"{{name}} kategorisi eklendi (KDV: %{{taxRate}})",addError:"Kategori eklenemedi",updateSuccess:"Kategori gncellendi",deleteSuccess:"Kategori silindi",assignmentInfo:"Kategori atamas iin sol paneldeki kategori dzenini kullanabilirsiniz."},bank:{deleteError:"Banka silinemedi"},quotes:{createSuccess:"Teklif oluturuldu",createError:"Teklif oluturulamad"}},Kk={invoices:{overdue:{title:"Gecikmi fatura demesi",desc:"{{invoiceNumber}} - {{customerName}} ({{daysOverdue}} gn gecikmi)"},upcoming:{title:"Yaklaan fatura demesi",desc:"{{invoiceNumber}} - {{customerName}} ({{daysLeft}} gn kald)"},created:{title:"Yeni fatura oluturuldu",desc:"{{invoiceNumber}} - {{customerName}} iin fatura hazr."}},expenses:{overdue:{title:"Gecikmi gider demesi",desc:"{{description}} - {{supplierName}} ({{daysOverdue}} gn gecikmi)"},upcoming:{title:"Yaklaan gider demesi",desc:"{{description}} - {{supplierName}} ({{daysLeft}} gn kald)"},created:{title:"Yeni gider kaydedildi",desc:"{{supplierName}} - {{description}}: {{amount}}"}},products:{lowStock:{title:"Dk stok uyars",desc:"{{name}} - Stok seviyesi minimum limitin altnda! ({{stock}}/{{min}})"},outOfStock:{title:"Stok tkendi",desc:"{{name}} - Stok tkendi!"}},quotes:{expired:{title:"Teklif sresi doldu",desc:"{{quoteNumber}} - sre doldu"},dueSoon:{title:"Teklif sresi yaklayor",desc:"{{quoteNumber}} - {{diffDays}} gn kald"}},customers:{created:{title:"Yeni hesap eklendi",desc:"{{name}} sisteme kaydedildi."}},suppliers:{created:{title:"Yeni tedariki eklendi",desc:"{{name}} sisteme kaydedildi."}},sales:{created:{title:"Yeni sat kaydedildi",desc:"{{customerName}} - {{summary}}: {{totalAmount}}"}},plan:{limit:{title:"Plan limiti uyars",invoices:{desc:"Bu ayki fatura limitine yaklayorsunuz ({{used}}/{{limit}})."},expenses:{desc:"Bu ayki gider limitine yaklayorsunuz ({{used}}/{{limit}})."}}}},Gk={title:"Satlar",newSale:"Yeni Sat",totalSales:"Toplam Sat",totalSalesCount:"Toplam Sat Adedi",completed:"Tamamland",salesList:"Sat Listesi",salesRegistered:"sat kaytl",search:"Sat numaras, hesap veya rne gre ara...",noSales:"Henz sat yok",noSalesFound:"Sat bulunamad",noSalesDesc:"lk satnz ekleyerek balayn.",noSalesFoundDesc:"Arama kriterlerinizle eleen sat yok.",createFirstSale:"lk Sat Ekle",sale:"Sat",customer:"Hesap",productService:"rn/Hizmet",amount:"Tutar",status:"Durum",date:"Tarih",actions:"lemler",viewSale:"Sat grntle",editSale:"Sat Dzenle",deleteSale:"Sat sil",deleteConfirm:"Bu sat silmek istediinizden emin misiniz?",createInvoice:"Fatura Olutur",download:"ndir",subtitle:"Sat kaytlarnz ynetin",saleCompleted:"Sat Tamamland!",saleCompletedDesc:"Sat baaryla kaydedildi.",createInvoiceQuestion:"Fatura oluturmak ister misiniz?",autoGenerated:"Otomatik oluturulacak",statusCompleted:"Tamamland",statusPending:"Bekliyor",statusCancelled:"ptal",saleNumber:"Sat No",saleDate:"Sat Tarihi",autoNumberNote:"Numara kaydedilirken otomatik oluturulacak",unitPriceInclVAT:"Birim Fiyat (KDV Dahil)",totalInclVAT:"Toplam (KDV Dahil)",unitPriceExclVAT:"Birim Fiyat (KDV Hari)",totalExclVAT:"Toplam (KDV Hari)",notesPlaceholder:"Sat ile ilgili ek notlar",addSale:"Sat Ekle",saleSummary:"Sat zeti",invoiceWillBeDownloaded:"Fatura oluturulursa, PDF formatnda otomatik olarak indirilecektir.",confirmInvoiceCreation:"Fatura oluturulsun mu?",invoiceWillOpen:"Fatura oluturulduktan sonra grntleme penceresinde alacaktr.",recordOnlySale:"Sadece Sat",recordSaleWithInvoice:"Fatura ile Birlikte",confirmInvoiceAction:"Evet, Olutur",creatingInvoice:"Oluturuluyor...",enterSaleInfo:"Sat bilgilerini girin",selectExistingSale:"Mevcut Sat Se",selectSaleForInvoice:"Fatura oluturmak iin bir sat sein",searchSalesPlaceholder:"Sat numaras, hesap veya rne gre ara...",noInvoiceableSales:"Faturalanabilir sat bulunamad",changeSearchCriteria:"Arama kriterlerinizi deitirmeyi deneyin",allSalesInvoiced:"Tm satlar faturaland",pieces:"adet",saleInfo:"Sat Bilgileri",salesWaitingForInvoice:"Fatura bekleyen sat: {{count}}"},Wk={method:"deme Yntemi",cash:"Nakit",card:"Kredi/Banka Kart",transfer:"Havale/EFT",check:"ek"},Yk={title:"Raporlar",subtitle:"letmeniz iin detayl analiz raporlar",reportDate:"Rapor Tarihi",overview:"Genel Bak",basicMetrics:"Temel Metrikler",totalIncome:"Toplam Gelir",totalExpense:"Toplam Gider",netProfit:"Net Kar",totalCustomers:"Toplam Hesap",net:"Net",last6MonthsPerformance:"Son 6 ay performans (en yeni  en eski)",financialHealth:"Mali Durum",profitMargin:"Kar Marj",growthRate:"Byme Oran",averageSale:"Ortalama Sat",activeCustomers:"Aktif Hesaplar",paymentStatusAnalysis:"deme Durumu Analizi",invoiceStatuses:"Fatura Durumlar",expenseStatuses:"Gider Durumlar",vatAnalysis:"KDV Analizi",vatAnalysisSubtitle:"denmi faturalar zerinden KDV ykmllnz takip edin",currentYearLabel:"Cari Yl ({{year}})",vatYearToDate:"Ylbandan bugne KDV",vatChangeVsLastYear:"{{percent}} geen yla gre ({{lastYear}})",vatThisMonth:"Bu ayki KDV",vatChangeVsPreviousMonth:"{{percent}} geen aya gre ({{previous}})",vatAverageSixMonths:"6 aylk ort. KDV",vatAverageHint:"Son 6 ayda denen KDV'nin hareketli ortalamas",vatMonthlyBreakdown:"Aylk KDV dalm",lastMonthsPerformance:"Son {{count}} ay",noVatData:"Henz KDV verisi yok",revenueAnalysis:"Gelir Analizi",productBasedSales:"rn Bazl Satlar",sales:"sat",avg:"Ort",monthlyRevenueTrend:"Aylk Gelir Trendi",expenseAnalysis:"Gider Analizi",categoryBasedExpenses:"Kategori Bazl Giderler",expenses:"gider",monthlyExpenseTrend:"Aylk Gider Trendi",topSuppliers:"Gidere Gre En ok Tedarikiler",lastExpense:"Son",recentExpenses:"Son Giderler",expenseCategoryDistribution:"Gider Kategori Dalm",customerAnalysis:"Hesap Analizi",topCustomers:"En yi Hesaplar",purchases:"alveri",last:"Son",customerStatistics:"Hesap statistikleri",activeCustomersCount:"Aktif Hesaplar",revenuePerCustomer:"Hesap Bana Gelir",salesPerCustomer:"Hesap Bana Sat",averagePurchases:"Ortalama Alveri",maxPurchases:"Maksimum Alveri",performanceReports:"Performans Raporlar",kpiDashboard:"KPI Dashboard",increase:"Art",decrease:"Azal",monthlyPerformanceTable:"Aylk Performans Tablosu",total6Months:"Toplam (6 Ay)",totalIncome6Months:"Toplam Gelir (6 Ay)",totalExpense6Months:"Toplam Gider (6 Ay)",netProfit6Months:"Net Kar (6 Ay)",month:"Ay",profit:"Kar",profitMarginPercent:"Kar Marj",expenseRatio:"Gider Oran",expenseEfficiency:"Gider Verimlilii Analizi",expenseCategoryPerformance:"Gider Kategori Performans",noSupplier:"Tedariki Yok",noCustomer:"Hesap Yok",quoteAnalysis:"Teklif Analizi",quoteStatuses:"Teklif Durumlar",totalQuotes:"Toplam Teklif",acceptedRate:"Kabul Oran",averageQuote:"Ortalama Teklif",expiringSoon:"Sresi Yaklaanlar",recentQuotes:"Son Teklifler",daysLeft:"Gn Kald",quotes:"teklif"},Qk={totalCredit:"Toplam Alacak",totalDebit:"Toplam Bor",netBalance:"Net Bakiye",entry:{invoicePrefix:"Fatura",expensePrefix:"Gider",salePrefix:"Direkt Sat"}},Zk={equipment:"Ekipman",utilities:"Faturalar",rent:"Kira",salaries:"Maalar",personnel:"Personel",supplies:"Malzemeler",marketing:"Pazarlama",travel:"Seyahat",insurance:"Sigorta",taxes:"Vergiler",other:"Dier"},Xk={title:"Ariv",subtitle:"Tamamlanm ve gemi kaytlarnz",totalArchive:"Toplam Ariv",archivedInvoices:"Arivlenmi Faturalar",archivedExpenses:"Arivlenmi Giderler",archivedSales:"Arivlenmi Satlar",totalContacts:"Toplam Kiiler",searchPlaceholder:"Arivde ara...",clearFilters:"Filtreleri Temizle",tabs:{all:"Tm",invoices:"Faturalar",expenses:"Giderler",sales:"Satlar",contacts:"Kiiler"},sections:{archivedInvoices:"Arivlenmi Faturalar",archivedExpenses:"Arivlenmi Giderler",archivedSales:"Arivlenmi Satlar",customers:"Hesaplar",suppliers:"Tedarikiler",archiveSummary:"Ariv zeti"},empty:{invoices:"Arivlenmi fatura yok",invoicesHelper:"denmi veya gecikmi faturalar burada grnecek",expenses:"Arivlenmi gider yok",expensesHelper:"denmi giderler burada grnecek",sales:"Arivlenmi sat yok",salesHelper:"Tamamlanm satlar burada grnecek",customers:"Hesap bulunamad",suppliers:"Tedariki bulunamad"},table:{invoice:"Fatura",customer:"Hesap",amount:"Tutar",status:"Durum",date:"Tarih",actions:"lemler",expense:"Gider",supplier:"Tedariki",category:"Kategori",sale:"Sat",product:"rn/Hizmet",registered:"Kaytl"},actions:{view:"Grntle",download:"ndir"},summary:{financial:"Mali zet",totalIncome:"Toplam Arivlenmi Gelir",totalExpense:"Toplam Arivlenmi Gider",netArchive:"Net Ariv",recordCounts:"Kayt Saylar"},info:{title:"Ariv Hakknda",description:"Ariv sayfas tamamlanm ilemlerinizi saklar. denmi faturalar, onaylanm giderler ve tamamlanm satlar otomatik olarak burada listelenir. Bu kaytlar salt okunur ve gemi analiz ve denetim amalar iin kullanlabilir."}},Jk=JSON.parse(`{"backToApp":"Uygulamaya Geri Dn","contact":{"title":"letiim Bilgileri","email":"E-posta","address":"Adres","addressValue":"Comptario, Fransa","company":"irket","companyValue":"Comptario"},"terms":{"title":"Kullanm artlar","subtitle":"Comptario hizmetlerini kullanrken uymanz gereken artlar ve koullar","lastUpdated":"Son gncelleme: 29 Ekim 2025","sections":{"acceptance":{"title":"artlarn Kabul","content":"Bu hizmeti kullanarak, bu kullanm artlarn kabul etmi saylrsnz. Bu artlar kabul etmiyorsanz, ltfen hizmeti kullanmayn."},"service":{"title":"Hizmet Aklamas","content":"Comptario, iletmeler iin muhasebe ve finansal ynetim zmleri sunan bir SaaS platformudur. Hizmetimiz unlar ierir:","features":{"invoicing":"Fatura oluturma ve ynetimi","expenses":"Gider takibi ve kategorilendirme","reporting":"Finansal raporlar ve analizler","multiTenant":"ok kiracl gvenli veri saklama"}},"responsibilities":{"title":"Kullanc Sorumluluklar","content":"Hizmeti kullanrken aadaki sorumluluklarnz bulunmaktadr:","items":{"accuracy":"Girdiiniz verilerin doruluunu salamak","compliance":"Yerel yasalara ve dzenlemelere uymak","security":"Hesap gvenliinizi korumak","backups":"nemli verilerinizi yedeklemek"}},"dataProtection":{"title":"Veri Koruma","content":"Verilerinizin gvenlii ve gizlilii bizim iin nceliklidir. GDPR ve dier veri koruma dzenlemelerine tam uyum salyoruz."},"liability":{"title":"Sorumluluk Snrlar","content":"Hizmetimizi olduu gibi sunuyoruz. Dolayl zararlar iin sorumlu deiliz. Toplam sorumluluumuz denen cretle snrldr."},"termination":{"title":"Hizmet Sonlandrma","content":"Bu anlamay istediiniz zaman sonlandrabilirsiniz. Hesabnz kapattnzda verileriniz gvenli ekilde silinir."},"changes":{"title":"artlarda Deiiklik","content":"Bu artlar zaman zaman gncelleyebiliriz. nemli deiiklikler iin size bildirimde bulunacaz."}}},"privacy":{"title":"Gizlilik Politikas","subtitle":"Kiisel verilerinizi nasl topladmz, kullandmz ve koruduumuz hakknda","sections":{"introduction":{"title":"Giri","content":"Bu gizlilik politikas, Comptario olarak kiisel verilerinizi nasl ilediimizi aklar. GDPR'ye tam uyum salyoruz."},"dataCollection":{"title":"Topladmz Veriler","personal":{"title":"Kiisel Bilgiler","name":"Ad ve soyadnz","email":"E-posta adresiniz","company":"irket bilgileriniz","phone":"Telefon numaranz (istee bal)"},"business":{"title":" Verileri","invoices":"Fatura ve hesap bilgileri","expenses":"Gider kaytlar","customers":"Hesap veritaban","financial":"Finansal ilem verileri"},"technical":{"title":"Teknik Veriler","ip":"IP adresi ve konum bilgisi","browser":"Tarayc ve cihaz bilgisi","usage":"Hizmet kullanm istatistikleri","cookies":"erezler ve benzeri teknolojiler"}},"dataUse":{"title":"Verileri Nasl Kullanyoruz","service":"Hizmet sunumu ve hesap ynetimi","support":"Destek ve teknik yardm","improvements":"Hizmet gelitirme ve optimizasyon","compliance":"Yasal ykmllklerin yerine getirilmesi","communications":"nemli bildirimlerin gnderilmesi"},"legalBasis":{"title":"Hukuki Dayanak (GDPR)","gdprNote":"GDPR Madde 6 uyarnca veri ileme dayanaklarmz:","contract":{"title":"Szleme","desc":"Hizmet sunumu iin gerekli ilemler"},"legitimate":{"title":"Meru Menfaat","desc":"Hizmet gelitirme ve gvenlik"},"consent":{"title":"Rza","desc":"Pazarlama ve istee bal zellikler"},"legal":{"title":"Yasal Ykmllk","desc":"Vergi ve muhasebe kaytlar"}},"security":{"title":"Veri Gvenlii","content":"Verilerinizi korumak iin en ileri gvenlik nlemlerini kullanyoruz:","measures":{"encryption":"AES-256 ifreleme (aktarm ve depolama)","access":"ok faktrl kimlik dorulama","monitoring":"7/24 gvenlik izleme","backups":"ifrelenmi otomatik yedeklemeler","incident":"Olay mdahale prosedrleri"}},"rights":{"title":"GDPR Haklarnz","access":{"title":"Eriim Hakk","desc":"Hangi verilerimizi ilediimizi renebilirsiniz"},"rectification":{"title":"Dzeltme Hakk","desc":"Yanl verilerin dzeltilmesini isteyebilirsiniz"},"erasure":{"title":"Silme Hakk","desc":"Verilerinizin silinmesini talep edebilirsiniz"},"portability":{"title":"Tanabilirlik Hakk","desc":"Verilerinizi baka platformlara aktarabilirsiniz"},"objection":{"title":"tiraz Hakk","desc":"Belirli ilemlere itiraz edebilirsiniz"}},"retention":{"title":"Veri Saklama","content":"Verilerinizi yasal gereklilikler ve i ihtiyalar dorultusunda saklarz. Hesabnz kapattnzda, verileriniz 30 gn iinde gvenli ekilde silinir."},"transfers":{"title":"Uluslararas Veri Transferleri","content":"Verileriniz ncelikle AB iinde ilenir. AB dna transfer gerektiinde, uygun gvenceler (SCC, Adequacy Decision) kullanlr."},"contact":{"title":"letiim","dpo":"Veri Koruma Sorumlusu","email":"Gizlilik E-postas","address":"Posta Adresi"}}},"cookies":{"title":"erez Politikas","subtitle":"Web sitemizde erezleri nasl kullandmz ve tercihlerinizi nasl ynetebileceiniz","required":"Gerekli","preferences":{"title":"erez Tercihleri","saved":"erez tercihleri kaydedildi!","acceptAll":"Tmn Kabul Et","rejectAll":"Tmn Reddet","savePreferences":"Tercihleri Kaydet"},"types":{"necessary":{"title":"Gerekli erezler","description":"Bu erezler web sitesinin dzgn almas iin gereklidir ve devre d braklamaz.","examples":"Oturum ID, gvenlik token'lar, dil tercihi"},"analytics":{"title":"Analitik erezler","description":"Web sitesinin nasl kullanldn anlamamza yardmc olur ve performans iyiletirmemizi salar.","examples":"Google Analytics, sayfa grntleme istatistikleri"},"marketing":{"title":"Pazarlama erezleri","description":"Size daha alakal reklamlar gstermek iin kullanlr.","examples":"Facebook Pixel, Google Ads erezleri"},"preferences":{"title":"Tercih erezleri","description":"Web sitesinin davrann ve grnmn tercihlerinize gre hatrlar.","examples":"Dil seimi, tema tercihi, blge ayarlar"}},"sections":{"whatAre":{"title":"erezler Nedir?","content":"erezler, web sitesini ziyaret ettiinizde taraycnza kaydedilen kk metin dosyalardr. Web sitesinin sizi tanmasn ve tercihlerinizi hatrlamasn salar."},"howWeUse":{"title":"erezleri Nasl Kullanyoruz?","content":"erezleri web sitesinin ilevselliini salamak, gvenlii artrmak ve kullanc deneyimini iyiletirmek iin kullanyoruz."},"thirdParty":{"title":"nc Taraf erezleri","content":"Baz erezler, web sitemizdeki hizmetleri salayan nc taraf irketler tarafndan ayarlanr:","partners":{"title":" Ortaklarmz","analytics":"Web sitesi analitikleri","payments":"deme ilemleri","support":"Destek"}},"managing":{"title":"erezleri Ynetme","content":"erez tercihlerinizi yukardaki panel zerinden ynetebilir veya tarayc ayarlarnzdan deitirebilirsiniz:","browsers":{"chrome":"Ayarlar > Gizlilik ve gvenlik > erezler","firefox":"Seenekler > Gizlilik ve Gvenlik > erezler","safari":"Tercihler > Gizlilik > erezleri ynet","edge":"Ayarlar > Site izinleri > erezler"}}},"contact":{"title":"letiim","email":"E-posta","cmp":"Onay Ynetim Platformu","cmpNote":"Bu sayfa basit bir onay ynetim arayz salar"}},"dpa":{"title":"Veri leme Szlemesi","subtitle":"GDPR Madde 28 uyarnca veri ileme koullar ve gvenceleri","download":"DPA'y ndir","acceptance":{"title":"DPA Kabul","description":"letme verilerini Comptario'da saklamak iin bu Veri leme Szlemesi'ni kabul etmeniz gerekmektedir.","checkbox":"Veri leme Szlemesi'ni okudum ve kabul ediyorum","button":"DPA'y Kabul Et","confirmed":"DPA baaryla kabul edildi ve kaydedildi!","status":{"accepted":"DPA Kabul Edildi","date":"Kabul Tarihi"}},"sections":{"introduction":{"title":"Giri","content":"Bu Veri leme Szlemesi (DPA), GDPR Madde 28 gereklilikleri uyarnca, Comptario ile kullanclar arasndaki veri ileme ilikisini dzenler.","note":{"title":"nemli Not","content":"Bu szleme, kullancnn veri sorumlusu, Comptario'nun ise veri ileyicisi olduu durumlar kapsar."}},"definitions":{"title":"Tanmlar","controller":{"title":"Veri Sorumlusu","desc":"Kiisel verilerin ilenme amalarn ve yntemlerini belirleyen kullanc"},"processor":{"title":"Veri leyicisi","desc":"Veri sorumlusu adna kiisel verileri ileyen Comptario"},"personalData":{"title":"Kiisel Veri","desc":"Kimlii belirli veya belirlenebilir gerek kiilere ilikin her trl bilgi"}},"processing":{"title":"leme Detaylar","subject":{"title":"leme Konusu","desc":"Muhasebe ve finansal ynetim hizmetleri"},"duration":{"title":"leme Sresi","desc":"Hizmet szlemesi sresince ve sonrasnda yasal saklama sreleri"},"purpose":{"title":"leme Amalar","service":"Comptario hizmetlerinin sunulmas","support":"Teknik destek ve destek hizmetleri","security":"Veri gvenlii ve sistem korunmas","compliance":"Yasal ykmllklerin yerine getirilmesi"}},"dataCategories":{"title":"Veri Kategorileri","personal":{"title":"Kiisel Veriler","name":"Ad, soyad","email":"E-posta adresi","phone":"Telefon numaras","company":"irket bilgileri"},"technical":{"title":"Teknik Veriler","ip":"IP adresi","logs":"Sistem gnlkleri","usage":"Kullanm verileri","device":"Cihaz bilgileri"}},"security":{"title":"Gvenlik nlemleri","content":"Comptario, kiisel verilerin gvenliini salamak iin aadaki teknik ve organizasyonel nlemleri uygular:","measures":{"technical":{"title":"Teknik nlemler","encryption":"AES-256 ifreleme","access":"ok faktrl kimlik dorulama","monitoring":"Srekli gvenlik izleme"},"organizational":{"title":"Organizasyonel nlemler","training":"Personel gvenlik eitimi","policies":"Veri koruma politikalar","incident":"Olay mdahale prosedrleri"}}},"subprocessors":{"title":"Alt leyiciler","content":"Comptario, belirli hizmetler iin onaylanm alt ileyiciler kullanabilir. Gncel liste aadaki balantda mevcuttur:","list":{"title":"Alt leyici Listesi","desc":"Gncel listeyi grntlemek iin","link":"buraya tklayn"}},"dataSubjectRights":{"title":"Veri Sahibi Haklar","content":"Comptario, veri sorumlusunun veri sahibi haklarna ilikin taleplerine destek olur ve gerekli teknik nlemleri alr."},"dataBreach":{"title":"Veri hlali","content":"Kiisel veri ihlali durumunda Comptario, veri sorumlusunu gecikmeksizin bilgilendirir ve gerekli nlemleri alr.","notification":{"title":"Bildirim Sresi","content":"Veri ihlali tespit edildiinde 72 saat iinde bildirim yaplr"}}},"subprocessors":{"title":"Alt leyiciler Listesi","subtitle":"Comptario hizmetlerinin sunulmasnda kullanlan nc taraf veri ileyicileri ve gvenceleri","lastUpdated":"Son gncelleme: 29 Ekim 2025","currentList":"Mevcut Alt leyiciler","overview":{"title":"Genel Bak","content":"Bu sayfa, Comptario hizmetlerinin sunulmas srasnda kiisel verilerinizi ileyebilecek tm alt ileyicileri listeler. Her alt ileyici GDPR gerekliliklerine uygun olarak seilmi ve szlemeye balanmtr.","notification":{"title":"Deiiklik Bildirimi","content":"Alt ileyici listesindeki deiiklikler iin 30 gn nceden bildirimde bulunulur"}},"list":{"aws":{"purpose":"Bulut altyaps ve veri depolama"},"stripe":{"purpose":"deme ileme ve fatura ynetimi"},"sendgrid":{"purpose":"E-posta gnderimi ve bildirimler"},"intercom":{"purpose":"Destek ve canl sohbet"},"analytics":{"purpose":"Web sitesi analitikleri ve performans izleme"}},"safeguards":{"title":"Gvenceler","adequacyDecision":"AB Yeterlilik Karar","dataTransferAgreement":"Veri Transfer Szlemesi","dataMinimization":"Veri Minimizasyon lkesi"},"dataTransfers":{"title":"Veri Transferleri","content":"AB dna veri transferleri iin aadaki hukuki mekanizmalar kullanyoruz:","mechanisms":{"adequacy":"AB Yeterlilik Kararlar","scc":"Standart Szleme Hkmleri (SCC)","bcr":"Balayc Kurumsal Kurallar (BCR)"}},"monitoring":{"title":"zleme ve Denetim","content":"Alt ileyicilerimizi dzenli olarak izler ve denetleriz:","activities":{"audit":"Yllk gvenlik denetimleri","certification":"ISO 27001, SOC 2 sertifikalar","review":"nc taraf gvenlik deerlendirmeleri"}},"contact":{"title":"letiim","content":"Alt ileyicilerle ilgili sorularnz iin bizimle iletiime geebilirsiniz:","email":"E-posta","notificationPeriod":"Bildirim Sresi","notificationPeriodValue":"Deiiklikler iin 30 gn nceden"}}},"cookie":{"banner":{"title":"erez Tercihleri","description":"Bu web sitesi deneyiminizi iyiletirmek iin erezler kullanr. Hangi erezlerin kullanlacan seebilirsiniz.","acceptAll":"Tmn Kabul Et","rejectAll":"Tmn Reddet","managePreferences":"Tercihleri Ynet","savePreferences":"Tercihleri Kaydet","close":"Kapat"},"modal":{"title":"erez Tercihleri","description":"erez kategorilerini inceleyip tercihlerinizi belirleyebilirsiniz. Her kategorinin aklamasn okuyarak hangi erezlerin kullanlacana karar verebilirsiniz.","necessary":{"title":"Zorunlu erezler","description":"Bu erezler web sitesinin dzgn almas iin gereklidir ve devre d braklamaz. Genellikle giri yapma, form doldurma gibi ilemlerinize yant olarak ayarlanr.","alwaysActive":"Her zaman aktif"},"analytics":{"title":"Analitik erezler","description":"Bu erezler web sitesinin nasl kullanldn anlamamza yardmc olur. Hangi sayfalarn daha ok ziyaret edildii ve kullanclarn sitede nasl gezindii hakknda bilgi toplar.","enabled":"Etkin","disabled":"Devre d"},"marketing":{"title":"Pazarlama erezler","description":"Bu erezler size daha alakal reklamlar gstermek iin kullanlr. Reklam ortaklarmzn ilgi alanlarnz hakknda bir profil oluturmasna yardmc olabilir.","enabled":"Etkin","disabled":"Devre d"},"acceptSelected":"Seilenleri Kabul Et","acceptAll":"Tmn Kabul Et","rejectAll":"Tmn Reddet","cancel":"ptal"},"notice":{"updated":"erez tercihleriniz gncellendi.","saved":"erez tercihleri kaydedildi."},"categories":{"necessary":"Zorunlu","analytics":"Analitik","marketing":"Pazarlama"}},"org":{"members":{"title":"yeler","subtitle":"Organizasyonunuzdaki yeleri ynetin","memberCount":"{{count}} ye","roles":{"OWNER":"Sahip","ADMIN":"Ynetici","MEMBER":"ye"},"inviteButton":"Davet Gnder","status":{"active":"Aktif","pending":"Bekliyor"},"table":{"name":"Ad","email":"E-posta","role":"Rol","lastLogin":"Son Giri","status":"Durum","joinedAt":"Katlma Tarihi","actions":"lemler"},"invite":{"title":"ye Davet Et","button":"Davet Gnder","form":{"email":"E-posta Adresi","emailPlaceholder":"ornek@email.com","role":"Rol","rolePlaceholder":"Rol sein","message":"Davet Mesaj (stee bal)","messagePlaceholder":"Organizasyonumuza katlmanz iin sizi davet ediyoruz..."},"success":"Davet baaryla gnderildi","error":"Davet gnderilirken hata olutu","duplicate":"Bu e-posta adresi zaten davet edilmi","limitReached":"Plan limiti ald. Daha fazla ye davet etmek iin plannz ykseltin."},"remove":{"title":"yeyi kar","message":"{{name}} kiisini organizasyondan karmak istediinizden emin misiniz?","warning":"Bu ilem geri alnamaz.","confirm":"Evet, kar","cancel":"ptal","success":"ye baaryla karld","error":"ye karlrken hata olutu","cannotRemoveOwner":"Sahip rolndeki ye karlamaz"},"validation":{"emailRequired":"E-posta gerekli","emailInvalid":"Geerli bir e-posta adresi girin","emailExists":"Bu e-posta zaten davetli veya ye"},"tryAgain":"Tekrar Dene","organization":"Organizasyon","membersLabel":"yeler","plan":"Plan","youLabel":"Siz","makeAdmin":"Ynetici Yap","makeMember":"ye Yap","limitFull":"Limit Doldu","sending":"Gnderiliyor...","updateRole":{"success":"ye rol gncellendi","error":"Rol gncellenirken hata olutu"},"empty":{"title":"Henz ye yok","subtitle":"lk yenizi davet ederek balayn","action":"ye Davet Et"},"pendingInvites":{"title":"Bekleyen Davetler","count":"{{count}} bekleyen davet","resend":"Tekrar Gnder","cancel":"ptal Et","cancelConfirm":"Bu daveti iptal etmek istediinizden emin misiniz? ({{email}})","resendSuccess":"Davet tekrar gnderildi","cancelSuccess":"Davet iptal edildi","expires":"{{date}} tarihinde sona eriyor"}},"join":{"title":"Organizasyona Katl","subtitle":"{{orgName}} organizasyonuna katlmaya davet edildiniz","invitedBy":"{{name}} tarafndan davet edildiniz","role":"Rol: {{role}}","accept":"Daveti Kabul Et","decline":"Daveti Reddet","expired":{"title":"Davet Sresi Doldu","subtitle":"Bu davet balantsnn sresi dolmu","action":"Yeni davet isteyin"},"invalid":{"title":"Geersiz Davet","subtitle":"Bu davet balants geersiz","action":"Ana sayfaya git"},"success":{"title":"Baarl!","subtitle":"{{orgName}} organizasyonuna baaryla katldnz","action":"Panele Git"},"error":{"title":"Hata","subtitle":"Daveti kabul ederken bir hata olutu","tryAgain":"Tekrar Dene"},"alreadyMember":{"title":"Zaten yesiniz","subtitle":"Bu organizasyonun zaten bir yesisiniz","action":"Panele Git"},"details":{"organizationLabel":"Organizasyon","emailLabel":"Davet edilen e-posta","expiresLabel":"Son geerlilik","roleLabel":"Rol"},"passwordFlow":{"title":"ifre Belirleyin","description":"{{email}} iin hesabnz oluturmak zere bir ifre belirleyin. E-posta dorulamas gerekmez.","passwordLabel":"ifre","passwordPlaceholder":"En az 6 karakter","showPassword":"Gster","hidePassword":"Gizle","submit":"Hesap Olutur ve Katl","submitting":"Kaydediliyor...","toastSuccess":"Davet kabul edildi. Ho geldiniz!"},"loadingState":{"title":"Davet kontrol ediliyor...","subtitle":"Ltfen bekleyin, davet balantnz dorulanyor."},"guestFallback":{"loading":"Geersiz davet veya ykleniyor..."},"emailMismatch":{"title":"Uyar","body":"Bu davet {{inviteEmail}} adresine gnderildi ancak siz {{currentEmail}} ile giri yaptnz.","loginAction":"{{inviteEmail}} ile giri yap","registerAction":"{{inviteEmail}} ile kayt ol"},"accepting":"Katlyor..."}},"admin":{"users":{"updateConfirm":"Bu kullancy gncellemek istediinize emin misiniz?","passwordResetConfirm":"ifre sfrlama e-postas gnderilsin mi?","deactivateConfirm":"Kullancy devre d brakmak istediinize emin misiniz?","activateConfirm":"Kullancy aktifletirmek istediinize emin misiniz?"},"tenants":{"updatePlanConfirm":"{{name}} iin plan '{{plan}}' olarak gncellemek istediinize emin misiniz?","updateStatusConfirm":"{{name}} iin durumu '{{status}}' olarak gncellemek istediinize emin misiniz?","updateNextPaymentConfirm":"{{name}} iin sonraki deme tarihini '{{date}}' olarak gncellemek istediinize emin misiniz?","cancelSubscriptionConfirm":"{{name}} aboneliini iptal etmek istediinize emin misiniz?","dangerDeleteTenantConfirm":"Dikkat! '{{name}}' kiracsn kalc olarak silmek istiyor musunuz? Bu ilem geri alnamaz."},"backups":{"deleteConfirm":"Bu yedei silmek istediinizden emin misiniz?","deleteOlderThanConfirm":"{{days}} gnden eski tm yedekleri silmek istediinizden emin misiniz?"}},"plans":{"limitExceeded":{"title":"Plan limiti ald","invoicesMessage":"Mevcut plannzda maksimum fatura saysna ulatnz. Daha fazla fatura oluturmak iin plannz ykseltin.","expensesMessage":"Mevcut plannzda maksimum gider saysna ulatnz. Daha fazla gider eklemek iin plannz ykseltin."}},"planTab":{"header":{"title":"Plan ve Faturalama","subtitle":"Aboneliinizi, faturalama dnemi ve koltuklar ynetin"},"managePayments":"demeleri Ynet","monthly":"Aylk","yearly":"Yllk","yearlyNote":"2 ay cretsiz","currentPlan":{"label":"Mevcut Plan","seatsInUse":"Kullanmda koltuk","renewalDate":"Yenileme Tarihi","cancellationDate":"ptal Tarihi","cancelAtPeriodEndNotice":"Abonelik dnem sonunda iptal edilecektir."},"changePlan":"Plan Deitir","plans":{"labels":{"professional":"Pro","enterprise":"letme","free":"Balang"},"bullets":{"proIncluded":"3 kullanc dahil","basicAutomations":"Temel otomasyonlar","businessIncluded":"10 kullanc dahil","advancedAutomations":"Gelimi otomasyonlar ve roller","freeLimited":"Snrl faturalar ve zellikler"}},"prices":{"monthly":{"free":"0/ay","pro":"29/ay","enterprise":"59/ay"}},"configuration":"Yaplandrma","billingCycle":"Faturalama dnemi","seatsAddon":"Ek koltuklar","seatsAddonHelper":"5/koltuk/ay olarak cretlendirilir. Orantlama uygulanr.","costPreview":"Maliyet nizleme","newSubtotal":"Yeni ara toplam","extraSeats":"Ek koltuklar","prorationToday":"Bugnk oranlama","updatePlan":"Plan Gncelle","amountsNote":"Tutarlar bilgilendirme amaldr. Nihai cretler deme admnda gsterilir.","quickSeatActions":"Hzl koltuk ilemleri","add1SeatNow":"1 koltuk ekle ve imdi tahsil et","add5SeatsNow":"5 koltuk ekle ve imdi tahsil et","remove1Seat":"1 koltuk azalt","quickTip":"pucu: Koltuklar faturalama portalndan da ekleyebilirsiniz.","subscriptionStatus":"Abonelik durumu","subscriptionCancelNote":"ptal dnem sonunda geerlidir; o zamana kadar devam ettirebilirsiniz.","cancelAtPeriodEndBtn":"Dnem sonunda iptal et","resumeSubscriptionBtn":"Abonelii devam ettir","history":{"title":"Gemi","loading":"Gemi ykleniyor","empty":"Kayt bulunamad","type":"Tr","plan":"Plan","users":"Kullanc","date":"Tarih","footerNote":"Olaylar belirli aralklarla faturalama salaycsndan senkronize edilir."},"invoices":{"title":"Faturalar","loading":"Faturalar ykleniyor","empty":"Fatura bulunamad","invoiceInfo":"Fatura Bilgileri","invoiceStatus":"Fatura Durumu","invoiceNotes":"Fatura Notlar","invoiceTotals":"Fatura Tutarlar","notesPlaceholder":"Fatura ile ilgili notlar...","amountExclTax":"Tutar (KDV Hari)","filters":{"status":"Durum","all":"Tm","search":"Ara","searchPlaceholder":"Numara veya para birimi","from":"Balang","to":"Biti","exportCsv":"CSV Da Aktar"},"table":{"number":"Numara","date":"Tarih","amount":"Tutar","status":"Durum","actions":"lemler"},"footerNote":"Faturalar faturalama salaycsndan alnr; tutarlar fatura para biriminde gsterilir."}},"pdf":{"invoice":{"title":"FATURA","appSubtitle":"comptario Muhasebe Sistemi","customerInfo":"Hesap Bilgileri","invoiceNumber":"Fatura No","issueDate":"Dzenleme Tarihi","dueDate":"Vade Tarihi","status":"Durum","items":{"description":"Aklama","quantity":"Miktar","unitPrice":"Birim Fiyat","total":"Toplam"},"totals":{"subtotal":"Ara Toplam","tax":"KDV","grandTotal":"Genel Toplam"},"footer":"Bu fatura comptario ile oluturulmutur.","statusLabels":{"paid":"dendi","sent":"Gnderildi","overdue":"Gecikmi","draft":"Taslak"}},"expense":{"title":"GDER BELGES","supplierInfo":"Tedariki Bilgileri","expenseNumber":"Gider No","expenseDate":"Gider Tarihi","paymentDate":"deme Tarihi","status":"Durum","category":"Kategori","details":"Gider Detaylar","totalAmount":"Toplam Gider Tutar","footer":"Bu gider belgesi comptario ile oluturulmutur.","statusLabels":{"draft":"Taslak","approved":"Onayland","paid":"dendi"}},"sale":{"title":"SATI BELGES","customerInfo":"Hesap Bilgileri","saleNumber":"Sat No","saleDate":"Sat Tarihi","status":"Durum","paymentMethod":"deme Yntemi","details":"rn/Hizmet Detaylar","quantity":"Miktar","unitPrice":"Birim Fiyat","totalAmount":"Toplam Sat Tutar","footer":"Bu sat belgesi comptario ile oluturulmutur.","statusLabels":{"completed":"Tamamland","pending":"Bekliyor","cancelled":"ptal"},"paymentMethods":{"cash":"Nakit","card":"Kredi/Banka Kart","transfer":"Havale/EFT","check":"ek"}}}}`),ej={app:ck,crm:dk,summary:uk,presets:mk,landing:hk,footer:fk,auth:pk,pagination:gk,fiscalPeriods:xk,common:yk,currencies:bk,header:vk,dashboard:wk,quickActions:Nk,transactions:kk,alerts:jk,months:Sk,sidebar:Ck,quotes:Ak,billing:Tk,stats:Ek,status:Dk,invoice:_k,"expense.details":"Gider Detaylar","expense.information":"Gider Bilgileri","expense.number":"Gider No","expense.date":"Gider Tarihi","expense.category":"Kategori","expense.supplier":"Tedariki","expense.amount":"Tutar","expense.receipt":"Fi","expense.viewReceipt":"Fii Grntle","customer.details":"Hesap Detaylar","customer.accountInfo":"Hesap Bilgileri","customer.personalInfo":"Kiisel Bilgiler","customer.name":"Ad","customer.email":"E-posta","customer.phone":"Telefon","customer.registeredAt":"Kayt Tarihi","customer.companyInfo":"Firma Bilgileri","customer.company":"Firma","customer.taxNumber":"Vergi Numaras","customer.addressInfo":"Adres Bilgileri","customer.quickActions":"Hzl lemler","customer.createInvoice":"Fatura Olutur","customer.viewHistory":"Gemii Grntle",expense:Pk,customer:Ik,supplier:Mk,products:Rk,chartOfAccounts:zk,invoices:Lk,expenses:Ok,validation:Fk,customers:Bk,suppliers:Uk,banks:Vk,settings:qk,security:$k,"common.remindMeLater":"Daha Sonra Hatrlat","common.now":"imdi","common.generic":{customer:"Hesap",supplier:"Tedariki",expense:"Gider",quote:"Teklif"},toasts:Hk,notifications:Kk,sales:Gk,payment:Wk,reports:Yk,ledger:Qk,expenseCategories:Zk,archive:Xk,legal:Jk},tj={members:{title:"yeler",subtitle:"Organizasyonunuzdaki yeleri ynetin",memberCount:"{{count}} ye",roles:{OWNER:"Sahip",ADMIN:"Ynetici",MEMBER:"ye"},inviteButton:"Davet Gnder",organization:"Organizasyon",membersLabel:"yeler",plan:"Plan",youLabel:"Siz",makeAdmin:"Ynetici Yap",makeMember:"ye Yap",remove:{title:"yeyi kar",message:"{{name}} kiisini organizasyondan karmak istediinizden emin misiniz?",warning:"Bu ilem geri alnamaz.",confirm:"Evet, kar",cancel:"ptal",success:"ye baaryla karld",error:"ye karlrken hata olutu",cannotRemoveOwner:"Sahip rolndeki ye karlamaz"},updateRole:{success:"ye rol gncellendi",error:"Rol gncellenirken hata olutu"},empty:{title:"Henz ye yok",subtitle:"lk yenizi davet ederek balayn",action:"ye Davet Et"}},join:{title:"Organizasyona Katl",subtitle:"{{orgName}} organizasyonuna katlmaya davet edildiniz",invitedBy:"{{name}} tarafndan davet edildiniz",role:"Rol: {{role}}",accept:"Daveti Kabul Et",decline:"Daveti Reddet",expired:{title:"Davet Sresi Doldu",subtitle:"Bu davet balantsnn sresi dolmu",action:"Yeni davet isteyin"},invalid:{title:"Geersiz Davet",subtitle:"Bu davet balants geersiz",action:"Ana sayfaya git"},success:{title:"Baarl!",subtitle:"{{orgName}} organizasyonuna baaryla katldnz",action:"Panele Git"},error:{title:"Hata",subtitle:"Daveti kabul ederken bir hata olutu",tryAgain:"Tekrar Dene"},alreadyMember:{title:"Zaten yesiniz",subtitle:"Bu organizasyonun zaten bir yesisiniz",action:"Panele Git"}}},rj={org:tj},sj={sort:{label:"Sort",updatedDesc:"Updated (newest)",updatedAsc:"Updated (oldest)",createdDesc:"Created (newest)",createdAsc:"Created (oldest)",nameAsc:"Name (AZ)",nameDesc:"Name (ZA)",titleAsc:"Title (AZ)",titleDesc:"Title (ZA)"},name:"comptario",subtitle:"Accounting System"},nj={fields:{name:"Name",email:"Email",phone:"Phone",company:"Company",account:"Account",status:"Status",contact:"Contact",title:"Title",type:"Type",assignee:"Assignee",dueAt:"Date / Due",completed:"Completed",actions:"Actions"},confirmDelete:{title:"Confirm Delete",message:'Delete "{{name}}"?'},validation:{nameRequired:"Name is required",titleRequired:"Title is required"},dashboard:{subtitle:"An overview of the pipeline and activity."},pipeline:{title:"Pipeline",defaultName:"Default Pipeline",loading:"Loading pipeline",visibilityOwnerAndTeam:"Visibility: owner + team",addOpportunity:"Add Deal",createTitle:"Create Deal",selectPlaceholder:"Select",saving:"Saving",opportunityCount:"{{count}} deals",empty:"Empty",noMembers:"No members found",ownerAutoInTeam:"Note: Owner is automatically part of the team.",fields:{opportunityName:"Deal name",account:"Account",amount:"Amount",currency:"Currency",expectedCloseDate:"Expected close",stage:"Stage",team:"Team"},validation:{nameRequired:"Deal name is required",accountRequired:"Please select an account",amountInvalid:"Invalid amount"},stages:{lead:"Lead",qualified:"Qualified",proposal:"Proposal",negotiation:"Negotiation",won:"Won",lost:"Lost"}},opportunities:{title:"Opportunities",subtitle:"Browse and filter your opportunities.",searchPlaceholder:"Search opportunities...",empty:"No opportunities yet.",filters:{search:"Search",account:"Account",status:"Status",stage:"Stage",allAccounts:"All accounts",allStages:"All stages"},status:{all:"All",open:"Open",won:"Won",lost:"Lost"},actions:{open:"Open"}},leads:{title:"Leads",subtitle:"List and manage your leads.",empty:"No leads yet.",modal:{createTitle:"Add Lead",editTitle:"Edit Lead"}},contacts:{title:"Contacts",subtitle:"List and manage your contacts.",empty:"No contacts yet.",modal:{createTitle:"Add Contact",editTitle:"Edit Contact"}},activities:{title:"Activities",subtitle:"Track calls, emails, and tasks.",subtitleForDeal:'Activities for "{{dealName}}"',subtitleForAccount:'Activities for "{{accountName}}"',subtitleForContact:'Activities for "{{contactName}}"',empty:"No activities yet.",dueAtPlaceholder:"e.g. 2025-12-15",filters:{all:"All",open:"Open",completed:"Completed"},modal:{createTitle:"Add Activity",editTitle:"Edit Activity"}},tasks:{title:"Tasks",subtitleForDeal:'Tasks for "{{dealName}}"',subtitleForAccount:'Tasks for "{{accountName}}"',empty:"No tasks yet.",dueAtPlaceholder:"e.g. 2025-12-15 or 15.12.2025",unassigned:"Unassigned",filters:{all:"All",open:"Open",completed:"Completed"},modal:{createTitle:"Add Task",editTitle:"Edit Task"}},dealDetail:{title:"Deal details",backToPipeline:"Back to Pipeline",notFound:"Deal not found."},errors:{boardFetch:"Could not fetch CRM data"}},aj={blocks:{actions:"Actions",receivables:"Receivables",criticalStock:"Critical Stock",salesFlow:"Sales Flow",openQuotes:"Open Quotes",awaitingInvoiceSales:"Awaiting Invoice",crmFlow:"CRM Flow",latestActivities:"Latest Activities"},today:"Today",thisWeek:"This Week",pending:"Pending",overdue:"Overdue",criticalProducts:"Critical Products",todayOrders:"Today",weekOrders:"This Week",openQuotesCount:"Open Quotes",awaitingInvoiceCount:"Awaiting Invoice",loading:"Loading",latestActivitiesPlaceholder:"No recent activity yet.",crm:{openDeals:"Open deals",expectedAmount:"Expected amount",noStageData:"No stage data yet.",unknownStage:"Unknown stage"}},ij={thisMonth:"This Month",lastMonth:"Last Month",thisYear:"This Year",addedThisMonth:"Added This Month",withEmail:"Has Email",withPhone:"Has Phone",withCompany:"Has Company"},oj=JSON.parse(`{"nav.features":"Features","nav.pricing":"Pricing","nav.faq":"FAQ","nav.contact":"Contact","cta.try":"Try for Free","cta.signin":"Sign in","cta.watchDemo":"Watch Demo","hero.title":"Manage your invoices, expenses and quotes from one place.","hero.sub":"Manage invoices, expenses and quotes in a single, simple workspace. Keep your preaccounting organized with multi-currency support (EUR, USD, TRY), categorybased tax tracking, and PDF invoice/quote generation. With shareable quote links, your accounts can review quotes online and accept or decline with a single click.","features.title":"Everything you need to stay on top of pre-accounting","features.inv.title":"Invoicing","features.inv.desc":"Numbering, accounts, and PDF export.","features.exp.title":"Expenses","features.exp.desc":"File uploads and category-based VAT (e.g., 20% FR, 18% TR).","features.vat.title":"VAT & Tax Summaries","features.vat.desc":"Clear period reports with input/output VAT highlights.","features.fx.title":"Multi-Currency","features.fx.desc":"System currency options: USD, EUR, TRY","receiptUrl":"Receipt/Invoice URL","receiptUrlHelper":"You can add a link to the receipt/invoice image or PDF","exportCsv":"Export CSV","security.items":"EU hosting (placeholder), encryption in transit and at rest, automated backups.","testimonials.title":"What our users say","pricing.title":"Simple pricing","pricing.starter":"Starter","pricing.pro":"Pro","pricing.business":"Business","pricing.price.free":"0/mo","pricing.price.pro":"29/mo","pricing.price.biz":"59/mo","pricing.annualLine.free":"","pricing.annualLine.pro":"Annual prepay: 290/year (2 months free)","pricing.annualLine.biz":"Annual prepay: 590/year (2 months free)","pricing.cta":"Start now","pricing.ctaStarter":"Start for Free","pricing.ctaPro":"Upgrade to Pro","pricing.ctaBusiness":"Choose Business","pricing":{"planNames":{"starter":"Starter","pro":"Pro","business":"Business"}},"pricing.ctaContact":"Contact us","faq.title":"Frequently asked questions","faq.q1":"Can I start for free?","faq.a1":"Yes, the Starter plan lets you issue limited invoices at no cost.","faq.q2":"Does it support VAT?","faq.a2":"Yes, with category-based VAT and simple summaries.","faq.q3":"Are quotes supported?","faq.a3":"Yes. You can prepare quotes and send them via link or PDF.","faq.q4":"Do you support multiple currencies?","faq.a4":"Yes  use EUR, USD or TRY with manual rate input.","faq.q5":"How do I cancel?","faq.a5":"You can cancel anytime from the billing settings.","faq.q6":"Where is my data hosted?","faq.a6":"In the EU (placeholder), with encryption and regular backups.","finalCta.title":"Make pre-accounting simple.","finalCta.cta":"Try for Free","seo.title":"Comptario  Pre-Accounting Software","seo.description":"Comptario helps you manage invoices, expenses and VAT in a simple, secure workspace with multi-currency support and PDF invoice generation.","hero.badge":"Comptario  Pre-Accounting Software","hero.features.pdf":"PDF Invoices and Quotes","hero.features.currency":"MultiCurrency (EUR / USD / TRY)","hero.features.vat":"VAT / Tax Management","hero.mockup.revenue":"Monthly Revenue","hero.mockup.expenses":"Monthly Expenses","hero.mockup.vat":"VAT to Pay","hero.mockup.rate":"Rate","features.subtitle":"Manage your pre-accounting with confidence using our comprehensive set of tools designed for modern businesses.","value.subtitle":"Whether you're just starting out or running an established business, Comptario adapts to your needs.","value.freelancers.title":"For Freelancers","value.freelancers.desc":"Simple invoicing and expense tracking to keep your business organized","value.freelancers.basic":"Basic invoicing","value.freelancers.expense":"Expense management","value.freelancers.tax":"Tax summaries","value.small.title":"For Small Businesses","value.small.desc":"Comprehensive pre-accounting tools that grow with your business","value.small.currency":"Multi-currency support","value.small.customer":"Account management","value.small.reporting":"Advanced reporting","value.growing.title":"For Growing Companies","value.growing.desc":"Scalable solutions that adapt to your expanding operations","value.growing.team":"Team collaboration","value.growing.api":"Send quotes via link","value.growing.support":"Flexible filtering options","value.cta.title":"Ready to streamline your pre-accounting?","value.cta.subtitle":"Join thousands of businesses who trust Comptario to manage their finances efficiently.","value.cta.trial":"Start Free Trial","value.cta.demo":"Schedule Demo","value.stats.users":"Active Users","value.stats.invoices":"Invoices Generated","value.stats.uptime":"Uptime","security.badge":"Enterprise-Grade Security","finalCta.subtitle":"Join thousands of businesses who have streamlined their pre-accounting with Comptario. Start your free trial today  no credit card required.","finalCta.trial":"Free 30-day trial","finalCta.noSetup":"No setup fees","finalCta.cancel":"Cancel anytime","finalCta.stats.countries":"Countries Served","security.features.hosting.title":"EU Data Hosting","security.features.hosting.desc":"Your data is hosted in secure EU data centers with GDPR compliance","security.features.encryption.title":"End-to-End Encryption","security.features.encryption.desc":"All data is encrypted in transit and at rest using industry-standard protocols","security.features.backups.title":"Automated Backups","security.features.backups.desc":"Daily automated backups ensure your data is always safe and recoverable","security.features.gdpr.title":"GDPR Compliant","security.features.gdpr.desc":"Full compliance with European data protection regulations","security.features.monitoring.title":"24/7 Monitoring","security.features.monitoring.desc":"Continuous security monitoring and threat detection","security.features.uptime.title":"99.9% Uptime","security.features.uptime.desc":"Reliable infrastructure with guaranteed uptime SLA","security.trusted.title":"Trusted by businesses across Europe","security.trusted.gdpr":"Compliant","security.trusted.iso":"Certified","security.trusted.soc":"Type II","security.trusted.ssl":"Encrypted","security.trusted.desc":"Your financial data is protected by the same security standards used by banks and financial institutions. We never share your data with third parties and you maintain full control over your information.","testimonials.subtitle":"Don't just take our word for it. Here's what our users have to say about their experience with Comptario.","testimonials.sarah.content":"Comptario has simplified my invoicing process completely. I can now generate professional invoices in minutes and track my expenses effortlessly.","testimonials.sarah.role":"Freelance Designer","testimonials.sarah.company":"Design Studio Pro","testimonials.marcus.content":"The multi-currency feature is a lifesaver for our international accounts. VAT calculations are automatic and accurate, saving us hours of manual work.","testimonials.marcus.role":"CEO","testimonials.marcus.company":"Tech Solutions GmbH","testimonials.elena.content":"As a small business, we needed something simple yet powerful. Comptario gives us everything we need without the complexity of enterprise software.","testimonials.elena.role":"Small Business Owner","testimonials.elena.company":"Local Bakery","testimonials.stats.rating":"Average Rating","testimonials.stats.customers":"Happy Accounts","testimonials.stats.countries":"Countries","pricing.subtitle":"Choose the plan that fits your business needs. Start free and upgrade as you grow.","faq.support.title":"Still have questions?","faq.support.desc":"Our support team is here to help you get the most out of Comptario.","faq.support.contact":"Contact Support","faq.support.demo":"Schedule a Demo","pricing.popular":"Most Popular","pricing.plans.starter.desc":"Ideal for freelancers and small projects","pricing.plans.pro.desc":"Ideal for growing businesses","pricing.plans.business.desc":"For established companies with teams","pricing.features.users1":"1 user included","pricing.features.users3":"3 users included","pricing.features.users10":"10 users included","pricing.features.usersUnlimited":"Unlimited users","pricing.features.invoices5":"Up to 5 invoices per month","pricing.features.basicExpense":"Basic expense tracking","pricing.features.expenses5":"Up to 5 expenses per month","pricing.features.bank1":"1 bank account","pricing.features.bankUnlimited":"Unlimited bank accounts","pricing.features.customerSupplier1":"1 account and 1 supplier","pricing.features.customerSupplierUnlimited":"Unlimited accounts and suppliers","pricing.features.unlimitedInvoicesExpenses":"Unlimited invoices and expenses","pricing.features.vat":"Category-based VAT tracking","pricing.features.pdf":"PDF invoices and quotes","pricing.features.emailSupport":"Email support","pricing.features.quotesBasic":"Quote creation and shareable link","pricing.features.quotesAdvanced":"Quotes: viewed/accepted/declined, PDF","pricing.features.quoteTemplate1":"1 quote template","pricing.features.quoteTemplatesUnlimited":"Unlimited quote templates","pricing.features.saveListViews":"Save list views","pricing.features.unlimited":"Unlimited invoices","pricing.features.advancedExpense":"Advanced expense management","pricing.features.multiCurrency":"Multi-currency support","pricing.features.customerMgmt":"Account management","pricing.features.products":"Product and stock management","pricing.features.reports":"Advanced reports and detailed analytics","pricing.features.prioritySupport":"Priority support","pricing.features.api":"API access","pricing.features.everythingPro":"Everything in Pro","pricing.features.teamCollaboration":"Team collaboration","pricing.features.advancedReporting":"Advanced reporting","pricing.features.whiteLabel":"White-label options","pricing.features.dedicatedSupport":"Dedicated support","pricing.features.customIntegrations":"Custom integrations","pricing.features.noCredit":"No credit card required","pricing.pro.extraUser":"+ each additional user 5/mo","pricing.notes.vatAndCurrency":"Prices exclude VAT.","pricing.notes.cancelAnytime":"Cancel anytime.","pricing.trust":"Trusted by freelancers, agencies, and SMBs.","pricing.questions":"Have questions about our pricing?","pricing.checkFaq":"Check our FAQ","pricing.or":"or","pricing.contactSupport":"contact support","pricing.guarantee":"30-day money-back guarantee on all paid plans","faq.subtitle":"Everything you need to know about Comptario. Can't find the answer you're looking for? Feel free to contact us.","faq.contactUs":"contact us","footer.product":"PRODUCT","footer.company":"COMPANY","footer.support":"SUPPORT","footer.legal":"LEGAL","footer.features":"Features","footer.pricing":"Pricing","footer.security":"Security","footer.api":"API","footer.about":"About","footer.blog":"Blog","footer.careers":"Careers","footer.press":"Press","footer.helpCenter":"Help Center","footer.contactUs":"Contact Us","footer.status":"Status","footer.community":"Community","footer.privacy":"Privacy Policy","footer.terms":"Terms of Service","footer.gdpr":"GDPR","footer.cookies":"Cookie Policy","footer.imprint":"Imprint","footer.description":"Simple, secure pre-accounting software for modern businesses. Manage invoices, expenses, and VAT with confidence.","footer.stayUpdated":"Stay updated","footer.updatesDesc":"Get the latest updates on new features and best practices.","footer.email":"support@comptario.com","footer.languages":"Available in 4 languages","footer.gdprCompliant":"GDPR Compliant","footer.emailPlaceholder":"Enter your email","footer.subscribe":"Subscribe","footer.copyright":" {{year}} Comptario. All rights reserved.","footer.madeWith":"Made with  in Europe"}`),lj={terms:"Terms of Service",privacy:"Privacy Policy",cookies:"Cookie Policy"},cj={welcomeTitle:"Welcome",welcomeSubtitle:"Sign in to your account to continue",emailAddress:"Email Address",emailPlaceholder:"name@example.com",password:"Password",passwordPlaceholder:"",rememberMe:"Remember me",forgotPassword:"Forgot password",forgotPasswordHelp:"Enter your email to receive a reset link.",resetEmailSent:"If this email is registered, a password reset link has been sent.",resetPassword:"Reset Password",resetPasswordHelp:"Set your new password.",newPassword:"New Password",confirmPassword:"Confirm Password",passwordTooShort:"Password must be at least 8 characters",passwordTooWeak:"Please choose a stronger password",passwordMismatch:"Passwords do not match",passwordResetSuccess:"Your password has been updated",updatePassword:"Update Password",signIn:"Sign In",demoAccount:"Demo Account:",email:"Email",or:"or",adminLogin:"Admin Login",noAccount:"Don't have an account?",createFreeAccount:"Create a free account",registerTitle:"Create Account",registerSubtitle:"Create your free account and get started",fullName:"Full Name",fullNamePlaceholder:"Enter your full name",companyName:"Company Name",companyPlaceholder:"Your company (optional)",phone:"Phone",phonePlaceholder:"(optional)",passwordHint:"At least 6 characters",passwordConfirm:"Confirm Password",passwordConfirmPlaceholder:"Re-enter your password",termsText:{prefix:"I accept: ",suffix:""},and:" and ",dataProcessing:"Data Processing Agreement",captchaHint:"Multiple failed login attempts detected - please complete the human verification.",captchaRequired:"Please complete the human verification.",captchaPrompt:"Please complete the human verification before continuing.",captchaVerificationFailed:"We couldn't confirm the human verification. Please try again.",verifyRequiredTitle:"Email verification required",verifyRequiredBody:"We sent a verification link to {{email}}. Please confirm your address to unlock the workspace.",verifyRequiredHint:"Access to accounting actions stays locked until the email is verified.",verifyRequiredAction:"Open verification status",verifyRequiredLogout:"Sign out",verifyYourEmail:"Verify your email",verifySentTo:"Verification link sent to:",verifySent:"We've sent a verification link to your email address.",resend:"Resend",resendCooldown:"For security, a 60 second wait applies",securityVerificationRequired:"Security verification required. Please complete the verification.",emailNotVerified:"Email not verified yet. Please verify your email to continue.",verificationEmailSent:"Verification email sent. Please check your inbox.",resendVerification:"Resend verification email",registerCta:"Create Account",alreadyHaveAccount:"Already have an account?",goToLogin:"Sign in",sendResetLink:"Send reset link",resendIn:"You can resend in {{seconds}}s"},dj={back:"Back",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",edit:"Edit",view:"View",update:"Update",add:"Add",search:"Search",noResults:"No results found.",close:"Close",backToHome:"Back to Home",yes:"Yes",no:"No",loading:"Loading...",error:"Error",success:"Success",warning:"Warning",ok:"OK",periodLockedError:"This record cannot be deleted because it belongs to a locked fiscal period",description:"Description",dueDate:"Due Date",startDate:"Start Date",endDate:"End Date",monthlyIncomeExpense:"Monthly Income/Expense",last6MonthsPerformance:"Last 6 months performance (newest  oldest)",allCategories:"All categories",dateRanges:{thisMonth:"This month",last30Days:"Last 30 days",thisYear:"This year"},filters:{status:"Status",filterByStatus:"Filter by status"},actions:{clear:"Clear",view:"View",copyLink:"Copy link",subtitleForAccount:'Activities for "{{accountName}}"',downloadPDF:"Download PDF"},exportCSV:"Export CSV","dateRanges.thisMonth":"This month","dateRanges.last30Days":"Last 30 days","dateRanges.thisYear":"This year","common.total":"Total","common.exportCSV":"Export CSV",modal:{newTitle:"Add New Supplier",editTitle:"Edit Supplier",subtitle:"Enter supplier details",nameLabel:"Supplier Name",companyLabel:"Company Name",emailLabel:"Email",phoneLabel:"Phone",categoryLabel:"Category",taxNumberLabel:"Tax Number",addressLabel:"Address",namePlaceholder:"ABC Supply Ltd.",companyPlaceholder:"ABC Supply Inc.",emailPlaceholder:"info@abcsupply.com",phonePlaceholder:"+1 555 123 4567",taxNumberPlaceholder:"Tax ID",addressPlaceholder:"Full address information..."},"filters.status":"Status","filters.filterByStatus":"Filter by status","actions.clear":"Clear","actions.view":"View","actions.copyLink":"Copy link","actions.downloadPDF":"Download PDF",allStock:"All stocks",newest:"Newest",income:"Income",expense:"Expense",hideChart:"Hide Chart",showChart:"Show Chart",chartHidden:"Chart hidden",incomeLabel:"Income",expenseLabel:"Expense",allStatuses:"All Statuses",allAccounts:"All Accounts",cash:"Cash",card:"Card",transfer:"Transfer",check:"Check",email:"Email",quantity:"Quantity",statusLabel:"Status",status:{paid:"Paid",unpaid:"Unpaid",pending:"Pending",overdue:"Overdue",draft:"Draft",sent:"Sent",approved:"Approved",rejected:"Rejected",cancelled:"Cancelled",completed:"Completed",active:"Active",inactive:"Inactive",viewed:"Viewed",accepted:"Accepted",declined:"Declined",expired:"Expired",invoiced:"Invoiced",created:"Created",refunded:"Refunded"},notes:"Notes"},uj={TRY:"Turkish Lira",USD:"US Dollar",EUR:"Euro",GBP:"British Pound"},mj={newInvoice:"New Invoice",newSale:"New Sale",search:"Search...",areas:{label:"Area selection",summary:"Summary",crm:"CRM",finance:"Finance"},language:"Language",notifications:"Notifications",noNotifications:"No new notifications.",settings:"Settings",logout:"Logout"},hj={title:"Dashboard",overview:"Overview",revenue:"Revenue",expense:"Expense",profit:"Profit",unpaidInvoices:"Unpaid Invoices",recentActivity:"Recent Activity",totalRevenue:"Total Revenue",totalExpense:"Total Expense",pendingInvoices:"Pending Invoices",activeCustomers:"Active Accounts",vatToPay:"VAT Payable",vatToPaySubtitle:"Paid invoices for the current month",quickActions:"Quick Actions",recentTransactions:"Recent Transactions",quickAccess:"Quick Access",lastTransactions:"Your last {count} transactions",allGood:"All Good!",noAlerts:"No pending tasks or alerts.",viewAll:"View All"},fj={newInvoice:"New Invoice",newInvoiceDesc:"Create account invoice",newExpense:"New Expense",newExpenseDesc:"Add expense record",newSale:"New Sale",newSaleDesc:"Record sales transaction",newQuote:"New Quote",newQuoteDesc:"Create a quote for an account",newCustomer:"New Account",newCustomerDesc:"Add account information",newProduct:"New Product",newProductDesc:"Add product information",customers:"Accounts",suppliers:"Suppliers",banks:"Bank Accounts",products:"Products"},pj={invoice:"Invoice",expense:"Expense",sale:"Sale",paid:"Paid",unpaid:"Unpaid",pending:"Pending",actions:"Actions",transaction:"Transaction",customerDescription:"Account/Description",amount:"Amount",status:"Status",date:"Date",noTransactions:"No transactions yet"},gj={overdueInvoices:"Overdue Invoices",overdueDesc:"Overdue invoice",dueSoon:"Due Soon",dueSoonDesc:"Due within 7 days",pendingExpenses:"Pending Expenses",pendingExpensesDesc:"Expense awaiting approval",allGood:"All Good!",noAlerts:"No pending tasks or alerts.",attentionRequired:"Attention Required"},xj={short:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},yj={summary:"Summary",dashboard:"Dashboard",invoices:"Invoices",expenses:"Expenses",customers:"Accounts",products:"Products",suppliers:"Suppliers",banks:"Banks",sales:"Sales",crm:"CRM",crmDashboard:"CRM Dashboard",crmPipeline:"Pipeline",crmOpportunities:"Opportunities",crmLeads:"Leads",crmContacts:"Contacts",crmActivities:"Activities",crmTasks:"Tasks",quotes:"Quotes",reports:"Reports",accounting:"Accounting",chartOfAccounts:"Chart of Accounts",archive:"Archive",archiveConfirm:"Are you sure you want to archive this category?",organization:"Organization",settings:"Settings",close:"Close"},bj={title:"Quotes",newQuote:"New Quote",comingSoon:"Quotes module base page is ready. Advanced list, statuses, and PDF templates are next.",placeholderDescription:"Creating, sending, public view, and accept/decline flows will live here. Navigation and menu integration are done for now.",search:"Search quotes...",filterAll:"All Statuses",viewModal:{details:"Quote Details"},validUntil:"Valid Until",expiresIn:"(expires in {{days}} days)",expiredOn:"(expired on {{date}})",version:"v{{n}}",confirmAccept:"Are you sure you want to accept this quote?",acceptedThanks:"Thanks, the quote has been accepted.",confirmDecline:"Are you sure you want to decline this quote?",declinedInfo:"The quote has been declined.",duplicateConfirm:"Proceed with duplication?",reviseConfirm:"Do you want to revise this quote? The current version will be archived and a new version will be created.",createConfirm:"Are you sure you want to save this quote?",saveConfirm:"Are you sure you want to save the changes?",actions:{send:"Send",accept:"Accept",decline:"Decline",downloadPdf:"Download PDF",copyLink:"Copy public link",copyPublicLink:"Copy Link",copyPublicLinkSuccess:"Link copied.",resendEmail:"Resend email",revise:"Revise",duplicate:"Duplicate"},editModal:{title:"Edit Quote",subtitle:"Update quote information",quoteNumber:"Quote No"},table:{quote:"Quote",customer:"Account",amount:"Amount",status:"Status",date:"Date",actions:"Actions"},noQuotes:"No quotes yet",noQuotesDesc:"Start by creating your first quote.",noQuotesFound:"No quotes found",noQuotesFoundDesc:"No quotes match your search criteria.",createFirstQuote:"Create First Quote",view:"View",edit:"Edit",delete:"Delete",statusLabels:{viewed:"Viewed",accepted:"Accepted",declined:"Declined",expired:"Expired",draft:"Draft",sent:"Sent"},createModal:{title:"Create Quote",customer:"Account",customerPlaceholder:"Enter account name",currency:"Currency",date:"Issue Date",amount:"Amount",create:"Create"},scopeOfWork:{title:"Scope of Work",placeholder:"Project scope, deliverables, assumptions and exclusions...",note:"This content will be appended to the quote PDF as a new page after the current section and will be visible on the public link."},templates:{title:"Quote Templates",manage:"Manage Templates",manageTitle:"Manage quote templates",list:"Templates",new:"New",newTemplate:"New template",placeholderName:"Template name",apply:"Apply",create:"Create Template",selectPlaceholder:"Select a template",freeHidden:"Templates are hidden on the Starter plan.",proLimit:"You can save up to 1 template on Pro.",requirePlan:"Plan required",manageUpgrade:"Switch to Pro or Business to manage templates.",setDefault:"Default",availableTokens:"Available tokens (click to insert):",defaultBodyHtml:"<h3>Quote Summary</h3><p>Date: [quote.date]  Valid until: [quote.valid_until]</p><p>Dear [client.name] ([client.company]), please find our proposal for the scope below.</p><h4>Scope</h4><ul><li>Item 1</li><li>Item 2</li><li>Item 3</li></ul><h4>Total</h4><p>Total: [quote.total] [quote.currency]</p><h4>Contact</h4><p>[org.name]  [org.email]  [org.phone]  [org.address]</p>"}},vj={subscriptionUpdated:"Subscription updated.",payment:{successTitle:"Payment Successful",cancelledTitle:"Payment Cancelled",cancelledMessage:"Payment cancelled or not completed."},addonAdded:"Additional users added.",portal:{cancelAtPeriodEnd:"Subscription will be cancelled at period end. Date: {{date}}",activeApplied:"Subscription active. Portal changes applied.",synced:"Portal changes synchronized."},redirecting:"Redirecting to payment",interval:{updated:"Billing interval updated."},checkout:{failed:"Failed to create checkout session."},cancelAtPeriodEnd:{confirm:"Subscription will be cancelled at period end. Confirm?"},cancel:{requestedShort:"Cancel at period end set."},resumeCancellation:{confirm:"Cancellation will be removed and subscription will renew. Confirm?",done:"Cancellation removed. Subscription active."}},wj={thisMonth:"this month",all:"all"},Nj={paid:"Paid",unpaid:"Unpaid",pending:"Pending",overdue:"Overdue",draft:"Draft",sent:"Sent",approved:"Approved",rejected:"Rejected",cancelled:"Cancelled",completed:"Completed",active:"Active",inactive:"Inactive",viewed:"Viewed",accepted:"Accepted",declined:"Declined",expired:"Expired",invoiced:"Invoiced",created:"Created",refunded:"Refunded"},kj={details:"Invoice Details",downloadPdf:"Download PDF",information:"Invoice Information",type:"Invoice Type",productSale:"Product Sale",serviceSale:"Service Sale",issueDate:"Issue Date",dueDate:"Due Date",customerInfo:"Account Information",itemsServices:"Items/Services",description:"Description",quantity:"Quantity",unitPrice:"Unit Price",total:"Total",subtotal:"Subtotal",vat:"VAT",grandTotal:"Grand Total",notes:"Notes"},jj={details:"Expense Details",information:"Expense Information",number:"Expense No",date:"Expense Date",category:"Category",supplier:"Supplier",amount:"Amount",receipt:"Receipt",viewReceipt:"View Receipt"},Sj={history:"Transaction History",transactions:"transactions found",noHistory:"No Transaction History Yet",noHistoryDesc:"has no invoices or transaction records yet.",tip:"Tip:",tipDesc:"You can start transaction history by creating a new invoice for this account.",createInvoice:"Create Invoice",sale:"Sale",completed:"Completed",waiting:"Waiting",historyPageTitle:"Account History",historySubtitle:"All history for {{name}}",historyColumns:{name:"Record / No",date:"Date",status:"Status",createdBy:"Created by",type:"Type",description:"Description"}},Cj={expenseHistory:"Expense History",expensesFound:"expenses found",noExpenseHistory:"No Expense History Yet",noExpenseHistoryDesc:"has no expense records yet.",tip:"Tip:",tipDesc:"You can start transaction history by creating a new expense for this supplier.",createExpense:"Create Expense",viewExpense:"View expense"},Aj={title:"Products",newProduct:"New Product",search:"Search products...",filterCategory:"All Categories",name:"Product Name",category:"Category",price:"Price",stock:"Stock",sort:"Sort",status:"Status",actions:"Actions",noProducts:"No products yet",addFirstProduct:"Add your first product",edit:"Edit",delete:"Delete",deleteConfirm:"Are you sure you want to delete this product?",manageCategories:"Manage Categories",totalProducts:"Total Products",stockValue:"Stock Value",totalStock:"Total Stock",lowStock:"Low Stock",activeProductsDesc:"Number of actively sold products",totalStockCostDesc:"Estimated total stock cost",totalUnitsDesc:"Total units in warehouse",criticalLevelDesc:"Products below critical level",productCategories:"Product Categories",archivedCategories:"Archived Categories",showArchived:"Show archived",hideArchived:"Hide archived",activate:"Activate",noArchivedCategories:"No archived categories",addCategory:"Add category",categoriesCount:"categories",allProducts:"All products",noCategories:"No categories yet.",mainCategoriesTitle:"Main Categories",subCategories:"Sub Categories",editCategory:"Edit",deleteCategory:"Delete",editCategoryTooltip:"Edit category",mainCategoryEditTooltip:"Only tax rate can be changed for main categories",generalCategoryCannotDelete:"General category cannot be deleted",mainCategoryCannotDelete:"Main category cannot be deleted",deleteCategoryConfirm:"Are you sure you want to delete this category?",deleteCategoryWithProducts:"There are {{count}} active products in this category. Move them to another category first.",cannotArchiveCategoryWithProducts:"This category has {{count}} products. Move or delete them before archiving.",categoryCannotDeleteProtected:`"{category}" cannot be deleted because it's a main category.`,generalCategoryCannotDeleteAlert:"General category cannot be deleted.",updatePrice:"Update price",assignCategory:"Assign category",archive:"Archive",noProductsYet:"No products yet",costPrice:"Cost",unit:"Units",productsCount:"products",allStock:"All stock",lowStockFilter:"Low stock",outOfStock:"Out of stock",overstock:"Overstock",newest:"Newest",priceHighLow:"Price (High-Low)",priceLowHigh:"Price (Low-High)",stockHighLow:"Stock (High-Low)",stockLowHigh:"Stock (Low-High)",inStock:"In Stock",critical:"Critical",depleted:"Depleted",cost:"Cost",minStock:"Min. Stock",view:"View",viewProduct:"View product",mainCategories:{products:"Products",services:"Services"},createCategoryFirst:"You need to create a new category first.",productServiceName:"Product/Service Name",selectFromList:"Select product from list",productsFound:"products found",editProduct:"Edit Product",enterProductInfo:"Fill in product information and update stock status",generalInfo:"GENERAL INFORMATION",priceAndStock:"PRICE AND STOCK",notes:"NOTES",namePlaceholder:"Product/service name",unitPlaceholder:"Unit (e.g: pcs, kg, hour)",descriptionPlaceholder:"Product features, warranty information etc.",useCustomTax:"Use custom VAT rate",customTaxNote:"You can set a different VAT rate for this product. If left blank, category VAT will be used.",categoryTax:"Category VAT",salePrice:"Sale Price",stockQuantity:"Stock Quantity",criticalStock:"Critical Stock",customTaxRate:"Custom Tax Rate",taxRatePlaceholder:"18.0",customTaxRateHelper:"Custom VAT rate for this product. Overrides category VAT.",noCategoriesFound:"No categories found",useCustomTaxRate:"Use custom VAT rate",description:"Description",categoryModal:{titleNew:"Add Category",titleEdit:"Edit Category",subtitleNew:"Save new product category.",subtitleEdit:"Update category details.",parentLabel:"Parent Category",parentHelper:"Which main category will this belong to?",nameLabel:"Category name",namePlaceholder:"e.g., Electronics",taxLabel:"VAT Rate (%)",taxPlaceholder:"e.g., 18",taxHelperChildOverrides:"If subcategory has a VAT rate, it overrides parent VAT.",taxHelperDefault:"Default VAT rate for products in this category.",nameRequired:"Category name is required",parentRequired:"Parent category selection is required",taxInvalid:"VAT rate must be between 0-100",nameExists:"This category already exists"}},Tj={title:"Chart of Accounts",subtitle:"Manage your accounting chart of accounts",newAccount:"New Account",search:"Search by account code or name...",code:"Code",accountName:"Account Name",type:"Type",balance:"Balance",status:"Status",actions:"Actions",accountsRegistered:"accounts registered",clickToEdit:"Click on account name, code or balance to edit",addAccountTip:"Use the button above to add a new account",active:"Active",passive:"Inactive",allSummed:"all summed",accountTypes:{all:"All",asset:"Asset",liability:"Liability",equity:"Equity",revenue:"Revenue",expense:"Expense"},accountTypesPlural:{asset:"Assets",liability:"Liabilities",equity:"Equity",revenue:"Revenue",expense:"Expenses"},statusLabels:{active:"Active",inactive:"Inactive"},tooltips:{editHint:"Click on account row to edit"},accountNames:{100:"CURRENT ASSETS",101:"Cash",102:"Banks",120:"Accounts Receivable",150:"FIXED ASSETS",200:"SHORT-TERM LIABILITIES",201:"Accounts Payable",300:"EQUITY",600:"REVENUES",601:"Sales Revenue",602:"Service Revenue",700:"EXPENSES",701:"Rent Expenses",702:"Personnel Expenses",703:"Invoice Expenses"},accountTypeLabels:{asset:"Asset",liability:"Liability",equity:"Equity",revenue:"Revenue",expense:"Expense"}},Ej={title:"Invoices",newInvoice:"New Invoice",editInvoice:"Edit Invoice",enterInvoiceInfo:"Enter account details and product details",deleteConfirm:"Are you sure you want to delete this invoice?",deleteSuccess:"Invoice deleted",search:"Search invoice number or account...",filterAll:"All Statuses",invoicesRegistered:"invoices registered",inArchive:"in archive",noInvoices:"No invoices yet",noInvoicesFound:"No invoices found",showVoided:"Show Voided",hideVoided:"Hide Voided",noInvoicesDesc:"Start by creating your first invoice.",noInvoicesFoundDesc:"No invoices match your search criteria.",createFirstInvoice:"Create First Invoice",invoiceNumber:"Invoice",customer:"Account",date:"Date",amount:"Amount",status:"Status",actions:"Actions",view:"View",edit:"Edit",download:"Download",delete:"Delete",viewInvoice:"View invoice",createInvoice:"Create Invoice",selectInvoiceType:"Select invoice type",newSale:"New Sale",newSaleDescription:"Create a new sale record and issue invoice",newSaleNote:"Sale and invoice will be created automatically",existingSale:"Existing Sale",existingSaleDescription:"Issue invoice for a previously made sale",existingSaleNote:"Only invoice information can be edited",returnInvoice:"Return Invoice",returnInvoiceDescription:"Create a return/refund invoice for a previously issued invoice",returnInvoiceNote:"Return will be created by selecting from existing invoices",invoiceNumberAutoGenerated:"Invoice number is auto-generated",invoiceType:"Invoice Type",productInvoice:"Product Invoice (Normal)",selectInvoiceToReturn:"-- Select invoice to return --",invoiceToReturn:"Invoice to Return (required)",returnInvoiceAutoLoad:" Selected invoice products will be automatically loaded with negative quantities.",issueDate:"Issue Date",dueDate:"Due Date",customerName:"Account Name",customerSearchPlaceholder:"Search account or enter new account name",productsAndServices:"Products and Services",addLine:"Add Line",description:"Description",quantity:"Quantity",unitPriceExclVAT:"Unit Price (Excl. VAT)",totalInclVAT:"Total (Incl. VAT)",notes:"Notes",notesPlaceholder:"Additional notes related to the sale",autoGenerated:"Auto generated",statusCompleted:"Completed",statusPending:"Pending",statusCancelled:"Cancelled",enterSaleInfo:"Enter sale information",productServiceDescription:"Product or service description",subtotalExclVAT:"Subtotal (Excl. VAT)",vat:"VAT",discount:"Discount",grandTotalInclVAT:"Grand Total (Incl. VAT)",grandTotalExclVAT:"Grand Total (Excl. VAT)",createInvoiceFromSale:"Create Invoice from Sale",completeInvoiceInfo:"Complete invoice information",invoiceInfo:"Invoice Information",invoiceStatus:"Invoice Status",invoiceNotes:"Invoice Notes",invoiceTotals:"Invoice Totals",amountExclVATLabel:"Amount (Excl. VAT)",amountExclTax:"Amount (Excl. VAT)"},Dj={title:"Expenses",newExpense:"New Expense",deleteConfirm:"Are you sure you want to delete this expense?",deleteSuccess:"Expense deleted",deleteError:"Failed to delete expense",search:"Search expense description or supplier...",filterAll:"All Statuses",expensesRegistered:"expenses registered",noExpenses:"No expenses yet",noExpensesFound:"No expenses found",noExpensesDesc:"Start by recording your first expense.",noExpensesFoundDesc:"No expenses match your search criteria.",createFirstExpense:"Create First Expense",description:"Description",supplier:"Supplier",category:"Category",date:"Date",amount:"Amount",status:"Status",actions:"Actions",view:"View",edit:"Edit",download:"Download",delete:"Delete",exportCsv:"Export CSV",viewExpense:"View expense",enterExpenseDetails:"Enter expense details",editExpense:"Edit Expense",enterExpenseInfo:"Enter expense information",expenseNumber:"Expense Number",expenseDate:"Expense Date",paymentDate:"Payment Date",addExpense:"Add Expense",supplierPlaceholder:"Enter supplier name...",descriptionPlaceholder:"Expense description...",totalExpense:"Total Expense",receiptUrl:"Receipt/Invoice URL",receiptUrlHelper:"You can add a link to receipt or invoice image/PDF"},_j={title:"Accounts",newCustomer:"New Account",search:"Search accounts...",customersRegistered:"accounts registered",noCustomers:"No accounts yet",noCustomersFound:"No accounts found",noCustomersDesc:"Start by adding your first account.",noCustomersFoundDesc:"No accounts match your search criteria.",createFirstCustomer:"Add First Account",name:"Account Name",email:"Email",phone:"Phone",totalInvoices:"Total Invoices",totalAmount:"Total Amount",actions:"Actions",importCSV:"Import CSV/Excel",downloadTemplate:"Download Template",address:"Address",emailPlaceholder:"account@example.com",addressPlaceholder:"Complete address information...",addCustomer:"Add Account",selectFromList:"Select account from list",customersFound:"accounts found",enterCustomerInfo:"Enter account information",editCustomer:"Edit Account",taxNumber:"Tax Number",company:"Company Name",namePlaceholder:"John Smith",companyPlaceholder:"ABC Technology Ltd.",duplicate:{title:"Duplicate Email Found",message:"An account is already registered with this email ({{email}}): {{name}}. Please select or edit the existing record from the list.",openExisting:"Open existing account"},import:{noDataFound:"No data found in the file.",noCustomersFound:"No accounts found to import in the file.",success:"{{count}} accounts imported successfully!",error:"An error occurred during import."}},Pj={title:"Suppliers",newSupplier:"New Supplier",search:"Search suppliers...",suppliersRegistered:"suppliers registered",noSuppliers:"No suppliers yet",noSuppliersFound:"No suppliers found",noSuppliersDesc:"Start by adding your first supplier.",noSuppliersFoundDesc:"No suppliers match your search criteria.",createFirstSupplier:"Add First Supplier",name:"Name",email:"Email",phone:"Phone",totalExpenses:"Total Expenses",totalAmount:"Total Amount",actions:"Actions",modal:{newTitle:"Add New Supplier",editTitle:"Edit Supplier",subtitle:"Enter supplier details",nameLabel:"Supplier Name",companyLabel:"Company Name",emailLabel:"Email",phoneLabel:"Phone",categoryLabel:"Category",taxNumberLabel:"Tax Number",addressLabel:"Address",namePlaceholder:"ABC Supply Ltd.",companyPlaceholder:"ABC Supply Inc.",emailPlaceholder:"info@abcsupply.com",phonePlaceholder:"+1 555 123 4567",taxNumberPlaceholder:"Tax ID",addressPlaceholder:"Full address information..."}},Ij={title:"Bank Accounts",newAccount:"New Account",search:"Search bank name, account name or number...",filterAll:"All Accounts",accountsRegistered:"accounts registered",totalBalance:"Total balance",noBanks:"No bank accounts yet",noBanksFound:"No accounts found",noBanksDesc:"Start by adding your first bank account.",noBanksFoundDesc:"No accounts match your search criteria.",createFirstAccount:"Add First Account",bankName:"Bank",accountName:"Account Name",accountNumber:"Account No",balance:"Balance",status:"Status",actions:"Actions",editAccount:"Edit Account",enterAccountInfo:"Enter bank account information",selectBank:"Select bank",accountNamePlaceholder:"Company Name or Person Name",accountType:"Account Type",accountTypes:{checking:"Checking Account",savings:"Savings Account",business:"Business Account"},ibanAutoFormat:"IBAN will be formatted automatically",currentBalance:"Current Balance",currency:"Currency",accountActive:"Account active",addAccount:"Add Account",routingNumber:"Routing Number (ABA)",swiftBic:"SWIFT/BIC",branchCode:"Branch Code",deleteConfirm:"Are you sure you want to delete this bank account?"},Mj={title:"Settings",subtitle:"Manage your system and account settings",save:"Save",cancel:"Cancel",profile:"Profile",company:"Company Information",system:"System Settings",security:"Security",data:"Data Management",currency:"Currency",language:"Language",notifications:"Notifications",theme:"Theme",success:"Success",error:"Error",saved:"Settings saved",saveFailed:"Settings could not be saved",companyFields:{officialName:"Legal Company Name",brandName:"Invoice/Brand Name",brandNameHelper:"This will appear as the brand name on invoices and public screens.",officialNameTooltip:"Only the owner or an admin can update the legal company name",officialNameOwnerOnly:"This field can only be changed by the company owner."}},Rj={twofa:{reminderTitle:"Enable Two-Factor Authentication",reminderDesc:"For stronger account protection, please enable 2FA.",modalTitle:"Secure Your Account",modalMessage:"Two-Factor Authentication (2FA) significantly increases your account security. Would you like to enable it now?",enableNow:"Enable Now",neverRemind:"Never remind again"}},zj={common:{dataLoadError:"An error occurred while loading data"},invoices:{updateSuccess:"Invoice updated",updateError:"Invoice could not be updated",createPartialError:"Invoice created, but sale record could not be created",createWithSaleSuccess:"Invoice and sale created",cancelSuccess:"Invoice voided",cancelError:"Invoice could not be voided",restoreSuccess:"Invoice restored",restoreError:"Invoice could not be restored",createSuccess:"Invoice created successfully"},customers:{updateSuccess:"Account updated",createSuccess:"Account added",deleteSuccess:"Account deleted",deleteError:"Account could not be deleted"},suppliers:{updateSuccess:"Supplier updated",createSuccess:"Supplier added",deleteSuccess:"Supplier deleted",deleteError:"Supplier could not be deleted"},sales:{customerNotSelected:"No account selected! Please choose a valid account.",insufficientStock:" Insufficient stock! {{name}} - Available: {{available}}, Requested: {{requested}}",createSuccess:"Sale saved",updateSuccess:"Sale updated",localSaved:"Sale saved locally (offline)",stockUpdateFailed:"Sale saved but stock could not be updated",deleteError:"Sale could not be deleted",deleteSuccess:"Sale deleted successfully",customerNotFound:"Account not found! Please create an account first."},expenses:{updateSuccess:"Expense updated",createSuccess:"Expense added",cancelSuccess:"Expense voided",cancelError:"Expense could not be voided",statusUpdateSuccess:"Expense status updated",restoreSuccess:"Expense restored",restoreError:"Expense could not be restored"},products:{updateSuccess:"Product updated",createSuccess:"Product added",deleteSuccess:"Product deleted",deleteError:"Product could not be deleted",bulkRemoved:"{{count}} products removed",bulkNotFound:"Selected products not found",bulkArchived:"{{count}} products archived",bulkAlreadyArchived:"Selected products are already archived",bulkPriceUpdateSaved:"Your selection for bulk price update is saved. You can edit on the product detail."},categories:{added:"Category {{name}} added (VAT: %{{taxRate}})",addError:"Category could not be added",updateSuccess:"Category updated",deleteSuccess:"Category deleted",assignmentInfo:"For category assignment, use the category layout on the left panel."},bank:{deleteError:"Bank account could not be deleted"},quotes:{createSuccess:"Quote created",createError:"Quote could not be created"}},Lj={invoices:{overdue:{title:"Overdue invoice payment",desc:"{{invoiceNumber}} - {{customerName}} ({{daysOverdue}} days overdue)"},upcoming:{title:"Upcoming invoice payment",desc:"{{invoiceNumber}} - {{customerName}} ({{daysLeft}} days left)"},created:{title:"New invoice created",desc:"Invoice {{invoiceNumber}} for {{customerName}} is ready."}},expenses:{overdue:{title:"Overdue expense payment",desc:"{{description}} - {{supplierName}} ({{daysOverdue}} days overdue)"},upcoming:{title:"Upcoming expense payment",desc:"{{description}} - {{supplierName}} ({{daysLeft}} days left)"},created:{title:"New expense recorded",desc:"{{supplierName}} - {{description}}: {{amount}}"}},products:{lowStock:{title:"Low stock warning",desc:"{{name}} - Stock below minimum level ({{stock}}/{{min}})"},outOfStock:{title:"Stock depleted",desc:"{{name}} - Stock is depleted!"}},quotes:{expired:{title:"Quote expired",desc:"{{quoteNumber}} - expired"},dueSoon:{title:"Quote expiring soon",desc:"{{quoteNumber}} - {{diffDays}} days left"}},customers:{created:{title:"New account added",desc:"{{name}} has been registered."}},suppliers:{created:{title:"New supplier added",desc:"{{name}} has been registered."}},sales:{created:{title:"New sale recorded",desc:"{{customerName}} - {{summary}}: {{totalAmount}}"}},plan:{limit:{title:"Plan limit warning",invoices:{desc:"You are nearing this month's invoice limit ({{used}}/{{limit}})."},expenses:{desc:"You are nearing this month's expense limit ({{used}}/{{limit}})."}}}},Oj={title:"Sales",newSale:"New Sale",totalSales:"Total Sales",totalSalesCount:"Total Sales Count",completed:"Completed",salesList:"Sales List",salesRegistered:"sales registered",search:"Search by sale number, account or product...",noSales:"No sales yet",noSalesFound:"No sales found",noSalesDesc:"Start by adding your first sale.",noSalesFoundDesc:"No sales match your search criteria.",createFirstSale:"Add First Sale",sale:"Sale",customer:"Account",productService:"Product/Service",amount:"Amount",status:"Status",date:"Date",actions:"Actions",viewSale:"View sale",editSale:"Edit sale",deleteSale:"Delete sale",deleteConfirm:"Are you sure you want to delete this sale?",createInvoice:"Create Invoice",download:"Download",subtitle:"Manage your sales records",saleCompleted:"Sale Completed!",saleCompletedDesc:"The sale was successfully recorded.",createInvoiceQuestion:"Would you like to create an invoice?",autoGenerated:"Auto generated",statusCompleted:"Completed",statusPending:"Pending",statusCancelled:"Cancelled",saleNumber:"Sale Number",saleDate:"Sale Date",autoNumberNote:"Number will be generated automatically upon saving",unitPriceInclVAT:"Unit Price (VAT Incl.)",totalInclVAT:"Total (VAT Incl.)",unitPriceExclVAT:"Unit Price (Excl. VAT)",totalExclVAT:"Total (Excl. VAT)",notesPlaceholder:"Additional notes related to the sale",addSale:"Add Sale",enterSaleInfo:"Enter sale information",saleSummary:"Sale Summary",invoiceWillBeDownloaded:"If an invoice is created, it will be automatically downloaded in PDF format.",confirmInvoiceCreation:"Create invoice?",invoiceWillOpen:"The invoice will open in the viewing window after creation.",recordOnlySale:"Record Sale Only",recordSaleWithInvoice:"Record Sale + Invoice",confirmInvoiceAction:"Yes, Create",creatingInvoice:"Creating...",selectExistingSale:"Select Existing Sale",selectSaleForInvoice:"Select a sale to create invoice",searchSalesPlaceholder:"Search by sale number, account or product...",noInvoiceableSales:"No invoiceable sales found",changeSearchCriteria:"Try changing your search criteria",allSalesInvoiced:"All sales have been invoiced",pieces:"pcs",saleInfo:"Sale Information",salesWaitingForInvoice:"Sales waiting for invoice: {{count}}"},Fj={method:"Payment Method",cash:"Cash",card:"Credit/Debit Card",transfer:"Bank Transfer",check:"Check"},Bj={title:"Reports",subtitle:"Detailed analysis reports for your business",reportDate:"Report Date",overview:"Overview",basicMetrics:"Basic Metrics",totalIncome:"Total Income",totalExpense:"Total Expense",netProfit:"Net Profit",totalCustomers:"Total Accounts",net:"Net",last6MonthsPerformance:"Last 6 months performance (newest  oldest)",financialHealth:"Financial Health",profitMargin:"Profit Margin",growthRate:"Growth Rate",averageSale:"Average Sale",activeCustomers:"Active Accounts",paymentStatusAnalysis:"Payment Status Analysis",invoiceStatuses:"Invoice Statuses",expenseStatuses:"Expense Statuses",vatAnalysis:"VAT Analysis",vatAnalysisSubtitle:"Track how much VAT you owe based on paid invoices",currentYearLabel:"Current Year ({{year}})",vatYearToDate:"Year-to-date VAT",vatChangeVsLastYear:"{{percent}} vs last year ({{lastYear}})",vatThisMonth:"VAT this month",vatChangeVsPreviousMonth:"{{percent}} vs previous month ({{previous}})",vatAverageSixMonths:"Avg. VAT (6 months)",vatAverageHint:"Rolling average based on the last 6 months of paid VAT",vatMonthlyBreakdown:"Monthly VAT breakdown",lastMonthsPerformance:"Last {{count}} months",noVatData:"No VAT data yet",revenueAnalysis:"Revenue Analysis",productBasedSales:"Product-Based Sales",sales:"sales",avg:"Avg",monthlyRevenueTrend:"Monthly Revenue Trend",expenseAnalysis:"Expense Analysis",categoryBasedExpenses:"Category-Based Expenses",expenses:"expenses",monthlyExpenseTrend:"Monthly Expense Trend",topSuppliers:"Top Suppliers by Expense",lastExpense:"Last",recentExpenses:"Recent Expenses",expenseCategoryDistribution:"Expense Category Distribution",customerAnalysis:"Account Analysis",topCustomers:"Top Accounts",purchases:"purchases",last:"Last",customerStatistics:"Account Statistics",activeCustomersCount:"Active Accounts",revenuePerCustomer:"Revenue Per Account",salesPerCustomer:"Sales Per Account",averagePurchases:"Average Purchases",maxPurchases:"Max Purchases",performanceReports:"Performance Reports",kpiDashboard:"KPI Dashboard",increase:"Increase",decrease:"Decrease",monthlyPerformanceTable:"Monthly Performance Table",total6Months:"Total (6 Months)",totalIncome6Months:"Total Income (6 Months)",totalExpense6Months:"Total Expense (6 Months)",netProfit6Months:"Net Profit (6 Months)",month:"Month",profit:"Profit",profitMarginPercent:"Profit Margin",expenseRatio:"Expense Ratio",expenseEfficiency:"Expense Efficiency Analysis",expenseCategoryPerformance:"Expense Category Performance",noSupplier:"No Supplier",noCustomer:"No Account",quoteAnalysis:"Quote Analysis",quoteStatuses:"Quote Statuses",totalQuotes:"Total Quotes",acceptedRate:"Acceptance Rate",averageQuote:"Average Quote",expiringSoon:"Expiring Soon",recentQuotes:"Recent Quotes",daysLeft:"Days Left",quotes:"quotes"},Uj={equipment:"Equipment",utilities:"Utilities",rent:"Rent",salaries:"Salaries",personnel:"Personnel",supplies:"Supplies",marketing:"Marketing",travel:"Travel",insurance:"Insurance",taxes:"Taxes",other:"Other"},Vj={descriptionRequired:"Please enter a description",amountRequired:"Please enter a valid amount",categoryRequired:"Please select a category",dueDateRequired:"Please select a due date",saleDateRequired:"Sale date is required",unitPriceRequired:"Unit price must be greater than zero",quantityRequired:"Quantity must be greater than zero",customerNameRequired:"Account name is required",customerNotFound:"Account not found in system. Please select from list.",productNameRequired:"Product or service name is required",productNotFound:"Product not found in system. Please select from list.",skuRequired:"SKU is required",validPriceRequired:"Please enter a valid price",validStockRequired:"Please enter a valid stock quantity"},qj={title:"Archive",subtitle:"Your completed and historical records",totalArchive:"Total Archive",archivedInvoices:"Archived Invoices",archivedExpenses:"Archived Expenses",archivedSales:"Archived Sales",totalContacts:"Total Contacts",searchPlaceholder:"Search in archive...",clearFilters:"Clear Filters",tabs:{all:"All",invoices:"Invoices",expenses:"Expenses",sales:"Sales",contacts:"Contacts"},sections:{archivedInvoices:"Archived Invoices",archivedExpenses:"Archived Expenses",archivedSales:"Archived Sales",customers:"Accounts",suppliers:"Suppliers",archiveSummary:"Archive Summary"},empty:{invoices:"No archived invoices",invoicesHelper:"Paid or overdue invoices will appear here",expenses:"No archived expenses",expensesHelper:"Paid expenses will appear here",sales:"No archived sales",salesHelper:"Completed sales will appear here",customers:"No accounts found",suppliers:"No suppliers found"},table:{invoice:"Invoice",customer:"Account",amount:"Amount",status:"Status",date:"Date",actions:"Actions",expense:"Expense",supplier:"Supplier",category:"Category",sale:"Sale",product:"Product/Service",registered:"Registered"},actions:{view:"View",download:"Download"},summary:{financial:"Financial Summary",totalIncome:"Total Archived Income",totalExpense:"Total Archived Expense",netArchive:"Net Archive",recordCounts:"Record Counts"},info:{title:"About Archive",description:"The archive page stores your completed transactions. Paid invoices, approved expenses, and completed sales are automatically listed here. These records are read-only and can be used for historical analysis and audit purposes."}},$j={totalCredit:"Total Credit",totalDebit:"Total Debit",netBalance:"Net Balance",entry:{invoicePrefix:"Invoice",expensePrefix:"Expense",salePrefix:"Direct Sale"}},Hj=JSON.parse(`{"terms":{"title":"Terms of Service","lastUpdated":"Last updated: {{date}}","section1":{"title":"1. Service Overview","content":"Comptario is a cloud-based pre-accounting software platform designed to help businesses manage their invoices, expenses, and financial operations. The platform offers multi-currency support, automated VAT calculations, and integrated reporting tools."},"section2":{"title":"2. User Accounts and Registration","content":"To use Comptario, you must create an account by providing accurate and complete information. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account."},"section3":{"title":"3. Acceptable Use","content":"You agree to use Comptario only for lawful purposes and in accordance with these Terms. You may not use the service to engage in any illegal activities, violate intellectual property rights, or disrupt the platform's functionality."},"section4":{"title":"4. Data Ownership and Privacy","content":"You retain ownership of all data you input into Comptario. We process your data in accordance with our Privacy Policy and applicable data protection laws, including GDPR. We implement appropriate security measures to protect your information."},"section5":{"title":"5. Service Availability","content":"While we strive to maintain 99.9% uptime, Comptario may experience occasional service interruptions for maintenance, updates, or unforeseen technical issues. We will provide advance notice for planned maintenance whenever possible."},"section6":{"title":"6. Subscription and Billing","content":"Comptario offers various subscription plans with different features and usage limits. Billing is processed automatically according to your chosen plan. You may upgrade, downgrade, or cancel your subscription at any time."},"section7":{"title":"7. Data Backup and Export","content":"We perform regular automated backups of your data. You can export your data at any time in standard formats. Upon account termination, we will retain your data for 90 days before permanent deletion, unless required otherwise by law."},"section8":{"title":"8. Limitation of Liability","content":"Comptario's liability is limited to the amount you have paid for the service in the 12 months preceding any claim. We are not liable for indirect, incidental, or consequential damages."},"section9":{"title":"9. Intellectual Property","content":"The Comptario platform, including its software, design, and content, is protected by intellectual property laws. You are granted a limited license to use the service according to these Terms."},"section10":{"title":"10. Termination","content":"Either party may terminate this agreement at any time. Upon termination, your access to the service will cease, and we will delete your data according to our data retention policy."},"section11":{"title":"11. Governing Law","content":"These Terms are governed by the laws of the European Union and the jurisdiction where Comptario operates. Any disputes will be resolved through binding arbitration."},"section12":{"title":"12. Changes to Terms","content":"We may update these Terms from time to time. We will notify you of significant changes via email or through the platform. Continued use of Comptario after changes constitutes acceptance of the new Terms."}},"privacy":{"title":"Privacy Policy","lastUpdated":"Last updated: {{date}}","section1":{"title":"1. Information We Collect","content":"We collect information you provide directly (account details, financial data), information automatically collected (usage data, IP addresses), and information from third parties (payment processors, integrations)."},"section2":{"title":"2. How We Use Your Information","content":"We use your information to provide and improve our services, process payments, communicate with you, ensure security, and comply with legal obligations."},"section3":{"title":"3. Information Sharing","content":"We do not sell or rent your personal information. We may share information with service providers, for legal compliance, or with your explicit consent."},"section4":{"title":"4. Data Security","content":"We implement industry-standard security measures including encryption in transit and at rest, regular security audits, access controls, and secure data centers."},"section5":{"title":"5. Your Rights (GDPR)","content":"Under GDPR, you have rights to access, rectify, erase, restrict processing, data portability, and object to processing of your personal data. You may also withdraw consent and file complaints with supervisory authorities."},"section6":{"title":"6. Data Retention","content":"We retain your data as long as your account is active and for a reasonable period afterward for legal and business purposes. You may request data deletion at any time."},"section7":{"title":"7. International Transfers","content":"Your data is primarily processed within the EU. Any international transfers are protected by appropriate safeguards such as Standard Contractual Clauses."},"section8":{"title":"8. Cookies and Tracking","content":"We use cookies and similar technologies for authentication, preferences, analytics, and security. You can control cookie settings through your browser."},"section9":{"title":"9. Third-Party Services","content":"Our platform may integrate with third-party services. Their privacy practices are governed by their own privacy policies, which we encourage you to review."},"section10":{"title":"10. Children's Privacy","content":"Comptario is not intended for users under 18. We do not knowingly collect personal information from children under 18."},"section11":{"title":"11. Contact Information","content":"For privacy-related questions or to exercise your rights, contact our Data Protection Officer at privacy@comptario.com or through our support portal."}},"cookies":{"title":"Cookie Policy","lastUpdated":"Last updated: {{date}}","section1":{"title":"1. What Are Cookies","content":"Cookies are small text files stored on your device when you visit our website. They help us provide you with a better experience by remembering your preferences and analyzing site usage."},"section2":{"title":"2. Types of Cookies We Use","content":"We use essential cookies (necessary for basic functionality), functional cookies (remember preferences), analytics cookies (understand usage patterns), and security cookies (protect against threats)."},"section3":{"title":"3. Essential Cookies","content":"These cookies are necessary for the website to function properly. They enable core functionality such as user authentication, session management, and security features. These cannot be disabled."},"section4":{"title":"4. Functional Cookies","content":"These cookies remember your preferences and choices to provide enhanced functionality, such as language selection, timezone settings, and user interface customizations."},"section5":{"title":"5. Analytics Cookies","content":"We use analytics cookies to understand how visitors interact with our website. This helps us improve our services and user experience. All analytics data is aggregated and anonymized."},"section6":{"title":"6. Third-Party Cookies","content":"Some cookies are set by third-party services we use, such as analytics providers or payment processors. These are governed by the respective third parties' privacy policies."},"section7":{"title":"7. Cookie Duration","content":"Session cookies are deleted when you close your browser. Persistent cookies remain on your device for a set period or until you delete them manually."},"section8":{"title":"8. Managing Cookies","content":"You can control and manage cookies through your browser settings. You can delete existing cookies and set your browser to accept or reject cookies. Note that disabling cookies may affect website functionality."},"section9":{"title":"9. Cookie Consent","content":"By using our website, you consent to the use of cookies as described in this policy. You can withdraw your consent at any time by adjusting your browser settings."},"section10":{"title":"10. Updates to Cookie Policy","content":"We may update this Cookie Policy from time to time. We will notify you of significant changes by posting the updated policy on our website with a new effective date."}},"dpa":{"title":"Data Processing Addendum (DPA)","lastUpdated":"Last updated: {{date}}","section1":{"title":"1. Definitions and Scope","content":"This Data Processing Addendum (\\"DPA\\") forms part of the Terms of Service between you (\\"Controller\\") and Comptario (\\"Processor\\"). It governs the processing of personal data in accordance with GDPR and other applicable data protection laws."},"section2":{"title":"2. Data Processing Details","content":"Comptario processes personal data only on documented instructions from the Controller, for the purposes of providing the accounting software services, and in accordance with applicable data protection laws."},"section3":{"title":"3. Categories of Data","content":"We process the following categories of personal data: contact information (names, addresses, emails), financial data (invoices, payments, transactions), user account data (login credentials, preferences), and usage data (access logs, analytics)."},"section4":{"title":"4. Data Subject Rights","content":"Comptario assists the Controller in fulfilling data subject rights requests, including access, rectification, erasure, restriction, portability, and objection. We provide necessary tools and cooperation to enable compliance."},"section5":{"title":"5. Security Measures","content":"We implement appropriate technical and organizational measures to ensure data security, including encryption, access controls, regular security assessments, staff training, and incident response procedures."},"section6":{"title":"6. Sub-processors","content":"Comptario may engage sub-processors to assist in providing services. All sub-processors are subject to data protection obligations equivalent to those in this DPA. A current list of sub-processors is available upon request."},"section7":{"title":"7. Data Transfers","content":"Personal data is primarily processed within the EU/EEA. Any transfers to third countries are protected by appropriate safeguards such as Standard Contractual Clauses or adequacy decisions."},"section8":{"title":"8. Data Breach Notification","content":"Comptario will notify the Controller of any personal data breaches without undue delay and within 72 hours of becoming aware of the breach, providing all relevant information for assessment and reporting obligations."},"section9":{"title":"9. Data Protection Impact Assessment","content":"Upon request, Comptario will provide reasonable assistance to the Controller in conducting Data Protection Impact Assessments (DPIAs) and prior consultations with supervisory authorities."},"section10":{"title":"10. Audit and Compliance","content":"Comptario maintains records of processing activities and makes available to the Controller information necessary to demonstrate compliance with data protection obligations, including audit rights subject to confidentiality obligations."},"section11":{"title":"11. Data Return and Deletion","content":"Upon termination of services, Comptario will, at the Controller's choice, return or delete all personal data and existing copies, unless retention is required by applicable law."},"section12":{"title":"12. Liability and Indemnification","content":"Each party's liability is limited to damages directly caused by its breach of this DPA. Comptario will indemnify the Controller against claims resulting from Comptario's breach of its data protection obligations."}},"subprocessors":{"title":"List of Sub-processors","lastUpdated":"Last updated: {{date}}","intro":"Comptario may engage the following sub-processors to assist in providing our services. All sub-processors are subject to strict data protection obligations.","section1":{"title":"1. Cloud Infrastructure Providers","aws":{"name":"Amazon Web Services (AWS)","location":"EU (Frankfurt)","purpose":"Cloud hosting and infrastructure services","safeguards":"AWS GDPR compliance, EU Data Residency"},"digitalocean":{"name":"DigitalOcean","location":"EU (Amsterdam)","purpose":"Additional cloud hosting and backup services","safeguards":"Standard Contractual Clauses, EU hosting"}},"section2":{"title":"2. Payment Processors","stripe":{"name":"Stripe","location":"EU/US","purpose":"Payment processing and subscription management","safeguards":"PCI DSS compliance, Standard Contractual Clauses"},"paypal":{"name":"PayPal","location":"EU/US","purpose":"Alternative payment processing","safeguards":"PCI DSS compliance, Privacy Shield successor"}},"section3":{"title":"3. Communication Services","sendgrid":{"name":"SendGrid (Twilio)","location":"EU/US","purpose":"Transactional email delivery","safeguards":"Standard Contractual Clauses, EU processing"},"intercom":{"name":"Intercom","location":"EU/US","purpose":"Support and communication","safeguards":"Standard Contractual Clauses, GDPR compliance"}},"section4":{"title":"4. Analytics and Monitoring","googleanalytics":{"name":"Google Analytics","location":"EU/US","purpose":"Website analytics and performance monitoring","safeguards":"Google Analytics 4 with EU data processing"},"sentry":{"name":"Sentry","location":"EU/US","purpose":"Error monitoring and application performance","safeguards":"Standard Contractual Clauses, data anonymization"}},"section5":{"title":"5. Security Services","cloudflare":{"name":"Cloudflare","location":"Global (EU nodes)","purpose":"CDN, DDoS protection, and security services","safeguards":"EU Data Localization, Standard Contractual Clauses"}},"section6":{"title":"6. Backup and Archive Services","backblaze":{"name":"Backblaze","location":"EU","purpose":"Data backup and archival services","safeguards":"Encryption at rest and in transit, EU hosting"}},"notifications":{"title":"Sub-processor Change Notifications","content":"We will provide 30 days' advance notice of any new sub-processors or changes to existing ones. You may object to such changes, and if we cannot resolve your concerns, you may terminate your agreement with us."},"contact":{"title":"Questions About Sub-processors","content":"If you have questions about our sub-processors or need additional information about data protection safeguards, please contact us at privacy@comptario.com."}},"common":{"backToApp":" Back to App","effectiveDate":"Effective Date","tableOfContents":"Table of Contents","printPage":"Print this page","downloadPdf":"Download PDF","lastUpdated":"Last updated","contactUs":"Contact us at","questionsContact":"If you have any questions about this {{document}}, please contact us at {{email}}.","documentType":{"terms":"Terms of Service","privacy":"Privacy Policy","cookies":"Cookie Policy","dpa":"Data Processing Addendum","subprocessors":"Sub-processors List"},"navigation":{"terms":"Terms","privacy":"Privacy","cookies":"Cookies","dpa":"DPA","subprocessors":"Sub-processors"}}}`),Kj={banner:{title:"Cookie Preferences",description:"This website uses cookies to improve your experience. You can choose which cookies to allow.",acceptAll:"Accept All",rejectAll:"Reject All",managePreferences:"Manage Preferences",savePreferences:"Save Preferences",close:"Close"},modal:{title:"Cookie Preferences",description:"You can review cookie categories and set your preferences. Read the description of each category to decide which cookies to allow.",necessary:{title:"Necessary Cookies",description:"These cookies are essential for the website to function properly and cannot be disabled. They are usually set in response to actions like logging in or filling out forms.",alwaysActive:"Always active"},analytics:{title:"Analytics Cookies",description:"These cookies help us understand how the website is used. They collect information about which pages are visited most and how users navigate the site.",enabled:"Enabled",disabled:"Disabled"},marketing:{title:"Marketing Cookies",description:"These cookies are used to show you more relevant ads. They may help our advertising partners build a profile of your interests.",enabled:"Enabled",disabled:"Disabled"},acceptSelected:"Accept Selected",acceptAll:"Accept All",rejectAll:"Reject All",cancel:"Cancel"},notice:{updated:"Your cookie preferences have been updated.",saved:"Cookie preferences saved."},categories:{necessary:"Necessary",analytics:"Analytics",marketing:"Marketing"}},Gj={itemsPerPage:"Items per page",previous:"Previous",next:"Next",range:"{{start}}-{{end}} / {{total}}"},Wj={title:"Fiscal Periods",subtitle:"Manage your fiscal period settings",newPeriod:"New Period",search:"Search periods...",periodsRegistered:"periods registered",noPeriods:"No fiscal periods yet",noPeriodsFound:"No fiscal periods found",noPeriodsDesc:"Start by creating your first fiscal period.",noPeriodsFoundDesc:"No fiscal periods match your search criteria.",createFirstPeriod:"Create First Fiscal Period",periodName:"Period Name",startDate:"Start Date",endDate:"End Date",status:"Status",actions:"Actions",view:"View",edit:"Edit",lock:"Lock",unlock:"Unlock",delete:"Delete",viewPeriod:"View fiscal period",editPeriod:"Edit Fiscal Period",addPeriod:"Add Fiscal Period",enterPeriodInfo:"Enter fiscal period information",periodNamePlaceholder:"e.g: Year 2024",periodDuration:"period duration",days:"days",locked:"Locked",active:"Active",planned:"Planned",statusLabels:{active:"Active",locked:"Locked",planned:"Planned"},lockPeriod:"Lock fiscal period",unlockPeriod:"Unlock fiscal period",lockConfirm:"Are you sure you want to lock this fiscal period? Locked periods cannot be edited.",unlockConfirm:"Are you sure you want to unlock this fiscal period?",deleteConfirm:"Are you sure you want to delete this fiscal period?",validation:{nameRequired:"Period name is required",startDateRequired:"Start date is required",endDateRequired:"End date is required",endDateAfterStart:"End date must be after start date",periodOverlap:"These dates overlap with an existing period",minimumDuration:"Fiscal period must be at least 1 day"},errors:{createFailed:"Failed to create fiscal period",updateFailed:"Failed to update fiscal period",deleteFailed:"Failed to delete fiscal period",lockFailed:"Failed to lock fiscal period",unlockFailed:"Failed to unlock fiscal period",loadFailed:"Failed to load fiscal periods",periodLocked:"This fiscal period is locked and cannot be modified",periodNotFound:"Fiscal period not found",operationNotAllowed:"This operation is not allowed for locked fiscal period"},success:{created:"Fiscal period created successfully",updated:"Fiscal period updated successfully",deleted:"Fiscal period deleted successfully",locked:"Fiscal period locked successfully",unlocked:"Fiscal period unlocked successfully"},widget:{title:"Fiscal Periods",activePeriod:"Active Period",totalPeriods:"Total Periods",lockedPeriods:"Locked Periods",daysRemaining:"Days Remaining",noActivePeriod:"No active period",periodsOverlapping:"Overlapping periods exist",allPeriodsLocked:"All periods are locked",createActivePeriod:"Create active period",managePeriods:"Manage Periods",warnings:{overlapping:"Some fiscal periods overlap",noActive:"No active fiscal period currently",allLocked:"All fiscal periods are locked"}},filters:{showVoided:"Show voided",hideVoided:"Hide voided",voidedRecords:"voided records"}},Yj={members:{title:"Organization Members",subtitle:"Manage your organization members and permissions",search:"Search members...",membersCount:"members",member:"Member",email:"Email",role:"Role",statusLabel:"Status",actions:"Actions",inviteButton:"Send Invitation",sending:"Sending...",table:{name:"Name",email:"Email",role:"Role",lastLogin:"Last Login",joinedAt:"Joined Date",actions:"Actions"},edit:"Edit",cancel:"Cancel",resend:"Resend",makeAdmin:"Make Admin",makeMember:"Make Member",empty:{title:"No members yet",subtitle:"Start by inviting your first team member.",action:"Invite Member"},noMembers:"No members yet",noMembersDesc:"Start by inviting your first team member.",noPendingInvites:"No pending invites",noPendingInvitesDesc:"All invitations have been accepted or expired.",roles:{owner:"Owner",admin:"Administrator",member:"Member",viewer:"Viewer",OWNER:"Owner",ADMIN:"Administrator",MEMBER:"Member"},status:{active:"Active",pending:"Pending",inactive:"Inactive"},permissions:{owner:"Full access to all features and settings",admin:"Full access except billing and organization deletion",member:"Create and edit invoices, expenses, accounts",viewer:"View-only access to all data"},confirmRemove:"Are you sure you want to remove this member?",confirmCancel:"Are you sure you want to cancel this invitation?",inviteSuccess:"Invitation sent successfully",inviteError:"Failed to send invitation",removeSuccess:"Member removed successfully",removeError:"Failed to remove member",updateSuccess:"Member updated successfully",updateError:"Failed to update member",validation:{emailRequired:"Email is required",emailInvalid:"Please enter a valid email address",emailExists:"This email is already invited or is a member"},tryAgain:"Try Again",organization:"Organization",membersLabel:"Members",plan:"Plan",youLabel:"You",remove:{title:"Remove Member",message:"Are you sure you want to remove {{name}} from the organization?",warning:"This action cannot be undone.",confirm:"Yes, Remove",cancel:"Cancel",success:"Member removed successfully",error:"Failed to remove member",cannotRemoveOwner:"Owner role cannot be removed"},updateRole:{success:"Member role updated",error:"Failed to update member role"},invite:{title:"Invite Member",button:"Send Invitation",limitReached:"Plan limit reached. Upgrade your plan to invite more members.",success:"Invitation sent successfully",error:"Failed to send invitation",duplicate:"This email is already invited",form:{email:"Email Address",emailPlaceholder:"example@email.com",role:"Role"}},limitFull:"Member limit reached",pendingInvites:{title:"Pending Invitations",count:"{{count}} pending invitations",resend:"Resend",cancel:"Cancel",cancelConfirm:"Are you sure you want to cancel this invite? ({{email}})",expires:"Expires on {{date}}",resendSuccess:"Invitation resent successfully",cancelSuccess:"Invitation cancelled successfully"}},join:{title:"Join Organization",subtitle:"You have been invited to join {{orgName}}",invitedBy:"Invited by {{name}}",role:"Role: {{role}}",accept:"Accept Invitation",decline:"Decline",expired:{title:"Invitation Expired",subtitle:"This invitation link has expired",action:"Request a new invitation"},invalid:{title:"Invalid Invitation",subtitle:"This invitation link is not valid",action:"Go to homepage"},success:{title:"You're In!",subtitle:"You have successfully joined {{orgName}}",action:"Go to dashboard"},error:{title:"Something Went Wrong",subtitle:"We couldn't process your invitation",tryAgain:"Try again"},alreadyMember:{title:"Already a Member",subtitle:"You already belong to this organization",action:"Open dashboard"},details:{organizationLabel:"Organization",emailLabel:"Invited email",expiresLabel:"Expires on",roleLabel:"Role"},passwordFlow:{title:"Set Your Password",description:"Set a password to create your account for {{email}}. Email verification is not required.",passwordLabel:"Password",passwordPlaceholder:"At least 6 characters",showPassword:"Show",hidePassword:"Hide",submit:"Create Account and Join",submitting:"Saving...",toastSuccess:"Invitation accepted. Welcome!"},loadingState:{title:"Checking invitation...",subtitle:"Please wait while we validate your invite."},guestFallback:{loading:"Invalid invite or loading..."},emailMismatch:{title:"Warning",body:"This invite was sent to {{inviteEmail}}, but you are signed in as {{currentEmail}}.",loginAction:"Sign in as {{inviteEmail}}",registerAction:"Register as {{inviteEmail}}"},accepting:"Joining..."}},Qj={users:{updateConfirm:"Are you sure you want to update this user?",passwordResetConfirm:"Send password reset email?",deactivateConfirm:"Are you sure you want to deactivate this user?",activateConfirm:"Are you sure you want to activate this user?"},tenants:{updatePlanConfirm:"Are you sure you want to update plan to '{{plan}}' for {{name}}?",updateStatusConfirm:"Are you sure you want to update status to '{{status}}' for {{name}}?",updateNextPaymentConfirm:"Are you sure you want to update next payment date to '{{date}}' for {{name}}?",cancelSubscriptionConfirm:"Are you sure you want to cancel subscription for {{name}}?",dangerDeleteTenantConfirm:"Warning! Do you want to permanently delete tenant '{{name}}'? This action cannot be undone."},backups:{deleteConfirm:"Are you sure you want to delete this backup?",deleteOlderThanConfirm:"Are you sure you want to delete all backups older than {{days}} days?"}},Zj={limitExceeded:{title:"Plan limit exceeded",invoicesMessage:"You have reached the maximum number of invoices for your current plan. Upgrade your plan to create more invoices.",expensesMessage:"You have reached the maximum number of expenses for your current plan. Upgrade your plan to add more expenses."}},Xj={header:{title:"Plan & Billing",subtitle:"Manage your subscription, billing cycle, and seats"},managePayments:"Manage Payments",monthly:"Monthly",yearly:"Yearly",yearlyNote:"2 months free",currentPlan:{label:"Current Plan",seatsInUse:"Seats in use",renewalDate:"Renewal Date",cancellationDate:"Cancellation Date",cancelAtPeriodEndNotice:"Your subscription will be cancelled at period end."},changePlan:"Change Plan",plans:{labels:{professional:"Pro",enterprise:"Business",free:"Starter"},bullets:{proIncluded:"Includes 3 users",basicAutomations:"Basic automations",businessIncluded:"Includes 10 users",advancedAutomations:"Advanced automations & roles",freeLimited:"Limited invoices and features"}},prices:{monthly:{free:"0/mo",pro:"29/mo",enterprise:"59/mo"}},configuration:"Configuration",billingCycle:"Billing cycle",seatsAddon:"Additional seats",seatsAddonHelper:"Billed at 5/seat/month. Proration applies.",costPreview:"Cost preview",newSubtotal:"New subtotal",extraSeats:"Extra seats",prorationToday:"Proration today",updatePlan:"Update Plan",amountsNote:"Amounts are indicative. Final charges are shown during checkout.",quickSeatActions:"Quick seat actions",add1SeatNow:"Add 1 seat and charge now",add5SeatsNow:"Add 5 seats and charge now",remove1Seat:"Remove 1 seat",quickTip:"Tip: You can also add seats from the billing portal.",subscriptionStatus:"Subscription status",subscriptionCancelNote:"Cancelling takes effect at period end; you can resume anytime until then.",cancelAtPeriodEndBtn:"Cancel at period end",resumeSubscriptionBtn:"Resume subscription",history:{title:"History",loading:"Loading history",empty:"No records found",type:"Type",plan:"Plan",users:"Users",date:"Date",footerNote:"Events are synchronized from the billing provider periodically."},invoices:{title:"Invoices",loading:"Loading invoices",empty:"No invoices found",invoiceInfo:"Invoice Information",invoiceStatus:"Invoice Status",invoiceNotes:"Invoice Notes",invoiceTotals:"Invoice Totals",notesPlaceholder:"Notes about the invoice...",amountExclTax:"Amount (Excl. VAT)",filters:{status:"Status",all:"All",search:"Search",searchPlaceholder:"Number or currency",from:"From",to:"To",exportCsv:"Export CSV"},table:{number:"Number",date:"Date",amount:"Amount",status:"Status",actions:"Actions"},footerNote:"Invoices are fetched from the billing provider; amounts are shown in the billed currency."}},Jj={invoice:{title:"INVOICE",appSubtitle:"comptario Accounting System",customerInfo:"Account Information",invoiceNumber:"Invoice No",issueDate:"Issue Date",dueDate:"Due Date",status:"Status",items:{description:"Description",quantity:"Quantity",unitPrice:"Unit Price",total:"Total"},totals:{subtotal:"Subtotal",tax:"Tax",grandTotal:"Grand Total"},footer:"This invoice was generated with comptario.",statusLabels:{paid:"Paid",sent:"Sent",overdue:"Overdue",draft:"Draft"}},expense:{title:"EXPENSE RECEIPT",supplierInfo:"Supplier Information",expenseNumber:"Expense No",expenseDate:"Expense Date",paymentDate:"Payment Date",status:"Status",category:"Category",details:"Expense Details",totalAmount:"Total Expense Amount",footer:"This expense receipt was generated with comptario.",statusLabels:{draft:"Draft",approved:"Approved",paid:"Paid"}},sale:{title:"SALES RECEIPT",customerInfo:"Account Information",saleNumber:"Sale No",saleDate:"Sale Date",status:"Status",paymentMethod:"Payment Method",details:"Product/Service Details",quantity:"Quantity",unitPrice:"Unit Price",totalAmount:"Total Sale Amount",footer:"This sales receipt was generated with comptario.",statusLabels:{completed:"Completed",pending:"Pending",cancelled:"Cancelled"},paymentMethods:{cash:"Cash",card:"Card",transfer:"Transfer",check:"Check"}},planTab:{header:{title:"Plan & Billing",subtitle:"Manage your subscription, billing cycle, and seats"},managePayments:"Manage Payments",monthly:"Monthly",yearly:"Yearly",yearlyNote:"2 months free",currentPlan:{label:"Current Plan",seatsInUse:"Seats in use",renewalDate:"Renewal Date",cancellationDate:"Cancellation Date",cancelAtPeriodEndNotice:"Your subscription will be cancelled at period end."},changePlan:"Change Plan",plans:{labels:{professional:"Pro",enterprise:"Business",free:"Starter"},bullets:{proIncluded:"Includes 3 users",basicAutomations:"Basic automations",businessIncluded:"Includes 10 users",advancedAutomations:"Advanced automations & roles",freeLimited:"Limited invoices and features"}},prices:{monthly:{free:"0/mo",pro:"29/mo",enterprise:"59/mo"}},configuration:"Configuration",billingCycle:"Billing cycle",seatsAddon:"Additional seats",seatsAddonHelper:"Billed at 5/seat/month. Proration applies.",costPreview:"Cost preview",newSubtotal:"New subtotal",extraSeats:"Extra seats",prorationToday:"Proration today",updatePlan:"Update Plan",amountsNote:"Amounts are indicative. Final charges are shown during checkout.",quickSeatActions:"Quick seat actions",add1SeatNow:"Add 1 seat and charge now",add5SeatsNow:"Add 5 seats and charge now",remove1Seat:"Remove 1 seat",quickTip:"Tip: You can also add seats from the billing portal.",subscriptionStatus:"Subscription status",subscriptionCancelNote:"Cancelling takes effect at period end; you can resume anytime until then.",cancelAtPeriodEndBtn:"Cancel at period end",resumeSubscriptionBtn:"Resume subscription",history:{title:"History",loading:"Loading history",empty:"No records found",type:"Type",plan:"Plan",users:"Users",date:"Date",footerNote:"Events are synchronized from the billing provider periodically."},invoices:{title:"Invoices",loading:"Loading invoices",empty:"No invoices found",filters:{status:"Status",all:"All",search:"Search",searchPlaceholder:"Number or currency",from:"From",to:"To",exportCsv:"Export CSV"},table:{number:"Number",date:"Date",amount:"Amount",status:"Status",actions:"Actions"},footerNote:"Invoices are fetched from the billing provider; amounts are shown in the billed currency."}}},eS={app:sj,crm:nj,summary:aj,presets:ij,landing:oj,footer:lj,auth:cj,common:dj,currencies:uj,header:mj,dashboard:hj,quickActions:fj,transactions:pj,alerts:gj,months:xj,sidebar:yj,quotes:bj,billing:vj,stats:wj,status:Nj,invoice:kj,"expense.details":"Expense Details","expense.information":"Expense Information","expense.number":"Expense No","expense.date":"Expense Date","expense.category":"Category","expense.supplier":"Supplier","expense.amount":"Amount","expense.receipt":"Receipt","expense.viewReceipt":"View Receipt","customer.details":"Account Details","customer.accountInfo":"Account Information","customer.personalInfo":"Personal Information","customer.name":"Name","customer.email":"Email","customer.phone":"Phone","customer.registeredAt":"Registered Date","customer.companyInfo":"Company Information","customer.company":"Company","customer.taxNumber":"Tax Number","customer.addressInfo":"Address Information","customer.quickActions":"Quick Actions","customer.createInvoice":"Create Invoice","customer.viewHistory":"View History",expense:jj,customer:Sj,supplier:Cj,products:Aj,chartOfAccounts:Tj,invoices:Ej,expenses:Dj,customers:_j,suppliers:Pj,banks:Ij,settings:Mj,security:Rj,"common.remindMeLater":"Remind Me Later","common.now":"Now","common.generic":{customer:"Account",supplier:"Supplier",expense:"Expense",quote:"Quote"},toasts:zj,notifications:Lj,sales:Oj,payment:Fj,reports:Bj,expenseCategories:Uj,validation:Vj,archive:qj,ledger:$j,legal:Hj,cookie:Kj,pagination:Gj,fiscalPeriods:Wj,org:Yj,admin:Qj,plans:Zj,planTab:Xj,pdf:Jj},tS={fields:{name:"Name",email:"E-Mail",phone:"Telefon",company:"Unternehmen",account:"Account",status:"Status",contact:"Kontakt",title:"Titel",type:"Typ",assignee:"Zustndig",dueAt:"Datum / Fllig",completed:"Erledigt",actions:"Aktionen"},confirmDelete:{title:"Lschen besttigen",message:'"{{name}}" lschen?'},validation:{nameRequired:"Name ist erforderlich",titleRequired:"Titel ist erforderlich"},dashboard:{subtitle:"Eine bersicht fr Pipeline und Aktivitten."},pipeline:{title:"Pipeline",defaultName:"Standard-Pipeline",loading:"Pipeline wird geladen",visibilityOwnerAndTeam:"Sichtbarkeit: owner + Team",addOpportunity:"Deal hinzufgen",createTitle:"Deal erstellen",selectPlaceholder:"Auswhlen",saving:"Speichern",opportunityCount:"{{count}} Deals",empty:"Leer",noMembers:"Keine Mitglieder gefunden",ownerAutoInTeam:"Hinweis: Der Owner ist automatisch im Team.",fields:{opportunityName:"Deal-Name",account:"Account",amount:"Betrag",currency:"Whrung",expectedCloseDate:"Voraussichtlicher Abschluss",stage:"Phase",team:"Team"},validation:{nameRequired:"Deal-Name ist erforderlich",accountRequired:"Bitte einen Account auswhlen",amountInvalid:"Ungltiger Betrag"},stages:{lead:"Lead",qualified:"Qualifiziert",proposal:"Angebot",negotiation:"Verhandlung",won:"Gewonnen",lost:"Verloren"}},opportunities:{title:"Chancen",subtitle:"Durchsuchen und filtern Sie Ihre Chancen.",searchPlaceholder:"Chancen suchen...",empty:"Noch keine Chancen.",filters:{search:"Suche",account:"Account",status:"Status",stage:"Phase",allAccounts:"Alle Accounts",allStages:"Alle Phasen"},status:{all:"Alle",open:"Offen",won:"Gewonnen",lost:"Verloren"},actions:{open:"ffnen"}},leads:{title:"Leads",subtitle:"Leads auflisten und verwalten.",empty:"Noch keine Leads.",modal:{createTitle:"Lead hinzufgen",editTitle:"Lead bearbeiten"}},contacts:{title:"Kontakte",subtitle:"Kontakte auflisten und verwalten.",empty:"Noch keine Kontakte.",modal:{createTitle:"Kontakt hinzufgen",editTitle:"Kontakt bearbeiten"}},activities:{title:"Aktivitten",subtitle:"Verfolgen Sie Anrufe, E-Mails und Aufgaben.",subtitleForDeal:'Aktivitten fr "{{dealName}}"',subtitleForAccount:'Aktivitten fr "{{accountName}}"',subtitleForContact:'Aktivitten fr "{{contactName}}"',empty:"Noch keine Aktivitten.",account:"Account",dueAtPlaceholder:"z. B. 2025-12-15",filters:{allAccounts:"Alle Accounts",all:"Alle",open:"Offen",completed:"Erledigt"},modal:{createTitle:"Aktivitt hinzufgen",editTitle:"Aktivitt bearbeiten"}},tasks:{title:"Aufgaben",subtitleForDeal:'Aufgaben fr "{{dealName}}"',subtitleForAccount:'Aufgaben fr "{{accountName}}"',empty:"Noch keine Aufgaben.",dueAtPlaceholder:"z. B. 2025-12-15",unassigned:"Nicht zugewiesen",filters:{all:"Alle",open:"Offen",completed:"Erledigt"},modal:{createTitle:"Aufgabe hinzufgen",editTitle:"Aufgabe bearbeiten"}},dealDetail:{title:"Deal-Details",backToPipeline:"Zurck zum Pipeline",notFound:"Deal nicht gefunden."},errors:{boardFetch:"CRM-Daten konnten nicht geladen werden"}},rS={blocks:{actions:"Aktionen",receivables:"Forderungen",criticalStock:"Kritischer Bestand",salesFlow:"Verkaufsfluss",openQuotes:"Offene Angebote",awaitingInvoiceSales:"Zu fakturierende Verkufe",crmFlow:"CRM-Flow",latestActivities:"Letzte Aktivitten"},today:"Heute",thisWeek:"Diese Woche",pending:"Ausstehend",overdue:"berfllig",criticalProducts:"Kritische Produkte",todayOrders:"Verkufe heute",weekOrders:"Verkufe diese Woche",openQuotesCount:"Offene Angebote",awaitingInvoiceCount:"Zu fakturieren",loading:"Wird geladen",latestActivitiesPlaceholder:"Noch keine aktuellen Aktivitten.",crm:{openDeals:"Offene Deals",expectedAmount:"Erwarteter Betrag",noStageData:"Noch keine Phasen-Daten.",unknownStage:"Unbekannte Phase"}},sS={itemsPerPage:"Elemente pro Seite",previous:"Zurck",next:"Weiter",range:"{{start}}-{{end}} / {{total}}"},nS={users:{updateConfirm:"Sind Sie sicher, dass Sie diesen Benutzer aktualisieren mchten?",passwordResetConfirm:"E-Mail zum Zurcksetzen des Passworts senden?",deactivateConfirm:"Mchten Sie diesen Benutzer wirklich deaktivieren?",activateConfirm:"Mchten Sie diesen Benutzer wirklich aktivieren?"},tenants:{updatePlanConfirm:"Mchten Sie den Plan fr {{name}} wirklich auf '{{plan}}' aktualisieren?",updateStatusConfirm:"Mchten Sie den Status fr {{name}} wirklich auf '{{status}}' aktualisieren?",updateNextPaymentConfirm:"Mchten Sie das nchste Zahlungsdatum fr {{name}} wirklich auf '{{date}}' aktualisieren?",cancelSubscriptionConfirm:"Mchten Sie das Abonnement fr {{name}} wirklich kndigen?",dangerDeleteTenantConfirm:"Achtung! Mchten Sie den Mandanten '{{name}}' dauerhaft lschen? Diese Aktion kann nicht rckgngig gemacht werden."},backups:{deleteConfirm:"Mchten Sie dieses Backup wirklich lschen?",deleteOlderThanConfirm:"Mchten Sie alle Backups lschen, die lter als {{days}} Tage sind?",modal:{newTitle:"Neuen Lieferanten hinzufgen",editTitle:"Lieferanten bearbeiten",subtitle:"Lieferantendaten eingeben",nameLabel:"Lieferantenname",companyLabel:"Firmenname",emailLabel:"E-Mail","footer.product":"PRODUKT","footer.company":"UNTERNEHMEN","footer.support":"SUPPORT","footer.legal":"RECHTLICHES","footer.features":"Funktionen","footer.pricing":"Preise","footer.security":"Sicherheit","footer.api":"API","footer.about":"ber uns","footer.blog":"Blog","footer.careers":"Karriere","footer.press":"Presse","footer.helpCenter":"Hilfezentrum","footer.contactUs":"Kontakt","footer.status":"Status","footer.community":"Community","footer.privacy":"Datenschutzrichtlinie","footer.terms":"Nutzungsbedingungen","footer.gdpr":"DSGVO","footer.cookies":"Cookie-Richtlinie","footer.imprint":"Impressum","footer.description":"Einfache, sichere Software fr die Vorkontenfhrung moderner Unternehmen. Verwalten Sie Rechnungen, Ausgaben und MwSt. zuverlssig.","footer.stayUpdated":"Aktuell bleiben","footer.updatesDesc":"Erhalten Sie Neuigkeiten zu neuen Funktionen und Best Practices.","footer.email":"support@comptario.com","footer.languages":"Verfgbar in 4 Sprachen","footer.gdprCompliant":"DSGVO-konform","footer.emailPlaceholder":"E-Mail eingeben","footer.subscribe":"Abonnieren","footer.copyright":" {{year}} Comptario. Alle Rechte vorbehalten.","footer.madeWith":"Mit  in Europa entwickelt",phoneLabel:"Telefon",categoryLabel:"Kategorie",taxNumberLabel:"Steuernummer",addressLabel:"Adresse",namePlaceholder:"ABC Versorgung GmbH",companyPlaceholder:"ABC Versorgung GmbH",emailPlaceholder:"info@abcversorgung.de",phonePlaceholder:"+49 170 1234567",taxNumberPlaceholder:"Steuernummer",addressPlaceholder:"Vollstndige Adressinformationen..."}}},aS={limitExceeded:{title:"Planlimit berschritten",invoicesMessage:"Sie haben die maximale Anzahl an Rechnungen fr Ihren aktuellen Plan erreicht. Aktualisieren Sie Ihren Plan, um weitere Rechnungen zu erstellen.",expensesMessage:"Sie haben die maximale Anzahl an Ausgaben fr Ihren aktuellen Plan erreicht. Aktualisieren Sie Ihren Plan, um weitere Ausgaben hinzuzufgen."}},iS={subscriptionUpdated:"Abo aktualisiert.",payment:{successTitle:"Zahlung erfolgreich",cancelledTitle:"Zahlung abgebrochen",cancelledMessage:"Zahlung storniert oder nicht abgeschlossen."},addonAdded:"Zustzliche Benutzer hinzugefgt.",portal:{cancelAtPeriodEnd:"Abo endet am Periodenende. Datum: {{date}}",activeApplied:"Abo aktiv. Portalnderungen angewendet.",synced:"Portalnderungen synchronisiert."},redirecting:"Weiterleitung zur Zahlung",interval:{updated:"Abrechnungszeitraum aktualisiert."},checkout:{failed:"Erstellung der Checkout-Sitzung fehlgeschlagen."},cancelAtPeriodEnd:{confirm:"Abo wird zum Periodenende gekndigt. Besttigen?"},cancel:{requestedShort:"Kndigung zum Periodenende gesetzt."},resumeCancellation:{confirm:"Kndigung wird entfernt und das Abo wird verlngert. Besttigen?",done:"Kndigung entfernt. Abo aktiv."}},oS={sort:{label:"Sortierung",updatedDesc:"Aktualisiert (neueste)",updatedAsc:"Aktualisiert (lteste)",createdDesc:"Erstellt (neueste)",createdAsc:"Erstellt (lteste)",nameAsc:"Name (AZ)",nameDesc:"Name (ZA)",titleAsc:"Titel (AZ)",titleDesc:"Titel (ZA)"},name:"comptario",subtitle:"Buchhaltungssystem"},lS={thisMonth:"Dieser Monat",lastMonth:"Letzter Monat",thisYear:"Dieses Jahr",addedThisMonth:"Diesen Monat hinzugefgt",withEmail:"E-Mail vorhanden",withPhone:"Telefon vorhanden",withCompany:"Mit Firma"},cS=JSON.parse(`{"nav.features":"Funktionen","nav.pricing":"Preise","nav.faq":"FAQ","nav.contact":"Kontakt","cta.try":"Kostenlos testen","cta.signin":"Anmelden","cta.watchDemo":"Demo ansehen","hero.title":"Verwalten Sie Rechnungen, Ausgaben und Angebote an einem Ort.","hero.sub":"Verwalten Sie Rechnungen, Ausgaben und Angebote in einem einzigen, einfachen Arbeitsbereich. Halten Sie Ihre Vorbuchhaltung organisiert mit Untersttzung mehrerer Whrungen (EUR, USD, TRY), kategoriebasierter Steuerverfolgung und PDFRechnungs/Angebotserstellung. Mit teilbaren Angebotslinks knnen Ihre Accounts Angebote online prfen und mit einem Klick annehmen oder ablehnen.","hero.features.pdf":"PDFRechnungen und Angebote","hero.features.currency":"Mehrere Whrungen (EUR / USD / TRY)","hero.features.vat":"MwSt. / Steuerverwaltung","features.title":"Alles, was Sie fr die Vorbuchhaltung bentigen","features.inv.title":"Rechnungsstellung","features.inv.desc":"Nummerierung, Accounts und PDF-Export.","features.exp.title":"Ausgaben","features.exp.desc":"Datei-Uploads und kategoriebasierte Mehrwertsteuer (z.B. 20% FR, 18% TR).","features.vat.title":"Mehrwertsteuer- und Steuerzusammenfassungen","features.vat.desc":"Klare Periodenberichte mit Vorsteuer-/Umsatzsteuer-Highlights.","features.fx.title":"Mehrere Whrungen","features.fx.desc":"Systemwhrungsoptionen: USD, EUR, TRY","value.title":"Skaliert von Freiberuflern bis zu KMUs","security.title":"Sicherheit & Compliance","security.items":"EU-Hosting (Platzhalter), Verschlsselung bei bertragung und Ruhezustand, automatische Backups.","testimonials.title":"Was unsere Benutzer sagen","pricing.title":"Einfache Preisgestaltung","pricing.starter":"Starter","pricing.pro":"Pro","pricing.business":"Business","pricing.price.free":"0/Monat","pricing.price.pro":"29/Monat","pricing.price.biz":"59/Monat","pricing.annualLine.free":"","pricing.annualLine.pro":"Jhrlich: 290/Jahr (2 Monate gratis)","pricing.annualLine.biz":"Jhrlich: 590/Jahr (2 Monate gratis)","pricing.cta":"Jetzt starten","pricing.ctaStarter":"Kostenlos starten","pricing.ctaPro":"Zu Pro wechseln","pricing.ctaBusiness":"Business whlen","pricing.ctaContact":"Kontaktieren Sie uns","pricing.features.users1":"1 Benutzer inklusive","pricing.features.users3":"3 Benutzer inklusive","pricing.features.users10":"10 Benutzer inklusive","pricing.pro.extraUser":"+ jeder weitere Benutzer 5/Monat","pricing.features.invoices5":"Bis zu 5 Rechnungen pro Monat","pricing.features.expenses5":"Bis zu 5 Ausgaben pro Monat","pricing.features.vat":"Kategoriebasierte MwSt.-Verfolgung","pricing.features.pdf":"PDF-Rechnungen und -Angebote","pricing.features.quoteTemplate1":"1 Angebotsvorlage","pricing.features.unlimitedInvoicesExpenses":"Unbegrenzte Rechnungen und Ausgaben","pricing.features.customerSupplierUnlimited":"Unbegrenzte Accounts und Lieferanten","pricing.features.quotesBasic":"Angebotserstellung und teilbarer Link","pricing.features.quotesAdvanced":"Angebote: gesehen/akzeptiert/abgelehnt, PDF","pricing.features.products":"Produkt- und Lagerverwaltung","pricing.features.reports":"Erweiterte Berichte und detaillierte Analysen","pricing.features.quoteTemplatesUnlimited":"Unbegrenzte Angebotsvorlagen","pricing.features.saveListViews":"Listenansichten speichern","pricing.features.everythingPro":"Alles in Pro","pricing.features.dedicatedSupport":"Priorisierter Support","pricing.notes.vatAndCurrency":"Preise exkl. MwSt.","pricing.notes.cancelAnytime":"Jederzeit kndbar.","faq.title":"Frequently asked questions","faq.q1":"Can I start for free?","faq.a1":"Yes, the Starter plan lets you issue limited invoices at no cost.","faq.q2":"Does it support VAT?","faq.a2":"Yes, with category-based VAT and simple summaries.","faq.q3":"Are quotes supported?","faq.a3":"Quotes are coming soon  not enabled yet.","faq.q4":"Do you support multiple currencies?","faq.a4":"Yes, EUR and TRY with manual rate input.","faq.q5":"How do I cancel?","faq.a5":"You can cancel anytime from the billing settings.","faq.q6":"Where is my data hosted?","faq.a6":"In the EU (placeholder), with encryption and regular backups.","finalCta.title":"Make pre-accounting simple.","finalCta.cta":"Try for Free","seo.title":"Comptario  Pre-Accounting Software","seo.description":"Comptario helps you manage invoices, expenses and VAT in a simple, secure workspace with multi-currency support and PDF invoice generation.","hero.badge":"Comptario  Pre-Accounting Software","hero.mockup.revenue":"Monthly Revenue","hero.mockup.expenses":"Monthly Expenses","hero.mockup.vat":"VAT to Pay","hero.mockup.rate":"Rate","features.subtitle":"Manage your pre-accounting with confidence using our comprehensive set of tools designed for modern businesses.","value.subtitle":"Whether you're just starting out or running an established business, Comptario adapts to your needs.","value.freelancers.title":"Fr Freiberufler","value.freelancers.desc":"Einfaches Rechnungsstellen und AusgabenTracking, um Ihr Geschft organisiert zu halten","value.freelancers.basic":"Einfache Rechnungsstellung","value.freelancers.expense":"Ausgabenverwaltung","value.freelancers.tax":"Steuerbersichten","value.small.title":"Fr kleine Unternehmen","value.small.desc":"Umfassende Werkzeuge fr die Vorkontenfhrung, die mit Ihrem Unternehmen mitwachsen","value.small.currency":"MehrwhrungsSupport","value.small.customer":"Accountverwaltung","value.small.reporting":"Erweiterte Berichte","value.growing.title":"Fr wachsende Unternehmen","value.growing.desc":"Skalierbare Lsungen, die sich Ihren wachsenden Ablufen anpassen","value.growing.team":"TeamZusammenarbeit","value.growing.api":"Angebote per Link versenden","value.growing.support":"Flexible Filteroptionen","value.cta.title":"Ready to streamline your pre-accounting?","value.cta.subtitle":"Join thousands of businesses who trust Comptario to manage their finances efficiently.","value.cta.trial":"Start Free Trial","value.cta.demo":"Schedule Demo","value.stats.users":"Active Users","value.stats.invoices":"Invoices Generated","value.stats.uptime":"Uptime","security.badge":"Enterprise-Grade Security","finalCta.subtitle":"Join thousands of businesses who have streamlined their pre-accounting with Comptario. Start your free trial today  no credit card required.","finalCta.trial":"Free 30-day trial","finalCta.noSetup":"No setup fees","finalCta.cancel":"Cancel anytime","finalCta.stats.countries":"Countries Served","security.features.hosting.title":"EU Data Hosting","security.features.hosting.desc":"Your data is hosted in secure EU data centers with GDPR compliance","security.features.encryption.title":"End-to-End Encryption","security.features.encryption.desc":"All data is encrypted in transit and at rest using industry-standard protocols","security.features.backups.title":"Automated Backups","security.features.backups.desc":"Daily automated backups ensure your data is always safe and recoverable","security.features.gdpr.title":"GDPR Compliant","security.features.gdpr.desc":"Full compliance with European data protection regulations","security.features.monitoring.title":"24/7 Monitoring","security.features.monitoring.desc":"Continuous security monitoring and threat detection","security.features.uptime.title":"99.9% Uptime","security.features.uptime.desc":"Reliable infrastructure with guaranteed uptime SLA","security.trusted.title":"Trusted by businesses across Europe","security.trusted.gdpr":"Compliant","security.trusted.iso":"Certified","security.trusted.soc":"Type II","security.trusted.ssl":"Encrypted","security.trusted.desc":"Your financial data is protected by the same security standards used by banks and financial institutions. We never share your data with third parties and you maintain full control over your information.","testimonials.subtitle":"Don't just take our word for it. Here's what our users have to say about their experience with Comptario.","testimonials.sarah.content":"Comptario has simplified my invoicing process completely. I can now generate professional invoices in minutes and track my expenses effortlessly.","testimonials.sarah.role":"Freelance Designer","testimonials.sarah.company":"Design Studio Pro","testimonials.marcus.content":"The multi-currency feature is a lifesaver for our international accounts. VAT calculations are automatic and accurate, saving us hours of manual work.","testimonials.marcus.role":"CEO","testimonials.marcus.company":"Tech Solutions GmbH","testimonials.elena.content":"As a small business, we needed something simple yet powerful. Comptario gives us everything we need without the complexity of enterprise software.","testimonials.elena.role":"Small Business Owner","testimonials.elena.company":"Local Bakery","testimonials.stats.rating":"Average Rating","testimonials.stats.customers":"Zufriedene Accounts","testimonials.stats.countries":"Countries","pricing.subtitle":"Choose the plan that fits your business needs. Start free and upgrade as you grow.","faq.support.title":"Still have questions?","faq.support.desc":"Our support team is here to help you get the most out of Comptario.","faq.support.contact":"Contact Support","faq.support.demo":"Schedule a Demo","pricing.popular":"Most Popular","pricing.plans.starter.desc":"Ideal for freelancers and small projects","pricing.plans.pro.desc":"Ideal for growing businesses","pricing.plans.business.desc":"For established companies with teams","pricing.features.usersUnlimited":"Unlimited users","pricing.features.basicExpense":"Basic expense tracking","pricing.features.bank1":"1 bank account","pricing.features.bankUnlimited":"Unlimited bank accounts","pricing.features.customerSupplier1":"1 Account und 1 Lieferant","pricing.features.emailSupport":"Email support","pricing.features.unlimited":"Unlimited invoices","pricing.features.advancedExpense":"Advanced expense management","pricing.features.multiCurrency":"Multi-currency support","pricing.features.customerMgmt":"Accountverwaltung","pricing.features.prioritySupport":"Priority support","pricing.features.api":"API access","pricing.features.teamCollaboration":"Team collaboration","pricing.features.advancedReporting":"Advanced reporting","pricing.features.whiteLabel":"White-label options","pricing.features.customIntegrations":"Custom integrations","pricing.features.noCredit":"No credit card required","pricing.trust":"Trusted by freelancers, agencies, and SMBs.","pricing.questions":"Have questions about our pricing?","pricing.checkFaq":"Check our FAQ","pricing.or":"or","pricing.contactSupport":"contact support","pricing.guarantee":"30-day money-back guarantee on all paid plans","faq.subtitle":"Everything you need to know about Comptario. Can't find the answer you're looking for? Feel free to contact us.","faq.contactUs":"contact us","nav":{"faq":"FAQ","features":"Funktionen","pricing":"Preise","contact":"Kontakt"},"faq":{"title":"Hufig gestellte Fragen","support":{"title":"Noch Fragen?","desc":"Unser Support hilft Ihnen, das Beste aus Comptario herauszuholen.","contact":"Support kontaktieren","demo":"Demo vereinbaren"},"subtitle":"Alles, was Sie ber Comptario wissen mssen. Keine Antwort gefunden? Kontaktieren Sie uns.","contactUs":"kontaktieren Sie uns","q1":"Kann ich kostenlos starten?","a1":"Ja, mit dem StarterPlan knnen Sie eine begrenzte Anzahl an Rechnungen kostenlos erstellen.","q2":"Gibt es MwSt.-Untersttzung?","a2":"Ja, mit kategoriebasierter Mehrwertsteuer und bersichtlichen Zusammenfassungen.","q3":"Werden Angebote untersttzt?","a3":"Ja. Sie knnen Angebote erstellen und per Link oder als PDF versenden.","q4":"Untersttzen Sie mehrere Whrungen?","a4":"Ja  EUR, USD oder TRY mit manueller Kurseingabe.","q5":"Wie kann ich kndigen?","a5":"Sie knnen jederzeit in den Abrechnungseinstellungen kndigen.","q6":"Wo werden meine Daten gehostet?","a6":"In der EU (Platzhalter), mit Verschlsselung und regelmigen Backups."},"finalCta":{"title":"Vereinfachen Sie Ihre Vorkontenfhrung.","cta":"Kostenlos testen","subtitle":"Tausende Unternehmen haben ihre Vorkontenfhrung mit Comptario vereinfacht. Starten Sie jetzt  keine Kreditkarte erforderlich.","trial":"30 Tage kostenlos","noSetup":"Keine Einrichtungsgebhren","cancel":"Jederzeit kndbar","stats":{"countries":"Lnder"}},"seo":{"title":"Comptario  Software fr Vorkontenfhrung","description":"Comptario hilft Ihnen, Rechnungen, Ausgaben und Mehrwertsteuer in einer einfachen und sicheren Umgebung zu verwalten  mit MehrwhrungsSupport und PDFRechnungen."},"hero":{"badge":"Comptario  Software fr Vorkontenfhrung","mockup":{"revenue":"Monatlicher Umsatz","expenses":"Monatliche Ausgaben","vat":"Umsatzsteuer fllig","rate":"Kurs"},"title":"Verwalten Sie Rechnungen, Ausgaben und Angebote an einem Ort.","sub":"Verwalten Sie Rechnungen, Ausgaben und Angebote in einem einfachen, zentralen Workspace. Behalten Sie Ihre Vorkontenfhrung mit MehrwhrungsSupport (EUR, USD, TRY), kategoriebasierter UStErfassung und PDFRechnungen/Angeboten im Griff. ber teilbare Angebotslinks knnen Accounts online prfen und mit einem Klick annehmen oder ablehnen.","features":{"pdf":"PDFRechnungen und Angebote","currency":"Mehrere Whrungen (EUR / USD / TRY)","vat":"MwSt. / Steuerverwaltung"}},"features":{"subtitle":"Verwalten Sie Ihre Vorkontenfhrung mit einem umfassenden Set an Werkzeugen fr moderne Unternehmen.","title":"Alles, was Sie fr die Vorkontenfhrung brauchen","inv":{"title":"Rechnungsstellung","desc":"Nummerierung, Accounts, PDFExport und EMailVersand."},"exp":{"title":"Ausgaben","desc":"DateiUploads, OCR (bald), kategoriebasierte USt (z.B. 20% FR, 18% TR)."},"vat":{"title":"MwSt. & Steuerbersichten","desc":"Klare Periodenberichte mit Hervorhebung von Ein/AusgangsUSt."},"fx":{"title":"Mehrere Whrungen","desc":"Systemwhrungsoptionen: USD, EUR, TRY"}},"value":{"subtitle":"Ob Grnder oder etabliertes Unternehmen  Comptario passt sich Ihren Bedrfnissen an.","freelancers":{"title":"Fr Freiberufler","desc":"Einfache Rechnungsstellung und Ausgabenerfassung fr mehr Ordnung","basic":"Einfache Rechnungsstellung","expense":"Ausgabenverwaltung","tax":"Steuerbersichten"},"small":{"title":"Fr kleine Unternehmen","desc":"Umfassende Tools fr die Vorkontenfhrung, die mitwachsen","currency":"MehrwhrungsSupport","customer":"Accountverwaltung","reporting":"Erweiterte Berichte"},"growing":{"title":"Fr wachsende Unternehmen","desc":"Skalierbare Lsungen, die sich Ihren wachsenden Ablufen anpassen","team":"TeamZusammenarbeit","api":"Angebote per Link versenden","support":"Flexible Filteroptionen"},"cta":{"title":"Bereit, Ihre Vorkontenfhrung zu optimieren?","subtitle":"Schlieen Sie sich tausenden Unternehmen an, die Comptario vertrauen.","trial":"Kostenlose Testphase starten","demo":"Demo vereinbaren"},"stats":{"users":"Aktive Nutzer","invoices":"Erstellte Rechnungen","uptime":"Verfgbarkeit"},"title":"Skaliert von Freiberuflern bis KMU"},"security":{"badge":"Sicherheit in Unternehmensqualitt","features":{"hosting":{"title":"Datenhosting in der EU","desc":"Ihre Daten werden in sicheren, DSGVOkonformen Rechenzentren in der EU gehostet"},"encryption":{"title":"EndtoEndVerschlsselung","desc":"Alle Daten sind whrend der bertragung und im Ruhezustand verschlsselt"},"backups":{"title":"Automatisierte Backups","desc":"Tgliche Backups sorgen fr Sicherheit und Wiederherstellbarkeit"},"gdpr":{"title":"DSGVOkonform","desc":"Vollstndige Einhaltung der europischen Datenschutzvorschriften"},"monitoring":{"title":"24/7berwachung","desc":"Kontinuierliche Sicherheitsberwachung und Bedrohungserkennung"},"uptime":{"title":"99,9 % Verfgbarkeit","desc":"Zuverlssige Infrastruktur mit garantiertem SLA"}},"trusted":{"title":"Vertraut von Unternehmen in ganz Europa","gdpr":"Konform","iso":"Zertifiziert","soc":"Typ II","ssl":"Verschlsselt","desc":"Ihre Finanzdaten sind durch Sicherheitsstandards wie bei Banken geschtzt. Wir teilen Ihre Daten nie und Sie behalten die volle Kontrolle."},"title":"Sicherheit und Compliance","items":"EUHosting (Platzhalter), Verschlsselung bei bertragung und im Ruhezustand, automatische Backups."},"testimonials":{"subtitle":"Verlassen Sie sich nicht nur auf unser Wort. Das sagen unsere Nutzer.","sarah":{"content":"Comptario hat meine Rechnungsstellung stark vereinfacht. Professionelle Rechnungen in Minuten und mheloses AusgabenTracking.","role":"Freiberufliche Designerin","company":"Design Studio Pro"},"marcus":{"content":"Der MehrwhrungsSupport ist fr unsere internationalen Accounts unverzichtbar. Die UStBerechnungen sind automatisch und przise.","role":"CEO","company":"Tech Solutions GmbH"},"elena":{"content":"Als kleines Unternehmen brauchten wir etwas Einfaches, aber Leistungsstarkes. Comptario bietet alles Ntige ohne EnterpriseKomplexitt.","role":"Kleinunternehmerin","company":"Lokale Bckerei"},"stats":{"rating":"Durchschnittliche Bewertung","customers":"Zufriedene Accounts","countries":"Lnder"},"title":"Was unsere Nutzer sagen"},"pricing":{"subtitle":"Whlen Sie den passenden Tarif. Starten Sie kostenlos und wachsen Sie mit.","popular":"Am beliebtesten","planNames":{"starter":"Starter","pro":"Pro","business":"Business"},"plans":{"starter":{"desc":"Ideal fr Freiberufler und kleine Projekte"},"pro":{"desc":"Ideal fr wachsende Unternehmen"},"business":{"desc":"Fr etablierte Unternehmen mit Teams"}},"features":{"users1":"1 Nutzer inklusive","users3":"3 Nutzer inklusive","users10":"10 Nutzer inklusive","usersUnlimited":"Unbegrenzte Nutzer","invoices5":"Bis zu 5 Rechnungen pro Monat","basicExpense":"Einfache Ausgabenverfolgung","expenses5":"Bis zu 5 Ausgaben pro Monat","bank1":"1 Bankkonto","bankUnlimited":"Unbegrenzte Bankkonten","customerSupplier1":"1 Account und 1 Lieferant","customerSupplierUnlimited":"Unbegrenzte Accounts und Lieferanten","unlimitedInvoicesExpenses":"Unbegrenzte Rechnungen und Ausgaben","vat":"Kategorienbasierte UStErfassung","pdf":"PDFRechnungen und Angebote","emailSupport":"EMailSupport","quotesBasic":"Angebotserstellung und teilbarer Link","quotesAdvanced":"Angebote: angesehen/angenommen/abgelehnt, PDF","quoteTemplate1":"1 Angebotsvorlage","quoteTemplatesUnlimited":"Unbegrenzte Angebotsvorlagen","saveListViews":"Listenansichten speichern","unlimited":"Unbegrenzte Rechnungen","advancedExpense":"Erweiterte Ausgabenverwaltung","multiCurrency":"MehrwhrungsSupport","customerMgmt":"Kundenverwaltung","products":"Produkt und Lagerverwaltung","reports":"Erweiterte Berichte und Analysen","prioritySupport":"Priorisierter Support","api":"APIZugriff","everythingPro":"Alles aus Pro","teamCollaboration":"TeamZusammenarbeit","advancedReporting":"Erweitertes Reporting","whiteLabel":"WhiteLabelOptionen","dedicatedSupport":"Dedizierter Support","customIntegrations":"Individuelle Integrationen","noCredit":"Keine Kreditkarte erforderlich"},"trust":"Beliebt bei Freiberuflern, Agenturen und KMU.","questions":"Fragen zu unseren Preisen?","checkFaq":"Zur FAQ","or":"oder","contactSupport":"Support kontaktieren","guarantee":"30Tage GeldzurckGarantie fr alle kostenpflichtigen Tarife","title":"Einfache Preisgestaltung","cta":"Jetzt starten","ctaStarter":"Kostenlos starten","ctaPro":"Zu Pro wechseln","ctaBusiness":"Business whlen","annualLine":{"pro":"Jahresvorauszahlung: 290/Jahr (2 Monate gratis)","biz":"Jahresvorauszahlung: 590/Jahr (2 Monate gratis)"},"notes":{"vatAndCurrency":"Preise exkl. MwSt.","cancelAnytime":"Jederzeit kndbar."},"pro":{"extraUser":"+ jeder weitere Nutzer 5/Monat"}},"footer":{"product":"PRODUKT","company":"UNTERNEHMEN","support":"SUPPORT","legal":"RECHTLICHES","features":"Funktionen","pricing":"Preise","security":"Sicherheit","api":"API","about":"ber uns","blog":"Blog","careers":"Karriere","press":"Presse","helpCenter":"HilfeCenter","contactUs":"Kontakt","status":"Status","community":"Community","privacy":"Datenschutz","terms":"Nutzungsbedingungen","gdpr":"DSGVO","cookies":"Cookies","imprint":"Impressum","description":"Einfache, sichere Software fr Vorkontenfhrung. Verwalten Sie Rechnungen, Ausgaben und USt mit Vertrauen.","stayUpdated":"Bleiben Sie auf dem Laufenden","updatesDesc":"Erhalten Sie Updates zu neuen Funktionen und Best Practices.","languages":"In 4 Sprachen verfgbar","gdprCompliant":"DSGVOkonform","emailPlaceholder":"EMail eingeben","subscribe":"Abonnieren","madeWith":"Mit  in Europa entwickelt"}}`),dS={terms:"Nutzungsbedingungen",privacy:"Datenschutzrichtlinie",cookies:"Cookie-Richtlinie"},uS={header:{title:"Plan & Abrechnung",subtitle:"Abonnement, Abrechnungszeitraum und Sitzpltze verwalten"},managePayments:"Zahlungen verwalten",monthly:"Monatlich",yearly:"Jhrlich",yearlyNote:"2 Monate gratis",currentPlan:{label:"Aktueller Plan",seatsInUse:"Verwendete Sitzpltze",renewalDate:"Verlngerungsdatum",cancellationDate:"Kndigungsdatum",cancelAtPeriodEndNotice:"Ihr Abonnement wird zum Periodenende gekndigt."},changePlan:"Plan ndern",plans:{labels:{professional:"Pro",enterprise:"Business",free:"Kostenlos"},bullets:{proIncluded:"3 Benutzer inklusive",basicAutomations:"Basis-Automatisierungen",businessIncluded:"10 Benutzer inklusive",advancedAutomations:"Erweiterte Automatisierungen & Rollen",freeLimited:"Begrenzte Rechnungen und Funktionen"}},prices:{monthly:{free:"0/Monat",pro:"29/Monat",enterprise:"59/Monat"}},configuration:"Konfiguration",billingCycle:"Abrechnungszyklus",seatsAddon:"Zustzliche Sitzpltze",seatsAddonHelper:"5/Sitz/Monat. Anteilige Berechnung wird angewendet.",costPreview:"Kostenbersicht",newSubtotal:"Neuer Zwischensaldo",extraSeats:"Zustzliche Sitzpltze",prorationToday:"Heutige anteilige Berechnung",updatePlan:"Plan aktualisieren",amountsNote:"Betrge sind Richtwerte. Endpreise erscheinen whrend des Bezahlvorgangs.",quickSeatActions:"Schnelle Sitzplatzaktionen",add1SeatNow:"1 Sitz hinzufgen und jetzt berechnen",add5SeatsNow:"5 Sitze hinzufgen und jetzt berechnen",remove1Seat:"1 Sitz entfernen",quickTip:"Tipp: Sitze knnen auch im Abrechnungsportal hinzugefgt werden.",subscriptionStatus:"Abonnementstatus",subscriptionCancelNote:"Kndigung greift zum Periodenende; bis dahin lsst sich fortsetzen.",cancelAtPeriodEndBtn:"Zum Periodenende kndigen",resumeSubscriptionBtn:"Abonnement fortsetzen",history:{title:"Verlauf",loading:"Verlauf wird geladen",empty:"Keine Eintrge",type:"Typ",plan:"Tarif",users:"Benutzer",date:"Datum",footerNote:"Ereignisse werden periodisch vom Abrechnungsanbieter synchronisiert."},invoices:{title:"Rechnungen",loading:"Rechnungen werden geladen",empty:"Keine Rechnungen",filters:{status:"Status",all:"Alle",search:"Suchen",searchPlaceholder:"Nummer oder Whrung",from:"Von",to:"Bis",exportCsv:"Als CSV exportieren"},table:{number:"Nummer",date:"Datum",amount:"Betrag",status:"Status",actions:"Aktionen"},footerNote:"Rechnungen werden vom Abrechnungsanbieter abgerufen; Betrge werden in der Rechnungswhrung angezeigt."}},mS={welcomeTitle:"Willkommen",welcomeSubtitle:"Melden Sie sich an, um fortzufahren",emailAddress:"E-Mail-Adresse",emailPlaceholder:"name@beispiel.com",password:"Passwort",passwordPlaceholder:"",rememberMe:"Angemeldet bleiben",forgotPassword:"Passwort vergessen",forgotPasswordHelp:"Geben Sie Ihre E-Mail ein; falls ein Konto existiert, senden wir einen Link zum Zurcksetzen.",resetEmailSent:"Falls ein Konto existiert, wurde eine E-Mail zum Zurcksetzen gesendet.",resetPassword:"Passwort zurcksetzen",resetPasswordHelp:"Legen Sie Ihr neues Passwort fest.",newPassword:"Neues Passwort",confirmPassword:"Passwort besttigen",passwordTooShort:"Das Passwort muss mindestens 8 Zeichen lang sein",passwordTooWeak:"Bitte whlen Sie ein strkeres Passwort",passwordMismatch:"Passwrter stimmen nicht berein",passwordResetSuccess:"Ihr Passwort wurde aktualisiert",updatePassword:"Passwort aktualisieren",signIn:"Anmelden",demoAccount:"Demo-Konto:",email:"E-Mail",or:"oder",adminLogin:"Admin-Anmeldung",noAccount:"Noch kein Konto?",createFreeAccount:"Kostenloses Konto erstellen",registerTitle:"Konto erstellen",registerSubtitle:"Erstellen Sie Ihr kostenloses Konto und starten Sie",fullName:"Vollstndiger Name",fullNamePlaceholder:"Geben Sie Ihren vollstndigen Namen ein",companyName:"Firmenname",companyPlaceholder:"Ihre Firma (optional)",phone:"Telefon",phonePlaceholder:"(optional)",passwordHint:"Mindestens 6 Zeichen",passwordConfirm:"Passwort besttigen",passwordConfirmPlaceholder:"Passwort erneut eingeben",termsText:{prefix:"Ich akzeptiere: ",suffix:""},and:" und ",dataProcessing:"Datenverarbeitungsvereinbarung",captchaHint:"Mehrere fehlgeschlagene Anmeldeversuche erkannt - bitte schlieen Sie die Sicherheitsberprfung ab.",captchaRequired:"Bitte schlieen Sie die Menschlichkeitsprfung ab.",captchaPrompt:"Bitte schlieen Sie die Menschlichkeitsprfung ab, bevor Sie fortfahren.",captchaVerificationFailed:"Die Menschlichkeitsprfung konnte nicht besttigt werden. Bitte versuchen Sie es erneut.",verifyRequiredTitle:"E-Mail-Besttigung erforderlich",verifyRequiredBody:"Wir haben einen Besttigungslink an {{email}} gesendet. Besttige deine Adresse, um fortzufahren.",verifyRequiredHint:"Ohne besttigte E-Mail bleiben alle Aktionen im System gesperrt.",verifyRequiredAction:"Besttigungsstatus ffnen",verifyRequiredLogout:"Abmelden",verifyYourEmail:"Besttigen Sie Ihre E-Mail",verifySentTo:"Wir haben einen Besttigungslink gesendet an:",verifySent:"Wir haben einen Besttigungslink an Ihre E-Mail-Adresse gesendet.",resend:"Erneut senden",resendCooldown:"Aus Sicherheitsgrnden gilt eine Wartezeit von 60 Sekunden",securityVerificationRequired:"Sicherheitsberprfung erforderlich. Bitte schlieen Sie die Verifizierung ab.",emailNotVerified:"E-Mail noch nicht verifiziert. Bitte besttigen Sie Ihre E-Mail, bevor Sie sich anmelden.",verificationEmailSent:"Besttigungs-E-Mail gesendet. Bitte prfen Sie Ihr Postfach.",resendVerification:"Besttigungs-E-Mail erneut senden",registerCta:"Konto erstellen",alreadyHaveAccount:"Bereits ein Konto?",goToLogin:"Anmelden",sendResetLink:"Link zum Zurcksetzen senden",resendIn:"Sie knnen erneut senden in {{seconds}}s"},hS={save:"Speichern",cancel:"Abbrechen",confirm:"Besttigen",delete:"Lschen",edit:"Bearbeiten",view:"Ansehen",update:"Aktualisieren",add:"Hinzufgen",search:"Suchen",noResults:"Keine Ergebnisse.",close:"Schlieen",back:"Zurck",backToHome:"Zurck zur Startseite",yes:"Ja",no:"Nein",loading:"Laden...",error:"Fehler",success:"Erfolg",warning:"Warnung",ok:"OK",periodLockedError:"Dieser Datensatz kann nicht gelscht werden, da er zu einem gesperrten Geschftsjahr gehrt",description:"Beschreibung",dueDate:"Flligkeitsdatum",startDate:"Startdatum",endDate:"Enddatum",monthlyIncomeExpense:"Monatliches Einkommen/Ausgaben",last6MonthsPerformance:"Leistung der letzten 6 Monate (neueste  lteste)",allCategories:"Alle Kategorien",dateRanges:{thisMonth:"Dieser Monat",last30Days:"Letzte 30 Tage",thisYear:"Dieses Jahr"},filters:{status:"Status",filterByStatus:"Nach Status filtern"},actions:{clear:"Lschen",view:"Ansehen",copyLink:"Link kopieren",downloadPDF:"PDF herunterladen"},exportCSV:"Als CSV exportieren","dateRanges.thisMonth":"Dieser Monat","dateRanges.last30Days":"Letzte 30 Tage","dateRanges.thisYear":"Dieses Jahr","common.total":"Gesamt","common.exportCSV":"Als CSV exportieren","filters.status":"Status","filters.filterByStatus":"Nach Status filtern","actions.clear":"Lschen","actions.view":"Ansehen","actions.copyLink":"Link kopieren","actions.downloadPDF":"PDF herunterladen",allStock:"Alle Lagerbestnde",newest:"Neueste",income:"Einkommen",expense:"Ausgaben",hideChart:"Diagramm Ausblenden",showChart:"Diagramm Anzeigen",chartHidden:"Diagramm ausgeblendet",incomeLabel:"Einkommen",expenseLabel:"Ausgaben",allStatuses:"Alle Status",allAccounts:"Alle Konten",cash:"Bargeld",card:"Karte",transfer:"berweisung",check:"Scheck",email:"E-Mail",quantity:"Menge",statusLabel:"Status",status:{pending:"Ausstehend",approved:"Genehmigt",paid:"Bezahlt",rejected:"Abgelehnt"},notes:"Notizen",modal:{newTitle:"Add New Supplier",editTitle:"Edit Supplier",subtitle:"Enter supplier details",nameLabel:"Supplier Name",companyLabel:"Company Name",emailLabel:"Email",phoneLabel:"Phone",categoryLabel:"Category",taxNumberLabel:"Tax Number",addressLabel:"Address",namePlaceholder:"ABC Supply Ltd.",companyPlaceholder:"ABC Supply Inc.",emailPlaceholder:"info@abcsupply.com",phonePlaceholder:"+1 555 123 4567",taxNumberPlaceholder:"Tax ID",addressPlaceholder:"Full address information..."}},fS={TRY:"Trkische Lira",USD:"US-Dollar",EUR:"Euro",GBP:"Britisches Pfund"},pS={newInvoice:"Neue Rechnung",newSale:"Neuer Verkauf",search:"Suchen...",areas:{label:"Bereichsauswahl",summary:"bersicht",crm:"CRM",finance:"Finanzen"},language:"Sprache",notifications:"Benachrichtigungen",noNotifications:"Keine neuen Benachrichtigungen.",settings:"Einstellungen",logout:"Abmelden"},gS={title:"Dashboard",overview:"bersicht",revenue:"Einnahmen",expense:"Ausgaben",profit:"Gewinn",unpaidInvoices:"Unbezahlte Rechnungen",recentActivity:"Letzte Aktivitten",totalRevenue:"Gesamteinnahmen",totalExpense:"Gesamtausgaben",pendingInvoices:"Ausstehende Rechnungen",activeCustomers:"Aktive Accounts",vatToPay:"Fllige MwSt.",vatToPaySubtitle:"Basierend auf bezahlten Rechnungen dieses Monats",quickActions:"Schnellaktionen",recentTransactions:"Letzte Transaktionen",quickAccess:"Schnellzugriff",lastTransactions:"Ihre letzten {count} Transaktionen",allGood:"Alles in Ordnung!",noAlerts:"Keine ausstehenden Aufgaben oder Benachrichtigungen.",viewAll:"Alle Anzeigen"},xS={newInvoice:"Neue Rechnung",newInvoiceDesc:"Rechnung fr einen Account erstellen",newExpense:"Neue Ausgabe",newExpenseDesc:"Ausgabendatensatz hinzufgen",newSale:"Neuer Verkauf",newSaleDesc:"Verkaufstransaktion erfassen",newQuote:"Neues Angebot",newQuoteDesc:"Angebot fr einen Account erstellen",newCustomer:"Neuer Account",newCustomerDesc:"Accountinformationen hinzufgen",newProduct:"Neues Produkt",newProductDesc:"Produktinformationen hinzufgen",customers:"Accounts",suppliers:"Lieferanten",banks:"Bankkonten",products:"Produkte"},yS={invoice:"Rechnung",expense:"Ausgabe",sale:"Verkauf",paid:"Bezahlt",unpaid:"Unbezahlt",pending:"Ausstehend",actions:"Aktionen",transaction:"Transaktion",customerDescription:"Account/Beschreibung",amount:"Betrag",status:"Status",date:"Datum",noTransactions:"Noch keine Transaktionen"},bS={overdueInvoices:"berfllige Rechnungen",overdueDesc:"berfllige Rechnung",dueSoon:"Demnchst Fllig",dueSoonDesc:"Fllig innerhalb von 7 Tagen",pendingExpenses:"Ausstehende Ausgaben",pendingExpensesDesc:"Ausgabe wartet auf Genehmigung",allGood:"Alles in Ordnung!",noAlerts:"Keine ausstehenden Aufgaben oder Benachrichtigungen.",attentionRequired:"Aufmerksamkeit Erforderlich"},vS="Leistung der letzten 6 Monate (neueste  lteste)",wS={short:{jan:"Jan",feb:"Feb",mar:"Mr",apr:"Apr",may:"Mai",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Okt",nov:"Nov",dec:"Dez"}},NS={summary:"bersicht",dashboard:"Dashboard",invoices:"Rechnungen",expenses:"Ausgaben",customers:"Accounts",products:"Produkte",suppliers:"Lieferanten",banks:"Banken",sales:"Verkufe",crm:"CRM",crmDashboard:"CRM-bersicht",crmPipeline:"Vertriebspipeline",crmOpportunities:"Chancen",crmLeads:"Interessenten",crmContacts:"Kontakte",crmActivities:"Aktivitten",crmTasks:"Aufgaben",quotes:"Angebote",reports:"Berichte",accounting:"Buchhaltung",chartOfAccounts:"Kontenplan",archive:"Archiv",organization:"Organisation",settings:"Einstellungen",close:"Schlieen",archiveConfirm:"Mchten Sie diese Kategorie wirklich archivieren?"},kS={title:"Angebote",newQuote:"Neues Angebot",comingSoon:"Basis-Seite des Angebotsmoduls ist bereit. Erweiterte Liste, Status und PDF-Vorlagen folgen.",placeholderDescription:"Erstellen, Senden, ffentliche Ansicht und Annehmen/Ablehnen-Flows werden hier sein. Navigation und Men-Integration sind vorerst erledigt.",search:"Angebote suchen...",filterAll:"Alle Status",validUntil:"Gltig bis",expiresIn:"(luft in {{days}} Tagen ab)",expiredOn:"(abgelaufen am {{date}})",version:"v{{n}}",confirmAccept:"Sind Sie sicher, dass Sie dieses Angebot annehmen mchten?",acceptedThanks:"Danke, das Angebot wurde angenommen.",confirmDecline:"Sind Sie sicher, dass Sie dieses Angebot ablehnen mchten?",declinedInfo:"Das Angebot wurde abgelehnt.",createConfirm:"Mchten Sie dieses Angebot wirklich speichern?",saveConfirm:"Mchten Sie die nderungen wirklich speichern?",duplicateConfirm:"Mit der Duplizierung fortfahren?",reviseConfirm:"Mchten Sie dieses Angebot berarbeiten? Die aktuelle Version wird archiviert und eine neue Version wird erstellt.",viewModal:{details:"Angebotsdetails"},actions:{send:"Senden",accept:"Annehmen",decline:"Ablehnen",downloadPdf:"PDF Herunterladen",copyLink:"ffentlichen Link kopieren",copyPublicLink:"Link kopieren",copyPublicLinkSuccess:"Link kopiert.",resendEmail:"E-Mail erneut senden",revise:"berarbeiten",duplicate:"Duplizieren"},editModal:{title:"Angebot bearbeiten",subtitle:"Angebotsinformationen aktualisieren",quoteNumber:"Angebots-Nr."},table:{quote:"Angebot",customer:"Account",amount:"Betrag",status:"Status",date:"Datum",actions:"Aktionen"},noQuotes:"Noch keine Angebote",noQuotesDesc:"Beginnen Sie mit der Erstellung Ihres ersten Angebots.",noQuotesFound:"Keine Angebote gefunden",noQuotesFoundDesc:"Keine Angebote entsprechen Ihren Suchkriterien.",createFirstQuote:"Erstes Angebot Erstellen",view:"Ansehen",edit:"Bearbeiten",delete:"Lschen",statusLabels:{viewed:"Angesehen",accepted:"Angenommen",declined:"Abgelehnt",expired:"Abgelaufen",draft:"Entwurf",sent:"Gesendet"},createModal:{title:"Angebot Erstellen",customer:"Account",customerPlaceholder:"Accountnamen eingeben",currency:"Whrung",date:"Ausstellungsdatum",validUntil:"Gltig bis",amount:"Betrag",create:"Erstellen"},scopeOfWork:{title:"Leistungsumfang",placeholder:"Projektumfang, Liefergegenstnde, Annahmen und Ausschlsse...",note:"Dieser Inhalt wird nach dem aktuellen Abschnitt als neue Seite an das Angebots-PDF angehngt und ist im ffentlichen Link sichtbar."},templates:{title:"Angebotsvorlagen",manage:"Vorlagen verwalten",manageTitle:"Angebotsvorlagen verwalten",list:"Vorlagen",new:"Neu",newTemplate:"Neue Vorlage",placeholderName:"Vorlagenname",apply:"Anwenden",create:"Vorlage erstellen",selectPlaceholder:"Vorlage auswhlen",freeHidden:"Vorlagen sind im Starter-Tarif ausgeblendet.",proLimit:"Im Pro-Tarif knnen Sie bis zu 1 Vorlage speichern.",requirePlan:"Plan erforderlich",manageUpgrade:"Zu Pro oder Business wechseln, um Vorlagen zu verwalten.",setDefault:"Standard",availableTokens:"Verfgbare Platzhalter (zum Einfgen klicken):",defaultBodyHtml:"<h3>Angebotszusammenfassung</h3><p>Datum: [quote.date]  Gltig bis: [quote.valid_until]</p><p>Sehr geehrte/r [client.name] ([client.company]), nachfolgend unser Angebot zum beschriebenen Umfang.</p><h4>Umfang</h4><ul><li>Punkt 1</li><li>Punkt 2</li><li>Punkt 3</li></ul><h4>Gesamt</h4><p>Gesamt: [quote.total] [quote.currency]</p><h4>Kontakt</h4><p>[org.name]  [org.email]  [org.phone]  [org.address]</p>"}},jS={thisMonth:"diesen Monat",all:"alle"},SS={paid:"Bezahlt",unpaid:"Unbezahlt",pending:"Ausstehend",overdue:"berfllig",draft:"Entwurf",sent:"Gesendet",approved:"Genehmigt",rejected:"Abgelehnt",cancelled:"Storniert",completed:"Abgeschlossen",active:"Aktiv",inactive:"Inaktiv",viewed:"Angesehen",accepted:"Akzeptiert",declined:"Abgelehnt",expired:"Abgelaufen",invoiced:"Fakturiert",created:"Erstellt",refunded:"Erstattet"},CS={details:"Rechnungsdetails",downloadPdf:"PDF Herunterladen",information:"Rechnungsinformationen",type:"Rechnungstyp",productSale:"Produktverkauf",serviceSale:"Dienstleistungsverkauf",issueDate:"Ausstellungsdatum",dueDate:"Flligkeitsdatum",customerInfo:"Accountinformationen",itemsServices:"Artikel/Dienstleistungen",description:"Beschreibung",quantity:"Menge",unitPrice:"Stckpreis",total:"Gesamt",subtotal:"Zwischensumme",vat:"MwSt",grandTotal:"Gesamtsumme",notes:"Notizen"},AS={details:"Ausgabendetails",information:"Ausgabeninformationen",number:"Ausgaben-Nr",date:"Ausgabendatum",category:"Kategorie",supplier:"Lieferant",amount:"Betrag",receipt:"Beleg",viewReceipt:"Beleg Anzeigen"},TS={history:"Transaktionsverlauf",transactions:"Transaktionen gefunden",noHistory:"Noch Kein Transaktionsverlauf",noHistoryDesc:"hat noch keine Rechnungen oder Transaktionsdatenstze.",tip:"Tipp:",tipDesc:"Sie knnen den Transaktionsverlauf starten, indem Sie eine neue Rechnung fr diesen Account erstellen.",createInvoice:"Rechnung Erstellen",sale:"Verkauf",completed:"Abgeschlossen",waiting:"Wartend",historyPageTitle:"Accountverlauf",historySubtitle:"Gesamter Verlauf fr {{name}}",historyColumns:{name:"Eintrag / Nr.",date:"Datum",status:"Status",createdBy:"Erstellt von",type:"Typ",description:"Beschreibung"}},ES={expenseHistory:"Ausgabenverlauf",expensesFound:"Ausgaben gefunden",noExpenseHistory:"Noch Kein Ausgabenverlauf",noExpenseHistoryDesc:"hat noch keine Ausgabendatenstze.",tip:"Tipp:",tipDesc:"Sie knnen den Transaktionsverlauf starten, indem Sie eine neue Ausgabe fr diesen Lieferanten erstellen.",createExpense:"Ausgabe Erstellen",viewExpense:"Ausgabe anzeigen"},DS={title:"Produkte",newProduct:"Neues Produkt",search:"Produkte suchen...",filterCategory:"Alle Kategorien",name:"Produktname",category:"Kategorie",price:"Preis",stock:"Bestand",sort:"Sortierung",status:"Status",actions:"Aktionen",noProducts:"Noch keine Produkte",addFirstProduct:"Fgen Sie Ihr erstes Produkt hinzu",edit:"Bearbeiten",delete:"Lschen",deleteConfirm:"Sind Sie sicher, dass Sie dieses Produkt lschen mchten?",manageCategories:"Kategorien Verwalten",totalProducts:"Produkte Gesamt",stockValue:"Lagerwert",totalStock:"Gesamtbestand",lowStock:"Niedriger Bestand",activeProductsDesc:"Anzahl aktiv verkaufter Produkte",totalStockCostDesc:"Geschtzte Gesamtlagerkosten",totalUnitsDesc:"Gesamteinheiten im Lager",criticalLevelDesc:"Produkte unter kritischem Niveau",productCategories:"Produktkategorien",archivedCategories:"Archivierte Kategorien",showArchived:"Archivierte anzeigen",hideArchived:"Archivierte ausblenden",activate:"Aktivieren",noArchivedCategories:"Keine archivierten Kategorien",addCategory:"Kategorie hinzufgen",categoriesCount:"Kategorien",allProducts:"Alle Produkte",noCategories:"Noch keine Kategorien.",mainCategoriesTitle:"Hauptkategorien",subCategories:"Unterkategorien",editCategory:"Bearbeiten",deleteCategory:"Lschen",editCategoryTooltip:"Kategorie bearbeiten",mainCategoryEditTooltip:"Nur Steuersatz kann fr Hauptkategorien gendert werden",generalCategoryCannotDelete:"Allgemeine Kategorie kann nicht gelscht werden",mainCategoryCannotDelete:"Hauptkategorie kann nicht gelscht werden",deleteCategoryConfirm:"Sind Sie sicher, dass Sie diese Kategorie lschen mchten?",deleteCategoryWithProducts:"In dieser Kategorie gibt es {{count}} aktive Produkte. Verschieben Sie sie zuerst in eine andere Kategorie.",categoryCannotDeleteProtected:'"{category}" kann nicht gelscht werden, da es eine Hauptkategorie ist.',generalCategoryCannotDeleteAlert:"Allgemeine Kategorie kann nicht gelscht werden.",updatePrice:"Preis aktualisieren",assignCategory:"Kategorie zuweisen",archive:"Archivieren",noProductsYet:"Noch keine Produkte",costPrice:"Kosten",unit:"Einheit",productsCount:"Produkte",allStock:"Alle Bestnde",lowStockFilter:"Niedriger Bestand",outOfStock:"Nicht vorrtig",overstock:"berbestand",newest:"Neueste",priceHighLow:"Preis (Hoch-Niedrig)",priceLowHigh:"Preis (Niedrig-Hoch)",stockHighLow:"Bestand (Hoch-Niedrig)",stockLowHigh:"Bestand (Niedrig-Hoch)",inStock:"Auf Lager",critical:"Kritisch",depleted:"Aufgebraucht",cost:"Kosten",minStock:"Mind. Bestand",view:"Anzeigen",viewProduct:"Produkt anzeigen",mainCategories:{products:"Produkte",services:"Dienstleistungen"},createCategoryFirst:"Sie mssen zuerst eine neue Kategorie erstellen.",productServiceName:"Produkt-/Dienstleistungsname",selectFromList:"Produkt aus Liste auswhlen",productsFound:"Produkte gefunden",editProduct:"Produkt Bearbeiten",enterProductInfo:"Produktinformationen ausfllen und Lagerstatus aktualisieren",generalInfo:"ALLGEMEINE INFORMATIONEN",priceAndStock:"PREIS UND LAGER",notes:"NOTIZEN",namePlaceholder:"Produkt-/Dienstleistungsname",unitPlaceholder:"Einheit (z.B: Stk, kg, Stunde)",descriptionPlaceholder:"Produkteigenschaften, Garantieinformationen usw.",useCustomTax:"Benutzerdefinierten MwSt-Satz verwenden",customTaxNote:"Sie knnen einen anderen MwSt-Satz fr dieses Produkt festlegen. Wenn leer gelassen, wird die Kategorie-MwSt verwendet.",categoryTax:"Kategorie MwSt",salePrice:"Verkaufspreis",stockQuantity:"Lagerbestand",criticalStock:"Kritischer Bestand",customTaxRate:"Benutzerdefinierter Steuersatz",taxRatePlaceholder:"18,0",customTaxRateHelper:"Benutzerdefinierter MwSt-Satz fr dieses Produkt. berschreibt Kategorie-MwSt.",noCategoriesFound:"Keine Kategorien gefunden",useCustomTaxRate:"Benutzerdefinierten MwSt-Satz verwenden",description:"Beschreibung",categoryModal:{titleNew:"Kategorie hinzufgen",titleEdit:"Kategorie bearbeiten",subtitleNew:"Neue Produktkategorie speichern.",subtitleEdit:"Kategoriedetails aktualisieren.",parentLabel:"bergeordnete Kategorie",parentHelper:"Zu welcher Hauptkategorie gehrt dies?",nameLabel:"Kategoriename",namePlaceholder:"Z. B.: Elektronik",taxLabel:"MwSt-Satz (%)",taxPlaceholder:"Z. B.: 18",taxHelperChildOverrides:"Hat die Unterkategorie einen Steuersatz, berschreibt sie die bergeordnete MwSt.",taxHelperDefault:"Standard-MwSt-Satz fr Produkte in dieser Kategorie.",nameRequired:"Kategoriename ist erforderlich",parentRequired:"Auswahl der bergeordneten Kategorie ist erforderlich",taxInvalid:"MwSt-Satz muss zwischen 0-100 liegen",nameExists:"Diese Kategorie existiert bereits"},cannotArchiveCategoryWithProducts:"Diese Kategorie enthlt {{count}} Produkte. Verschieben oder lschen Sie sie vor dem Archivieren."},_S={title:"Kontenplan",subtitle:"Verwalten Sie Ihren Buchhaltungskontenplan",newAccount:"Neues Konto",search:"Nach Kontocode oder Name suchen...",code:"Code",accountName:"Kontoname",type:"Typ",balance:"Saldo",status:"Status",actions:"Aktionen",accountsRegistered:"Konten registriert",clickToEdit:"Klicken Sie auf Kontoname, Code oder Saldo zum Bearbeiten",addAccountTip:"Verwenden Sie die Schaltflche oben, um ein neues Konto hinzuzufgen",active:"Aktiv",passive:"Inaktiv",allSummed:"alle summiert",accountTypes:{all:"Alle",asset:"Vermgen",liability:"Verbindlichkeit",equity:"Eigenkapital",revenue:"Erls",expense:"Ausgabe"},accountTypesPlural:{asset:"Vermgenswerte",liability:"Verbindlichkeiten",equity:"Eigenkapital",revenue:"Erlse",expense:"Ausgaben"},statusLabels:{active:"Aktiv",inactive:"Inaktiv"},tooltips:{editHint:"Klicken Sie auf die Kontozeile zum Bearbeiten"},accountNames:{100:"UMLAUFVERMGEN",101:"Kasse",102:"Banken",120:"Forderungen",150:"ANLAGEVERMGEN",200:"KURZFRISTIGE VERBINDLICHKEITEN",201:"Verbindlichkeiten aus Lieferungen",300:"EIGENKAPITAL",600:"ERLSE",601:"Umsatzerlse",602:"Dienstleistungserlse",700:"AUFWENDUNGEN",701:"Mietaufwendungen",702:"Personalaufwendungen",703:"Rechnungsaufwendungen"},accountTypeLabels:{asset:"Vermgen",liability:"Verbindlichkeit",equity:"Eigenkapital",revenue:"Erls",expense:"Aufwand"}},PS={title:"Rechnungen",newInvoice:"Neue Rechnung",editInvoice:"Rechnung Bearbeiten",enterInvoiceInfo:"Geben Sie Accountdaten und Produktdetails ein",deleteConfirm:"Sind Sie sicher, dass Sie diese Rechnung lschen mchten?",deleteSuccess:"Rechnung gelscht",search:"Rechnungsnummer oder Account suchen...",filterAll:"Alle Status",invoicesRegistered:"Rechnungen registriert",inArchive:"im Archiv",noInvoices:"Noch keine Rechnungen",noInvoicesFound:"Keine Rechnungen gefunden",showVoided:"Stornierte Anzeigen",hideVoided:"Stornierte Ausblenden",noInvoicesDesc:"Beginnen Sie mit Ihrer ersten Rechnung.",noInvoicesFoundDesc:"Keine Rechnungen entsprechen Ihren Suchkriterien.",createFirstInvoice:"Erste Rechnung Erstellen",invoiceNumber:"Rechnung",customer:"Account",date:"Datum",amount:"Betrag",status:"Status",actions:"Aktionen",view:"Anzeigen",edit:"Bearbeiten",download:"Herunterladen",delete:"Lschen",viewInvoice:"Rechnung anzeigen",createInvoice:"Rechnung Erstellen",selectInvoiceType:"Rechnungstyp auswhlen",newSale:"Neuer Verkauf",newSaleDescription:"Neuen Verkaufsdatensatz erstellen und Rechnung ausstellen",newSaleNote:"Verkauf und Rechnung werden automatisch erstellt",existingSale:"Bestehender Verkauf",existingSaleDescription:"Rechnung fr einen bereits gettigten Verkauf ausstellen",existingSaleNote:"Nur Rechnungsinformationen knnen bearbeitet werden",returnInvoice:"Gutschrift",returnInvoiceDescription:"Erstellen Sie eine Rckgabe-/Gutschrift fr eine bereits ausgestellte Rechnung",returnInvoiceNote:"Rckgabe wird durch Auswahl aus bestehenden Rechnungen erstellt",invoiceNumberAutoGenerated:"Rechnungsnummer wird automatisch generiert",invoiceType:"Rechnungsart",productInvoice:"Produktrechnung (Normal)",selectInvoiceToReturn:"-- Rechnung fr Rckgabe auswhlen --",invoiceToReturn:"Rechnung fr Rckgabe (erforderlich)",returnInvoiceAutoLoad:" Ausgewhlte Rechnungsprodukte werden automatisch mit negativen Mengen geladen.",issueDate:"Rechnungsdatum",dueDate:"Flligkeitsdatum",customerName:"Accountname",customerSearchPlaceholder:"Account suchen oder neuen Accountnamen eingeben",productsAndServices:"Produkte und Dienstleistungen",addLine:"Zeile hinzufgen",description:"Beschreibung",quantity:"Menge",unitPriceExclVAT:"Einzelpreis (ohne MwSt.)",totalInclVAT:"Gesamt (inkl. MwSt.)",notes:"Notizen",notesPlaceholder:"Zustzliche Notizen zum Verkauf",autoGenerated:"Automatisch generiert",statusCompleted:"Abgeschlossen",statusPending:"Ausstehend",statusCancelled:"Storniert",enterSaleInfo:"Verkaufsinformationen eingeben",productServiceDescription:"Produkt- oder Servicebeschreibung",subtotalExclVAT:"Zwischensumme (ohne MwSt.)",vat:"MwSt.",discount:"Rabatt",grandTotalInclVAT:"Gesamtsumme (inkl. MwSt.)",grandTotalExclVAT:"Gesamtsumme (ohne MwSt.)",createInvoiceFromSale:"Rechnung aus Verkauf Erstellen",completeInvoiceInfo:"Rechnungsinformationen vervollstndigen",invoiceInfo:"Rechnungsinformationen",invoiceStatus:"Rechnungsstatus",invoiceNotes:"Rechnungsnotizen",invoiceTotals:"Rechnungsbetrge",amountExclTax:"Betrag (ohne MwSt.)"},IS={title:"Ausgaben",newExpense:"Neue Ausgabe",deleteConfirm:"Sind Sie sicher, dass Sie diese Ausgabe lschen mchten?",deleteSuccess:"Ausgabe gelscht",deleteError:"Ausgabe konnte nicht gelscht werden",search:"Ausgabenbeschreibung oder Lieferant suchen...",filterAll:"Alle Status",expensesRegistered:"Ausgaben registriert",noExpenses:"Noch keine Ausgaben",noExpensesFound:"Keine Ausgaben gefunden",noExpensesDesc:"Beginnen Sie mit Ihrer ersten Ausgabe.",noExpensesFoundDesc:"Keine Ausgaben entsprechen Ihren Suchkriterien.",createFirstExpense:"Erste Ausgabe Erstellen",description:"Beschreibung",supplier:"Lieferant",category:"Kategorie",date:"Datum",amount:"Betrag",status:"Status",actions:"Aktionen",view:"Anzeigen",edit:"Bearbeiten",download:"Herunterladen",delete:"Lschen",viewExpense:"Ausgabe anzeigen",enterExpenseDetails:"Ausgabedetails eingeben",editExpense:"Ausgabe Bearbeiten",enterExpenseInfo:"Ausgabeinformationen eingeben",expenseNumber:"Ausgabennummer",expenseDate:"Ausgabendatum",paymentDate:"Zahlungsdatum",addExpense:"Ausgabe Hinzufgen",supplierPlaceholder:"Lieferantennamen eingeben...",descriptionPlaceholder:"Ausgabenbeschreibung...",totalExpense:"Gesamtausgabe",receiptUrl:"Beleg/Rechnung URL",receiptUrlHelper:"Sie knnen einen Link zu Beleg- oder Rechnungsbild/PDF hinzufgen",exportCsv:"Als CSV exportieren"},MS={title:"Accounts",newCustomer:"Neuer Account",search:"Accounts suchen...",customersRegistered:"Accounts registriert",noCustomers:"Noch keine Accounts",noCustomersFound:"Keine Accounts gefunden",noCustomersDesc:"Beginnen Sie mit Ihrem ersten Account.",noCustomersFoundDesc:"Keine Accounts entsprechen Ihren Suchkriterien.",createFirstCustomer:"Ersten Account Hinzufgen",name:"Account-Name",email:"E-Mail",phone:"Telefon",totalInvoices:"Rechnungen Gesamt",totalAmount:"Gesamtbetrag",actions:"Aktionen",importCSV:"CSV/Excel Importieren",downloadTemplate:"Vorlage Herunterladen",address:"Adresse",emailPlaceholder:"account@example.com",addressPlaceholder:"Vollstndige Adressinformationen...",addCustomer:"Account Hinzufgen",selectFromList:"Account aus Liste auswhlen",customersFound:"Accounts gefunden",enterCustomerInfo:"Accountinformationen eingeben",editCustomer:"Account Bearbeiten",taxNumber:"Steuernummer",company:"Firmenname",namePlaceholder:"Max Mustermann",companyPlaceholder:"ABC Technologie GmbH",import:{noDataFound:"Keine Daten in der Datei gefunden.",noCustomersFound:"Keine Accounts zum Importieren in der Datei gefunden.",success:"{{count}} Accounts erfolgreich importiert!",error:"Fehler beim Import aufgetreten."},duplicate:{title:"Doppelte EMail gefunden",message:"Ein Account ist bereits mit dieser EMail ({{email}}) registriert: {{name}}. Bitte whlen oder bearbeiten Sie den bestehenden Eintrag.",openExisting:"Bestehenden Account ffnen"}},RS={title:"Lieferanten",newSupplier:"Neuer Lieferant",search:"Lieferanten suchen...",suppliersRegistered:"Lieferanten registriert",noSuppliers:"Noch keine Lieferanten",noSuppliersFound:"Keine Lieferanten gefunden",noSuppliersDesc:"Beginnen Sie mit Ihrem ersten Lieferanten.",noSuppliersFoundDesc:"Keine Lieferanten entsprechen Ihren Suchkriterien.",createFirstSupplier:"Ersten Lieferanten Hinzufgen",name:"Name",email:"E-Mail",phone:"Telefon",totalExpenses:"Ausgaben Gesamt",totalAmount:"Gesamtbetrag",actions:"Aktionen",modal:{newTitle:"Neuen Lieferanten hinzufgen",editTitle:"Lieferanten bearbeiten",subtitle:"Lieferantendaten eingeben",nameLabel:"Lieferantenname",companyLabel:"Firmenname",emailLabel:"E-Mail",phoneLabel:"Telefon",categoryLabel:"Kategorie",taxNumberLabel:"Steuernummer",addressLabel:"Adresse",namePlaceholder:"ABC Versorgung GmbH",companyPlaceholder:"ABC Versorgung GmbH",emailPlaceholder:"info@abcversorgung.de",phonePlaceholder:"+49 170 1234567",taxNumberPlaceholder:"Steuernummer",addressPlaceholder:"Vollstndige Adressinformationen..."}},zS={title:"Bankkonten",newAccount:"Neues Konto",search:"Bankname, Kontoname oder Nummer suchen...",filterAll:"Alle Konten",accountsRegistered:"Konten registriert",totalBalance:"Gesamtsaldo",noBanks:"Noch keine Bankkonten",noBanksFound:"Keine Konten gefunden",noBanksDesc:"Beginnen Sie mit Ihrem ersten Bankkonto.",noBanksFoundDesc:"Keine Konten entsprechen Ihren Suchkriterien.",createFirstAccount:"Erstes Konto Hinzufgen",bankName:"Bank",accountName:"Kontoname",accountNumber:"Konto-Nr.",balance:"Saldo",status:"Status",actions:"Aktionen",editAccount:"Konto Bearbeiten",enterAccountInfo:"Bankkontoinformationen eingeben",selectBank:"Bank auswhlen",accountNamePlaceholder:"Firmenname oder Personenname",accountType:"Kontotyp",accountTypes:{checking:"Girokonto",savings:"Sparbuch",business:"Geschftskonto"},ibanAutoFormat:"IBAN wird automatisch formatiert",currentBalance:"Aktueller Saldo",currency:"Whrung",accountActive:"Konto aktiv",addAccount:"Konto Hinzufgen",routingNumber:"Routing-Nummer (ABA)",swiftBic:"SWIFT/BIC",branchCode:"Filialcode",deleteConfirm:"Mchten Sie dieses Bankkonto wirklich lschen?"},LS={title:"Einstellungen",subtitle:"Verwalten Sie Ihre System- und Kontoeinstellungen",save:"Speichern",cancel:"Abbrechen",profile:"Profil",company:"Unternehmensinformationen",system:"Systemeinstellungen",security:"Sicherheit",data:"Datenverwaltung",currency:"Whrung",language:"Sprache",notifications:"Benachrichtigungen",theme:"Thema",success:"Erfolg",error:"Fehler",saved:"Einstellungen gespeichert",saveFailed:"Einstellungen konnten nicht gespeichert werden",companyFields:{officialName:"Rechtlicher Firmenname",brandName:"Rechnungs-/Markenname",brandNameHelper:"Dieser Name erscheint als Markenname auf Rechnungen und ffentlichen Ansichten.",officialNameTooltip:"Nur der Inhaber oder ein Admin kann den rechtlichen Firmennamen aktualisieren",officialNameOwnerOnly:"Dieses Feld kann nur vom Firmeninhaber gendert werden."}},OS={title:"Verkufe",newSale:"Neuer Verkauf",totalSales:"Gesamtumsatz",totalSalesCount:"Gesamtanzahl Verkufe",completed:"Abgeschlossen",salesList:"Verkaufsliste",salesRegistered:"Verkufe registriert",search:"Nach Verkaufsnummer, Account oder Produkt suchen...",noSales:"Noch keine Verkufe",noSalesFound:"Keine Verkufe gefunden",noSalesDesc:"Beginnen Sie mit Ihrem ersten Verkauf.",noSalesFoundDesc:"Keine Verkufe entsprechen Ihren Suchkriterien.",createFirstSale:"Ersten Verkauf Hinzufgen",sale:"Verkauf",customer:"Account",productService:"Produkt/Dienstleistung",amount:"Betrag",status:"Status",date:"Datum",actions:"Aktionen",viewSale:"Verkauf anzeigen",editSale:"Verkauf bearbeiten",deleteSale:"Verkauf lschen",deleteConfirm:"Sind Sie sicher, dass Sie diesen Verkauf lschen mchten?",createInvoice:"Rechnung Erstellen",download:"Herunterladen",subtitle:"Verwalten Sie Ihre Verkaufsaufzeichnungen",saleCompleted:"Verkauf Abgeschlossen!",saleCompletedDesc:"Der Verkauf wurde erfolgreich erfasst.",createInvoiceQuestion:"Mchten Sie eine Rechnung erstellen?",autoGenerated:"Automatisch generiert",statusCompleted:"Abgeschlossen",statusPending:"Ausstehend",statusCancelled:"Storniert",saleNumber:"Verkaufsnummer",saleDate:"Verkaufsdatum",autoNumberNote:"Nummer wird beim Speichern automatisch generiert",unitPriceInclVAT:"Einzelpreis (MwSt. inkl.)",totalInclVAT:"Gesamt (MwSt. inkl.)",unitPriceExclVAT:"Einzelpreis (ohne MwSt.)",totalExclVAT:"Gesamt (ohne MwSt.)",notesPlaceholder:"Zustzliche Notizen zum Verkauf",addSale:"Verkauf hinzufgen",enterSaleInfo:"Verkaufsinformationen eingeben",saleSummary:"Verkaufszusammenfassung",invoiceWillBeDownloaded:"Wenn eine Rechnung erstellt wird, wird sie automatisch im PDF-Format heruntergeladen.",confirmInvoiceCreation:"Rechnung erstellen?",invoiceWillOpen:"Die Rechnung wird nach der Erstellung im Anzeigefenster geffnet.",recordOnlySale:"Nur Verkauf erfassen",recordSaleWithInvoice:"Verkauf mit Rechnung",confirmInvoiceAction:"Ja, erstellen",creatingInvoice:"Wird erstellt...",selectExistingSale:"Vorhandenen Verkauf Auswhlen",selectSaleForInvoice:"Verkauf fr Rechnung auswhlen",searchSalesPlaceholder:"Nach Verkaufsnummer, Account oder Produkt suchen...",noInvoiceableSales:"Keine abrechenbaren Verkufe gefunden",changeSearchCriteria:"Versuchen Sie, Ihre Suchkriterien zu ndern",allSalesInvoiced:"Alle Verkufe wurden abgerechnet",pieces:"Stk",saleInfo:"Verkaufsinformationen",salesWaitingForInvoice:"Auf Rechnung wartende Verkufe: {{count}}"},FS={twofa:{reminderTitle:"Zwei-Faktor-Authentifizierung aktivieren",reminderDesc:"Aktivieren Sie 2FA fr besseren Kontoschutz.",modalTitle:"Sichern Sie Ihr Konto",modalMessage:"Die Zwei-Faktor-Authentifizierung (2FA) erhht die Kontosicherheit erheblich. Mchten Sie sie jetzt aktivieren?",enableNow:"Jetzt Aktivieren",neverRemind:"Nie wieder erinnern"}},BS={common:{dataLoadError:"Beim Laden der Daten ist ein Fehler aufgetreten"},invoices:{updateSuccess:"Rechnung aktualisiert",updateError:"Rechnung konnte nicht aktualisiert werden",createPartialError:"Rechnung erstellt, aber Verkauf konnte nicht erstellt werden",createWithSaleSuccess:"Rechnung und Verkauf erstellt",cancelSuccess:"Rechnung storniert",cancelError:"Rechnung konnte nicht storniert werden",restoreSuccess:"Rechnung wiederhergestellt",restoreError:"Rechnung konnte nicht wiederhergestellt werden",createSuccess:"Rechnung erfolgreich erstellt"},customers:{updateSuccess:"Account aktualisiert",createSuccess:"Account hinzugefgt",deleteSuccess:"Account gelscht",deleteError:"Account konnte nicht gelscht werden"},suppliers:{updateSuccess:"Lieferant aktualisiert",createSuccess:"Lieferant hinzugefgt",deleteSuccess:"Lieferant gelscht",deleteError:"Lieferant konnte nicht gelscht werden"},sales:{customerNotSelected:"Kein Account ausgewhlt! Bitte whlen Sie einen gltigen Account.",insufficientStock:" Unzureichender Bestand! {{name}} - Verfgbar: {{available}}, Angefordert: {{requested}}",createSuccess:"Verkauf gespeichert",updateSuccess:"Verkauf aktualisiert",localSaved:"Verkauf lokal gespeichert (offline)",stockUpdateFailed:"Verkauf gespeichert, aber Bestand konnte nicht aktualisiert werden",deleteError:"Verkauf konnte nicht gelscht werden",deleteSuccess:"Verkauf erfolgreich gelscht",customerNotFound:"Account nicht gefunden! Bitte erstellen Sie zuerst einen Account."},expenses:{updateSuccess:"Ausgabe aktualisiert",createSuccess:"Ausgabe hinzugefgt",cancelSuccess:"Ausgabe storniert",cancelError:"Ausgabe konnte nicht storniert werden",statusUpdateSuccess:"Ausgabenstatus aktualisiert",restoreSuccess:"Ausgabe wiederhergestellt",restoreError:"Ausgabe konnte nicht wiederhergestellt werden"},products:{updateSuccess:"Produkt aktualisiert",createSuccess:"Produkt hinzugefgt",deleteSuccess:"Produkt gelscht",deleteError:"Produkt konnte nicht gelscht werden",bulkRemoved:"{{count}} Produkte entfernt",bulkNotFound:"Ausgewhlte Produkte nicht gefunden",bulkArchived:"{{count}} Produkte archiviert",bulkAlreadyArchived:"Ausgewhlte Produkte sind bereits archiviert",bulkPriceUpdateSaved:"Ihre Auswahl fr die Massenpreisaktualisierung wurde gespeichert. Bearbeiten Sie dies in der Produktdetailansicht."},categories:{added:"Kategorie {{name}} hinzugefgt (MwSt.: %{{taxRate}})",addError:"Kategorie konnte nicht hinzugefgt werden",updateSuccess:"Kategorie aktualisiert",deleteSuccess:"Kategorie gelscht",assignmentInfo:"Fr die Kategoriezuteilung verwenden Sie das Kategoriemen im linken Bereich."},bank:{deleteError:"Bank konnte nicht gelscht werden"},quotes:{createSuccess:"Angebot erstellt",createError:"Angebot konnte nicht erstellt werden"}},US={invoices:{overdue:{title:"berfllige Rechnungszahlung",desc:"{{invoiceNumber}} - {{customerName}} ({{daysOverdue}} Tage berfllig)"},upcoming:{title:"Bevorstehende Rechnungszahlung",desc:"{{invoiceNumber}} - {{customerName}} ({{daysLeft}} Tage verbleiben)"},created:{title:"Neue Rechnung erstellt",desc:"Rechnung {{invoiceNumber}} fr {{customerName}} ist bereit."}},expenses:{overdue:{title:"berfllige Ausgaben-Zahlung",desc:"{{description}} - {{supplierName}} ({{daysOverdue}} Tage berfllig)"},upcoming:{title:"Bevorstehende Ausgaben-Zahlung",desc:"{{description}} - {{supplierName}} ({{daysLeft}} Tage verbleiben)"},created:{title:"Neue Ausgabe erfasst",desc:"{{supplierName}} - {{description}}: {{amount}}"}},products:{lowStock:{title:"Niedriger Lagerbestand",desc:"{{name}} - Bestand unter Mindestniveau ({{stock}}/{{min}})"},outOfStock:{title:"Bestand aufgebraucht",desc:"{{name}} - Bestand aufgebraucht!"}},quotes:{expired:{title:"Angebot abgelaufen",desc:"{{quoteNumber}} - abgelaufen"},dueSoon:{title:"Angebot luft bald ab",desc:"{{quoteNumber}} - {{diffDays}} Tage verbleiben"}},customers:{created:{title:"Neuer Account hinzugefgt",desc:"{{name}} wurde registriert."}},suppliers:{created:{title:"Neuer Lieferant hinzugefgt",desc:"{{name}} wurde registriert."}},sales:{created:{title:"Neuer Verkauf erfasst",desc:"{{customerName}} - {{summary}}: {{totalAmount}}"}},plan:{limit:{title:"Planlimit Warnung",invoices:{desc:"Sie nhern sich dem monatlichen Rechnungs-Limit ({{used}}/{{limit}})."},expenses:{desc:"Sie nhern sich dem monatlichen Ausgaben-Limit ({{used}}/{{limit}})."}}}},VS={method:"Zahlungsmethode",cash:"Bargeld",card:"Kredit-/Bankkarte",transfer:"berweisung",check:"Scheck"},qS={title:"Berichte",subtitle:"Detaillierte Analyseberichte fr Ihr Unternehmen",reportDate:"Berichtsdatum",overview:"berblick",basicMetrics:"Grundlegende Metriken",totalIncome:"Gesamteinkommen",totalExpense:"Gesamtausgaben",netProfit:"Nettogewinn",totalCustomers:"Gesamtaccounts",net:"Netto",financialHealth:"Finanzielle Gesundheit",profitMargin:"Gewinnmarge",growthRate:"Wachstumsrate",averageSale:"Durchschnittlicher Verkauf",activeCustomers:"Aktive Accounts",paymentStatusAnalysis:"Zahlungsstatusanalyse",invoiceStatuses:"Rechnungsstatus",expenseStatuses:"Ausgabenstatus",vatAnalysis:"MwSt.-Analyse",vatAnalysisSubtitle:"Verfolgen Sie Ihre Mehrwertsteuerpflicht basierend auf bezahlten Rechnungen",currentYearLabel:"Laufendes Jahr ({{year}})",vatYearToDate:"MwSt. seit Jahresbeginn",vatChangeVsLastYear:"{{percent}} vs. Vorjahr ({{lastYear}})",vatThisMonth:"MwSt. diesen Monat",vatChangeVsPreviousMonth:"{{percent}} vs. Vormonat ({{previous}})",vatAverageSixMonths:"Durchschn. MwSt. (6 Monate)",vatAverageHint:"Gleitender Durchschnitt der letzten 6 Monate bezahlter MwSt.",vatMonthlyBreakdown:"Monatliche MwSt.-Aufschlsselung",lastMonthsPerformance:"Letzte {{count}} Monate",noVatData:"Noch keine MwSt.-Daten",revenueAnalysis:"Umsatzanalyse",productBasedSales:"Produktbasierte Verkufe",sales:"Verkufe",avg:"",monthlyRevenueTrend:"Monatlicher Umsatztrend",expenseAnalysis:"Ausgabenanalyse",categoryBasedExpenses:"Kategoriebasierte Ausgaben",expenses:"Ausgaben",monthlyExpenseTrend:"Monatlicher Ausgabentrend",topSuppliers:"Top-Lieferanten nach Ausgaben",lastExpense:"Letzte",recentExpenses:"Letzte Ausgaben",expenseCategoryDistribution:"Ausgabenkategorieverteilung",customerAnalysis:"Accountanalyse",topCustomers:"Top-Accounts",purchases:"Einkufe",last:"Letzte",customerStatistics:"Accountstatistiken",activeCustomersCount:"Aktive Accounts",revenuePerCustomer:"Umsatz pro Account",salesPerCustomer:"Verkufe pro Account",averagePurchases:"Durchschnittliche Einkufe",maxPurchases:"Maximale Einkufe",performanceReports:"Leistungsberichte",kpiDashboard:"KPI-Dashboard",increase:"Zunahme",decrease:"Abnahme",monthlyPerformanceTable:"Monatliche Leistungstabelle",total6Months:"Gesamt (6 Monate)",totalIncome6Months:"Gesamteinkommen (6 Monate)",totalExpense6Months:"Gesamtausgaben (6 Monate)",netProfit6Months:"Nettogewinn (6 Monate)",month:"Monat",profit:"Gewinn",profitMarginPercent:"Gewinnmarge",expenseRatio:"Ausgabenverhltnis",expenseEfficiency:"Ausgabeneffizienzanalyse",expenseCategoryPerformance:"Ausgabenkategorieleistung",noSupplier:"Kein Lieferant",noCustomer:"Kein Account",last6MonthsPerformance:"Leistung der letzten 6 Monate (neueste  lteste)",quoteAnalysis:"Angebotsanalyse",quoteStatuses:"Angebotsstatus",totalQuotes:"Gesamtangebote",acceptedRate:"Akzeptanzrate",averageQuote:"Durchschnittliches Angebot",expiringSoon:"Bald ablaufend",recentQuotes:"Aktuelle Angebote",daysLeft:"Verbleibende Tage",quotes:"Angebote"},$S={totalCredit:"Gesamtgutschrift",totalDebit:"Gesamtbelastung",netBalance:"Nettosaldo",entry:{invoicePrefix:"Rechnung",expensePrefix:"Ausgabe",salePrefix:"Direktverkauf"}},HS={equipment:"Ausrstung",utilities:"Versorgungsunternehmen",rent:"Miete",salaries:"Gehlter",personnel:"Personal",supplies:"Verbrauchsmaterialien",marketing:"Marketing",travel:"Reisen",insurance:"Versicherung",taxes:"Steuern",other:"Andere"},KS={title:"Archiv",subtitle:"Ihre abgeschlossenen und historischen Aufzeichnungen",totalArchive:"Gesamtarchiv",archivedInvoices:"Archivierte Rechnungen",archivedExpenses:"Archivierte Ausgaben",archivedSales:"Archivierte Verkufe",totalContacts:"Gesamtkontakte",searchPlaceholder:"Im Archiv suchen...",clearFilters:"Filter Lschen",tabs:{all:"Alle",invoices:"Rechnungen",expenses:"Ausgaben",sales:"Verkufe",contacts:"Kontakte"},sections:{archivedInvoices:"Archivierte Rechnungen",archivedExpenses:"Archivierte Ausgaben",archivedSales:"Archivierte Verkufe",customers:"Accounts",suppliers:"Lieferanten",archiveSummary:"Archivzusammenfassung"},empty:{invoices:"Keine archivierten Rechnungen",invoicesHelper:"Bezahlte oder berfllige Rechnungen erscheinen hier",expenses:"Keine archivierten Ausgaben",expensesHelper:"Bezahlte Ausgaben erscheinen hier",sales:"Keine archivierten Verkufe",salesHelper:"Abgeschlossene Verkufe erscheinen hier",customers:"Keine Accounts gefunden",suppliers:"Keine Lieferanten gefunden"},table:{invoice:"Rechnung",customer:"Account",amount:"Betrag",status:"Status",date:"Datum",actions:"Aktionen",expense:"Ausgabe",supplier:"Lieferant",category:"Kategorie",sale:"Verkauf",product:"Produkt/Dienstleistung",registered:"Registriert"},actions:{view:"Ansehen",download:"Herunterladen"},summary:{financial:"Finanzielle Zusammenfassung",totalIncome:"Gesamtarchiviertes Einkommen",totalExpense:"Gesamtarchivierte Ausgaben",netArchive:"Nettoarchiv",recordCounts:"Datensatzanzahl"},info:{title:"ber Archiv",description:"Die Archivseite speichert Ihre abgeschlossenen Transaktionen. Bezahlte Rechnungen, genehmigte Ausgaben und abgeschlossene Verkufe werden hier automatisch aufgelistet. Diese Aufzeichnungen sind schreibgeschtzt und knnen fr historische Analysen und Prfungszwecke verwendet werden."}},GS={required:"Dieses Feld ist erforderlich",invalidEmail:"Ungltige E-Mail-Adresse",invalidPhone:"Ungltige Telefonnummer",minLength:"Mindestlnge {{min}} Zeichen",maxLength:"Maximale Lnge {{max}} Zeichen",invalidNumber:"Ungltige Nummer",categoryRequired:"Bitte whlen Sie eine Kategorie",dueDateRequired:"Bitte whlen Sie ein Flligkeitsdatum",saleDateRequired:"Verkaufsdatum ist erforderlich",unitPriceRequired:"Einzelpreis muss grer als null sein",quantityRequired:"Menge muss grer als null sein",customerNameRequired:"Accountname ist erforderlich",customerNotFound:"Account im System nicht gefunden. Bitte aus der Liste whlen.",productNameRequired:"Produkt- oder Dienstleistungsname ist erforderlich",productNotFound:"Produkt im System nicht gefunden. Bitte aus der Liste whlen.",skuRequired:"SKU ist erforderlich",validPriceRequired:"Bitte geben Sie einen gltigen Preis ein",validStockRequired:"Bitte geben Sie eine gltige Lagermenge ein",descriptionRequired:"Bitte geben Sie eine Beschreibung ein",amountRequired:"Bitte geben Sie einen gltigen Betrag ein"},WS=JSON.parse('{"terms":{"title":"Allgemeine Geschftsbedingungen","lastUpdated":"Zuletzt aktualisiert: {{date}}","section1":{"title":"1. Service-bersicht","content":"Comptario ist eine cloudbasierte Vorbuchhaltungs-Software-Plattform, die Unternehmen dabei hilft, ihre Rechnungen, Ausgaben und finanziellen Operationen zu verwalten. Die Plattform bietet Multi-Whrungsuntersttzung, automatisierte MwSt-Berechnungen und integrierte Berichtstools."},"section2":{"title":"2. Benutzerkonten und Registrierung","content":"Um Comptario zu nutzen, mssen Sie ein Konto erstellen, indem Sie genaue und vollstndige Informationen bereitstellen. Sie sind verantwortlich fr die Vertraulichkeit Ihrer Kontoanmeldedaten und fr alle Aktivitten, die unter Ihrem Konto stattfinden."},"section3":{"title":"3. Akzeptable Nutzung","content":"Sie stimmen zu, Comptario nur fr rechtmige Zwecke und in bereinstimmung mit diesen Bedingungen zu verwenden. Sie drfen den Service nicht fr illegale Aktivitten, Verletzung von Urheberrechten oder Strung der Plattformfunktionalitt verwenden."},"section4":{"title":"4. Dateneigentum und Datenschutz","content":"Sie behalten das Eigentum an allen Daten, die Sie in Comptario eingeben. Wir verarbeiten Ihre Daten in bereinstimmung mit unserer Datenschutzrichtlinie und geltenden Datenschutzgesetzen, einschlielich GDPR. Wir implementieren angemessene Sicherheitsmanahmen zum Schutz Ihrer Informationen."},"section5":{"title":"5. Service-Verfgbarkeit","content":"Whrend wir uns bemhen, 99,9% Betriebszeit aufrechtzuerhalten, kann Comptario gelegentlich Service-Unterbrechungen fr Wartung, Updates oder unvorhergesehene technische Probleme erleben. Wir werden im Voraus ber geplante Wartungsarbeiten informieren, wann immer mglich."},"section6":{"title":"6. Abonnement und Abrechnung","content":"Comptario bietet verschiedene Abonnementplne mit unterschiedlichen Funktionen und Nutzungslimits. Die Abrechnung wird automatisch entsprechend Ihrem gewhlten Plan verarbeitet. Sie knnen Ihr Abonnement jederzeit upgraden, downgraden oder kndigen."},"section7":{"title":"7. Datensicherung und Export","content":"Wir fhren regelmige automatisierte Backups Ihrer Daten durch. Sie knnen Ihre Daten jederzeit in Standardformaten exportieren. Bei Kontokndigung behalten wir Ihre Daten 90 Tage lang, bevor sie dauerhaft gelscht werden, es sei denn, das Gesetz verlangt etwas anderes."},"section8":{"title":"8. Haftungsbeschrnkung","content":"Comptarios Haftung ist auf den Betrag beschrnkt, den Sie fr den Service in den 12 Monaten vor einem Anspruch bezahlt haben. Wir haften nicht fr indirekte, zufllige oder Folgeschden."},"section9":{"title":"9. Geistiges Eigentum","content":"Die Comptario-Plattform, einschlielich ihrer Software, ihres Designs und ihrer Inhalte, ist durch Gesetze zum geistigen Eigentum geschtzt. Ihnen wird eine begrenzte Lizenz zur Nutzung des Services gem diesen Bedingungen gewhrt."},"section10":{"title":"10. Kndigung","content":"Jede Partei kann diese Vereinbarung jederzeit kndigen. Bei Kndigung wird Ihr Zugang zum Service eingestellt und wir werden Ihre Daten gem unserer Datenaufbewahrungsrichtlinie lschen."},"section11":{"title":"11. Geltendes Recht","content":"Diese Bedingungen unterliegen den Gesetzen der Europischen Union und der Gerichtsbarkeit, wo Comptario ttig ist. Alle Streitigkeiten werden durch verbindliche Schiedsverfahren gelst."},"section12":{"title":"12. nderungen der Bedingungen","content":"Wir knnen diese Bedingungen von Zeit zu Zeit aktualisieren. Wir werden Sie ber wichtige nderungen per E-Mail oder ber die Plattform benachrichtigen. Die fortgesetzte Nutzung von Comptario nach nderungen stellt die Annahme der neuen Bedingungen dar."}},"privacy":{"title":"Datenschutzrichtlinie","lastUpdated":"Zuletzt aktualisiert: {{date}}","section1":{"title":"1. Informationen, die wir sammeln","content":"Wir sammeln Informationen, die Sie direkt bereitstellen (Kontodetails, Finanzdaten), automatisch gesammelte Informationen (Nutzungsdaten, IP-Adressen) und Informationen von Dritten (Zahlungsabwickler, Integrationen)."},"section2":{"title":"2. Wie wir Ihre Informationen verwenden","content":"Wir verwenden Ihre Informationen, um unsere Services bereitzustellen und zu verbessern, Zahlungen zu verarbeiten, mit Ihnen zu kommunizieren, Sicherheit zu gewhrleisten und rechtliche Verpflichtungen zu erfllen."},"section3":{"title":"3. Informationsaustausch","content":"Wir verkaufen oder vermieten Ihre persnlichen Informationen nicht. Wir knnen Informationen mit Serviceanbietern teilen, fr rechtliche Compliance oder mit Ihrer ausdrcklichen Zustimmung."},"section4":{"title":"4. Datensicherheit","content":"Wir implementieren branchenbliche Sicherheitsmanahmen einschlielich Verschlsselung bei bertragung und Speicherung, regelmige Sicherheitsaudits, Zugriffskontrollen und sichere Rechenzentren."},"section5":{"title":"5. Ihre Rechte (GDPR)","content":"Unter GDPR haben Sie Rechte auf Zugang, Berichtigung, Lschung, Beschrnkung der Verarbeitung, Datenportabilitt und Widerspruch gegen die Verarbeitung Ihrer persnlichen Daten. Sie knnen auch die Einwilligung widerrufen und Beschwerden bei Aufsichtsbehrden einreichen."},"section6":{"title":"6. Datenaufbewahrung","content":"Wir bewahren Ihre Daten so lange auf, wie Ihr Konto aktiv ist und fr einen angemessenen Zeitraum danach fr rechtliche und geschftliche Zwecke. Sie knnen jederzeit die Lschung von Daten anfordern."},"section7":{"title":"7. Internationale bertragungen","content":"Ihre Daten werden hauptschlich innerhalb der EU verarbeitet. Alle internationalen bertragungen sind durch angemessene Schutzmanahmen wie Standardvertragsklauseln geschtzt."},"section8":{"title":"8. Cookies und Tracking","content":"Wir verwenden Cookies und hnliche Technologien fr Authentifizierung, Einstellungen, Analytik und Sicherheit. Sie knnen Cookie-Einstellungen ber Ihren Browser steuern."},"section9":{"title":"9. Drittanbieter-Services","content":"Unsere Plattform kann mit Drittanbieter-Services integriert werden. Ihre Datenschutzpraktiken unterliegen ihren eigenen Datenschutzrichtlinien, die wir Ihnen empfehlen zu berprfen."},"section10":{"title":"10. Datenschutz fr Kinder","content":"Comptario ist nicht fr Nutzer unter 18 Jahren bestimmt. Wir sammeln wissentlich keine persnlichen Informationen von Kindern unter 18 Jahren."},"section11":{"title":"11. Kontaktinformationen","content":"Fr datenschutzbezogene Fragen oder zur Ausbung Ihrer Rechte kontaktieren Sie unseren Datenschutzbeauftragten unter privacy@comptario.com oder ber unser Support-Portal."}},"cookies":{"title":"Cookie-Richtlinie","lastUpdated":"Zuletzt aktualisiert: {{date}}","section1":{"title":"1. Was sind Cookies","content":"Cookies sind kleine Textdateien, die auf Ihrem Gert gespeichert werden, wenn Sie unsere Website besuchen. Sie helfen uns, Ihnen ein besseres Erlebnis zu bieten, indem sie sich an Ihre Prferenzen erinnern und die Website-Nutzung analysieren."},"section2":{"title":"2. Arten von Cookies, die wir verwenden","content":"Wir verwenden essenzielle Cookies (notwendig fr grundlegende Funktionalitt), funktionale Cookies (erinnern sich an Prferenzen), Analytik-Cookies (verstehen Nutzungsmuster) und Sicherheits-Cookies (Schutz vor Bedrohungen)."},"section3":{"title":"3. Essenzielle Cookies","content":"Diese Cookies sind notwendig, damit die Website ordnungsgem funktioniert. Sie ermglichen Kernfunktionalitten wie Benutzerauthentifizierung, Sitzungsverwaltung und Sicherheitsfeatures. Diese knnen nicht deaktiviert werden."},"section4":{"title":"4. Funktionale Cookies","content":"Diese Cookies erinnern sich an Ihre Prferenzen und Auswahlen, um erweiterte Funktionalitt zu bieten, wie Sprachauswahl, Zeitzoneneinstellungen und Benutzeroberflchen-Anpassungen."},"section5":{"title":"5. Analytik-Cookies","content":"Wir verwenden Analytik-Cookies, um zu verstehen, wie Besucher mit unserer Website interagieren. Dies hilft uns, unsere Services und Benutzererfahrung zu verbessern. Alle Analytikdaten werden aggregiert und anonymisiert."},"section6":{"title":"6. Drittanbieter-Cookies","content":"Einige Cookies werden von Drittanbieter-Services gesetzt, die wir verwenden, wie Analytik-Anbieter oder Zahlungsabwickler. Diese unterliegen den jeweiligen Datenschutzrichtlinien der Drittanbieter."},"section7":{"title":"7. Cookie-Dauer","content":"Sitzungs-Cookies werden gelscht, wenn Sie Ihren Browser schlieen. Dauerhafte Cookies bleiben fr einen festgelegten Zeitraum auf Ihrem Gert oder bis Sie sie manuell lschen."},"section8":{"title":"8. Cookies verwalten","content":"Sie knnen Cookies ber Ihre Browser-Einstellungen steuern und verwalten. Sie knnen bestehende Cookies lschen und Ihren Browser so einstellen, dass er Cookies akzeptiert oder ablehnt. Beachten Sie, dass das Deaktivieren von Cookies die Website-Funktionalitt beeintrchtigen kann."},"section9":{"title":"9. Cookie-Zustimmung","content":"Durch die Nutzung unserer Website stimmen Sie der Verwendung von Cookies zu, wie in dieser Richtlinie beschrieben. Sie knnen Ihre Zustimmung jederzeit widerrufen, indem Sie Ihre Browser-Einstellungen anpassen."},"section10":{"title":"10. Aktualisierungen der Cookie-Richtlinie","content":"Wir knnen diese Cookie-Richtlinie von Zeit zu Zeit aktualisieren. Wir werden Sie ber wichtige nderungen benachrichtigen, indem wir die aktualisierte Richtlinie mit einem neuen Gltigkeitsdatum auf unserer Website verffentlichen."}},"dpa":{"title":"Datenverarbeitungsvereinbarung (DPA)","lastUpdated":"Zuletzt aktualisiert: {{date}}","section1":{"title":"1. Definitionen und Geltungsbereich","content":"Diese Datenverarbeitungsvereinbarung (\\"DPA\\") ist Teil der Nutzungsbedingungen zwischen Ihnen (\\"Verantwortlicher\\") und Comptario (\\"Auftragsverarbeiter\\"). Sie regelt die Verarbeitung personenbezogener Daten in bereinstimmung mit GDPR und anderen anwendbaren Datenschutzgesetzen."},"section2":{"title":"2. Einzelheiten der Datenverarbeitung","content":"Comptario verarbeitet personenbezogene Daten nur auf dokumentierte Anweisungen des Verantwortlichen, fr die Zwecke der Bereitstellung der Buchhaltungssoftware-Services und in bereinstimmung mit geltenden Datenschutzgesetzen."},"section3":{"title":"3. Datenkategorien","content":"Wir verarbeiten die folgenden Kategorien personenbezogener Daten: Kontaktinformationen (Namen, Adressen, E-Mails), Finanzdaten (Rechnungen, Zahlungen, Transaktionen), Benutzerkontodaten (Anmeldedaten, Prferenzen) und Nutzungsdaten (Zugriffsprotokolle, Analytik)."},"section4":{"title":"4. Rechte der betroffenen Personen","content":"Comptario untersttzt den Verantwortlichen bei der Erfllung von Antrgen betroffener Personen, einschlielich Zugang, Berichtigung, Lschung, Einschrnkung, Portabilitt und Widerspruch. Wir stellen notwendige Tools und Kooperation zur Verfgung, um Compliance zu ermglichen."},"section5":{"title":"5. Sicherheitsmanahmen","content":"Wir implementieren angemessene technische und organisatorische Manahmen zur Gewhrleistung der Datensicherheit, einschlielich Verschlsselung, Zugriffskontrollen, regelmige Sicherheitsbewertungen, Mitarbeiterschulungen und Incident-Response-Verfahren."},"section6":{"title":"6. Unterauftragsverarbeiter","content":"Comptario kann Unterauftragsverarbeiter einsetzen, um bei der Bereitstellung von Services zu helfen. Alle Unterauftragsverarbeiter unterliegen Datenschutzverpflichtungen, die denen in dieser DPA entsprechen. Eine aktuelle Liste der Unterauftragsverarbeiter ist auf Anfrage verfgbar."},"section7":{"title":"7. Datenbertragungen","content":"Personenbezogene Daten werden hauptschlich innerhalb der EU/EWR verarbeitet. Alle bertragungen in Drittlnder sind durch angemessene Schutzmanahmen wie Standardvertragsklauseln oder Angemessenheitsbeschlsse geschtzt."},"section8":{"title":"8. Benachrichtigung bei Datenschutzverletzungen","content":"Comptario wird den Verantwortlichen ber alle Verletzungen des Schutzes personenbezogener Daten unverzglich und binnen 72 Stunden nach Bekanntwerden der Verletzung benachrichtigen und alle relevanten Informationen fr die Beurteilung und Meldepflichten bereitstellen."},"section9":{"title":"9. Datenschutz-Folgenabschtzung","content":"Auf Anfrage wird Comptario angemessene Untersttzung beim Verantwortlichen bei der Durchfhrung von Datenschutz-Folgenabschtzungen (DSFA) und vorherigen Konsultationen mit Aufsichtsbehrden leisten."},"section10":{"title":"10. Prfung und Compliance","content":"Comptario fhrt Aufzeichnungen ber Verarbeitungsttigkeiten und stellt dem Verantwortlichen Informationen zur Verfgung, die notwendig sind, um die Einhaltung von Datenschutzverpflichtungen zu demonstrieren, einschlielich Prfungsrechten vorbehaltlich Vertraulichkeitsverpflichtungen."},"section11":{"title":"11. Datenrckgabe und Lschung","content":"Bei Beendigung der Services wird Comptario nach Wahl des Verantwortlichen alle personenbezogenen Daten und bestehende Kopien zurckgeben oder lschen, es sei denn, die Aufbewahrung ist nach geltendem Recht erforderlich."},"section12":{"title":"12. Haftung und Entschdigung","content":"Die Haftung jeder Partei ist auf Schden beschrnkt, die direkt durch ihre Verletzung dieser DPA verursacht wurden. Comptario wird den Verantwortlichen gegen Ansprche entschdigen, die aus Comptarios Verletzung seiner Datenschutzverpflichtungen resultieren."}},"subprocessors":{"title":"Liste der Unterauftragsverarbeiter","lastUpdated":"Zuletzt aktualisiert: {{date}}","intro":"Comptario kann die folgenden Unterauftragsverarbeiter einsetzen, um bei der Bereitstellung unserer Services zu helfen. Alle Unterauftragsverarbeiter unterliegen strengen Datenschutzverpflichtungen.","section1":{"title":"1. Cloud-Infrastruktur-Anbieter","aws":{"name":"Amazon Web Services (AWS)","location":"EU (Frankfurt)","purpose":"Cloud-Hosting und Infrastrukturdienste","safeguards":"AWS GDPR-Compliance, EU-Datenresidenz"},"digitalocean":{"name":"DigitalOcean","location":"EU (Amsterdam)","purpose":"Zustzliche Cloud-Hosting und Backup-Services","safeguards":"Standardvertragsklauseln, EU-Hosting"}},"section2":{"title":"2. Zahlungsabwickler","stripe":{"name":"Stripe","location":"EU/US","purpose":"Zahlungsabwicklung und Abonnementverwaltung","safeguards":"PCI DSS-Compliance, Standardvertragsklauseln"},"paypal":{"name":"PayPal","location":"EU/US","purpose":"Alternative Zahlungsabwicklung","safeguards":"PCI DSS-Compliance, Privacy Shield-Nachfolger"}},"section3":{"title":"3. Kommunikationsdienste","sendgrid":{"name":"SendGrid (Twilio)","location":"EU/US","purpose":"Transaktions-E-Mail-Zustellung","safeguards":"Standardvertragsklauseln, EU-Verarbeitung"},"intercom":{"name":"Intercom","location":"EU/US","purpose":"Support und Kommunikation","safeguards":"Standardvertragsklauseln, GDPR-Compliance"}},"section4":{"title":"4. Analytik und berwachung","googleanalytics":{"name":"Google Analytics","location":"EU/US","purpose":"Website-Analytik und Leistungsberwachung","safeguards":"Google Analytics 4 mit EU-Datenverarbeitung"},"sentry":{"name":"Sentry","location":"EU/US","purpose":"Fehlerberwachung und Anwendungsleistung","safeguards":"Standardvertragsklauseln, Datenanonymisierung"}},"section5":{"title":"5. Sicherheitsdienste","cloudflare":{"name":"Cloudflare","location":"Global (EU-Knoten)","purpose":"CDN, DDoS-Schutz und Sicherheitsdienste","safeguards":"EU-Datenlokalisierung, Standardvertragsklauseln"}},"section6":{"title":"6. Backup- und Archivdienste","backblaze":{"name":"Backblaze","location":"EU","purpose":"Datensicherung und Archivierungsdienste","safeguards":"Verschlsselung in Ruhe und bei bertragung, EU-Hosting"}},"notifications":{"title":"Benachrichtigungen ber nderungen bei Unterauftragsverarbeitern","content":"Wir werden 30 Tage im Voraus ber neue Unterauftragsverarbeiter oder nderungen bei bestehenden informieren. Sie knnen gegen solche nderungen Einspruch erheben, und falls wir Ihre Bedenken nicht lsen knnen, knnen Sie Ihre Vereinbarung mit uns kndigen."},"contact":{"title":"Fragen zu Unterauftragsverarbeitern","content":"Wenn Sie Fragen zu unseren Unterauftragsverarbeitern haben oder zustzliche Informationen ber Datenschutzschutzmanahmen bentigen, kontaktieren Sie uns bitte unter privacy@comptario.com."}},"common":{"backToApp":" Zurck zur App","effectiveDate":"Gltigkeitsdatum","tableOfContents":"Inhaltsverzeichnis","printPage":"Diese Seite drucken","downloadPdf":"PDF herunterladen","lastUpdated":"Zuletzt aktualisiert","contactUs":"Kontaktieren Sie uns unter","questionsContact":"Wenn Sie Fragen zu diesen {{document}} haben, kontaktieren Sie uns bitte unter {{email}}.","documentType":{"terms":"Allgemeine Geschftsbedingungen","privacy":"Datenschutzrichtlinie","cookies":"Cookie-Richtlinie","dpa":"Datenverarbeitungsvereinbarung","subprocessors":"Unterauftragsverarbeiter-Liste"},"navigation":{"terms":"AGB","privacy":"Datenschutz","cookies":"Cookies","dpa":"AVV","subprocessors":"Unterauftragsverarbeiter"}}}'),YS={banner:{title:"Cookie-Einstellungen",description:"Diese Website verwendet Cookies, um Ihre Erfahrung zu verbessern. Sie knnen whlen, welche Cookies zugelassen werden sollen.",acceptAll:"Alle akzeptieren",rejectAll:"Alle ablehnen",managePreferences:"Einstellungen verwalten",savePreferences:"Einstellungen speichern",close:"Schlieen"},modal:{title:"Cookie-Einstellungen",description:"Sie knnen Cookie-Kategorien berprfen und Ihre Prferenzen festlegen. Lesen Sie die Beschreibung jeder Kategorie, um zu entscheiden, welche Cookies zugelassen werden sollen.",necessary:{title:"Notwendige Cookies",description:"Diese Cookies sind fr das ordnungsgeme Funktionieren der Website unerlsslich und knnen nicht deaktiviert werden. Sie werden normalerweise als Reaktion auf Aktionen wie Anmelden oder Ausfllen von Formularen gesetzt.",alwaysActive:"Immer aktiv"},analytics:{title:"Analyse-Cookies",description:"Diese Cookies helfen uns zu verstehen, wie die Website genutzt wird. Sie sammeln Informationen darber, welche Seiten am hufigsten besucht werden und wie Benutzer auf der Website navigieren.",enabled:"Aktiviert",disabled:"Deaktiviert"},marketing:{title:"Marketing-Cookies",description:"Diese Cookies werden verwendet, um Ihnen relevantere Anzeigen zu zeigen. Sie knnen unseren Werbepartnern helfen, ein Profil Ihrer Interessen zu erstellen.",enabled:"Aktiviert",disabled:"Deaktiviert"},acceptSelected:"Ausgewhlte akzeptieren",acceptAll:"Alle akzeptieren",rejectAll:"Alle ablehnen",cancel:"Abbrechen"},notice:{updated:"Ihre Cookie-Einstellungen wurden aktualisiert.",saved:"Cookie-Einstellungen gespeichert."},categories:{necessary:"Notwendig",analytics:"Analyse",marketing:"Marketing"}},QS={title:"Geschftsjahre",subtitle:"Verwalten Sie Ihre Geschftsjahr-Einstellungen",newPeriod:"Neue Periode",search:"Perioden suchen...",periodsRegistered:"Perioden registriert",noPeriods:"Noch keine Geschftsjahre",noPeriodsFound:"Keine Geschftsjahre gefunden",noPeriodsDesc:"Beginnen Sie mit der Erstellung Ihres ersten Geschftsjahrs.",noPeriodsFoundDesc:"Keine Geschftsjahre entsprechen Ihren Suchkriterien.",createFirstPeriod:"Erstes Geschftsjahr erstellen",periodName:"Periodenname",startDate:"Startdatum",endDate:"Enddatum",status:"Status",actions:"Aktionen",view:"Ansehen",edit:"Bearbeiten",lock:"Sperren",unlock:"Entsperren",delete:"Lschen",viewPeriod:"Geschftsjahr ansehen",editPeriod:"Geschftsjahr bearbeiten",addPeriod:"Geschftsjahr hinzufgen",enterPeriodInfo:"Geschftsjahr-Informationen eingeben",periodNamePlaceholder:"z.B.: Jahr 2024",periodDuration:"Periodendauer",days:"Tage",locked:"Gesperrt",active:"Aktiv",planned:"Geplant",statusLabels:{active:"Aktiv",locked:"Gesperrt",planned:"Geplant"},lockPeriod:"Geschftsjahr sperren",unlockPeriod:"Geschftsjahr entsperren",lockConfirm:"Sind Sie sicher, dass Sie dieses Geschftsjahr sperren mchten? Gesperrte Perioden knnen nicht bearbeitet werden.",unlockConfirm:"Sind Sie sicher, dass Sie dieses Geschftsjahr entsperren mchten?",deleteConfirm:"Sind Sie sicher, dass Sie dieses Geschftsjahr lschen mchten?",validation:{nameRequired:"Periodenname ist erforderlich",startDateRequired:"Startdatum ist erforderlich",endDateRequired:"Enddatum ist erforderlich",endDateAfterStart:"Enddatum muss nach dem Startdatum liegen",periodOverlap:"Diese Daten berschneiden sich mit einer bestehenden Periode",minimumDuration:"Geschftsjahr muss mindestens 1 Tag dauern"},errors:{createFailed:"Geschftsjahr konnte nicht erstellt werden",updateFailed:"Geschftsjahr konnte nicht aktualisiert werden",deleteFailed:"Geschftsjahr konnte nicht gelscht werden",lockFailed:"Geschftsjahr konnte nicht gesperrt werden",unlockFailed:"Geschftsjahr konnte nicht entsperrt werden",loadFailed:"Geschftsjahre konnten nicht geladen werden",periodLocked:"Dieses Geschftsjahr ist gesperrt und kann nicht gendert werden",periodNotFound:"Geschftsjahr nicht gefunden",operationNotAllowed:"Diese Operation ist fr gesperrte Geschftsjahre nicht erlaubt"},success:{created:"Geschftsjahr erfolgreich erstellt",updated:"Geschftsjahr erfolgreich aktualisiert",deleted:"Geschftsjahr erfolgreich gelscht",locked:"Geschftsjahr erfolgreich gesperrt",unlocked:"Geschftsjahr erfolgreich entsperrt"},widget:{title:"Geschftsjahre",activePeriod:"Aktive Periode",totalPeriods:"Gesamte Perioden",lockedPeriods:"Gesperrte Perioden",daysRemaining:"Verbleibende Tage",noActivePeriod:"Keine aktive Periode",periodsOverlapping:"berschneidende Perioden vorhanden",allPeriodsLocked:"Alle Perioden sind gesperrt",createActivePeriod:"Aktive Periode erstellen",managePeriods:"Perioden verwalten",warnings:{overlapping:"Einige Geschftsjahre berschneiden sich",noActive:"Derzeit kein aktives Geschftsjahr",allLocked:"Alle Geschftsjahre sind gesperrt"}},filters:{showVoided:"Stornierte anzeigen",hideVoided:"Stornierte ausblenden",voidedRecords:"stornierte Datenstze"}},ZS={members:{title:"Organisationsmitglieder",subtitle:"Verwalten Sie Ihre Organisationsmitglieder und Berechtigungen",search:"Mitglieder suchen...",membersCount:"Mitglieder",member:"Mitglied",email:"E-Mail",role:"Rolle",statusLabel:"Status",actions:"Aktionen",inviteButton:"Einladung senden",sending:"Wird gesendet...",table:{name:"Name",email:"E-Mail",role:"Rolle",lastLogin:"Letzte Anmeldung",joinedAt:"Beitrittsdatum",actions:"Aktionen"},edit:"Bearbeiten",cancel:"Abbrechen",resend:"Erneut senden",makeAdmin:"Zum Administrator machen",makeMember:"Zum Mitglied machen",empty:{title:"Noch keine Mitglieder",subtitle:"Laden Sie Ihr erstes Teammitglied ein.",action:"Mitglied einladen"},noMembers:"Noch keine Mitglieder",noMembersDesc:"Laden Sie Ihr erstes Teammitglied ein.",noPendingInvites:"Keine ausstehenden Einladungen",noPendingInvitesDesc:"Alle Einladungen wurden angenommen oder sind abgelaufen.",roles:{owner:"Inhaber",admin:"Administrator",member:"Mitglied",viewer:"Betrachter",OWNER:"Inhaber",ADMIN:"Administrator",MEMBER:"Mitglied"},status:{active:"Aktiv",pending:"Ausstehend",inactive:"Inaktiv"},permissions:{owner:"Vollzugriff auf alle Funktionen und Einstellungen",admin:"Vollzugriff auer Abrechnung und Organisationslschung",member:"Rechnungen, Ausgaben, Accounts erstellen und bearbeiten",viewer:"Nur-Lese-Zugriff auf alle Daten"},confirmRemove:"Sind Sie sicher, dass Sie dieses Mitglied entfernen mchten?",confirmCancel:"Sind Sie sicher, dass Sie diese Einladung stornieren mchten?",inviteSuccess:"Einladung erfolgreich gesendet",inviteError:"Einladung konnte nicht gesendet werden",removeSuccess:"Mitglied erfolgreich entfernt",removeError:"Mitglied konnte nicht entfernt werden",updateSuccess:"Mitglied erfolgreich aktualisiert",updateError:"Mitglied konnte nicht aktualisiert werden",validation:{emailRequired:"E-Mail ist erforderlich",emailInvalid:"Bitte geben Sie eine gltige E-Mail-Adresse ein",emailExists:"Diese E-Mail ist bereits eingeladen oder ist bereits Mitglied"},tryAgain:"Erneut Versuchen",organization:"Organisation",membersLabel:"Mitglieder",plan:"Tarif",youLabel:"Sie",limitFull:"Limit erreicht",invite:{title:"Mitglied einladen",button:"Einladung senden",limitReached:"Plan-Limit erreicht. Upgraden Sie Ihren Plan, um weitere Mitglieder einzuladen.",success:"Einladung erfolgreich gesendet",error:"Einladung konnte nicht gesendet werden",duplicate:"Diese E-Mail ist bereits eingeladen",form:{email:"E-Mail-Adresse",emailPlaceholder:"beispiel@email.com",role:"Rolle"}},pendingInvites:{title:"Ausstehende Einladungen",count:"{{count}} ausstehende Einladungen",resend:"Erneut senden",cancel:"Abbrechen",cancelConfirm:"Sind Sie sicher, dass Sie diese Einladung stornieren mchten? ({{email}})",expires:"Luft ab am {{date}}",resendSuccess:"Einladung erneut gesendet",cancelSuccess:"Einladung storniert"},remove:{title:"Mitglied Entfernen",message:"Sind Sie sicher, dass Sie {{name}} aus der Organisation entfernen mchten?",warning:"Diese Aktion kann nicht rckgngig gemacht werden.",confirm:"Ja, Entfernen",cancel:"Abbrechen",success:"Mitglied erfolgreich entfernt",error:"Mitglied konnte nicht entfernt werden",cannotRemoveOwner:"Inhaber kann nicht entfernt werden"},updateRole:{success:"Mitgliedsrolle aktualisiert",error:"Mitgliedsrolle konnte nicht aktualisiert werden"}},join:{title:"Organisation beitreten",subtitle:"Du wurdest eingeladen, {{orgName}} beizutreten",invitedBy:"Eingeladen von {{name}}",role:"Rolle: {{role}}",accept:"Einladung annehmen",decline:"Ablehnen",expired:{title:"Einladung abgelaufen",subtitle:"Dieser Einladungslink ist abgelaufen",action:"Neue Einladung anfordern"},invalid:{title:"Ungltige Einladung",subtitle:"Dieser Einladungslink ist ungltig",action:"Zur Startseite"},success:{title:"Willkommen!",subtitle:"Du bist {{orgName}} erfolgreich beigetreten",action:"Zum Dashboard"},error:{title:"Fehler",subtitle:"Beim Annehmen der Einladung ist ein Fehler aufgetreten",tryAgain:"Erneut versuchen"},alreadyMember:{title:"Bereits Mitglied",subtitle:"Du bist bereits Mitglied dieser Organisation",action:"Zum Dashboard"},details:{organizationLabel:"Organisation",emailLabel:"Eingeladene E-Mail",expiresLabel:"Luft ab",roleLabel:"Rolle"},passwordFlow:{title:"Passwort festlegen",description:"Lege ein Passwort fr dein Konto fr {{email}} fest. Eine E-Mail-Besttigung ist nicht erforderlich.",passwordLabel:"Passwort",passwordPlaceholder:"Mindestens 6 Zeichen",showPassword:"Anzeigen",hidePassword:"Ausblenden",submit:"Konto erstellen und beitreten",submitting:"Wird gespeichert...",toastSuccess:"Einladung akzeptiert. Willkommen!"},loadingState:{title:"Einladung wird berprft...",subtitle:"Bitte warten, whrend wir deine Einladung validieren."},guestFallback:{loading:"Ungltige Einladung oder wird geladen..."},emailMismatch:{title:"Warnung",body:"Diese Einladung wurde an {{inviteEmail}} gesendet, du bist jedoch als {{currentEmail}} angemeldet.",loginAction:"Als {{inviteEmail}} anmelden",registerAction:"Als {{inviteEmail}} registrieren"},accepting:"Beitritt luft..."}},XS={invoice:{title:"RECHNUNG",appSubtitle:"comptario Buchhaltungssystem",customerInfo:"Accountinformationen",invoiceNumber:"Rechnungs-Nr.",issueDate:"Ausstellungsdatum",dueDate:"Flligkeitsdatum",status:"Status",items:{description:"Beschreibung",quantity:"Menge",unitPrice:"Einzelpreis",total:"Summe"},totals:{subtotal:"Zwischensumme",tax:"MwSt.",grandTotal:"Gesamtsumme"},footer:"Diese Rechnung wurde mit comptario erstellt.",statusLabels:{paid:"Bezahlt",sent:"Gesendet",overdue:"berfllig",draft:"Entwurf"}},expense:{title:"AUSGABENBELEG",supplierInfo:"Lieferantendaten",expenseNumber:"Ausgaben-Nr.",expenseDate:"Ausgabedatum",paymentDate:"Zahlungsdatum",status:"Status",category:"Kategorie",details:"Ausgabendetails",totalAmount:"Gesamtausgabenbetrag",footer:"Dieser Ausgabenbeleg wurde mit comptario erstellt.",statusLabels:{draft:"Entwurf",approved:"Genehmigt",paid:"Bezahlt"}},sale:{title:"VERKAUFSBELEG",customerInfo:"Accountinformationen",saleNumber:"Verkaufs-Nr.",saleDate:"Verkaufsdatum",status:"Status",paymentMethod:"Zahlungsmethode",details:"Produkt-/Leistungsdetails",quantity:"Menge",unitPrice:"Einzelpreis",totalAmount:"Gesamtverkaufsbetrag",footer:"Dieser Verkaufsbeleg wurde mit comptario erstellt.",statusLabels:{completed:"Abgeschlossen",pending:"Ausstehend",cancelled:"Storniert"},paymentMethods:{cash:"Bar",card:"Karte",transfer:"berweisung",check:"Scheck"}},planTab:{header:{title:"Plan & Abrechnung",subtitle:"Abonnement, Abrechnungszeitraum und Sitzpltze verwalten"},managePayments:"Zahlungen verwalten",monthly:"Monatlich",yearly:"Jhrlich",yearlyNote:"2 Monate gratis",currentPlan:{label:"Aktueller Plan",seatsInUse:"Verwendete Sitzpltze",renewalDate:"Verlngerungsdatum",cancellationDate:"Kndigungsdatum",cancelAtPeriodEndNotice:"Ihr Abonnement wird zum Periodenende gekndigt."},changePlan:"Plan ndern",plans:{labels:{professional:"Pro",enterprise:"Business",free:"Starter"},bullets:{proIncluded:"3 Benutzer inklusive",basicAutomations:"Basis-Automatisierungen",businessIncluded:"10 Benutzer inklusive",advancedAutomations:"Erweiterte Automatisierungen & Rollen",freeLimited:"Begrenzte Rechnungen und Funktionen"}},prices:{monthly:{free:"0/Monat",pro:"29/Monat",enterprise:"59/Monat"}},configuration:"Konfiguration",billingCycle:"Abrechnungszyklus",seatsAddon:"Zustzliche Sitzpltze",seatsAddonHelper:"5/Sitz/Monat. Anteilige Berechnung wird angewendet.",costPreview:"Kostenbersicht",newSubtotal:"Neuer Zwischensaldo",extraSeats:"Zustzliche Sitzpltze",prorationToday:"Heutige anteilige Berechnung",updatePlan:"Plan aktualisieren",amountsNote:"Betrge sind Richtwerte. Endpreise erscheinen whrend des Bezahlvorgangs.",quickSeatActions:"Schnelle Sitzplatzaktionen",add1SeatNow:"1 Sitz hinzufgen und jetzt berechnen",add5SeatsNow:"5 Sitze hinzufgen und jetzt berechnen",remove1Seat:"1 Sitz entfernen",quickTip:"Tipp: Sitze knnen auch im Abrechnungsportal hinzugefgt werden.",subscriptionStatus:"Abonnementstatus",subscriptionCancelNote:"Kndigung greift zum Periodenende; bis dahin lsst sich fortsetzen.",cancelAtPeriodEndBtn:"Zum Periodenende kndigen",resumeSubscriptionBtn:"Abonnement fortsetzen",history:{title:"Verlauf",loading:"Verlauf wird geladen",empty:"Keine Eintrge",type:"Typ",plan:"Plan",users:"Benutzer",date:"Datum",footerNote:"Ereignisse werden periodisch vom Abrechnungsanbieter synchronisiert."},invoices:{title:"Rechnungen",loading:"Rechnungen werden geladen",empty:"Keine Rechnungen",filters:{status:"Status",all:"Alle",search:"Suchen",searchPlaceholder:"Nummer oder Whrung",from:"Von",to:"Bis",exportCsv:"Als CSV exportieren"},table:{number:"Nummer",date:"Datum",amount:"Betrag",status:"Status",actions:"Aktionen"},footerNote:"Rechnungen werden vom Abrechnungsanbieter abgerufen; Betrge werden in der Rechnungswhrung angezeigt."}}},JS={crm:tS,summary:rS,pagination:sS,admin:nS,plans:aS,billing:iS,app:oS,presets:lS,landing:cS,footer:dS,planTab:uS,auth:mS,common:hS,currencies:fS,header:pS,dashboard:gS,quickActions:xS,transactions:yS,alerts:bS,last6MonthsPerformance:vS,months:wS,sidebar:NS,quotes:kS,stats:jS,status:SS,invoice:CS,"expense.details":"Ausgabendetails","expense.information":"Ausgabeninformationen","expense.number":"Ausgaben-Nr","expense.date":"Ausgabendatum","expense.category":"Kategorie","expense.supplier":"Lieferant","expense.amount":"Betrag","expense.receipt":"Beleg","expense.viewReceipt":"Beleg Anzeigen","customer.details":"Accountdetails","customer.accountInfo":"Accountinformationen","customer.personalInfo":"Persnliche Informationen","customer.name":"Name","customer.email":"E-Mail","customer.phone":"Telefon","customer.registeredAt":"Registrierungsdatum","customer.companyInfo":"Unternehmensinformationen","customer.company":"Firma","customer.taxNumber":"Steuernummer","customer.addressInfo":"Adressinformationen","customer.quickActions":"Schnelle Aktionen","customer.createInvoice":"Rechnung Erstellen","customer.viewHistory":"Verlauf Anzeigen",expense:AS,customer:TS,supplier:ES,products:DS,chartOfAccounts:_S,invoices:PS,expenses:IS,customers:MS,suppliers:RS,banks:zS,settings:LS,sales:OS,security:FS,"common.remindMeLater":"Spter Erinnern","common.now":"Jetzt","common.generic":{customer:"Account",supplier:"Lieferant",expense:"Ausgabe",quote:"Angebot"},toasts:BS,notifications:US,payment:VS,reports:qS,ledger:$S,expenseCategories:HS,archive:KS,validation:GS,legal:WS,cookie:YS,fiscalPeriods:QS,org:ZS,pdf:XS},e4={itemsPerPage:"lments par page",previous:"Prcdent",next:"Suivant",range:"{{start}}-{{end}} / {{total}}"},t4={sort:{label:"Tri",updatedDesc:"Modifi (rcent)",updatedAsc:"Modifi (ancien)",createdDesc:"Cr (rcent)",createdAsc:"Cr (ancien)",nameAsc:"Nom (AZ)",nameDesc:"Nom (ZA)",titleAsc:"Titre (AZ)",titleDesc:"Titre (ZA)"},name:"comptario",subtitle:"Systme de Comptabilit"},r4={fields:{name:"Nom",email:"E-mail",phone:"Tlphone",company:"Socit",account:"Compte",status:"Statut",contact:"Contact",title:"Titre",type:"Type",assignee:"Assign ",dueAt:"Date / chance",completed:"Termin",actions:"Actions"},confirmDelete:{title:"Confirmer la suppression",message:'Supprimer "{{name}}" ?'},validation:{nameRequired:"Le nom est requis",titleRequired:"Le titre est requis"},dashboard:{subtitle:"Une vue densemble du pipeline et de lactivit."},pipeline:{title:"Pipeline",defaultName:"Pipeline par dfaut",loading:"Chargement du pipeline",visibilityOwnerAndTeam:"Visibilit: owner + quipe",addOpportunity:"Ajouter une opportunit",createTitle:"Crer une opportunit",selectPlaceholder:"Slectionner",saving:"Enregistrement",opportunityCount:"{{count}} opportunits",empty:"Vide",noMembers:"Aucun membre trouv",ownerAutoInTeam:"Note: le propritaire est automatiquement dans lquipe.",fields:{opportunityName:"Nom de lopportunit",account:"Compte",amount:"Montant",currency:"Devise",expectedCloseDate:"Clture estime",stage:"tape",team:"quipe"},validation:{nameRequired:"Le nom de lopportunit est requis",accountRequired:"Veuillez slectionner un compte",amountInvalid:"Montant invalide"},stages:{lead:"Prospect",qualified:"Qualifi",proposal:"Proposition",negotiation:"Ngociation",won:"Gagn",lost:"Perdu"}},opportunities:{title:"Opportunits",subtitle:"Recherchez et filtrez vos opportunits.",searchPlaceholder:"Rechercher des opportunits...",empty:"Aucune opportunit pour linstant.",filters:{search:"Recherche",account:"Compte",status:"Statut",stage:"tape",allAccounts:"Tous les comptes",allStages:"Toutes les tapes"},status:{all:"Toutes",open:"Ouvertes",won:"Gagnes",lost:"Perdues"},actions:{open:"Ouvrir"}},leads:{title:"Prospects",subtitle:"Listez et grez vos prospects.",empty:"Aucun prospect pour linstant.",modal:{createTitle:"Ajouter un prospect",editTitle:"Modifier le prospect"}},contacts:{title:"Contacts",subtitle:"Listez et grez vos contacts.",empty:"Aucun contact pour linstant.",modal:{createTitle:"Ajouter un contact",editTitle:"Modifier le contact"}},activities:{title:"Activits",subtitle:"Suivez les appels, e-mails et tches.",subtitleForDeal:'Activits pour "{{dealName}}"',subtitleForAccount:'Activits pour "{{accountName}}"',subtitleForContact:'Activits pour "{{contactName}}"',empty:"Aucune activit pour linstant.",dueAtPlaceholder:"ex. 2025-12-15",filters:{all:"Tous",open:"Ouvert",completed:"Termin"},modal:{createTitle:"Ajouter une activit",editTitle:"Modifier lactivit"}},tasks:{title:"Tches",subtitleForDeal:'Tches pour "{{dealName}}"',subtitleForAccount:'Tches pour "{{accountName}}"',empty:"Aucune tche pour linstant.",dueAtPlaceholder:"ex. 2025-12-15",unassigned:"Non assign",filters:{all:"Toutes",open:"Ouvertes",completed:"Termines"},modal:{createTitle:"Ajouter une tche",editTitle:"Modifier la tche"}},dealDetail:{title:"Dtails de lopportunit",backToPipeline:"Retour au pipeline",notFound:"Opportunit introuvable."},errors:{boardFetch:"Impossible de charger les donnes CRM"}},s4={blocks:{actions:"Actions",receivables:"Crances",criticalStock:"Stock critique",salesFlow:"Flux des ventes",openQuotes:"Devis ouverts",awaitingInvoiceSales:"Ventes  facturer",crmFlow:"Flux CRM",latestActivities:"Dernires activits"},today:"Aujourd'hui",thisWeek:"Cette semaine",pending:"En attente",overdue:"En retard",criticalProducts:"Produits critiques",todayOrders:"Ventes aujourd'hui",weekOrders:"Ventes cette semaine",openQuotesCount:"Devis ouverts",awaitingInvoiceCount:" facturer",loading:"Chargement",latestActivitiesPlaceholder:"Aucune activit rcente pour le moment.",crm:{openDeals:"Opportunits ouvertes",expectedAmount:"Montant attendu",noStageData:"Aucune donne par tape pour l'instant.",unknownStage:"tape inconnue"}},n4={thisMonth:"Ce mois-ci",lastMonth:"Mois dernier",thisYear:"Cette anne",addedThisMonth:"Ajouts ce mois-ci",withEmail:"E-mail prsent",withPhone:"Tlphone prsent",withCompany:" une entreprise"},a4=JSON.parse(`{"nav.features":"Fonctionnalits","nav.pricing":"Tarifs","nav.faq":"FAQ","nav.contact":"Contact","cta.try":"Essayer gratuitement","cta.signin":"Se connecter","cta.watchDemo":"Regarder la dmo","hero.title":"Grez factures, dpenses et devis depuis un seul endroit.","hero.sub":"Grez vos factures, dpenses et devis dans un espace de travail simple et unique. Gardez votre prcomptabilit organise grce au support multidevises (EUR, USD, TRY), au suivi des taxes par catgorie et  la gnration de factures/devis PDF. Avec des liens de devis partageables, vos comptes peuvent consulter les devis en ligne et les accepter ou les refuser en un clic.","tasks":{"title":"Tches","subtitleForDeal":"Tches pour \\"{{dealName}}\\"","subtitleForAccount":"Tches pour \\"{{accountName}}\\"","empty":"Aucune tche pour linstant.","dueAtPlaceholder":"ex. 2025-12-15","unassigned":"Non assign","filters":{"all":"Toutes","open":"Ouvertes","completed":"Termines"},"modal":{"createTitle":"Ajouter une tche","editTitle":"Modifier la tche"}},"hero.features.currency":"Multidevises (EUR / USD / TRY)","hero.features.vat":"Gestion TVA / Taxes","features.title":"Tout ce dont vous avez besoin pour matriser la pr-comptabilit","features.inv.title":"Facturation","features.inv.desc":"Numrotation, comptes et export PDF.","features.exp.title":"Dpenses","features.exp.desc":"Tlchargement de fichiers et TVA par catgorie (ex. 20% FR, 18% TR).","features.vat.title":"Rsums TVA et Taxes","features.vat.desc":"Rapports de priode clairs avec mise en vidence TVA collecte/dductible.","features.fx.title":"Multi-Devises","features.fx.desc":"Options de devise systme : USD, EUR, TRY","value.title":"volue des freelances aux PME","security.title":"Scurit et Conformit","security.items":"Hbergement UE (placeholder), chiffrement en transit et au repos, sauvegardes automatiques.","testimonials.title":"Ce que disent nos utilisateurs","pricing.title":"Tarification simple","pricing.starter":"Starter","pricing.pro":"Pro","pricing.business":"Business","pricing.price.free":"0/mois","pricing.price.pro":"29/mois","pricing.price.biz":"59/mois","pricing.annualLine.free":"","pricing.annualLine.pro":"Paiement annuel : 290/an (2 mois offerts)","pricing.annualLine.biz":"Paiement annuel : 590/an (2 mois offerts)","pricing.cta":"Commencer","pricing.ctaStarter":"Commencer gratuitement","pricing.ctaPro":"Passer  Pro","pricing.ctaBusiness":"Choisir loffre Business","pricing.ctaContact":"Contactez-nous","pricing.notes.vatAndCurrency":"Les prix sentendent hors TVA.","pricing.notes.cancelAnytime":"Rsiliable  tout moment.","pricing":{"subtitle":"Choisissez loffre adapte  vos besoins. Commencez gratuitement et voluez ensuite.","popular":"La plus populaire","planNames":{"starter":"Starter","pro":"Pro","business":"Business"},"plans":{"starter":{"desc":"Idal pour freelances et petits projets"},"pro":{"desc":"Idal pour les entreprises en croissance"},"business":{"desc":"Pour les socits tablies avec quipes"}},"features":{"users1":"1 utilisateur inclus","users3":"3 utilisateurs inclus","users10":"10 utilisateurs inclus","usersUnlimited":"Utilisateurs illimits","invoices5":"Jusqu 5 factures par mois","basicExpense":"Suivi basique des dpenses","expenses5":"Jusqu 5 dpenses par mois","bank1":"1 compte bancaire","bankUnlimited":"Comptes bancaires illimits","customerSupplier1":"1 compte et 1 fournisseur","customerSupplierUnlimited":"Comptes et fournisseurs illimits","unlimitedInvoicesExpenses":"Factures et dpenses illimites","vat":"Suivi de TVA par catgorie","pdf":"Factures et devis PDF","emailSupport":"Support par email","quotesBasic":"Cration de devis et lien partageable","quotesAdvanced":"Devis : vu/accept/refus, PDF","quoteTemplate1":"1 modle de devis","quoteTemplatesUnlimited":"Modles de devis illimits","saveListViews":"Enregistrer des vues de listes","unlimited":"Factures illimites","advancedExpense":"Gestion avance des dpenses","multiCurrency":"Prise en charge multidevises","customerMgmt":"Gestion des comptes","products":"Gestion des produits et des stocks","reports":"Rapports avancs et analyses dtailles","prioritySupport":"Support prioritaire","api":"Accs API","everythingPro":"Tout ce qui est dans Pro","teamCollaboration":"Collaboration dquipe","advancedReporting":"Reporting avanc","whiteLabel":"Options en marque blanche","dedicatedSupport":"Support ddi","customIntegrations":"Intgrations personnalises","noCredit":"Sans carte bancaire"},"pro":{"extraUser":"+ chaque utilisateur supplmentaire 5/mois"},"trust":"Plbiscit par des freelances, agences et PME.","questions":"Des questions sur nos tarifs ?","checkFaq":"Voir la FAQ","or":"ou","contactSupport":"contacter le support","guarantee":"Garantie satisfait ou rembours 30 jours sur toutes les offres payantes","title":"Tarification simple","cta":"Commencer maintenant","ctaStarter":"Commencer gratuitement","ctaPro":"Passer  Pro","ctaBusiness":"Choisir Business","annualLine":{"pro":"Paiement annuel : 290/an (2 mois offerts)","biz":"Paiement annuel : 590/an (2 mois offerts)"},"notes":{"vatAndCurrency":"Les prix s'entendent hors TVA.","cancelAnytime":"Vous pouvez rsilier  tout moment."}},"faq.title":"Frequently asked questions","faq.q1":"Can I start for free?","faq.a1":"Yes, the Starter plan lets you issue limited invoices at no cost.","faq.q2":"Does it support VAT?","faq.a2":"Yes, with category-based VAT and simple summaries.","faq.q3":"Are quotes supported?","faq.a3":"Quotes are coming soon  not enabled yet.","faq.q4":"Do you support multiple currencies?","faq.a4":"Yes, EUR and TRY with manual rate input.","faq.q5":"How do I cancel?","faq.a5":"You can cancel anytime from the billing settings.","faq.q6":"Where is my data hosted?","faq.a6":"In the EU (placeholder), with encryption and regular backups.","finalCta.title":"Make pre-accounting simple.","finalCta.cta":"Try for Free","seo.title":"Comptario  Pre-Accounting Software","seo.description":"Comptario helps you manage invoices, expenses and VAT in a simple, secure workspace with multi-currency support and PDF invoice generation.","hero.badge":"Comptario  Pre-Accounting Software","hero.mockup.revenue":"Monthly Revenue","hero.mockup.expenses":"Monthly Expenses","hero.mockup.vat":"VAT to Pay","hero.mockup.rate":"Rate","features.subtitle":"Manage your pre-accounting with confidence using our comprehensive set of tools designed for modern businesses.","value.subtitle":"Whether you're just starting out or running an established business, Comptario adapts to your needs.","value.freelancers.title":"Pour les freelances","value.freelancers.desc":"Facturation simple et suivi des dpenses pour garder votre activit organise","value.freelancers.basic":"Facturation de base","value.freelancers.expense":"Gestion des dpenses","value.freelancers.tax":"Rcapitulatif des taxes","value.small.title":"Pour les petites entreprises","value.small.desc":"Des outils de prcomptabilit complets qui voluent avec votre activit","value.small.currency":"Prise en charge multidevises","value.small.customer":"Gestion des comptes","value.small.reporting":"Rapports avancs","value.growing.title":"Pour les entreprises en croissance","value.growing.desc":"Des solutions volutives qui sadaptent  vos oprations en expansion","value.growing.team":"Collaboration dquipe","value.growing.api":"Envoi de devis via lien","value.growing.support":"Options de filtrage flexibles","value.cta.title":"Ready to streamline your pre-accounting?","value.cta.subtitle":"Join thousands of businesses who trust Comptario to manage their finances efficiently.","value.cta.trial":"Start Free Trial","value.cta.demo":"Schedule Demo","value.stats.users":"Active Users","value.stats.invoices":"Invoices Generated","value.stats.uptime":"Uptime","security.badge":"Enterprise-Grade Security","finalCta.subtitle":"Join thousands of businesses who have streamlined their pre-accounting with Comptario. Start your free trial today  no credit card required.","finalCta.trial":"Free 30-day trial","finalCta.noSetup":"No setup fees","finalCta.cancel":"Cancel anytime","finalCta.stats.countries":"Countries Served","security.features.hosting.title":"EU Data Hosting","security.features.hosting.desc":"Your data is hosted in secure EU data centers with GDPR compliance","security.features.encryption.title":"End-to-End Encryption","security.features.encryption.desc":"All data is encrypted in transit and at rest using industry-standard protocols","security.features.backups.title":"Automated Backups","security.features.backups.desc":"Daily automated backups ensure your data is always safe and recoverable","security.features.gdpr.title":"GDPR Compliant","security.features.gdpr.desc":"Full compliance with European data protection regulations","security.features.monitoring.title":"24/7 Monitoring","security.features.monitoring.desc":"Continuous security monitoring and threat detection","security.features.uptime.title":"99.9% Uptime","security.features.uptime.desc":"Reliable infrastructure with guaranteed uptime SLA","security.trusted.title":"Trusted by businesses across Europe","security.trusted.gdpr":"Compliant","security.trusted.iso":"Certified","security.trusted.soc":"Type II","security.trusted.ssl":"Encrypted","security.trusted.desc":"Your financial data is protected by the same security standards used by banks and financial institutions. We never share your data with third parties and you maintain full control over your information.","testimonials.subtitle":"Don't just take our word for it. Here's what our users have to say about their experience with Comptario.","testimonials.sarah.content":"Comptario has simplified my invoicing process completely. I can now generate professional invoices in minutes and track my expenses effortlessly.","testimonials.sarah.role":"Freelance Designer","testimonials.sarah.company":"Design Studio Pro","testimonials.marcus.content":"The multi-currency feature is a lifesaver for our international accounts. VAT calculations are automatic and accurate, saving us hours of manual work.","testimonials.marcus.role":"CEO","testimonials.marcus.company":"Tech Solutions GmbH","testimonials.elena.content":"As a small business, we needed something simple yet powerful. Comptario gives us everything we need without the complexity of enterprise software.","testimonials.elena.role":"Small Business Owner","testimonials.elena.company":"Local Bakery","testimonials.stats.rating":"Average Rating","testimonials.stats.customers":"Comptes satisfaits","testimonials.stats.countries":"Countries","pricing.subtitle":"Choose the plan that fits your business needs. Start free and upgrade as you grow.","faq.support.title":"Still have questions?","faq.support.desc":"Our support team is here to help you get the most out of Comptario.","faq.support.contact":"Contact Support","faq.support.demo":"Schedule a Demo","pricing.popular":"Most Popular","pricing.plans.starter.desc":"Ideal for freelancers and small projects","pricing.plans.pro.desc":"Ideal for growing businesses","pricing.plans.business.desc":"For established companies with teams","pricing.features.users1":"1 user included","pricing.features.users3":"3 users included","pricing.features.users10":"10 users included","pricing.features.usersUnlimited":"Unlimited users","pricing.features.invoices5":"Up to 5 invoices per month","pricing.features.basicExpense":"Basic expense tracking","pricing.features.expenses5":"Up to 5 expenses per month","pricing.features.bank1":"1 bank account","pricing.features.bankUnlimited":"Unlimited bank accounts","pricing.features.customerSupplier1":"1 compte et 1 fournisseur","pricing.features.customerSupplierUnlimited":"Comptes et fournisseurs illimits","pricing.features.unlimitedInvoicesExpenses":"Unlimited invoices and expenses","pricing.features.vat":"Category-based VAT tracking","pricing.features.pdf":"PDF invoices and quotes","pricing.features.emailSupport":"Email support","pricing.features.quotesBasic":"Quote creation and shareable link","pricing.features.quotesAdvanced":"Quotes: viewed/accepted/declined, PDF","pricing.features.quoteTemplate1":"1 quote template","pricing.features.quoteTemplatesUnlimited":"Unlimited quote templates","pricing.features.saveListViews":"Save list views","pricing.features.unlimited":"Unlimited invoices","pricing.features.advancedExpense":"Advanced expense management","pricing.features.multiCurrency":"Multi-currency support","pricing.features.customerMgmt":"Gestion des comptes","pricing.features.products":"Product and stock management","pricing.features.reports":"Advanced reports and detailed analytics","pricing.features.prioritySupport":"Priority support","pricing.features.api":"API access","pricing.features.everythingPro":"Everything in Pro","pricing.features.teamCollaboration":"Team collaboration","pricing.features.advancedReporting":"Advanced reporting","pricing.features.whiteLabel":"White-label options","pricing.features.dedicatedSupport":"Dedicated support","pricing.features.customIntegrations":"Custom integrations","pricing.features.noCredit":"No credit card required","pricing.pro.extraUser":"+ each additional user 5/mo","pricing.trust":"Trusted by freelancers, agencies, and SMBs.","pricing.questions":"Have questions about our pricing?","pricing.checkFaq":"Check our FAQ","pricing.or":"or","pricing.contactSupport":"contact support","pricing.guarantee":"30-day money-back guarantee on all paid plans","faq.subtitle":"Everything you need to know about Comptario. Can't find the answer you're looking for? Feel free to contact us.","faq.contactUs":"contact us","footer.product":"PRODUCT","footer.company":"COMPANY","footer.support":"SUPPORT","footer.legal":"LEGAL","footer.features":"Features","footer.pricing":"Pricing","footer.security":"Security","footer.api":"API","footer.about":"About","footer.blog":"Blog","footer.careers":"Careers","footer.press":"Press","footer.helpCenter":"Help Center","footer.contactUs":"Contact Us","footer.status":"Status","footer.community":"Community","footer.privacy":"Privacy Policy","footer.terms":"Terms of Service","footer.gdpr":"GDPR","footer.cookies":"Cookie Policy","footer.imprint":"Imprint","footer.description":"Simple, secure pre-accounting software for modern businesses. Manage invoices, expenses, and VAT with confidence.","footer.stayUpdated":"Stay updated","footer.updatesDesc":"Get the latest updates on new features and best practices.","footer.email":"support@comptario.com","footer.languages":"Available in 4 languages","footer.gdprCompliant":"GDPR Compliant","footer.emailPlaceholder":"Enter your email","footer.subscribe":"Subscribe","footer.copyright":" {{year}} Comptario. All rights reserved.","footer.madeWith":"Made with  in Europe","nav":{"faq":"FAQ","contact":"Contact","features":"Fonctionnalits","pricing":"Tarifs"},"faq":{"title":"Foire aux questions","q1":"Puis-je commencer gratuitement ?","a1":"Oui, le plan Starter vous permet dmettre un nombre limit de factures gratuitement.","q2":"La TVA est-elle prise en charge ?","a2":"Oui, avec une gestion de TVA par catgorie et des rcapitulatifs simples.","q3":"Les devis sont-ils pris en charge ?","a3":"Oui. Vous pouvez prparer des devis et les envoyer par lien ou PDF.","q4":"Grez-vous plusieurs devises ?","a4":"Oui  EUR, USD ou TRY avec saisie manuelle du taux.","q5":"Comment rsilier ?","a5":"Vous pouvez rsilier  tout moment depuis les paramtres de facturation.","q6":"O mes donnes sont-elles hberges ?","a6":"Dans lUE (indication), avec chiffrement et sauvegardes rgulires.","support":{"title":"Encore des questions ?","desc":"Notre quipe dassistance est l pour vous aider  tirer le meilleur parti de Comptario.","contact":"Contacter le support","demo":"Planifier une dmo"},"subtitle":"Tout ce quil faut savoir sur Comptario. Vous ne trouvez pas la rponse ? Contacteznous.","contactUs":"nous contacter"},"finalCta":{"title":"Simplifiez votre prcomptabilit.","cta":"Essayer gratuitement","subtitle":"Rejoignez des milliers dentreprises qui ont simplifi leur prcomptabilit avec Comptario. Commencez votre essai gratuit  sans carte bancaire.","trial":"Essai gratuit 30 jours","noSetup":"Aucun frais dinstallation","cancel":"Rsiliation  tout moment","stats":{"countries":"Pays servis"}},"seo":{"unassigned":"Non assign","filters":{"all":"Toutes","open":"Ouvertes","completed":"Termines"},"title":"Comptario  Logiciel de prcomptabilit","description":"Comptario vous aide  grer factures, dpenses et TVA dans un espace simple et scuris, avec prise en charge multidevises et gnration de factures PDF."},"hero":{"badge":"Comptario  Logiciel de prcomptabilit","mockup":{"revenue":"Revenu mensuel","expenses":"Dpenses mensuelles","vat":"TVA  payer","rate":"Taux"},"title":"Grez vos factures, dpenses et devis au mme endroit.","sub":"Grez factures, dpenses et devis dans un espace simple et unique. Organisez votre prcomptabilit avec la prise en charge multidevises (EUR, USD, TRY), le suivi de TVA par catgorie et la gnration de factures/devis PDF. Grce aux liens partageables, vos comptes peuvent consulter et accepter ou refuser en un clic.","features":{"pdf":"Factures et devis PDF","currency":"Multidevises (EUR / USD / TRY)","vat":"TVA / Gestion des taxes"}},"features":{"subtitle":"Grez votre prcomptabilit en toute confiance grce  un ensemble doutils complets conus pour les entreprises modernes.","title":"Tout ce quil vous faut pour la prcomptabilit","inv":{"title":"Facturation","desc":"Numrotation, comptes, export PDF et envoi par email."},"exp":{"title":"Dpenses","desc":"Tlversement de fichiers, OCR (bientt), TVA par catgorie (ex. 20% FR, 18% TR)."},"vat":{"title":"TVA & rcapitulatifs fiscaux","desc":"Rapports de priode clairs avec mise en avant de la TVA collecte/dductible."},"fx":{"pricing.ctaContact":"Bize ulan","faq":{"title":"Questions frquentes","subtitle":"Tout ce quil faut savoir sur Comptario. Vous ne trouvez pas la rponse recherche ? Nhsitez pas  nous contacter.","contactUs":"nous contacter","q1":"Puisje commencer gratuitement ?","a1":"Oui, loffre Starter permet dmettre un nombre limit de factures gratuitement.","q2":"La TVA estelle prise en charge ?","a2":"Oui, avec TVA par catgorie et rsums clairs.","q3":"Les devis sontils pris en charge ?","a3":"Oui. Vous pouvez prparer des devis et les envoyer par lien ou PDF.","q4":"Prise en charge de plusieurs devises ?","a4":"Oui  EUR, USD ou TRY avec saisie manuelle du taux.","q5":"Comment rsilier ?","a5":"Vous pouvez rsilier  tout moment depuis les paramtres de facturation.","q6":"O mes donnes sontelles hberges ?","a6":"Dans lUE (indication), avec chiffrement et sauvegardes rgulires.","support":{"title":"Encore des questions ?","desc":"Notre support vous aide  tirer le meilleur parti de Comptario.","contact":"Contacter le support"}},"title":"MultiDevises","desc":"Options de devise systme : USD, EUR, TRY"}},"value":{"subtitle":"Que vous dbutiez ou que vous dirigiez une entreprise tablie, Comptario sadapte  vos besoins.","freelancers":{"title":"Pour les freelances","desc":"Facturation simple et suivi des dpenses pour garder votre activit organise","basic":"Facturation de base","expense":"Gestion des dpenses","tax":"Rcapitulatif des taxes"},"small":{"title":"Pour les petites entreprises","desc":"Des outils de prcomptabilit complets qui voluent avec votre activit","currency":"Prise en charge multidevises","customer":"Gestion des comptes","reporting":"Rapports avancs"},"growing":{"title":"Pour les entreprises en croissance","desc":"Des solutions volutives qui sadaptent  vos oprations en expansion","team":"Collaboration dquipe","api":"Envoi de devis via lien","support":"Options de filtrage flexibles"},"cta":{"title":"Prt  fluidifier votre prcomptabilit ?","subtitle":"Rejoignez des milliers dentreprises qui font confiance  Comptario pour grer leurs finances efficacement.","trial":"Dmarrer lessai gratuit","demo":"Planifier une dmo"},"stats":{"users":"Utilisateurs actifs","invoices":"Factures gnres","uptime":"Disponibilit"},"title":"Sadapte des freelances aux PME"},"security":{"badge":"Scurit de niveau entreprise","features":{"hosting":{"title":"Hbergement des donnes dans lUE","desc":"Vos donnes sont hberges dans des centres de donnes scuriss et conformes au RGPD"},"encryption":{"title":"Chiffrement de bout en bout","desc":"Toutes les donnes sont chiffres en transit et au repos selon les normes du secteur"},"backups":{"title":"Sauvegardes automatises","desc":"Des sauvegardes quotidiennes garantissent la scurit et la rcupration de vos donnes"},"gdpr":{"title":"Conforme RGPD","desc":"Conformit complte aux rglementations europennes en matire de protection des donnes"},"monitoring":{"title":"Surveillance 24/7","desc":"Surveillance continue de la scurit et dtection des menaces"},"uptime":{"title":"Disponibilit 99,9 %","desc":"Infrastructure fiable avec SLA de disponibilit garanti"}},"trusted":{"title":"Plbiscit par des entreprises  travers lEurope","gdpr":"Conforme","iso":"Certifi","soc":"Type II","ssl":"Chiffr","desc":"Vos donnes financires sont protges par les mmes standards de scurit que ceux des banques. Nous ne partageons jamais vos donnes et vous en gardez le contrle total."},"title":"Scurit et conformit","items":"Hbergement UE (provisoire), chiffrement en transit et au repos, sauvegardes automatiques."},"testimonials":{"subtitle":"Ne nous croyez pas sur parole. Voici lavis de nos utilisateurs.","sarah":{"content":"Comptario a compltement simplifi ma facturation. Je gnre des factures professionnelles en quelques minutes et je suis mes dpenses sans effort.","role":"Designer freelance","company":"Design Studio Pro"},"marcus":{"content":"La fonctionnalit multidevises est essentielle pour nos comptes internationaux. Les calculs de TVA sont automatiques et prcis, nous faisant gagner des heures.","role":"PDG","company":"Tech Solutions GmbH"},"elena":{"content":"PME, nous voulions un outil simple mais puissant. Comptario nous apporte tout ce dont nous avons besoin sans la complexit des logiciels dentreprise.","role":"Grante de petite entreprise","company":"Boulangerie locale"},"stats":{"rating":"Note moyenne","customers":"Comptes satisfaits","countries":"Pays"},"title":"Ce que disent nos utilisateurs"},"footer":{"product":"PRODUIT","company":"ENTREPRISE","support":"ASSISTANCE","legal":"JURIDIQUE","features":"Fonctionnalits","pricing":"Tarifs","security":"Scurit","api":"API","about":" propos","blog":"Blog","careers":"Carrires","press":"Presse","helpCenter":"Centre daide","contactUs":"Nous contacter","status":"Statut","community":"Communaut","privacy":"Confidentialit","terms":"Conditions","gdpr":"RGPD","cookies":"Cookies","imprint":"Mentions lgales","description":"Logiciel de prcomptabilit simple et scuris pour les entreprises modernes. Grez factures, dpenses et TVA en toute confiance.","stayUpdated":"Restez inform","updatesDesc":"Recevez les dernires nouveauts et bonnes pratiques.","languages":"Disponible en 4 langues","gdprCompliant":"Conforme au RGPD","emailPlaceholder":"Entrez votre email","subscribe":"Sabonner","madeWith":"Fait avec  en Europe"}}`),i4={header:{title:"Abonnement et Facturation",subtitle:"Grez votre abonnement, priode de facturation et siges"},managePayments:"Grer les paiements",monthly:"Mensuel",yearly:"Annuel",yearlyNote:"2 mois offerts",currentPlan:{label:"Offre actuelle",seatsInUse:"Siges utiliss",renewalDate:"Date de renouvellement",cancellationDate:"Date dannulation",cancelAtPeriodEndNotice:"Votre abonnement sera annul en fin de priode."},changePlan:"Changer doffre",plans:{labels:{professional:"Pro",enterprise:"Business",free:"Gratuit"},bullets:{proIncluded:"3 utilisateurs inclus",basicAutomations:"Automatisations de base",businessIncluded:"10 utilisateurs inclus",advancedAutomations:"Automatisations avances et rles",freeLimited:"Fonctionnalits et factures limites"}},prices:{monthly:{free:"0/mois",pro:"29/mois",enterprise:"59/mois"}},configuration:"Configuration",modal:{newTitle:"Ajouter un Fournisseur",editTitle:"Modifier le Fournisseur",subtitle:"Saisissez les informations du fournisseur",nameLabel:"Nom du Fournisseur",companyLabel:"Nom de la Socit",emailLabel:"E-mail",phoneLabel:"Tlphone",categoryLabel:"Catgorie",taxNumberLabel:"Numro Fiscal",addressLabel:"Adresse",namePlaceholder:"ABC Fourniture SARL",companyPlaceholder:"ABC Fourniture SAS",emailPlaceholder:"info@abcfourniture.com",phonePlaceholder:"+33 6 12 34 56 78",taxNumberPlaceholder:"Numro fiscal",addressPlaceholder:"Informations compltes d'adresse..."},billingCycle:"Cycle de facturation",seatsAddon:"Siges supplmentaires",seatsAddonHelper:"Facturs 5/sige/mois. Proratisation applique.",costPreview:"Aperu des cots",newSubtotal:"Nouveau sous-total",extraSeats:"Siges supplmentaires",prorationToday:"Proratisation aujourdhui",updatePlan:"Mettre  jour loffre",amountsNote:"Les montants sont indicatifs. Les frais finaux sont affichs au paiement.",quickSeatActions:"Actions rapides sur les siges",add1SeatNow:"Ajouter 1 sige et encaisser maintenant",add5SeatsNow:"Ajouter 5 siges et encaisser maintenant",remove1Seat:"Retirer 1 sige",quickTip:"Astuce : vous pouvez aussi ajouter des siges depuis le portail de facturation.",subscriptionStatus:"Statut de labonnement",subscriptionCancelNote:"Lannulation prend effet en fin de priode ; vous pouvez reprendre avant.",cancelAtPeriodEndBtn:"Annuler en fin de priode",resumeSubscriptionBtn:"Reprendre labonnement",history:{title:"Historique",loading:"Chargement de lhistorique",empty:"Aucun enregistrement",type:"Type",plan:"Offre",users:"Utilisateurs",date:"Date",footerNote:"Les vnements sont synchroniss priodiquement depuis le prestataire de facturation."},invoices:{title:"Factures",loading:"Chargement des factures",empty:"Aucune facture",filters:{status:"Statut",all:"Tous",search:"Rechercher",searchPlaceholder:"Numro ou devise",from:"De",to:"",exportCsv:"Exporter CSV"},table:{number:"Numro",date:"Date",amount:"Montant",status:"Statut",statusValues:{pending:"En attente",approved:"Approuv",paid:"Pay",rejected:"Rejet"},actions:"Actions"},footerNote:"Les factures sont rcupres depuis le prestataire ; les montants sont affichs dans la devise de facturation."}},o4={welcomeTitle:"Bienvenue",welcomeSubtitle:"Connectez-vous pour continuer",emailAddress:"Adresse e-mail",emailPlaceholder:"nom@exemple.com",password:"Mot de passe",passwordPlaceholder:"",rememberMe:"Se souvenir de moi",forgotPassword:"Mot de passe oubli",forgotPasswordHelp:"Entrez votre adresse e-mail ; si un compte existe, nous enverrons un lien de rinitialisation.",resetEmailSent:"Si un compte existe, un e-mail de rinitialisation a t envoy.",resetPassword:"Rinitialiser le mot de passe",resetPasswordHelp:"Dfinissez votre nouveau mot de passe.",newPassword:"Nouveau mot de passe",confirmPassword:"Confirmer le mot de passe",passwordTooShort:"Le mot de passe doit comporter au moins 8 caractres",passwordTooWeak:"Veuillez choisir un mot de passe plus fort",passwordMismatch:"Les mots de passe ne correspondent pas",passwordResetSuccess:"Votre mot de passe a t mis  jour",updatePassword:"Mettre  jour le mot de passe",signIn:"Se connecter",demoAccount:"Compte dmo :",email:"E-mail",or:"ou",adminLogin:"Connexion admin",noAccount:"Pas de compte ?",createFreeAccount:"Crer un compte gratuit",registerTitle:"Crer un compte",registerSubtitle:"Crez votre compte gratuit et commencez",fullName:"Nom complet",fullNamePlaceholder:"Entrez votre nom complet",companyName:"Nom de l'entreprise",companyPlaceholder:"Votre entreprise (optionnel)",phone:"Tlphone",phonePlaceholder:"(optionnel)",passwordHint:"Au moins 6 caractres",passwordConfirm:"Confirmer le mot de passe",passwordConfirmPlaceholder:"Saisissez  nouveau votre mot de passe",termsText:{prefix:"J'accepte : ",suffix:""},and:" et ",dataProcessing:"Accord de traitement des donnes",captchaHint:"Plusieurs tentatives de connexion choues dtectes - veuillez terminer la vrification humaine.",captchaRequired:"Veuillez terminer la vrification humaine.",captchaPrompt:"Veuillez terminer la vrification humaine avant de continuer.",captchaVerificationFailed:"La vrification humaine n'a pas pu tre confirme. Veuillez ressayer.",verifyRequiredTitle:"Vrification de le-mail requise",verifyRequiredBody:"Nous avons envoy un lien de vrification  {{email}}. Confirmez votre adresse pour continuer.",verifyRequiredHint:"Laccs aux fonctionnalits reste bloqu tant que ladresse nest pas vrifie.",verifyRequiredAction:"Afficher ltat de vrification",verifyRequiredLogout:"Se dconnecter",verifyYourEmail:"Vrifiez votre e-mail",verifySentTo:"Nous avons envoy un lien de vrification :",verifySent:"Nous avons envoy un lien de vrification  votre adresse e-mail.",resend:"Renvoyer",resendCooldown:"Par scurit, un dlai de 60 secondes sapplique",securityVerificationRequired:"Vrification de scurit requise. Merci de finaliser la vrification.",emailNotVerified:"E-mail non vrifi. Veuillez confirmer votre adresse e-mail avant de continuer.",verificationEmailSent:"E-mail de vrification envoy. Merci de consulter votre bote de rception.",resendVerification:"Renvoyer l'e-mail de vrification",registerCta:"Crer un compte",alreadyHaveAccount:"Vous avez dj un compte ?",goToLogin:"Se connecter",sendResetLink:"Envoyer le lien de rinitialisation",resendIn:"Vous pouvez renvoyer dans {{seconds}}s"},l4={save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",view:"Voir",update:"Mettre  jour",add:"Ajouter",search:"Rechercher",noResults:"Aucun rsultat.",close:"Fermer",back:"Retour",backToHome:"Retour  l'accueil",confirm:"Confirmation",yes:"Oui",no:"Non",loading:"Chargement...",error:"Erreur",success:"Succs",warning:"Avertissement",ok:"OK",now:"Maintenant",periodLockedError:"Cet enregistrement ne peut pas tre supprim car il appartient  une priode fiscale verrouille",description:"Description",dueDate:"Date d'chance",startDate:"Date de dbut",endDate:"Date de fin",monthlyIncomeExpense:"Revenus/Dpenses Mensuels",last6MonthsPerformance:"Performance des 6 derniers mois (plus rcent  plus ancien)",allCategories:"Toutes les catgories",dateRanges:{thisMonth:"Ce mois-ci",last30Days:"30 derniers jours",thisYear:"Cette anne"},filters:{status:"Statut",filterByStatus:"Filtrer par statut"},actions:{templates:{title:"Modles de devis",manage:"Grer les modles",manageTitle:"Grer les modles de devis",list:"Modles",new:"Nouveau",newTemplate:"Nouveau modle",placeholderName:"Nom du modle",apply:"Appliquer",create:"Crer un modle",selectPlaceholder:"Slectionnez un modle",freeHidden:"Les modles sont masqus dans loffre Starter.",proLimit:"Vous pouvez enregistrer jusqu 1 modle dans Pro.",requirePlan:"Offre requise",manageUpgrade:"Passez  Pro ou Business pour grer les modles.",setDefault:"Par dfaut",availableTokens:"Jetons disponibles (cliquer pour insrer) :"},clear:"Effacer",view:"Voir",copyLink:"Copier le lien",downloadPDF:"Tlcharger le PDF"},exportCSV:"Exporter en CSV","dateRanges.thisMonth":"Ce mois-ci","dateRanges.last30Days":"30 derniers jours","dateRanges.thisYear":"Cette anne","common.total":"Total","common.exportCSV":"Exporter en CSV","filters.status":"Statut","filters.filterByStatus":"Filtrer par statut","actions.clear":"Effacer","actions.view":"Voir","actions.copyLink":"Copier le lien","actions.downloadPDF":"Tlcharger le PDF",allStock:"Tous les stocks",newest:"Plus rcent",income:"Revenu",expense:"Dpense",hideChart:"Masquer le Graphique",showChart:"Afficher le Graphique",chartHidden:"Graphique masqu",incomeLabel:"Revenu",expenseLabel:"Dpense",allStatuses:"Tous les Statuts",allAccounts:"Tous les Comptes",cash:"Espces",card:"Carte",transfer:"Virement",check:"Chque",email:"E-mail",quantity:"Quantit",status:{pending:"En attente",approved:"Approuv",paid:"Pay",rejected:"Refus"},notes:"Notes",generic:{customer:"Compte",supplier:"Fournisseur",expense:"Dpense",quote:"Devis"},modal:{newTitle:"Ajouter un fournisseur",editTitle:"Modifier le fournisseur",subtitle:"Saisissez les informations du fournisseur",nameLabel:"Nom du fournisseur",companyLabel:"Raison sociale",emailLabel:"Email",phoneLabel:"Tlphone",categoryLabel:"Catgorie",taxNumberLabel:"N fiscal",addressLabel:"Adresse",namePlaceholder:"ABC Supply SARL",companyPlaceholder:"ABC Supply SA",emailPlaceholder:"info@abcsupply.com",phonePlaceholder:"+33 1 23 45 67 89",taxNumberPlaceholder:"N fiscal",addressPlaceholder:"Adresse complte..."},statusLabel:"Statut",common:{total:"Total",cancel:"Annuler",update:"Mettre  jour",edit:"Modifier"},remindMeLater:"Me le rappeler plus tard"},c4={TRY:"Livre Turque",USD:"Dollar Amricain",EUR:"Euro",GBP:"Livre Sterling"},d4={newInvoice:"Nouvelle Facture",newSale:"Nouvelle Vente",search:"Rechercher...",areas:{label:"Slection de lespace",summary:"Rsum",crm:"CRM",finance:"Finance"},language:"Langue",notifications:"Notifications",noNotifications:"Aucune nouvelle notification.",settings:"Paramtres",logout:"Dconnexion"},u4={title:"Tableau de bord",overview:"Vue d'ensemble",revenue:"Revenus",expense:"Dpenses",profit:"Bnfice",unpaidInvoices:"Factures impayes",recentActivity:"Activit rcente",totalRevenue:"Total des Revenus",totalExpense:"Total des Dpenses",pendingInvoices:"Factures en Attente",activeCustomers:"Comptes actifs",vatToPay:"TVA  payer",vatToPaySubtitle:"Bas sur les factures payes ce mois-ci",quickActions:"Actions Rapides",recentTransactions:"Transactions Rcentes",quickAccess:"Accs Rapide",lastTransactions:"Vos {count} dernires transactions",allGood:"Tout va bien!",noAlerts:"Aucune tche ou alerte en attente.",viewAll:"Tout voir"},m4={newInvoice:"Nouvelle Facture",newInvoiceDesc:"Crer une facture de compte",newExpense:"Nouvelle Dpense",newExpenseDesc:"Ajouter un enregistrement de dpense",newSale:"Nouvelle Vente",newSaleDesc:"Enregistrer une transaction de vente",newQuote:"Nouveau Devis",newQuoteDesc:"Crer un devis pour un compte",newCustomer:"Nouveau Compte",newCustomerDesc:"Ajouter des informations de compte",newProduct:"Nouveau Produit",newProductDesc:"Ajouter des informations produit",customers:"Comptes",suppliers:"Fournisseurs",banks:"Comptes Bancaires",products:"Produits"},h4={invoice:"Facture",expense:"Dpense",sale:"Vente",paid:"Pay",unpaid:"Impay",pending:"En Attente",actions:"Actions",transaction:"Transaction",customerDescription:"Compte/Description",amount:"Montant",status:"Statut",date:"Date",noTransactions:"Aucune transaction pour le moment"},f4={overdueInvoices:"Factures en Retard",overdueDesc:"Facture en retard",dueSoon:"chance Proche",dueSoonDesc:"chance dans 7 jours",pendingExpenses:"Dpenses en Attente",pendingExpensesDesc:"Dpense en attente d'approbation",allGood:"Tout va bien!",noAlerts:"Aucune tche ou alerte en attente.",attentionRequired:"Attention Requise"},p4={short:{jan:"Jan",feb:"Fv",mar:"Mars",apr:"Avr",may:"Mai",jun:"Juin",jul:"Juil",aug:"Ao",sep:"Sept",oct:"Oct",nov:"Nov",dec:"Dc"}},g4={summary:"Rsum",dashboard:"Tableau de Bord",invoices:"Factures",expenses:"Dpenses",customers:"Comptes",products:"Produits",suppliers:"Fournisseurs",banks:"Banques",sales:"Ventes",crm:"CRM",crmDashboard:"Tableau de bord CRM",crmPipeline:"Pipeline commercial",crmOpportunities:"Opportunits",crmLeads:"Prospects",crmContacts:"Contacts",crmActivities:"Activits",crmTasks:"Tches",quotes:"Devis",reports:"Rapports",accounting:"Comptabilit",chartOfAccounts:"Plan Comptable",archive:"Archives",organization:"Organisation",settings:"Paramtres",close:"Fermer",archiveConfirm:"Voulezvous vraiment archiver cette catgorie?"},x4={title:"Devis",newQuote:"Nouveau Devis",comingSoon:"La page de base du module Devis est prte. Liste avance, statuts et modles PDF  venir.",placeholderDescription:"La cration, l'envoi, la page publique et les flux d'acceptation/refus seront ici. L'intgration de la navigation et du menu est en place.",search:"Rechercher des devis...",filterAll:"Tous les Statuts",viewModal:{details:"Dtails du devis"},validUntil:"Valable jusqu'au",expiresIn:"(expire dans {{days}} jours)",expiredOn:"(expir le {{date}})",version:"v{{n}}",confirmAccept:"tes-vous sr de vouloir accepter ce devis ?",acceptedThanks:"Merci, le devis a t accept.",confirmDecline:"tes-vous sr de vouloir refuser ce devis ?",declinedInfo:"Le devis a t refus.",createConfirm:"tes-vous sr de vouloir enregistrer ce devis ?",saveConfirm:"tes-vous sr de vouloir enregistrer les modifications ?",duplicateConfirm:"Voulez-vous continuer l'opration de duplication ?",reviseConfirm:"Voulez-vous rviser ce devis ? La version actuelle sera archive et une nouvelle version sera cre.",actions:{send:"Envoyer",accept:"Accepter",decline:"Refuser",downloadPdf:"Tlcharger PDF",copyLink:"Copier le lien public",copyPublicLink:"Copier le lien",copyPublicLinkSuccess:"Lien copi.",resendEmail:"Renvoyer l'e-mail",revise:"Rviser",duplicate:"Dupliquer"},editModal:{title:"Modifier le devis",subtitle:"Mettez  jour les informations du devis",quoteNumber:"N de devis"},table:{quote:"Devis",customer:"Compte",amount:"Montant",status:"Statut",date:"Date",actions:"Actions"},noQuotes:"Aucun devis pour le moment",noQuotesDesc:"Commencez par crer votre premier devis.",noQuotesFound:"Aucun devis trouv",noQuotesFoundDesc:"Aucun devis ne correspond  vos critres de recherche.",createFirstQuote:"Crer le Premier Devis",view:"Voir",edit:"Modifier",delete:"Supprimer",statusLabels:{viewed:"Vu",accepted:"Accept",declined:"Refus",expired:"Expir",draft:"Brouillon",sent:"Envoy"},createModal:{title:"Crer un Devis",customer:"Compte",customerPlaceholder:"Saisir le nom du compte",currency:"Devise",date:"Date d'mission",amount:"Montant",create:"Crer"},scopeOfWork:{title:"Porte des travaux",placeholder:"Primtre du projet, livrables, hypothses et exclusions...",note:"Ce contenu sera ajout au PDF du devis en tant que nouvelle page aprs la section actuelle et sera visible sur le lien public."},templates:{title:"Modles de devis",manage:"Grer les modles",manageTitle:"Grer les modles de devis",list:"Modles",new:"Nouveau",newTemplate:"Nouveau modle",placeholderName:"Nom du modle",apply:"Appliquer",create:"Crer un modle",selectPlaceholder:"Slectionnez un modle",freeHidden:"Les modles sont masqus dans loffre Starter.",proLimit:"Vous pouvez enregistrer jusqu 1 modle dans Pro.",requirePlan:"Offre requise",manageUpgrade:"Passez  Pro ou Business pour grer les modles.",setDefault:"Par dfaut",availableTokens:"Jetons disponibles (cliquer pour insrer) :",defaultBodyHtml:"<h3>Rcapitulatif du devis</h3><p>Date : [quote.date]  Valable jusqu'au : [quote.valid_until]</p><p>Bonjour [client.name] ([client.company]), veuillez trouver notre proposition cidessous.</p><h4>Primtre</h4><ul><li>lment 1</li><li>lment 2</li><li>lment 3</li></ul><h4>Total</h4><p>Total : [quote.total] [quote.currency]</p><h4>Contact</h4><p>[org.name]  [org.email]  [org.phone]  [org.address]</p>"}},y4={subscriptionUpdated:"Abonnement mis  jour.",payment:{successTitle:"Paiement russi",cancelledTitle:"Paiement annul",cancelledMessage:"Paiement annul ou non termin."},addonAdded:"Utilisateurs supplmentaires ajouts.",portal:{cancelAtPeriodEnd:"Labonnement sera annul  la fin de la priode. Date : {{date}}",activeApplied:"Abonnement actif. Modifications du portail appliques.",synced:"Modifications du portail synchronises."},redirecting:"Redirection vers lcran de paiement",interval:{updated:"Priode de facturation mise  jour."},checkout:{failed:"chec de cration de la session de paiement."},cancelAtPeriodEnd:{confirm:"Labonnement sera annul  la fin de la priode. Confirmer ?"},cancel:{requestedShort:"Annulation en fin de priode dfinie."},resumeCancellation:{confirm:"Lannulation sera retire et labonnement sera renouvel. Confirmer ?",done:"Annulation retire. Abonnement actif."}},b4={thisMonth:"ce mois",all:"tout"},v4="Statut",w4={paid:"Pay",unpaid:"Impay",pending:"En Attente",overdue:"En Retard",draft:"Brouillon",sent:"Envoy",approved:"Approuv",rejected:"Rejet",cancelled:"Annul",completed:"Termin",active:"Actif",inactive:"Inactif",viewed:"Consult",accepted:"Accept",declined:"Dclin",expired:"Expir",invoiced:"Factur",created:"Cr",refunded:"Rembours"},N4={details:"Dtails de la Facture",downloadPdf:"Tlcharger PDF",information:"Informations de Facture",type:"Type de Facture",productSale:"Vente de Produit",serviceSale:"Vente de Service",issueDate:"Date d'mission",dueDate:"Date d'chance",customerInfo:"Informations du compte",itemsServices:"Articles/Services",description:"Description",quantity:"Quantit",unitPrice:"Prix Unitaire",total:"Total",subtotal:"Sous-total",vat:"TVA",grandTotal:"Total Gnral",notes:"Notes"},k4={details:"Dtails de la Dpense",information:"Informations de Dpense",number:"N Dpense",date:"Date de Dpense",category:"Catgorie",supplier:"Fournisseur",amount:"Montant",receipt:"Reu",viewReceipt:"Voir le Reu"},j4={history:"Historique des Transactions",transactions:"transactions trouves",noHistory:"Pas Encore d'Historique",noHistoryDesc:"n'a pas encore de factures ou d'enregistrements de transactions.",tip:"Conseil:",tipDesc:"Vous pouvez commencer l'historique des transactions en crant une nouvelle facture pour ce compte.",createInvoice:"Crer une Facture",sale:"Vente",completed:"Termin",waiting:"En Attente",historyPageTitle:"Historique du Compte",historySubtitle:"Tout l'historique pour {{name}}",historyColumns:{name:"Enregistrement / N",date:"Date",status:"Statut",createdBy:"Cr par",type:"Type",description:"Description"}},S4={expenseHistory:"Historique des Dpenses",expensesFound:"dpenses trouves",noExpenseHistory:"Pas Encore d'Historique de Dpenses",noExpenseHistoryDesc:"n'a pas encore d'enregistrements de dpenses.",tip:"Conseil:",tipDesc:"Vous pouvez commencer l'historique des transactions en crant une nouvelle dpense pour ce fournisseur.",createExpense:"Crer une Dpense",viewExpense:"Voir la dpense"},C4={title:"Produits",newProduct:"Nouveau Produit",search:"Rechercher des produits...",filterCategory:"Toutes les Catgories",name:"Nom du Produit",category:"Catgorie",price:"Prix",stock:"Stock",sort:"Tri",status:"Statut",actions:"Actions",noProducts:"Aucun produit pour le moment",addFirstProduct:"Ajoutez votre premier produit",edit:"Modifier",delete:"Supprimer",deleteConfirm:"tes-vous sr de vouloir supprimer ce produit ?",manageCategories:"Grer les Catgories",totalProducts:"Total Produits",stockValue:"Valeur du Stock",totalStock:"Stock Total",lowStock:"Stock Faible",activeProductsDesc:"Nombre de produits activement vendus",totalStockCostDesc:"Cot total estim du stock",totalUnitsDesc:"Total d'units en entrept",criticalLevelDesc:"Produits en dessous du niveau critique",productCategories:"Catgories de Produits",archivedCategories:"Catgories archives",showArchived:"Afficher archivs",hideArchived:"Masquer archivs",activate:"Activer",noArchivedCategories:"Aucune catgorie archive",addCategory:"Ajouter catgorie",categoriesCount:"catgories",allProducts:"Tous les produits",noCategories:"Aucune catgorie pour le moment.",mainCategoriesTitle:"Catgories principales",subCategories:"Sous-catgories",editCategory:"Modifier",deleteCategory:"Supprimer",editCategoryTooltip:"Modifier la catgorie",mainCategoryEditTooltip:"Seul le taux de taxe peut tre modifi pour les catgories principales",generalCategoryCannotDelete:"La catgorie gnrale ne peut pas tre supprime",mainCategoryCannotDelete:"La catgorie principale ne peut pas tre supprime",deleteCategoryConfirm:"tes-vous sr de vouloir supprimer cette catgorie?",deleteCategoryWithProducts:"Cette catgorie contient {{count}} produits actifs. Dplacez-les d'abord vers une autre catgorie.",categoryCannotDeleteProtected:`"{category}" ne peut pas tre supprime car c'est une catgorie principale.`,generalCategoryCannotDeleteAlert:"La catgorie gnrale ne peut pas tre supprime.",updatePrice:"Mettre  jour le prix",assignCategory:"Assigner une catgorie",archive:"Archiver",noProductsYet:"Aucun produit pour le moment",costPrice:"Cot",unit:"Unit",productsCount:"produits",allStock:"Tous les stocks",lowStockFilter:"Stock faible",outOfStock:"Rupture de stock",overstock:"Surstock",newest:"Plus rcent",priceHighLow:"Prix (Haut-Bas)",priceLowHigh:"Prix (Bas-Haut)",stockHighLow:"Stock (Haut-Bas)",stockLowHigh:"Stock (Bas-Haut)",inStock:"En Stock",critical:"Critique",depleted:"puis",cost:"Cot",minStock:"Stock Min.",view:"Voir",viewProduct:"Voir le produit",mainCategories:{products:"Produits",services:"Services"},createCategoryFirst:"Vous devez d'abord crer une nouvelle catgorie.",productServiceName:"Nom Produit/Service",selectFromList:"Slectionner produit dans la liste",productsFound:"produits trouvs",editProduct:"Modifier Produit",enterProductInfo:"Remplir les informations produit et mettre  jour le statut stock",generalInfo:"INFORMATIONS GNRALES",priceAndStock:"PRIX ET STOCK",notes:"Notes",namePlaceholder:"Nom du produit/service",unitPlaceholder:"Unit (ex: pcs, kg, heure)",descriptionPlaceholder:"Caractristiques produit, informations garantie etc.",useCustomTax:"Utiliser taux TVA personnalis",customTaxNote:"Vous pouvez dfinir un taux de TVA diffrent pour ce produit. Si laiss vide, la TVA de catgorie sera utilise.",categoryTax:"TVA Catgorie",salePrice:"Prix de Vente",stockQuantity:"Quantit Stock",criticalStock:"Stock Critique",customTaxRate:"Taux TVA Personnalis",taxRatePlaceholder:"18,0",customTaxRateHelper:"Taux de TVA personnalis pour ce produit. Remplace la TVA de catgorie.",noCategoriesFound:"Aucune catgorie trouve",useCustomTaxRate:"Utiliser taux TVA personnalis",description:"Description",categoryModal:{titleNew:"Ajouter une Catgorie",titleEdit:"Modifier la Catgorie",subtitleNew:"Enregistrer une nouvelle catgorie de produit.",subtitleEdit:"Mettre  jour les dtails de la catgorie.",parentLabel:"Catgorie parente",parentHelper:" quelle catgorie principale cela appartiendra-t-il ?",nameLabel:"Nom de la catgorie",namePlaceholder:"Ex : lectronique",taxLabel:"Taux de TVA (%)",taxPlaceholder:"Ex : 18",taxHelperChildOverrides:"Si la sous-catgorie a une TVA, elle remplace la TVA parente.",taxHelperDefault:"Taux de TVA par dfaut pour les produits de cette catgorie.",nameRequired:"Le nom de la catgorie est requis",parentRequired:"La slection de la catgorie parente est obligatoire",taxInvalid:"Le taux de TVA doit tre entre 0 et 100",nameExists:"Cette catgorie existe dj"},cannotArchiveCategoryWithProducts:"Cette catgorie contient {{count}} produits. Dplacezles ou supprimezles avant larchivage."},A4={title:"Plan Comptable",subtitle:"Grez votre plan comptable",newAccount:"Nouveau Compte",search:"Rechercher par code ou nom de compte...",code:"Code",accountName:"Nom du Compte",type:"Type",balance:"Solde",status:"Statut",actions:"Actions",accountsRegistered:"comptes enregistrs",clickToEdit:"Cliquez sur le nom, le code ou le solde du compte pour modifier",addAccountTip:"Utilisez le bouton ci-dessus pour ajouter un nouveau compte",active:"Actif",passive:"Inactif",allSummed:"tout additionn",accountTypes:{all:"Tous",asset:"Actif",liability:"Passif",equity:"Capitaux propres",revenue:"Revenus",expense:"Dpense"},accountTypesPlural:{asset:"Actifs",liability:"Passifs",equity:"Capitaux propres",revenue:"Revenus",expense:"Dpenses"},statusLabels:{active:"Actif",inactive:"Inactif"},tooltips:{editHint:"Cliquez sur la ligne du compte pour modifier",toggleStatus:"Cliquer pour changer le statut",addSubAccount:"Ajouter un sous-compte",deleteAccount:"Supprimer le compte"},deleteConfirm:"tes-vous sr de vouloir supprimer ce compte ?",accountNames:{100:"ACTIFS CIRCULANTS",101:"Caisse",102:"Banques",120:"Crances",150:"ACTIFS IMMOBILISS",200:"PASSIFS  COURT TERME",201:"Fournisseurs",300:"CAPITAUX PROPRES",600:"PRODUITS",601:"Produits des Ventes",602:"Produits des Services",700:"CHARGES",701:"Charges de Loyer",702:"Charges de Personnel",703:"Charges de Factures"},accountTypeLabels:{asset:"Actif",liability:"Passif",equity:"Capitaux propres",revenue:"Produit",expense:"Charge"}},T4={title:"Factures",newInvoice:"Nouvelle Facture",editInvoice:"Modifier la Facture",enterInvoiceInfo:"Saisissez les informations du compte et les dtails des produits",deleteConfirm:"tes-vous sr de vouloir supprimer cette facture ?",deleteSuccess:"Facture supprime",search:"Rechercher numro de facture ou compte...",filterAll:"Tous les Statuts",invoicesRegistered:"factures enregistres",inArchive:"dans l'archive",noInvoices:"Aucune facture pour le moment",noInvoicesFound:"Aucune facture trouve",showVoided:"Afficher Annules",hideVoided:"Masquer Annules",noInvoicesDesc:"Commencez par crer votre premire facture.",noInvoicesFoundDesc:"Aucune facture ne correspond  vos critres de recherche.",createFirstInvoice:"Crer la Premire Facture",invoiceNumber:"Facture",customer:"Compte",date:"Date",amount:"Montant",status:"Statut",actions:"Actions",view:"Voir",edit:"Modifier",download:"Tlcharger",delete:"Supprimer",viewInvoice:"Voir la facture",createInvoice:"Crer une Facture",selectInvoiceType:"Slectionner le type de facture",newSale:"Nouvelle Vente",newSaleDescription:"Crer un nouveau dossier de vente et mettre une facture",newSaleNote:"La vente et la facture seront cres automatiquement",existingSale:"Vente Existante",existingSaleDescription:"mettre une facture pour une vente dj effectue",existingSaleNote:"Seules les informations de facturation peuvent tre modifies",returnInvoice:"Facture de Retour",returnInvoiceDescription:"Crez une facture de retour/remboursement pour une facture prcdemment mise",returnInvoiceNote:"Le retour sera cr en slectionnant parmi les factures existantes",notes:"Notes",notesPlaceholder:"Notes supplmentaires lies  la vente",autoGenerated:"Gnr automatiquement",statusCompleted:"Termin",statusPending:"En attente",statusCancelled:"Annul",enterSaleInfo:"Saisir les informations de vente",productServiceDescription:"Description du produit ou service",subtotalExclVAT:"Sous-total (HT)",vat:"TVA",discount:"Remise",grandTotalInclVAT:"Total Gnral (TTC)",grandTotalExclVAT:"Total Gnral (HT)",createInvoiceFromSale:"Crer Facture  partir de Vente",completeInvoiceInfo:"Complter les informations de facturation",invoiceNumberAutoGenerated:"Le numro de facture est gnr automatiquement",invoiceType:"Type de Facture",productInvoice:"Facture de Produit (Normal)",selectInvoiceToReturn:"-- Slectionner la facture  retourner --",invoiceToReturn:"Facture  Retourner (obligatoire)",returnInvoiceAutoLoad:" Les produits de la facture slectionne seront automatiquement chargs avec des quantits ngatives.",issueDate:"Date d'mission",dueDate:"Date d'chance",customerName:"Nom du Compte",customerSearchPlaceholder:"Rechercher un compte ou entrer le nom d'un nouveau compte",productsAndServices:"Produits et Services",addLine:"Ajouter une Ligne",description:"Description",quantity:"Quantit",unitPriceExclVAT:"Prix Unitaire (HT)",totalInclVAT:"Total (TTC)",invoiceInfo:"Informations de Facturation",invoiceStatus:"Statut de la Facture",invoiceNotes:"Notes de Facture",invoiceTotals:"Montants de la Facture",amountExclTax:"Montant (HT)"},E4={title:"Dpenses",newExpense:"Nouvelle Dpense",deleteConfirm:"tes-vous sr de vouloir supprimer cette dpense ?",deleteSuccess:"Dpense supprime",deleteError:"Impossible de supprimer la dpense",search:"Rechercher description de dpense ou fournisseur...",filterAll:"Tous les Statuts",expensesRegistered:"dpenses enregistres",noExpenses:"Aucune dpense pour le moment",noExpensesFound:"Aucune dpense trouve",noExpensesDesc:"Commencez par enregistrer votre premire dpense.",noExpensesFoundDesc:"Aucune dpense ne correspond  vos critres de recherche.",createFirstExpense:"Crer la Premire Dpense",description:"Description",supplier:"Fournisseur",category:"Catgorie",date:"Date",amount:"Montant",status:"Statut",actions:"Actions",view:"Voir",edit:"Modifier",download:"Tlcharger",delete:"Supprimer",viewExpense:"Voir la dpense",enterExpenseDetails:"Entrez les dtails de la dpense",editExpense:"Modifier la Dpense",enterExpenseInfo:"Entrez les informations de la dpense",expenseNumber:"Numro de Dpense",expenseDate:"Date de Dpense",paymentDate:"Date de Paiement",addExpense:"Ajouter une Dpense",supplierPlaceholder:"Entrez le nom du fournisseur...",descriptionPlaceholder:"Description de la dpense...",totalExpense:"Dpense Totale",receiptUrl:"URL du Reu/Facture",receiptUrlHelper:"Vous pouvez ajouter un lien vers l'image/PDF du reu ou de la facture",exportCsv:"Exporter CSV"},D4={title:"Comptes",newCustomer:"Nouveau Compte",search:"Rechercher des comptes...",customersRegistered:"comptes enregistrs",noCustomers:"Aucun compte pour le moment",noCustomersFound:"Aucun compte trouv",noCustomersDesc:"Commencez par ajouter votre premier compte.",noCustomersFoundDesc:"Aucun compte ne correspond  vos critres de recherche.",createFirstCustomer:"Ajouter le Premier Compte",name:"Nom du compte",email:"E-mail",phone:"Tlphone",totalInvoices:"Total Factures",totalAmount:"Montant Total",actions:"Actions",importCSV:"Importer CSV/Excel",downloadTemplate:"Tlcharger Modle",address:"Adresse",emailPlaceholder:"compte@example.com",addressPlaceholder:"Informations compltes de l'adresse...",addCustomer:"Ajouter un Compte",selectFromList:"Slectionner un compte dans la liste",customersFound:"comptes trouvs",enterCustomerInfo:"Saisir les informations du compte",editCustomer:"Modifier le Compte",taxNumber:"Numro de TVA",company:"Nom de l'Entreprise",namePlaceholder:"Jean Dupont",companyPlaceholder:"Technologie ABC Ltd.",import:{noDataFound:"Aucune donne trouve dans le fichier.",noCustomersFound:"Aucun compte  importer trouv dans le fichier.",success:"{{count}} comptes imports avec succs!",error:"Une erreur s'est produite lors de l'importation."},duplicate:{title:"Email en double trouv",message:"Un compte est dj enregistr avec cet email ({{email}}) : {{name}}. Veuillez slectionner ou modifier l'enregistrement existant.",openExisting:"Ouvrir le compte existant"}},_4={title:"Fournisseurs",newSupplier:"Nouveau Fournisseur",search:"Rechercher des fournisseurs...",suppliersRegistered:"fournisseurs enregistrs",noSuppliers:"Aucun fournisseur pour le moment",noSuppliersFound:"Aucun fournisseur trouv",noSuppliersDesc:"Commencez par ajouter votre premier fournisseur.",noSuppliersFoundDesc:"Aucun fournisseur ne correspond  vos critres de recherche.",createFirstSupplier:"Ajouter le Premier Fournisseur",name:"Nom",email:"E-mail",phone:"Tlphone",totalExpenses:"Total Dpenses",totalAmount:"Montant Total",actions:"Actions",modal:{newTitle:"Ajouter un Fournisseur",editTitle:"Modifier le Fournisseur",subtitle:"Saisissez les informations du fournisseur",nameLabel:"Nom du Fournisseur",companyLabel:"Nom de la Socit",emailLabel:"E-mail",phoneLabel:"Tlphone",categoryLabel:"Catgorie",taxNumberLabel:"Numro Fiscal",addressLabel:"Adresse",namePlaceholder:"ABC Fourniture SARL",companyPlaceholder:"ABC Fourniture SAS",emailPlaceholder:"info@abcfourniture.com",phonePlaceholder:"+33 6 12 34 56 78",taxNumberPlaceholder:"Numro fiscal",addressPlaceholder:"Informations compltes d'adresse..."}},P4={title:"Comptes Bancaires",newAccount:"Nouveau Compte",search:"Rechercher nom de banque, nom de compte ou numro...",filterAll:"Tous les Comptes",accountsRegistered:"comptes enregistrs",totalBalance:"Solde total",noBanks:"Aucun compte bancaire pour le moment",noBanksFound:"Aucun compte trouv",noBanksDesc:"Commencez par ajouter votre premier compte bancaire.",noBanksFoundDesc:"Aucun compte ne correspond  vos critres de recherche.",createFirstAccount:"Ajouter le Premier Compte",bankName:"Banque",accountName:"Nom du Compte",accountNumber:"N de Compte",balance:"Solde",status:"Statut",actions:"Actions",editAccount:"Modifier le Compte",enterAccountInfo:"Saisir les informations du compte bancaire",selectBank:"Slectionner la banque",accountNamePlaceholder:"Nom de l'Entreprise ou Nom de la Personne",accountType:"Type de Compte",accountTypes:{checking:"Compte Courant",savings:"Compte d'pargne",business:"Compte Professionnel"},ibanAutoFormat:"L'IBAN sera format automatiquement",currentBalance:"Solde Actuel",currency:"Devise",accountActive:"Compte actif",addAccount:"Ajouter Compte",routingNumber:"Numro de routage (ABA)",swiftBic:"SWIFT/BIC",branchCode:"Code Agence",deleteConfirm:"Voulezvous vraiment supprimer ce compte bancaire?"},I4={title:"Paramtres",subtitle:"Grez vos paramtres systme et compte",save:"Enregistrer",cancel:"Annuler",profile:"Profil",company:"Informations de l'Entreprise",system:"Paramtres Systme",security:"Scurit",data:"Gestion des Donnes",currency:"Devise",language:"Langue",notifications:"Notifications",theme:"Thme",success:"Succs",error:"Erreur",saved:"Paramtres enregistrs",saveFailed:"Les paramtres n'ont pas pu tre enregistrs",companyFields:{officialName:"Nom Lgal de l'Entreprise",brandName:"Nom de Facture/Marque",brandNameHelper:"Ce nom apparatra comme nom de marque sur les factures et les crans publics.",officialNameTooltip:"Seul le propritaire ou un administrateur peut mettre  jour le nom lgal",officialNameOwnerOnly:"Ce champ ne peut tre modifi que par le propritaire de l'entreprise."}},M4={title:"Ventes",newSale:"Nouvelle Vente",totalSales:"Total des Ventes",totalSalesCount:"Nombre Total de Ventes",security:{twofa:{reminderTitle:"Activez l'authentification  deux facteurs",reminderDesc:"Activez la 2FA pour mieux protger votre compte.",modalTitle:"Scurisez votre compte",modalMessage:"L'authentification  deux facteurs (2FA) augmente considrablement la scurit de votre compte. Voulez-vous l'activer maintenant ?",enableNow:"Activer maintenant",neverRemind:"Ne plus rappeler"}},"common.remindMeLater":"Me le rappeler plus tard",notifications:{invoices:{overdue:{title:"Paiement facture en retard",desc:"{{invoiceNumber}} - {{customerName}} ({{daysOverdue}} jours de retard)"},upcoming:{title:"Paiement facture  venir",desc:"{{invoiceNumber}} - {{customerName}} ({{daysLeft}} jours restants)"},created:{title:"Nouvelle facture cre",desc:"Facture {{invoiceNumber}} pour {{customerName}} prte."}},expenses:{overdue:{title:"Paiement dpense en retard",desc:"{{description}} - {{supplierName}} ({{daysOverdue}} jours de retard)"},upcoming:{title:"Paiement dpense  venir",desc:"{{description}} - {{supplierName}} ({{daysLeft}} jours restants)"},created:{title:"Nouvelle dpense enregistre",desc:"{{supplierName}} - {{description}} : {{amount}}"}},products:{lowStock:{title:"Stock faible",desc:"{{name}} - stock sous le minimum ({{stock}}/{{min}})"},outOfStock:{title:"Rupture de stock",desc:"{{name}} - stock puis !"}},quotes:{expired:{title:"Devis expir",desc:"{{quoteNumber}} - expir"},dueSoon:{title:"Devis bientt expir",desc:"{{quoteNumber}} - {{diffDays}} jours restants"}},customers:{created:{title:"Nouveau compte ajout",desc:"{{name}} a t enregistr."}},suppliers:{created:{title:"Nouveau fournisseur ajout",desc:"{{name}} a t enregistr."}},sales:{created:{title:"Nouvelle vente enregistre",desc:"{{customerName}} - {{summary}} : {{totalAmount}}"}},plan:{limit:{title:"Alerte limite de forfait",invoices:{desc:"Vous approchez de la limite mensuelle de factures ({{used}}/{{limit}})."},expenses:{desc:"Vous approchez de la limite mensuelle de dpenses ({{used}}/{{limit}})."}}}},completed:"Termines",salesList:"Liste des Ventes",salesRegistered:"ventes enregistres",search:"Rechercher par numro de vente, compte ou produit...",noSales:"Aucune vente pour le moment",noSalesFound:"Aucune vente trouve",noSalesDesc:"Commencez par ajouter votre premire vente.",noSalesFoundDesc:"Aucune vente ne correspond  vos critres de recherche.",createFirstSale:"Ajouter la Premire Vente",sale:"Vente",customer:"Compte",productService:"Produit/Service",amount:"Montant",status:"Statut",date:"Date",actions:"Actions",viewSale:"Voir la vente",editSale:"Modifier la vente",deleteSale:"Supprimer la vente",deleteConfirm:"tes-vous sr de vouloir supprimer cette vente?",createInvoice:"Crer une Facture",download:"Tlcharger",subtitle:"Grez vos enregistrements de ventes",saleCompleted:"Vente Termine!",saleCompletedDesc:"La vente a t enregistre avec succs.",createInvoiceQuestion:"Souhaitez-vous crer une facture?",autoGenerated:"Gnr automatiquement",statusCompleted:"Termin",statusPending:"En attente",statusCancelled:"Annul",saleNumber:"N de Vente",saleDate:"Date de Vente",autoNumberNote:"Le numro sera gnr automatiquement lors de l'enregistrement",unitPriceInclVAT:"Prix Unitaire (TTC)",totalInclVAT:"Total (TTC)",unitPriceExclVAT:"Prix Unitaire (HT)",totalExclVAT:"Total (HT)",notesPlaceholder:"Notes supplmentaires lies  la vente",addSale:"Ajouter Vente",enterSaleInfo:"Saisir les informations de vente",saleSummary:"Rsum de la Vente",invoiceWillBeDownloaded:"Si une facture est cre, elle sera automatiquement tlcharge au format PDF.",confirmInvoiceCreation:"Crer une facture?",invoiceWillOpen:"La facture s'ouvrira dans la fentre de visualisation aprs sa cration.",recordOnlySale:"Uniquement la vente",recordSaleWithInvoice:"Vente avec facture",confirmInvoiceAction:"Oui, crer",creatingInvoice:"Cration...",selectExistingSale:"Slectionner une Vente Existante",selectSaleForInvoice:"Slectionnez une vente pour crer une facture",searchSalesPlaceholder:"Rechercher par numro de vente, compte ou produit...",noInvoiceableSales:"Aucune vente facturable trouve",changeSearchCriteria:"Essayez de modifier vos critres de recherche",allSalesInvoiced:"Toutes les ventes ont t factures",pieces:"pcs",saleInfo:"Informations de Vente",salesWaitingForInvoice:"Ventes en attente de facturation : {{count}}"},R4={method:"Mthode de Paiement",cash:"Espces",card:"Carte Bancaire",transfer:"Virement",check:"Chque"},z4={title:"Rapports",subtitle:"Rapports d'analyse dtaills de votre entreprise",reportDate:"Date du Rapport",overview:"Vue d'Ensemble",basicMetrics:"Mtriques de Base",totalIncome:"Revenu Total",totalExpense:"Dpense Totale",netProfit:"Bnfice Net",totalCustomers:"Total Comptes",net:"Net",financialHealth:"Sant Financire",profitMargin:"Marge Bnficiaire",growthRate:"Taux de Croissance",averageSale:"Vente Moyenne",activeCustomers:"Comptes actifs",paymentStatusAnalysis:"Analyse du Statut de Paiement",invoiceStatuses:"Statuts des Factures",expenseStatuses:"Statuts des Dpenses",vatAnalysis:"Analyse TVA",vatAnalysisSubtitle:"Suivez la TVA due sur vos factures payes",currentYearLabel:"Anne en cours ({{year}})",vatYearToDate:"TVA cumule depuis le dbut de l'anne",vatChangeVsLastYear:"{{percent}} vs anne prcdente ({{lastYear}})",vatThisMonth:"TVA ce mois-ci",vatChangeVsPreviousMonth:"{{percent}} vs mois prcdent ({{previous}})",vatAverageSixMonths:"TVA moy. (6 mois)",vatAverageHint:"Moyenne glissante des 6 derniers mois de TVA paye",vatMonthlyBreakdown:"Rpartition mensuelle de la TVA",lastMonthsPerformance:"{{count}} derniers mois",noVatData:"Aucune donne TVA pour le moment",revenueAnalysis:"Analyse des Revenus",productBasedSales:"Ventes par Produit",sales:"ventes",avg:"Moy",monthlyRevenueTrend:"Tendance des Revenus Mensuels",expenseAnalysis:"Analyse des Dpenses",categoryBasedExpenses:"Dpenses par Catgorie",expenses:"dpenses",monthlyExpenseTrend:"Tendance des Dpenses Mensuelles",topSuppliers:"Principaux Fournisseurs par Dpense",lastExpense:"Dernier",recentExpenses:"Dpenses Rcentes",expenseCategoryDistribution:"Distribution des Catgories de Dpenses",customerAnalysis:"Analyse des Comptes",topCustomers:"Meilleurs Comptes",purchases:"achats",last:"Dernier",customerStatistics:"Statistiques des Comptes",activeCustomersCount:"Comptes actifs",revenuePerCustomer:"Revenu par Compte",salesPerCustomer:"Ventes par Compte",averagePurchases:"Achats Moyens",maxPurchases:"Achats Maximum",performanceReports:"Rapports de Performance",kpiDashboard:"Tableau de Bord KPI",increase:"Augmentation",decrease:"Diminution",monthlyPerformanceTable:"Tableau de Performance Mensuelle",total6Months:"Total (6 Mois)",totalIncome6Months:"Revenu Total (6 Mois)",totalExpense6Months:"Dpenses Totales (6 Mois)",netProfit6Months:"Bnfice Net (6 Mois)",month:"Mois",profit:"Bnfice",profitMarginPercent:"Marge Bnficiaire",expenseRatio:"Ratio de Dpenses",expenseEfficiency:"Analyse de l'Efficacit des Dpenses",expenseCategoryPerformance:"Performance des Catgories de Dpenses",noSupplier:"Aucun Fournisseur",noCustomer:"Aucun Compte",last6MonthsPerformance:"Performances des 6derniers mois (du plus rcent au plus ancien)",quoteAnalysis:"Analyse des Devis",quoteStatuses:"Statuts des Devis",totalQuotes:"Total Devis",acceptedRate:"Taux d'Acceptation",averageQuote:"Devis Moyen",expiringSoon:"Expire Bientt",recentQuotes:"Devis Rcents",daysLeft:"Jours Restants",quotes:"devis"},L4={totalCredit:"Crdit Total",totalDebit:"Dbit Total",netBalance:"Solde Net",entry:{invoicePrefix:"Facture",expensePrefix:"Dpense",salePrefix:"Vente Directe"}},O4={equipment:"quipement",utilities:"Services publics",rent:"Loyer",salaries:"Salaires",personnel:"Personnel",supplies:"Fournitures",marketing:"Marketing",travel:"Voyage",insurance:"Assurance",taxes:"Taxes",other:"Autre"},F4={title:"Archive",subtitle:"Vos enregistrements termins et historiques",totalArchive:"Archive Totale",archivedInvoices:"Factures Archives",archivedExpenses:"Dpenses Archives",archivedSales:"Ventes Archives",totalContacts:"Contacts Totaux",searchPlaceholder:"Rechercher dans l'archive...",clearFilters:"Effacer les Filtres",tabs:{all:"Tout",invoices:"Factures",expenses:"Dpenses",sales:"Ventes",contacts:"Contacts"},sections:{archivedInvoices:"Factures Archives",archivedExpenses:"Dpenses Archives",archivedSales:"Ventes Archives",customers:"Comptes",suppliers:"Fournisseurs",archiveSummary:"Rsum de l'Archive"},empty:{invoices:"Aucune facture archive",invoicesHelper:"Les factures payes ou en retard apparatront ici",expenses:"Aucune dpense archive",expensesHelper:"Les dpenses payes apparatront ici",sales:"Aucune vente archive",salesHelper:"Les ventes termines apparatront ici",customers:"Aucun compte trouv",suppliers:"Aucun fournisseur trouv"},table:{invoice:"Facture",customer:"Compte",amount:"Montant",status:"Statut",date:"Date",actions:"Actions",expense:"Dpense",supplier:"Fournisseur",category:"Catgorie",sale:"Vente",product:"Produit/Service",registered:"Enregistr"},actions:{view:"Voir",download:"Tlcharger"},summary:{financial:"Rsum Financier",totalIncome:"Revenu Archiv Total",totalExpense:"Dpenses Archives Totales",netArchive:"Archive Nette",recordCounts:"Nombre d'Enregistrements"},info:{title:" Propos de l'Archive",description:"La page d'archive stocke vos transactions termines. Les factures payes, les dpenses approuves et les ventes termines sont automatiquement listes ici. Ces enregistrements sont en lecture seule et peuvent tre utiliss pour l'analyse historique et  des fins d'audit."}},B4={required:"Ce champ est requis",invalidEmail:"Adresse e-mail invalide",invalidPhone:"Numro de tlphone invalide",minLength:"Longueur minimale {{min}} caractres",maxLength:"Longueur maximale {{max}} caractres",invalidNumber:"Numro invalide",categoryRequired:"Veuillez slectionner une catgorie",dueDateRequired:"Veuillez slectionner une date d'chance",saleDateRequired:"La date de vente est requise",unitPriceRequired:"Le prix unitaire doit tre suprieur  zro",quantityRequired:"La quantit doit tre suprieure  zro",customerNameRequired:"Le nom du compte est requis",customerNotFound:"Compte non trouv dans le systme. Veuillez slectionner dans la liste.",productNameRequired:"Le nom du produit ou service est requis",productNotFound:"Produit non trouv dans le systme. Veuillez slectionner dans la liste.",skuRequired:"SKU est requis",validPriceRequired:"Veuillez entrer un prix valide",validStockRequired:"Veuillez entrer une quantit de stock valide",descriptionRequired:"Veuillez saisir une description",amountRequired:"Veuillez saisir un montant valide"},U4=JSON.parse(`{"terms":{"title":"Conditions d'utilisation","lastUpdated":"Dernire mise  jour : {{date}}","section1":{"title":"1. Prsentation du service","content":"Comptario est une plateforme logicielle de pr-comptabilit base sur le cloud conue pour aider les entreprises  grer leurs factures, dpenses et oprations financires. La plateforme offre un support multi-devises, des calculs de TVA automatiss et des outils de reporting intgrs."},"section2":{"title":"2. Comptes utilisateur et inscription","content":"Pour utiliser Comptario, vous devez crer un compte en fournissant des informations exactes et compltes. Vous tes responsable du maintien de la confidentialit de vos identifiants de compte et de toutes les activits qui se produisent sous votre compte."},"section3":{"title":"3. Utilisation acceptable","content":"Vous acceptez d'utiliser Comptario uniquement  des fins lgales et conformment  ces Conditions. Vous ne pouvez pas utiliser le service pour vous engager dans des activits illgales, violer les droits de proprit intellectuelle ou perturber la fonctionnalit de la plateforme."},"section4":{"title":"4. Proprit des donnes et confidentialit","content":"Vous conservez la proprit de toutes les donnes que vous saisissez dans Comptario. Nous traitons vos donnes conformment  notre Politique de Confidentialit et aux lois applicables sur la protection des donnes, y compris le RGPD. Nous mettons en place des mesures de scurit appropries pour protger vos informations."},"section5":{"title":"5. Disponibilit du service","content":"Bien que nous nous efforcions de maintenir un temps de fonctionnement de 99,9%, Comptario peut connatre des interruptions de service occasionnelles pour la maintenance, les mises  jour ou des problmes techniques imprvus. Nous fournirons un pravis pour la maintenance planifie chaque fois que possible."},"section6":{"title":"6. Abonnement et facturation","content":"Comptario propose divers plans d'abonnement avec diffrentes fonctionnalits et limites d'utilisation. La facturation est traite automatiquement selon votre plan choisi. Vous pouvez mettre  niveau, rtrograder ou annuler votre abonnement  tout moment."},"section7":{"title":"7. Sauvegarde et exportation des donnes","content":"Nous effectuons des sauvegardes automatises rgulires de vos donnes. Vous pouvez exporter vos donnes  tout moment dans des formats standard.  la rsiliation du compte, nous conserverons vos donnes pendant 90 jours avant la suppression permanente, sauf si la loi l'exige autrement."},"section8":{"title":"8. Limitation de responsabilit","content":"La responsabilit de Comptario est limite au montant que vous avez pay pour le service dans les 12 mois prcdant toute rclamation. Nous ne sommes pas responsables des dommages indirects, accessoires ou conscutifs."},"section9":{"title":"9. Proprit intellectuelle","content":"La plateforme Comptario, y compris son logiciel, sa conception et son contenu, est protge par les lois sur la proprit intellectuelle. Une licence limite vous est accorde pour utiliser le service selon ces Conditions."},"section10":{"title":"10. Rsiliation","content":"Chaque partie peut rsilier cet accord  tout moment.  la rsiliation, votre accs au service cessera et nous supprimerons vos donnes selon notre politique de conservation des donnes."},"section11":{"title":"11. Droit applicable","content":"Ces Conditions sont rgies par les lois de l'Union europenne et la juridiction o Comptario opre. Tous les litiges seront rsolus par arbitrage contraignant."},"section12":{"title":"12. Modifications des conditions","content":"Nous pouvons mettre  jour ces Conditions de temps  autre. Nous vous informerons des changements importants par e-mail ou via la plateforme. L'utilisation continue de Comptario aprs les changements constitue l'acceptation des nouvelles Conditions."}},"privacy":{"title":"Politique de confidentialit","lastUpdated":"Dernire mise  jour : {{date}}","section1":{"title":"1. Informations que nous collectons","content":"Nous collectons les informations que vous fournissez directement (dtails de compte, donnes financires), les informations collectes automatiquement (donnes d'utilisation, adresses IP) et les informations de tiers (processeurs de paiement, intgrations)."},"section2":{"title":"2. Comment nous utilisons vos informations","content":"Nous utilisons vos informations pour fournir et amliorer nos services, traiter les paiements, communiquer avec vous, assurer la scurit et respecter les obligations lgales."},"section3":{"title":"3. Partage d'informations","content":"Nous ne vendons ni ne louons vos informations personnelles. Nous pouvons partager des informations avec des prestataires de services, pour la conformit lgale ou avec votre consentement explicite."},"section4":{"title":"4. Scurit des donnes","content":"Nous mettons en place des mesures de scurit standard de l'industrie, y compris le chiffrement en transit et au repos, des audits de scurit rguliers, des contrles d'accs et des centres de donnes scuriss."},"section5":{"title":"5. Vos droits (RGPD)","content":"Sous le RGPD, vous avez le droit d'accder, de rectifier, d'effacer, de restreindre le traitement, de portabilit des donnes et de vous opposer au traitement de vos donnes personnelles. Vous pouvez galement retirer votre consentement et dposer des plaintes auprs des autorits de contrle."},"section6":{"title":"6. Conservation des donnes","content":"Nous conservons vos donnes tant que votre compte est actif et pendant une priode raisonnable par la suite  des fins lgales et commerciales. Vous pouvez demander la suppression des donnes  tout moment."},"section7":{"title":"7. Transferts internationaux","content":"Vos donnes sont principalement traites au sein de l'UE. Tous les transferts internationaux sont protgs par des garanties appropries telles que les Clauses Contractuelles Types."},"section8":{"title":"8. Cookies et suivi","content":"Nous utilisons des cookies et des technologies similaires pour l'authentification, les prfrences, l'analytique et la scurit. Vous pouvez contrler les paramtres des cookies via votre navigateur."},"section9":{"title":"9. Services tiers","content":"Notre plateforme peut s'intgrer avec des services tiers. Leurs pratiques de confidentialit sont rgies par leurs propres politiques de confidentialit, que nous vous encourageons  examiner."},"section10":{"title":"10. Confidentialit des enfants","content":"Comptario n'est pas destin aux utilisateurs de moins de 18 ans. Nous ne collectons pas sciemment d'informations personnelles d'enfants de moins de 18 ans."},"section11":{"title":"11. Informations de contact","content":"Pour les questions lies  la confidentialit ou pour exercer vos droits, contactez notre Dlgu  la Protection des Donnes  privacy@comptario.com ou via notre portail de support."}},"cookies":{"title":"Politique de cookies","lastUpdated":"Dernire mise  jour : {{date}}","section1":{"title":"1. Que sont les cookies","content":"Les cookies sont de petits fichiers texte stocks sur votre appareil lorsque vous visitez notre site web. Ils nous aident  vous offrir une meilleure exprience en se souvenant de vos prfrences et en analysant l'utilisation du site."},"section2":{"title":"2. Types de cookies que nous utilisons","content":"Nous utilisons des cookies essentiels (ncessaires pour la fonctionnalit de base), des cookies fonctionnels (se souviennent des prfrences), des cookies d'analyse (comprennent les modles d'utilisation) et des cookies de scurit (protection contre les menaces)."},"section3":{"title":"3. Cookies essentiels","content":"Ces cookies sont ncessaires au bon fonctionnement du site web. Ils permettent des fonctionnalits de base telles que l'authentification utilisateur, la gestion de session et les fonctionnalits de scurit. Ils ne peuvent pas tre dsactivs."},"section4":{"title":"4. Cookies fonctionnels","content":"Ces cookies se souviennent de vos prfrences et choix pour fournir des fonctionnalits amliores, telles que la slection de langue, les paramtres de fuseau horaire et les personnalisations d'interface utilisateur."},"section5":{"title":"5. Cookies d'analyse","content":"Nous utilisons des cookies d'analyse pour comprendre comment les visiteurs interagissent avec notre site web. Cela nous aide  amliorer nos services et l'exprience utilisateur. Toutes les donnes d'analyse sont agrges et anonymises."},"section6":{"title":"6. Cookies tiers","content":"Certains cookies sont dfinis par des services tiers que nous utilisons, tels que les fournisseurs d'analyse ou les processeurs de paiement. Ceux-ci sont rgis par les politiques de confidentialit respectives des tiers."},"section7":{"title":"7. Dure des cookies","content":"Les cookies de session sont supprims lorsque vous fermez votre navigateur. Les cookies persistants restent sur votre appareil pendant une priode dfinie ou jusqu' ce que vous les supprimiez manuellement."},"section8":{"title":"8. Gestion des cookies","content":"Vous pouvez contrler et grer les cookies via les paramtres de votre navigateur. Vous pouvez supprimer les cookies existants et configurer votre navigateur pour accepter ou rejeter les cookies. Notez que la dsactivation des cookies peut affecter la fonctionnalit du site web."},"section9":{"title":"9. Consentement aux cookies","content":"En utilisant notre site web, vous consentez  l'utilisation de cookies comme dcrit dans cette politique. Vous pouvez retirer votre consentement  tout moment en ajustant les paramtres de votre navigateur."},"section10":{"title":"10. Mises  jour de la politique de cookies","content":"Nous pouvons mettre  jour cette Politique de Cookies de temps  autre. Nous vous informerons des changements importants en publiant la politique mise  jour sur notre site web avec une nouvelle date d'entre en vigueur."}},"dpa":{"title":"Accord de traitement des donnes (DPA)","lastUpdated":"Dernire mise  jour : {{date}}","section1":{"title":"1. Dfinitions et porte","content":"Cet Accord de Traitement des Donnes (\\"DPA\\") fait partie des Conditions d'Utilisation entre vous (\\"Responsable du traitement\\") et Comptario (\\"Sous-traitant\\"). Il rgit le traitement des donnes personnelles conformment au RGPD et autres lois applicables sur la protection des donnes."},"section2":{"title":"2. Dtails du traitement des donnes","content":"Comptario traite les donnes personnelles uniquement sur instructions documentes du Responsable du traitement, aux fins de fournir les services de logiciel comptable, et conformment aux lois applicables sur la protection des donnes."},"section3":{"title":"3. Catgories de donnes","content":"Nous traitons les catgories suivantes de donnes personnelles : informations de contact (noms, adresses, e-mails), donnes financires (factures, paiements, transactions), donnes de compte utilisateur (identifiants de connexion, prfrences) et donnes d'utilisation (journaux d'accs, analyse)."},"section4":{"title":"4. Droits des personnes concernes","content":"Comptario aide le Responsable du traitement  satisfaire les demandes de droits des personnes concernes, y compris l'accs, la rectification, l'effacement, la restriction, la portabilit et l'objection. Nous fournissons les outils ncessaires et la coopration pour permettre la conformit."},"section5":{"title":"5. Mesures de scurit","content":"Nous mettons en place des mesures techniques et organisationnelles appropries pour assurer la scurit des donnes, y compris le chiffrement, les contrles d'accs, les valuations de scurit rgulires, la formation du personnel et les procdures de rponse aux incidents."},"section6":{"title":"6. Sous-traitants ultrieurs","content":"Comptario peut engager des sous-traitants ultrieurs pour aider  fournir des services. Tous les sous-traitants ultrieurs sont soumis  des obligations de protection des donnes quivalentes  celles de ce DPA. Une liste actuelle des sous-traitants ultrieurs est disponible sur demande."},"section7":{"title":"7. Transferts de donnes","content":"Les donnes personnelles sont principalement traites au sein de l'UE/EEE. Tous les transferts vers des pays tiers sont protgs par des garanties appropries telles que les Clauses Contractuelles Types ou les dcisions d'adquation."},"section8":{"title":"8. Notification de violation de donnes","content":"Comptario notifiera le Responsable du traitement de toute violation de donnes personnelles sans dlai injustifi et dans les 72 heures aprs avoir pris connaissance de la violation, fournissant toutes les informations pertinentes pour l'valuation et les obligations de signalement."},"section9":{"title":"9. Analyse d'impact sur la protection des donnes","content":"Sur demande, Comptario fournira une assistance raisonnable au Responsable du traitement pour effectuer des Analyses d'Impact sur la Protection des Donnes (AIPD) et des consultations pralables avec les autorits de contrle."},"section10":{"title":"10. Audit et conformit","content":"Comptario maintient des registres des activits de traitement et met  disposition du Responsable du traitement les informations ncessaires pour dmontrer la conformit aux obligations de protection des donnes, y compris les droits d'audit soumis aux obligations de confidentialit."},"section11":{"title":"11. Retour et suppression des donnes","content":" la fin des services, Comptario, au choix du Responsable du traitement, retournera ou supprimera toutes les donnes personnelles et copies existantes, sauf si la conservation est requise par la loi applicable."},"section12":{"title":"12. Responsabilit et indemnisation","content":"La responsabilit de chaque partie est limite aux dommages directement causs par sa violation de ce DPA. Comptario indemnisera le Responsable du traitement contre les rclamations rsultant de la violation par Comptario de ses obligations de protection des donnes."}},"subprocessors":{"title":"Liste des sous-traitants ultrieurs","lastUpdated":"Dernire mise  jour : {{date}}","intro":"Comptario peut engager les sous-traitants ultrieurs suivants pour aider  fournir nos services. Tous les sous-traitants ultrieurs sont soumis  des obligations strictes de protection des donnes.","section1":{"title":"1. Fournisseurs d'infrastructure cloud","aws":{"name":"Amazon Web Services (AWS)","location":"UE (Francfort)","purpose":"Services d'hbergement cloud et d'infrastructure","safeguards":"Conformit RGPD AWS, Rsidence de donnes UE"},"digitalocean":{"name":"DigitalOcean","location":"UE (Amsterdam)","purpose":"Services d'hbergement cloud et de sauvegarde supplmentaires","safeguards":"Clauses Contractuelles Types, hbergement UE"}},"section2":{"title":"2. Processeurs de paiement","stripe":{"name":"Stripe","location":"UE/US","purpose":"Traitement des paiements et gestion des abonnements","safeguards":"Conformit PCI DSS, Clauses Contractuelles Types"},"paypal":{"name":"PayPal","location":"UE/US","purpose":"Traitement de paiement alternatif","safeguards":"Conformit PCI DSS, successeur Privacy Shield"}},"section3":{"title":"3. Services de communication","sendgrid":{"name":"SendGrid (Twilio)","location":"UE/US","purpose":"Livraison d'e-mails transactionnels","safeguards":"Clauses Contractuelles Types, traitement UE"},"intercom":{"name":"Intercom","location":"UE/US","purpose":"Support et communication","safeguards":"Clauses Contractuelles Types, conformit RGPD"}},"section4":{"title":"4. Services d'analyse et de surveillance","googleanalytics":{"name":"Google Analytics","location":"UE/US","purpose":"Analyse de site web et surveillance des performances","safeguards":"Google Analytics 4 avec traitement de donnes UE"},"sentry":{"name":"Sentry","location":"UE/US","purpose":"Surveillance des erreurs et performances d'application","safeguards":"Clauses Contractuelles Types, anonymisation des donnes"}},"section5":{"title":"5. Services de scurit","cloudflare":{"name":"Cloudflare","location":"Global (nuds UE)","purpose":"CDN, protection DDoS et services de scurit","safeguards":"Localisation des donnes UE, Clauses Contractuelles Types"}},"section6":{"title":"6. Services de sauvegarde et d'archivage","backblaze":{"name":"Backblaze","location":"UE","purpose":"Services de sauvegarde et d'archivage de donnes","safeguards":"Chiffrement au repos et en transit, hbergement UE"}},"notifications":{"title":"Notifications de changement de sous-traitants ultrieurs","content":"Nous fournirons un pravis de 30 jours pour tout nouveau sous-traitant ultrieur ou changement aux existants. Vous pouvez vous opposer  de tels changements, et si nous ne pouvons pas rsoudre vos proccupations, vous pouvez rsilier votre accord avec nous."},"contact":{"title":"Questions sur les sous-traitants ultrieurs","content":"Si vous avez des questions sur nos sous-traitants ultrieurs ou avez besoin d'informations supplmentaires sur les garanties de protection des donnes, veuillez nous contacter  privacy@comptario.com."}},"common":{"backToApp":" Retour  l'app","effectiveDate":"Date d'entre en vigueur","tableOfContents":"Table des matires","printPage":"Imprimer cette page","downloadPdf":"Tlcharger PDF","lastUpdated":"Dernire mise  jour","contactUs":"Contactez-nous ","questionsContact":"Si vous avez des questions sur ces {{document}}, veuillez nous contacter  {{email}}.","documentType":{"terms":"Conditions d'utilisation","privacy":"Politique de confidentialit","cookies":"Politique de cookies","dpa":"Accord de traitement des donnes","subprocessors":"Liste des sous-traitants ultrieurs"},"navigation":{"terms":"Conditions","privacy":"Confidentialit","cookies":"Cookies","dpa":"ATD","subprocessors":"Sous-traitants"}}}`),V4={banner:{title:"Prfrences de cookies",description:"Ce site web utilise des cookies pour amliorer votre exprience. Vous pouvez choisir quels cookies autoriser.",acceptAll:"Tout accepter",rejectAll:"Tout rejeter",managePreferences:"Grer les prfrences",savePreferences:"Enregistrer les prfrences",close:"Fermer"},modal:{title:"Prfrences de cookies",description:"Vous pouvez examiner les catgories de cookies et dfinir vos prfrences. Lisez la description de chaque catgorie pour dcider quels cookies autoriser.",necessary:{title:"Cookies ncessaires",description:"Ces cookies sont essentiels au bon fonctionnement du site web et ne peuvent pas tre dsactivs. Ils sont gnralement dfinis en rponse  des actions comme la connexion ou le remplissage de formulaires.",alwaysActive:"Toujours actif"},analytics:{title:"Cookies analytiques",description:"Ces cookies nous aident  comprendre comment le site web est utilis. Ils collectent des informations sur les pages les plus visites et comment les utilisateurs naviguent sur le site.",enabled:"Activ",disabled:"Dsactiv"},marketing:{title:"Cookies marketing",description:"Ces cookies sont utiliss pour vous montrer des publicits plus pertinentes. Ils peuvent aider nos partenaires publicitaires  crer un profil de vos intrts.",enabled:"Activ",disabled:"Dsactiv"},acceptSelected:"Accepter la slection",acceptAll:"Tout accepter",rejectAll:"Tout rejeter",cancel:"Annuler"},notice:{updated:"Vos prfrences de cookies ont t mises  jour.",saved:"Prfrences de cookies enregistres."},categories:{necessary:"Ncessaires",analytics:"Analytiques",marketing:"Marketing"}},q4={title:"Priodes Fiscales",subtitle:"Grez vos paramtres de priode fiscale",newPeriod:"Nouvelle Priode",search:"Rechercher des priodes...",periodsRegistered:"priodes enregistres",noPeriods:"Aucune priode fiscale encore",noPeriodsFound:"Aucune priode fiscale trouve",noPeriodsDesc:"Commencez par crer votre premire priode fiscale.",noPeriodsFoundDesc:"Aucune priode fiscale ne correspond  vos critres de recherche.",createFirstPeriod:"Crer la Premire Priode Fiscale",periodName:"Nom de la Priode",startDate:"Date de Dbut",endDate:"Date de Fin",status:"Statut",actions:"Actions",view:"Voir",edit:"Modifier",lock:"Verrouiller",unlock:"Dverrouiller",delete:"Supprimer",viewPeriod:"Voir la priode fiscale",editPeriod:"Modifier la Priode Fiscale",addPeriod:"Ajouter une Priode Fiscale",enterPeriodInfo:"Entrez les informations de la priode fiscale",periodNamePlaceholder:"ex: Anne 2024",periodDuration:"dure de la priode",days:"jours",locked:"Verrouille",active:"Actif",planned:"Planifie",statusLabels:{active:"Actif",locked:"Verrouille",planned:"Planifie"},lockPeriod:"Verrouiller la priode fiscale",unlockPeriod:"Dverrouiller la priode fiscale",lockConfirm:"tes-vous sr de vouloir verrouiller cette priode fiscale ? Les priodes verrouilles ne peuvent pas tre modifies.",unlockConfirm:"tes-vous sr de vouloir dverrouiller cette priode fiscale ?",deleteConfirm:"tes-vous sr de vouloir supprimer cette priode fiscale ?",validation:{nameRequired:"Le nom de la priode est requis",startDateRequired:"La date de dbut est requise",endDateRequired:"La date de fin est requise",endDateAfterStart:"La date de fin doit tre postrieure  la date de dbut",periodOverlap:"Ces dates se chevauchent avec une priode existante",minimumDuration:"La priode fiscale doit durer au moins 1 jour"},errors:{createFailed:"chec de la cration de la priode fiscale",updateFailed:"chec de la mise  jour de la priode fiscale",deleteFailed:"chec de la suppression de la priode fiscale",lockFailed:"chec du verrouillage de la priode fiscale",unlockFailed:"chec du dverrouillage de la priode fiscale",loadFailed:"chec du chargement des priodes fiscales",periodLocked:"Cette priode fiscale est verrouille et ne peut pas tre modifie",periodNotFound:"Priode fiscale introuvable",operationNotAllowed:"Cette opration n'est pas autorise pour une priode fiscale verrouille"},success:{created:"Priode fiscale cre avec succs",updated:"Priode fiscale mise  jour avec succs",deleted:"Priode fiscale supprime avec succs",locked:"Priode fiscale verrouille avec succs",unlocked:"Priode fiscale dverrouille avec succs"},widget:{title:"Priodes Fiscales",activePeriod:"Priode Active",totalPeriods:"Total des Priodes",lockedPeriods:"Priodes Verrouilles",daysRemaining:"Jours Restants",noActivePeriod:"Aucune priode active",periodsOverlapping:"Priodes qui se chevauchent",allPeriodsLocked:"Toutes les priodes sont verrouilles",createActivePeriod:"Crer une priode active",managePeriods:"Grer les Priodes",warnings:{overlapping:"Certaines priodes fiscales se chevauchent",noActive:"Aucune priode fiscale active actuellement",allLocked:"Toutes les priodes fiscales sont verrouilles"}},filters:{showVoided:"Afficher les annuls",hideVoided:"Masquer les annuls",voidedRecords:"enregistrements annuls"}},$4={members:{title:"Membres de l'Organisation",subtitle:"Grez vos membres d'organisation et leurs permissions",search:"Rechercher des membres...",membersCount:"membres",member:"Membre",email:"Email",role:"Rle",statusLabel:"Statut",actions:"Actions",inviteButton:"Envoyer l'Invitation",sending:"Envoi en cours...",table:{name:"Nom",email:"Email",role:"Rle",lastLogin:"Dernire connexion",joinedAt:"Date d'Adhsion",actions:"Actions"},edit:"Modifier",cancel:"Annuler",resend:"Renvoyer",makeAdmin:"Faire Administrateur",makeMember:"Faire Membre",empty:{title:"Aucun membre pour le moment",subtitle:"Commencez par inviter votre premier membre d'quipe.",action:"Inviter un Membre"},noMembers:"Aucun membre pour le moment",noMembersDesc:"Commencez par inviter votre premier membre d'quipe.",noPendingInvites:"Aucune invitation en attente",noPendingInvitesDesc:"Toutes les invitations ont t acceptes ou ont expir.",roles:{owner:"Propritaire",admin:"Administrateur",member:"Membre",viewer:"Observateur",OWNER:"Propritaire",ADMIN:"Administrateur",MEMBER:"Membre"},status:{active:"Actif",pending:"En attente",inactive:"Inactif"},permissions:{owner:"Accs complet  toutes les fonctionnalits et paramtres",admin:"Accs complet sauf facturation et suppression d'organisation",member:"Crer et modifier les factures, dpenses, comptes",viewer:"Accs en lecture seule  toutes les donnes"},confirmRemove:"tes-vous sr de vouloir supprimer ce membre ?",confirmCancel:"tes-vous sr de vouloir annuler cette invitation ?",inviteSuccess:"Invitation envoye avec succs",inviteError:"chec de l'envoi de l'invitation",removeSuccess:"Membre supprim avec succs",removeError:"chec de la suppression du membre",updateSuccess:"Membre mis  jour avec succs",updateError:"chec de la mise  jour du membre",validation:{emailRequired:"L'email est requis",emailInvalid:"Veuillez entrer une adresse email valide",emailExists:"Cet email est dj invit ou est dj membre"},tryAgain:"Ressayer",organization:"Organisation",membersLabel:"Membres",plan:"Offre",youLabel:"Vous",limitFull:"Limite atteinte",invite:{title:"Inviter un Membre",button:"Envoyer l'Invitation",limitReached:"Limite du plan atteinte. Amliorez votre plan pour inviter plus de membres.",success:"Invitation envoye avec succs",error:"chec de l'envoi de l'invitation",duplicate:"Cet email est dj invit",form:{email:"Adresse Email",emailPlaceholder:"exemple@email.com",role:"Rle"}},pendingInvites:{title:"Invitations en attente",count:"{{count}} invitations en attente",resend:"Renvoyer",cancel:"Annuler",expires:"Expire le {{date}}",cancelConfirm:"Voulezvous annuler cette invitation?",resendSuccess:"Invitation renvoye avec succs",cancelSuccess:"Invitation annule avec succs"},remove:{title:"Retirer le Membre",message:"tes-vous sr de vouloir retirer {{name}} de l'organisation ?",warning:"Cette action est irrversible.",confirm:"Oui, Retirer",cancel:"Annuler",success:"Membre retir avec succs",error:"chec du retrait du membre",cannotRemoveOwner:"Le propritaire ne peut pas tre retir"},updateRole:{success:"Rle du membre mis  jour",error:"chec de la mise  jour du rle du membre"}},join:{title:"Rejoindre l'organisation",subtitle:"Vous avez t invit  rejoindre {{orgName}}",invitedBy:"Invit par {{name}}",role:"Rle : {{role}}",accept:"Accepter l'invitation",decline:"Refuser",expired:{title:"Invitation expire",subtitle:"Ce lien d'invitation a expir",action:"Demander une nouvelle invitation"},invalid:{title:"Invitation invalide",subtitle:"Ce lien d'invitation n'est pas valide",action:"Aller  l'accueil"},success:{title:"Bienvenue !",subtitle:"Vous avez rejoint {{orgName}} avec succs",action:"Ouvrir le tableau de bord"},error:{title:"Erreur",subtitle:"Une erreur est survenue pendant l'acceptation",tryAgain:"Ressayer"},alreadyMember:{title:"Dj membre",subtitle:"Vous faites dj partie de cette organisation",action:"Aller au tableau de bord"},details:{organizationLabel:"Organisation",emailLabel:"E-mail invit",expiresLabel:"Expire le",roleLabel:"Rle"},passwordFlow:{title:"Dfinissez votre mot de passe",description:"Dfinissez un mot de passe pour crer votre compte pour {{email}}. Aucune vrification par e-mail n'est requise.",passwordLabel:"Mot de passe",passwordPlaceholder:"Au moins 6 caractres",showPassword:"Afficher",hidePassword:"Masquer",submit:"Crer le compte et rejoindre",submitting:"Enregistrement...",toastSuccess:"Invitation accepte. Bienvenue !"},loadingState:{title:"Vrification de l'invitation...",subtitle:"Merci de patienter pendant la validation de votre invitation."},guestFallback:{loading:"Invitation invalide ou chargement en cours..."},emailMismatch:{title:"Avertissement",body:"Cette invitation a t envoye  {{inviteEmail}}, mais vous tes connect en tant que {{currentEmail}}.",loginAction:"Se connecter en tant que {{inviteEmail}}",registerAction:"S'inscrire en tant que {{inviteEmail}}"},accepting:"Rejoindre..."}},H4={invoice:{title:"FACTURE",appSubtitle:"Systme Comptable comptario",customerInfo:"Informations Compte",invoiceNumber:"N de Facture",issueDate:"Date dmission",dueDate:"Date dchance",status:"Statut",items:{description:"Description",quantity:"Quantit",unitPrice:"Prix Unitaire",total:"Total"},totals:{subtotal:"Sous-total",tax:"TVA",grandTotal:"Total Gnral"},footer:"Cette facture a t gnre avec comptario.",statusLabels:{paid:"Paye",sent:"Envoye",overdue:"En retard",draft:"Brouillon"}},expense:{title:"JUSTIFICATIF DE DPENSE",supplierInfo:"Informations Fournisseur",expenseNumber:"N de Dpense",expenseDate:"Date de Dpense",paymentDate:"Date de Paiement",status:"Statut",category:"Catgorie",details:"Dtails de la Dpense",totalAmount:"Montant Total des Dpenses",footer:"Ce justificatif a t gnr avec comptario.",statusLabels:{draft:"Brouillon",approved:"Approuve",paid:"Paye"}},sale:{title:"JUSTIFICATIF DE VENTE",customerInfo:"Informations Compte",saleNumber:"N de Vente",saleDate:"Date de Vente",status:"Statut",paymentMethod:"Moyen de Paiement",details:"Dtails du Produit/Service",quantity:"Quantit",unitPrice:"Prix Unitaire",totalAmount:"Montant Total de la Vente",footer:"Ce justificatif de vente a t gnr avec comptario.",statusLabels:{completed:"Termin",pending:"En attente",cancelled:"Annul"},paymentMethods:{cash:"Espces",card:"Carte",transfer:"Virement",check:"Chque"}},planTab:{header:{title:"Abonnement et Facturation",subtitle:"Grez votre abonnement, priode de facturation et siges"},managePayments:"Grer les paiements",monthly:"Mensuel",yearly:"Annuel",yearlyNote:"2 mois offerts",currentPlan:{label:"Offre actuelle",seatsInUse:"Siges utiliss",renewalDate:"Date de renouvellement",cancellationDate:"Date dannulation",cancelAtPeriodEndNotice:"Votre abonnement sera annul en fin de priode."},changePlan:"Changer doffre",plans:{labels:{professional:"Pro",enterprise:"Business",free:"Gratuit"},bullets:{proIncluded:"3 utilisateurs inclus",basicAutomations:"Automatisations de base",businessIncluded:"10 utilisateurs inclus",advancedAutomations:"Automatisations avances et rles",freeLimited:"Fonctionnalits et factures limites"}},prices:{monthly:{free:"0/mois",pro:"29/mois",enterprise:"59/mois"}},configuration:"Configuration",billingCycle:"Cycle de facturation",seatsAddon:"Siges supplmentaires",seatsAddonHelper:"Facturs 5/sige/mois. Proratisation applique.",costPreview:"Aperu des cots",newSubtotal:"Nouveau sous-total",extraSeats:"Siges supplmentaires",prorationToday:"Proratisation aujourdhui",updatePlan:"Mettre  jour loffre",amountsNote:"Les montants sont indicatifs. Les frais finaux sont affichs au paiement.",quickSeatActions:"Actions rapides sur les siges",add1SeatNow:"Ajouter 1 sige et encaisser maintenant",add5SeatsNow:"Ajouter 5 siges et encaisser maintenant",remove1Seat:"Retirer 1 sige",quickTip:"Astuce : vous pouvez aussi ajouter des siges depuis le portail de facturation.",subscriptionStatus:"Statut de labonnement",subscriptionCancelNote:"Lannulation prend effet en fin de priode ; vous pouvez reprendre avant.",cancelAtPeriodEndBtn:"Annuler en fin de priode",resumeSubscriptionBtn:"Reprendre labonnement",history:{title:"Historique",loading:"Chargement de lhistorique",empty:"Aucun enregistrement",type:"Type",plan:"Offre",users:"Utilisateurs",date:"Date",footerNote:"Les vnements sont synchroniss priodiquement depuis le prestataire de facturation."},invoices:{title:"Factures",loading:"Chargement des factures",empty:"Aucune facture",filters:{status:"Statut",all:"Tous",search:"Rechercher",searchPlaceholder:"Numro ou devise",from:"De",to:"",exportCsv:"Exporter CSV"},table:{number:"Numro",date:"Date",amount:"Montant",status:"Statut",actions:"Actions"},footerNote:"Les factures sont rcupres depuis le prestataire ; les montants sont affichs dans la devise de facturation."}}},K4={twofa:{reminderTitle:"Activer lauthentification  deux facteurs",reminderDesc:"Pour une meilleure scurit, activez lA2F.",modalTitle:"Scurisez votre compte",modalMessage:"Lauthentification  deux facteurs (A2F) renforce considrablement la scurit de votre compte. Voulezvous lactiver maintenant?",enableNow:"Activer maintenant",neverRemind:"Ne plus rappeler"}},G4={common:{dataLoadError:"Erreur lors du chargement des donnes"},invoices:{updateSuccess:"Facture mise  jour",updateError:"La facture na pas pu tre mise  jour",createPartialError:"Facture cre, mais la vente na pas pu tre cre",createWithSaleSuccess:"Facture et vente cres",cancelSuccess:"Facture annule",cancelError:"La facture na pas pu tre annule",restoreSuccess:"Facture restaure",restoreError:"La facture na pas pu tre restaure",createSuccess:"Facture cre avec succs"},customers:{updateSuccess:"Compte mis  jour",createSuccess:"Compte ajout",deleteSuccess:"Compte supprim",deleteError:"Le compte na pas pu tre supprim"},suppliers:{updateSuccess:"Fournisseur mis  jour",createSuccess:"Fournisseur ajout",deleteSuccess:"Fournisseur supprim",deleteError:"Le fournisseur na pas pu tre supprim"},sales:{customerNotSelected:"Aucun compte slectionn. Veuillez choisir un compte valide.",insufficientStock:" Stock insuffisant! {{name}} - Disponible : {{available}}, Demand : {{requested}}",createSuccess:"Vente enregistre",updateSuccess:"Vente mise  jour",localSaved:"Vente enregistre localement (hors ligne)",stockUpdateFailed:"Vente enregistre mais le stock na pas pu tre mis  jour",deleteError:"La vente na pas pu tre supprime",deleteSuccess:"Vente supprime",customerNotFound:"Compte introuvable. Veuillez dabord crer un compte."},expenses:{updateSuccess:"Dpense mise  jour",createSuccess:"Dpense ajoute",cancelSuccess:"Dpense annule",cancelError:"La dpense na pas pu tre annule",statusUpdateSuccess:"Statut de dpense mis  jour",restoreSuccess:"Dpense restaure",restoreError:"La dpense na pas pu tre restaure"},products:{updateSuccess:"Produit mis  jour",createSuccess:"Produit ajout",deleteSuccess:"Produit supprim",deleteError:"Le produit na pas pu tre supprim",bulkRemoved:"{{count}} produits supprims",bulkNotFound:"Produits slectionns introuvables",bulkArchived:"{{count}} produits archivs",bulkAlreadyArchived:"Les produits slectionns sont dj archivs",bulkPriceUpdateSaved:"Votre slection pour la mise  jour de prix a t enregistre. Modifiezla sur la fiche produit."},categories:{added:"Catgorie {{name}} ajoute (TVA: %{{taxRate}})",addError:"La catgorie na pas pu tre ajoute",updateSuccess:"Catgorie mise  jour",deleteSuccess:"Catgorie supprime",assignmentInfo:"Pour lassignation, utilisez la mise en page des catgories  gauche."},bank:{deleteError:"Le compte bancaire na pas pu tre supprim"},quotes:{createSuccess:"Devis cr",createError:"Le devis na pas pu tre cr"}},W4={invoices:{overdue:{title:"Paiement de facture en retard",desc:"{{invoiceNumber}} - {{customerName}} ({{daysOverdue}} jours de retard)"},upcoming:{title:"Paiement de facture  venir",desc:"{{invoiceNumber}} - {{customerName}} ({{daysLeft}} jours restants)"},created:{title:"Nouvelle facture cre",desc:"Facture {{invoiceNumber}} pour {{customerName}} prte."}},expenses:{overdue:{title:"Paiement de dpense en retard",desc:"{{description}} - {{supplierName}} ({{daysOverdue}} jours de retard)"},upcoming:{title:"Paiement de dpense  venir",desc:"{{description}} - {{supplierName}} ({{daysLeft}} jours restants)"},created:{title:"Nouvelle dpense enregistre",desc:"{{supplierName}} - {{description}} : {{amount}}"}},products:{lowStock:{title:"Alerte stock faible",desc:"{{name}} - Stock sous le minimum ({{stock}}/{{min}})"},outOfStock:{title:"Rupture de stock",desc:"{{name}} - Stock puis!"}},quotes:{expired:{title:"Devis expir",desc:"{{quoteNumber}} - expir"},dueSoon:{title:"Devis bientt expir",desc:"{{quoteNumber}} - {{diffDays}} jours restants"}},customers:{created:{title:"Nouveau compte ajout",desc:"{{name}} a t enregistr."}},suppliers:{created:{title:"Nouveau fournisseur ajout",desc:"{{name}} a t enregistr."}},sales:{created:{title:"Nouvelle vente enregistre",desc:"{{customerName}} - {{summary}} : {{totalAmount}}"}},plan:{limit:{title:"Alerte de limite dabonnement",invoices:{desc:"Vous approchez de la limite de factures du mois ({{used}}/{{limit}})."},expenses:{desc:"Vous approchez de la limite de dpenses du mois ({{used}}/{{limit}})."}}}},Y4={users:{updateConfirm:"tesvous sr de vouloir mettre  jour cet utilisateur?",passwordResetConfirm:"Rinitialiser le mot de passe de cet utilisateur?",deactivateConfirm:"Dsactiver cet utilisateur?",activateConfirm:"Activer cet utilisateur?"},tenants:{updatePlanConfirm:"Mettre  jour labonnement de ce locataire?",updateStatusConfirm:"Mettre  jour le statut de ce locataire?",updateNextPaymentConfirm:"Mettre  jour la prochaine date de paiement?",cancelSubscriptionConfirm:"Rsilier labonnement  la fin de la priode?",dangerDeleteTenantConfirm:"Supprimer dfinitivement ce locataire?"},backups:{deleteConfirm:"Supprimer cette sauvegarde?",deleteOlderThanConfirm:"Supprimer les sauvegardes plus anciennes que la date choisie?"}},Q4={limitExceeded:{title:"Limite du forfait dpasse",invoicesMessage:"Vous avez dpass la limite de factures de ce mois.",expensesMessage:"Vous avez dpass la limite de dpenses de ce mois."}},Z4={pagination:e4,app:t4,crm:r4,summary:s4,presets:n4,landing:a4,planTab:i4,"testimonials.marcus.role":"PDG","testimonials.marcus.company":"Tech Solutions GmbH","testimonials.elena.content":"En tant que petite entreprise, nous avions besoin de quelque chose de simple mais puissant. Comptario nous donne tout ce dont nous avons besoin sans la complexit des logiciels d'entreprise.","testimonials.elena.role":"Propritaire de Petite Entreprise","testimonials.elena.company":"Boulangerie Locale","testimonials.stats.rating":"Note Moyenne","testimonials.stats.customers":"Comptes satisfaits","testimonials.stats.countries":"Pays","pricing.subtitle":"Choisissez le plan qui correspond aux besoins de votre entreprise. Commencez gratuitement et mettez  niveau au fur et  mesure de votre croissance.","faq.support.title":"Vous avez encore des questions?","faq.support.desc":"Notre quipe de support est l pour vous aider  tirer le meilleur parti de Comptario.","faq.support.contact":"Contacter le Support","faq.support.demo":"Planifier une Dmo","pricing.popular":"Le Plus Populaire","pricing.plans.starter.desc":"Idal pour les freelances et petits projets","pricing.plans.pro.desc":"Idal pour les entreprises en croissance","pricing.plans.business.desc":"Pour les entreprises tablies avec quipes","pricing.features.users1":"1 utilisateur inclus","pricing.features.users3":"3 utilisateurs inclus","pricing.features.users10":"10 utilisateurs inclus","pricing.features.usersUnlimited":"Utilisateurs illimits","pricing.features.invoices5":"Jusqu 5 factures par mois","pricing.features.basicExpense":"Suivi de dpenses de base","pricing.features.expenses5":"Jusqu 5 dpenses par mois","pricing.features.bank1":"1 compte bancaire","pricing.features.bankUnlimited":"Comptes bancaires illimits","pricing.features.customerSupplier1":"1 compte et 1 fournisseur","pricing.features.customerSupplierUnlimited":"Comptes et fournisseurs illimits","pricing.features.unlimitedInvoicesExpenses":"Factures et dpenses illimites","pricing.features.vat":"Suivi TVA par catgorie","pricing.features.pdf":"Factures et devis en PDF","pricing.features.emailSupport":"Support par e-mail","pricing.features.quotesBasic":"Cration de devis et lien partageable","pricing.features.quotesAdvanced":"Devis : vu/accept/refus, PDF","pricing.features.quoteTemplate1":"1 modle de devis","pricing.features.quoteTemplatesUnlimited":"Modles de devis illimits","pricing.features.saveListViews":"Enregistrer des vues de liste","pricing.features.unlimited":"Factures illimites","pricing.features.advancedExpense":"Gestion avance des dpenses","pricing.features.multiCurrency":"Support multi-devises","pricing.features.customerMgmt":"Gestion des comptes","pricing.features.products":"Gestion des produits et stocks","pricing.features.reports":"Rapports avancs et analyses dtailles","pricing.features.prioritySupport":"Support prioritaire","pricing.features.api":"Accs API","pricing.features.everythingPro":"Toutes les fonctionnalits de Pro","pricing.features.teamCollaboration":"Collaboration quipe","pricing.features.advancedReporting":"Rapports avancs","pricing.features.whiteLabel":"Options marque blanche","pricing.features.dedicatedSupport":"Support prioritaire","pricing.features.customIntegrations":"Intgrations personnalises","pricing.features.noCredit":"Aucune carte de crdit requise","pricing.pro.extraUser":"+ chaque utilisateur supplmentaire 5/mois","pricing.questions":"Vous avez des questions sur nos tarifs?","pricing.checkFaq":"Consultez notre FAQ","pricing.or":"ou","pricing.contactSupport":"contactez le support","pricing.guarantee":"Garantie de remboursement de 30 jours sur tous les plans payants","faq.subtitle":"Tout ce que vous devez savoir sur Comptario. Vous ne trouvez pas la rponse que vous cherchez? N'hsitez pas  nous contacter.","faq.contactUs":"nous contacter","footer.product":"PRODUIT","footer.company":"ENTREPRISE","footer.support":"SUPPORT","footer.legal":"LGAL","footer.features":"Fonctionnalits","footer.pricing":"Tarifs","footer.security":"Scurit","footer.api":"API","footer.about":" propos","footer.blog":"Blog","footer.careers":"Carrires","footer.press":"Presse","footer.helpCenter":"Centre d'aide","footer.contactUs":"Nous contacter","footer.status":"Statut","footer.community":"Communaut","footer.privacy":"Politique de confidentialit","footer.terms":"Conditions d'utilisation","footer.gdpr":"GDPR","footer.cookies":"Politique de cookies","footer.imprint":"Mentions lgales","footer.description":"Logiciel de pr-comptabilit simple et scuris pour les entreprises modernes. Grez factures, dpenses et TVA en toute confiance.","footer.stayUpdated":"Restez inform","footer.updatesDesc":"Recevez les dernires mises  jour sur les nouvelles fonctionnalits et les meilleures pratiques.","footer.email":"support@comptario.com","footer.languages":"Disponible en 4 langues","footer.gdprCompliant":"Conforme GDPR","footer.emailPlaceholder":"Entrez votre e-mail","footer.subscribe":"S'abonner","footer.copyright":" {{year}} Comptario. Tous droits rservs.","footer.madeWith":"Fait avec  en Europe",auth:o4,common:l4,currencies:c4,header:d4,dashboard:u4,quickActions:m4,transactions:h4,alerts:f4,months:p4,sidebar:g4,quotes:x4,billing:y4,stats:b4,statusLabel:v4,status:w4,invoice:N4,"expense.details":"Dtails de la Dpense","expense.information":"Informations de Dpense","expense.number":"N Dpense","expense.date":"Date de Dpense","expense.category":"Catgorie","expense.supplier":"Fournisseur","expense.amount":"Montant","expense.receipt":"Reu","expense.viewReceipt":"Voir le Reu","customer.details":"Dtails du Compte","customer.accountInfo":"Informations du Compte","customer.personalInfo":"Informations Personnelles","customer.name":"Nom","customer.email":"E-mail","customer.phone":"Tlphone","customer.registeredAt":"Date dinscription","customer.companyInfo":"Informations sur lEntreprise","customer.company":"Socit","customer.taxNumber":"Numro Fiscal","customer.addressInfo":"Informations dAdresse","customer.quickActions":"Actions Rapides","customer.createInvoice":"Crer une Facture","customer.viewHistory":"Voir lHistorique",expense:k4,customer:j4,supplier:S4,products:C4,chartOfAccounts:A4,invoices:T4,expenses:E4,customers:D4,suppliers:_4,banks:P4,settings:I4,sales:M4,payment:R4,reports:z4,ledger:L4,expenseCategories:O4,archive:F4,validation:B4,legal:U4,cookie:V4,fiscalPeriods:q4,org:$4,pdf:H4,security:K4,"common.remindMeLater":"Remind Me Later","common.now":"Now","common.generic":{customer:"Compte",supplier:"Supplier",expense:"Expense",quote:"Quote"},toasts:G4,notifications:W4,admin:Y4,plans:Q4},X4="Kullanm Klavuzu",J4="Comptario Yardm Merkezi",e3="Bu klavuz, Comptario ile fatura, gider ve temel muhasebe ilerinizi adm adm yapmanza yardm eder. Aadaki blmlerden, aradnz konuya hzlca gidebilirsiniz. Her blm ksa admlar, kk ipular ve grsel odakl aklamalar ierir.",t3={tip:"pucu"},r3=[{id:"overview",title:"Genel Bak"},{id:"getting-started",title:"Balang (Kayt, Giri, Dil/Para Birimi)"},{id:"customers",title:"Hesaplar"},{id:"suppliers",title:"Tedarikiler"},{id:"products",title:"rnler ve Kategoriler"},{id:"invoices",title:"Faturalar"},{id:"expenses",title:"Giderler"},{id:"sales",title:"Satlar"},{id:"bank",title:"Banka Hesaplar"},{id:"reports",title:"Raporlar ve Defter"},{id:"settings",title:"Ayarlar"},{id:"users",title:"Kullanclar, Roller ve Davetler"},{id:"plan-limits",title:"Plan Limitleri"},{id:"period-lock",title:"Dnem Kilidi"},{id:"security-backup",title:"Gvenlik ve Yedekleme"},{id:"faq-contact",title:"SSS ve letiim"}],s3={title:"Balang (Kayt, Giri, Dil/Para Birimi)",steps:["st men veya sayfalardaki cretsiz Deneme dmesine tklayn.","E-posta ve ifre belirleyip hesabnz oluturun. Mevcutta hesabnz varsa Giri yapn.","Dil tercihlerini sa stteki dil mensnden ayarlayn. Para Birimi ayar ise Ayarlar  Sistem  Para Birimi altndadr.","Profil ayarlarnzdan iletme bilgilerinizi (nvan, vergi no, adres) girin; bu bilgiler faturalarnzda kullanlr."],tipKeyboard:"Klavye ile hzl gezinmek iin",tipAfter:"tularna basarak Ayarlar'a gidebilirsiniz."},n3={title:"Hesaplar",items:["Sol menden Hesaplar sayfasn an.","Yeni Hesap ile hzlca hesap ekleyin veya CSV/Excel ie aktarma ile toplu ykleyin.","Hesap kartnda gemi faturalar, bakiyeyi ve iletiim bilgilerini grntleyin."]},a3={title:"Tedarikiler",desc:"Giderlerinizi ilikilendirmek iin tedariki kartlar oluturun. e aktarma ve dzenleme admlar, hesaplar ile ayndr."},i3={title:"rnler ve Kategoriler",desc:"Stok ve hizmetlerinizi ynetin. Kategori bazl KDV oran tanmlayabilir, rn baznda zel KDV ile zerine yazabilirsiniz.",items:["Yeni rn ekleyin, barkod/sku ve fiyat bilgilerinizle kaydedin.","Stok seviyeleri iin minimum stok (reorder level) belirleyin; dk stok uyarlar aln.","Kategori ve rn KDV ynetimi ile faturalarda otomatik KDV hesaplatn."]},o3={title:"Faturalar",steps:["Yeni Fatura ile hesap ve kalemleri sein; rnler otomatik vergi oranyla gelir.","Vade tarihi, notlar ve iskonto ekleyin; PDF nizleme ve e-posta gnderimi yapn.","deme durumu ve iade/iptal ilemlerini fatura zerinden takip edin."]},l3={title:"Giderler",desc:"Giderleri tedariki, tutar, tarih ve durum bilgisi ile kaydedin. Vade yaklanca bildirim aln; dnem kilidi aktifse dzenlemeler engellenir."},c3={title:"Satlar",desc:"Faturalardan otomatik, ayrca manuel sat oluturabilirsiniz. oklu kalemli satlar desteklenir; stok dm otomatik yaplr."},d3={title:"Banka Hesaplar",desc:"Banka hesaplarnz takip edin. cretsiz planda 1 hesap, st planlarda snrszdr. Hesap eklerken ad ve IBAN bilgisi girin."},u3={title:"Raporlar ve Defter",desc:"Gelir-Gider zetleri, Genel Muhasebe ve defter grnmleri ile dnem bazl analizler oluturun. Excel/PDF da aktarma mevcuttur."},m3={title:"Ayarlar",items:["Profil ve firma bilgileri (logo, adres, vergi bilgileri)","Para birimi, dil ve KDV/stopaj varsaylanlar","Yedek alma ve veri ie/da aktarma"]},h3={title:"Kullanclar, Roller ve Davetler",desc:"oklu kullanc destei ile organizasyonunuza ekip arkadalarnz davet edin. Roller ve eriim kstlar plannza gre uygulanr."},f3={title:"Plan Limitleri",desc:"cretsiz planda temel kullanm (r. snrl fatura/gider, 1 banka hesab) bulunur. Pro ve Business planlarda limitler ykselir veya kalkar. Limit amnda aklayc uyarlar grrsnz."},p3={title:"Dnem Kilidi",desc:"Kapanm dnemlerde kayt deiiklii engellenir. Bu sayede rapor btnl korunur. htiya halinde kilitli dnemi amadan dzeltme yaplamaz."},g3={title:"Gvenlik ve Yedekleme",items:["Verileriniz gvenli altyapda tutulur; TLS ile ifreleme, gnlk yedek ve izleme uygulanr.","Test ortam iin veritaban/dosya uyarlamalar yaplmtr; retim PostgreSQL kullanr.","erez ve gizlilik politikalarmz buradan inceleyin."],cookiesText:"buradan"},x3={title:"SSS ve letiim",text:"Yantn bulamadnz bir konu mu var? Bize support@comptario.com adresinden ulan."},y3={sidebarTitle:X4,pageTitle:J4,overviewDesc:e3,labels:t3,sections:r3,gettingStarted:s3,customers:n3,suppliers:a3,products:i3,invoices:o3,expenses:l3,sales:c3,bank:d3,reports:u3,settings:m3,users:h3,planLimits:f3,periodLock:p3,securityBackup:g3,faq:x3},b3="User Guide",v3="Comptario Help Center",w3="This guide helps you complete invoicing, expenses, and basic accounting tasks step by step. Jump directly to a topic from the menu. Each section includes short steps, tips, and clear explanations.",N3={tip:"Tip"},k3=[{id:"overview",title:"Overview"},{id:"getting-started",title:"Getting Started (Sign Up, Sign In, Language/Currency)"},{id:"customers",title:"Accounts"},{id:"suppliers",title:"Suppliers"},{id:"products",title:"Products & Categories"},{id:"invoices",title:"Invoices"},{id:"expenses",title:"Expenses"},{id:"sales",title:"Sales"},{id:"bank",title:"Bank Accounts"},{id:"reports",title:"Reports & Ledger"},{id:"settings",title:"Settings"},{id:"users",title:"Users, Roles & Invites"},{id:"plan-limits",title:"Plan Limits"},{id:"period-lock",title:"Period Lock"},{id:"security-backup",title:"Security & Backups"},{id:"faq-contact",title:"FAQ & Contact"}],j3={title:"Getting Started (Sign Up, Sign In, Language/Currency)",steps:["Click the Try for Free button in the header or on the page.","Create your account with email and password. If you already have one, sign in.","Set your Language from the top-right language menu. Currency is under Settings  System  Currency.","Enter your business details (name, tax no, address) in Profile; these will appear on invoices."],tipKeyboard:"Quick navigation:",tipAfter:"to go to Settings."},S3={title:"Accounts",items:["Open the Accounts page from the sidebar.","Add an account or import via CSV/Excel.","See past invoices, balance, and contact details on the account card."]},C3={title:"Suppliers",desc:"Create supplier cards to link expenses. Import and editing steps are the same as accounts."},A3={title:"Products & Categories",desc:"Manage stock and services. Define category-level VAT, override per product if needed.",items:["Add new products with SKU and price.","Set minimum stock levels and get low-stock alerts.","Auto-VAT on invoices via category/product settings."]},T3={title:"Invoices",steps:["Create invoice with account and line items; products bring their VAT rate.","Add due date, notes, discounts; preview PDF and send by email.","Track payment status and void/return operations."]},E3={title:"Expenses",desc:"Record supplier, amount, date, and status. Get reminders near due date; edits are blocked when period lock is active."},D3={title:"Sales",desc:"Sales are auto-created from invoices; you can also add manual sales. Multi-line sales are supported; stock decreases automatically."},_3={title:"Bank Accounts",desc:"Track bank accounts. Free plan: 1 account; upper plans: unlimited. Provide name and IBAN when adding."},P3={title:"Reports & Ledger",desc:"View income/expense summaries and general ledger. Export to Excel/PDF."},I3={title:"Settings",items:["Profile and company info (logo, address, tax info)","Currency, language, and VAT/withholding defaults","Backup and data import/export"]},M3={title:"Users, Roles & Invites",desc:"Invite teammates to your organization. Roles and access limits depend on your plan."},R3={title:"Plan Limits",desc:"Free plan has basic usage (e.g., limited invoices/expenses, 1 bank account). Pro/Business raise or remove limits. Clear messages appear on limit errors."},z3={title:"Period Lock",desc:"Edits in closed periods are blocked, preserving report integrity. Open the period to make corrections if necessary."},L3={title:"Security & Backups",items:["Your data is secured with TLS, daily backups, and monitoring.","Tests use adjusted storage; production uses PostgreSQL.","Review our cookies and privacy policies here."],cookiesText:"here"},O3={title:"FAQ & Contact",text:"Cant find an answer? Reach us at support@comptario.com."},F3={sidebarTitle:b3,pageTitle:v3,overviewDesc:w3,labels:N3,sections:k3,gettingStarted:j3,customers:S3,suppliers:C3,products:A3,invoices:T3,expenses:E3,sales:D3,bank:_3,reports:P3,settings:I3,users:M3,planLimits:R3,periodLock:z3,securityBackup:L3,faq:O3},B3="Benutzerhandbuch",U3="Comptario Hilfe-Center",V3="Dieser Leitfaden hilft Ihnen Schritt fr Schritt bei Rechnungen, Ausgaben und grundlegenden Buchhaltungsaufgaben. Springen Sie ber das Men direkt zu einem Thema. Jede Sektion enthlt kurze Schritte, Tipps und klare Erklrungen.",q3={tip:"Tipp"},$3=[{id:"overview",title:"berblick"},{id:"getting-started",title:"Erste Schritte (Registrierung, Anmeldung, Sprache/Whrung)"},{id:"customers",title:"Accounts"},{id:"suppliers",title:"Lieferanten"},{id:"products",title:"Produkte & Kategorien"},{id:"invoices",title:"Rechnungen"},{id:"expenses",title:"Ausgaben"},{id:"sales",title:"Verkufe"},{id:"bank",title:"Bankkonten"},{id:"reports",title:"Berichte & Hauptbuch"},{id:"settings",title:"Einstellungen"},{id:"users",title:"Benutzer, Rollen & Einladungen"},{id:"plan-limits",title:"Planlimits"},{id:"period-lock",title:"Periodensperre"},{id:"security-backup",title:"Sicherheit & Backups"},{id:"faq-contact",title:"FAQ & Kontakt"}],H3={title:"Erste Schritte (Registrierung, Anmeldung, Sprache/Whrung)",steps:["Klicken Sie auf den Button Kostenlos testen im Header oder auf der Seite.","Erstellen Sie ein Konto mit EMail und Passwort. Wenn Sie bereits eines haben, melden Sie sich an.","Stellen Sie die Sprache ber das Sprachmen oben rechts ein. Die Whrung finden Sie unter Einstellungen  System  Whrung.","Geben Sie in Ihrem Profil Unternehmensdaten (Name, Steuernr., Adresse) ein; diese erscheinen auf Ihren Rechnungen."],tipKeyboard:"Schnellnavigation:",tipAfter:"um zu den Einstellungen zu gelangen."},K3={title:"Accounts",items:["ffnen Sie die Seite Accounts in der Seitenleiste.","Fgen Sie einen Account hinzu oder importieren Sie per CSV/Excel.","Sehen Sie frhere Rechnungen, Salden und Kontaktdaten in der Accountkarte."]},G3={title:"Lieferanten",desc:"Erstellen Sie Lieferantenkarten, um Ausgaben zuzuordnen. Import und Bearbeitung entsprechen den Schritten bei Accounts."},W3={title:"Produkte & Kategorien",desc:"Verwalten Sie Lager und Dienstleistungen. Definieren Sie KategorienMwSt. und berschreiben Sie sie ggf. pro Produkt.",items:["Neue Produkte mit SKU und Preis hinzufgen.","Mindestlagerbestand festlegen und NiedrigBestandHinweise erhalten.","Automatische MwSt. in Rechnungen per Kategorie/ProduktEinstellungen."]},Y3={title:"Rechnungen",steps:["Erstellen Sie eine Rechnung mit Account und Positionen; Produkte bringen ihren MwSt.-Satz mit.","Fgen Sie Flligkeitsdatum, Notizen, Rabatte hinzu; PDFVorschau und Versand per EMail.","Verfolgen Sie Zahlungsstatus sowie Storno-/Rckgabevorgnge."]},Q3={title:"Ausgaben",desc:"Erfassen Sie Lieferant, Betrag, Datum und Status. Erinnerungen nahe Flligkeit; Bearbeitung gesperrt, wenn Periodensperre aktiv ist."},Z3={title:"Verkufe",desc:"Verkufe werden automatisch aus Rechnungen erzeugt; manuelle Verkufe sind mglich. Mehrzeilige Verkufe untersttzt; Lager wird automatisch vermindert."},X3={title:"Bankkonten",desc:"Verfolgen Sie Bankkonten. FreePlan: 1 Konto; hhere Plne: unbegrenzt. Beim Hinzufgen Name und IBAN angeben."},J3={title:"Berichte & Hauptbuch",desc:"Einnahmen-/Ausgabenbersichten und Hauptbuch ansehen. Export nach Excel/PDF."},e6={title:"Einstellungen",items:["Profil- und Firmendaten (Logo, Adresse, Steuern)","Whrung, Sprache, MwSt./EinbehaltVoreinstellungen","Backups und DatenImport/Export"]},t6={title:"Benutzer, Rollen & Einladungen",desc:"Laden Sie Teammitglieder in Ihre Organisation ein. Rollen und Zugriffe hngen von Ihrem Plan ab."},r6={title:"Planlimits",desc:"Der FreePlan erlaubt grundlegende Nutzung (z.B. begrenzte Rechnungen/Ausgaben, 1 Bankkonto). Pro/Business erhhen oder entfernen Limits. Bei Limitfehlern erscheinen klare Hinweise."},s6={title:"Periodensperre",desc:"Bearbeitungen in geschlossenen Perioden sind gesperrt  BerichtsIntegritt bleibt erhalten. ffnen Sie die Periode fr Korrekturen."},n6={title:"Sicherheit & Backups",items:["Ihre Daten sind mit TLS, tglichen Backups und Monitoring abgesichert.","Tests nutzen angepasste Speicher; Produktion nutzt PostgreSQL.","Unsere Cookie und Datenschutzrichtlinien hier einsehen."],cookiesText:"hier"},a6={title:"FAQ & Kontakt",text:"Keine Antwort gefunden? Schreiben Sie uns an support@comptario.com."},i6={sidebarTitle:B3,pageTitle:U3,overviewDesc:V3,labels:q3,sections:$3,gettingStarted:H3,customers:K3,suppliers:G3,products:W3,invoices:Y3,expenses:Q3,sales:Z3,bank:X3,reports:J3,settings:e6,users:t6,planLimits:r6,periodLock:s6,securityBackup:n6,faq:a6},o6="Guide d'utilisation",l6="Centre d'aide Comptario",c6="Ce guide vous aide pas  pas pour la facturation, les dpenses et les tches comptables de base. Accdez directement  un sujet via le menu. Chaque section inclut des tapes courtes, des astuces et des explications claires.",d6={tip:"Astuce"},u6=[{id:"overview",title:"Aperu"},{id:"getting-started",title:"Premiers pas (Inscription, Connexion, Langue/Devise)"},{id:"customers",title:"Comptes"},{id:"suppliers",title:"Fournisseurs"},{id:"products",title:"Produits & Catgories"},{id:"invoices",title:"Factures"},{id:"expenses",title:"Dpenses"},{id:"sales",title:"Ventes"},{id:"bank",title:"Comptes bancaires"},{id:"reports",title:"Rapports & Grand livre"},{id:"settings",title:"Paramtres"},{id:"users",title:"Utilisateurs, Rles & Invitations"},{id:"plan-limits",title:"Limites du plan"},{id:"period-lock",title:"Verrouillage de priode"},{id:"security-backup",title:"Scurit & Sauvegardes"},{id:"faq-contact",title:"FAQ & Contact"}],m6={title:"Premiers pas (Inscription, Connexion, Langue/Devise)",steps:["Cliquez sur le bouton Essai gratuit dans l'entte ou sur la page.","Crez votre compte avec email et mot de passe. Si vous en avez dj un, connectezvous.","Dfinissez la langue via le menu en haut  droite. La devise se rgle dans Paramtres  Systme  Devise.","Renseignez vos informations d'entreprise (nom, n fiscal, adresse) dans le profil; elles apparatront sur les factures."],tipKeyboard:"Navigation rapide :",tipAfter:"pour aller aux Paramtres."},h6={title:"Comptes",items:["Ouvrez la page Comptes depuis la barre latrale.","Ajoutez un compte ou importez via CSV/Excel.","Consultez les anciennes factures, le solde et les coordonnes depuis la fiche compte."]},f6={title:"Fournisseurs",desc:"Crez des fiches fournisseurs pour lier les dpenses. Import et dition identiques  ceux des comptes."},p6={title:"Produits & Catgories",desc:"Grez stocks et services. Dfinissez la TVA au niveau des catgories et, si besoin, surchargez par produit.",items:["Ajoutez de nouveaux produits avec SKU et prix.","Dfinissez un stock minimum et recevez des alertes de stock faible.","TVA automatique sur les factures via les rglages catgorie/produit."]},g6={title:"Factures",steps:["Crez une facture avec compte et lignes; les produits apportent leur taux de TVA.","Ajoutez l'chance, des notes, remises; aperu PDF et envoi par email.","Suivez l'tat de paiement et les oprations d'annulation/retour."]},x6={title:"Dpenses",desc:"Enregistrez fournisseur, montant, date et statut. Rappels proches de l'chance; modifications bloques si la priode est verrouille."},y6={title:"Ventes",desc:"Les ventes sont cres automatiquement depuis les factures; vous pouvez aussi en ajouter manuellement. Ventes multilignes prises en charge; dcrment de stock automatique."},b6={title:"Comptes bancaires",desc:"Suivez vos comptes bancaires. Plan gratuit : 1 compte; plans suprieurs : illimit. Fournissez nom et IBAN lors de l'ajout."},v6={title:"Rapports & Grand livre",desc:"Affichez les rsums revenus/dpenses et le grand livre. Export Excel/PDF."},w6={title:"Paramtres",items:["Profil et infos socit (logo, adresse, infos fiscales)","Devise, langue, et valeurs par dfaut TVA/retenues","Sauvegardes et import/export de donnes"]},N6={title:"Utilisateurs, Rles & Invitations",desc:"Invitez vos collgues dans votre organisation. Rles et accs selon votre plan."},k6={title:"Limites du plan",desc:"Le plan gratuit permet un usage de base (ex. factures/dpenses limites, 1 compte bancaire). Pro/Business augmentent ou suppriment les limites. Messages clairs en cas de dpassement."},j6={title:"Verrouillage de priode",desc:"Les modifications sont bloques dans les priodes cltures pour prserver l'intgrit des rapports. Ouvrez la priode pour corriger si ncessaire."},S6={title:"Scurit & Sauvegardes",items:["Vos donnes sont protges via TLS, sauvegardes quotidiennes et monitoring.","Les tests utilisent un stockage adapt; la production utilise PostgreSQL.","Consultez ici notre politique de cookies et de confidentialit."],cookiesText:"ici"},C6={title:"FAQ & Contact",text:"Vous ne trouvez pas la rponse ? Contacteznous  support@comptario.com."},A6={sidebarTitle:o6,pageTitle:l6,overviewDesc:c6,labels:d6,sections:u6,gettingStarted:m6,customers:h6,suppliers:f6,products:p6,invoices:g6,expenses:x6,sales:y6,bank:b6,reports:v6,settings:w6,users:N6,planLimits:k6,periodLock:j6,securityBackup:S6,faq:C6},T6="Sistem Durumu",E6="Gncel alma durumu ve hizmet bileenleri",D6="Tm sistemler alyor",_6="Son gncelleme: {{time}}",P6={api:"Uygulama API",database:"Veritaban",email:"E-posta Servisi",pdf:"PDF Oluturma",storage:"Dosya Depolama"},I6={operational:"alr durumda",degraded:"Ksmi kesinti",outage:"Kesinti"},M6={title:"Olaylar",none:"Son 90 gnde olay yok."},R6={title:"Sorun mu gryorsunuz?",text:"Bir sorun fark ederseniz ltfen destek ekibimizle iletiime gein:",email:"support@comptario.com adresinden bize yazn"},z6="Beklemede",L6="Onayland",O6="dendi",F6="Reddedildi",B6={title:T6,subtitle:E6,allOperational:D6,lastUpdated:_6,components:P6,status:I6,incidents:M6,contact:R6,pending:z6,approved:L6,paid:O6,rejected:F6},U6="System Status",V6="Current operational status and service components",q6="All systems operational",$6="Last updated: {{time}}",H6={api:"Application API",database:"Database",email:"Email Service",pdf:"PDF Rendering",storage:"File Storage"},K6={operational:"Operational",degraded:"Degraded",outage:"Outage"},G6={title:"Incidents",none:"No incidents in the last 90 days."},W6={title:"Seeing an issue?",text:"If you notice a problem, please contact our support team:",email:"Email us at support@comptario.com"},Y6="Pending",Q6="Approved",Z6="Paid",X6="Rejected",J6={title:U6,subtitle:V6,allOperational:q6,lastUpdated:$6,components:H6,status:K6,incidents:G6,contact:W6,pending:Y6,approved:Q6,paid:Z6,rejected:X6},e5="Systemstatus",t5="Aktueller Betriebsstatus und Dienstkomponenten",r5="Alle Systeme in Betrieb",s5="Zuletzt aktualisiert: {{time}}",n5={api:"Anwendungs-API",database:"Datenbank",email:"E-Mail-Dienst",pdf:"PDF-Erstellung",storage:"Dateispeicher"},a5={operational:"Betriebsbereit",degraded:"Eingeschrnkt",outage:"Ausfall"},i5={title:"Vorflle",none:"Keine Vorflle in den letzten 90 Tagen."},o5={title:"Problem bemerkt?",text:"Wenn Sie ein Problem feststellen, kontaktieren Sie bitte unser Support-Team:",email:"Schreiben Sie uns an support@comptario.com"},l5="Ausstehend",c5="Genehmigt",d5="Bezahlt",u5="Abgelehnt",m5="Unbezahlt",h5="berfllig",f5="Entwurf",p5="Gesendet",g5="Storniert",x5="Abgeschlossen",y5="Aktiv",b5="Inaktiv",v5="Angesehen",w5="Akzeptiert",N5="Abgelehnt",k5="Abgelaufen",j5="Fakturiert",S5="Erstellt",C5="Erstattet",A5={title:e5,subtitle:t5,allOperational:r5,lastUpdated:s5,components:n5,status:a5,incidents:i5,contact:o5,pending:l5,approved:c5,paid:d5,rejected:u5,unpaid:m5,overdue:h5,draft:f5,sent:p5,cancelled:g5,completed:x5,active:y5,inactive:b5,viewed:v5,accepted:w5,declined:N5,expired:k5,invoiced:j5,created:S5,refunded:C5},T5="Statut du systme",E5="Statut oprationnel actuel et composants du service",D5="Tous les systmes sont oprationnels",_5="Dernire mise  jour : {{time}}",P5={api:"API d'application",database:"Base de donnes",email:"Service e-mail",pdf:"Gnration PDF",storage:"Stockage de fichiers"},I5={operational:"Oprationnel",degraded:"Dgrad",outage:"Panne"},M5={title:"Incidents",none:"Aucun incident au cours des 90 derniers jours."},R5={title:"Vous voyez un problme ?",text:"Si vous remarquez un problme, veuillez contacter notre quipe d'assistance :",email:"crivez-nous  support@comptario.com"},z5="En attente",L5="Approuv",O5="Pay",F5="Rejet",B5="Impay",U5="En retard",V5="Brouillon",q5="Envoy",$5="Annul",H5="Termin",K5="Actif",G5="Inactif",W5="Consult",Y5="Accept",Q5="Dclin",Z5="Expir",X5="Factur",J5="Cr",eC="Rembours",tC={title:T5,subtitle:E5,allOperational:D5,lastUpdated:_5,components:P5,status:I5,incidents:M5,contact:R5,pending:z5,approved:L5,paid:O5,rejected:F5,unpaid:B5,overdue:U5,draft:V5,sent:q5,cancelled:$5,completed:H5,active:K5,inactive:G5,viewed:W5,accepted:Y5,declined:Q5,expired:Z5,invoiced:X5,created:J5,refunded:eC},rC="Gelitirici API",sC="Bu sayfa yapm aamasndadr. ok yaknda API ile ilgili bilgileri burada paylaacaz.",nC={title:rC,underConstruction:sC},aC="Developer API",iC="This page is under construction. API documentation will be published here soon.",oC={title:aC,underConstruction:iC},lC="Developer API",cC="Diese Seite befindet sich im Aufbau. Die API-Dokumentation wird hier in Krze verffentlicht.",dC={title:lC,underConstruction:cC},uC="API Dveloppeur",mC="Cette page est en cours de construction. La documentation de l'API sera bientt publie ici.",hC={title:uC,underConstruction:mC},fC="Comptario Hakknda",pC="Albertville, Fransa merkezli yeniliki bir teknoloji irketiyiz.",gC={title:"Kimiz?",text:"Comptario, kk ve orta lekli iletmeler iin modern, gvenli ve kolay kullanml n muhasebe yazlmlar gelitiren dinamik bir teknoloji irketidir. Merkezimiz Fransann AuvergneRhneAlpes blgesinde, Albertvillededir. Avrupa standartlarnda gvenlik, performans ve veri koruma ilkeleriyle rn gelitirir; effaflk, sadelik ve hz deerlerini tm deneyime yanstrz."},xC={title:"Ne sunuyoruz?",items:["Faturalandrma, gider ynetimi, KDV ve raporlar iin tek bir alma alan","oklu para birimi ve kategori bazl KDV gibi yerelletirilmi zellikler","PDF fatura oluturma, e-posta ile gnderim ve ariv","ok kiracl mimari, rol tabanl eriim ve plan limitleri"]},yC={title:"Yaklammz",text:"rn kararlarmz kullanc geri bildirimleri ve veri odakl lmlerle veririz. Gvenlik ve veri mahremiyeti birer ek zellik deil, tasarmn ekirdeidir. Avrupa Birlii veri koruma prensiplerine (GDPR) uyumlu, gvenilir ve leklenebilir bir altyap zerinde alrz."},bC={title:"letiim",text:"Sorularnz iin bize u adresten ulaabilirsiniz:",emailNotice:"nemli not: Comptario yalnzca ilem ve yasal zorunluluk ieren e-postalar gnderir; pazarlama veya toplu reklam e-postas gnderilmez."},vC={title:fC,subtitle:pC,whoWeAre:gC,offerings:xC,approach:yC,contact:bC},wC="About Comptario",NC="We are an innovative tech company based in Albertville, France.",kC={title:"Who are we?",text:"Comptario is a dynamic technology company building modern, secure and easy-to-use bookkeeping software for small and medium businesses. Our headquarters is in Albertville, in the AuvergneRhneAlpes region of France. We develop products with European-grade security, performance and data protection principles; we reflect transparency, simplicity and speed across the entire experience."},jC={title:"What do we offer?",items:["A single workspace for invoicing, expense management, VAT and reports","Localized features like multi-currency and category-based VAT","PDF invoice generation, email delivery and archiving","Multi-tenant architecture, role-based access and plan limits"]},SC={title:"Our approach",text:"We make product decisions with user feedback and data-driven metrics. Security and data privacy are not extras; they are core to our design. We operate on a reliable and scalable infrastructure compliant with EU data protection principles (GDPR)."},CC={title:"Contact",text:"For questions, reach us at:",emailNotice:"Note: Comptario sends transactional and legally required emails onlyno marketing or bulk promotional emails."},AC={title:wC,subtitle:NC,whoWeAre:kC,offerings:jC,approach:SC,contact:CC},TC="ber Comptario",EC="Wir sind ein innovatives Technologieunternehmen mit Sitz in Albertville, Frankreich.",DC={title:"Wer sind wir?",text:"Comptario ist ein dynamisches Technologieunternehmen, das moderne, sichere und benutzerfreundliche Buchhaltungssoftware fr kleine und mittlere Unternehmen entwickelt. Unser Hauptsitz befindet sich in Albertville in der Region AuvergneRhneAlpes. Wir entwickeln Produkte nach europischen Standards fr Sicherheit, Leistung und Datenschutz und leben Transparenz, Einfachheit und Geschwindigkeit in der gesamten Erfahrung."},_C={title:"Was bieten wir an?",items:["Ein einziger Arbeitsbereich fr Rechnungen, Ausgabenverwaltung, Umsatzsteuer und Berichte","Lokalisierte Funktionen wie Mehrwhrung und kategoriebasierte Umsatzsteuer","PDF-Rechnungserstellung, Versand per E-Mail und Archivierung","Mandantenfhige Architektur, rollenbasierter Zugriff und Planlimits"]},PC={title:"Unser Ansatz",text:"Wir treffen Produktentscheidungen anhand von Nutzerfeedback und datengetriebenen Metriken. Sicherheit und Datenschutz sind keine Zusatzfunktionen, sondern zentral im Design verankert. Wir arbeiten auf einer zuverlssigen und skalierbaren Infrastruktur im Einklang mit den EU-Datenschutzgrundstzen (DSGVO)."},IC={title:"Kontakt",text:"Bei Fragen erreichen Sie uns unter:",emailNotice:"Hinweis: Comptario versendet ausschlielich transaktionale und gesetzlich erforderliche E-Mails  keine Marketing- oder Massenwerbung."},MC={title:TC,subtitle:EC,whoWeAre:DC,offerings:_C,approach:PC,contact:IC},RC=" propos de Comptario",zC="Nous sommes une entreprise technologique innovante base  Albertville, France.",LC={title:"Qui sommes-nous ?",text:"Comptario est une entreprise technologique dynamique qui dveloppe des logiciels de pr-comptabilit modernes, scuriss et faciles  utiliser pour les petites et moyennes entreprises. Notre sige est  Albertville, dans la rgion AuvergneRhneAlpes. Nous concevons nos produits selon des standards europens de scurit, de performance et de protection des donnes ; nous mettons la transparence, la simplicit et la rapidit au cur de l'exprience."},OC={title:"Ce que nous offrons",items:["Un espace de travail unique pour la facturation, la gestion des dpenses, la TVA et les rapports","Des fonctionnalits localises comme la multi-devise et la TVA par catgorie","Gnration de factures PDF, envoi par e-mail et archivage","Architecture multi-tenant, contrle d'accs par rles et limites de plan"]},FC={title:"Notre approche",text:"Nos dcisions produit s'appuient sur les retours des utilisateurs et des mtriques pilotes par les donnes. La scurit et la confidentialit ne sont pas des options, elles sont au cur du design. Nous oprons sur une infrastructure fiable et volutive, conforme aux principes europens de protection des donnes (RGPD)."},BC={title:"Contact",text:"Pour toute question, contactez-nous :",emailNotice:"Note : Comptario envoie uniquement des e-mails transactionnels ou lgalement obligatoiresaucun e-mail marketing ou publicitaire de masse."},UC={title:RC,subtitle:zC,whoWeAre:LC,offerings:OC,approach:FC,contact:BC};function jm(a){try{if(!a||typeof a!="object")return a||{};let o={...a};if(o.common&&typeof o.common=="object"){const t=o.common;if(o={...t,...o},t.status&&typeof t.status=="object"){const f=o.status&&typeof o.status=="object"?o.status:{};o.status={...t.status,...f}}}if(!o.planTab)if(o.pdf&&typeof o.pdf.planTab=="object")o.planTab=o.pdf.planTab;else if(o.dpa&&typeof o.dpa.planTab=="object")o.planTab=o.dpa.planTab;else if(o.common&&typeof o.common.planTab=="object")o.planTab=o.common.planTab;else{const t=new WeakSet,f=[o];for(;f.length;){const h=f.pop();if(!(!h||typeof h!="object"||t.has(h))){if(t.add(h),Object.prototype.hasOwnProperty.call(h,"planTab")&&typeof h.planTab=="object"){o.planTab=h.planTab;break}for(const d of Object.keys(h)){const n=h[d];n&&typeof n=="object"&&f.push(n)}}}}if(!o.pdf||typeof o.pdf!="object"){const t=o.legal&&typeof o.legal=="object"?o.legal.pdf:void 0;if(t&&typeof t=="object"){o.pdf=t;try{delete o.legal.pdf}catch{}}else{const f=new WeakSet,h=[o];for(;h.length&&(!o.pdf||typeof o.pdf!="object");){const d=h.pop();if(!(!d||typeof d!="object"||f.has(d))){if(f.add(d),Object.prototype.hasOwnProperty.call(d,"pdf")&&typeof d.pdf=="object"){o.pdf=d.pdf;break}for(const n of Object.keys(d)){const l=d[n];l&&typeof l=="object"&&h.push(l)}}}}}if(!o.notifications&&o.sales&&typeof o.sales.notifications=="object"&&(o.notifications=o.sales.notifications),!o.security&&o.sales&&typeof o.sales.security=="object"&&(o.security=o.sales.security),o.landing&&typeof o.landing=="object"){const t=o.landing,f=(h,d,n)=>{let l=h;for(let i=0;i<d.length;i++){const r=d[i];i===d.length-1?l[r]==null&&(l[r]=n):((l[r]==null||typeof l[r]!="object")&&(l[r]={}),l=l[r])}};Object.keys(t).forEach(h=>{if(h.startsWith("pricing.")){const d=h.slice(8);if(d){const n=["pricing",...d.split(".")];f(t,n,t[h])}}})}return a.org&&a.org.members&&(!o.org||!o.org.members)&&(o.org=o.org||{},o.org.members=a.org.members),o}catch(o){return console.warn("[i18n] normalizeCommonResource failed, using fallback tree.",o),a||{}}}const Mi=jm(ej);try{const a=rj?.org;a&&(Mi.org=Mi.org||{},!Mi.org.members&&a.members&&(Mi.org.members=a.members),!Mi.org.join&&a.join&&(Mi.org.join=a.join))}catch(a){console.warn("[i18n] Trke org.members merge skipped:",a)}const lv=jm(eS),cv=jm(JS),dv=jm(Z4);function Sm(a,o){if(!a||typeof a!="object")return a||{};if(!o||typeof o!="object")return a;const t=o.status;return t&&typeof t=="object"&&Object.keys(t).forEach(f=>{a[f]==null&&(a[f]=t[f])}),a}const VC=Sm(B6,Mi),qC=Sm(J6,lv),$C=Sm(A5,cv),HC=Sm(tC,dv),KC={tr:{common:Mi,help:y3,status:VC,api:nC,about:vC},en:{common:lv,help:F3,status:qC,api:oC,about:AC},de:{common:cv,help:i6,status:$C,api:dC,about:MC},fr:{common:dv,help:A6,status:HC,api:hC,about:UC}};ls.use(ov).use(FN).init({resources:KC,fallbackLng:["en","tr"],defaultNS:"common",ns:["common","help","status","api","about"],keySeparator:".",nsSeparator:":",supportedLngs:["tr","en","de","fr"],nonExplicitSupportedLngs:!0,load:"languageOnly",react:{useSuspense:!1},interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"}});globalThis.i18next=ls;var GC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const WC=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),At=(a,o)=>{const t=G.forwardRef(({color:f="currentColor",size:h=24,strokeWidth:d=2,absoluteStrokeWidth:n,className:l="",children:i,...r},s)=>G.createElement("svg",{ref:s,...GC,width:h,height:h,stroke:f,strokeWidth:n?Number(d)*24/Number(h):d,className:["lucide",`lucide-${WC(a)}`,l].join(" "),...r},[...o.map(([c,u])=>G.createElement(c,u)),...Array.isArray(i)?i:[i]]));return t.displayName=`${a}`,t};const em=At("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const up=At("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const vn=At("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const YC=At("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);const QC=At("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);const ZC=At("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);const XC=At("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);const uv=At("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const Xc=At("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Nl=At("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const JC=At("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);const eA=At("BadgeDollarSign",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);const qc=At("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const tA=At("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);const Cm=At("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const mv=At("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);const hv=At("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const rA=At("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);const Eu=At("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const sA=At("BookmarkPlus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]);const nA=At("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const ts=At("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Kp=At("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Vr=At("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Gp=At("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const $s=At("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const aA=At("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const cs=At("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const bs=At("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const iA=At("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const fv=At("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const qs=At("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const $x=At("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);const Ui=At("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Hx=At("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);const oA=At("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);const lA=At("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);const Wp=At("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);const mp=At("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const ja=At("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const pv=At("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);const Bi=At("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Bn=At("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Cs=At("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const cA=At("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);const $c=At("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const Zr=At("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const dA=At("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const kl=At("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);const Fr=At("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const uA=At("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);const gv=At("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const mA=At("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const hA=At("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);const oa=At("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const Du=At("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const Kx=At("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);const fA=At("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);const pA=At("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);const gA=At("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]]);const xA=At("Heading5",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 13v-3h4",key:"1nvgqp"}],["path",{d:"M17 17.7c.4.2.8.3 1.3.3 1.5 0 2.7-1.1 2.7-2.5S19.8 13 18.3 13H17",key:"2nebdn"}]]);const yA=At("Heading6",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["circle",{cx:"19",cy:"16",r:"2",key:"15mx69"}],["path",{d:"M20 10c-2 2-3 3.5-3 6",key:"f35dl0"}]]);const bA=At("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const vA=At("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const tm=At("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const wA=At("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);const NA=At("KanbanSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 7v7",key:"1x2jlm"}],["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M16 7v9",key:"1hp2iy"}]]);const ci=At("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const bf=At("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const Yp=At("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const kA=At("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);const jA=At("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);const rm=At("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Yn=At("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const SA=At("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Hs=At("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Al=At("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const xv=At("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Gx=At("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const CA=At("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const bn=At("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const AA=At("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const TA=At("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);const Co=At("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Wx=At("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const yv=At("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const bv=At("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const Ks=At("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const vv=At("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);const un=At("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const EA=At("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]);const Hc=At("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const jl=At("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Qp=At("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const DA=At("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Os=At("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const wv=At("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const sm=At("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);const Jc=At("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const _A=At("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const zs=At("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const PA=At("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const vs=At("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);const IA=At("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const Kc=At("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const MA=At("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);const Fa=At("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const _u=At("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const RA=At("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);const Xr=At("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const hp=At("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const fs=At("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const zA=At("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);const LA=At("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);const fp=At("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);const Zp=At("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const OA=At("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const pp=At("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const ds=At("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Ls=At("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Tl=At("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Nr=At("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const FA=At("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Nv=G.createContext(void 0),BA="currency",UA="TRY",kv="currency_preference",VA=a=>a==="TRY"||a==="USD"||a==="EUR"||a==="GBP"?a:(a&&a.trim()&&he.warn("[CurrencyContext] Invalid currency in storage, falling back to default",{value:a}),UA),qA=()=>{const o=$u(kv,{fallbackToBase:!0})??Et.getItem(BA);return VA(o)},$A=({children:a})=>{const[o,t]=G.useState(qA);G.useEffect(()=>{he.debug("[CurrencyContext] Currency changed, saving to local storage:",o),pl(kv,o,{mirrorToBase:!0})},[o]);const f=l=>{he.info("[CurrencyContext] setCurrency called with:",l),t(l)},h=l=>{switch(l??o){case"TRY":return"";case"USD":return"$";case"EUR":return"";case"GBP":return"";default:return""}},n={currency:o,setCurrency:f,formatCurrency:(l,i)=>{const r=typeof l=="number"?l:0,s=i??o,c=h(s);switch(s){case"TRY":return`${c}${r.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})}`;case"USD":case"EUR":return`${c}${r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;case"GBP":return`${c}${r.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})}`;default:return`${c}${r.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})}`}},getCurrencySymbol:h};return e.jsx(Nv.Provider,{value:n,children:a})},Jr=()=>{const a=G.useContext(Nv);if(!a)throw new Error("useCurrency must be used within a CurrencyProvider");return a},jv=G.createContext(void 0),gp=a=>{const o=String(a||"").toLowerCase();return!o||o.startsWith("tr")||o.includes("turk")?"tr":o.startsWith("en")||o.includes("engl")?"en":o.startsWith("de")||o.includes("deut")||o.includes("german")?"de":o.startsWith("fr")||o.includes("fran")?"fr":"tr"},xp="i18nextLng",Sv="language_preference",HA=()=>{const a=wo();return a&&a!=="default"?`lang_${a}`:xp},KA=()=>{try{const a=$u(Sv,{fallbackToBase:!0}),o=HA(),t=o?Et.getItem(o):null,f=o===xp?null:Et.getItem(xp);return gp(a||t||f)}catch(a){return he.warn("Dil bilgisi yklenemedi, varsaylan kullanlacak",a),"tr"}};function GA({children:a}){const{i18n:o}=$t(),[t,f]=G.useState(KA),h=G.useRef(null),d=G.useCallback(i=>(h.current=i,o.changeLanguage(i).finally(()=>{h.current===i&&(h.current=null)})),[o]),n=[{code:"tr",name:"Trke",flag:""},{code:"en",name:"English",flag:""},{code:"de",name:"Deutsch",flag:""},{code:"fr",name:"Franais",flag:""}],l=i=>{const r=gp(i);d(r),f(r);try{pl(Sv,r,{mirrorToBase:!0})}catch(s){he.warn("Dil tercihi kaydedilemedi",s)}};return G.useEffect(()=>{const i=gp(t);h.current!==i&&o.language!==i&&d(i)},[t,o,d]),e.jsx(jv.Provider,{value:{currentLanguage:t,changeLanguage:l,languages:n},children:a})}function Vi(){const a=G.useContext(jv);if(a===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return a}class gl{static instance;consent=null;config={};constructor(){}static getInstance(){return gl.instance||(gl.instance=new gl),gl.instance}setConfig(o){this.config=o}updateConsent(o){const t=this.consent;this.consent=o,(!t||t.analytics!==o.analytics)&&(o.analytics?this.enableAnalytics():this.disableAnalytics()),(!t||t.marketing!==o.marketing)&&(o.marketing?this.enableMarketingTracking():this.disableMarketingTracking())}enableAnalytics(){this.config.googleAnalytics?.enabled&&this.config.googleAnalytics.measurementId&&this.loadGoogleAnalytics(this.config.googleAnalytics.measurementId),this.config.matomo?.enabled&&this.config.matomo.siteId&&this.config.matomo.url&&this.loadMatomo(this.config.matomo.siteId,this.config.matomo.url),he.info(" Analytics enabled")}disableAnalytics(){this.disableGoogleAnalytics(),this.disableMatomo(),he.warn(" Analytics disabled")}enableMarketingTracking(){this.config.hotjar?.enabled&&this.config.hotjar.hjid&&this.config.hotjar.hjsv&&this.loadHotjar(this.config.hotjar.hjid,this.config.hotjar.hjsv),he.info(" Marketing tracking enabled")}disableMarketingTracking(){this.disableHotjar(),he.warn(" Marketing tracking disabled")}loadGoogleAnalytics(o){if(document.querySelector(`script[src*="googletagmanager.com/gtag/js?id=${o}"]`))return;const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${o}`,document.head.appendChild(t),t.onload=()=>{const f=window;f.dataLayer=f.dataLayer||[];function h(...d){f.dataLayer.push(d)}h("js",new Date),h("config",o,{anonymize_ip:!0,cookie_expires:63072e3}),window.gtag=h}}disableGoogleAnalytics(){const o=this.config.googleAnalytics?.measurementId;o&&(window[`ga-disable-${o}`]=!0),this.clearCookies(["_ga","_ga_*","_gid","_gat_gtag_*"])}loadMatomo(o,t){if(window._paq)return;const f=window;f._paq=f._paq||{push:()=>{}},f._paq?.push(["trackPageView"]),f._paq?.push(["enableLinkTracking"]);const h=document.createElement("script");h.async=!0,h.src=`${t}/matomo.js`,document.head.appendChild(h),h.onload=()=>{const d=window;d._paq?.push(["setTrackerUrl",`${t}/matomo.php`]),d._paq?.push(["setSiteId",o])}}disableMatomo(){window._paq&&window._paq?.push(["optUserOut"]),this.clearCookies(["_pk_id*","_pk_ses*"])}loadHotjar(o,t){if(window.hj)return;const f=window;f.hj=f.hj||(function(...d){const n=f.hj;(n.q=n.q||[]).push(d)}),f._hjSettings={hjid:o,hjsv:t};const h=document.createElement("script");h.async=!0,h.src=`https://static.hotjar.com/c/hotjar-${o}.js?sv=${t}`,document.head.appendChild(h)}disableHotjar(){window.hj&&window.hj?.("stateChange","/cookie-opt-out"),this.clearCookies(["_hjid","_hjFirstSeen","_hjIncludedInSessionSample_*","_hjSession_*","_hjSessionUser_*"])}clearCookies(o){o.forEach(t=>{if(t.includes("*")){const f=t.replace("*","");document.cookie.split(";").forEach(h=>{const d=h.split("=")[0].trim();d.startsWith(f)&&this.deleteCookie(d)})}else this.deleteCookie(t)})}deleteCookie(o){document.cookie=`${o}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;const t=window.location.hostname;document.cookie=`${o}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.${t};`,document.cookie=`${o}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=${t};`}trackEvent(o,t,f,h){if(!this.consent?.analytics){console.warn(" Analytics tracking blocked - no consent");return}window.gtag&&window.gtag?.("event",o,{event_category:t,event_label:f,value:h}),window._paq&&window._paq?.push(["trackEvent",t,o,f,h])}trackPageView(o){if(!this.consent?.analytics){console.warn(" Page view tracking blocked - no consent");return}window.gtag&&window.gtag?.("config",this.config.googleAnalytics?.measurementId,{page_path:o||window.location.pathname}),window._paq&&(o&&window._paq?.push(["setCustomUrl",o]),window._paq?.push(["trackPageView"]))}hasAnalyticsConsent(){return this.consent?.analytics??!1}hasMarketingConsent(){return this.consent?.marketing??!1}}const yp=gl.getInstance(),Cv=G.createContext(void 0),nm=1,vf=`cookie_consent_v${nm}`,wf={necessary:!0,analytics:!1,marketing:!1,version:nm},WA=({children:a})=>{const[o,t]=G.useState(null),[f,h]=G.useState(!1),[d,n]=G.useState(!1),[l,i]=G.useState(!1);G.useEffect(()=>{if(typeof window>"u")return()=>{};window.location.hash==="#cookie-preferences"&&i(!0);const y=()=>{try{const O=window.location.hash;he.debug("[cookie] hashchange ->",O),O==="#cookie-preferences"?(he.debug("[cookie] setting showModal true via hash"),i(!0)):(he.debug("[cookie] hash cleared, closing modal"),i(!1))}catch(O){he.warn("[cookie] hash listener error",O)}};window.addEventListener("hashchange",y);const N=()=>{he.debug("[cookie] open-cookie-preferences event"),i(!0)},T=()=>{he.debug("[cookie] close-cookie-preferences event"),i(!1)};window.addEventListener("open-cookie-preferences",N),window.addEventListener("close-cookie-preferences",T);const _=Wn(Et.getItem(vf),"cookie consent cache");return _?_.version===nm?(t(_),h(!0),n(!1),yp.updateConsent(_),he.info(" Cookie consent loaded from storage:",_)):(he.warn(" Cookie consent version mismatch, showing banner"),n(!0)):(he.info(" No cookie consent found, showing banner"),n(!0)),()=>{window.removeEventListener("hashchange",y),window.removeEventListener("open-cookie-preferences",N),window.removeEventListener("close-cookie-preferences",T)}},[]);const r=y=>{const N={...y,timestamp:Date.now(),version:nm};if(Et.setItem(vf,JSON.stringify(N)),t(N),h(!0),n(!1),i(!1),typeof window<"u"&&window.location.hash==="#cookie-preferences"){const T=window.location.pathname+window.location.search;window.history.replaceState(null,"",T),he.debug("[cookie] cleared hash after save")}he.info(" Cookie consent saved:",N),yp.updateConsent(N),N.analytics&&!o?.analytics&&he.info(" Analytics consent granted, initializing..."),N.marketing&&!o?.marketing&&he.info(" Marketing consent granted, initializing...")},v={consent:o,hasConsent:f,showBanner:d,showModal:l,updateConsent:y=>{const N={...wf,...o,...y,necessary:!0,timestamp:Date.now()};r(N)},acceptAll:()=>{const y={...wf,analytics:!0,marketing:!0,timestamp:Date.now()};r(y)},rejectAll:()=>{const y={...wf,analytics:!1,marketing:!1,timestamp:Date.now()};r(y)},openModal:()=>{he.debug("[cookie] openModal called"),i(!0)},closeModal:()=>{if(he.debug("[cookie] closeModal called"),i(!1),typeof window<"u"&&window.location.hash==="#cookie-preferences"){const y=window.location.pathname+window.location.search;window.history.replaceState(null,"",y),he.debug("[cookie] cleared hash on close")}typeof window<"u"&&window.dispatchEvent(new Event("close-cookie-preferences"))},closeBanner:()=>{n(!1)},resetConsent:()=>{Et.removeItem(vf),t(null),h(!1),n(!0),i(!1),he.warn(" Cookie consent reset")}};return e.jsx(Cv.Provider,{value:v,children:a})},Xp=()=>{const a=G.useContext(Cv);if(!a)throw new Error("useCookieConsent must be used within a CookieConsentProvider");return a},Rn={getProfile:async()=>(await Xe.get("/users/me")).data,updateProfile:async a=>(await Xe.put("/users/me",a)).data,getNotificationPreferences:async()=>(await Xe.get("/users/me/notification-preferences")).data||{},updateNotificationPreferences:async a=>(await Xe.put("/users/me/notification-preferences",a)).data,changePassword:async(a,o)=>(await Xe.put("/users/me/password",{currentPassword:a,newPassword:o})).data,getTwoFactorStatus:async()=>(await Xe.get("/users/2fa/status")).data,setupTwoFactor:async()=>(await Xe.post("/users/2fa/setup",{})).data,enableTwoFactor:async a=>(await Xe.post("/users/2fa/enable",{token:a})).data,disableTwoFactor:async a=>(await Xe.post("/users/2fa/disable",{token:a})).data,regenerateTwoFactorBackupCodes:async()=>(await Xe.post("/users/2fa/backup-codes/regenerate",{})).data,terminateAllSessions:async()=>(await Xe.post("/users/sessions/terminate-all",{})).data},Av=G.createContext(void 0),Jp="notif_prefs_cache_last",po={invoiceReminders:!0,expenseAlerts:!0,salesNotifications:!0,lowStockAlerts:!0,quoteReminders:!0},eg=a=>`${Jp}:${a??"anon"}`,tg=()=>({tenantId:wo(),userId:wm()}),YA=()=>{const{tenantId:a,userId:o}=tg(),t=eg(o);try{const f=Rc(t,{tenantId:a,fallbackToBase:!0});if(f)return{...po,...f}}catch(f){he.warn("Tenant scoped notification prefs cache okunamad",f)}return null},QA=()=>{const{tenantId:a,userId:o}=tg(),t=eg(o),f=mi(t,a),h=new Set;return[f,t,Jp].forEach(d=>{d&&h.add(d)}),h},ZA=({children:a})=>{const[o,t]=G.useState(po),[f,h]=G.useState(!0),[d]=G.useState(300*1e3),{isAuthenticated:n}=Gs(),l=()=>{try{return wl({userIds:[wm()]})}catch(u){return he.warn("Legacy prefs okunamad",u),null}},i=()=>{const u=YA();if(u)return u;try{const m=Wn(Et.getItem(Jp),"notification preferences local cache");if(m)return{...po,...m}}catch(m){he.warn("Legacy notification preferences local cache okunamad",m)}try{const m=wl();if(m)return{...po,...m}}catch(m){he.warn("Scoped notification preferences cache okunamad",m)}return null},r=u=>{const{tenantId:m,userId:x}=tg(),b=eg(x);try{Tu(b,u,{tenantId:m,mirrorToBase:!0})}catch(p){he.warn("Notification preferences tenant cache yazlamad",p)}try{Hb(u,{tenantIds:[m],userIds:[x],includeDefaultTenant:!0})}catch(p){he.warn("Notification preferences cache helper yazlamad",p)}},s=G.useCallback(async()=>{if(!n){const u=i();u&&t(u),h(!1);return}h(!0);try{const u=await Rn.getNotificationPreferences();let m={...po,...u};const x=l();if(!Object.values(u||{}).some(p=>typeof p=="boolean")&&x)try{const p={...po,...x};await Rn.updateNotificationPreferences(p),m=p}catch(p){he.warn("Legacy bildirim tercihlerini backend ile senkron edemedik",p)}t(m),r(m)}catch(u){he.warn("Notification preferences yenilenemedi, cache kullanlacak",u);const m=i();m&&t(m)}finally{h(!1)}},[n]);G.useEffect(()=>{s()},[s,n]),G.useEffect(()=>{if(typeof window>"u")return()=>{};const u=n?setInterval(()=>{s()},d):null,m=QA(),x=b=>{if(!(!b.key||!m.has(b.key)))try{const p=Wn(b.newValue,`notification prefs storage event (${b.key})`);p&&t(v=>({...v,...p}))}catch(p){he.warn("Notification prefs storage event parse hatas",p)}};return window.addEventListener("storage",x),()=>{u&&clearInterval(u),window.removeEventListener("storage",x)}},[d,s,n]);const c=G.useCallback(async(u,m)=>{const x=o[u]??po[u]??!1,b={...o,[u]:m};t(b),r(b);try{await Rn.updateNotificationPreferences(b)}catch(p){he.error("Notification preference gncellenemedi, geri alnyor",p);const v={...b,[u]:x};t(v),r(v)}},[o]);return e.jsx(Av.Provider,{value:{prefs:o,loading:f,refresh:s,updatePref:c},children:a})},Tv=()=>{const a=G.useContext(Av);if(!a)throw new Error("useNotificationPreferences must be used within NotificationPreferencesProvider");return a};const XA=a=>!a||a.trim().startsWith("{")||a.trim().startsWith("[")||a.includes(':"')||!/^[A-Za-z0-9+/=\s]+$/.test(a)?!1:a.replace(/\s+/g,"").length%4===0;const JA=(a,o)=>{if(!a)return"";let t="";for(let f=0;f<a.length;f++)t+=String.fromCharCode(a.charCodeAt(f)^o.charCodeAt(f%o.length));return btoa(t)},e8=(a,o)=>{if(!a)return"";try{const t=atob(a);let f="";for(let h=0;h<t.length;h++)f+=String.fromCharCode(t.charCodeAt(h)^o.charCodeAt(h%o.length));return f}catch{return""}},Yx="default-key-change-me-please-use-secure-key",Qx=!1,Zx=!1,Ri={setItem:async(a,o)=>{try{if(!Qx){Et.setItem(a,o);return}let t;Zx&&window.crypto&&window.crypto.subtle||(t=JA(o,Yx)),Et.setItem(a,t)}catch(t){console.error("Storage setItem failed:",t)}},getItem:async a=>{try{const o=Et.getItem(a);if(!o)return null;if(!Qx||!XA(o))return o;if(!(Zx&&window.crypto&&window.crypto.subtle))return e8(o,Yx)}catch(o){return console.error("Storage getItem failed:",o),null}},removeItem:a=>{try{Et.removeItem(a)}catch(o){console.error("Storage removeItem failed:",o)}},setJSON:async(a,o)=>{try{const t=JSON.stringify(o);await Ri.setItem(a,t)}catch(t){console.error("Storage setJSON failed:",t)}},getJSON:async a=>{try{const o=await Ri.getItem(a);return o?JSON.parse(o):null}catch(o){return console.error("Storage getJSON failed:",o),null}}},os=a=>{if(a&&typeof a=="object"){const o=a;if(o.response?.data?.message)return Xx(o.response.data.message);if(o.message)return Xx(o.message);if(o.code==="NETWORK_ERROR")return ls.t("common.networkError",{defaultValue:"Balant hatas. Ltfen internet balantnz kontrol edin."})}return ls.t("common.unexpectedError",{defaultValue:"Beklenmeyen bir hata olutu. Ltfen tekrar deneyin."})},Xx=a=>{const o={"Fiscal period overlaps with existing period":ls.t("fiscalPeriods.validation.periodOverlap",{defaultValue:"Bu tarih aralnda zaten baka bir mali dnem tanml."}),"Period is already locked":ls.t("fiscalPeriods.errors.periodLocked",{defaultValue:"Bu dnem zaten kilitli durumda."}),"Period is not locked":ls.t("fiscalPeriods.errors.unlockFailed",{defaultValue:"Bu dnem zaten ak durumda."}),"Cannot delete a locked period":ls.t("fiscalPeriods.errors.operationNotAllowed",{defaultValue:"Kilitli dnem silinemez. nce dnem kilidini an."})},t={"Name already exists":"Bu isim zaten kullanlyor. Ltfen farkl bir isim sein.","Invalid date range":"Geersiz tarih aral. Biti tarihi balang tarihinden sonra olmaldr.","Start date cannot be in the past":"Balang tarihi gemite olamaz.","End date must be after start date":"Biti tarihi balang tarihinden sonra olmaldr.",Unauthorized:"Bu ilem iin yetkiniz bulunmuyor. Ltfen giri yapn.",Forbidden:"Bu ilemi gerekletirme yetkiniz yok.","Invalid credentials":"Kullanc ad veya ifre hatal.","Token expired":"Oturumunuz sona erdi. Ltfen tekrar giri yapn.","Network Error":"Balant hatas. Ltfen internet balantnz kontrol edin.","Request timeout":"stek zaman amna urad. Ltfen tekrar deneyin.","Server error":"Sunucu hatas. Ltfen daha sonra tekrar deneyin.","Not found":"Aradnz kayt bulunamad.","Bad request":"Geersiz istek. Ltfen girdiiniz bilgileri kontrol edin.","Internal server error":"Sunucu hatas. Ltfen tekrar deneyin.","Service unavailable":"Servis u anda kullanlamyor. Ltfen daha sonra tekrar deneyin."};for(const[f,h]of Object.entries(o))if(a.includes(f))return h;for(const[f,h]of Object.entries(t))if(a.includes(f))return h;if(a.includes("Cannot modify records in locked period")){const f=a.match(/"([^"]+)"/),h=f?f[1]:"kilitli dnem";return ls.t("fiscalPeriods.errors.operationNotAllowed",{defaultValue:`${h} kilitli olduu iin ilem yaplamaz. nce dnem kilidini anz.`})}return a},Am=async()=>(await Xe.get("/customers")).data,wP=async a=>(await Xe.get(`/customers/${a}`)).data,Jx=async a=>(await Xe.post("/customers",a)).data,t8=async(a,o)=>(await Xe.patch(`/customers/${a}`,o)).data,r8=async a=>{await Xe.delete(`/customers/${a}`)},bp=async()=>(await Xe.get("/products")).data,ey=async a=>(await Xe.post("/products",a)).data,ty=async(a,o)=>(await Xe.patch(`/products/${a}`,o)).data,s8=async a=>{await Xe.delete(`/products/${a}`)},n8=async()=>(await Xe.get("/invoices")).data,ll=async a=>(await Xe.get(`/invoices/${a}`)).data,ry=async a=>(await Xe.post("/invoices",a)).data,a8=async a=>(await Xe.post(`/invoices/from-quote/${a}`)).data,Nf=async(a,o)=>(await Xe.patch(`/invoices/${a}`,o)).data,i8=async a=>{await Xe.delete(`/invoices/${a}`)},o8=async(a,o)=>(await Xe.patch(`/invoices/${a}/void`,{reason:o})).data,l8=async a=>(await Xe.patch(`/invoices/${a}/restore`)).data,c8=async()=>(await Xe.get("/sales")).data,d8=async a=>(await Xe.get(`/sales/${a}`)).data,kf=async a=>(await Xe.post("/sales",a)).data,u8=async a=>(await Xe.post(`/sales/from-quote/${encodeURIComponent(String(a))}`)).data,m8=async(a,o)=>(await Xe.patch(`/sales/${a}`,o)).data,h8=async a=>{await Xe.delete(`/sales/${a}`)};var bo=(a=>(a.PENDING="pending",a.APPROVED="approved",a.PAID="paid",a.REJECTED="rejected",a))(bo||{});const f8=async()=>(await Xe.get("/expenses")).data,p8=async a=>(await Xe.post("/expenses",a)).data,g8=async(a,o)=>(await Xe.patch(`/expenses/${a}`,o)).data,x8=async(a,o)=>(await Xe.patch(`/expenses/${a}/status`,{status:o})).data,y8=async a=>{await Xe.delete(`/expenses/${a}`)},b8=async(a,o)=>(await Xe.patch(`/expenses/${a}/void`,{reason:o})).data,v8=async a=>(await Xe.patch(`/expenses/${a}/restore`)).data,w8=async()=>(await Xe.get("/suppliers")).data,N8=async a=>(await Xe.post("/suppliers",a)).data,k8=async(a,o)=>(await Xe.patch(`/suppliers/${a}`,o)).data,j8=async a=>{await Xe.delete(`/suppliers/${a}`)},S8=({user:a={name:"Demo User",email:"demo@moneyflow.com"},onLogout:o,onNewInvoice:t,onNewSale:f,activePage:h="dashboard",customTitle:d,onToggleSidebar:n,notifications:l=[],unreadCount:i=0,isNotificationsOpen:r=!1,onToggleNotifications:s,onCloseNotifications:c,onNotificationClick:u,onOpenSettingsProfile:m,appArea:x="finance",onAppAreaChange:b})=>{const{currentLanguage:p,changeLanguage:v,languages:y}=Vi(),{t:N}=$t(),T=(D,R,L)=>{try{const Y=N(D,L);return Y===D?R:String(Y)}catch{return R}},_=(D,R,L)=>{for(const Y of D)try{const X=N(Y,L);if(X!==Y)return String(X)}catch{}return R},O=(D,R)=>{if(!D||typeof D!="string")return D;const L=D,Y=L.trim();if(!(Y.includes(".")&&!/\s/.test(Y)))return L;try{let ae=N(Y,R||{});return ae===Y?L:((!R||Object.keys(R).length===0)&&(ae=ae.replace(/\{\{[^}]+\}\}/g,"").replace(/\s{2,}/g," ").replace(/\s+([:;,.-])/g,"$1").trim()),ae)}catch{return L}},H=D=>{if(D.startsWith("crm-deal:"))return N("crm.dealDetail.title");if(D.startsWith("crm-activities-contact:")||D.startsWith("crm-activities:")||D.startsWith("crm-activities-opp:"))return N("sidebar.crmActivities");if(D.startsWith("crm-tasks:"))return _(["sidebar.crmTasks","crm.tasks.title"],"Tasks");if(D.startsWith("crm-tasks-opp:"))return _(["sidebar.crmTasks","crm.tasks.title"],"Tasks");const R={summary:"sidebar.summary",dashboard:"sidebar.dashboard",invoices:"sidebar.invoices",expenses:"sidebar.expenses",customers:"sidebar.customers",products:"sidebar.products",suppliers:"sidebar.suppliers",banks:"sidebar.banks",sales:"sidebar.sales","crm-dashboard":"sidebar.crmDashboard","crm-pipeline":"sidebar.crmPipeline","crm-leads":"sidebar.crmLeads","crm-contacts":"sidebar.crmContacts","crm-activities":"sidebar.crmActivities","crm-tasks":"sidebar.crmTasks",quotes:"sidebar.quotes",reports:"sidebar.reports","general-ledger":"sidebar.accounting","chart-of-accounts":"sidebar.chartOfAccounts",archive:"sidebar.archive",settings:"sidebar.settings"};return R[D]?N(R[D]):D.split("-").map(L=>L.charAt(0).toUpperCase()+L.slice(1)).join(" ")},F=d&&d.trim().length>0?d:H(h),V=G.useRef(null),q=G.useRef(null),W=G.useRef(null),[B,E]=G.useState(!1);G.useEffect(()=>{if(!r)return;const D=L=>{const Y=L.target;q.current&&!q.current.contains(Y)&&V.current&&!V.current.contains(Y)&&c?.()},R=L=>{L.key==="Escape"&&c?.()};return document.addEventListener("mousedown",D),document.addEventListener("keydown",R),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("keydown",R)}},[r,c]),G.useEffect(()=>{if(!B)return;const D=L=>{const Y=L.target;W.current&&!W.current.contains(Y)&&E(!1)},R=L=>{L.key==="Escape"&&E(!1)};return document.addEventListener("mousedown",D),document.addEventListener("keydown",R),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("keydown",R)}},[B]);const P={info:"bg-blue-500",warning:"bg-amber-500",success:"bg-green-500",danger:"bg-red-500"},A=y.find(D=>D.code===p)??y[0],k=D=>{v(D),E(!1)},j=D=>{try{return!D||typeof D!="string"?D:D.includes("{{")&&D.includes("}}")?D.replace(/\{\{[^}]+\}\}/g,"").replace(/\s{2,}/g," ").replace(/\s+([:;,.-])/g,"$1").trim():D}catch{return D}},S=D=>D?/^[\s:;.,-]*$/.test(D):!0,C=D=>{const R=D.i18nParams||{},L=[];R.customerName&&L.push(String(R.customerName)),R.summary&&L.push(String(R.summary));const Y=R.totalAmount!=null?String(R.totalAmount):"";return L.length===0&&!Y?N("notifications.sales.created.title"):L.length>0?`${L.join(" - ")}${Y?`: ${Y}`:""}`:Y};return e.jsx("header",{className:"sticky z-40 bg-white px-4 py-3 shadow-sm sm:px-6",style:{top:"var(--announcement-bar-height, 0px)"},children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n&&e.jsx("button",{type:"button",onClick:n,className:"rounded-lg border border-gray-200 p-2 text-gray-600 transition-colors hover:bg-gray-100 hover:text-gray-800 md:hidden","aria-label":"Meny a",children:e.jsx(xv,{className:"h-5 w-5"})}),b&&e.jsx("div",{className:"inline-flex items-center rounded-lg border border-gray-200 bg-white p-1 shadow-sm",role:"group","aria-label":N("header.areas.label"),children:[{key:"summary",label:N("header.areas.summary")},{key:"crm",label:N("header.areas.crm")},{key:"finance",label:N("header.areas.finance")}].map(D=>{const R=x===D.key;return e.jsx("button",{type:"button",onClick:()=>b(D.key),className:`rounded-md px-3 py-1.5 text-sm font-semibold transition-colors ${R?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,"aria-pressed":R,children:D.label},D.key)})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 capitalize sm:text-2xl",children:F})]}),e.jsxs("div",{className:"flex flex-1 flex-wrap items-center justify-end gap-2 md:flex-nowrap",children:[e.jsxs("div",{className:"hidden items-center gap-2 lg:flex",children:[e.jsxs("button",{type:"button",onClick:t,className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(Ks,{className:"mr-2 h-4 w-4"}),N("header.newInvoice")]}),e.jsxs("button",{type:"button",onClick:f,className:"inline-flex items-center rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-green-700",children:[e.jsx(Ks,{className:"mr-2 h-4 w-4"}),N("header.newSale")]})]}),e.jsx("div",{className:"order-last w-full sm:w-auto md:order-none md:max-w-xs",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 transform text-gray-400"}),e.jsx("input",{type:"text",placeholder:N("header.search"),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative block",ref:W,children:[e.jsxs("button",{type:"button",onClick:()=>E(D=>!D),className:"flex items-center gap-2 md:gap-3 rounded-xl border border-gray-200 bg-white px-3 py-2 shadow-sm transition hover:border-blue-200 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-200","aria-haspopup":"listbox","aria-expanded":B,"aria-label":"Dil seimi",children:[e.jsx(oa,{className:"h-4 w-4 text-blue-500","aria-hidden":!0}),e.jsx("span",{className:"md:hidden text-sm font-medium text-gray-700",children:A.flag||A.code.toUpperCase()}),e.jsxs("div",{className:"hidden md:flex flex-col text-left",children:[e.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide text-gray-400",children:N("header.language")}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:A.name})]})]}),B&&e.jsx("div",{className:"absolute right-0 z-[60] mt-2 w-44 overflow-hidden rounded-xl border border-gray-200 bg-white shadow-lg",children:e.jsx("ul",{className:"divide-y divide-gray-100",role:"listbox","aria-label":"Dil seenekleri",children:y.map(D=>{const R=D.code===p,L=R?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50";return e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>k(D.code),className:`flex w-full items-center justify-between px-4 py-2 text-sm transition ${L}`,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:D.flag}),e.jsx("span",{children:D.name})]}),R&&e.jsx(cs,{className:"h-4 w-4 text-blue-500"})]})},D.code)})})})]}),s&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",ref:V,onClick:s,className:`rounded-lg p-2 transition-colors ${r?"text-blue-600 hover:bg-blue-50":"text-gray-400 hover:bg-gray-100 hover:text-gray-600"}`,"aria-label":N("header.notifications"),"aria-expanded":r,children:[e.jsx(hv,{className:"h-5 w-5"}),i>0&&e.jsx("span",{className:"absolute -right-1 -top-1 inline-flex min-w-[1.25rem] items-center justify-center rounded-full bg-red-500 px-1 text-xs font-semibold text-white",children:i>9?"9+":i})]}),r&&e.jsxs("div",{ref:q,className:"absolute right-0 z-50 mt-2 w-80 origin-top-right rounded-lg border border-gray-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 px-4 py-3",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:N("header.notifications")}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date().toLocaleDateString(p)})]}),l.length===0?e.jsx("div",{className:"px-4 py-6 text-center text-sm text-gray-500",children:N("header.noNotifications")}):e.jsx("div",{className:"max-h-80 divide-y divide-gray-100 overflow-y-auto",children:l.map(D=>{let R=D.title,L=D.description;D.relatedId==="twofa-reminder"?(R=_(["security.twofa.reminderTitle","sales.security.twofa.reminderTitle"],R,D.i18nParams),L=_(["security.twofa.reminderDesc","sales.security.twofa.reminderDesc"],L,D.i18nParams)):D.i18nTitleKey||D.i18nDescKey?(D.i18nTitleKey&&D.i18nParams&&(R=T(D.i18nTitleKey,R,D.i18nParams)),D.i18nDescKey&&D.i18nParams&&(L=T(D.i18nDescKey,L,D.i18nParams))):D.relatedId?.startsWith("out-of-stock-")?(R=T("notifications.products.outOfStock.title",R),L=T("notifications.products.outOfStock.desc",L,D.i18nParams)):D.relatedId?.startsWith("low-stock-")?(R=T("notifications.products.lowStock.title",R),L=T("notifications.products.lowStock.desc",L,D.i18nParams)):D.relatedId?.startsWith("invoice-")?R=T("notifications.invoices.overdue.title",R):D.relatedId?.startsWith("expense-")?R=T("notifications.expenses.overdue.title",R):!D.i18nTitleKey&&D.link==="expenses"?(R=T("notifications.expenses.created.title",R),D.i18nParams&&(L=T("notifications.expenses.created.desc",L,D.i18nParams))):!D.i18nTitleKey&&D.link==="customers"?(R=T("notifications.customers.created.title",R),D.i18nParams&&(L=T("notifications.customers.created.desc",L,D.i18nParams))):!D.i18nTitleKey&&D.link==="suppliers"?(R=T("notifications.suppliers.created.title",R),D.i18nParams&&(L=T("notifications.suppliers.created.desc",L,D.i18nParams))):!D.i18nTitleKey&&D.link==="invoices"?(R=T("notifications.invoices.created.title",R),D.i18nParams&&(L=T("notifications.invoices.created.desc",L,D.i18nParams))):!D.i18nTitleKey&&D.link==="sales"?(R=T("notifications.sales.created.title",R),D.i18nParams&&(L=T("notifications.sales.created.desc",L,D.i18nParams))):D.relatedId?.startsWith("quote-expired-")?(R=T("notifications.quotes.expired.title",R),L=T("notifications.quotes.expired.desc",L,D.i18nParams)):D.relatedId?.startsWith("quote-due-")&&(R=T("notifications.quotes.dueSoon.title",R),L=T("notifications.quotes.dueSoon.desc",L,D.i18nParams)),R=O(R,D.i18nParams),L=O(L,D.i18nParams),R=j(R),L=j(L),S(L)&&((!D.i18nParams||Object.keys(D.i18nParams).length===0)&&D.link==="sales"?L=C(D):L=N("notifications.sales.created.title"));const Y=D.type&&P[D.type]?P[D.type]:"bg-gray-300";return e.jsxs("button",{type:"button",onClick:()=>{u&&u(D)},className:"flex w-full gap-3 px-4 py-3 text-left transition-colors hover:bg-gray-50 focus:bg-gray-100 focus:outline-none",children:[e.jsx("span",{className:`mt-1 inline-flex h-2.5 w-2.5 flex-shrink-0 rounded-full ${Y}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:R}),e.jsx("p",{className:"text-xs text-gray-500",children:L}),e.jsx("span",{className:"mt-1 block text-xs text-gray-400",children:D.firstSeenAt?new Date(D.firstSeenAt).toLocaleString(p):D.time})]})]},D.id)})})]})]}),e.jsxs("button",{type:"button",onClick:()=>m&&m(),className:"flex items-center gap-2 rounded-lg p-2 transition-colors hover:bg-gray-100",title:N("sidebar.settings"),children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-600",children:e.jsx(ds,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"hidden text-left sm:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.email})]})]}),e.jsx("button",{type:"button",onClick:o,className:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-gray-100 hover:text-red-600",title:N("header.logout"),children:e.jsx(SA,{className:"h-5 w-5"})})]})]})]})})};function Tm({className:a="h-8 w-auto"}){const[o,t]=_t.useState("svg");return _t.useEffect(()=>{fetch("/logo.svg",{method:"HEAD"}).then(f=>{if(f.ok)t("svg");else throw new Error("no svg")}).catch(()=>{fetch("/logo.png",{method:"HEAD"}).then(f=>{f.ok?t("png"):t("none")}).catch(()=>t("none"))})},[]),o==="svg"?e.jsx("img",{src:"/logo.svg",alt:"Comptario",className:a}):o==="png"?e.jsx("img",{src:"/logo.png",alt:"Comptario",className:a}):e.jsx("span",{className:`font-semibold text-gray-900 ${a.replace(/h-\d+\s?|w-\d+\s?/g,"")}`,children:"Comptario"})}function C8({currentPage:a,onPageChange:o,invoices:t=[],expenses:f=[],appArea:h="finance",isOpen:d=!1,onClose:n}){const{t:l}=$t(),i=t.filter(u=>u.status!=="paid"&&u.status!=="overdue").length,r=f.filter(u=>u.status==="draft"||u.status==="approved").length,s=h==="summary"?[{icon:bf,label:l("sidebar.summary"),page:"summary"}]:h==="crm"?[{icon:bf,label:l("sidebar.crmDashboard"),page:"crm-dashboard"},{icon:NA,label:l("sidebar.crmPipeline"),page:"crm-pipeline"},{icon:fs,label:l("sidebar.crmOpportunities"),page:"crm-opportunities"},{icon:$x,label:l("sidebar.crmLeads"),page:"crm-leads"},{icon:ts,label:l("sidebar.customers"),page:"customers"},{icon:$x,label:l("sidebar.crmContacts"),page:"crm-contacts"},{icon:un,label:l("sidebar.crmActivities"),page:"crm-activities"},{icon:aA,label:l("sidebar.crmTasks"),page:"crm-tasks"},{icon:Fr,label:l("sidebar.quotes"),page:"quotes"},{icon:Wx,label:l("sidebar.reports"),page:"reports"}]:[{icon:bf,label:l("sidebar.dashboard"),page:"dashboard"},{icon:Fr,label:l("sidebar.invoices"),page:"invoices",badge:i>0?i:null},{icon:un,label:l("sidebar.expenses"),page:"expenses",badge:r>0?r:null},{icon:bn,label:l("sidebar.products"),page:"products"},{icon:ts,label:l("sidebar.suppliers"),page:"suppliers"},{icon:ja,label:l("sidebar.banks"),page:"banks"},{icon:fs,label:l("sidebar.sales"),page:"sales"},{icon:Wx,label:l("sidebar.reports"),page:"reports"},{icon:Kp,label:l("sidebar.accounting"),page:"general-ledger"},{icon:Eu,label:l("sidebar.chartOfAccounts"),page:"chart-of-accounts"},{icon:uv,label:l("sidebar.archive"),page:"archive"},{icon:Jc,label:l("sidebar.settings"),page:"settings"}],c=u=>{o(u),n&&n()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 z-40 bg-black/40 transition-opacity md:hidden ${d?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:n,"aria-hidden":!d}),e.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 flex w-64 transform flex-col border-r border-gray-200 bg-white shadow-md transition-transform duration-200 md:static md:z-auto md:translate-x-0 md:shadow-none ${d?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-center border-b border-gray-200 p-6",children:[e.jsx(Tm,{className:"h-24 w-auto"}),n&&e.jsx("button",{type:"button",onClick:n,className:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600 md:hidden","aria-label":l("sidebar.close"),children:e.jsx(Nr,{className:"h-5 w-5"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:s.map((u,m)=>e.jsxs("button",{type:"button",onClick:()=>c(u.page),className:`flex w-full items-center justify-between rounded-lg px-4 py-3 text-left transition-colors ${a===u.page?"border-r-4 border-blue-600 bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsxs("span",{className:"flex items-center space-x-3",children:[e.jsx(u.icon,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:u.label})]}),u.badge&&e.jsx("span",{className:"rounded-full bg-red-100 px-2 py-1 text-xs font-medium text-red-600",children:u.badge})]},m))})]})})]})}function A8({title:a,value:o,change:t,changeType:f,icon:h,color:d,subtitle:n}){const{t:l}=$t(),i={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",red:"bg-red-50 text-red-600 border-red-200",purple:"bg-purple-50 text-purple-600 border-purple-200",orange:"bg-orange-50 text-orange-600 border-orange-200"},r={blue:"bg-blue-100",green:"bg-green-100",red:"bg-red-100",purple:"bg-purple-100",orange:"bg-orange-100"};return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 transition-all duration-200 md:hover:shadow-lg md:hover:scale-105",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:a}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o})]}),e.jsx("div",{className:`p-3 rounded-xl ${r[d]}`,children:e.jsx(h,{className:`w-6 h-6 ${i[d].split(" ")[1]}`})})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-1",children:[f==="increase"?e.jsx(fs,{className:"w-4 h-4 text-green-500"}):e.jsx(hp,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${f==="increase"?"text-green-600":"text-red-600"}`,children:t}),e.jsx("span",{className:"text-gray-500 text-sm",children:n||l("stats.thisMonth")})]})]})}function T8({sales:a=[],expenses:o=[],invoices:t=[]}){const{formatCurrency:f}=Jr(),{t:h,i18n:d}=$t(),[n,l]=G.useState(!0),i=()=>{const u=new Date,m=[];for(let x=0;x<=5;x++){const b=new Date(u.getFullYear(),u.getMonth()-x,1),p=b.getMonth(),v=`months.short.${["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"][p]}`;m.push({month:h(v),year:b.getFullYear(),monthIndex:p})}return m},s=G.useMemo(()=>i(),[h]).map(u=>{let m=0;const x=t.filter(y=>{if(y.status!=="paid")return!1;const N=new Date(y.issueDate);return N.getMonth()===u.monthIndex&&N.getFullYear()===u.year});m+=x.reduce((y,N)=>y+(Number(N.total)||0),0);const b=a.filter(y=>{if(String(y?.status).toLowerCase()!=="completed")return!1;const N=new Date(y?.date);return N.getMonth()===u.monthIndex&&N.getFullYear()===u.year?!(!!y?.invoiceId||t.some(O=>String(O?.saleId||"")===String(y?.id||""))):!1});m+=b.reduce((y,N)=>y+(Number(N.amount)||0),0);const v=o.filter(y=>{if(y.status!=="paid")return!1;const N=new Date(y.expenseDate);return N.getMonth()===u.monthIndex&&N.getFullYear()===u.year}).reduce((y,N)=>y+(Number(N.amount)||0),0);return{month:u.month,income:m,expense:v}}),c=Math.max(...s.flatMap(u=>[u.income,u.expense]));return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.language==="tr"?"Aylk Gelir/Gider":d.language==="en"?"Monthly Income/Expense":d.language==="de"?"Monatliche Einnahmen/Ausgaben":d.language==="fr"?"Revenus/Dpenses Mensuels":"Monthly Income/Expense"}),e.jsx("p",{className:"text-sm text-gray-500",children:d.language==="tr"?"Son 6 ay performans (en yeni  en eski)":d.language==="en"?"Last 6 months performance (newest  oldest)":d.language==="de"?"Leistung der letzten 6 Monate (neueste  lteste)":d.language==="fr"?"Performance des 6 derniers mois (plus rcent  plus ancien)":"Last 6 months performance (newest  oldest)"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:d.language==="tr"?"Gelir":d.language==="en"?"Income":d.language==="de"?"Einkommen":d.language==="fr"?"Revenu":"Income"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:d.language==="tr"?"Gider":d.language==="en"?"Expense":d.language==="de"?"Ausgaben":d.language==="fr"?"Dpense":"Expense"})]}),e.jsx("button",{onClick:()=>l(!n),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:n?d.language==="tr"?"Grafii Gizle":d.language==="en"?"Hide Chart":d.language==="de"?"Diagramm Ausblenden":d.language==="fr"?"Masquer le Graphique":"Hide Chart":d.language==="tr"?"Grafii Gster":d.language==="en"?"Show Chart":d.language==="de"?"Diagramm Anzeigen":d.language==="fr"?"Afficher le Graphique":"Show Chart",children:n?e.jsx($c,{className:"w-4 h-4 text-gray-600"}):e.jsx(Zr,{className:"w-4 h-4 text-gray-600"})})]})]}),n&&e.jsx("div",{className:"space-y-4",children:s.map((u,m)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:u.month}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Net: ",f(u.income-u.expense)]})]}),e.jsxs("div",{className:"relative h-8 bg-gray-100 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 h-4 bg-blue-500 rounded-sm",style:{width:`${u.income/c*100}%`}}),e.jsx("div",{className:"absolute bottom-0 left-0 h-4 bg-red-500 rounded-sm",style:{width:`${u.expense/c*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:f(u.income)}),e.jsx("span",{children:f(u.expense)})]})]},m))}),!n&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Zr,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:d.language==="tr"?"Grafik gizlendi":d.language==="en"?"Chart hidden":d.language==="de"?"Diagramm ausgeblendet":d.language==="fr"?"Graphique masqu":"Chart hidden"})]})]})}const Kr=a=>{const o=String(a||"").toLowerCase().trim(),t=o.startsWith("status.")?o.slice(7):o;return{canceled:"cancelled",cancelled:"cancelled",void:"cancelled",voided:"cancelled"}[t]||t},zt=(a,o)=>{try{const t=Kr(o),f=a?.i18n?.resolvedLanguage||a?.i18n?.language||Et.getItem("i18nextLng")||(typeof document<"u"?document.documentElement.lang:"")||(typeof navigator<"u"?navigator.language:"")||"",h=String(f).slice(0,2).toLowerCase(),d={tr:{paid:"dendi",unpaid:"denmedi",pending:"Bekliyor",overdue:"Gecikmi",draft:"Taslak",sent:"Gnderildi",approved:"Onayland",rejected:"Reddedildi",cancelled:"ptal Edildi",completed:"Tamamland",active:"Aktif",inactive:"Pasif",viewed:"Grntlendi",accepted:"Kabul Edildi",declined:"Reddedildi",expired:"Sresi Doldu",invoiced:"Faturaland",created:"Oluturuldu",refunded:"ade Edildi"},en:{paid:"Paid",unpaid:"Unpaid",pending:"Pending",overdue:"Overdue",draft:"Draft",sent:"Sent",approved:"Approved",rejected:"Rejected",cancelled:"Cancelled",completed:"Completed",active:"Active",inactive:"Inactive",viewed:"Viewed",accepted:"Accepted",declined:"Declined",expired:"Expired",invoiced:"Invoiced",created:"Created",refunded:"Refunded"},de:{paid:"Bezahlt",unpaid:"Unbezahlt",pending:"Ausstehend",overdue:"berfllig",draft:"Entwurf",sent:"Gesendet",approved:"Genehmigt",rejected:"Abgelehnt",cancelled:"Storniert",completed:"Abgeschlossen",active:"Aktiv",inactive:"Inaktiv",viewed:"Angesehen",accepted:"Akzeptiert",declined:"Abgelehnt",expired:"Abgelaufen",invoiced:"Fakturiert",created:"Erstellt",refunded:"Erstattet"},fr:{paid:"Pay",unpaid:"Impay",pending:"En Attente",overdue:"En Retard",draft:"Brouillon",sent:"Envoy",approved:"Approuv",rejected:"Rejet",cancelled:"Annul",completed:"Termin",active:"Actif",inactive:"Inactif",viewed:"Consult",accepted:"Accept",declined:"Dclin",expired:"Expir",invoiced:"Factur",created:"Cr",refunded:"Rembours"}};if(d[h]?.[t])return d[h][t];const n=a(`common:status.${t}`);if(n&&n!==`status.${t}`&&n!==`common:status.${t}`&&n!==t)return n;const l=a(`status:${t}`);if(l&&l!==t&&l!==`status:${t}`)return l;const i=a(t,{ns:"status"});if(i&&i!==t)return i;const r=a(t,{ns:"common"});return r&&r!==t?r:t.charAt(0).toUpperCase()+t.slice(1)}catch(t){return console.warn("[i18n][status] resolveStatusLabel failed, returning raw key.",t),o}};function E8({invoices:a=[],expenses:o=[],sales:t=[],quotes:f=[],onViewInvoice:h,onEditInvoice:d,onDownloadInvoice:n,onViewExpense:l,onEditExpense:i,onDownloadExpense:r,onViewSale:s,onEditSale:c,onDownloadSale:u,onViewQuote:m,onViewAllTransactions:x}){const{formatCurrency:b}=Jr(),{t:p,i18n:v}=$t(),y=H=>H==="TRY"||H==="USD"||H==="EUR"||H==="GBP",N=G.useMemo(()=>{const H=E=>{if(!E)return"";const P=E instanceof Date?E:new Date(E);return Number.isNaN(P.getTime())?"":P.toLocaleDateString(v.language,{day:"2-digit",month:"short",year:"numeric"})},F=E=>{const P=Number(E),A=Number.isFinite(P)?P:0;return b(A)},V=E=>{if(!E)return null;const P=E instanceof Date?E:new Date(E);return Number.isNaN(P.getTime())?null:P},q=(E,P)=>!E||!P?!1:E.getFullYear()===P.getFullYear()&&E.getMonth()===P.getMonth()&&E.getDate()===P.getDate(),W=(E,P)=>{const A=V(E?.[P]),k=V(E?.createdAt),j=V(E?.updatedAt);return A?q(k,A)?k:q(j,A)?j:A:k||j||new Date(0)};return[...a.map((E,P)=>{const A=E.invoiceNumber||E.id||E.createdAt||`invoice-${P}`,k=E.customer?.name||E.customerName||p("dashboard.noCustomer"),j=E.issueDate||E.createdAt||E.updatedAt;return{id:String(A),customer:k,amount:F(E.total),status:E.status,date:H(j),type:"invoice",originalData:E,sortDate:W(E,"issueDate")}}),...o.map((E,P)=>{const A=E.expenseNumber||E.id||E.createdAt||`expense-${P}`,k=E.description||p("dashboard.noCustomer"),j=E.expenseDate||E.date||E.createdAt;return{id:String(A),customer:k,amount:F(E.amount),status:E.status,date:H(j),type:"expense",originalData:E,sortDate:W(E,"expenseDate")}}),...t.map((E,P)=>{const A=E.saleNumber||E.id||E.createdAt||`sale-${P}`,k=E.saleNumber?String(A):`SAL-${String(A)}`,j=E.date||E.saleDate||E.createdAt;return{id:k,customer:E.customerName||p("dashboard.noCustomer"),amount:F(E.amount??E.total),status:E.status,date:H(j),type:"sale",originalData:E,sortDate:W(E,"date")}}),...f.map((E,P)=>{const A=E.quoteNumber||E.id||E.createdAt||`quote-${P}`,k=E.quoteNumber?String(A):`Q-${String(A)}`,j=E.issueDate||E.createdAt||E.updatedAt,S=y(E.currency)?E.currency:void 0;return{id:k,customer:E.customerName||p("dashboard.noCustomer"),amount:b(Number(E.total)||0,S),status:E.status,date:H(j),type:"quote",originalData:E,sortDate:W(E,"issueDate")}})].sort((E,P)=>P.sortDate.getTime()-E.sortDate.getTime()).slice(0,3)},[a,o,t,f,p,b,v.language]),T=(H,F)=>{const V=Kr(H||"unknown");if(F==="quote"){const B=(A,k)=>{const j=p(A);return j===A?p(`common:${k}`):j};return{draft:{label:B("quotes.statusLabels.draft","status.draft"),class:"bg-gray-100 text-gray-800"},sent:{label:B("quotes.statusLabels.sent","status.sent"),class:"bg-blue-100 text-blue-800"},viewed:{label:B("quotes.statusLabels.viewed","status.viewed"),class:"bg-indigo-100 text-indigo-800"},accepted:{label:B("quotes.statusLabels.accepted","status.accepted"),class:"bg-green-100 text-green-800"},declined:{label:B("quotes.statusLabels.declined","status.declined"),class:"bg-red-100 text-red-800"},expired:{label:B("quotes.statusLabels.expired","status.expired"),class:"bg-yellow-100 text-yellow-800"}}[V]||{label:p(`common:status.${V}`,V),class:"bg-gray-100 text-gray-800"}}return{paid:{label:zt(p,"paid"),class:"bg-green-100 text-green-800"},completed:{label:zt(p,"completed"),class:"bg-green-100 text-green-800"},pending:{label:zt(p,"pending"),class:"bg-yellow-100 text-yellow-800"},overdue:{label:zt(p,"overdue"),class:"bg-red-100 text-red-800"},draft:{label:zt(p,"draft"),class:"bg-gray-100 text-gray-800"},sent:{label:zt(p,"sent"),class:"bg-blue-100 text-blue-800"},approved:{label:zt(p,"approved"),class:"bg-blue-100 text-blue-800"},cancelled:{label:zt(p,"cancelled"),class:"bg-red-100 text-red-800"}}[V]||{label:zt(p,V),class:"bg-gray-100 text-gray-800"}},_=H=>H==="invoice"?e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:"F"})}):H==="expense"?e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-red-600 text-xs font-bold",children:"G"})}):H==="sale"?e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 text-xs font-bold",children:"S"})}):H==="quote"?e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 text-xs font-bold",children:"T"})}):e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:"F"})}),O=H=>{H.type==="invoice"?h?.(H.originalData):H.type==="expense"?l?.(H.originalData):H.type==="sale"?s?.(H.originalData):H.type==="quote"&&m?.(H.originalData)};return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p("dashboard.recentTransactions")}),e.jsx("p",{className:"text-sm text-gray-500",children:p("dashboard.lastTransactions").replace("{count}",N.length.toString())})]}),x&&e.jsxs("button",{onClick:x,className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:[p("dashboard.viewAll")," "]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:p("transactions.transaction")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:p("transactions.customerDescription")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:p("transactions.amount")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:p("transactions.status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:p("transactions.date")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:p("transactions.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:p("transactions.noTransactions")})}):N.map(H=>{const F=T(H.status,H.type),V=H.type==="expense"?"-":"+";return e.jsxs("tr",{onClick:()=>O(H),className:"hover:bg-gray-50 transition-colors",style:{cursor:"pointer"},children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[_(H.type),e.jsx("span",{className:"text-sm text-gray-900",children:H.id})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:H.customer})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`text-sm font-semibold ${H.type==="expense"?"text-red-600":"text-green-600"}`,children:[V,H.amount]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F.class}`,children:F.label})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.date})]},H.id)})})]})})]})}function D8({onNewInvoice:a,onNewExpense:o,onNewSale:t,onNewQuote:f,onNewCustomer:h,onNewProduct:d,onViewCustomers:n,onViewSuppliers:l,onViewBanks:i,onViewProducts:r,customers:s=[],suppliers:c=[],banks:u=[],products:m=[]}){const{t:x}=$t(),b=m.length,p=[{title:x("quickActions.newInvoice"),description:x("quickActions.newInvoiceDesc"),icon:Fr,color:"bg-blue-500 hover:bg-blue-600",onClick:a},{title:x("quickActions.newExpense"),description:x("quickActions.newExpenseDesc"),icon:un,color:"bg-red-500 hover:bg-red-600",onClick:o},{title:x("quickActions.newSale"),description:x("quickActions.newSaleDesc"),icon:fs,color:"bg-green-500 hover:bg-green-600",onClick:t},...f?[{title:x("quickActions.newQuote"),description:x("quickActions.newQuoteDesc"),icon:bv,color:"bg-indigo-500 hover:bg-indigo-600",onClick:f}]:[],{title:x("quickActions.newCustomer"),description:x("quickActions.newCustomerDesc"),icon:Ls,color:"bg-purple-500 hover:bg-purple-600",onClick:h},{title:x("quickActions.newProduct"),description:x("quickActions.newProductDesc"),icon:bn,color:"bg-amber-500 hover:bg-amber-600",onClick:d}],v=[{label:x("quickActions.customers"),value:s.length,icon:Ls,accent:"text-purple-600",onClick:n},{label:x("quickActions.suppliers"),value:c.length,icon:ts,accent:"text-orange-500",onClick:l},{label:x("quickActions.banks"),value:u.length,icon:ja,accent:"text-emerald-500",onClick:i},{label:x("quickActions.products"),value:b,icon:bn,accent:"text-amber-500",onClick:r}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:x("dashboard.quickActions")}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:p.map((y,N)=>e.jsxs("button",{type:"button",onClick:y.onClick,className:`${y.color} rounded-lg px-4 py-4 text-left text-white shadow transition-all duration-200 md:hover:scale-[1.02] md:hover:shadow-lg h-28`,children:[e.jsx("div",{className:"h-6 flex items-center mb-3",children:e.jsx("div",{className:"text-sm font-semibold",children:y.title})}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(y.icon,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("div",{className:"text-xs opacity-90 leading-normal",children:y.description})]})]},N))})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6",children:[e.jsx("h4",{className:"mb-4 text-sm font-semibold uppercase tracking-wide text-gray-500",children:x("dashboard.quickAccess")}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:v.map((y,N)=>e.jsxs("button",{type:"button",onClick:y.onClick,className:"flex flex-col items-start rounded-lg border border-gray-100 bg-gray-50 p-3 text-left transition-colors hover:border-gray-200 hover:bg-gray-100",children:[e.jsxs("div",{className:`mb-2 flex items-center gap-2 text-xs font-medium ${y.accent}`,children:[e.jsx(y.icon,{className:"h-4 w-4"}),y.label]}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:y.value})]},N))})]})]})}function _8({invoices:a=[],expenses:o=[],onViewOverdueInvoices:t,onViewPendingExpenses:f}){const{t:h}=$t(),d=a.filter(s=>s.status==="overdue").length,n=o.filter(s=>s.status==="draft").length,l=a.filter(s=>{if(s.status==="sent"){const c=new Date(s.dueDate),u=new Date,m=c.getTime()-u.getTime(),x=Math.ceil(m/(1e3*60*60*24));return x<=7&&x>0}return!1}).length,r=[{type:"error",title:h("alerts.overdueInvoices"),count:d,description:h("alerts.overdueDesc"),icon:vn,color:"bg-red-50 border-red-200 text-red-800",iconColor:"text-red-600",onClick:t},{type:"warning",title:h("alerts.dueSoon"),count:l,description:h("alerts.dueSoonDesc"),icon:Ui,color:"bg-yellow-50 border-yellow-200 text-yellow-800",iconColor:"text-yellow-600",onClick:t},{type:"info",title:h("alerts.pendingExpenses"),count:n,description:h("alerts.pendingExpensesDesc"),icon:Vr,color:"bg-blue-50 border-blue-200 text-blue-800",iconColor:"text-blue-600",onClick:f}].filter(s=>s.count>0);return r.length===0?e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx($s,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h("alerts.allGood")}),e.jsx("p",{className:"text-sm text-gray-500",children:h("alerts.noAlerts")})]})]})}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(vn,{className:"w-5 h-5 text-orange-500 mr-2"}),h("alerts.attentionRequired")]}),e.jsx("div",{className:"space-y-3",children:r.map((s,c)=>e.jsx("div",{className:`p-4 rounded-lg border ${s.color} cursor-pointer hover:opacity-80 transition-opacity`,onClick:s.onClick,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(s.icon,{className:`w-5 h-5 ${s.iconColor}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-sm opacity-80",children:s.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.count}),e.jsx("div",{className:"text-xs opacity-80",children:"adet"})]})]})},c))})]})}function P8({isOpen:a,onClose:o,onSave:t,customer:f}){const{t:h}=$t(),d=(r,s)=>{const c=h(r,{defaultValue:s});if(typeof c!="string")return s;const u=c.trim();return u&&c!==r?u:s},[n,l]=G.useState({name:f?.name||"",email:f?.email||"",phone:f?.phone||"",address:f?.address||"",taxNumber:f?.taxNumber||"",company:f?.company||""});_t.useEffect(()=>{a&&f?l({name:f.name||"",email:f.email||"",phone:f.phone||"",address:f.address||"",taxNumber:f.taxNumber||"",company:f.company||""}):a&&!f&&l({name:"",email:"",phone:"",address:"",taxNumber:"",company:""})},[a,f]);const i=()=>{const r={...n};f?.id&&(r.id=f.id,f.createdAt&&(r.createdAt=f.createdAt)),t(r),o(),l({name:"",email:"",phone:"",address:"",taxNumber:"",company:""})};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(ds,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:f?d("customers.editCustomer","Edit Account"):d("customers.newCustomer","Add New Account")}),e.jsx("p",{className:"text-sm text-gray-500",children:d("customers.enterCustomerInfo","Enter account information")})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ds,{className:"w-4 h-4 inline mr-2"}),h("customers.name")," *"]}),e.jsx("input",{type:"text",value:n.name,onChange:r=>l({...n,name:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:h("customers.accountNamePlaceholder"),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ts,{className:"w-4 h-4 inline mr-2"}),h("customers.company")]}),e.jsx("input",{type:"text",value:n.company,onChange:r=>l({...n,company:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:h("customers.companyPlaceholder")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Hs,{className:"w-4 h-4 inline mr-2"}),d("customers.email","Email")," *"]}),e.jsx("input",{type:"email",value:n.email,onChange:r=>l({...n,email:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:d("customers.emailPlaceholder","name@example.com"),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Co,{className:"w-4 h-4 inline mr-2"}),d("customers.phone","Phone")]}),e.jsx("input",{type:"tel",value:n.phone,onChange:r=>l({...n,phone:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:d("customers.phonePlaceholder","+1 555 123 4567")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h("customers.taxNumber")}),e.jsx("input",{type:"text",value:n.taxNumber,onChange:r=>l({...n,taxNumber:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"1234567890"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Al,{className:"w-4 h-4 inline mr-2"}),d("customers.address","Address")]}),e.jsx("textarea",{value:n.address,onChange:r=>l({...n,address:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3,placeholder:h("customers.addressPlaceholder")})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:h("common.cancel")}),e.jsx("button",{onClick:i,disabled:!n.name||!n.email,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:h(f?"common.update":"customers.addCustomer")})]})]})}):null}const jf={name:"",sku:"",category:"",unitPrice:"",costPrice:"",stockQuantity:"",reorderLevel:"10",unit:"adet",description:"",hasCustomTaxRate:!1,categoryTaxRateOverride:""};function I8({isOpen:a,onClose:o,onSave:t,product:f,categories:h,categoryObjects:d}){const{t:n}=$t(),[l,i]=_t.useState(jf),[r,s]=_t.useState({}),[c,u]=_t.useState(d||[]);_t.useEffect(()=>{a&&c.length===0&&Mr(async()=>{const{productCategoriesApi:y}=await Promise.resolve().then(()=>Fc);return{productCategoriesApi:y}},void 0).then(({productCategoriesApi:y})=>{y.getAll().then(N=>{u(N)}).catch(console.error)})},[a,c.length]);const m=_t.useMemo(()=>{const y=new Set;return c.length>0&&c.forEach(N=>y.add(N.name)),h.forEach(N=>{const T=N.trim();T&&y.add(T)}),f?.category&&y.add(f.category.trim()),Array.from(y).sort((N,T)=>N.localeCompare(T,"tr-TR"))},[h,c,f]),x=_t.useCallback(y=>{const N=y.trim();if(!N)return N;if(N==="Hizmetler")return n("products.mainCategories.services");if(N==="rnler")return n("products.mainCategories.products");if(N==="Genel")switch(((typeof window<"u"?window.i18next?.language:"tr")||"tr").split("-")[0]){case"en":return"General";case"de":return"Allgemein";case"fr":return"Gnral";default:return N}return N},[n]);_t.useEffect(()=>{if(!a){i(jf),s({});return}i(f?{name:f.name||"",sku:f.sku||"",category:f.category||m[0]||"",unitPrice:f.unitPrice?String(f.unitPrice):"",costPrice:f.costPrice?String(f.costPrice):"",stockQuantity:f.stockQuantity?String(f.stockQuantity):"",reorderLevel:f.reorderLevel?String(f.reorderLevel):"10",unit:f.unit||"adet",description:f.description||"",hasCustomTaxRate:f.categoryTaxRateOverride!=null,categoryTaxRateOverride:f.categoryTaxRateOverride!=null?String(f.categoryTaxRateOverride):""}:{...jf,category:m[0]||""}),s({})},[a,f,m]);const b=(y,N)=>{i(T=>({...T,[y]:N})),r[y]&&s(T=>({...T,[y]:""}))},p=()=>{const y={};return l.name.trim()||(y.name=n("validation.productNameRequired")),l.sku.trim()||(y.sku=n("validation.skuRequired")),m.length>0&&!l.category.trim()&&(y.category=n("validation.categoryRequired")),(!l.unitPrice.trim()||Number.isNaN(Number(l.unitPrice)))&&(y.unitPrice=n("validation.validPriceRequired")),(!l.stockQuantity.trim()||Number.isNaN(Number(l.stockQuantity)))&&(y.stockQuantity=n("validation.validStockRequired")),s(y),Object.keys(y).length===0},v=()=>{if(!p())return;const y=Number(l.unitPrice)||0,N=Number(l.costPrice)||0,T=Number(l.stockQuantity)||0,_=Number(l.reorderLevel)||0,O=l.category.trim()||m[0]||"Genel",F=c?.find(q=>q.name===O)?.taxRate??18,V={name:l.name.trim(),sku:l.sku.trim(),category:O,unitPrice:y,costPrice:N,stockQuantity:T,reorderLevel:_,unit:l.unit.trim()||"adet",description:l.description.trim(),status:T===0?"out-of-stock":T<=_?"low":"active",taxRate:F};if(l.hasCustomTaxRate&&l.categoryTaxRateOverride){const q=Number(l.categoryTaxRateOverride);!isNaN(q)&&q>=0&&q<=100&&(V.categoryTaxRateOverride=q)}f?.id&&(V.id=f.id,V.createdAt=f.createdAt),t(V),o()};return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-xl bg-white shadow-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-lg bg-indigo-100",children:e.jsx(bn,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:f?n("products.editProduct")||"Urunu duzenle":n("products.newProduct")||"Yeni urun ekle"}),e.jsx("p",{className:"text-sm text-gray-500",children:n("products.enterProductInfo")||"Urun bilgilerini doldurun ve stok durumunu guncelleyin"})]})]}),e.jsx("button",{type:"button",onClick:o,className:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600","aria-label":n("common.close"),children:e.jsx(Nr,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-8 p-6 overflow-y-auto flex-1",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500",children:n("products.generalInfo")}),e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-name",children:[e.jsx(bn,{className:"h-4 w-4 text-gray-400"}),n("products.name")," *"]}),e.jsx("input",{id:"product-name",type:"text",value:l.name,onChange:y=>b("name",y.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:n("products.namePlaceholder")}),r.name&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:r.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-sku",children:[e.jsx(mv,{className:"h-4 w-4 text-gray-400"}),"SKU *"]}),e.jsx("input",{id:"product-sku",type:"text",value:l.sku,onChange:y=>b("sku",y.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"SKU-001"}),r.sku&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:r.sku})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-category",children:[e.jsx(Fa,{className:"h-4 w-4 text-gray-400"}),n("products.category")," *"]}),e.jsx("select",{id:"product-category",value:l.category,onChange:y=>b("category",y.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:m.length===0,children:m.length===0?e.jsx("option",{value:"",children:n("products.noCategoriesFound")}):m.map(y=>e.jsx("option",{value:y,children:x(y)},y))}),m.length===0&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:n("products.createCategoryFirst")}),r.category&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:r.category})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-unit",children:[e.jsx(ci,{className:"h-4 w-4 text-gray-400"}),n("products.unit")]}),e.jsx("input",{id:"product-unit",type:"text",value:l.unit,onChange:y=>b("unit",y.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:n("products.unitPlaceholder")})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:l.hasCustomTaxRate,onChange:y=>i(N=>({...N,hasCustomTaxRate:y.target.checked})),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),n("products.useCustomTaxRate")]}),l.hasCustomTaxRate&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-custom-tax",children:[e.jsx(Bn,{className:"h-4 w-4 text-gray-400"}),n("products.customTaxRate")]}),e.jsx("input",{id:"product-custom-tax",type:"number",min:"0",max:"100",step:"0.01",value:l.categoryTaxRateOverride,onChange:y=>b("categoryTaxRateOverride",y.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:n("products.taxRatePlaceholder")}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:n("products.customTaxRateHelper")})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500",children:n("products.priceAndStock")}),e.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-price",children:[e.jsx(Bn,{className:"h-4 w-4 text-gray-400"}),n("products.salePrice")," *"]}),e.jsx("input",{id:"product-price",type:"number",min:"0",step:"0.01",value:l.unitPrice,onChange:y=>b("unitPrice",y.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"}),r.unitPrice&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:r.unitPrice})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-cost",children:[e.jsx(Bn,{className:"h-4 w-4 text-gray-300"}),n("products.cost")]}),e.jsx("input",{id:"product-cost",type:"number",min:"0",step:"0.01",value:l.costPrice,onChange:y=>b("costPrice",y.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-stock",children:[e.jsx(ci,{className:"h-4 w-4 text-gray-400"}),n("products.stockQuantity")," *"]}),e.jsx("input",{id:"product-stock",type:"number",min:"0",step:"1",value:l.stockQuantity,onChange:y=>b("stockQuantity",y.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"}),r.stockQuantity&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:r.stockQuantity})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-reorder",children:[e.jsx(ci,{className:"h-4 w-4 text-gray-300"}),n("products.criticalStock")]}),e.jsx("input",{id:"product-reorder",type:"number",min:"0",step:"1",value:l.reorderLevel,onChange:y=>b("reorderLevel",y.target.value),className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"10"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500",children:n("products.notes")}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"product-description",children:[e.jsx(Fr,{className:"h-4 w-4 text-gray-400"}),n("products.description")]}),e.jsx("textarea",{id:"product-description",value:l.description,onChange:y=>b("description",y.target.value),rows:3,className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:n("products.descriptionPlaceholder")})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 bg-gray-50 px-6 py-4 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:o,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-100",children:n("common.cancel")}),e.jsx("button",{type:"button",onClick:v,className:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-indigo-700",children:n("common.save")})]})]})}):null}const M8=(a,o)=>{const t=a.trim();return t==="rnler"?o("products.mainCategories.products"):t==="Hizmetler"?o("products.mainCategories.services"):a};function Ev({isOpen:a,onClose:o,onSubmit:t,categories:f,categoryObjects:h=[],editingCategory:d,onArchive:n,onRestore:l}){const{t:i}=$t(),[r,s]=_t.useState(""),[c,u]=_t.useState("18"),[m,x]=_t.useState(""),[b,p]=_t.useState(""),v=!!d,y=_t.useMemo(()=>h.filter(T=>T.isProtected&&T.isActive),[h]);if(_t.useEffect(()=>{if(!a){s(""),u("18"),x(""),p("");return}d?(s(d.name),u(d.taxRate.toString()),x("")):(s(""),u("18"),y.length>0&&x(y[0].id)),p("")},[a,d,y]),!a)return null;const N=()=>{const T=r.trim();if(!T){p(i("products.categoryModal.nameRequired"));return}if(!v&&!m){p(i("products.categoryModal.parentRequired"));return}const _=parseFloat(c);if(isNaN(_)||_<0||_>100){p(i("products.categoryModal.taxInvalid"));return}if(v&&d&&T.toLocaleLowerCase("tr-TR")===d.name.toLocaleLowerCase("tr-TR")){t(T,_),o();return}if(f.map(H=>H.toLocaleLowerCase("tr-TR")).includes(T.toLocaleLowerCase("tr-TR"))){p(i("products.categoryModal.nameExists"));return}t(T,_,m||void 0),o()};return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 p-4",onClick:o,children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl pointer-events-auto",onClick:T=>T.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-indigo-50",children:e.jsx(bv,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:i(v?"products.categoryModal.titleEdit":"products.categoryModal.titleNew")}),e.jsx("p",{className:"text-sm text-gray-500",children:i(v?"products.categoryModal.subtitleEdit":"products.categoryModal.subtitleNew")})]})]}),e.jsx("button",{type:"button",onClick:o,className:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600","aria-label":i("common.close"),children:e.jsx(Nr,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"px-6 py-5",children:[!v&&y.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"parent-category",children:[e.jsx(ci,{className:"h-4 w-4 text-gray-400"}),i("products.categoryModal.parentLabel")]}),e.jsx("select",{id:"parent-category",value:m,onChange:T=>{x(T.target.value),b&&p("")},className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:y.map(T=>e.jsx("option",{value:T.id,children:M8(T.name,i)},T.id))}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:i("products.categoryModal.parentHelper")})]}),e.jsxs("label",{className:`flex items-center gap-2 text-sm font-medium text-gray-700 ${!v&&y.length>0?"mt-4":""}`,htmlFor:"category-name",children:[e.jsx(Fa,{className:"h-4 w-4 text-gray-400"}),i("products.categoryModal.nameLabel")]}),e.jsx("input",{id:"category-name",type:"text",value:r,onChange:T=>{s(T.target.value),b&&p("")},className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:i("products.categoryModal.namePlaceholder")}),e.jsxs("label",{className:"mt-4 flex items-center gap-2 text-sm font-medium text-gray-700",htmlFor:"category-tax-rate",children:[e.jsx(TA,{className:"h-4 w-4 text-gray-400"}),i("products.categoryModal.taxLabel")]}),e.jsx("input",{id:"category-tax-rate",type:"number",min:"0",max:"100",step:"0.01",value:c,onChange:T=>{u(T.target.value),b&&p("")},className:"mt-2 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:i("products.categoryModal.taxPlaceholder")}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!v&&y.length>0?i("products.categoryModal.taxHelperChildOverrides"):i("products.categoryModal.taxHelperDefault")}),b&&e.jsx("p",{className:"mt-2 text-xs text-red-600",children:b})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 border-t border-gray-200 bg-gray-50 px-6 py-4",children:[v&&d&&!d.isProtected&&e.jsx("div",{className:"flex items-center gap-2",children:d.isActive?e.jsx("button",{type:"button",onClick:()=>{if(!d?.id)return;window.confirm(i("products.archiveConfirm"))&&n?.(d.id)},className:"rounded-lg border border-red-200 px-3 py-2 text-sm font-medium text-red-600 transition-colors hover:bg-red-50",children:i("products.archive")}):e.jsx("button",{type:"button",onClick:()=>d?.id&&l?.(d.id),className:"rounded-lg border border-emerald-200 px-3 py-2 text-sm font-medium text-emerald-600 transition-colors hover:bg-emerald-50",children:i("products.activate")})}),e.jsx("button",{type:"button",onClick:o,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-100",children:i("common.cancel")}),e.jsx("button",{type:"button",onClick:N,className:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-indigo-700",children:i("common.save")})]})]})})}const R8=["Ofis Malzemeleri","Teknoloji","Hizmet","retim","Lojistik","Dier"];function z8({isOpen:a,onClose:o,onSave:t,supplier:f}){const{t:h}=$t("common"),{i18n:d}=$t(),[n,l]=G.useState({name:f?.name||"",email:f?.email||"",phone:f?.phone||"",address:f?.address||"",taxNumber:f?.taxNumber||"",company:f?.company||"",category:f?.category||"Dier"}),i={"Ofis Malzemeleri":{tr:"Ofis Malzemeleri",en:"Office Supplies",fr:"Fournitures de bureau",de:"Bromaterial"},Teknoloji:{tr:"Teknoloji",en:"Technology",fr:"Technologie",de:"Technologie"},Hizmet:{tr:"Hizmet",en:"Services",fr:"Services",de:"Dienstleistungen"},retim:{tr:"retim",en:"Manufacturing",fr:"Production",de:"Fertigung"},Lojistik:{tr:"Lojistik",en:"Logistics",fr:"Logistique",de:"Logistik"},Dier:{tr:"Dier",en:"Other",fr:"Autre",de:"Sonstiges"}},r=c=>i[c]?.[d.language]||c;_t.useEffect(()=>{a&&f?l({name:f.name,email:f.email,phone:f.phone,address:f.address,taxNumber:f.taxNumber,company:f.company,category:f.category}):a&&!f&&l({name:"",email:"",phone:"",address:"",taxNumber:"",company:"",category:"Dier"})},[a,f]);const s=()=>{const c={...n,...f?.id?{id:f.id,createdAt:f.createdAt}:{}};t(c),o(),l({name:"",email:"",phone:"",address:"",taxNumber:"",company:"",category:"Dier"})};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center p-4 z-50 overflow-y-auto items-start sm:items-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(ts,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:f?h("suppliers.modal.editTitle")||"Tedarikiyi Dzenle":h("suppliers.modal.newTitle")||"Yeni Tedariki Ekle"}),e.jsx("p",{className:"text-sm text-gray-500",children:h("suppliers.modal.subtitle")||"Tedariki bilgilerini girin"})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ds,{className:"w-4 h-4 inline mr-2"}),h("suppliers.modal.nameLabel")||"Tedariki Ad"," *"]}),e.jsx("input",{type:"text",value:n.name,onChange:c=>l({...n,name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:h("suppliers.modal.namePlaceholder")||"ABC Tedarik Ltd.",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ts,{className:"w-4 h-4 inline mr-2"}),h("suppliers.modal.companyLabel")||"irket Ad"]}),e.jsx("input",{type:"text",value:n.company,onChange:c=>l({...n,company:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:h("suppliers.modal.companyPlaceholder")||"ABC Tedarik Ltd. ti."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Hs,{className:"w-4 h-4 inline mr-2"}),h("suppliers.modal.emailLabel")||"E-posta"," *"]}),e.jsx("input",{type:"email",value:n.email,onChange:c=>l({...n,email:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:h("suppliers.modal.emailPlaceholder")||"info@abctedarik.com",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Co,{className:"w-4 h-4 inline mr-2"}),h("suppliers.modal.phoneLabel")||"Telefon"]}),e.jsx("input",{type:"tel",value:n.phone,onChange:c=>l({...n,phone:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:h("suppliers.modal.phonePlaceholder")||"+90 555 123 45 67"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Fa,{className:"w-4 h-4 inline mr-2"}),h("suppliers.modal.categoryLabel")||"Kategori"," *"]}),e.jsx("select",{value:n.category,onChange:c=>l({...n,category:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",required:!0,children:R8.map(c=>e.jsx("option",{value:c,children:r(c)},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h("suppliers.modal.taxNumberLabel")||"Vergi Numaras"}),e.jsx("input",{type:"text",value:n.taxNumber,onChange:c=>l({...n,taxNumber:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:h("suppliers.modal.taxNumberPlaceholder")||"1234567890"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Al,{className:"w-4 h-4 inline mr-2"}),h("suppliers.modal.addressLabel")||"Adres"]}),e.jsx("textarea",{value:n.address,onChange:c=>l({...n,address:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",rows:3,placeholder:h("suppliers.modal.addressPlaceholder")||"Tam adres bilgisi..."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 sm:p-6 border-t border-gray-200 bg-gray-50 shrink-0",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:h("cancel")}),e.jsx("button",{onClick:s,disabled:!n.name||!n.email,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:f?h("update")||"Gncelle":h("suppliers.newSupplier")||"Tedariki Ekle"})]})]})}):null}const rg={getAll:async a=>{const o=a?.includeInactive?"?includeInactive=true":"";return(await Xe.get(`/product-categories${o}`)).data},getOne:async a=>(await Xe.get(`/product-categories/${a}`)).data,create:async a=>(await Xe.post("/product-categories",a)).data,update:async(a,o)=>(await Xe.patch(`/product-categories/${a}`,o)).data,delete:async a=>{await Xe.delete(`/product-categories/${a}`)}},Fc=Object.freeze(Object.defineProperty({__proto__:null,productCategoriesApi:rg},Symbol.toStringTag,{value:"Module"})),L8={tr:{title:"Stok Uyars",requestedLabel:"stenen Miktar",availableLabel:"Mevcut Stok",message:"Girilen miktar mevcut stoktan fazla. Ltfen miktar gncelleyin.",adjust:"Miktar Dzelt",close:"Kapat"},en:{title:"Stock Warning",requestedLabel:"Requested Qty",availableLabel:"Available Stock",message:"Entered quantity exceeds available stock. Please adjust the quantity.",adjust:"Adjust Quantity",close:"Close"},fr:{title:"Alerte Stock",requestedLabel:"Quantit Demande",availableLabel:"Stock Disponible",message:"La quantit saisie dpasse le stock disponible. Veuillez ajuster.",adjust:"Ajuster",close:"Fermer"},de:{title:"Bestandswarnung",requestedLabel:"Angefragte Menge",availableLabel:"Verfgbarer Bestand",message:"Die eingegebene Menge berschreitet den verfgbaren Bestand. Bitte anpassen.",adjust:"Anpassen",close:"Schlieen"}},O8=a=>{const o=(a||"tr").toLowerCase();return o.startsWith("tr")?"tr":o.startsWith("fr")?"fr":o.startsWith("de")?"de":"en"},Em=({isOpen:a,product:o,requested:t,available:f,onClose:h,onAdjust:d})=>{const{i18n:n}=$t();if(!a)return null;const l=L8[O8(n.language)];return e.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/40 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-2xl border border-yellow-300",children:[e.jsxs("div",{className:"px-5 py-4 flex items-center gap-3 border-b border-yellow-200",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-100 flex items-center justify-center",children:e.jsx(vn,{className:"w-6 h-6 text-yellow-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l.title})]}),e.jsxs("div",{className:"px-5 py-4 space-y-3 text-sm text-gray-700",children:[e.jsx("p",{className:"font-medium",children:l.message}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-xs grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:l.requestedLabel}),e.jsx("div",{className:"font-semibold text-gray-900",children:t})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:l.availableLabel}),e.jsx("div",{className:"font-semibold text-gray-900",children:f})]})]}),o&&e.jsx("p",{className:"text-xs text-gray-500",children:o.name})]}),e.jsxs("div",{className:"px-5 py-3 border-t bg-gray-50 flex justify-end gap-2",children:[d&&e.jsx("button",{type:"button",onClick:()=>{d(),h()},className:"px-4 py-2 text-sm font-medium rounded-lg bg-yellow-500 text-white hover:bg-yellow-600",children:l.adjust}),e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 text-sm font-medium rounded-lg border border-gray-300 bg-white hover:bg-gray-100",children:l.close})]})]})})},cn=18,xl=a=>a==null?"":String(a).replace(/\s+/g," ").trim().toLowerCase(),di=a=>{if(a==null||typeof a=="boolean")return null;if(typeof a=="number")return!Number.isFinite(a)||a<0?null:Math.round(a*100)/100;if(typeof a=="string"){const t=a.trim();if(!t)return null;const f=Number(t);return!Number.isFinite(f)||f<0?null:Math.round(f*100)/100}const o=Number(a);return!Number.isFinite(o)||o<0?null:Math.round(o*100)/100},sy=(a,o)=>{if(!a||!a.length||o===null||o===void 0)return;const t=String(o).trim();if(!t)return;const f=a.find(n=>String(n.id)===t);if(f)return f;const h=xl(t),d=a.find(n=>xl(n.name)===h);if(d)return d;if(t.includes(">")||t.includes("/")){const n=t.includes(">")?">":"/",l=t.split(n).map(i=>xl(i)).filter(Boolean);for(let i=l.length-1;i>=0;i-=1){const r=a.find(s=>xl(s.name)===l[i]);if(r)return r}}},ny=(a,o)=>{if(!o?.length||!a)return null;const t=new Set;let f=sy(o,a);for(;f;){const h=di(f.taxRate);if(h!==null)return h;if(!f.parentId)break;const d=String(f.parentId);if(t.has(d))break;t.add(d),f=sy(o,d)}return null},F8=(a,o)=>{if(!(!a||!a.length)){if(o?.id){const t=a.find(f=>String(f.id)===String(o.id));if(t)return t}if(o?.name){const t=xl(o.name);if(t){const f=a.find(h=>xl(h.name)===t);if(f)return f}}}},Dv=(a,o,t,f=cn)=>{const h=di(a?.categoryTaxRateOverride);if(h!==null)return h;const d=di(a?.taxRate);if(d!==null)return d;const n=ny(a?.category??t,o);if(n!==null)return n;const l=ny(t??null,o);return l!==null?l:f},vp=(a,o={})=>{const{products:t,categories:f,defaultRate:h=cn,preferResolvedOverExisting:d=!1}=o,n=di(a.taxRate),l=F8(t,{id:a.productId,name:a.productName??a.description}),i=Dv(l,f,a.productName??a.description,h);return d&&l?a.taxRate===i?n!==null&&n!==i?{...a,taxRate:i}:a:{...a,taxRate:i}:n!==null?a.taxRate===n?a:{...a,taxRate:n}:a.taxRate===i?a:{...a,taxRate:i}},fc=(a,o={})=>{if(!Array.isArray(a))return[];let t=!1;const f=a.map(h=>{const d=vp(h,o);return d!==h&&(t=!0),d});return t?f:a},wp=(a,o,t=cn)=>{const f=Array.isArray(a)?a:[];let h=0,d=0;f.forEach(s=>{const c=Number(s.total)||0,m=(di(s.taxRate)??t)/100;h+=c,d+=c*m});const n=h+d,l=Number(o),i=Number.isFinite(l)?Math.min(n,Math.max(0,l)):0,r=h+d-i;return{subtotal:h,taxAmount:d,total:r,discount:i}},_v=a=>({id:`item-${Date.now()}-${a??Math.random().toString(36).slice(2,6)}`,description:"",quantity:1,unitPrice:0,total:0,taxRate:cn}),ai=()=>[_v()],B8="INV",Sf=()=>{const a=new Date,o=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0");return`${B8}-${o}-${t}-XXX`},ln=a=>a==null?"":String(a),U8=a=>a?a._isReturnInvoice===!0||String(a.type||"")==="return":!1,V8=a=>a?ln(a.originalInvoiceId??a.refundedInvoiceId??""):"",Pv=a=>!Array.isArray(a)||a.length===0?ai():a.map((o,t)=>{const f=Number(o.quantity)||1,h=Number(o.unitPrice)||0,d=Number.isFinite(Number(o.total))?Number(o.total):f*h,n=o.productId!==void 0&&o.productId!==null;return{...o,id:o.id?String(o.id):`${t+1}`,description:o.description||o.productName||"",quantity:f,unitPrice:h,total:d,productId:n?ln(o.productId):void 0,unit:o.unit,taxRate:di(o.taxRate)??cn}}),Cf=a=>{if(!a)return ai();const o=Pv(a.items);return o.length?o.map((t,f)=>{const h=Math.abs(Number(t.quantity)||0)||1,d=Number(t.unitPrice)||0,n=-h;return{...t,id:`ret-${Date.now()}-${f}`,quantity:n,total:n*d}}):ai()},uu=a=>{if(!a)return null;const o=[a.stock,a.stockQuantity];for(const t of o){const f=Number(t);if(Number.isFinite(f))return f}return null},q8=a=>!!a&&typeof a.then=="function";function $8({onClose:a,onSave:o,invoice:t,customers:f=[],products:h=[],invoices:d=[]}){const{t:n,i18n:l}=$t(),[i,r]=G.useState([]),[s,c]=G.useState(()=>({invoiceNumber:Sf(),customerId:"",customerName:"",customerEmail:"",customerAddress:"",issueDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],notes:"",status:"draft",type:"product",originalInvoiceId:"",discountAmount:0})),[u,m]=G.useState(""),[x,b]=G.useState(!1),[p,v]=G.useState(null),[y,N]=G.useState(null),[T,_]=G.useState(()=>ai()),[O,H]=G.useState(null),[F,V]=G.useState(!1),[q,W]=G.useState(null),B=_t.useRef({}),E=_t.useCallback(Q=>{const z={};Q.forEach(M=>{z[M.id]={productId:M.productId?ln(M.productId):void 0,quantity:Number(M.quantity)||0}}),B.current=z},[]),P=_t.useCallback((Q,z)=>{const M=B.current[Q];return!M||!M.productId||!z?0:ln(M.productId)===ln(z)&&Number(M.quantity)||0},[]);_t.useEffect(()=>{let Q=!0;return(async()=>{try{const z=await rg.getAll();Q&&r(Array.isArray(z)?z:[])}catch(z){Q&&(r([]),he.warn("InvoiceModal: category load failed",z))}finally{}})(),()=>{Q=!1}},[]),_t.useEffect(()=>{_(Q=>{const z=fc(Q,{products:h,categories:i,defaultRate:cn});return z===Q?Q:z})},[h,i]),_t.useEffect(()=>{if(!t){c({invoiceNumber:Sf(),customerId:"",customerName:"",customerEmail:"",customerAddress:"",issueDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],notes:"",status:"draft",type:"product",originalInvoiceId:"",discountAmount:0});const ie=fc(ai(),{products:h,categories:i,defaultRate:cn});_(ie),E([]),m(""),v(null),b(!1),N(null),H(null);return}const Q=U8(t),z=V8(t);c({invoiceNumber:t.invoiceNumber||Sf(),customerId:ln(t.customerId),customerName:t.customer?.name||t.customerName||"",customerEmail:t.customer?.email||t.customerEmail||"",customerAddress:t.customer?.address||t.customerAddress||"",issueDate:t.issueDate||new Date().toISOString().split("T")[0],dueDate:t.dueDate||new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],notes:t.notes||"",status:t.status||"draft",type:Q?"return":t.type||"product",originalInvoiceId:z,discountAmount:Number(t.discountAmount??0)||0});const M=Pv(t.items),U=M.length?M:ai(),te=fc(U,{products:h,categories:i,defaultRate:cn});if(_(te),E(M.length?M:[]),m(t.customer?.name||t.customerName||""),v(t.customer??null),b(!1),N(null),H(null),Q&&z){const ie=d.find(se=>ln(se.id)===z);if(ie&&(c(le=>({...le,originalInvoiceId:z,customerId:le.customerId||ln(ie.customerId),customerName:le.customerName||ie.customer?.name||ie.customerName||"",customerEmail:le.customerEmail||ie.customer?.email||ie.customerEmail||"",customerAddress:le.customerAddress||ie.customer?.address||ie.customerAddress||""})),ie.customer?(v(ie.customer),m(ie.customer.name||"")):ie.customerName&&m(ie.customerName),!(Array.isArray(t.items)&&t.items.length>0))){const le=Cf(ie),Ne=fc(le.length?le:ai(),{products:h,categories:i,defaultRate:cn});_(Ne),E(le.length?le:[])}}},[t,d,E,h,i]);const A=()=>{_(Q=>{const z=_v(Q.length+1);return B.current[z.id]={quantity:0},[...Q,z]})},k=Q=>{_(z=>{if(z.length===1)return z;const M=z.filter(U=>U.id!==Q);if(B.current[Q]){const U={...B.current};delete U[Q],B.current=U}return M}),N(z=>z===Q?null:z)},j=(Q,z,M)=>{_(U=>{const te=U.map(ie=>{if(ie.id!==Q)return ie;const se={...ie,[z]:M};if(z==="quantity"||z==="unitPrice"){const le=Number(z==="quantity"?M:se.quantity)||0,Ne=Number(z==="unitPrice"?M:se.unitPrice)||0;se.total=le*Ne}return se});if(z==="quantity"){const ie=te.find(se=>se.id===Q);if(ie?.productId){const se=h.find(ce=>ln(ce.id)===ln(ie.productId)),le=uu(se),Ne=Number(M)||0,ke=P(Q,ie.productId),Z=le!==null?le+ke:null;se&&Z!==null&&Ne>Z&&W({itemId:Q,product:se,requested:Ne,available:le})}}return te})},{subtotal:S,taxAmount:C,total:D}=wp(T,s.discountAmount,cn),R=f.filter(Q=>{const z=u.trim().toLowerCase();if(!z)return!0;const M=Q.name?Q.name.toLowerCase():"",U=Q.company?Q.company.toLowerCase():"";return M.includes(z)||U.includes(z)}),L=Q=>{v(Q),c(z=>({...z,customerId:Q.id,customerName:Q.name,customerEmail:Q.email,customerAddress:Q.address||z.customerAddress})),m(Q.name),b(!1),H(null)},Y=Q=>{m(Q),c(z=>({...z,customerName:Q})),b(Q.length>0),v(null)},X=Q=>{const z=Q.trim().toLowerCase();return h.filter(M=>z?M.name.toLowerCase().includes(z)||(M.sku||"").toLowerCase().includes(z)||(M.category||"").toLowerCase().includes(z):!0).slice(0,12)},ae=(Q,z)=>{he.debug("InvoiceModal: product selected",{productId:z.id,name:z.name,taxRate:z.taxRate,categoryTaxRateOverride:z.categoryTaxRateOverride,category:z.category});const M=Dv(z,i,z?.category,cn),U=uu(z);_(te=>{const ie=te.map(se=>{if(se.id!==Q)return se;const le=se.quantity>0?se.quantity:1,Ne=Number(z.unitPrice??se.unitPrice??0),ke=Number(M);return{...se,productId:z.id,description:z.name,unitPrice:Ne,unit:z.unit,quantity:le,total:le*Ne,taxRate:ke}});if(U!==null){const se=ie.find(le=>le.id===Q);se&&se.quantity>U&&W({itemId:Q,product:z,requested:se.quantity,available:U})}return ie}),N(null)},$=async()=>{if(F)return;he.debug("InvoiceModal: starting validation",{customerId:s.customerId,customerName:s.customerName,selectedCustomer:p?.name});for(const le of T){const Ne=ln(le.productId);let ke=Ne?h.find(Z=>ln(Z.id)===Ne):void 0;if(!ke&&le.description){const Z=String(le.description).trim().toLowerCase();ke=h.find(ce=>String(ce.name||"").trim().toLowerCase()===Z)||h.find(ce=>String(ce.name||"").toLowerCase().includes(Z))}if(ke){const Z=uu(ke),ce=Number(le.quantity)||0,ve=le.productId?P(le.id,le.productId):0,De=Z!==null?Z+ve:null;if(De!==null&&ce>De){W({itemId:String(le.id),product:ke,requested:ce,available:Z});return}}}if(!s.customerId){he.error("InvoiceModal: customerId validation failed",{customerId:s.customerId,selectedCustomer:p}),H("Ltfen hesap sein");return}if(s.type==="return"&&!s.originalInvoiceId){H("ade faturas oluturmak iin iade edilecek faturay semelisiniz");return}if(!T.length){H("Ltfen en az bir rn ekleyin");return}if(T.some(le=>!le.description||le.unitPrice<=0)){H("Ltfen tm rn bilgilerini eksiksiz doldurun");return}const Q=s.type==="return"?T.map(le=>{const Ne=Number(le.quantity)||0,ke=Number(le.unitPrice)||0,Z=Ne>0?-Ne:Ne;return{...le,quantity:Z,total:Z*ke}}):T.map(le=>{const Ne=Number(le.quantity)||0,ke=Number(le.unitPrice)||0;return{...le,total:Ne*ke}}),z=fc(Q,{products:h,categories:i,defaultRate:cn}),{subtotal:M,taxAmount:U,total:te,discount:ie}=wp(z,s.discountAmount,cn),se={invoiceNumber:s.invoiceNumber,customerId:s.customerId,customerName:s.customerName,customerEmail:s.customerEmail,customerAddress:s.customerAddress,issueDate:s.issueDate||new Date().toISOString().split("T")[0],dueDate:s.dueDate||new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],items:z,lineItems:z,subtotal:M,taxAmount:U,discountAmount:ie,total:te,notes:s.notes||"",status:s.status||"draft",type:s.type,originalInvoiceId:s.originalInvoiceId||void 0};t?.id&&(se.id=ln(t.id),t.createdAt&&(se.createdAt=t.createdAt)),!se.id&&se.type==="return"&&se.originalInvoiceId&&(se.id=se.originalInvoiceId),he.debug("InvoiceModal: submitting invoice payload",{customerId:se.customerId,customerName:se.customerName,itemCount:se.items.length,total:se.total});try{V(!0);const le=o(se);q8(le)?le.catch(Ne=>{he.error("InvoiceModal: save failed",Ne)}).finally(()=>V(!1)):V(!1)}catch(le){V(!1),he.error("InvoiceModal: save threw synchronously",le)}a()};return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Kp,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n(t?"invoices.editInvoice":"invoices.newInvoice")}),e.jsx("p",{className:"text-sm text-gray-500",children:n("invoices.enterInvoiceInfo")})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":n("common.close"),children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("invoices.invoiceNumber")}),e.jsx("input",{type:"text",value:s.invoiceNumber,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed",title:n("invoices.invoiceNumberAutoGenerated")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e.jsx("span",{className:"text-indigo-600 font-semibold",children:n("invoices.invoiceType")})}),e.jsxs("select",{value:s.type,onChange:Q=>{const z=Q.target.value;if(c(M=>({...M,type:z})),z==="return"){const M=t?.id?ln(t.id):"";if(M){const U=d.find(te=>ln(te.id)===M);if(U&&(c(ie=>({...ie,originalInvoiceId:M,invoiceNumber:U.invoiceNumber||ie.invoiceNumber,customerId:ie.customerId||U.customerId||"",customerName:ie.customerName||U.customer?.name||U.customerName||"",customerEmail:ie.customerEmail||U.customer?.email||U.customerEmail||"",customerAddress:ie.customerAddress||U.customer?.address||U.customerAddress||""})),U.customer?(v(U.customer),m(U.customer.name||"")):U.customerName&&m(U.customerName),T.length===0||T.length===1&&!T[0].description&&(Number(T[0].total)||0)===0)){const ie=Cf(U);_(ie.length?ie:ai())}}}else c(M=>({...M,originalInvoiceId:""}))},className:"w-full px-3 py-2 border-2 border-indigo-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200",children:[e.jsxs("option",{value:"product",children:[" ",n("invoices.productInvoice")]}),e.jsxs("option",{value:"return",children:[" ",n("invoices.returnInvoice")]})]})]}),t?.sourceQuoteId&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Fr,{className:"w-4 h-4 inline mr-2"}),n("invoices.table.sourceQuote",{defaultValue:"Kaynak Teklif"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-indigo-600 hover:text-indigo-800 text-left",onClick:()=>{try{const Q=String(t.sourceQuoteId||"").trim();if(!Q)return;a(),setTimeout(()=>{try{window.location.hash=`quotes-edit:${Q}`}catch{}},100)}catch{}},title:n("quotes.editModal.title",{defaultValue:"Teklifi Dzenle"}),children:String(t?.sourceQuoteNumber||"").trim()||n("common.open",{defaultValue:"A"})}),String(t?.sourceOpportunityId||"").trim()&&e.jsx("button",{type:"button",className:"px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-indigo-600 hover:text-indigo-800 whitespace-nowrap",onClick:()=>{try{const Q=String(t.sourceOpportunityId||"").trim();if(!Q)return;a(),setTimeout(()=>{try{window.location.hash=`crm-deal:${Q}`}catch{}},100)}catch{}},title:n("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"}),children:n("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"})})]})]})]}),s.type==="return"&&e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:e.jsxs("span",{className:"text-red-600",children:[" ",n("invoices.invoiceToReturn")]})}),e.jsxs("select",{value:s.originalInvoiceId,onChange:Q=>{const z=Q.target.value,M=d.find(U=>ln(U.id)===z);if(M){c(te=>({...te,originalInvoiceId:z,invoiceNumber:M.invoiceNumber||te.invoiceNumber,customerId:M.customerId||"",customerName:M.customer?.name||M.customerName||"",customerEmail:M.customer?.email||M.customerEmail||"",customerAddress:M.customer?.address||M.customerAddress||""})),M.customer?(v(M.customer),m(M.customer.name||"")):M.customerName&&m(M.customerName);const U=Cf(M);_(U.length?U:ai())}else c(U=>({...U,originalInvoiceId:z}))},className:"w-full px-3 py-2 border-2 border-yellow-400 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:n("invoices.selectInvoiceToReturn")}),d.map(Q=>e.jsxs("option",{value:Q.id,children:[Q.invoiceNumber," - ",Q.customerName||Q.customer?.name]},Q.id))]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:n("invoices.returnInvoiceAutoLoad")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("invoices.issueDate")}),e.jsx("input",{type:"date",value:s.issueDate,onChange:Q=>c({...s,issueDate:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",lang:l.language})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("invoices.dueDate")}),e.jsx("input",{type:"date",value:s.dueDate,onChange:Q=>c({...s,dueDate:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",lang:l.language})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("invoices.status")}),e.jsxs("select",{value:s.status,onChange:Q=>c({...s,status:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"draft",children:zt(n,"draft")}),e.jsx("option",{value:"sent",children:zt(n,"sent")}),e.jsx("option",{value:"paid",children:zt(n,"paid")}),e.jsx("option",{value:"overdue",children:zt(n,"overdue")}),e.jsx("option",{value:"cancelled",children:zt(n,"cancelled")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("invoices.customerName")}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:u,onChange:Q=>Y(Q.target.value),onFocus:()=>b(!0),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:n("invoices.customerSearchPlaceholder")}),p&&e.jsx(cs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-500 w-4 h-4"})]}),x&&R.length>0&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[e.jsxs("div",{className:"p-2 text-xs text-gray-500 border-b",children:[R.length," musteri bulundu"]}),R.map(Q=>e.jsxs("button",{type:"button",onMouseDown:z=>z.preventDefault(),onClick:()=>L(Q),className:"w-full p-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:Q.name}),e.jsx("div",{className:"text-sm text-gray-600",children:Q.company}),e.jsx("div",{className:"text-xs text-gray-500",children:Q.email})]},Q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("customers.email")}),e.jsx("input",{type:"email",value:s.customerEmail,onChange:Q=>c({...s,customerEmail:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:n("customers.emailPlaceholder")})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("customers.address")}),e.jsx("textarea",{value:s.customerAddress,onChange:Q=>c({...s,customerAddress:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:n("customers.addressPlaceholder")})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n("invoices.productsAndServices")}),e.jsxs("button",{onClick:A,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:n("invoices.addLine")})]})]}),e.jsx("div",{style:{overflow:"visible"},children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg table-fixed",style:{position:"relative"},children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",style:{width:"40%"},children:n("invoices.description")}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",style:{width:"12%"},children:n("invoices.quantity")}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",style:{width:"18%"},children:n("invoices.unitPriceExclVAT")}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",style:{width:"18%"},children:n("invoices.totalInclVAT")}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700",style:{width:"12%"},children:n("invoices.actions")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",style:{position:"relative"},children:T.map(Q=>{const z=X(Q.description);return e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3",style:{position:"static"},children:[e.jsxs("div",{className:"relative",style:{position:"static"},children:[e.jsx("input",{type:"text",value:Q.description,onChange:M=>{j(Q.id,"description",M.target.value),M.target.value.length>0&&N(Q.id)},onClick:()=>{Q.description.length>0&&N(Q.id)},onBlur:()=>setTimeout(()=>{N(M=>M===Q.id?null:M)},200),className:"w-full px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:n("invoices.productServiceDescription")}),y===Q.id&&z.length>0&&e.jsxs("div",{className:"absolute z-[100] mt-1 w-[450px] left-0 rounded-lg border-2 border-gray-300 bg-white shadow-2xl max-h-[500px] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-blue-50 p-3 text-xs font-medium text-blue-700 border-b border-blue-200",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(Os,{className:"w-3 h-3 mr-1"}),z.length," rn bulundu"]})}),z.map(M=>{const U=uu(M),te=Math.max(0,U??0),ie=(U??0)>0?"text-green-600 font-medium":"text-red-600 font-medium";return e.jsxs("button",{type:"button",onMouseDown:se=>se.preventDefault(),onClick:()=>ae(Q.id,M),className:"w-full p-4 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:M.name}),e.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-600",children:[M.sku&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 rounded",children:["SKU: ",M.sku]}),M.category&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded",children:M.category})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-sm",children:[e.jsx("span",{className:"font-medium text-green-600",children:(M.unitPrice??0).toLocaleString("tr-TR",{minimumFractionDigits:2})}),e.jsxs("span",{className:"text-gray-500",children:["Stok: ",e.jsx("span",{className:ie,children:te})]})]})]},`${Q.id}-${M.id}`)})]})]}),Q.unit&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Birim: ",Q.unit]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",value:Q.quantity,onChange:M=>j(Q.id,"quantity",parseInt(M.target.value,10)||1),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"1",step:"1"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",value:Q.unitPrice,onChange:M=>j(Q.id,"unitPrice",parseFloat(M.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",step:"0.01"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-medium text-gray-900",children:Q.total.toLocaleString("tr-TR",{minimumFractionDigits:2})})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>k(Q.id),disabled:T.length===1,className:"p-1 text-red-600 hover:bg-red-50 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Xr,{className:"w-4 h-4"})})})]},Q.id)})})]})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[n("invoices.subtotalExclVAT"),":"]}),e.jsx("span",{className:"font-medium",children:S.toLocaleString("tr-TR",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[n("invoices.vat"),":"]}),e.jsx("span",{className:"font-medium",children:C.toLocaleString("tr-TR",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-600",children:[n("invoices.discount")||"skonto",":"]}),e.jsx("input",{type:"number",value:s.discountAmount??0,onChange:Q=>{const z=Number(Q.target.value);c(M=>({...M,discountAmount:Number.isFinite(z)&&z>=0?z:0}))},className:"w-24 px-2 py-1 border border-gray-300 rounded text-right focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-2",children:[e.jsxs("span",{children:[n("invoices.grandTotalInclVAT"),":"]}),e.jsx("span",{children:D.toLocaleString("tr-TR",{minimumFractionDigits:2})})]})]})})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("invoices.notes")}),e.jsx("textarea",{value:s.notes,onChange:Q=>c({...s,notes:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:n("invoices.notesPlaceholder")})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:a,disabled:F,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n("common.cancel")||"Iptal"}),e.jsx("button",{onClick:$,disabled:F,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium inline-flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:F?e.jsxs(e.Fragment,{children:[e.jsx(rm,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:n("common.creating",{defaultValue:"Oluturuluyor"})})]}):t?n("common.update")||"Guncelle":n("invoices.createInvoice")||"Fatura Olustur"})]})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[70]",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n("common.warning")}),e.jsx("p",{className:"text-gray-600",children:O})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>H(null),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:n("common.ok")})})]})}),q&&e.jsx(Em,{isOpen:!0,product:q.product,requested:q.requested,available:q.available,onAdjust:()=>{_(Q=>Q.map(z=>z.id===q.itemId?{...z,quantity:q.available,total:q.available*(Number(z.unitPrice)||0)}:z))},onClose:()=>W(null)})]})}const H8=[{fallbackLabel:"Dier",value:"other"},{fallbackLabel:"Ekipman",value:"equipment"},{fallbackLabel:"Faturalar",value:"utilities"},{fallbackLabel:"Kira",value:"rent"},{fallbackLabel:"Maalar",value:"salaries"},{fallbackLabel:"Malzemeler",value:"supplies"},{fallbackLabel:"Pazarlama",value:"marketing"},{fallbackLabel:"Seyahat",value:"travel"},{fallbackLabel:"Sigorta",value:"insurance"},{fallbackLabel:"Vergiler",value:"taxes"}],K8=[bo.PENDING,bo.APPROVED,bo.PAID,bo.REJECTED],sg=()=>new Date().toISOString().split("T")[0],ay=()=>`EXP-${new Date().getFullYear()}-${String(Date.now()).slice(-3)}`,G8=a=>a?a instanceof Date?a.toISOString().split("T")[0]:a:sg(),iy=(a,o)=>{if(!a)return{expenseNumber:ay(),description:"",supplierInput:o?.name||"",supplierId:"",amount:"0",category:o?.category||"other",status:bo.PENDING,expenseDate:sg(),dueDate:"",receiptUrl:"",notes:""};const t=typeof a.supplier=="string"?{id:a.supplierId,name:a.supplier||""}:a.supplier;return{expenseNumber:a.expenseNumber||ay(),description:a.description||"",supplierInput:t?.name||"",supplierId:a.supplierId||t?.id||"",amount:a.amount?String(a.amount):"0",category:a.category||"other",status:a.status||bo.PENDING,expenseDate:G8(a.expenseDate||a.date),dueDate:a.dueDate||"",receiptUrl:a.receiptUrl||"",notes:a.notes||""}},oy=a=>{if(!a)return Number.NaN;const o=a.replace(",","."),t=Number.parseFloat(o);return Number.isNaN(t)?Number.NaN:t};function W8({isOpen:a,onClose:o,onSave:t,expense:f,suppliers:h=[],supplierInfo:d}){const{formatCurrency:n}=Jr(),{t:l,i18n:i}=$t(),[r,s]=G.useState(()=>iy(f,d)),[c,u]=G.useState(!1),[m,x]=G.useState(h),b=G.useMemo(()=>H8.map(({value:T,fallbackLabel:_})=>({value:T,label:l(`expenseCategories.${T}`)||_})),[l]);G.useEffect(()=>{a&&s(iy(f,d))},[a,f,d]),G.useEffect(()=>{x(h)},[h]);const p=T=>{s(H=>({...H,supplierInput:T,supplierId:""}));const _=T.trim().toLowerCase();if(_.length<2){u(!1),x(h);return}const O=h.filter(H=>{const F=H.name.toLowerCase(),V=H.email?H.email.toLowerCase():"",q=H.phone?H.phone.toLowerCase():"";return F.includes(_)||V.includes(_)||q.includes(_)});x(O),u(O.length>0)},v=()=>{const T=r.description.trim();if(!T){alert(l("validation.descriptionRequired")||"Ltfen aklama girin");return}const _=oy(r.amount);if(!Number.isFinite(_)||_<=0){alert(l("validation.amountRequired")||"Ltfen geerli bir tutar girin");return}if(!r.category){alert(l("validation.categoryRequired")||"Ltfen kategori sein");return}const O=r.expenseDate||sg(),H=r.supplierId.trim(),F={id:f?.id,expenseNumber:r.expenseNumber.trim()||void 0,description:T,amount:_,category:r.category,status:r.status,expenseDate:O,date:O,supplierId:H||null,dueDate:r.dueDate||void 0,receiptUrl:r.receiptUrl.trim()||void 0,notes:r.notes.trim()};t(F),o()},y=(()=>{const T=oy(r.amount);return Number.isFinite(T)?T:0})(),N=!r.description.trim()||!r.amount.trim();return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(un,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:f?l("expenses.editExpense")||"Gideri Dzenle":l("expenses.newExpense")||"Yeni Gider Ekle"}),e.jsx("p",{className:"text-sm text-gray-500",children:l("expenses.enterExpenseInfo")||"Gider bilgilerini girin"})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("expenses.expenseNumber")||"Gider Numaras"}),e.jsx("input",{type:"text",value:r.expenseNumber,onChange:T=>s(_=>({..._,expenseNumber:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Fa,{className:"w-4 h-4 inline mr-2"}),l("expenses.category")||"Kategori"," *"]}),e.jsx("select",{value:r.category,onChange:T=>s(_=>({..._,category:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:!0,children:b.map(T=>e.jsx("option",{value:T.value,children:T.label},T.value))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[l("common.description")||"Aklama"," *"]}),e.jsx("input",{type:"text",value:r.description,onChange:T=>s(_=>({..._,description:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:l("expenses.descriptionPlaceholder")||"Gider aklamas...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ts,{className:"w-4 h-4 inline mr-2"}),l("expenses.supplier")||"Tedariki/Firma"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r.supplierInput,onChange:T=>p(T.target.value),onFocus:()=>{r.supplierInput.length>=2&&m.length>0&&u(!0)},onBlur:()=>{setTimeout(()=>u(!1),200)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:l("expenses.supplierPlaceholder")||"Tedariki ad yazn..."}),r.supplierInput&&e.jsx("button",{type:"button",onClick:()=>{s(T=>({...T,supplierInput:"",supplierId:""})),u(!1)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Nr,{className:"w-4 h-4"})})]}),c&&m.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:m.map(T=>e.jsxs("div",{onClick:()=>{s(_=>({..._,supplierInput:T.name,supplierId:T.id})),u(!1)},className:"px-4 py-3 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:T.name}),T.email&&e.jsx("div",{className:"text-sm text-gray-500",children:T.email}),T.phone&&e.jsx("div",{className:"text-sm text-gray-500",children:T.phone})]},T.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[l("expenses.amount")||"Tutar"," *"]}),e.jsx("input",{type:"number",value:r.amount,onChange:T=>s(_=>({..._,amount:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0.00",min:"0",step:"0.01",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Vr,{className:"w-4 h-4 inline mr-2"}),l("expenses.expenseDate")||"Gider Tarihi"," *"]}),e.jsx("input",{type:"date",value:r.expenseDate,onChange:T=>s(_=>({..._,expenseDate:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",lang:i.language,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("expenses.paymentDate")||"deme Tarihi"}),e.jsx("input",{type:"date",value:r.dueDate,onChange:T=>s(_=>({..._,dueDate:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",lang:i.language})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("common:statusLabel")||l("common:statusLabel",{lng:"en"})||"Status"}),e.jsx("select",{value:r.status,onChange:T=>s(_=>({..._,status:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:K8.map(T=>e.jsx("option",{value:T,children:zt(l,T)},T))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("expenses.receiptUrl")}),e.jsx("input",{type:"url",value:r.receiptUrl,onChange:T=>s(_=>({..._,receiptUrl:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"https://example.com/receipt.pdf"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l("expenses.receiptUrlHelper")})]}),e.jsx("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-red-800 font-medium",children:[l("expenses.totalExpense")||"Toplam Gider",":"]}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:n(y)})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:l("common.cancel")||"ptal"}),e.jsx("button",{onClick:v,disabled:N,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:f?l("common.update")||"Gncelle":l("expenses.addExpense")||"Gider Ekle"})]})]})}):null}const pc=a=>{if(!a)return null;const o=a,t=o.stock??o.stockQuantity,f=Number(t);return Number.isFinite(f)?f:null},Y8="cash",Q8=()=>new Date().toISOString().split("T")[0],Iv=a=>{const o=(a??"").trim();return o?o.slice(0,10):Q8()},Pu=(a,o=1)=>{const t=typeof a=="number"?a:Number.parseFloat(String(a).replace(",","."));return!Number.isFinite(t)||t<=0?o:Math.round(t)},Np=a=>{if(typeof a=="number"&&Number.isFinite(a))return a;const o=String(a??"0").replace(/\s/g,"").replace(",","."),t=Number.parseFloat(o);return Number.isFinite(t)?t:0},am=a=>a==null?"":String(a),ly=a=>({saleNumber:a?.saleNumber??"",customerName:a?.customerName??"",customerEmail:a?.customerEmail??"",productId:am(a?.productId),productName:a?.productName??"",productUnit:a?.productUnit??"",quantity:Pu(a?.quantity??1),unitPrice:Np(a?.unitPrice??0),status:a?.status??"completed",date:Iv(a?.date),paymentMethod:a?.paymentMethod??Y8,notes:a?.notes??""}),Z8=(a,o)=>{if(!o)return null;const t=o.id?a.find(h=>am(h.id)===am(o.id)):null;if(t)return t;const f=(o.name??"").trim().toLowerCase();return f?a.find(h=>(h.name??"").trim().toLowerCase()===f)??null:null};function Mv({isOpen:a,onClose:o,onSave:t,sale:f,customers:h=[],products:d=[]}){const{t:n,i18n:l}=$t(),[i,r]=G.useState(()=>ly(f)),[s,c]=G.useState(null),[u,m]=G.useState(f?.customerName||""),[x,b]=G.useState(!1),[p,v]=G.useState(null),[y,N]=G.useState(f?.productName||""),[T,_]=G.useState(!1),[O,H]=G.useState(null),[F,V]=G.useState({}),[q,W]=G.useState(!1),B=L=>{r(Y=>({...Y,...L}))};_t.useEffect(()=>{if(he.debug("SaleModal useEffect invoked",{isOpen:a,hasSale:!!f,saleId:f?.id,saleName:f?.customerName}),!a)return;const L=ly(f);r(L),m(L.customerName),N(L.productName),v(null);const Y=Z8(d,{id:f?.productId,name:f?.productName});H(Y||null),b(!1),_(!1),V({}),W(!1)},[a,f,d]);const E=G.useMemo(()=>{const L=i.quantity*i.unitPrice;return Number.isFinite(L)?L:0},[i.quantity,i.unitPrice]),P=G.useMemo(()=>{const L=u.trim().toLowerCase();return L?h.filter(Y=>{const X=Y.name?Y.name.toLowerCase():"",ae=Y.company?Y.company.toLowerCase():"",$=Y.email?Y.email.toLowerCase():"";return X.includes(L)||ae.includes(L)||$.includes(L)}):h},[h,u]),A=G.useMemo(()=>{const L=y.trim().toLowerCase();return d.filter(Y=>{if(!L)return!0;const X=Y.name?Y.name.toLowerCase():"",ae=Y.sku?Y.sku.toLowerCase():"",$=Y.category?Y.category.toLowerCase():"";return X.includes(L)||ae.includes(L)||$.includes(L)}).slice(0,12)},[d,y]),k=L=>{v(L),B({customerName:L.name,customerEmail:L.email}),m(L.name),b(!1),F.customerName&&V(Y=>({...Y,customerName:""}))},j=L=>{m(L),B({customerName:L}),b(L.trim().length>0),v(null),F.customerName&&V(Y=>({...Y,customerName:""}))},S=L=>{N(L),B({productName:L,productId:""}),_(!0),H(null),F.productName&&V(Y=>({...Y,productName:""}))},C=L=>{const Y=Pu(i.quantity),X=Np(L.unitPrice??i.unitPrice??0);H(L),N(L.name||""),B({productId:am(L.id),productName:L.name||"",productUnit:L.unit||"",unitPrice:X,quantity:Y}),_(!1),F.productName&&V($=>({...$,productName:""}));const ae=pc(L);ae!==null&&Y>ae&&c({product:L,requested:Y,available:ae})},D=()=>{const L={};return i.customerName.trim()?h.some(X=>X.name?X.name.toLowerCase()===i.customerName.trim().toLowerCase():!1)||(L.customerName=n("validation.customerNotFound")):L.customerName=n("validation.customerNameRequired"),i.productName.trim()?d.some(X=>X.name?X.name.toLowerCase()===i.productName.trim().toLowerCase():!1)||(L.productName=n("validation.productNotFound")):L.productName=n("validation.productNameRequired"),i.date||(L.date=n("validation.saleDateRequired")),i.unitPrice<=0&&(L.unitPrice=n("validation.unitPriceRequired")),i.quantity<=0&&(L.quantity=n("validation.quantityRequired")),V(L),Object.keys(L).length===0},R=()=>{if(i.productId){const X=d.find(ae=>String(ae.id)===String(i.productId))||d.find(ae=>String(ae.name||"").trim().toLowerCase()===String(i.productName||"").trim().toLowerCase());if(X){const ae=pc(X),$=Number(i.quantity)||0;if(ae!==null&&$>ae){c({product:X,requested:$,available:ae});return}}}if(!D())return;const L=E,Y={...i,amount:L,total:L,createInvoice:q};f?.id&&(Y.id=f.id),(!Y.saleNumber||Y.saleNumber==="")&&delete Y.saleNumber,he.debug("SaleModal saving sale",Y),t(Y),setTimeout(()=>{he.debug("SaleModal closing after save"),o()},10)};return a?(he.debug("SaleModal rendering",{saleNumber:i.saleNumber||"YEN",customerName:i.customerName||"BO"}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(fs,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n(f?"sales.editSale":"sales.newSale")}),e.jsx("p",{className:"text-sm text-gray-500",children:n("sales.enterSaleInfo")})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":n("common.close"),children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("sales.saleNumber")}),e.jsx("input",{type:"text",value:i.saleNumber||n("sales.autoGenerated"),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"}),!i.saleNumber&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("sales.autoNumberNote")})]}),f?.sourceQuoteId?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Fr,{className:"w-4 h-4 inline mr-2"}),n("sales.table.sourceQuote",{defaultValue:"Kaynak Teklif"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-indigo-600 hover:text-indigo-800 text-left",onClick:()=>{try{const L=String(f.sourceQuoteId||"").trim();if(!L)return;o(),setTimeout(()=>{try{window.location.hash=`quotes-edit:${L}`}catch{}},100)}catch{}},title:n("quotes.editModal.title",{defaultValue:"Teklifi Dzenle"}),children:String(f?.sourceQuoteNumber||"").trim()||n("common.open",{defaultValue:"A"})}),String(f?.sourceOpportunityId||"").trim()&&e.jsx("button",{type:"button",className:"px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-indigo-600 hover:text-indigo-800 whitespace-nowrap",onClick:()=>{try{const L=String(f.sourceOpportunityId||"").trim();if(!L)return;o(),setTimeout(()=>{try{window.location.hash=`crm-deal:${L}`}catch{}},100)}catch{}},title:n("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"}),children:n("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"})})]})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Vr,{className:"w-4 h-4 inline mr-2"}),n("sales.saleDate")," *"]}),e.jsx("input",{type:"date",value:i.date,onChange:L=>B({date:Iv(L.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",lang:l.language}),F.date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ds,{className:"w-4 h-4 inline mr-2"}),n("customers.name")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:u,onChange:L=>j(L.target.value),onFocus:()=>b(!0),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${F.customerName?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,placeholder:n("customers.selectFromList")}),p&&e.jsx(cs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500 w-4 h-4"})]}),F.customerName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.customerName}),x&&P.length>0&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[e.jsxs("div",{className:"p-2 text-xs text-gray-500 border-b",children:[P.length," ",n("customers.customersFound")]}),P.map(L=>e.jsxs("button",{type:"button",onMouseDown:Y=>Y.preventDefault(),onClick:()=>k(L),className:"w-full p-3 text-left hover:bg-green-50 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:L.name}),e.jsx("div",{className:"text-sm text-gray-600",children:L.company}),e.jsx("div",{className:"text-xs text-gray-500",children:L.email})]},L.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("common.email")}),e.jsx("input",{type:"email",value:i.customerEmail,onChange:L=>B({customerEmail:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:n("customers.emailPlaceholder")}),F.customerEmail&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.customerEmail})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(bn,{className:"w-4 h-4 inline mr-2"}),n("products.productServiceName")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:y,onChange:L=>S(L.target.value),onFocus:()=>_(!0),onBlur:()=>setTimeout(()=>_(!1),120),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${F.productName?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,placeholder:n("products.selectFromList")}),O&&e.jsx(cs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500 w-4 h-4"})]}),O&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[n("products.stock"),": ",Math.max(0,pc(O)??0)," ",O.unit||""," | ",n("products.price"),": ",O.unitPrice?.toLocaleString(l.language,{minimumFractionDigits:2})]}),F.productName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.productName}),T&&A.length>0&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[e.jsxs("div",{className:"p-2 text-xs text-gray-500 border-b",children:[A.length," ",n("products.productsFound")]}),A.map(L=>e.jsxs("button",{type:"button",onMouseDown:Y=>Y.preventDefault(),onClick:()=>C(L),className:"w-full p-3 text-left hover:bg-green-50 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:L.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[L.sku?`SKU: ${L.sku}`:"",L.sku&&L.category?"  ":"",L.category||""]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n("products.price"),": ",L.unitPrice?.toLocaleString(l.language,{minimumFractionDigits:2})," | ",n("products.stock"),": ",Math.max(0,pc(L)??0)]})]},L.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n("common.quantity")," *"]}),e.jsx("input",{type:"number",value:i.quantity,onChange:L=>{const Y=Pu(L.target.value);if(B({quantity:Y}),i.productId){const X=d.find(ae=>String(ae.id)===String(i.productId));if(X){const ae=pc(X);ae!==null&&Y>ae&&c({product:X,requested:Y,available:ae})}}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",min:"1",step:"1"}),F.quantity&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.quantity})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Bn,{className:"w-4 h-4 inline mr-2"}),n("sales.unitPriceExclVAT")," *"]}),e.jsx("input",{type:"number",value:i.unitPrice,onChange:L=>B({unitPrice:Np(L.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00",min:"0",step:"0.01"}),F.unitPrice&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.unitPrice})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("sales.totalExclVAT")}),e.jsx("div",{className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-700 font-medium",children:E.toLocaleString(l.language,{minimumFractionDigits:2})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("common:statusLabel")}),e.jsxs("select",{value:i.status,onChange:L=>B({status:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"completed",children:zt(n,Kr("completed"))}),e.jsx("option",{value:"pending",children:zt(n,Kr("pending"))}),e.jsx("option",{value:"cancelled",children:zt(n,Kr("cancelled"))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ja,{className:"w-4 h-4 inline mr-2"}),n("payment.method")]}),e.jsxs("select",{value:i.paymentMethod||"cash",onChange:L=>B({paymentMethod:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"cash",children:n("payment.cash")}),e.jsx("option",{value:"card",children:n("payment.card")}),e.jsx("option",{value:"transfer",children:n("payment.transfer")}),e.jsx("option",{value:"check",children:n("payment.check")})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("common.notes")}),e.jsx("textarea",{value:i.notes,onChange:L=>B({notes:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",rows:3,placeholder:n("sales.notesPlaceholder")})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:n("common.cancel")}),e.jsx("button",{onClick:R,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:n(f?"common.update":"sales.addSale")})]})]})}),s&&e.jsx(Em,{isOpen:!0,product:s.product,requested:s.requested,available:s.available,onAdjust:()=>{B({quantity:Pu(s.available)})},onClose:()=>c(null)})]})):null}const kp={TR:["Trkiye  Bankas","Garanti BBVA","Yap Kredi Bankas","Akbank","Ziraat Bankas","Halkbank","VakfBank","QNB Finansbank","DenizBank","NG Bank","HSBC","ekerbank","TEB","Odeabank","Dier"],DE:["Deutsche Bank","Commerzbank","Sparkasse","Volksbank","N26","DKB","ING-DiBa","Postbank","HypoVereinsbank","Targobank","Consorsbank","Andere"],FR:["BNP Paribas","Socit Gnrale","Crdit Agricole","Crdit Mutuel","Banque Populaire","La Banque Postale","Crdit du Nord","HSBC France","LCL","Boursorama","Hello bank!","Autre"],US:["Bank of America","Chase","Wells Fargo","Citi","US Bank","Capital One","PNC","TD Bank","Truist","Other"],OTHER:["Other"]},X8=a=>{const o=(a||"").toLowerCase();return o.startsWith("tr")?"TR":o.startsWith("fr")?"FR":o.startsWith("de")?"DE":o.startsWith("en")?"US":"OTHER"},J8=(a,o="OTHER")=>{if(!a)return o;const t=a.toUpperCase();return Object.prototype.hasOwnProperty.call(kp,t)?t:o};function eT({isOpen:a,onClose:o,onSave:t,bank:f,bankAccount:h,country:d}){const{t:n,i18n:l}=$t(),{currency:i}=Jr(),r=G.useMemo(()=>X8(l.language),[l.language]),s=G.useMemo(()=>{const q=J8(d);return!d||q==="OTHER"||r!==q?r:q},[d,r]),c=kp[s]||kp.OTHER,u=s!=="US",m=s==="US",x=s==="DE"||s==="FR",b=s==="TR",p=[{code:"TRY",name:n("currencies.TRY"),symbol:""},{code:"USD",name:n("currencies.USD"),symbol:"$"},{code:"EUR",name:n("currencies.EUR"),symbol:""},{code:"GBP",name:n("currencies.GBP"),symbol:""}],v=h||f,[y,N]=G.useState({bankName:v?.bankName||"",accountName:v?.accountName||"",accountNumber:v?.accountNumber||"",iban:v?.iban||"",branchCode:v?.branchCode||"",routingNumber:v?.routingNumber||"",swiftBic:v?.swiftBic||"",balance:v?.balance||0,currency:v?.currency||i||"USD",accountType:v?.accountType||"checking",isActive:v?.isActive!==void 0?v.isActive:!0}),T=G.useMemo(()=>v?{bankName:v.bankName||"",accountName:v.accountName||"",accountNumber:v.accountNumber||"",iban:v.iban||"",branchCode:v.branchCode||"",routingNumber:v.routingNumber||"",swiftBic:v.swiftBic||"",balance:Number(v.balance||0),currency:v.currency||i||"USD",accountType:v.accountType||"checking",isActive:v.isActive!==void 0?v.isActive:!0}:null,[v,i]),_=!!(y.bankName&&y.accountName&&(u?y.iban:y.routingNumber)),O=G.useMemo(()=>{if(!T)return _;const q={bankName:y.bankName||"",accountName:y.accountName||"",accountNumber:y.accountNumber||"",iban:y.iban||"",branchCode:y.branchCode||"",routingNumber:y.routingNumber||"",swiftBic:y.swiftBic||"",balance:Number(y.balance||0),currency:y.currency||i||"USD",accountType:y.accountType||"checking",isActive:y.isActive!==void 0?y.isActive:!0};return JSON.stringify(q)!==JSON.stringify(T)},[T,y,i,_]);_t.useEffect(()=>{a&&v?N({bankName:v.bankName,accountName:v.accountName,accountNumber:v.accountNumber,iban:v.iban,branchCode:v.branchCode||"",routingNumber:v.routingNumber||"",swiftBic:v.swiftBic||"",balance:v.balance||0,currency:v.currency||i||"USD",accountType:v.accountType,isActive:v.isActive}):a&&!v&&N({bankName:"",accountName:"",accountNumber:"",iban:"",branchCode:"",routingNumber:"",swiftBic:"",balance:0,currency:i||"USD",accountType:"checking",isActive:!0})},[a,v,i]);const H=()=>{const q={...y};v?.id&&(q.id=v.id,q.createdAt=v.createdAt),t(q),o()},F=q=>q.replace(/\s/g,"").toUpperCase().replace(/(.{4})/g,"$1 ").trim(),V=q=>{const W=F(q);N({...y,iban:W})};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ja,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n(v?"banks.editAccount":"banks.newAccount")}),e.jsx("p",{className:"text-sm text-gray-500",children:n("banks.enterAccountInfo")})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ts,{className:"w-4 h-4 inline mr-2"}),n("banks.bankName")," *"]}),e.jsxs("select",{value:y.bankName,onChange:q=>N({...y,bankName:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[e.jsx("option",{value:"",children:n("banks.selectBank")}),c.map(q=>e.jsx("option",{value:q,children:q},q))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ds,{className:"w-4 h-4 inline mr-2"}),n("banks.accountName")," *"]}),e.jsx("input",{type:"text",value:y.accountName,onChange:q=>N({...y,accountName:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:n("banks.accountNamePlaceholder"),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Du,{className:"w-4 h-4 inline mr-2"}),n("banks.accountNumber")," *"]}),e.jsx("input",{type:"text",value:y.accountNumber??"",onChange:q=>N({...y,accountNumber:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"1234567890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("banks.accountType")}),e.jsxs("select",{value:y.accountType,onChange:q=>N({...y,accountType:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"checking",children:n("banks.accountTypes.checking")}),e.jsx("option",{value:"savings",children:n("banks.accountTypes.savings")}),e.jsx("option",{value:"business",children:n("banks.accountTypes.business")})]})]})]}),u&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(oa,{className:"w-4 h-4 inline mr-2"}),"IBAN *"]}),e.jsx("input",{type:"text",value:y.iban??"",onChange:q=>V(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:s==="DE"?"DE00 0000 0000 0000 0000 00":s==="FR"?"FR00 0000 0000 0000 0000 0000 000":"TR00 0000 0000 0000 0000 0000 00",maxLength:34,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n("banks.ibanAutoFormat")})]}),m&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n("banks.routingNumber")," *"]}),e.jsx("input",{type:"text",value:y.routingNumber??"",onChange:q=>N({...y,routingNumber:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"123456789",required:!0})]}),x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("banks.swiftBic")}),e.jsx("input",{type:"text",value:y.swiftBic??"",onChange:q=>N({...y,swiftBic:q.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"ABCDEF12XXX",maxLength:11})]}),b&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("banks.branchCode")}),e.jsx("input",{type:"text",value:y.branchCode??"",onChange:q=>N({...y,branchCode:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"1234",maxLength:8})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Bn,{className:"w-4 h-4 inline mr-2"}),n("banks.currentBalance")]}),e.jsx("input",{type:"number",value:y.balance,onChange:q=>N({...y,balance:parseFloat(q.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n("banks.currency")}),e.jsx("select",{value:y.currency,onChange:q=>N({...y,currency:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:p.map(q=>e.jsxs("option",{value:q.code,children:[q.symbol," ",q.name]},q.code))})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:y.isActive,onChange:q=>N({...y,isActive:q.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:n("banks.accountActive")})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:n("common.cancel")}),e.jsx("button",{onClick:H,disabled:!_||!O,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:n(v?"common.update":"banks.addAccount")})]})]})}):null}const zc={getMyTenant:async()=>(await Xe.get("/tenants/my-tenant")).data,updateMyTenant:async a=>(await Xe.patch("/tenants/my-tenant",a)).data,updateMySubscription:async a=>(await Xe.patch("/tenants/my-tenant/subscription",a)).data,async getMySubscriptionHistory(){return(await Xe.get("/tenants/my-tenant/subscription/history")).data}},tT=Object.freeze(Object.defineProperty({__proto__:null,tenantsApi:zc},Symbol.toStringTag,{value:"Module"})),rT=a=>Array.isArray(a)&&a.every(o=>typeof o=="object"&&o!==null&&"organization"in o&&typeof o.organization=="object"),sT=a=>typeof a=="object"&&a!==null&&"id"in a&&"email"in a&&"role"in a,nT=a=>{if(typeof a=="object"&&a!==null&&"status"in a){const o=a.status;return typeof o=="string"?o:void 0}},aT=a=>{if(a&&typeof a=="object"){const o=a;return o.response?.data?.message??o.message}},hs={async create(a){return(await Xe.post("/organizations",a)).data},async getAll(){const o=(await Xe.get("/organizations")).data;return rT(o)?o.map(t=>t.organization):o},async getById(a){return(await Xe.get(`/organizations/${a}`)).data},async update(a,o){return(await Xe.patch(`/organizations/${a}`,o)).data},async delete(a){await Xe.delete(`/organizations/${a}`)},async getMembers(a){return(await Xe.get(`/organizations/${a}/members`)).data},async updateMemberRole(a,o,t){return(await Xe.patch(`/organizations/${a}/members/${o}`,t)).data},async removeMember(a,o){await Xe.delete(`/organizations/${a}/members/${o}`)},async inviteMember(a,o){return(await Xe.post(`/organizations/${a}/invite`,o)).data},async getPendingInvites(a){return(await Xe.get(`/organizations/${a}/invites`)).data},async acceptInvite(a){return(await Xe.post("/organizations/accept-invite",a)).data},async cancelInvite(a,o){await Xe.delete(`/organizations/${a}/invites/${o}`)},async resendInvite(a,o){return(await Xe.post(`/organizations/${a}/invites/${o}/resend`)).data},async getMembershipStats(a){return(await Xe.get(`/organizations/${a}/membership-stats`)).data},async validateInviteToken(a,o){try{const t=await Xe.get(`/public/invites/${a}`,{params:o?{turnstileToken:o}:void 0}),f=nT(t.data);return f&&f!=="valid"&&f!=="accepted"?{valid:!1,error:"Invalid or expired invite token"}:sT(t.data)?{valid:!0,invite:t.data}:{valid:!0}}catch(t){return{valid:!1,error:aT(t)||"Invalid or expired invite token"}}},async completeInviteWithPassword(a,o,t){return(await Xe.post(`/public/invites/${a}/register`,{password:o,turnstileToken:t})).data}},iT=Object.freeze(Object.defineProperty({__proto__:null,default:hs,organizationsApi:hs},Symbol.toStringTag,{value:"Module"})),ng=a=>typeof a=="object"&&a!==null?a:{};async function jp(a,o){return(await Xe.post(`/billing/${a}/plan-update`,o)).data}async function ag(a){return(await Xe.post("/billing/checkout",a)).data}async function Rv(a,o){try{return(await Xe.get(`/billing/${a}/portal`,{params:{returnUrl:o}})).data}catch(t){const f=ng(t),h=f.response?.data?.message||f.message||"Portal hatas";throw String(h).includes("test mode default configuration has not been created")?new Error("Portal oturumu oluturulamad: No configuration provided and your test mode default configuration has not been created. Stripe Dashboard > Billing > Portal > Settings sayfasndan test mode iin varsaylan yaplandrmay kaydetmeniz gerekir."):t}}async function Sp(a,o){return(await Xe.post(`/billing/${a}/seats`,{seats:o})).data}async function zv(a,o,t,f){return(await Xe.post(`/billing/${a}/addon/checkout`,{additional:o})).data}async function oT(a,o){try{return(await Xe.post(`/billing/${a}/addon/charge`,{additional:o})).data}catch(t){if(ng(t).response?.status===404)return(await Xe.post("/billing/addon/charge",{tenantId:a,additional:o})).data;throw t}}async function Cp(a){return(await Xe.post(`/billing/${a}/cancel`)).data}async function lT(a){return(await Xe.post(`/billing/${a}/resume`)).data}async function im(a){return(await Xe.get(`/billing/${a}/invoices`)).data}async function cT(a){return(await Xe.get(`/billing/${a}/history`)).data}async function dT(a){return(await Xe.post(`/billing/${a}/sync`)).data}function uT(a){if(!a)return"Free";const o=a.toLowerCase();return o.includes("enterprise")||o.includes("business")?"Enterprise":o.includes("professional")||o==="pro"?"Pro":o.includes("basic")||o.includes("starter")?"Basic":"Free"}function mT(a){return a?a==="month"?"Aylk":a==="year"?"Yllk":a:""}async function hT(a){try{const o=await ag({tenantId:a,plan:"professional",interval:"month",seats:2,successUrl:window.location.origin+"/settings?upgrade=success",cancelUrl:window.location.origin+"/settings?upgrade=cancel"});he.info("Checkout session oluturuldu:",o.id),window.location.href=o.url}catch(o){const t=ng(o).response?.data?.message||o?.message||"Bilinmeyen hata";he.error("Upgrade hata:",t),window.dispatchEvent(new CustomEvent("showToast",{detail:{message:"Upgrade baarsz: "+t,tone:"error"}}))}}const aa=Object.freeze(Object.defineProperty({__proto__:null,cancelSubscriptionAtPeriodEnd:Cp,chargeAddonNow:oT,createAddonCheckout:zv,createCheckoutSession:ag,createPortalSession:Rv,debugUpgrade:hT,humanizeInterval:mT,humanizePlan:uT,listHistory:cT,listInvoices:im,resumeSubscription:lT,syncSubscription:dT,updatePlan:jp,updateSeats:Sp},Symbol.toStringTag,{value:"Module"})),Lv=a=>{if(!a)return;const o=typeof a.effectiveMaxUsers=="number"?a.effectiveMaxUsers:void 0,t=typeof a.maxUsers=="number"?a.maxUsers:void 0;return o===void 0?t:o===-1||t===-1?-1:t===void 0?o:Math.max(o,t)},fT={success:{iconBg:"bg-green-100",iconColor:"text-green-600",button:"bg-green-600 hover:bg-green-700 text-white"},error:{iconBg:"bg-red-100",iconColor:"text-red-600",button:"bg-red-600 hover:bg-red-700 text-white"},info:{iconBg:"bg-blue-100",iconColor:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700 text-white"}};function Fi({isOpen:a,onClose:o,title:t,message:f,confirmLabel:h="OK",onConfirm:d,cancelLabel:n,onCancel:l,extraLabel:i,onExtra:r,tone:s="info",autoCloseMs:c}){const u=_t.useId(),m=_t.useId(),x=_t.useRef(null);if(_t.useEffect(()=>{if(!a||!c)return;const p=window.setTimeout(()=>o(),c);return()=>window.clearTimeout(p)},[a,c,o]),_t.useEffect(()=>{a&&x.current?.focus()},[a]),!a)return null;const b=fT[s];return e.jsx("div",{className:"fixed inset-0 z-[90] overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":u,"aria-describedby":m,children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:o}),e.jsxs("div",{ref:x,tabIndex:-1,className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6 outline-none",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600","aria-label":"Close",children:e.jsx(Nr,{className:"h-5 w-5"})}),e.jsx("div",{className:`flex items-center justify-center w-12 h-12 mx-auto ${b.iconBg} rounded-full mb-4`,children:s==="error"?e.jsx(vn,{className:`h-6 w-6 ${b.iconColor}`}):e.jsx(Gp,{className:`h-6 w-6 ${b.iconColor}`})}),e.jsx("h3",{id:u,className:"text-lg font-semibold text-gray-900 text-center mb-2",children:t}),e.jsx("p",{id:m,className:"text-sm text-gray-600 text-center mb-6",children:f}),n&&i?e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{try{d?d():o()}catch{}},className:`w-full px-4 py-2 rounded-lg transition-colors ${b.button}`,children:h}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:l||o,className:"flex-1 px-4 py-2 rounded-lg transition-colors border border-gray-300 text-gray-700 bg-white hover:bg-gray-50",children:n}),e.jsx("button",{onClick:()=>{try{r?r():o()}catch{}},className:"flex-1 px-4 py-2 rounded-lg transition-colors border border-gray-300 text-gray-700 bg-white hover:bg-gray-50",children:i})]})]}):n?e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:l||o,className:"w-full px-4 py-2 rounded-lg transition-colors border border-gray-300 text-gray-700 bg-white hover:bg-gray-50",children:n}),e.jsx("button",{onClick:()=>{try{d?d():o()}catch{}},className:`w-full px-4 py-2 rounded-lg transition-colors ${b.button}`,children:h})]}):e.jsx("div",{children:e.jsx("button",{onClick:()=>{try{d?d():o()}catch{}},className:`w-full px-4 py-2 rounded-lg transition-colors ${b.button}`,children:h})})]})]})})}var pT=gb();const gT=pb(pT),xT=({members:a,organizationId:o,currentUserRole:t,currentUserId:f,onMemberRemoved:h,onMemberRoleUpdated:d})=>{const{t:n,i18n:l}=$t(),[i,r]=G.useState({}),[s,c]=G.useState({}),u=G.useRef({}),[m,x]=G.useState({}),b=t==="OWNER"||t==="ADMIN",p=O=>{switch(O){case"OWNER":return e.jsx(pv,{className:"w-4 h-4 text-yellow-500"});case"ADMIN":return e.jsx(zs,{className:"w-4 h-4 text-blue-500"});case"MEMBER":return e.jsx(ds,{className:"w-4 h-4 text-gray-500"})}},v=O=>{switch(O){case"OWNER":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"ADMIN":return"bg-blue-100 text-blue-800 border-blue-200";case"MEMBER":return"bg-gray-100 text-gray-800 border-gray-200"}},y=async O=>{if(O.role==="OWNER"){alert(n("org.members.remove.cannotRemoveOwner"));return}if(window.confirm(n("org.members.remove.message",{name:`${O.user.firstName} ${O.user.lastName}`}))){r(F=>({...F,[O.id]:!0}));try{await hs.removeMember(o,O.id),h(O.id);const F=new CustomEvent("showToast",{detail:{message:n("org.members.remove.success"),tone:"success"}});window.dispatchEvent(F)}catch(F){console.error("Failed to remove member:",F);const V=new CustomEvent("showToast",{detail:{message:F.response?.data?.message||n("org.members.remove.error"),tone:"error"}});window.dispatchEvent(V)}finally{r(F=>({...F,[O.id]:!1})),c(F=>({...F,[O.id]:!1}))}}},N=async(O,H)=>{if(O.role!==H){r(F=>({...F,[O.id]:!0}));try{await hs.updateMemberRole(o,O.id,{role:H}),d(O.id,H);const F=new CustomEvent("showToast",{detail:{message:n("org.members.updateRole.success"),tone:"success"}});window.dispatchEvent(F)}catch(F){console.error("Failed to update member role:",F);const V=new CustomEvent("showToast",{detail:{message:F.response?.data?.message||n("org.members.updateRole.error"),tone:"error"}});window.dispatchEvent(V)}finally{r(F=>({...F,[O.id]:!1})),c(F=>({...F,[O.id]:!1}))}}},T=O=>{c(F=>({...F,[O]:!F[O]}));const H=u.current[O];if(H){const F=H.getBoundingClientRect(),V=192,q=200,W=window.innerHeight-F.bottom<q+16,B=W?F.top-q:F.bottom;let E=F.right-V;E<8&&(E=8),E+V>window.innerWidth-8&&(E=window.innerWidth-V-8),x(P=>({...P,[O]:{top:B,left:E,upward:W}}))}};G.useEffect(()=>{const O=H=>{if(Object.values(s).every(W=>!W))return;const F=H.target;if(Object.keys(u.current).some(W=>{const B=u.current[W];return B&&(B===F||B.contains(F))}))return;const q=document.querySelector(".member-menu-portal");q&&(q===F||q.contains(F))||c({})};return window.addEventListener("mousedown",O),()=>window.removeEventListener("mousedown",O)},[s]),G.useEffect(()=>{const O=()=>{Object.keys(s).forEach(H=>{if(!s[H])return;const F=u.current[H];if(!F)return;const V=F.getBoundingClientRect(),q=200,W=window.innerHeight-V.bottom<q+16,B=W?V.top-q:V.bottom;let E=V.right-192;E<8&&(E=8),E+192>window.innerWidth-8&&(E=window.innerWidth-192-8),x(P=>({...P,[H]:{top:B,left:E,upward:W}}))})};return Object.values(s).some(H=>H)&&(window.addEventListener("scroll",O,!0),window.addEventListener("resize",O)),()=>{window.removeEventListener("scroll",O,!0),window.removeEventListener("resize",O)}},[s]);const _=O=>new Date(O).toLocaleDateString(l.language==="tr"?"tr-TR":l.language==="de"?"de-DE":l.language==="fr"?"fr-FR":"en-US",{year:"numeric",month:"short",day:"numeric"});return a.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(ds,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n("org.members.empty.title")}),e.jsx("p",{className:"text-gray-500",children:n("org.members.empty.subtitle")})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("org.members.table.name")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("org.members.table.email")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("org.members.table.role")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("org.members.table.joinedAt")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("org.members.table.lastLogin")}),b&&e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("org.members.table.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(O=>{const H=O.user.id===f,F=b&&!H&&O.role!=="OWNER";return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-sm",children:(O.user.firstName?.[0]||"")+(O.user.lastName?.[0]||"")})})}),e.jsx("div",{className:"ml-4",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[O.user.firstName," ",O.user.lastName,H&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",n("org.members.youLabel"),")"]})]})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:O.user.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[p(O.role),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${v(O.role)}`,children:n(`org.members.roles.${O.role}`)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_(O.createdAt)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:O.user.lastLoginAt?new Date(O.user.lastLoginAt).toLocaleString(l.language==="tr"?"tr-TR":l.language==="de"?"de-DE":l.language==="fr"?"fr-FR":"en-US"):e.jsx("span",{className:"text-gray-400",children:"-"})}),b&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:F?e.jsxs("div",{className:"inline-block",children:[e.jsx("button",{ref:V=>{u.current[O.id]=V},onClick:()=>T(O.id),disabled:i[O.id],className:"text-gray-400 hover:text-gray-500 p-1 rounded",children:e.jsx(CA,{className:"w-4 h-4"})}),s[O.id]&&m[O.id]&&gT.createPortal(e.jsx("div",{className:"member-menu-portal fixed w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50",style:{top:m[O.id].top,left:m[O.id].left},children:e.jsxs("div",{className:"py-1",children:[O.role!=="ADMIN"&&t==="OWNER"&&e.jsxs("button",{onClick:()=>N(O,"ADMIN"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(zs,{className:"w-4 h-4 mr-2 text-blue-500"}),n("org.members.makeAdmin")]}),O.role!=="MEMBER"&&e.jsxs("button",{onClick:()=>N(O,"MEMBER"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(ds,{className:"w-4 h-4 mr-2 text-gray-500"}),n("org.members.makeMember")]}),e.jsxs("button",{onClick:()=>y(O),className:"flex items-center w-full px-4 py-2 text-sm text-red-700 hover:bg-red-50",children:[e.jsx(OA,{className:"w-4 h-4 mr-2 text-red-500"}),n("org.members.remove.title")]})]})}),document.body)]}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},O.id)})})]})})})},yT=({organizationId:a,currentUserRole:o,onInviteSent:t,membershipStats:f})=>{const{t:h}=$t(),{tenant:d,refreshUser:n}=Gs(),l=(v,y)=>{const N=h(v);return N&&N!==v?N:y},[i,r]=G.useState(!1),[s,c]=G.useState(!1),[u,m]=G.useState({email:"",role:"MEMBER"}),x=o==="OWNER"||o==="ADMIN",b=async v=>{if(v.preventDefault(),!x)return;if(!f.canAddMore){const N=new CustomEvent("showToast",{detail:{message:h("org.members.invite.limitReached"),tone:"error"}});window.dispatchEvent(N);return}c(!0);const y=async()=>{await hs.inviteMember(a,u)};try{try{await y()}catch(T){const _=T?.response?.status,O=T?.response?.data?.message||"";if(_===400&&/limit|plan|member|STARTER/i.test(O))try{const F=String(d?.id||en()||"");if(F){const{syncSubscription:V}=await Mr(async()=>{const{syncSubscription:q}=await Promise.resolve().then(()=>aa);return{syncSubscription:q}},void 0);await V(F),await n()}await y()}catch{throw T}else throw T}m({email:"",role:"MEMBER"}),r(!1),t();const N=new CustomEvent("showToast",{detail:{message:h("org.members.invite.success"),tone:"success"}});window.dispatchEvent(N)}catch(N){console.error("Failed to send invite:",N);let T=h("org.members.invite.error");N.response?.status===409?T=h("org.members.invite.duplicate"):N.response?.data?.message&&(T=N.response.data.message);const _=new CustomEvent("showToast",{detail:{message:T,tone:"error"}});window.dispatchEvent(_)}finally{c(!1)}},p=o==="OWNER"?["MEMBER","ADMIN"]:["MEMBER"];return x?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:h("org.members.invite.title")}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[f.currentMembers," / ",f.maxMembers===-1?"":f.maxMembers," ",h("org.members.membersLabel"),e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:f.plan})]})]}),e.jsxs("button",{onClick:()=>r(!i),disabled:!f.canAddMore,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${f.canAddMore?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:f.canAddMore?"":l("org.members.invite.limitReached","ye limiti dolu"),children:[e.jsx(pp,{className:"w-4 h-4"}),e.jsx("span",{children:f.canAddMore?l("org.members.invite.button","ye Davet Et"):l("org.members.limitFull","ye limiti dolu")})]})]}),i&&e.jsxs("form",{onSubmit:b,className:"space-y-4 border-t border-gray-200 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:l("org.members.invite.form.email","E-posta Adresi")}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",id:"email",required:!0,value:u.email,onChange:v=>m(y=>({...y,email:v.target.value})),placeholder:l("org.members.invite.form.emailPlaceholder","E-posta adresi"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:l("org.members.invite.form.role","Rol")}),e.jsx("select",{id:"role",value:u.role,onChange:v=>m(y=>({...y,role:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:p.map(v=>e.jsx("option",{value:v,children:l(`org.members.roles.${v}`,v==="ADMIN"?"Ynetici":v==="MEMBER"?"ye":v)},v))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:l("org.members.cancel","ptal")}),e.jsxs("button",{type:"submit",disabled:s||!u.email.trim(),className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(Hs,{className:"w-4 h-4"}),e.jsx("span",{children:s?l("org.members.sending","Gnderiliyor"):l("org.members.inviteButton","Davet Gnder")})]})]})]})]}):null},bT=()=>{const{t:a}=$t(),{user:o,tenant:t,refreshUser:f}=Gs(),h=G.useMemo(()=>Lv(t),[t?.effectiveMaxUsers,t?.maxUsers]),[d,n]=G.useState(!0),[l,i]=G.useState([]),[r,s]=G.useState([]),[c,u]=G.useState(null),[m,x]=G.useState("MEMBER"),[b,p]=G.useState(null),[v,y]=G.useState(null),N=G.useCallback(B=>{if(!B)return"STARTER";const E=B.toLowerCase();return E.includes("enterprise")||E==="business"?"BUSINESS":E.includes("professional")||E==="pro"?"PRO":"STARTER"},[]),T=G.useCallback(async()=>{try{n(!0),y(null),he.debug("Loading organization data...");const B=await hs.getAll();if(he.debug("Organizations received:",B),!B||B.length===0){he.warn("No organizations found"),y("No organization found");return}let E=B[0];if(he.debug("Selected organization:",E),!E||!E.id){he.error("Invalid organization object:",E),y("Invalid organization data");return}try{if(E&&t?.subscriptionPlan){const C=N(t.subscriptionPlan);C!==E.plan&&(E={...E,plan:C})}}catch(C){he.warn("Plan normalization failed, continuing with original plan",C)}u(E),he.debug("Loading members, invites, and stats for org:",E.id);const[P,A,k]=await Promise.all([hs.getMembers(E.id),hs.getPendingInvites(E.id),hs.getMembershipStats(E.id)]);he.debug("Data loaded successfully:",{members:P.length,invites:A.length,stats:k}),i(P),s(A);const j=k?{...k}:null;if(j&&t?.subscriptionPlan){const C=N(t.subscriptionPlan);C!==j.plan&&(j.plan=C),typeof h=="number"?j.maxMembers=h:j.maxMembers<=1&&(C==="PRO"&&j.maxMembers<3&&(j.maxMembers=3),C==="BUSINESS"&&j.maxMembers<10&&(j.maxMembers=10)),j.maxMembers!==-1?j.canAddMore=j.currentMembers<j.maxMembers:j.canAddMore=!0}p(j);const S=P.find(C=>C.user.id===o?.id);S&&(x(S.role),he.debug("Current user role:",S.role))}catch(B){he.error("Failed to load organization data:",B);const E=B.response?.data?.message;y(E||"Failed to load organization data")}finally{n(!1)}},[N,t?.subscriptionPlan,h,o?.id]);G.useEffect(()=>{(async()=>{try{await f()}catch(E){he.warn("refreshUser failed, continuing with cached data:",E)}T()})()},[T,f]),G.useEffect(()=>{if(typeof window>"u")return;const B=()=>{he.debug("Billing success detected, refreshing organization members"),T()};return window.addEventListener("billingSuccess",B),()=>{window.removeEventListener("billingSuccess",B)}},[T]);const _=B=>{i(E=>E.filter(P=>P.id!==B))},O=(B,E)=>{i(P=>P.map(A=>A.id===B?{...A,role:E}:A))},H=G.useCallback(async()=>{if(c)try{const[B,E]=await Promise.all([hs.getPendingInvites(c.id),hs.getMembershipStats(c.id)]),P=E?{...E}:null;if(P&&t?.subscriptionPlan){const A=N(t.subscriptionPlan);A!==P.plan&&(P.plan=A),typeof h=="number"?P.maxMembers=h:P.maxMembers<=1&&(A==="PRO"&&P.maxMembers<3&&(P.maxMembers=3),A==="BUSINESS"&&P.maxMembers<10&&(P.maxMembers=10)),P.maxMembers!==-1?P.canAddMore=P.currentMembers<P.maxMembers:P.canAddMore=!0}s(B),p(P)}catch(B){he.error("Failed to refresh pending invites after sending",B)}},[c,N,t?.subscriptionPlan,h]),F=async B=>{if(c)try{await hs.resendInvite(c.id,B.id),await H();const E=new CustomEvent("showToast",{detail:{message:a("org.members.pendingInvites.resendSuccess"),tone:"success"}});window.dispatchEvent(E)}catch(E){he.error("Failed to resend invite",E);const P=E.response?.data?.message,A=new CustomEvent("showToast",{detail:{message:P||"Failed to resend invite",tone:"error"}});window.dispatchEvent(A)}},V=async B=>{if(!(!c||!window.confirm(a("org.members.pendingInvites.cancelConfirm",{email:B.email,defaultValue:`${B.email} adresine gnderilen daveti iptal etmek istediinizden emin misiniz?`}))))try{await hs.cancelInvite(c.id,B.id),s(A=>A.filter(k=>k.id!==B.id));const P=new CustomEvent("showToast",{detail:{message:a("org.members.pendingInvites.cancelSuccess"),tone:"success"}});window.dispatchEvent(P)}catch(P){he.error("Failed to cancel invite",P);const A=P.response?.data?.message,k=new CustomEvent("showToast",{detail:{message:A||"Failed to cancel invite",tone:"error"}});window.dispatchEvent(k)}},q=async B=>{const E=`${window.location.origin}/#join?token=${B.token}`;try{await navigator.clipboard.writeText(E);const P=new CustomEvent("showToast",{detail:{message:a("common.copied","Kopyaland"),tone:"success"}});window.dispatchEvent(P)}catch(P){he.error("Failed to copy invite link",P);const A=new CustomEvent("showToast",{detail:{message:a("common.copyFailed","Kopyalama baarsz"),tone:"error"}});window.dispatchEvent(A)}},W=B=>new Date(B).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return d?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-8"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})]})})}):v?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Hata"}),e.jsx("p",{className:"text-red-600 mb-4",children:v}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:a("org.members.tryAgain")})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Ls,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a("org.members.title")})]}),e.jsx("p",{className:"text-gray-600",children:a("org.members.subtitle")}),c&&b&&e.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-sm text-gray-500",children:[e.jsxs("span",{children:[a("org.members.organization"),": ",e.jsx("strong",{children:c.name})]}),e.jsxs("span",{children:[a("org.members.membersLabel"),": ",e.jsx("strong",{children:b.currentMembers}),b.maxMembers!==-1&&e.jsxs("span",{children:[" / ",b.maxMembers]})]}),e.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:[b.plan," ",a("org.members.plan")]})]})]}),e.jsxs("div",{className:"space-y-8",children:[c&&b&&e.jsx(yT,{organizationId:c.id,currentUserRole:m,onInviteSent:H,membershipStats:b}),r.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ui,{className:"w-5 h-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a("org.members.pendingInvites.title")}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",a("org.members.pendingInvites.count",{count:r.length}),")"]})]}),e.jsx("div",{className:"space-y-3",children:r.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Hs,{className:"w-4 h-4 text-orange-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:B.email}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a(`org.members.roles.${B.role}`),"  ",a("org.members.pendingInvites.expires",{date:W(B.expiresAt)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>q(B),title:a("common.actions.copyLink",{defaultValue:"Balanty kopyala"}),className:"flex items-center space-x-1 px-3 py-1 text-sm text-blue-700 bg-blue-100 rounded hover:bg-blue-200 transition-colors",children:[e.jsx(mp,{className:"w-3 h-3"}),e.jsx("span",{children:a("common.actions.copyLink",{defaultValue:"Balanty kopyala"})})]}),e.jsxs("button",{onClick:()=>F(B),className:"flex items-center space-x-1 px-3 py-1 text-sm text-orange-700 bg-orange-100 rounded hover:bg-orange-200 transition-colors",children:[e.jsx(jl,{className:"w-3 h-3"}),e.jsx("span",{children:a("org.members.pendingInvites.resend")})]}),e.jsxs("button",{onClick:()=>V(B),className:"flex items-center space-x-1 px-3 py-1 text-sm text-red-700 bg-red-100 rounded hover:bg-red-200 transition-colors",children:[e.jsx(Nr,{className:"w-3 h-3"}),e.jsx("span",{children:a("org.members.pendingInvites.cancel")})]})]})]},B.id))})]}),c&&o&&e.jsx(xT,{members:l,organizationId:c.id,currentUserRole:m,currentUserId:o.id,onMemberRemoved:_,onMemberRoleUpdated:O})]})]})})},vT=()=>{const{t:a}=$t("common"),[o,t]=G.useState([]),[f,h]=G.useState(!0),[d,n]=G.useState(!1),[l,i]=G.useState(null),[r,s]=G.useState({name:"",startDate:"",endDate:""}),[c,u]=G.useState({}),m=async()=>{try{const H=(await Xe.get("/fiscal-periods")).data;t(Array.isArray(H)?H:[])}catch(O){console.error("Dnemler yklenemedi:",O)}finally{h(!1)}};G.useEffect(()=>{m()},[]);const x=()=>{const O={};if(r.name.trim()||(O.name=a("fiscalPeriods.validation.nameRequired")),r.startDate||(O.startDate=a("fiscalPeriods.validation.startDateRequired")),r.endDate||(O.endDate=a("fiscalPeriods.validation.endDateRequired")),r.startDate&&r.endDate){const H=new Date(r.startDate),F=new Date(r.endDate);F<=H&&(O.endDate=a("fiscalPeriods.validation.endDateAfterStart"));const V=Math.abs(F.getTime()-H.getTime());Math.ceil(V/(1e3*60*60*24))<1&&(O.endDate=a("fiscalPeriods.validation.minimumDuration")),o.find(B=>{if(l&&B.id===l.id)return!1;const E=new Date(B.periodStart),P=new Date(B.periodEnd);return H<=P&&F>=E})&&(O.startDate=a("fiscalPeriods.validation.periodOverlap"),O.endDate=a("fiscalPeriods.validation.periodOverlap"))}return u(O),Object.keys(O).length===0},b=async O=>{if(O.preventDefault(),!!x())try{await Xe.post("/fiscal-periods",r),n(!1),s({name:"",startDate:"",endDate:""}),u({}),m()}catch(H){alert(`${a("fiscalPeriods.errors.createFailed")}: ${H.response?.data?.message||H.message}`)}},p=async O=>{if(O.preventDefault(),!!l&&x())try{await Xe.patch(`/fiscal-periods/${l.id}`,r),i(null),s({name:"",startDate:"",endDate:""}),u({}),m()}catch(H){alert(`${a("fiscalPeriods.errors.updateFailed")}: ${H.response?.data?.message||H.message}`)}},v=async O=>{if(confirm(a("fiscalPeriods.lockConfirm")))try{await Xe.patch(`/fiscal-periods/${O}/lock`,{lockReason:"Locked by user"}),m()}catch(H){alert(`${a("fiscalPeriods.errors.lockFailed")}: ${H.response?.data?.message||H.message}`)}},y=async O=>{if(confirm(a("fiscalPeriods.unlockConfirm")))try{await Xe.patch(`/fiscal-periods/${O}/unlock`),m()}catch(H){alert(`${a("fiscalPeriods.errors.unlockFailed")}: ${H.response?.data?.message||H.message}`)}},N=async O=>{if(confirm(a("fiscalPeriods.deleteConfirm")))try{await Xe.delete(`/fiscal-periods/${O}`),m()}catch(H){alert(`${a("fiscalPeriods.errors.deleteFailed")}: ${H.response?.data?.message||H.message}`)}},T=O=>{i(O),s({name:O.name||"",startDate:O.periodStart||"",endDate:O.periodEnd||""}),u({})},_=O=>new Date(O).toLocaleDateString("tr-TR");return f?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vr,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a("fiscalPeriods.title")})]}),e.jsxs("button",{onClick:()=>{s({name:"",startDate:"",endDate:""}),u({}),i(null),n(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center",children:[e.jsx(Ks,{className:"h-4 w-4 mr-2"}),a("fiscalPeriods.newPeriod")]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("fiscalPeriods.periodName")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("fiscalPeriods.startDate")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("fiscalPeriods.endDate")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("fiscalPeriods.status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("fiscalPeriods.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(O=>e.jsxs("tr",{className:O.isLocked?"bg-red-50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:_(O.periodStart)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:_(O.periodEnd)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${O.isLocked?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:O.isLocked?e.jsxs(e.Fragment,{children:[e.jsx(Yn,{className:"h-3 w-3 mr-1"}),a("fiscalPeriods.locked")]}):e.jsxs(e.Fragment,{children:[e.jsx(fp,{className:"h-3 w-3 mr-1"}),a("fiscalPeriods.active")]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[!O.isLocked&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>T(O),className:"text-blue-600 hover:text-blue-900",title:a("fiscalPeriods.edit"),children:e.jsx(AA,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>v(O.id),className:"text-orange-600 hover:text-orange-900",title:a("fiscalPeriods.lock"),children:e.jsx(Yn,{className:"h-4 w-4"})})]}),O.isLocked&&e.jsx("button",{onClick:()=>y(O.id),className:"text-green-600 hover:text-green-900",title:a("fiscalPeriods.unlock"),children:e.jsx(fp,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(O.id),className:"text-red-600 hover:text-red-900",title:a("fiscalPeriods.delete"),children:e.jsx(Xr,{className:"h-4 w-4"})})]})})]},O.id))})]}),o.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Vr,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:a("fiscalPeriods.noPeriods")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("fiscalPeriods.noPeriodsDesc")})]})]}),(d||l)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:a(l?"fiscalPeriods.editPeriod":"fiscalPeriods.addPeriod")}),e.jsxs("form",{onSubmit:l?p:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("fiscalPeriods.periodName")}),e.jsx("input",{type:"text",value:r.name,onChange:O=>s({...r,name:O.target.value}),className:`w-full border rounded-lg px-3 py-2 ${c.name?"border-red-300 bg-red-50":"border-gray-300"}`,required:!0,placeholder:a("fiscalPeriods.periodNamePlaceholder")}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("fiscalPeriods.startDate")}),e.jsx("input",{type:"date",value:r.startDate,onChange:O=>s({...r,startDate:O.target.value}),className:`w-full border rounded-lg px-3 py-2 ${c.startDate?"border-red-300 bg-red-50":"border-gray-300"}`,required:!0}),c.startDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.startDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("fiscalPeriods.endDate")}),e.jsx("input",{type:"date",value:r.endDate,onChange:O=>s({...r,endDate:O.target.value}),className:`w-full border rounded-lg px-3 py-2 ${c.endDate?"border-red-300 bg-red-50":"border-gray-300"}`,required:!0}),c.endDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.endDate})]}),l?.isLocked&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex",children:[e.jsx(vn,{className:"h-5 w-5 text-yellow-400"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700",children:a("fiscalPeriods.errors.periodLocked")})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{n(!1),i(null),s({name:"",startDate:"",endDate:""}),u({}),s({name:"",startDate:"",endDate:""}),u({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:a("common.cancel")}),e.jsx("button",{type:"submit",disabled:l?.isLocked,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a(l?"common.update":"common.add")})]})]})]})})]})},cy={async listLogs(a={}){return(await Xe.get("/audit/logs",{params:a})).data},async listEntities(){return(await Xe.get("/audit/entities")).data}},wT=()=>{const[a,o]=G.useState([]),[t,f]=G.useState(!0),[h,d]=G.useState(null),[n,l]=G.useState(0),[i,r]=G.useState(0),[s,c]=G.useState(1),[u,m]=G.useState([]),[x,b]=G.useState({page:1,limit:20}),[p,v]=G.useState(!1);G.useEffect(()=>{(async()=>{try{const V=await cy.listEntities();m(Array.isArray(V.entities)?V.entities:[])}catch(V){he.error("Failed to load audit entities",V)}})()},[]);const y=G.useCallback(async()=>{try{if(f(!0),d(null),!zn()){d("Authentication required");return}const V={page:x.page,limit:x.limit,entity:x.entity||void 0,action:x.action||void 0,userId:x.userId||void 0,startDate:x.startDate||void 0,endDate:x.endDate||void 0};he.debug("audit.logs.fetch",V);const q=await cy.listLogs(V);o(q.data),l(q.total),r(q.totalPages),c(q.page)}catch(F){d(F instanceof Error?F.message:"Failed to load audit logs")}finally{f(!1)}},[x]);G.useEffect(()=>{y()},[y]);const N=(F,V)=>{b(q=>({...q,[F]:V,page:F!=="page"?1:typeof V=="number"?V:parseInt(V.toString())}))},T=()=>{b({page:1,limit:20})},_=F=>new Date(F).toLocaleString(),O=F=>{switch(F){case"CREATE":return"text-green-600 bg-green-50";case"UPDATE":return"text-blue-600 bg-blue-50";case"DELETE":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},H=F=>!F||Object.keys(F).length===0?null:e.jsx("div",{className:"mt-2 text-xs text-gray-600",children:e.jsxs("details",{className:"cursor-pointer",children:[e.jsxs("summary",{className:"hover:text-gray-800",children:["View Changes (",Object.keys(F).length," fields)"]}),e.jsx("pre",{className:"mt-1 p-2 bg-gray-50 rounded text-xs overflow-x-auto",children:JSON.stringify(F,null,2)})]})});return t?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading audit logs..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(em,{className:"h-6 w-6 text-blue-500"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Audit Logs"})]}),e.jsxs("button",{onClick:()=>v(!p),className:"flex items-center space-x-2 px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(gv,{className:"h-4 w-4"}),e.jsx("span",{children:"Filters"})]})]}),p&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entity"}),e.jsxs("select",{value:x.entity||"",onChange:F=>N("entity",F.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"All Entities"}),u.map(F=>e.jsx("option",{value:F,children:F},F))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action"}),e.jsxs("select",{value:x.action||"",onChange:F=>N("action",F.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"CREATE",children:"Create"}),e.jsx("option",{value:"UPDATE",children:"Update"}),e.jsx("option",{value:"DELETE",children:"Delete"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:x.startDate||"",onChange:F=>N("startDate",F.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:x.endDate||"",onChange:F=>N("endDate",F.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:T,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 underline",children:"Clear Filters"})})]})}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-red-600 text-sm",children:h})}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",a.length," of ",n," audit log entries"]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Changes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(F=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ui,{className:"h-4 w-4 text-gray-400 mr-2"}),_(F.createdAt)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ds,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("div",{children:F.user?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-medium",children:[F.user.firstName," ",F.user.lastName]}),e.jsx("div",{className:"text-gray-500 text-xs",children:F.user.email})]}):e.jsx("span",{className:"text-gray-500",children:"System"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O(F.action)}`,children:F.action})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:F.entity}),F.entityId&&e.jsxs("div",{className:"text-gray-500 text-xs font-mono",children:[F.entityId.substring(0,8),"..."]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:H(F.diff)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:F.ip||"N/A"})]},F.id))})]})}),a.length===0&&!t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(em,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No audit logs found"})]})]}),i>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",s," of ",i]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>N("page",Math.max(1,s-1)),disabled:s<=1,className:"flex items-center px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(iA,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("button",{onClick:()=>N("page",Math.min(i,s+1)),disabled:s>=i,className:"flex items-center px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",e.jsx(fv,{className:"h-4 w-4 ml-1"})]})]})]})]})},NT={free:"free",starter:"free",basic:"free",professional:"professional",pro:"professional",enterprise:"enterprise",business:"enterprise"},kT={free:0,professional:1,enterprise:2},om=a=>a?NT[a.trim().toLowerCase()]??null:null,dy=a=>{const o=om(a);return o?kT[o]:0},Ap=a=>{const o=om(a);return!o||o==="free"?null:o},Af=a=>Ap(a)!==null,ia=(a,o="Hata")=>{if(typeof a=="string")return a;if(a&&typeof a=="object"){const t=a;return t.response?.data?.message||t.message||o}return o},jT=a=>{if(!a)return null;if(typeof a=="string"&&a.trim())return a.trim();if(typeof a=="number"&&Number.isFinite(a))return String(a);if(typeof a=="object"){const o=a;if(typeof o.id=="string"&&o.id.trim())return o.id.trim();if(typeof o._id=="string"&&o._id.trim())return o._id.trim();if(typeof o._id=="number"&&Number.isFinite(o._id))return String(o._id)}return null},Ov=a=>{if(!a)return null;try{return JSON.parse(a)}catch(o){return he.debug("JSON parse failed",{error:o,rawSnippet:a.slice(0,32)}),null}},ST=a=>{const o=(a||"").toUpperCase();return o==="OWNER"||o==="ADMIN"||o==="MEMBER"?o:null},uy=a=>!!a&&typeof a=="object"&&"id"in a,Tp=a=>{if(Array.isArray(a))return a.filter(uy);if(a&&typeof a=="object"){const o=a.invoices;if(Array.isArray(o))return o.filter(uy)}return[]},CT=a=>!!a&&typeof a=="object"&&"type"in a,AT=a=>Array.isArray(a)?a.filter(CT):[],Tf=a=>{const o=String(a||"").toLowerCase();return o==="professional"||o==="pro"?3:o==="enterprise"||o==="business"?10:1},Ef=a=>{const o=new Set,t=jT(a);t&&o.add(t);const f=wm();return f&&o.add(f),o.add("anon"),Array.from(o.values())},na={get:a=>Et.getItem(a),set:(a,o)=>Et.setItem(a,o),remove:a=>Et.removeItem(a)},Fv=a=>{if(a?.id)return a.id;const o=en();return o||null},TT=({tenant:a,currentLanguage:o,text:t})=>{const{t:f}=$t("common"),{refreshUser:h}=Gs(),d=String(a?.subscriptionPlan||"").toLowerCase(),n=om(d)??"free",l=n==="free",i=Fv(a),r=()=>{if(!i)throw new Error("Tenant bulunamad");return i},s={free:"Starter",starter:"Starter",basic:"Basic",professional:"Pro",pro:"Pro",enterprise:"Business",business:"Business"},c=s[d]||s[n]||(d?d.toUpperCase():""),u={tr:{month:f("common:planTab.monthly"),year:f("common:planTab.yearly")},en:{month:f("common:planTab.monthly"),year:f("common:planTab.yearly")},fr:{month:f("common:planTab.monthly"),year:f("common:planTab.yearly")},de:{month:f("common:planTab.monthly"),year:f("common:planTab.yearly")}},m=a?.billingInterval??void 0,b=(()=>{if(m)return m;try{const xe=a?.subscriptionExpiresAt?new Date(a.subscriptionExpiresAt).getTime():0,Be=Date.now();if(xe>Be){const $e=Math.round((xe-Be)/864e5);if($e>=330)return"year";if($e>=25)return"month"}}catch(xe){he.warn("Failed to infer billing interval from subscription date",xe)}})(),p=l?"":b?u[o]?.[b]||(b==="year"?"Yearly":"Monthly"):u[o]?.month||"Monthly",[v,y]=G.useState(n),[N,T]=G.useState("monthly"),_=G.useMemo(()=>Lv(a),[a?.effectiveMaxUsers,a?.maxUsers]),O=typeof _=="number"?_:1,H=Tf(d||"free"),F=Math.max(0,O-H),[V,q]=G.useState(1),[W,B]=G.useState(!1),[E,P]=G.useState(""),[A,k]=G.useState({open:!1,title:"",message:""}),[j,S]=G.useState({open:!1,mode:"now",count:1}),C=xe=>{try{window.dispatchEvent(new CustomEvent("billingSuccess",{detail:{...xe,ts:Date.now()}}))}catch(Be){he.debug("billingSuccess event dispatch failed",Be)}},D=async(xe,Be)=>{if(P(""),Be<=0){P(o==="tr"?"Ek kullanc >= 1 olmal":"Seat count must be at least 1.");return}try{B(!0);const $e=r();if(xe==="now"){const{chargeAddonNow:ye,listInvoices:oe}=await Mr(async()=>{const{chargeAddonNow:kt,listInvoices:we}=await Promise.resolve().then(()=>aa);return{chargeAddonNow:kt,listInvoices:we}},void 0),me=await ye($e,Be);if(!me?.success){P(o==="tr"?"lem baarsz.":"Operation failed.");return}const ue=(me.currency||"").toUpperCase(),ze=typeof me.amountPaid=="number"&&me.amountPaid>0?me.amountPaid:typeof me.amountDue=="number"&&me.amountDue>0?me.amountDue:null,tt=ze?` (${(ze/100).toFixed(2)} ${ue})`:"";P((o==="tr"?"lave kullanclar tahsil edildi.":"Additional users charged.")+tt),q(1),await h();try{const kt=await oe($e);z(Tp(kt?.invoices))}catch(kt){he.warn("Invoice refresh after addon charge failed",kt)}C({type:"addon",seats:Be})}else{const ye=await zv($e,Be,"","");if(!ye?.success){P(o==="tr"?"lem baarsz.":"Operation failed.");return}const oe=(()=>{const me=(ye.upcomingCurrency||"").toUpperCase();if(typeof ye.upcomingProrationTotal=="number"){const ue=(ye.upcomingProrationTotal/100).toFixed(2);return o==="tr"?` (Bu dnem iin ek proration: ${ue} ${me}  bir sonraki faturaya eklenecek)`:` (Proration for this period: ${ue} ${me}  will be added to the next invoice)`}return""})();P((o==="tr"?"lave kullanclar eklendi.":"Additional users added.")+oe),q(1),await h(),C({type:"addon",seats:Be})}}catch($e){P(ia($e,o==="tr"?"Hata":"Error"))}finally{B(!1)}},[R,L]=G.useState({open:!1,title:"",message:"",tone:"info"}),[Y,X]=G.useState([]),[ae,$]=G.useState(!1),[Q,z]=G.useState([]),[M,U]=G.useState(!1),[te,ie]=G.useState("all"),[se,le]=G.useState(""),[Ne,ke]=G.useState(""),[Z,ce]=G.useState(""),[ve,De]=G.useState(null),Ae=()=>{try{return Q.filter(xe=>{if(!!xe.zeroTotal||typeof xe.total=="number"&&xe.total===0)return!1;const $e=String(xe.status||"").toLowerCase();if(te==="paid"&&$e!=="paid"||te==="open"&&!["open","draft"].includes($e)||te==="unpaid"&&!["unpaid","void","uncollectible"].includes($e)||te==="nonzero"&&typeof xe.total=="number"&&xe.total===0)return!1;if(se){const ye=se.toLowerCase();if(!`${(xe.number||xe.id||"").toLowerCase()} ${(xe.currency||"").toLowerCase()}`.includes(ye))return!1}if(Ne){const ye=new Date(`${Ne}T00:00:00Z`).getTime();if((xe.created?new Date(xe.created).getTime():0)<ye)return!1}if(Z){const ye=new Date(`${Z}T23:59:59Z`).getTime();if((xe.created?new Date(xe.created).getTime():0)>ye)return!1}return!0})}catch(xe){return he.warn("Invoice filtering failed",xe),[]}},[Ie,Ue]=G.useState(!!a?.cancelAtPeriodEnd),Ge=a?.subscriptionExpiresAt?new Date(a.subscriptionExpiresAt):null,Le=Ge?Ge.toLocaleDateString():"",at=f(Ie?"common:planTab.currentPlan.cancellationDate":"common:planTab.currentPlan.renewalDate");G.useEffect(()=>{y(om(d)??"free"),Ue(!!a?.cancelAtPeriodEnd)},[d,_,a?.cancelAtPeriodEnd]),G.useEffect(()=>{h().catch(xe=>he.warn("Initial tenant refresh failed",xe))},[h]),G.useEffect(()=>{let xe=!1;return(async()=>{try{if(!Af(d))return;const $e=Tf(d),ye=typeof _=="number"?_:0;if(ye>0&&ye<$e){const oe=i;if(!oe)return;const{syncSubscription:me}=await Mr(async()=>{const{syncSubscription:ue}=await Promise.resolve().then(()=>aa);return{syncSubscription:ue}},void 0);await me(oe),xe||await h()}}catch($e){he.warn("Automatic subscription sync failed",$e)}})(),()=>{xe=!0}},[d,_,i,h]),G.useEffect(()=>{const xe=new URL(window.location.href);if(!(xe.searchParams.get("plan")==="success"||xe.searchParams.get("upgrade")==="success"))return;(async()=>{try{const ye=i;if(!ye)return;const{syncSubscription:oe}=await Mr(async()=>{const{syncSubscription:st}=await Promise.resolve().then(()=>aa);return{syncSubscription:st}},void 0),me=Ov(na.get("pending_billing_payment")),ue=me?.plan?me.plan.toLowerCase():null;let ze=0;const tt=6,kt=async()=>{try{const st=await fetch(`/api/billing/${ye}/upgrade-status`,{credentials:"include"});return st.ok?await st.json():null}catch(st){return he.warn("Upgrade status polling failed",st),null}};for(;ze<tt;){const st=await kt(),wt=String(st?.subscriptionPlan||"").toLowerCase();if(ue){if(wt===ue||wt.includes(ue))break}else if(Af(wt))break;ze+=1;const pe=Math.min(2**(ze-1)*1e3,12e3);await new Promise(Qe=>setTimeout(Qe,pe))}try{await oe(ye)}catch(st){he.warn("Sync subscription after checkout failed",st)}try{await h()}catch(st){he.warn("refreshUser after checkout failed",st)}const we=f("billing.subscriptionUpdated");P(we),L({open:!0,title:f("billing.payment.successTitle"),message:we,tone:"success"}),ie("nonzero"),na.remove("pending_billing_payment")}catch(ye){he.warn("Checkout success handler failed",ye),P(ia(ye,"Hata"))}finally{xe.searchParams.delete("plan"),xe.searchParams.delete("upgrade"),window.history.replaceState({},document.title,xe.pathname+xe.search)}})()},[i,h,f]),G.useEffect(()=>{let xe=!1;return(async()=>{try{if(!a?.id)return;const $e=await hs.getAll();if(!$e?.length)return;const ye=$e[0]?.id;if(!ye)return;const oe=await hs.getMembershipStats(ye);xe||De(typeof oe?.currentMembers=="number"?oe.currentMembers:null)}catch($e){he.warn("Organization membership stats fetch failed",$e),xe||De(null)}})(),()=>{xe=!0}},[a?.id]);const ut=async()=>{B(!0),P("");try{const xe=r(),Be=Tf(d),ye=Math.max(0,(typeof _=="number"?_:Be)-Be);if(ye<=0){P(o==="tr"?"Azaltlabilecek ilave koltuk yok.":"No extra seats to remove.");return}const oe=ye-1;await Sp(xe,oe),P(o==="tr"?"Koltuk azaltld.":"Seat removed."),await h()}catch(xe){P(ia(xe,"Hata"))}finally{B(!1)}};G.useEffect(()=>{const xe=new URL(window.location.href);if(!(xe.searchParams.get("plan")==="cancel"||xe.searchParams.get("upgrade")==="cancel"))return;const $e=f("billing.payment.cancelledMessage");L({open:!0,title:f("billing.payment.cancelledTitle"),message:$e,tone:"error"}),xe.searchParams.delete("plan"),xe.searchParams.delete("upgrade"),window.history.replaceState({},document.title,xe.pathname+xe.search)},[f]),G.useEffect(()=>{const xe=new URL(window.location.href);if(!(xe.searchParams.get("addon")==="success"))return;(async()=>{try{const ye=i;if(!ye)return;const oe=na.get("pending_addon_new_total");if(oe){const ue=Number.parseInt(oe,10);Number.isFinite(ue)&&ue>=0&&await Sp(ye,ue)}else{const{syncSubscription:ue}=await Mr(async()=>{const{syncSubscription:ze}=await Promise.resolve().then(()=>aa);return{syncSubscription:ze}},void 0);await ue(ye)}await h();const me=f("billing.addonAdded");P(me),L({open:!0,title:f("billing.payment.successTitle"),message:me,tone:"success"})}catch(ye){he.warn("Addon success handler failed",ye)}finally{na.remove("pending_addon_new_total"),xe.searchParams.delete("addon"),window.history.replaceState({},document.title,xe.pathname+xe.search)}})()},[i,h,f]),G.useEffect(()=>{const xe=new URL(window.location.href);xe.searchParams.get("portal")==="return"&&(async()=>{try{const $e=i;if(!$e)return;const{syncSubscription:ye}=await Mr(async()=>{const{syncSubscription:me}=await Promise.resolve().then(()=>aa);return{syncSubscription:me}},void 0),oe=await ye($e);if(await h(),typeof oe?.cancelAtPeriodEnd=="boolean"){const me=(()=>{const ue=oe?.subscriptionExpiresAt;if(ue)try{return new Date(ue).toLocaleDateString()}catch(ze){return he.warn("Subscription expiry parse failed",ze),Le}return Le})();oe.cancelAtPeriodEnd?P(f("billing.portal.cancelAtPeriodEnd",{date:me})):P(f("billing.portal.activeApplied"))}else P(f("billing.portal.synced"))}catch($e){he.warn("Portal return sync failed",$e)}finally{na.remove("pending_portal_sync"),xe.searchParams.delete("portal"),window.history.replaceState({},document.title,xe.pathname+xe.search)}})()},[i,h,f,Le]),G.useEffect(()=>{const xe=async()=>{try{if(!na.get("pending_portal_sync"))return;const ye=i;if(!ye)return;const{syncSubscription:oe}=await Mr(async()=>{const{syncSubscription:me}=await Promise.resolve().then(()=>aa);return{syncSubscription:me}},void 0);await oe(ye),await h(),na.remove("pending_portal_sync")}catch($e){he.warn("Portal focus sync failed",$e)}};xe();const Be=()=>{xe()};return window.addEventListener("focus",Be),()=>window.removeEventListener("focus",Be)},[i,h]),G.useEffect(()=>{let xe=!0;return(async()=>{$(!0);try{const $e=i;if(!$e)return;const{listHistory:ye}=await Mr(async()=>{const{listHistory:ze}=await Promise.resolve().then(()=>aa);return{listHistory:ze}},void 0),oe=await ye($e),me=AT(oe?.events),ue=[{type:"plan.current",plan:a?.subscriptionPlan??null,at:a?.updatedAt??null,users:_??null}];xe&&X(me.length>0?me:ue)}catch($e){he.warn("Billing history fetch failed",$e),xe&&X([])}finally{xe&&$(!1)}})(),()=>{xe=!1}},[i,a?.subscriptionPlan,a?.updatedAt,_]),G.useEffect(()=>{let xe=!1;return(async()=>{try{U(!0);const $e=i;if(!$e)return;const ye=await Mr(()=>Promise.resolve().then(()=>aa),void 0).then(oe=>oe.listInvoices($e));xe||z(Tp(ye?.invoices))}catch($e){he.warn("Invoice fetch failed",$e),xe||z([])}finally{xe||U(!1)}})(),()=>{xe=!0}},[i,a?.subscriptionPlan]);const Ce=async()=>{B(!0),P("");try{const xe=r(),Be=v,$e=Af(d),ye=Be!=="free",oe=N==="yearly"?"year":"month",me=0;if(!ye){$e?(await Cp(xe),Ue(!0),P(o==="tr"?"ptal talebi alnd (dnem sonunda geerli).":"Cancellation requested for period end."),await h()):P(o==="tr"?"Plan zaten cretsiz.":"Already on free plan.");return}const ue=Ap(d)??d,ze=Ap(Be);if(!ze){P(o==="tr"?"Geersiz hedef plan.":"Invalid target plan.");return}const tt=ue===ze,kt=(b||"month")===oe,we=async(wt,pe)=>{if(!wt?.success){P(f("billing.checkout.failed"));return}if(wt.invoiceError){const Qe={tr:"Plan gncellendi ancak fatura oluturulamad: ",en:"Plan updated but invoice failed: ",fr:"Le plan a t mis  jour mais la facture a chou : ",de:"Plan aktualisiert, aber Rechnung fehlgeschlagen: "};P((Qe[o]||Qe.tr)+wt.invoiceError),await h();return}if(wt.invoiceSkipped){const Qe={tr:"Plan gncellendi (ek cret yok).",en:"Plan updated (no additional charge).",fr:"Plan mis  jour (aucun frais supplmentaire).",de:"Plan aktualisiert (keine Zusatzkosten)."};P(Qe[o]||Qe.tr),await h();return}if(wt.hostedInvoiceUrl){na.set("pending_billing_payment",JSON.stringify({type:pe,plan:ze,interval:oe,seats:me,ts:Date.now()})),P(f("billing.redirecting")),window.location.href=wt.hostedInvoiceUrl;return}P(f("billing.subscriptionUpdated")),await h()};if(tt&&!kt){const wt=`planupd:${xe}:${ze}:${oe}:${me}:${new Date().toISOString().slice(0,10)}`,pe=await jp(xe,{plan:ze,interval:oe,seats:me,chargeNow:!0,interactive:!0,idempotencyKey:wt});await we(pe,"plan-interval");return}if($e){const wt=`planchg:${xe}:${ze}:${oe}:${new Date().toISOString().slice(0,10)}`,pe=await jp(xe,{plan:ze,interval:oe,seats:me,chargeNow:!0,interactive:!0,idempotencyKey:wt});await we(pe,"plan-change");return}const st=await ag({tenantId:xe,plan:ze,interval:oe,seats:me,successUrl:`${window.location.origin}/settings?plan=success`,cancelUrl:`${window.location.origin}/settings?plan=cancel`});st?.url?(na.set("pending_billing_payment",JSON.stringify({type:"initial-checkout",plan:ze,interval:oe,ts:Date.now()})),window.location.href=st.url):P(f("billing.checkout.failed"))}catch(xe){P(ia(xe,"Hata"))}finally{B(!1)}},it=async()=>{if(window.confirm(f("billing.cancelAtPeriodEnd.confirm"))){B(!0),P("");try{const xe=r();(await Cp(xe))?.success&&(Ue(!0),P(f("billing.cancel.requestedShort")),setTimeout(()=>P(""),3e3),await h())}catch(xe){P(ia(xe,"ptal hata"))}finally{B(!1)}}},xt=async()=>{if(window.confirm(f("billing.resumeCancellation.confirm"))){B(!0),P("");try{const xe=r(),{resumeSubscription:Be}=await Mr(async()=>{const{resumeSubscription:ye}=await Promise.resolve().then(()=>aa);return{resumeSubscription:ye}},void 0);(await Be(xe))?.success&&(Ue(!1),P(f("billing.resumeCancellation.done")),setTimeout(()=>P(""),3e3),await h())}catch(xe){P(ia(xe,"Yeniden balatma hatas"))}finally{B(!1)}}},jt=["professional","pro","enterprise","business"].includes(d),Ee=()=>{try{const xe=String(v||"").toLowerCase(),Be=N==="yearly"?"year":"month",$e=d==="pro"?"professional":d==="business"?"enterprise":d,ye=$e===xe,oe=(b||"month")===Be,me=fe=>f(fe==="free"?"common:planTab.plans.labels.free":fe==="professional"?"common:planTab.plans.labels.professional":"common:planTab.plans.labels.enterprise"),ue=fe=>f(fe==="year"?"common:planTab.yearly":"common:planTab.monthly"),ze=o==="tr"?"lemi Onaylayn":o==="fr"?"Confirmez lopration":o==="de"?"Vorgang besttigen":"Confirm Operation";let tt="";const kt=dy(d),we=dy(xe),st=kt>0,wt=we>0,pe=st&&wt&&we>kt,Qe={tr:"Bu ykseltme mevcut dnem iin fiyat farkn hemen tahsil eder.",en:"This upgrade will immediately charge the difference for the current period.",fr:"Cette mise  niveau dbitera immdiatement la diffrence pour la priode en cours.",de:"Dieses Upgrade belastet die Preisdifferenz fr die laufende Periode sofort."};if(!wt)st?tt=o==="tr"?"cretli aboneliiniz dnem sonunda iptal edilecek. Onaylyor musunuz?":o==="fr"?"Votre abonnement payant sera annul  la fin de la priode. Confirmez-vous ?":o==="de"?"Ihr kostenpflichtiges Abo wird zum Periodenende gekndigt. Besttigen Sie?":"Your paid subscription will be cancelled at period end. Do you confirm?":tt=o==="tr"?"Plan zaten cretsiz. Devam edilsin mi?":"Already on free plan. Continue?";else if(ye&&oe)tt=o==="tr"?"Plan ve dnem ayn grnyor. Yine de devam edilsin mi?":o==="fr"?"Le plan et la priode semblent identiques. Continuer quand mme ?":o==="de"?"Plan und Zeitraum scheinen identisch. Trotzdem fortfahren?":"Plan and interval look the same. Proceed anyway?";else if(ye&&!oe)tt=o==="tr"?`Faturalama dnemi ${ue(b||"month")}  ${ue(Be)} olarak deitirilecek. Onaylyor musunuz?`:o==="fr"?`La priode de facturation passera de ${ue(b||"month")}  ${ue(Be)}. Confirmez-vous ?`:o==="de"?`Der Abrechnungszeitraum wird von ${ue(b||"month")} auf ${ue(Be)} gendert. Besttigen?`:`Billing interval will change from ${ue(b||"month")} to ${ue(Be)}. Do you confirm?`;else if(tt=o==="tr"?`Plan ${me($e)}  ${me(xe)}, dnem ${ue(Be)} olacak. Onaylyor musunuz?`:o==="fr"?`Loffre passera de ${me($e)}  ${me(xe)}, priode ${ue(Be)}. Confirmez-vous ?`:o==="de"?`Der Plan wechselt von ${me($e)} zu ${me(xe)}, Zeitraum ${ue(Be)}. Besttigen?`:`Plan will change from ${me($e)} to ${me(xe)}, interval ${ue(Be)}. Do you confirm?`,pe){const fe=Qe[o]||Qe.tr;tt=`${tt} ${fe}`}k({open:!0,title:ze,message:tt})}catch(xe){he.warn("Plan confirmation fallback triggered",xe),k({open:!0,title:"Confirm",message:"Proceed with the change?"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:f("common:planTab.header.title")}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:f("common:planTab.header.subtitle")})]}),e.jsx("div",{children:e.jsx("button",{onClick:async()=>{try{B(!0);const xe=r(),Be=new URL(window.location.href);Be.searchParams.set("portal","return");const{url:$e}=await Rv(xe,Be.toString());$e&&(na.set("pending_portal_sync","1"),window.location.href=$e)}catch(xe){P(ia(xe,"Portal hatas"))}finally{B(!1)}},className:"px-3 py-2 text-sm rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50",children:f("common:planTab.managePayments")})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:f("common:planTab.currentPlan.label")}),e.jsxs("div",{className:"mt-1 text-lg font-semibold text-gray-900",children:[c," ",!l&&p?` ${p}`:""]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[({tr:"Kullanmda kullanc",en:"Users in use",fr:"Utilisateurs en cours",de:"Benutzte Nutzer"}[o]||f("common:planTab.currentPlan.seatsInUse"))+" ",e.jsx("span",{className:"text-gray-900 font-medium",children:typeof ve=="number"?ve:""}),O>0&&e.jsx("span",{className:"text-gray-500",children:` / ${O}`})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[at,": ",e.jsx("span",{className:"text-gray-900",children:Le})]}),Ie&&!l&&e.jsx("div",{className:"mt-3 text-xs text-amber-700 bg-amber-50 border border-amber-200 px-3 py-2 rounded",children:f("common:planTab.currentPlan.cancelAtPeriodEndNotice")})]}),e.jsxs("div",{className:"md:col-span-2 bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-3",children:f("common:planTab.changePlan")}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[{key:"professional",label:f("common:planTab.plans.labels.professional"),price:f("common:planTab.prices.monthly.pro"),bullets:[f("common:planTab.plans.bullets.proIncluded"),f("common:planTab.plans.bullets.basicAutomations")]},{key:"enterprise",label:f("common:planTab.plans.labels.enterprise"),price:f("common:planTab.prices.monthly.enterprise"),bullets:[f("common:planTab.plans.bullets.businessIncluded"),f("common:planTab.plans.bullets.advancedAutomations")]},{key:"free",label:f("common:planTab.plans.labels.free"),price:f("common:planTab.prices.monthly.free"),bullets:[f("common:planTab.plans.bullets.freeLimited")]}].map(xe=>e.jsxs("button",{type:"button",onClick:()=>y(xe.key),className:`text-left rounded-lg border p-3 hover:border-indigo-400 transition ${String(v)===xe.key?"border-indigo-500 ring-1 ring-indigo-200 bg-indigo-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:xe.label}),e.jsx("div",{className:"text-sm text-indigo-600 font-medium",children:xe.price})]}),e.jsx("ul",{className:"mt-2 text-xs text-gray-600 space-y-1 list-disc list-inside",children:xe.bullets.map((Be,$e)=>e.jsx("li",{children:Be},$e))})]},xe.key))}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:f("common:planTab.billingCycle")}),e.jsxs("div",{className:"inline-flex rounded-md border border-gray-300 overflow-hidden",children:[e.jsx("button",{type:"button",onClick:()=>T("monthly"),className:`px-3 py-1.5 text-sm ${N==="monthly"?"bg-indigo-600 text-white":"bg-white text-gray-700"}`,children:f("common:planTab.monthly")}),e.jsxs("button",{type:"button",onClick:()=>T("yearly"),className:`px-3 py-1.5 text-sm ${N==="yearly"?"bg-indigo-600 text-white":"bg-white text-gray-700"}`,children:[f("common:planTab.yearly")," ",e.jsx("span",{className:"ml-1 text-[10px] opacity-80",children:f("common:planTab.yearlyNote")})]})]})]}),e.jsx("div",{children:e.jsx("button",{onClick:Ee,disabled:W,className:"px-4 py-2 text-sm font-medium rounded-md bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",children:f("common:planTab.updatePlan")})})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-3",children:o==="tr"?"Ek Kullanc":o==="fr"?"Utilisateur supplmentaire":o==="de"?"Zustzlicher Benutzer":"Additional User"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md p-4 flex flex-col gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:o==="tr"?"Ek Kullanc":o==="fr"?"Utilisateur supplmentaire":o==="de"?"Zustzlicher Benutzer":"Additional User"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:o==="tr"?"Ek kullanc adedi":o==="fr"?"Nombre dutilisateurs":o==="de"?"Anzahl zustzlicher Benutzer":"Additional user count"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>q(xe=>Math.max(1,(xe||1)-1)),className:"w-8 h-8 rounded-md border text-lg leading-none",children:""}),e.jsx("div",{className:"w-16 text-center font-semibold",children:V}),e.jsx("button",{onClick:()=>q(xe=>(xe||1)+1),className:"w-8 h-8 rounded-md border text-lg leading-none",children:"+"}),e.jsx("div",{className:"ml-3 text-xs text-gray-500",children:o==="tr"?"Kullanc bana 5/ay. Faturalandrma plan dnemine gre yaplr.":o==="fr"?"5/mo par utilisateur. Facturation selon la priode du plan.":o==="de"?"5/Monat pro Benutzer. Abrechnung nach Planzeitraum.":"5/month per user. Billed per plan period."})]})]}),jt&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>S({open:!0,mode:"now",count:V}),disabled:W||(V||0)<1,className:"w-full md:w-56 px-3 py-2 text-sm rounded-md bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",children:o==="tr"?"Hemen Tahsil Et":o==="fr"?"Encaisser maintenant":o==="de"?"Sofort belasten":"Charge now"}),e.jsx("button",{onClick:()=>S({open:!0,mode:"later",count:V}),disabled:W||(V||0)<1,className:"w-full md:w-56 px-3 py-2 text-sm rounded-md bg-indigo-100 text-indigo-800 hover:bg-indigo-200 disabled:opacity-50",children:o==="tr"?"Dnem Sonunda Faturalandr":o==="fr"?"Facturer en fin de priode":o==="de"?"Am Periodenende abrechnen":"Invoice at period end"})]})]}),e.jsxs("div",{className:`bg-white border border-gray-200 rounded-md p-4 flex flex-col gap-2 ${jt?"":"opacity-60"}`,children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:o==="tr"?"Kullanc Azaltma":o==="fr"?"Rduction des utilisateurs":o==="de"?"Benutzerreduzierung":"User reduction"}),e.jsx("div",{className:"text-xs text-gray-500 max-w-md",children:o==="tr"?"Plana dahil kullanclar azaltlamaz; yalnzca ekstra alnan kullanclar azaltlabilir.":o==="fr"?"Les utilisateurs inclus dans le plan ne peuvent pas tre rduits; seuls les utilisateurs supplmentaires peuvent tre rduits.":o==="de"?"Im Plan enthaltene Benutzer knnen nicht reduziert werden; nur zustzlich erworbene Benutzer knnen reduziert werden.":"Users included in the plan cannot be reduced; only additional purchased users can be reduced."}),!jt&&e.jsx("div",{className:"text-[11px] text-gray-500",children:o==="tr"?"cretsiz planda kullanc azaltma desteklenmiyor.":o==="fr"?"La rduction des utilisateurs nest pas disponible pour cette offre.":o==="de"?"Benutzerreduzierung ist in diesem Tarif nicht verfgbar.":"Seat reductions are not available on this plan."}),e.jsx("div",{className:"flex items-start md:justify-start",children:e.jsx("button",{onClick:ut,disabled:W||!jt||F<=0,className:"w-full md:w-56 px-3 py-2 text-sm rounded-md bg-rose-100 text-rose-800 hover:bg-rose-200 disabled:opacity-50",children:o==="tr"?"1 kullanc azalt":o==="fr"?"Rduire de 1 utilisateur":o==="de"?"1 Benutzer reduzieren":"Reduce 1 user"})}),jt&&F<=0&&e.jsx("div",{className:"text-[11px] text-rose-600",children:o==="tr"?"Plannzda ekstra kullanc bulunmuyor.":o==="fr"?"Aucun utilisateur supplmentaire n'est actif.":o==="de"?"Keine zustzlichen Benutzer aktiv.":"No additional seats are active."})]})]})]}),E&&e.jsx("div",{className:"mt-3 text-xs text-indigo-700 bg-indigo-50 border border-indigo-200 px-3 py-2 rounded",children:E}),e.jsx("div",{className:"mt-2 text-[11px] text-gray-500",children:f("common:planTab.amountsNote")}),!l&&e.jsxs("div",{className:"border border-red-300 rounded-lg p-4 bg-red-50 space-y-3",children:[e.jsx("h4",{className:"text-md font-semibold mb-2",children:f("common:planTab.subscriptionStatus")}),e.jsx("p",{className:"text-xs text-red-700",children:f("common:planTab.subscriptionCancelNote")}),Ie?e.jsx("button",{onClick:xt,disabled:W,className:"px-4 py-2 text-sm rounded-md bg-green-600 text-white hover:bg-green-700 disabled:opacity-50",children:f("common:planTab.resumeSubscriptionBtn")}):e.jsx("button",{onClick:it,disabled:W,className:"px-4 py-2 text-sm rounded-md bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",children:f("common:planTab.cancelAtPeriodEndBtn")})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:f("common:planTab.history.title")}),ae&&e.jsx("p",{className:"text-xs text-gray-500",children:f("common:planTab.history.loading")}),!ae&&Y.length===0&&e.jsx("p",{className:"text-xs text-gray-500",children:f("common:planTab.history.empty")}),!ae&&Y.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"py-1 pr-4",children:f("common:planTab.history.type")}),e.jsx("th",{className:"py-1 pr-4",children:f("common:planTab.history.plan")}),e.jsx("th",{className:"py-1 pr-4",children:f("common:planTab.history.users")}),e.jsx("th",{className:"py-1 pr-4",children:f("common:planTab.history.date")})]})}),e.jsx("tbody",{children:Y.map((xe,Be)=>{const $e=xe.at?new Date(xe.at).toLocaleDateString():"",ye=(()=>{const oe={tr:{"plan.current":"Mevcut Plan","plan.renewal_due":"Yenileme Tarihi","cancel.at_period_end":"Dnem Sonunda ptal","invoice.paid":"deme Alnd","invoice.open":"Ak Fatura","invoice.uncollectible":"Tahsil Edilemeyen","invoice.payment_failed":"deme Baarsz"},en:{"plan.current":"Current Plan","plan.renewal_due":"Renewal Due","cancel.at_period_end":"Cancel at Period End","invoice.paid":"Payment Received","invoice.open":"Open Invoice","invoice.uncollectible":"Uncollectible","invoice.payment_failed":"Payment Failed"},fr:{"plan.current":"Offre actuelle","plan.renewal_due":"Renouvellement","cancel.at_period_end":"Annulation fin de priode","invoice.paid":"Paiement reu","invoice.open":"Facture ouverte","invoice.uncollectible":"Irrcouvrable","invoice.payment_failed":"Paiement chou"},de:{"plan.current":"Aktueller Plan","plan.renewal_due":"Verlngerung","cancel.at_period_end":"Kndigung zum Periodenende","invoice.paid":"Zahlung erhalten","invoice.open":"Offene Rechnung","invoice.uncollectible":"Uneinbringlich","invoice.payment_failed":"Zahlung fehlgeschlagen"}};return oe[o]&&oe[o][xe.type]||xe.type})();return e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"py-1 pr-4",children:ye}),e.jsx("td",{className:"py-1 pr-4",children:xe.plan||""}),e.jsx("td",{className:"py-1 pr-4",children:xe.users||""}),e.jsx("td",{className:"py-1 pr-4",children:$e})]},Be)})})]})}),e.jsx("p",{className:"mt-2 text-[10px] text-gray-400",children:f("common:planTab.history.footerNote")})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:f("common:planTab.invoices.title")}),M&&e.jsx("p",{className:"text-xs text-gray-500",children:f("common:planTab.invoices.loading")}),!M&&Q.length===0&&e.jsx("p",{className:"text-xs text-gray-500",children:f("common:planTab.invoices.empty")}),!M&&Q.length>0&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-medium text-gray-600",children:f("common:planTab.invoices.filters.status")}),e.jsxs("select",{value:te,onChange:xe=>ie(xe.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-xs",children:[e.jsx("option",{value:"all",children:f("common:planTab.invoices.filters.all")}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"open",children:"Open/Draft"}),e.jsx("option",{value:"unpaid",children:"Unpaid/Void/Uncollectible"}),e.jsx("option",{value:"nonzero",children:o==="tr"?"cretli (0)":"Non-zero"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-medium text-gray-600",children:f("common:planTab.invoices.filters.search")}),e.jsx("input",{type:"text",value:se,onChange:xe=>le(xe.target.value),placeholder:f("common:planTab.invoices.filters.searchPlaceholder"),className:"px-2 py-1 border border-gray-300 rounded-md text-xs"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-medium text-gray-600",children:f("common:planTab.invoices.filters.from")}),e.jsx("input",{type:"date",value:Ne,onChange:xe=>ke(xe.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-xs"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-medium text-gray-600",children:f("common:planTab.invoices.filters.to")}),e.jsx("input",{type:"date",value:Z,onChange:xe=>ce(xe.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-xs"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[10px] font-medium text-gray-600",children:""}),e.jsx("button",{onClick:()=>{const xe=Ae().map(ue=>({id:ue.id,number:ue.number,status:ue.status,currency:ue.currency,total:typeof ue.total=="number"?(ue.total/100).toFixed(2):"",created:ue.created,hostedInvoiceUrl:ue.hostedInvoiceUrl,pdf:ue.pdf})),Be=["id","number","status","currency","total","created","hostedInvoiceUrl","pdf"],$e=[Be.join(","),...xe.map(ue=>Be.map(ze=>String(ue[ze]??"")).join(","))].join(`
`),ye=new Blob([$e],{type:"text/csv;charset=utf-8;"}),oe=URL.createObjectURL(ye),me=document.createElement("a");me.href=oe,me.download=`invoices_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(me),me.click(),document.body.removeChild(me),URL.revokeObjectURL(oe)},disabled:Q.length===0,className:"px-3 py-1 text-xs rounded-md bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",children:f("common:planTab.invoices.filters.exportCsv")})]})]}),e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"py-1 pr-4",children:f("common:planTab.invoices.table.number")}),e.jsx("th",{className:"py-1 pr-4",children:f("common:planTab.invoices.table.date")}),e.jsx("th",{className:"py-1 pr-4",children:f("common:planTab.invoices.table.amount")}),e.jsx("th",{className:"py-1 pr-4",children:f("common:planTab.invoices.table.status")}),e.jsx("th",{className:"py-1 pr-4",children:f("common:planTab.invoices.table.actions")})]})}),e.jsx("tbody",{children:Ae().map(Be=>{const $e=Be.created?new Date(Be.created).toLocaleDateString():"",ye=typeof Be.total=="number"?(Be.total/100).toFixed(2)+" "+String(Be.currency||"").toUpperCase():"";return e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsx("td",{className:"py-1 pr-4",children:Be.number||Be.id}),e.jsx("td",{className:"py-1 pr-4",children:$e}),e.jsx("td",{className:"py-1 pr-4",children:Be.zeroTotal?e.jsxs("span",{className:"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 border border-gray-200",children:[ye," ",Be.reasonHint==="PLAN_CHANGE_NO_CHARGE"?o==="tr"?"Plan deiimi - ek cret yok":"Plan change - no extra charge":o==="tr"?"cretsiz ilem":"No charge"]}):ye}),e.jsx("td",{className:"py-1 pr-4",children:e.jsx("span",{className:(()=>{const oe=String(Be.status||"").toLowerCase();return oe==="paid"?"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full bg-green-50 text-green-700 border border-green-200":oe==="open"||oe==="draft"?"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full bg-amber-50 text-amber-700 border border-amber-200":oe==="uncollectible"||oe==="void"||oe==="unpaid"?"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full bg-red-50 text-red-700 border border-red-200":"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full bg-gray-50 text-gray-700 border border-gray-200"})(),children:String(Be.status||"").toUpperCase()})}),e.jsxs("td",{className:"py-1 pr-4 space-x-2",children:[Be.hostedInvoiceUrl&&e.jsx("a",{className:"text-indigo-600 hover:underline",href:Be.hostedInvoiceUrl,target:"_blank",rel:"noreferrer",children:f("common:view")}),Be.pdf&&e.jsx("a",{className:"text-indigo-600 hover:underline",href:Be.pdf,target:"_blank",rel:"noreferrer",children:"PDF"})]})]},Be.id)})})]})]}),e.jsx("p",{className:"mt-2 text-[10px] text-gray-400",children:f("common:planTab.invoices.footerNote")})]})]}),e.jsx(Fi,{isOpen:A.open,onClose:()=>k(xe=>({...xe,open:!1})),title:A.title||(o==="tr"?"Onay":"Confirm"),message:A.message||"",confirmLabel:o==="tr"?"Onayla":o==="fr"?"Confirmer":o==="de"?"Besttigen":"Confirm",cancelLabel:o==="tr"?"Vazge":o==="fr"?"Annuler":o==="de"?"Abbrechen":"Cancel",onConfirm:()=>{k(xe=>({...xe,open:!1})),Ce()},onCancel:()=>k(xe=>({...xe,open:!1})),tone:"info"}),e.jsx(Fi,{isOpen:j.open,onClose:()=>S(xe=>({...xe,open:!1})),title:j.mode==="now"?o==="tr"?"Hemen Tahsil Onay":o==="fr"?"Confirmation d'encaissement":o==="de"?"Sofortige Abbuchung Besttigen":"Immediate Charge Confirmation":o==="tr"?"Faturalandrma Onay":o==="fr"?"Confirmation de facturation":o==="de"?"Rechnungsstellung Besttigen":"Invoice Confirmation",message:(()=>{const xe=j.count,$e=(xe*5).toFixed(2);return j.mode==="now"?o==="tr"?`${xe} ilave kullanc iin hemen ${$e}  tahsil edilecek. Onaylyor musunuz?`:o==="fr"?`Encaisser maintenant ${$e}  pour ${xe} utilisateur(s) supplmentaire(s). Confirmez-vous ?`:o==="de"?`${xe} zustzliche(r) Benutzer wird/werden jetzt mit ${$e}  belastet. Besttigen?`:`Charge ${$e}  now for ${xe} additional user(s). Do you confirm?`:o==="tr"?`${xe} ilave kullanc eklenecek ve dnem sonunda faturalandrlacak. Onaylyor musunuz?`:o==="fr"?`${xe} utilisateur(s) supplmentaire(s) sera/seront ajout(s) et factur(s)  la fin de la priode. Confirmez-vous ?`:o==="de"?`${xe} zustzliche(r) Benutzer wird/werden hinzugefgt und am Periodenende abgerechnet. Besttigen?`:`${xe} additional user(s) will be added and invoiced at period end. Do you confirm?`})(),confirmLabel:o==="tr"?"Onayla":o==="fr"?"Confirmer":o==="de"?"Besttigen":"Confirm",cancelLabel:o==="tr"?"Vazge":o==="fr"?"Annuler":o==="de"?"Abbrechen":"Cancel",onConfirm:()=>{const{mode:xe,count:Be}=j;S($e=>({...$e,open:!1})),D(xe,Be)},onCancel:()=>S(xe=>({...xe,open:!1})),tone:"info"}),e.jsx(Fi,{isOpen:R.open,onClose:()=>L(xe=>({...xe,open:!1})),title:R.title,message:R.message,confirmLabel:o==="tr"?"Tamam":"OK",tone:R.tone})]})},ET=["TRY","USD","EUR","GBP"],cl=a=>{if(typeof a!="string")return null;const o=a.trim().toUpperCase();return ET.includes(o)?o:null},DT=["tr","en","fr","de"],_T=a=>DT.includes(a),gc=({title:a,subtitle:o,defaultOpen:t=!0,children:f})=>{const[h,d]=G.useState(t);return e.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white shadow-sm",children:[e.jsxs("button",{type:"button",onClick:()=>d(n=>!n),className:"w-full flex items-center justify-between px-4 py-3 text-left",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:a}),o&&e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:o})]}),h?e.jsx(bs,{className:"w-5 h-5 text-gray-500"}):e.jsx(fv,{className:"w-5 h-5 text-gray-500"})]}),h&&e.jsx("div",{className:"px-4 pb-4",children:f})]})},PT={tr:{header:{title:"Ayarlar",subtitle:"Sistem ve hesap ayarlarnz ynetin",unsavedChanges:"Kaydedilmemi deiiklikler var",save:"Kaydet"},modals:{saveSuccess:{title:"Kaydedildi",message:"Deiiklikleriniz baaryla kaydedildi.",confirm:"Tamam"},saveError:{title:"Hata",message:"Ayarlar kaydedilirken bir hata olutu.",confirm:"Kapat"},fileTypeError:{title:"Dosya tipi hatal",message:"Ltfen sadece resim dosyas sein.",confirm:"Tamam"},fileSizeError:{title:"Dosya boyutu ok byk",message:"Dosya boyutu 5MB'dan kk olmaldr.",confirm:"Tamam"},authRequired:{title:"Oturum gerekli",message:"Ltfen nce giri yapn.",confirm:"Tamam"},sessionExpired:{title:"Oturum sresi doldu",message:"Ltfen tekrar giri yapn.",confirm:"Tamam"},deleteRequested:{title:"Talep alnd",message:"Hesap silme talebiniz baaryla iletildi.",confirm:"Tamam"},deleteFailed:{title:"lem baarsz",message:"Hesap silme istei gnderilemedi. Ltfen tekrar deneyin.",confirm:"Kapat"}},tabs:{profile:"Profil",company:"irket",plan:"Hesap Plan",notifications:"Bildirimler",organization:"Organizasyon",fiscalPeriods:"Mali Dnemler",system:"Sistem",security:"Gvenlik",privacy:"Gizlilik"},profile:{title:"Profil Bilgileri",fields:{name:"Ad Soyad",email:"E-posta",phone:"Telefon"},passwordTitle:"ifre Deitir",passwordFields:{current:"Mevcut ifre",new:"Yeni ifre",confirm:"ifre Tekrar"}},company:{title:"irket Bilgileri",logo:{label:"irket Logosu",upload:"Logo Ykle",remove:"Kaldr",helper:"PNG, JPG veya GIF formatnda, maksimum 5MB boyutunda dosya ykleyebilirsiniz.",uploaded:({name:a,sizeKB:o})=>`Logo ${a} (${o} KB)`},fields:{name:"irket Ad",address:"Adres",taxNumber:"Vergi Numaras",taxOffice:"Vergi Dairesi",phone:"Telefon",email:"E-posta",website:"Website"},legalFields:{title:"Yasal Gereklilik Alanlar",subtitle:"Uluslararas faturalama standartlar iin gerekli bilgiler",countryHelp:"irket bilgilerini girebilmek iin ltfen irket lkesini sein.",countrySelectLabel:"lke",countryOptions:{TR:"Trkiye",US:"Amerika",DE:"Almanya",FR:"Fransa",OTHER:"Dier"},turkey:{title:"Trkiye",mersisNumber:"Mersis Numaras",kepAddress:"KEP Adresi"},france:{title:"Fransa",siretNumber:"SIRET Numaras",sirenNumber:"SIREN Numaras",apeCode:"APE/NAF Kodu",tvaNumber:"TVA Numaras",rcsNumber:"RCS Numaras"},germany:{title:"Almanya",steuernummer:"Steuernummer",umsatzsteuerID:"Umsatzsteuer-ID",handelsregisternummer:"Handelsregisternummer",geschaeftsfuehrer:"Geschftsfhrer"},usa:{title:"Amerika",einNumber:"EIN Numaras",taxId:"Tax ID",businessLicenseNumber:"Business License No",stateOfIncorporation:"Kurulu Eyaleti"},other:{title:"Dier lkeler",registrationNumber:"Kayt No",vatNumber:"KDV/VAT No",taxId:"Vergi Kimlii",stateOrRegion:"Eyalet/Blge"}},iban:{sectionTitle:"Faturalarda Kullanlacak IBAN",bankOption:"Kaydedilmi bankalardan se",noBanks:"(Kaydedilmi banka yok)",bankSelectPlaceholder:"Banka sein",manualOption:"Elle IBAN gir",ibanPlaceholder:"TR00 0000 0000 0000 0000 0000 00",bankNamePlaceholder:"Banka ad (r. Ziraat Bankas)",preview:a=>`nizleme: ${a}`,previewExample:"rn: TRxx xxxx xxxx xxxx xxxx xxxx xx"}},notifications:{title:"Bildirim Tercihleri",labels:{invoiceReminders:"Fatura Hatrlatmalar",expenseAlerts:"Gider Uyarlar",salesNotifications:"Sat Bildirimleri",lowStockAlerts:"Dk Stok Uyarlar",quoteReminders:"Teklif Hatrlatmalar"}},system:{title:"Sistem Ayarlar",currencyLabel:"Para Birimi",dateFormatLabel:"Tarih Format",timezoneLabel:"Saat Dilimi",currencies:{TRY:" Trk Liras",USD:"$ ABD Dolar",EUR:" Euro",GBP:" ngiliz Sterlini"},timezones:{"Europe/Istanbul":"stanbul",UTC:"UTC","America/New_York":"New York"},backup:{title:"Yedekleme",toggleLabel:"Otomatik Yedekleme",toggleDescription:"Verilerinizi otomatik olarak yedekleyin",frequencyLabel:"Yedekleme Skl",options:{daily:"Gnlk",weekly:"Haftalk",monthly:"Aylk"}}},security:{tipsTitle:"Gvenlik nerileri",tips:[" Gl bir ifre kullann (en az 8 karakter, byk/kk harf, say)"," ifrenizi dzenli olarak deitirin"," ki faktrl kimlik dorulamay etkinletirin"," pheli aktiviteleri takip edin"],title:"Gvenlik Ayarlar",cards:{twoFactor:{title:"ki Faktrl Kimlik Dorulama",description:"Hesabnz iin ek gvenlik katman",action:"Etkinletir"},sessionHistory:{title:"Oturum Gemii",description:"Son giri aktivitelerinizi grntleyin",action:"Grntle"},activeSessions:{title:"Aktif Oturumlar",description:"Dier cihazlardaki oturumlar ynetin",action:"Tmn Sonlandr"}}},privacy:{title:"GDPR ve Veri Haklar",gdpr:{title:"Kiisel Veri Ynetimi",description:"GDPR uyumluluk kapsamnda kiisel verilerinizi ynetin",export:{title:"Verilerimi ndir",description:"Tm kiisel verilerinizi ZIP formatnda indirin",button:"Verilerimi ndir",disclaimer:"ndirilen dosya JSON ve CSV formatlarnda verilerinizi ierir."},delete:{title:"Hesabm Sil",description:"Hesabnz ve tm kiisel verilerinizi kalc olarak silin",button:"Hesap Silme Talebi",warning:"Bu ilem geri alnamaz ve tm verileriniz silinir.",confirmDialog:{title:"Hesap Silme Onay",message:"Hesabnz silmek istediinizden emin misiniz?",retention:"Not: Muhasebe kaytlar yasal gereklilikler nedeniyle 10 yl sreyle saklanacaktr.",confirm:"Evet, Hesabm Sil",cancel:"ptal"}}}}},en:{header:{title:"Settings",subtitle:"Manage your system and account settings",unsavedChanges:"There are unsaved changes",save:"Save"},modals:{saveSuccess:{title:"Saved",message:"Your changes have been saved successfully.",confirm:"OK"},saveError:{title:"Error",message:"An error occurred while saving your settings.",confirm:"Close"},fileTypeError:{title:"Invalid file type",message:"Please select an image file only.",confirm:"OK"},fileSizeError:{title:"File too large",message:"The file size must be less than 5MB.",confirm:"OK"},authRequired:{title:"Authentication required",message:"Please sign in first.",confirm:"OK"},sessionExpired:{title:"Session expired",message:"Please sign in again.",confirm:"OK"},deleteRequested:{title:"Request received",message:"Your account deletion request has been submitted.",confirm:"OK"},deleteFailed:{title:"Request failed",message:"Could not submit account deletion. Please try again.",confirm:"Close"}},tabs:{profile:"Profile",company:"Company",plan:"Plan",notifications:"Notifications",organization:"Organization",fiscalPeriods:"Fiscal Periods",system:"System",security:"Security",privacy:"Privacy"},profile:{title:"Profile Information",fields:{name:"Full Name",email:"Email Address",phone:"Phone"},passwordTitle:"Change Password",passwordFields:{current:"Current Password",new:"New Password",confirm:"Confirm Password"}},company:{title:"Company Information",logo:{label:"Company Logo",upload:"Upload Logo",remove:"Remove",helper:"You can upload PNG, JPG or GIF files up to 5MB.",uploaded:({name:a,sizeKB:o})=>`Logo ${a} (${o} KB)`},fields:{name:"Company Name",address:"Address",taxNumber:"Tax Number",taxOffice:"Tax Office",phone:"Phone",email:"Email",website:"Website"},legalFields:{title:"Legal Compliance Fields",subtitle:"Required information for international invoicing standards",countryHelp:"To enter company details, please select the company's country.",countrySelectLabel:"Country",countryOptions:{TR:"Turkey",US:"United States",DE:"Germany",FR:"France",OTHER:"Other"},turkey:{title:"Turkey",mersisNumber:"Mersis Number",kepAddress:"KEP Address"},france:{title:"France",siretNumber:"SIRET Number",sirenNumber:"SIREN Number",apeCode:"APE/NAF Code",tvaNumber:"TVA Number",rcsNumber:"RCS Number"},germany:{title:"Germany",steuernummer:"Steuernummer",umsatzsteuerID:"Umsatzsteuer-ID",handelsregisternummer:"Handelsregisternummer",geschaeftsfuehrer:"Geschftsfhrer"},usa:{title:"USA",einNumber:"EIN Number",taxId:"Tax ID",businessLicenseNumber:"Business License No",stateOfIncorporation:"State of Incorporation"},other:{title:"Other Countries",registrationNumber:"Registration No",vatNumber:"VAT Number",taxId:"Tax ID",stateOrRegion:"State/Region"}},iban:{sectionTitle:"IBAN to use on invoices",bankOption:"Select from saved bank accounts",noBanks:"(No saved bank account)",bankSelectPlaceholder:"Choose a bank",manualOption:"Enter IBAN manually",ibanPlaceholder:"TR00 0000 0000 0000 0000 0000 00",bankNamePlaceholder:"Bank name (e.g. Ziraat Bankas)",preview:a=>`Preview: ${a}`,previewExample:"Ex: TRxx xxxx xxxx xxxx xxxx xxxx xx"}},notifications:{title:"Notification Preferences",labels:{invoiceReminders:"Invoice Reminders",expenseAlerts:"Expense Alerts",salesNotifications:"Sales Notifications",lowStockAlerts:"Low Stock Alerts",quoteReminders:"Quote Reminders"}},system:{title:"System Settings",currencyLabel:"Currency",dateFormatLabel:"Date Format",timezoneLabel:"Time Zone",currencies:{TRY:" Turkish Lira",USD:"$ US Dollar",EUR:" Euro",GBP:" British Pound"},timezones:{"Europe/Istanbul":"Istanbul",UTC:"UTC","America/New_York":"New York"},backup:{title:"Backups",toggleLabel:"Automatic Backup",toggleDescription:"Back up your data automatically",frequencyLabel:"Backup Frequency",options:{daily:"Daily",weekly:"Weekly",monthly:"Monthly"}}},security:{tipsTitle:"Security Tips",tips:[" Use a strong password (at least 8 characters, upper/lowercase, numbers)"," Change your password regularly"," Enable two-factor authentication"," Monitor suspicious activity"],title:"Security Settings",cards:{twoFactor:{title:"Two-Factor Authentication",description:"Additional security layer for your account",action:"Enable"},sessionHistory:{title:"Session History",description:"Review recent login activity",action:"View"},activeSessions:{title:"Active Sessions",description:"Manage sessions on other devices",action:"Sign out all"}}},privacy:{title:"GDPR & Data Rights",gdpr:{title:"Personal Data Management",description:"Manage your personal data under GDPR compliance",export:{title:"Export My Data",description:"Download all your personal data in ZIP format",button:"Export My Data",disclaimer:"The downloaded file contains your data in JSON and CSV formats."},delete:{title:"Delete My Account",description:"Permanently delete your account and all personal data",button:"Request Account Deletion",warning:"This action cannot be undone and will delete all your data.",confirmDialog:{title:"Account Deletion Confirmation",message:"Are you sure you want to delete your account?",retention:"Note: Accounting records will be retained for 10 years due to legal requirements.",confirm:"Yes, Delete My Account",cancel:"Cancel"}}}}},fr:{header:{title:"Paramtres",subtitle:"Grez les paramtres du systme et du compte",unsavedChanges:"Des modifications non enregistres",save:"Enregistrer"},modals:{saveSuccess:{title:"Enregistr",message:"Vos modifications ont t enregistres avec succs.",confirm:"OK"},saveError:{title:"Erreur",message:"Une erreur s'est produite lors de l'enregistrement des paramtres.",confirm:"Fermer"},fileTypeError:{title:"Type de fichier invalide",message:"Veuillez slectionner uniquement une image.",confirm:"OK"},fileSizeError:{title:"Fichier trop volumineux",message:"La taille du fichier doit tre infrieure  5 Mo.",confirm:"OK"},authRequired:{title:"Authentification requise",message:"Veuillez vous connecter d'abord.",confirm:"OK"},sessionExpired:{title:"Session expire",message:"Veuillez vous reconnecter.",confirm:"OK"},deleteRequested:{title:"Demande reue",message:"Votre demande de suppression de compte a t envoye.",confirm:"OK"},deleteFailed:{title:"chec de la demande",message:"La suppression du compte n'a pas pu tre soumise. Veuillez ressayer.",confirm:"Fermer"}},tabs:{profile:"Profil",company:"Entreprise",plan:"Abonnement",notifications:"Notifications",organization:"Organisation",fiscalPeriods:"Priodes fiscales",system:"Systme",security:"Scurit",privacy:"Confidentialit"},profile:{title:"Informations du profil",fields:{name:"Nom complet",email:"Adresse e-mail",phone:"Tlphone"},passwordTitle:"Changer le mot de passe",passwordFields:{current:"Mot de passe actuel",new:"Nouveau mot de passe",confirm:"Confirmer le mot de passe"}},company:{title:"Informations sur lentreprise",logo:{label:"Logo de lentreprise",upload:"Tlcharger le logo",remove:"Supprimer",helper:"Vous pouvez tlverser des fichiers PNG, JPG ou GIF jusqu 5 Mo.",uploaded:({name:a,sizeKB:o})=>`Logo ${a} (${o} Ko)`},fields:{name:"Nom de lentreprise",address:"Adresse",taxNumber:"Numro fiscal",taxOffice:"Centre des impts",phone:"Tlphone",email:"E-mail",website:"Site Web"},legalFields:{title:"Champs de conformit lgale",subtitle:"Informations requises pour les normes de facturation internationales",countryHelp:"Pour saisir les informations de lentreprise, veuillez slectionner le pays de lentreprise.",countrySelectLabel:"Pays",countryOptions:{TR:"Turquie",US:"tats-Unis",DE:"Allemagne",FR:"France",OTHER:"Autre"},turkey:{title:"Turquie",mersisNumber:"Numro Mersis",kepAddress:"Adresse KEP"},france:{title:"France",siretNumber:"Numro SIRET",sirenNumber:"Numro SIREN",apeCode:"Code APE/NAF",tvaNumber:"Numro TVA",rcsNumber:"Numro RCS"},germany:{title:"Allemagne",steuernummer:"Steuernummer",umsatzsteuerID:"Umsatzsteuer-ID",handelsregisternummer:"Handelsregisternummer",geschaeftsfuehrer:"Geschftsfhrer"},usa:{title:"tats-Unis",einNumber:"Numro EIN",taxId:"Tax ID",businessLicenseNumber:"N de licence commerciale",stateOfIncorporation:"tat de constitution"},other:{title:"Autres pays",registrationNumber:"N d'enregistrement",vatNumber:"N TVA",taxId:"Tax ID",stateOrRegion:"tat/Rgion"}},iban:{sectionTitle:"IBAN utilis sur les factures",bankOption:"Choisir parmi les comptes bancaires enregistrs",noBanks:"(Aucun compte bancaire enregistr)",bankSelectPlaceholder:"Choisissez une banque",manualOption:"Saisir lIBAN manuellement",ibanPlaceholder:"TR00 0000 0000 0000 0000 0000 00",bankNamePlaceholder:"Nom de la banque (ex. Ziraat Bankas)",preview:a=>`Aperu : ${a}`,previewExample:"Ex : TRxx xxxx xxxx xxxx xxxx xxxx xx"}},notifications:{title:"Prfrences de notification",labels:{invoiceReminders:"Rappels de facture",expenseAlerts:"Alertes de dpenses",salesNotifications:"Notifications de ventes",lowStockAlerts:"Alertes de stock bas",quoteReminders:"Rappels de devis"}},system:{title:"Paramtres du systme",currencyLabel:"Devise",dateFormatLabel:"Format de date",timezoneLabel:"Fuseau horaire",currencies:{TRY:" Livre turque",USD:"$ Dollar amricain",EUR:" Euro",GBP:" Livre sterling"},timezones:{"Europe/Istanbul":"Istanbul",UTC:"UTC","America/New_York":"New York"},backup:{title:"Sauvegardes",toggleLabel:"Sauvegarde automatique",toggleDescription:"Sauvegardez vos donnes automatiquement",frequencyLabel:"Frquence de sauvegarde",options:{daily:"Quotidienne",weekly:"Hebdomadaire",monthly:"Mensuelle"}}},security:{tipsTitle:"Conseils de scurit",tips:[" Utilisez un mot de passe solide (au moins 8 caractres, majuscules/minuscules, chiffres)"," Changez votre mot de passe rgulirement"," Activez lauthentification  deux facteurs"," Surveillez les activits suspectes"],title:"Paramtres de scurit",cards:{twoFactor:{title:"Authentification  deux facteurs",description:"Une couche de scurit supplmentaire pour votre compte",action:"Activer"},sessionHistory:{title:"Historique des sessions",description:"Consultez vos connexions rcentes",action:"Afficher"},activeSessions:{title:"Sessions actives",description:"Grez les sessions sur les autres appareils",action:"Tout dconnecter"}}},privacy:{title:"RGPD et Droits des Donnes",gdpr:{title:"Gestion des Donnes Personnelles",description:"Grez vos donnes personnelles conformment au RGPD",export:{title:"Exporter mes Donnes",description:"Tlchargez toutes vos donnes personnelles au format ZIP",button:"Exporter mes Donnes",disclaimer:"Le fichier tlcharg contient vos donnes aux formats JSON et CSV."},delete:{title:"Supprimer mon Compte",description:"Supprimez dfinitivement votre compte et toutes vos donnes personnelles",button:"Demander la Suppression du Compte",warning:"Cette action est irrversible et supprimera toutes vos donnes.",confirmDialog:{title:"Confirmation de Suppression du Compte",message:"tes-vous sr de vouloir supprimer votre compte ?",retention:"Note : Les registres comptables seront conservs 10 ans pour des raisons lgales.",confirm:"Oui, Supprimer mon Compte",cancel:"Annuler"}}}}},de:{header:{title:"Einstellungen",subtitle:"System- und Kontoeinstellungen verwalten",unsavedChanges:"Ungespeicherte nderungen",save:"Speichern"},modals:{saveSuccess:{title:"Gespeichert",message:"Ihre nderungen wurden erfolgreich gespeichert.",confirm:"OK"},saveError:{title:"Fehler",message:"Beim Speichern der Einstellungen ist ein Fehler aufgetreten.",confirm:"Schlieen"},fileTypeError:{title:"Ungltiger Dateityp",message:"Bitte whlen Sie nur eine Bilddatei aus.",confirm:"OK"},fileSizeError:{title:"Datei zu gro",message:"Die Datei darf nicht grer als 5 MB sein.",confirm:"OK"},authRequired:{title:"Anmeldung erforderlich",message:"Bitte melden Sie sich zuerst an.",confirm:"OK"},sessionExpired:{title:"Sitzung abgelaufen",message:"Bitte melden Sie sich erneut an.",confirm:"OK"},deleteRequested:{title:"Anfrage erhalten",message:"Ihre Kontolschungsanfrage wurde bermittelt.",confirm:"OK"},deleteFailed:{title:"Anfrage fehlgeschlagen",message:"Kontolschung konnte nicht gesendet werden. Bitte erneut versuchen.",confirm:"Schlieen"}},tabs:{profile:"Profil",company:"Unternehmen",plan:"Abo/Plan",notifications:"Benachrichtigungen",organization:"Organisation",fiscalPeriods:"Finanzperioden",system:"System",security:"Sicherheit",privacy:"Datenschutz"},profile:{title:"Profilinformationen",fields:{name:"Vollstndiger Name",email:"E-Mail-Adresse",phone:"Telefon"},passwordTitle:"Passwort ndern",passwordFields:{current:"Aktuelles Passwort",new:"Neues Passwort",confirm:"Passwort besttigen"}},company:{title:"Unternehmensinformationen",logo:{label:"Unternehmenslogo",upload:"Logo hochladen",remove:"Entfernen",helper:"Sie knnen PNG-, JPG- oder GIF-Dateien bis 5 MB hochladen.",uploaded:({name:a,sizeKB:o})=>`Logo ${a} (${o} KB)`},fields:{name:"Unternehmensname",address:"Adresse",taxNumber:"Steuernummer",taxOffice:"Finanzamt",phone:"Telefon",email:"E-Mail",website:"Webseite"},legalFields:{title:"Rechtliche Compliance-Felder",subtitle:"Erforderliche Informationen fr internationale Rechnungsstandards",countryHelp:"Um Unternehmensdaten einzugeben, whlen Sie bitte das Unternehmensland.",countrySelectLabel:"Land",countryOptions:{TR:"Trkei",US:"USA",DE:"Deutschland",FR:"Frankreich",OTHER:"Andere"},turkey:{title:"Trkei",mersisNumber:"Mersis-Nummer",kepAddress:"KEP-Adresse"},france:{title:"Frankreich",siretNumber:"SIRET-Nummer",sirenNumber:"SIREN-Nummer",apeCode:"APE/NAF-Code",tvaNumber:"TVA-Nummer",rcsNumber:"RCS-Nummer"},germany:{title:"Deutschland",steuernummer:"Steuernummer",umsatzsteuerID:"Umsatzsteuer-ID",handelsregisternummer:"Handelsregisternummer",geschaeftsfuehrer:"Geschftsfhrer"},usa:{title:"USA",einNumber:"EIN-Nummer",taxId:"Tax ID",businessLicenseNumber:"Gewerbelizenznummer",stateOfIncorporation:"Grndungsstaat"},other:{title:"Andere Lnder",registrationNumber:"Registernummer",vatNumber:"USt/VAT-Nr.",taxId:"Steuer-ID",stateOrRegion:"Staat/Region"}},iban:{sectionTitle:"IBAN fr Rechnungen",bankOption:"Aus registrierten Bankkonten auswhlen",noBanks:"(Keine Bankkonten registriert)",bankSelectPlaceholder:"Bank auswhlen",manualOption:"IBAN manuell eingeben",ibanPlaceholder:"DE00 0000 0000 0000 0000 00",bankNamePlaceholder:"Bankname (z.B. Deutsche Bank)",preview:a=>`Vorschau: ${a}`,previewExample:"z.B.: DExx xxxx xxxx xxxx xxxx xx"}},notifications:{title:"Benachrichtigungseinstellungen",labels:{invoiceReminders:"Rechnungserinnerungen",expenseAlerts:"Ausgabenwarnungen",salesNotifications:"Verkaufsbenachrichtigungen",lowStockAlerts:"Niedriger Lagerbestand",quoteReminders:"Angebotserinnerungen"}},system:{title:"Systemeinstellungen",currencyLabel:"Whrung",dateFormatLabel:"Datumsformat",timezoneLabel:"Zeitzone",currencies:{TRY:" Trkische Lira",USD:"$ US-Dollar",EUR:" Euro",GBP:" Pfund Sterling"},timezones:{"Europe/Istanbul":"Istanbul",UTC:"UTC","America/New_York":"New York"},backup:{title:"Sicherungen",toggleLabel:"Automatische Sicherung",toggleDescription:"Sichern Sie Ihre Daten automatisch",frequencyLabel:"Sicherungshufigkeit",options:{daily:"Tglich",weekly:"Wchentlich",monthly:"Monatlich"}}},security:{tipsTitle:"Sicherheitstipps",tips:[" Verwenden Sie ein starkes Passwort (mindestens 8 Zeichen, Gro-/Kleinbuchstaben, Zahlen)"," ndern Sie Ihr Passwort regelmig"," Aktivieren Sie die Zwei-Faktor-Authentifizierung"," berwachen Sie verdchtige Aktivitten"],title:"Sicherheitseinstellungen",cards:{twoFactor:{title:"Zwei-Faktor-Authentifizierung",description:"Eine zustzliche Sicherheitsebene fr Ihr Konto",action:"Aktivieren"},sessionHistory:{title:"Sitzungsverlauf",description:"Sehen Sie Ihre letzten Anmeldungen",action:"Anzeigen"},activeSessions:{title:"Aktive Sitzungen",description:"Verwalten Sie Sitzungen auf anderen Gerten",action:"Alle abmelden"}}},privacy:{title:"DSGVO & Datenrechte",gdpr:{title:"Persnliche Datenverwaltung",description:"Verwalten Sie Ihre persnlichen Daten gem DSGVO",export:{title:"Meine Daten Exportieren",description:"Laden Sie alle Ihre persnlichen Daten im ZIP-Format herunter",button:"Meine Daten Exportieren",disclaimer:"Die heruntergeladene Datei enthlt Ihre Daten in JSON- und CSV-Formaten."},delete:{title:"Mein Konto Lschen",description:"Lschen Sie Ihr Konto und alle persnlichen Daten dauerhaft",button:"Kontolschung Beantragen",warning:"Diese Aktion kann nicht rckgngig gemacht werden und lscht alle Ihre Daten.",confirmDialog:{title:"Besttigung der Kontolschung",message:"Sind Sie sicher, dass Sie Ihr Konto lschen mchten?",retention:"Hinweis: Buchhaltungsunterlagen werden aus rechtlichen Grnden 10 Jahre aufbewahrt.",confirm:"Ja, Mein Konto Lschen",cancel:"Abbrechen"}}}}}};function Df({user:a={name:"Demo User",email:"demo@moneyflow.com"},company:o,bankAccounts:t=[],onUserUpdate:f,onCompanyUpdate:h,initialTab:d}){const[n,l]=G.useState("profile"),[i,r]=G.useState(!1),[s,c]=G.useState(!1),u=G.useRef(!1),[m,x]=G.useState(!1),[b,p]=G.useState(!1),[v,y]=G.useState({open:!1,title:"",message:"",tone:"info"}),N=(Oe,ot,ht="info")=>y({open:!0,title:Oe,message:ot,tone:ht}),T=G.useCallback(()=>{u.current=!0,c(!0)},[]),_=G.useCallback(()=>{u.current=!1,c(!1)},[]),[O,H]=G.useState(!1),[F,V]=G.useState(!1),[q,W]=G.useState(!1),[B,E]=G.useState(!1),[P,A]=G.useState(null),[k,j]=G.useState(null),[S,C]=G.useState(null),[D,R]=G.useState(""),[L,Y]=G.useState(!1),[X,ae]=G.useState(null),{i18n:$,t:Q}=$t("common"),z=$.language.toLowerCase().substring(0,2),M=_T(z)?z:"tr",U=PT[M],te=U.notifications.labels,{refreshUser:ie,user:se,tenant:le,logout:Ne}=Gs(),ke=Fv(le),Z=(se?.role||"").toUpperCase(),ce=Z==="OWNER"||Z==="TENANT_ADMIN"||Z==="SUPER_ADMIN",[ve,De]=G.useState(null),Ie=ce||(ve==="OWNER"||ve==="ADMIN");G.useEffect(()=>{let Oe=!1;return(async()=>{try{if(!se?.id||!zn())return;const It=await hs.getAll();if(!It?.length)return;const Tt=It[0]?.id;if(!Tt)return;const Re=(await hs.getMembers(Tt)).find(pt=>pt.user.id===se.id);Oe||De(ST(Re?.role))}catch(ht){he.warn("Organization role fetch failed",ht),Oe||De(null)}})(),()=>{Oe=!0}},[se?.id]);const[Ue,Ge]=G.useState(""),[Le,at]=G.useState(!1);G.useEffect(()=>{let Oe=!1;return(async()=>{try{const ot=await zc.getMyTenant();if(!Oe){Ge(ot?.companyName??"");const ht=cl(ot?.currency);ht&&!$e.current&&(Be(ht),ue(It=>It.currency===ht?It:{...It,currency:ht})),at(!0)}}catch(ot){he.debug("Official company name fetch failed",ot),Oe||at(!0)}})(),()=>{Oe=!0}},[]),G.useEffect(()=>{n==="plan"&&ie().catch(()=>{})},[n,ie]),G.useEffect(()=>{(async()=>{try{const Oe=await Rn.getTwoFactorStatus();j(Oe)}catch(Oe){he.debug("Initial 2FA status fetch failed",Oe)}})()},[]);const ut=async()=>{try{Y(!0),ae(null),R("");const Oe=await Rn.getTwoFactorStatus();if(j(Oe),Oe.enabled)A("disable"),E(!0);else{const ot=await Rn.setupTwoFactor();C({secret:ot.secret,qrCodeUrl:ot.qrCodeUrl}),A("enable"),E(!0)}}catch(Oe){N("2FA",ia(Oe,"lem baarsz"),"error")}finally{Y(!1)}},Ce=async()=>{try{if(Y(!0),P==="enable"){const Oe=await Rn.enableTwoFactor((D||"").trim());ae(Oe?.backupCodes||[]),j({enabled:!0,backupCodesCount:Oe?.backupCodes?.length||0}),await ie()}else P==="disable"&&(await Rn.disableTwoFactor((D||"").trim()),j({enabled:!1,backupCodesCount:0}),await ie(),E(!1),A(null),N(M==="tr"?"2FA devre d":M==="fr"?"2FA dsactiv":M==="de"?"2FA deaktiviert":"2FA disabled",M==="tr"?"ki faktrl dorulama kapatld.":M==="fr"?"Lauthentification  deux facteurs a t dsactive.":M==="de"?"Zwei-Faktor-Authentifizierung wurde deaktiviert.":"Two-factor authentication has been disabled.","success"))}catch(Oe){N("2FA",ia(Oe,"lem baarsz"),"error")}finally{Y(!1)}},it=()=>{if(!(!X||!X.length))try{navigator.clipboard.writeText(X.join(`
`)),N(M==="tr"?"Kodlar kopyaland":M==="fr"?"Codes copis":M==="de"?"Codes kopiert":"Codes copied",M==="tr"?"Yedek kodlar panoya kopyaland.":M==="fr"?"Les codes de secours ont t copis.":M==="de"?"Die Backup-Codes wurden kopiert.":"Backup codes copied.","success")}catch(Oe){he.warn("Copying 2FA backup codes failed",Oe)}},xt=()=>{if(!X||!X.length)return;const Oe=new Blob([X.join(`
`)],{type:"text/plain"}),ot=URL.createObjectURL(Oe),ht=document.createElement("a");ht.href=ot,ht.download="2fa-backup-codes.txt",document.body.appendChild(ht),ht.click(),document.body.removeChild(ht),URL.revokeObjectURL(ot),N(M==="tr"?"Dosya indirildi":M==="fr"?"Fichier tlcharg":M==="de"?"Datei heruntergeladen":"File downloaded",M==="tr"?"Yedek kodlar dosya olarak indirildi.":M==="fr"?"Les codes de secours ont t tlchargs.":M==="de"?"Backup-Codes wurden heruntergeladen.":"Backup codes downloaded.","success")},jt=async()=>{try{Y(!0);const Oe=await Rn.regenerateTwoFactorBackupCodes();ae(Oe.backupCodes||[]),j({enabled:!0,backupCodesCount:Oe.count||Oe.backupCodes?.length||0}),N(M==="tr"?"Kodlar yenilendi":M==="fr"?"Codes rgnrs":M==="de"?"Codes regeneriert":"Codes regenerated",M==="tr"?"Yeni yedek kodlar oluturuldu. Eskileri artk geersiz.":M==="fr"?"De nouveaux codes de secours ont t gnrs. Les anciens sont invalides.":M==="de"?"Neue Backup-Codes wurden erstellt. Alte sind ungltig.":"New backup codes generated. Old ones are now invalid.","success")}catch(Oe){N("2FA",ia(Oe,"lem baarsz"),"error")}finally{Y(!1)}},Ee=()=>{E(!1),A(null),C(null),R(""),ae(null)};G.useEffect(()=>{let Oe=!1;const ot=(Mt,Re,pt,Ot)=>{y({open:!0,title:Mt,message:Re,tone:"success",confirmLabel:pt,onConfirm:()=>{y(Se=>({...Se,open:!1})),(async()=>{try{if(ke){const{syncSubscription:Se}=await Mr(async()=>{const{syncSubscription:qe}=await Promise.resolve().then(()=>aa);return{syncSubscription:qe}},void 0);await Se(ke)}await ie()}catch(Se){he.warn("Invite CTA sync failed",Se)}l("organization")})()},cancelLabel:Ot,onCancel:()=>y(Se=>({...Se,open:!1}))})},ht=async()=>{const Mt=na.get("pending_billing_payment");if(Mt)try{const Re=Ov(Mt)||{};if(!ke)return;const{syncSubscription:pt,listInvoices:Ot}=await Mr(async()=>{const{syncSubscription:qt,listInvoices:nr}=await Promise.resolve().then(()=>aa);return{syncSubscription:qt,listInvoices:nr}},void 0);await pt(ke);const Se=await Ot(ke),qe=typeof Re.ts=="number"?Re.ts-120*1e3:Date.now()-600*1e3;if(!Tp(Se?.invoices).some(qt=>!!qt.paid&&qt.created&&new Date(qt.created).getTime()>=qe)||Oe)return;const Ct=(()=>{const qt=String(Re?.plan||"").toLowerCase();return qt.includes("enterprise")||qt.includes("business")?"Enterprise":qt.includes("professional")||qt==="pro"?"Pro":"Plan"})(),er=M,Rt={tr:{title:"deme Baarl",basePlan:qt=>`leminiz baaryla tamamland. Artk ${qt} plann keyfini karabilirsiniz.`,baseGeneric:"demeniz baaryla alnd.",extra:qt=>` Ayrca sisteminize ${qt} kullanc daha davet edebilirsiniz.`},en:{title:"Payment Successful",basePlan:qt=>`Your update completed successfully. Enjoy the ${qt} plan!`,baseGeneric:"Your payment was received successfully.",extra:qt=>` You can now invite ${qt} more user${qt>1?"s":""} to your system.`},fr:{title:"Paiement russi",basePlan:qt=>`Mise  jour termine avec succs. Profitez du plan ${qt} !`,baseGeneric:"Votre paiement a t reu avec succs.",extra:qt=>` Vous pouvez maintenant inviter ${qt} utilisateur${qt>1?"s":""} supplmentaires.`},de:{title:"Zahlung erfolgreich",basePlan:qt=>`Aktualisierung erfolgreich. Viel Spa mit dem ${qt}-Tarif!`,baseGeneric:"Ihre Zahlung wurde erfolgreich erhalten.",extra:qt=>` Sie knnen nun ${qt} weitere Benutzer einladen.`}},Ht=Rt[er]||Rt.tr,ir=Re?.type==="plan-interval"?Ht.basePlan(Ct):Ht.baseGeneric,Zt=Re?.seats&&Re.seats>0?Ht.extra(Re.seats):"";if(Ie){const qt={tr:{invite:"Kullanc Davet Et",close:"Kapat"},en:{invite:"Invite Users",close:"Close"},fr:{invite:"Inviter des utilisateurs",close:"Fermer"},de:{invite:"Benutzer einladen",close:"Schlieen"}},nr=qt[er]||qt.tr;ot(Ht.title,ir+Zt,nr.invite,nr.close)}else N(Ht.title,ir+Zt,"success");na.remove("pending_billing_payment");try{await ie()}catch(qt){he.warn("Refresh user after payment success failed",qt)}}catch(Re){he.warn("Pending billing handler failed",Re)}},It=()=>{ht()},Tt=Mt=>{if(!Oe)try{const Re=Mt.detail||{},pt=M,Ot={tr:{title:"lem Baarl",base:"leminiz baaryla tamamland.",extra:ft=>` Ayrca sisteminize ${ft} kullanc daha davet edebilirsiniz.`},en:{title:"Success",base:"Your operation completed successfully.",extra:ft=>` You can now invite ${ft} more user${ft>1?"s":""}.`},fr:{title:"Succs",base:"Votre opration sest termine avec succs.",extra:ft=>` Vous pouvez maintenant inviter ${ft} utilisateur${ft>1?"s":""} supplmentaires.`},de:{title:"Erfolg",base:"Ihr Vorgang wurde erfolgreich abgeschlossen.",extra:ft=>` Sie knnen nun ${ft} weitere Benutzer einladen.`}},Se=Ot[pt]||Ot.tr,qe=Re?.seats&&Re.seats>0?Se.extra(Re.seats):"";if(Ie){const ft={tr:{invite:"Kullanc Davet Et",close:"Kapat"},en:{invite:"Invite Users",close:"Close"},fr:{invite:"Inviter des utilisateurs",close:"Fermer"},de:{invite:"Benutzer einladen",close:"Schlieen"}},Ct=ft[pt]||ft.tr;ot(Se.title,Se.base+qe,Ct.invite,Ct.close)}else N(Se.title,Se.base+qe,"success")}catch(Re){he.warn("billingSuccess listener failed",Re)}};return window.addEventListener("focus",It),window.addEventListener("billingSuccess",Tt),ht(),()=>{Oe=!0,window.removeEventListener("focus",It),window.removeEventListener("billingSuccess",Tt)}},[ke,M,Ie,ie]);const{currency:xe,setCurrency:Be}=Jr(),$e=G.useRef(!1);he.debug("[SettingsPage] Current currency from context",{currency:xe}),G.useEffect(()=>{he.debug("[SettingsPage] Current currency changed",{currency:xe})},[xe]);const[ye,oe]=G.useState({name:a.name,email:a.email,phone:"+90 555 123 45 67",currentPassword:"",newPassword:"",confirmPassword:""}),[me,ue]=G.useState(()=>({name:o?.name??"",address:o?.address??"",taxNumber:o?.taxNumber??"",taxOffice:o?.taxOffice??"",phone:o?.phone??"",email:o?.email??"",website:o?.website??"",logoDataUrl:o?.logoDataUrl??"",bankAccountId:o?.bankAccountId??void 0,currency:cl(o?.currency)??xe??"TRY",country:o?.country??"TR",logoFile:null,mersisNumber:o?.mersisNumber??"",kepAddress:o?.kepAddress??"",siretNumber:o?.siretNumber??"",sirenNumber:o?.sirenNumber??"",apeCode:o?.apeCode??"",tvaNumber:o?.tvaNumber??"",rcsNumber:o?.rcsNumber??"",steuernummer:o?.steuernummer??"",umsatzsteuerID:o?.umsatzsteuerID??"",handelsregisternummer:o?.handelsregisternummer??"",geschaeftsfuehrer:o?.geschaeftsfuehrer??"",einNumber:o?.einNumber??"",taxId:o?.taxId??"",businessLicenseNumber:o?.businessLicenseNumber??"",stateOfIncorporation:o?.stateOfIncorporation??"",registrationNumber:o?.registrationNumber??"",vatNumberGeneric:o?.vatNumberGeneric??"",taxIdGeneric:o?.taxIdGeneric??"",stateOrRegion:o?.stateOrRegion??""}));G.useEffect(()=>{ue(Oe=>{const ot=cl(o?.currency),ht=!!(ot&&!$e.current&&ot!==Oe.currency),It=ht?ot:Oe.currency??ot??"TRY";return ht&&($e.current=!1),{...Oe,name:o?.name??Oe.name,address:o?.address??Oe.address,taxNumber:o?.taxNumber??Oe.taxNumber,taxOffice:o?.taxOffice??Oe.taxOffice,phone:o?.phone??Oe.phone,email:o?.email??Oe.email,website:o?.website??Oe.website,logoDataUrl:o?.logoDataUrl??Oe.logoDataUrl,bankAccountId:o?.bankAccountId??Oe.bankAccountId,currency:It,country:o?.country??Oe.country,mersisNumber:o?.mersisNumber??Oe.mersisNumber,kepAddress:o?.kepAddress??Oe.kepAddress,siretNumber:o?.siretNumber??Oe.siretNumber,sirenNumber:o?.sirenNumber??Oe.sirenNumber,apeCode:o?.apeCode??Oe.apeCode,tvaNumber:o?.tvaNumber??Oe.tvaNumber,rcsNumber:o?.rcsNumber??Oe.rcsNumber,steuernummer:o?.steuernummer??Oe.steuernummer,umsatzsteuerID:o?.umsatzsteuerID??Oe.umsatzsteuerID,handelsregisternummer:o?.handelsregisternummer??Oe.handelsregisternummer,geschaeftsfuehrer:o?.geschaeftsfuehrer??Oe.geschaeftsfuehrer,einNumber:o?.einNumber??Oe.einNumber,taxId:o?.taxId??Oe.taxId,businessLicenseNumber:o?.businessLicenseNumber??Oe.businessLicenseNumber,stateOfIncorporation:o?.stateOfIncorporation??Oe.stateOfIncorporation,registrationNumber:o?.registrationNumber??Oe.registrationNumber,vatNumberGeneric:o?.vatNumberGeneric??Oe.vatNumberGeneric,taxIdGeneric:o?.taxIdGeneric??Oe.taxIdGeneric,stateOrRegion:o?.stateOrRegion??Oe.stateOrRegion}}),u.current||_()},[o,_]);const ze={invoiceReminders:!0,expenseAlerts:!0,salesNotifications:!0,lowStockAlerts:!0,quoteReminders:!0},tt=()=>{try{const Oe=en()||wo(),ot=wl({tenantIds:[Oe],userIds:Ef(se)});if(ot&&typeof ot=="object")return{...ze,...ot}}catch(Oe){he.debug("loadInitialNotificationSettings failed",Oe)}return{...ze}},[kt,we]=G.useState(tt),{updatePref:st}=Tv(),wt=G.useCallback(Oe=>{try{const ot=en()||wo();Hb(Oe,{tenantIds:[ot],userIds:Ef(se)})}catch(ot){he.warn("Persist notification settings failed",ot)}},[se]);G.useEffect(()=>{(async()=>{try{if(!zn())return;const ot=await Rn.getNotificationPreferences();ot&&typeof ot=="object"&&we(ht=>{const It={invoiceReminders:ot.invoiceReminders??ht.invoiceReminders,expenseAlerts:ot.expenseAlerts??ht.expenseAlerts,salesNotifications:ot.salesNotifications??ht.salesNotifications,lowStockAlerts:ot.lowStockAlerts??ht.lowStockAlerts,quoteReminders:ot.quoteReminders??ht.quoteReminders};return wt(It),It})}catch(Oe){he.debug("Notification preferences fetch failed",Oe)}})()},[wt]),G.useEffect(()=>{const ot=(()=>{try{const ht=en()||wo(),It=wl({tenantIds:[ht],userIds:Ef(se)});if(It&&typeof It=="object")return{invoiceReminders:It.invoiceReminders??kt.invoiceReminders,expenseAlerts:It.expenseAlerts??kt.expenseAlerts,salesNotifications:It.salesNotifications??kt.salesNotifications,lowStockAlerts:It.lowStockAlerts??kt.lowStockAlerts,quoteReminders:It.quoteReminders??kt.quoteReminders}}catch(ht){he.debug("Notification preference lookup failed",ht)}return null})();ot&&(Object.keys(ot).every(It=>ot[It]===kt[It])||we(ot))},[se,kt]);const[pe,Qe]=G.useState({language:"tr",dateFormat:"DD/MM/YYYY",theme:"light"}),fe=Ie?[{id:"profile",label:U.tabs.profile,icon:ds},{id:"company",label:U.tabs.company,icon:ts},{id:"plan",label:U.tabs.plan||"Plan",icon:ja},{id:"organization",label:U.tabs.organization||"Organization",icon:Ls},{id:"fiscal-periods",label:U.tabs.fiscalPeriods||"Fiscal Periods",icon:Vr},{id:"notifications",label:U.tabs.notifications,icon:hv},{id:"security",label:U.tabs.security,icon:zs},{id:"privacy",label:U.tabs.privacy,icon:Yn}]:[{id:"profile",label:U.tabs.profile,icon:ds},{id:"security",label:U.tabs.security,icon:zs}];G.useEffect(()=>{if(!d)return;fe.map(ot=>ot.id).includes(d)&&l(d)},[d]),G.useEffect(()=>{const Oe=fe.map(ot=>ot.id);if(!Oe.includes(n)){const ot=Oe[0]||"security";l(ot)}},[fe,n]);const He=(Oe,ot)=>{oe(ht=>ht[Oe]===ot?ht:(T(),{...ht,[Oe]:ot}))},lt=(Oe,ot)=>{ue(ht=>ht[Oe]===ot?ht:(T(),{...ht,[Oe]:ot}))},Pe=Oe=>{const ot=Oe.target.files?.[0];if(!ot)return;if(!ot.type.startsWith("image/")){N(U.modals.fileTypeError.title,U.modals.fileTypeError.message,"error");return}if(ot.size>5*1024*1024){N(U.modals.fileSizeError.title,U.modals.fileSizeError.message,"error");return}const ht=new FileReader;ht.onload=It=>{ue(Tt=>({...Tt,logoDataUrl:It.target?.result,logoFile:ot})),T()},ht.readAsDataURL(ot)},rt=()=>{ue(Oe=>({...Oe,logoDataUrl:"",logoFile:null})),T()},je=async(Oe,ot)=>{we(ht=>({...ht,[Oe]:ot}));try{await st(Oe,ot);const ht={...kt,[Oe]:ot};wt(ht)}catch(ht){he.error("Notification preference update failed",ht)}},Me=(Oe,ot)=>{if(Oe==="currency"){he.info("System currency change requested",{value:ot});const ht=cl(ot);if(!ht){he.warn("Ignoring invalid currency selection",{value:ot});return}$e.current=!0,xe!==ht&&Be(ht),ue(It=>It.currency===ht?It:(T(),{...It,currency:ht}));return}Qe(ht=>ht[Oe]===ot?ht:(T(),{...ht,[Oe]:ot}))},Ye=async()=>{he.info("Settings save triggered",{profile:{name:ye.name,phone:ye.phone}});const Oe=cl(me.currency)??xe??"TRY";try{he.debug("Calling usersApi.updateProfile");const ot=await Rn.updateProfile({name:ye.name,phone:ye.phone});he.info("User profile updated",{userId:ot?.id||ot?._id}),Gb(ot),he.debug("Local user cache updated",{userId:ot?.id||ot?._id});try{await ie(),he.debug("Auth context refreshed after profile update")}catch(pt){he.warn("refreshUser failed after profile update (cache already fresh)",pt)}const ht=ye.currentPassword.trim(),It=ye.newPassword.trim(),Tt=ye.confirmPassword.trim();if(ht||It||Tt){if(!ht||!It||!Tt){N(M==="tr"?"ifre Alanlar Eksik":"Missing Password Fields",M==="tr"?"Mevcut, yeni ve tekrar ifre alanlarnn tm doldurulmal.":"All password fields (current, new, confirm) must be filled.","error");return}if(It!==Tt){N(M==="tr"?"ifre Elemiyor":"Password Mismatch",M==="tr"?"Yeni ifre ile tekrar ifre ayn deil.":"New password and confirmation do not match.","error");return}if(It.length<8){N(M==="tr"?"ifre ok Ksa":"Password Too Short",M==="tr"?"Yeni ifre en az 8 karakter olmal.":"New password must be at least 8 characters.","error");return}try{if(he.debug("Calling usersApi.changePassword"),(await Rn.changePassword(ht,It))?.success)N(M==="tr"?"ifre Gncellendi":"Password Updated",M==="tr"?"ifreniz baaryla deitirildi.":"Your password has been changed successfully.","success"),oe(Ot=>({...Ot,currentPassword:"",newPassword:"",confirmPassword:""}));else{N(M==="tr"?"ifre Deitirilemedi":"Password Change Failed",M==="tr"?"lem srasnda hata olutu.":"An error occurred during password change.","error");return}}catch(pt){const Ot=ia(pt,"Hata");N(M==="tr"?"ifre Deitirilemedi":"Password Change Failed",Ot,"error");return}}if(f){const pt={name:`${ot.firstName} ${ot.lastName}`,email:ot.email,phone:ye.phone};f(pt),he.debug("onUserUpdate prop invoked")}he.info("Profile changes persisted"),he.debug("Persisted user payload",ot);try{if(Ie&&Le){const pt=await zc.getMyTenant(),Ot=pt?.companyName||pt?.name||"";(Ue||"")!==(Ot||"")&&await zc.updateMyTenant({companyName:Ue})}}catch(pt){he.warn("Official company name update failed",pt)}let Mt=!0,Re=null;try{const pt={brand:{logoDataUrl:me.logoDataUrl||"",bankAccountId:me.bankAccountId||void 0,country:me.country||""}},Ot={companyName:Ue||me.name||void 0,address:me.address||void 0,taxNumber:me.taxNumber||void 0,taxOffice:me.taxOffice||void 0,phone:me.phone||void 0,email:me.email||void 0,website:me.website||void 0,currency:Oe,mersisNumber:me.mersisNumber||void 0,kepAddress:me.kepAddress||void 0,siretNumber:me.siretNumber||void 0,sirenNumber:me.sirenNumber||void 0,apeCode:me.apeCode||void 0,tvaNumber:me.tvaNumber||void 0,rcsNumber:me.rcsNumber||void 0,steuernummer:me.steuernummer||void 0,umsatzsteuerID:me.umsatzsteuerID||void 0,handelsregisternummer:me.handelsregisternummer||void 0,geschaeftsfuehrer:me.geschaeftsfuehrer||void 0,einNumber:me.einNumber||void 0,taxId:me.taxId||void 0,businessLicenseNumber:me.businessLicenseNumber||void 0,stateOfIncorporation:me.stateOfIncorporation||void 0,settings:pt};Ie||delete Ot.companyName;const Se=await zc.updateMyTenant(Ot);Re=cl(Se?.currency);const qe=Re??Oe;ue(ft=>ft.currency===qe?ft:{...ft,currency:qe}),xe!==qe&&Be(qe)}catch(pt){he.error("Tenant settings update failed",pt),Mt=!1}if(h){const pt=Re??Oe,Ot={name:me.name,address:me.address,taxNumber:me.taxNumber,taxOffice:me.taxOffice,phone:me.phone,email:me.email,website:me.website,logoDataUrl:me.logoDataUrl,bankAccountId:me.bankAccountId,country:me.country||void 0,currency:pt,mersisNumber:me.mersisNumber,kepAddress:me.kepAddress,siretNumber:me.siretNumber,sirenNumber:me.sirenNumber,apeCode:me.apeCode,tvaNumber:me.tvaNumber,rcsNumber:me.rcsNumber,steuernummer:me.steuernummer,umsatzsteuerID:me.umsatzsteuerID,handelsregisternummer:me.handelsregisternummer,geschaeftsfuehrer:me.geschaeftsfuehrer,einNumber:me.einNumber,taxId:me.taxId,businessLicenseNumber:me.businessLicenseNumber,stateOfIncorporation:me.stateOfIncorporation,registrationNumber:me.registrationNumber,vatNumberGeneric:me.vatNumberGeneric,taxIdGeneric:me.taxIdGeneric,stateOrRegion:me.stateOrRegion};h(Ot)}try{await Rn.updateNotificationPreferences(kt),wt(kt)}catch(pt){he.error("Notification prefs save failed",pt)}Mt?(_(),$e.current=!1,x(!0)):p(!0)}catch(ot){he.error("Settings save failed",ot),p(!0)}},dt=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:U.profile.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.profile.fields.name}),e.jsx("input",{type:"text",value:ye.name,onChange:Oe=>He("name",Oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.profile.fields.email}),e.jsx("input",{type:"email",value:ye.email,onChange:Oe=>He("email",Oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.profile.fields.phone}),e.jsx("input",{type:"tel",value:ye.phone,onChange:Oe=>He("phone",Oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700 mb-2",children:M==="tr"?"Son Giri":M==="fr"?"Dernire connexion":M==="de"?"Letzte Anmeldung":"Last Login"}),e.jsx("div",{className:"px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-sm text-gray-700",children:(()=>{try{const Oe=se?.lastLoginAt;if(!Oe)return"";const ot=new Date(Oe);if(Number.isNaN(ot.getTime()))return"";const ht=typeof $?.language=="string"&&$.language?$.language:M||"tr";return ot.toLocaleString(ht)}catch{return""}})()})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:U.profile.passwordTitle}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.profile.passwordFields.current}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",value:ye.currentPassword,onChange:Oe=>He("currentPassword",Oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>r(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:i?e.jsx($c,{className:"w-4 h-4"}):e.jsx(Zr,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.profile.passwordFields.new}),e.jsx("input",{type:i?"text":"password",value:ye.newPassword,onChange:Oe=>He("newPassword",Oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.profile.passwordFields.confirm}),e.jsx("input",{type:i?"text":"password",value:ye.confirmPassword,onChange:Oe=>He("confirmPassword",Oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),mt=()=>{const Oe=t.length>0,ot=t.find(Tt=>Tt.id===me.bankAccountId),ht=!!(me.country&&String(me.country).trim()!==""),It=me.country==="TR"?"turkey":me.country==="FR"?"france":me.country==="DE"?"germany":me.country==="US"?"usa":"other";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(gc,{title:U.company.title,children:[e.jsxs("div",{className:"mb-4 flex items-start gap-2 rounded-md bg-blue-50 p-3 text-blue-800",children:[e.jsx(tm,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:U.company.legalFields.countryHelp||"irket bilgilerini girebilmek iin ltfen irket lkesini sein."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.countrySelectLabel||"lke"}),e.jsxs("select",{value:me.country,onChange:Tt=>lt("country",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"TR",children:U.company.legalFields.countryOptions?.TR||"Trkiye"}),e.jsx("option",{value:"US",children:U.company.legalFields.countryOptions?.US||"Amerika"}),e.jsx("option",{value:"DE",children:U.company.legalFields.countryOptions?.DE||"Almanya"}),e.jsx("option",{value:"FR",children:U.company.legalFields.countryOptions?.FR||"Fransa"}),e.jsx("option",{value:"OTHER",children:U.company.legalFields.countryOptions?.OTHER||"Dier"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:Q("settings.companyFields.officialName")}),e.jsx("input",{type:"text",value:Ue,onChange:Tt=>{Ge(Tt.target.value),T()},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${Ie?"border-gray-300":"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed"}`,disabled:!Ie,title:Ie?void 0:Q("settings.companyFields.officialNameTooltip")}),!ce&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:Q("settings.companyFields.officialNameOwnerOnly")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:Q("settings.companyFields.brandName")}),e.jsx("input",{type:"text",value:me.name,onChange:Tt=>lt("name",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:Q("settings.companyFields.brandNameHelper")})]}),ht&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.fields.phone}),e.jsx("input",{type:"tel",value:me.phone,onChange:Tt=>lt("phone",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.fields.email}),e.jsx("input",{type:"email",value:me.email,onChange:Tt=>lt("email",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.fields.website}),e.jsx("input",{type:"url",value:me.website,onChange:Tt=>lt("website",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.fields.address}),e.jsx("textarea",{value:me.address,onChange:Tt=>lt("address",Tt.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),ht&&e.jsx(gc,{title:U.company.logo.label,defaultOpen:!1,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[me.logoDataUrl?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:me.logoDataUrl,alt:"Company Logo",className:"w-24 h-24 object-contain border border-gray-300 rounded-lg"}),e.jsx("button",{onClick:rt,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600",children:""})]}):e.jsx("div",{className:"w-24 h-24 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:e.jsx(ts,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:Pe,className:"hidden"}),e.jsx("label",{htmlFor:"logo-upload",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer inline-block",children:U.company.logo.upload}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:U.company.logo.helper})]})]})}),ht&&e.jsxs(gc,{title:U.company.legalFields.title,subtitle:U.company.legalFields.subtitle,defaultOpen:!1,children:[It==="turkey"&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[" ",U.company.legalFields.turkey.title]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.turkey.mersisNumber}),e.jsx("input",{type:"text",value:me.mersisNumber,onChange:Tt=>lt("mersisNumber",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0123456789012345"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.turkey.kepAddress}),e.jsx("input",{type:"email",value:me.kepAddress,onChange:Tt=>lt("kepAddress",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"sirket@hs01.kep.tr"})]})]})]}),It==="france"&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[" ",U.company.legalFields.france.title]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.france.siretNumber}),e.jsx("input",{type:"text",value:me.siretNumber,onChange:Tt=>lt("siretNumber",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"12345678901234"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.france.sirenNumber}),e.jsx("input",{type:"text",value:me.sirenNumber,onChange:Tt=>lt("sirenNumber",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.france.apeCode}),e.jsx("input",{type:"text",value:me.apeCode,onChange:Tt=>lt("apeCode",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"6202A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.france.tvaNumber}),e.jsx("input",{type:"text",value:me.tvaNumber,onChange:Tt=>lt("tvaNumber",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"FR12345678901"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.france.rcsNumber}),e.jsx("input",{type:"text",value:me.rcsNumber,onChange:Tt=>lt("rcsNumber",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"123 456 789 RCS Paris"})]})]})]}),It==="germany"&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[" ",U.company.legalFields.germany.title]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.germany.steuernummer}),e.jsx("input",{type:"text",value:me.steuernummer,onChange:Tt=>lt("steuernummer",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"12/345/67890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.germany.umsatzsteuerID}),e.jsx("input",{type:"text",value:me.umsatzsteuerID,onChange:Tt=>lt("umsatzsteuerID",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"DE123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.germany.handelsregisternummer}),e.jsx("input",{type:"text",value:me.handelsregisternummer,onChange:Tt=>lt("handelsregisternummer",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"HRB 12345"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.germany.geschaeftsfuehrer}),e.jsx("input",{type:"text",value:me.geschaeftsfuehrer,onChange:Tt=>lt("geschaeftsfuehrer",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Max Mustermann"})]})]})]}),It==="usa"&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[" ",U.company.legalFields.usa.title]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.usa.einNumber}),e.jsx("input",{type:"text",value:me.einNumber,onChange:Tt=>lt("einNumber",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"12-3456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.usa.taxId}),e.jsx("input",{type:"text",value:me.taxId,onChange:Tt=>lt("taxId",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"123-45-6789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.usa.businessLicenseNumber}),e.jsx("input",{type:"text",value:me.businessLicenseNumber,onChange:Tt=>lt("businessLicenseNumber",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"BL123456"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.usa.stateOfIncorporation}),e.jsx("input",{type:"text",value:me.stateOfIncorporation,onChange:Tt=>lt("stateOfIncorporation",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Delaware"})]})]})]}),It==="other"&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[" ",U.company.legalFields.other.title]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.other.registrationNumber}),e.jsx("input",{type:"text",value:me.registrationNumber,onChange:Tt=>lt("registrationNumber",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.other.vatNumber}),e.jsx("input",{type:"text",value:me.vatNumberGeneric,onChange:Tt=>lt("vatNumberGeneric",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.other.taxId}),e.jsx("input",{type:"text",value:me.taxIdGeneric,onChange:Tt=>lt("taxIdGeneric",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.legalFields.other.stateOrRegion}),e.jsx("input",{type:"text",value:me.stateOrRegion,onChange:Tt=>lt("stateOrRegion",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),ht&&e.jsx(gc,{title:U.company.iban.sectionTitle,defaultOpen:!1,children:Oe?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.company.iban.bankOption}),e.jsxs("select",{value:me.bankAccountId||"",onChange:Tt=>lt("bankAccountId",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:U.company.iban.bankSelectPlaceholder}),t.map(Tt=>e.jsxs("option",{value:Tt.id,children:[Tt.bankName," - ",Tt.accountName]},Tt.id))]}),ot&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["IBAN: ",ot.iban]})]}):e.jsx("p",{className:"text-gray-600",children:U.company.iban.noBanks})}),ht&&e.jsx(gc,{title:U.system.title,defaultOpen:!1,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.system.currencyLabel}),e.jsxs("select",{value:me.currency||xe||"TRY",onChange:Tt=>{he.debug("Currency dropdown changed",{value:Tt.target.value}),Me("currency",Tt.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"TRY",children:U.system.currencies.TRY}),e.jsx("option",{value:"USD",children:U.system.currencies.USD}),e.jsx("option",{value:"EUR",children:U.system.currencies.EUR}),e.jsx("option",{value:"GBP",children:U.system.currencies.GBP})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:U.system.dateFormatLabel}),e.jsxs("select",{value:pe.dateFormat,onChange:Tt=>Me("dateFormat",Tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})})]})},yt=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:U.notifications.title}),e.jsx("div",{className:"space-y-4",children:Object.entries(kt).map(([Oe,ot])=>{const ht=te[Oe]??Oe;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-900",children:ht})}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!ot,onChange:It=>je(Oe,It.target.checked),className:"sr-only peer"}),e.jsx("div",{className:'w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[""] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600'})]})]},Oe)})})]})}),Gt=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(vn,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:U.security.tipsTitle}),e.jsx("ul",{className:"text-sm text-yellow-700 mt-2 space-y-1",children:U.security.tips.map((Oe,ot)=>e.jsx("li",{children:Oe},ot))})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:U.security.title}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.security.cards.twoFactor.title}),e.jsx("div",{className:"text-sm text-gray-500",children:U.security.cards.twoFactor.description})]}),e.jsx("button",{onClick:ut,disabled:L,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:k?.enabled?M==="tr"?"Devre D Brak":M==="fr"?"Dsactiver":M==="de"?"Deaktivieren":"Disable":U.security.cards.twoFactor.action})]}),ce&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.security.cards.sessionHistory.title}),e.jsx("div",{className:"text-sm text-gray-500",children:U.security.cards.sessionHistory.description})]}),e.jsx("button",{onClick:()=>{try{const Oe=document.getElementById("audit-logs-section");Oe&&Oe.scrollIntoView({behavior:"smooth",block:"start"})}catch(Oe){he.debug("Audit log scroll failed",Oe)}},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:U.security.cards.sessionHistory.action})]}),ce&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.security.cards.activeSessions.title}),e.jsx("div",{className:"text-sm text-gray-500",children:U.security.cards.activeSessions.description})]}),e.jsx("button",{onClick:()=>{y({open:!0,title:M==="tr"?"Oturumlar Sonlandr":M==="fr"?"Terminer les sessions":M==="de"?"Sitzungen beenden":"Terminate Sessions",message:M==="tr"?"Tm cihazlardaki oturumlar sonlandrlsn m? Bu cihazda oturuma devam edebilmeniz iin yeni bir token oluturulacak.":M==="fr"?"Mettre fin  toutes les sessions sur tous les appareils ? Un nouveau jeton sera mis pour continuer ici.":M==="de"?"Alle Sitzungen auf allen Gerten beenden? Fr dieses Gert wird ein neues Token ausgestellt.":"Terminate sessions on all devices? A new token will be issued to continue here.",tone:"info",confirmLabel:M==="tr"?"Evet, Sonlandr":M==="fr"?"Oui, terminer":M==="de"?"Ja, beenden":"Yes, terminate",cancelLabel:M==="tr"?"Vazge":M==="fr"?"Annuler":M==="de"?"Abbrechen":"Cancel",onConfirm:async()=>{try{const Oe=await Rn.terminateAllSessions();if(Oe?.token){Kb(Oe.token);try{await ie()}catch(ot){he.debug("Refresh after terminating sessions failed",ot)}y({open:!0,title:M==="tr"?"Oturumlar Sonlandrld":M==="fr"?"Sessions termines":M==="de"?"Sitzungen beendet":"Sessions terminated",message:M==="tr"?"Dier cihazlardaki oturumlar sonlandrld. Bu cihazda oturuma devam ediyorsunuz.":M==="fr"?"Les autres appareils ont t dconnects. Vous continuez sur cet appareil.":M==="de"?"Andere Gerte wurden abgemeldet. Sie bleiben auf diesem Gert angemeldet.":"Other devices were signed out. You remain signed in here.",tone:"success",cancelLabel:M==="tr"?"Bu cihazdan da k":M==="fr"?"Se dconnecter ici aussi":M==="de"?"Auch hier abmelden":"Sign out here too",onCancel:async()=>{try{await Ne()}catch(ot){he.debug("Logout after terminating sessions failed",ot)}y(ot=>({...ot,open:!1}))},confirmLabel:M==="tr"?"Tamam":"OK",onConfirm:()=>y(ot=>({...ot,open:!1}))})}}catch(Oe){N("Sessions",ia(Oe,"lem baarsz"),"error")}},onCancel:()=>y(Oe=>({...Oe,open:!1}))})},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:U.security.cards.activeSessions.action})]})]})]}),ce&&e.jsx("div",{id:"audit-logs-section",className:"border-t pt-6",children:e.jsx(wT,{})})]}),Lt=()=>{const Oe=async()=>{try{V(!0);const ht=zn();if(he.debug("Export token presence",{hasToken:!!ht}),!ht){N(U.modals.authRequired.title,U.modals.authRequired.message,"error");return}he.debug("Making export data request");const It=await fetch("/api/users/me/export",{method:"GET",headers:{Authorization:`Bearer ${ht}`}});if(he.debug("Export response status",{status:It.status}),!It.ok){if(It.status===401){N(U.modals.sessionExpired.title,U.modals.sessionExpired.message,"error");return}const pt=await It.text();throw he.error("Export failed with response error",{status:It.status,errorText:pt}),new Error(`Export failed: ${It.status} - ${pt}`)}const Tt=await It.blob(),Mt=window.URL.createObjectURL(Tt),Re=document.createElement("a");Re.style.display="none",Re.href=Mt,Re.download=`my-data-${new Date().toISOString().split("T")[0]}.zip`,document.body.appendChild(Re),Re.click(),window.URL.revokeObjectURL(Mt),document.body.removeChild(Re),alert("Data exported successfully!")}catch(ht){he.error("Export error",ht),alert(`Failed to export data: ${ht instanceof Error?ht.message:String(ht)}`)}finally{V(!1)}},ot=async()=>{try{W(!0);const ht=zn();if(!ht){N(U.modals.authRequired.title,U.modals.authRequired.message,"error"),W(!1);return}const It=await fetch("/api/users/me/delete",{method:"POST",headers:{Authorization:`Bearer ${ht}`,"Content-Type":"application/json"}});if(!It.ok){if(It.status===401){N(U.modals.sessionExpired.title,U.modals.sessionExpired.message,"error"),W(!1);return}throw new Error("Account deletion request failed")}const Tt=await It.json();N(U.modals.deleteRequested.title,Tt?.message||U.modals.deleteRequested.message,"success"),H(!1)}catch(ht){he.error("Account deletion error",ht),N(U.modals.deleteFailed.title,U.modals.deleteFailed.message,"error")}finally{W(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:U.privacy.title}),e.jsx("p",{className:"text-gray-600 mb-6",children:U.privacy.gdpr.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Cs,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:U.privacy.gdpr.export.title}),e.jsx("p",{className:"text-sm text-gray-500",children:U.privacy.gdpr.export.description})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:U.privacy.gdpr.export.disclaimer}),e.jsx("button",{onClick:Oe,disabled:F,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:F?"Exporting...":U.privacy.gdpr.export.button})]}),e.jsxs("div",{className:"p-6 border border-red-200 rounded-lg bg-red-50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(vn,{className:"w-6 h-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-800",children:U.privacy.gdpr.delete.title}),e.jsx("p",{className:"text-sm text-red-600",children:U.privacy.gdpr.delete.description})]})]}),e.jsx("p",{className:"text-xs text-red-600 mb-4",children:U.privacy.gdpr.delete.warning}),e.jsx("button",{onClick:()=>H(!0),className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:U.privacy.gdpr.delete.button})]})]})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:U.privacy.gdpr.delete.confirmDialog.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:U.privacy.gdpr.delete.confirmDialog.message}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-sm text-yellow-800",children:U.privacy.gdpr.delete.confirmDialog.retention})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>H(!1),disabled:q,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:U.privacy.gdpr.delete.confirmDialog.cancel}),e.jsx("button",{onClick:ot,disabled:q,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:q?"Processing...":U.privacy.gdpr.delete.confirmDialog.confirm})]})]})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 lg:sticky lg:top-16 lg:z-30",children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Jc,{className:"w-8 h-8 text-blue-600 mr-3"}),U.header.title]}),e.jsx("p",{className:"text-gray-600",children:U.header.subtitle})]}),s&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-orange-600",children:[e.jsx(tm,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:U.header.unsavedChanges})]}),e.jsxs("button",{onClick:Ye,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Qp,{className:"w-4 h-4"}),e.jsx("span",{children:U.header.save})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:e.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200 px-4 sm:px-6 py-3 overflow-x-auto",children:fe.map(Oe=>{const ot=Oe.icon;return e.jsxs("button",{onClick:()=>l(Oe.id),className:`flex items-center space-x-2 px-4 py-2 border-b-2 transition-colors ${n===Oe.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[e.jsx(ot,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm whitespace-nowrap",children:Oe.label})]},Oe.id)})})})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[n==="profile"&&dt(),n==="company"&&mt(),n==="plan"&&Ie&&e.jsx(TT,{tenant:le,currentLanguage:M,text:U}),n==="organization"&&e.jsx(bT,{}),n==="fiscal-periods"&&e.jsx(vT,{}),n==="notifications"&&yt(),n==="security"&&Gt(),n==="privacy"&&Lt()]})}),B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:P==="enable"?M==="tr"?"ki Faktrl Dorulamay Etkinletir":M==="fr"?"Activer lauthentification  deux facteurs":M==="de"?"Zwei-Faktor-Authentifizierung aktivieren":"Enable Two-Factor Authentication":M==="tr"?"ki Faktrl Dorulamay Devre D Brak":M==="fr"?"Dsactiver lauthentification  deux facteurs":M==="de"?"Zwei-Faktor-Authentifizierung deaktivieren":"Disable Two-Factor Authentication"}),P==="enable"&&!X&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:M==="tr"?"Authenticator uygulamanzla QR kodu tarayn veya gizli anahtar girin.":M==="fr"?"Scannez le QR avec votre application dauthentification ou saisissez la cl secrte.":M==="de"?"Scannen Sie den QR-Code mit Ihrer Authenticator-App oder geben Sie den geheimen Schlssel ein.":"Scan the QR with your authenticator app or enter the secret key."}),S?.qrCodeUrl&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("img",{alt:"2FA QR",className:"w-44 h-44",src:`https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${encodeURIComponent(S.qrCodeUrl)}`})}),S?.secret&&e.jsxs("div",{className:"text-xs text-gray-700 bg-gray-50 border border-gray-200 rounded p-2 break-all",children:[M==="tr"?"Gizli Anahtar:":M==="fr"?"Cl secrte :":M==="de"?"Geheimer Schlssel:":"Secret key:"," ",S.secret]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:M==="tr"?"6 Haneli Kod":M==="fr"?"Code  6 chiffres":M==="de"?"6-stelliger Code":"6-digit code"}),e.jsx("input",{inputMode:"numeric",pattern:"[0-9]*",value:D,onChange:Oe=>R(Oe.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"123456"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Ce,disabled:L||(D||"").length!==6,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:L?M==="tr"?"leniyor":"Processing":M==="tr"?"Etkinletir":M==="fr"?"Activer":M==="de"?"Aktivieren":"Enable"}),e.jsx("button",{onClick:Ee,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:M==="tr"?"Vazge":M==="fr"?"Annuler":M==="de"?"Abbrechen":"Cancel"})]})]}),P==="enable"&&X&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-700",children:M==="tr"?"Yedek kodlarnz gvenli bir yerde saklayn. Bu kodlar yalnzca bir kez gsterilir.":M==="fr"?"Conservez vos codes de secours en lieu sr. Ils ne sont affichs quune seule fois.":M==="de"?"Bewahren Sie Ihre Backup-Codes sicher auf. Diese werden nur einmal angezeigt.":"Store your backup codes safely. These are shown only once."}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:X.map((Oe,ot)=>e.jsx("div",{className:"px-2 py-1 bg-gray-50 border border-gray-200 rounded font-mono",children:Oe},ot))}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx("button",{onClick:it,className:"px-3 py-1 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 text-xs",children:M==="tr"?"Tmn Kopyala":M==="fr"?"Tout copier":M==="de"?"Alle kopieren":"Copy All"}),e.jsx("button",{onClick:xt,className:"px-3 py-1 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 text-xs",children:M==="tr"?"ndir (.txt)":M==="fr"?"Tlcharger (.txt)":M==="de"?"Herunterladen (.txt)":"Download (.txt)"}),e.jsx("button",{onClick:jt,disabled:L,className:"px-3 py-1 bg-orange-500 text-white rounded hover:bg-orange-600 disabled:opacity-50 text-xs",children:L?M==="tr"?"leniyor":"":M==="tr"?"Yeniden Olutur":M==="fr"?"Rgnrer":M==="de"?"Neu erzeugen":"Regenerate"})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("button",{onClick:Ee,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:M==="tr"?"Tamam":"OK"})})]}),P==="disable"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:M==="tr"?"2FAy devre d brakmak iin geerli 6 haneli kodu veya bir yedek kodu girin.":M==="fr"?"Saisissez un code  6 chiffres ou un code de secours pour dsactiver 2FA.":M==="de"?"Geben Sie einen gltigen 6-stelligen Code oder einen Backup-Code ein, um 2FA zu deaktivieren.":"Enter a valid 6-digit code or a backup code to disable 2FA."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:M==="tr"?"Kod":"Code"}),e.jsx("input",{value:D,onChange:Oe=>R(Oe.target.value.toUpperCase().slice(0,8)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"123456 veya ABCD1234"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Ce,disabled:L||!(D||"").length,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:L?M==="tr"?"leniyor":"Processing":M==="tr"?"Devre D Brak":M==="fr"?"Dsactiver":M==="de"?"Deaktivieren":"Disable"}),e.jsx("button",{onClick:Ee,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:M==="tr"?"Vazge":M==="fr"?"Annuler":M==="de"?"Abbrechen":"Cancel"})]})]})]})}),e.jsx(Fi,{isOpen:m,onClose:()=>x(!1),title:U.modals.saveSuccess.title,message:U.modals.saveSuccess.message,confirmLabel:Q("common.ok"),tone:"success",autoCloseMs:1800}),e.jsx(Fi,{isOpen:b,onClose:()=>p(!1),title:U.modals.saveError.title,message:U.modals.saveError.message,confirmLabel:Q("common.ok"),tone:"error"}),e.jsx(Fi,{isOpen:v.open,onClose:()=>y(Oe=>({...Oe,open:!1})),title:v.title,message:v.message,confirmLabel:v.confirmLabel||Q("common.ok"),cancelLabel:v.cancelLabel,onConfirm:v.onConfirm,onCancel:v.onCancel,tone:v.tone})]})}const Ep={tr:{title:"Beklenmeyen bir hata olutu",message:a=>`Blm: ${a}. Ltfen sayfay yenileyin veya tekrar deneyin.`,actionLabel:"Sayfay Yenile",defaultSectionLabel:"Uygulama"},en:{title:"An unexpected error occurred",message:a=>`Section: ${a}. Please refresh the page or try again.`,actionLabel:"Refresh Page",defaultSectionLabel:"Application"},fr:{title:"Une erreur inattendue est survenue",message:a=>`Section : ${a}. Veuillez actualiser la page ou ressayer.`,actionLabel:"Actualiser la page",defaultSectionLabel:"Application"},de:{title:"Ein unerwarteter Fehler ist aufgetreten",message:a=>`Bereich: ${a}. Bitte laden Sie die Seite neu oder versuchen Sie es erneut.`,actionLabel:"Seite neu laden",defaultSectionLabel:"Anwendung"}};class IT extends _t.Component{constructor(o){super(o),this.state={hasError:!1,error:null}}static getDerivedStateFromError(o){return{hasError:!0,error:o}}componentDidCatch(o,t){try{console.error(`[ErrorBoundary:${this.props.name||"root"}]`,o,t);const f=new CustomEvent("showToast",{detail:{message:"Bir hata olutu: "+(o?.message||"Bilinmeyen"),tone:"error"}});window.dispatchEvent(f)}catch{}}handleReload=()=>{try{window.location.reload()}catch{}};render(){if(this.state.hasError){const o=this.props.texts??Ep.tr,t=this.props.name||o.defaultSectionLabel;return this.props.fallback||e.jsxs("div",{style:{padding:"32px",maxWidth:640,margin:"40px auto",fontFamily:"system-ui"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:600,marginBottom:"12px"},children:o.title}),e.jsx("p",{style:{color:"#555",marginBottom:"16px"},children:o.message(t)}),e.jsx("pre",{style:{background:"#f8f8f8",padding:"12px",borderRadius:"6px",fontSize:"12px",overflowX:"auto"},children:String(this.state.error?.message||this.state.error||"")}),e.jsx("button",{onClick:this.handleReload,style:{marginTop:"16px",background:"#2563eb",color:"#fff",padding:"10px 18px",borderRadius:"6px",border:"none",cursor:"pointer"},children:o.actionLabel})]})}return this.props.children}}const _f=({texts:a,...o})=>{const{currentLanguage:t}=Vi(),f=a??Ep[t]??Ep.tr;return e.jsx(IT,{...o,texts:f})},my=a=>typeof a=="object"&&a!==null?a:{},MT=()=>No.getToken(),_r=()=>{const a=MT();return a?{"admin-token":a}:{}},hr={login:async(a,o,t)=>(await Xe.post("/admin/login",{username:a,password:o,totp:t})).data,getUsers:async a=>{const o=a?`?tenantId=${encodeURIComponent(a)}`:"";return(await Xe.get(`/admin/users${o}`,{headers:_r()})).data},exportUsersCsv:async a=>{const o=a?`?tenantId=${encodeURIComponent(a)}`:"";return(await Xe.get(`/admin/users/export-csv${o}`,{headers:_r(),responseType:"blob"})).data},getSecurityConfig:async()=>(await Xe.get("/admin/security/config",{headers:_r()})).data,updateAdminCredentials:async a=>(await Xe.post("/admin/security/credentials",a,{headers:_r()})).data,twoFASetup:async()=>(await Xe.post("/admin/security/2fa/setup",{},{headers:_r()})).data,twoFAVerify:async a=>(await Xe.post("/admin/security/2fa/verify",a,{headers:_r()})).data,twoFADisable:async()=>(await Xe.post("/admin/security/2fa/disable",{},{headers:_r()})).data,getTenants:async a=>{const o=new URLSearchParams;a?.status&&o.append("status",a.status),a?.plan&&o.append("plan",a.plan),a?.startFrom&&o.append("startFrom",a.startFrom),a?.startTo&&o.append("startTo",a.startTo);const t=o.toString()?`?${o.toString()}`:"";return(await Xe.get(`/admin/tenants${t}`,{headers:_r()})).data},getUserData:async a=>(await Xe.get(`/admin/user/${a}/data`,{headers:_r()})).data,getTenantData:async a=>(await Xe.get(`/admin/tenant/${a}/data`,{headers:_r()})).data,getTables:async()=>(await Xe.get("/admin/tables",{headers:_r()})).data,getTableData:async(a,o,t,f)=>{const h=new URLSearchParams;return o&&h.append("tenantId",o),t&&h.append("limit",t.toString()),f&&h.append("offset",f.toString()),(await Xe.get(`/admin/table/${a}?${h.toString()}`,{headers:_r()})).data},getRetentionConfig:async()=>(await Xe.get("/admin/retention/config",{headers:_r()})).data,getRetentionStatus:async()=>(await Xe.get("/admin/retention/status",{headers:_r()})).data,getRetentionHistory:async(a,o)=>{const t=new URLSearchParams;return a&&t.append("limit",a.toString()),o&&t.append("offset",o.toString()),(await Xe.get(`/admin/retention/history?${t.toString()}`,{headers:_r()})).data},executeRetentionDryRun:async()=>(await Xe.post("/admin/retention/dry-run",{},{headers:_r()})).data,executeRetention:async()=>(await Xe.post("/admin/retention/execute",{confirm:!0},{headers:_r()})).data,listOrganizations:async()=>(await Xe.get("/admin/organizations",{headers:_r()})).data,getOrganizationMembers:async a=>(await Xe.get(`/admin/organizations/${a}/members`,{headers:_r()})).data,getOrganizationInvites:async a=>(await Xe.get(`/admin/organizations/${a}/invites`,{headers:_r()})).data,updateMemberRole:async(a,o,t)=>(await Xe.patch(`/admin/organizations/${a}/members/${o}/role`,{role:t},{headers:_r()})).data,removeMember:async(a,o)=>(await Xe.delete(`/admin/organizations/${a}/members/${o}`,{headers:_r()})).data,updateUserStatus:async(a,o)=>(await Xe.patch(`/admin/users/${a}/status`,{isActive:o},{headers:_r()})).data,markUserVerified:async a=>(await Xe.post(`/admin/users/${a}/verify`,{},{headers:_r()})).data,updateUserDetails:async(a,o)=>(await Xe.patch(`/admin/users/${a}`,o,{headers:_r()})).data,sendPasswordReset:async a=>(await Xe.post(`/admin/users/${a}/password-reset`,{},{headers:_r()})).data,updateTenantDetails:async(a,o)=>(await Xe.patch(`/admin/tenant/${a}`,o,{headers:_r()})).data,updateTenantSubscription:async(a,o)=>(await Xe.patch(`/admin/tenant/${a}/subscription`,o,{headers:_r()})).data,deleteTenant:async(a,o)=>{try{return(await Xe.patch(`/admin/tenant/${a}/delete`,{confirm:!0,hard:o?.hard??!0,backupBefore:o?.backupBefore??!1},{headers:_r()})).data}catch(t){const f=my(t),h=f.response?.status,d=f.response?.data?.message||f.message;throw new Error(`Silme hatas${h?` (HTTP ${h})`:""}: ${d||"Bilinmeyen"}`)}},deleteUser:async(a,o)=>(await Xe.delete(`/admin/users/${a}`,{headers:_r(),data:{confirm:!0,hard:o?.hard??!1}})).data,getPlanLimits:async()=>(await Xe.get("/admin/plan-limits",{headers:_r()})).data,updatePlanLimits:async(a,o)=>(await Xe.patch(`/admin/plan-limits/${a}`,o,{headers:_r()})).data,getTenantLimits:async a=>(await Xe.get(`/admin/tenant/${a}/limits`,{headers:_r()})).data,updateTenantLimits:async(a,o)=>(await Xe.patch(`/admin/tenant/${a}/limits`,o,{headers:_r()})).data,getTenantOverview:async a=>(await Xe.get(`/admin/tenant/${a}/overview`,{headers:_r()})).data,getTenantSubscriptionRaw:async a=>(await Xe.get(`/admin/tenant/${a}/subscription-raw`,{headers:_r()})).data,getTenantInvoices:async a=>{try{return(await Xe.get(`/admin/tenant/${a}/invoices`,{headers:_r()})).data}catch(o){if(my(o).response?.status===404)return{invoices:[]};throw o}},addUserToTenant:async(a,o)=>(await Xe.post(`/admin/tenant/${a}/users`,o,{headers:_r()})).data,enforceTenantDowngrade:async a=>(await Xe.post(`/admin/tenant/${a}/enforce-downgrade`,{confirm:!0},{headers:_r()})).data},va="/admin/backups",wa=()=>{const a=No.getToken();return{headers:a?{"admin-token":a}:{}}},si={list:async a=>{const o=a?{type:a}:{};return(await Xe.get(va,{params:o,...wa()})).data},listUserBackups:async a=>(await Xe.get(`${va}/user/${a}`,wa())).data,createSystemBackup:async a=>(await Xe.post(`${va}/system`,{description:a},wa())).data,createUserBackup:async(a,o)=>(await Xe.post(`${va}/user/${a}`,{description:o},wa())).data,createTenantBackup:async(a,o)=>(await Xe.post(`${va}/tenant/${a}`,{description:o},wa())).data,restoreSystem:async a=>(await Xe.post(`${va}/restore/system/${a}`,{confirm:!0},wa())).data,restoreUser:async(a,o)=>(await Xe.post(`${va}/restore/user/${a}/${o}`,{confirm:!0},wa())).data,restoreTenant:async(a,o)=>(await Xe.post(`${va}/restore/tenant/${a}/${o}`,{confirm:!0},wa())).data,delete:async a=>(await Xe.delete(`${va}/${a}`,wa())).data,cleanup:async()=>(await Xe.post(`${va}/cleanup`,{},wa())).data,getStatistics:async()=>(await Xe.get(`${va}/statistics`,wa())).data};function RT(){const{t:a}=$t("common"),[o,t]=G.useState([]),[f,h]=G.useState(null),[d,n]=G.useState([]),[l,i]=G.useState(!1),[r,s]=G.useState("all"),[c,u]=G.useState(""),[m,x]=G.useState({show:!1,type:"system"}),[b,p]=G.useState(null),v=P=>{if(P&&typeof P=="object"&&"message"in P){const A=P.message;if(typeof A=="string")return A}return""},y=G.useCallback(async()=>{try{i(!0);const P=r==="all"?await si.list():await si.list(r);t(P)}catch(P){q("error","Backup listesi yklenemedi: "+v(P))}finally{i(!1)}},[r]);G.useEffect(()=>{y(),N(),T()},[r,y]);const N=async()=>{try{const P=await si.getStatistics();h(P)}catch(P){console.error("statistikler yklenemedi:",P)}},T=async()=>{try{const P=await hr.getUsers();n(P)}catch(P){console.error("Kullanclar yklenemedi:",P)}},_=async()=>{try{i(!0),await si.createSystemBackup("Manuel sistem yedei"),q("success","Sistem yedei oluturuldu"),y(),N()}catch(P){q("error","Yedek oluturulamad: "+v(P))}finally{i(!1)}},O=async()=>{if(!c){q("error","Ltfen bir kullanc sein");return}try{i(!0),await si.createUserBackup(c,"Manuel kullanc yedei"),q("success","Kullanc yedei oluturuldu"),y(),N()}catch(P){q("error","Yedek oluturulamad: "+v(P))}finally{i(!1)}},H=async()=>{if(m.backup)try{i(!0),m.type==="system"?(await si.restoreSystem(m.backup.id),q("success","Sistem geri yklendi! Sayfa yenileniyor..."),setTimeout(()=>window.location.reload(),2e3)):m.type==="user"&&(await si.restoreUser(m.backup.entityId,m.backup.id),q("success","Kullanc verileri geri yklendi")),x({show:!1,type:"system"}),y()}catch(P){q("error","Geri ykleme baarsz: "+v(P))}finally{i(!1)}},F=async P=>{if(confirm(a("admin.backups.deleteConfirm","Bu yedei silmek istediinizden emin misiniz?")))try{i(!0),await si.delete(P),q("success","Yedek silindi"),y(),N()}catch(A){q("error","Yedek silinemedi: "+v(A))}finally{i(!1)}},V=async()=>{if(confirm(a("admin.backups.deleteOlderThanConfirm","30 gnden eski tm yedekleri silmek istediinizden emin misiniz?")))try{i(!0);const P=await si.cleanup();q("success",P.message),y(),N()}catch(P){q("error","Temizleme baarsz: "+v(P))}finally{i(!1)}},q=(P,A)=>{p({type:P,text:A}),setTimeout(()=>p(null),5e3)},W=P=>{if(P===0)return"0 Bytes";const A=1024,k=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(P)/Math.log(A));return Math.round(P/Math.pow(A,j)*100)/100+" "+k[j]},B=P=>new Date(P).toLocaleString("tr-TR"),E=P=>{switch(P){case"system":return e.jsx(sm,{className:"h-5 w-5"});case"user":return e.jsx(ds,{className:"h-5 w-5"});case"tenant":return e.jsx(ts,{className:"h-5 w-5"});default:return e.jsx(Bi,{className:"h-5 w-5"})}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Bi,{className:"h-8 w-8"}),"Yedekleme Ynetimi"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Sistem ve kullanc bazl yedeklerinizi ynetin"})]}),b&&e.jsxs("div",{className:`mb-4 p-4 rounded-lg flex items-center gap-2 ${b.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[b.type==="success"?e.jsx($s,{className:"h-5 w-5"}):e.jsx(Tl,{className:"h-5 w-5"}),b.text]}),f&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Yedek"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Sistem Yedekleri"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.systemBackups})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Kullanc Yedekleri"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.userBackups})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Boyut"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[f.totalSizeMB," MB"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Yeni Yedek Olutur"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(sm,{className:"h-5 w-5 text-blue-600"}),"Sistem Yedei"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Tm veritabannn yedeini alr"}),e.jsxs("button",{onClick:_,disabled:l,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"Sistem Yedei Al"]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(ds,{className:"h-5 w-5 text-green-600"}),"Kullanc Yedei"]}),e.jsxs("select",{value:c,onChange:P=>u(P.target.value),className:"w-full mb-3 px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Kullanc Sein"}),d.map(P=>e.jsxs("option",{value:P.id,children:[P.firstName," ",P.lastName," (",P.email,")"]},P.id))]}),e.jsxs("button",{onClick:O,disabled:l||!c,className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"Kullanc Yedei Al"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:V,disabled:l,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg border border-red-200 flex items-center gap-2",children:[e.jsx(Xr,{className:"h-4 w-4"}),"Eski Yedekleri Temizle (30+ gn)"]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtre:"}),["all","system","user","tenant"].map(P=>e.jsx("button",{onClick:()=>s(P),className:`px-3 py-1 rounded-lg text-sm ${r===P?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:P==="all"?"Tm":P==="system"?"Sistem":P==="user"?"Kullanc":"Tenant"},P))]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold",children:["Yedekler (",o.length,")"]})}),l?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Ykleniyor..."}):o.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Henz yedek bulunmuyor"}):e.jsx("div",{className:"divide-y divide-gray-200",children:o.map(P=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${P.type==="system"?"bg-blue-100 text-blue-600":P.type==="user"?"bg-green-100 text-green-600":"bg-purple-100 text-purple-600"}`,children:E(P.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:P.type==="system"?"Sistem Yedei":P.type==="user"?`Kullanc: ${P.entityName}`:`Tenant: ${P.entityName}`}),e.jsx("span",{className:"text-xs text-gray-500",children:W(P.size)})]}),P.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:P.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ui,{className:"h-4 w-4"}),B(P.createdAt)]}),e.jsx("span",{className:"text-xs font-mono",children:P.filename})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("button",{onClick:()=>{let A="system";P.type==="user"?A="user":P.type==="tenant"&&(A="tenant"),x({show:!0,backup:P,type:A})},className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1 text-sm",children:[e.jsx(Zp,{className:"h-4 w-4"}),"Geri Ykle"]}),e.jsxs("button",{onClick:()=>F(P.id),className:"px-3 py-1.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 flex items-center gap-1 text-sm",children:[e.jsx(Xr,{className:"h-4 w-4"}),"Sil"]})]})]})},P.id))})]}),m.show&&m.backup&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(vn,{className:"h-6 w-6 text-yellow-600"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Geri Ykleme Onay"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:m.type==="system"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Dikkat:"})," Tm sistem ",B(m.backup.createdAt)," tarihine geri yklenecek. Bu ilem geri alnamaz!"]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:m.backup.entityName})," kullancsnn verileri"," ",B(m.backup.createdAt)," tarihine geri yklenecek. Dier kullanclar etkilenmeyecek."]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x({show:!1,type:"system"}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ptal"}),e.jsx("button",{onClick:H,disabled:l,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:l?"Geri Ykleniyor...":"Onayla"})]})]})})]})}function zT(){const[a,o]=G.useState(null),[t,f]=G.useState(null),[h,d]=G.useState([]),[n,l]=G.useState(!1),[i,r]=G.useState(!1),[s,c]=G.useState("overview"),[u,m]=G.useState(""),[x,b]=G.useState("");G.useEffect(()=>{p()},[]);const p=async()=>{try{l(!0);const[F,V,q]=await Promise.all([hr.getRetentionConfig(),hr.getRetentionStatus(),hr.getRetentionHistory()]);F.success&&o(F.config),V.success&&f(V),q.success&&d(q.history)}catch(F){const V=F&&typeof F=="object"&&"message"in F?String(F.message||""):"";m("Failed to load retention data: "+V)}finally{l(!1)}},v=async()=>{try{r(!0),m(""),b(""),(await hr.executeRetentionDryRun()).success&&(b("Dry-run completed successfully. Check the output below."),await p())}catch(F){const V=F&&typeof F=="object"&&"message"in F?String(F.message||""):"";m("Dry-run failed: "+V)}finally{r(!1)}},y=async()=>{if(window.confirm(` WARNING: This will permanently delete data!

Are you absolutely sure you want to proceed with live purge?

This action cannot be undone.`))try{r(!0),m(""),b(""),(await hr.executeRetention()).success&&(b("Live purge completed successfully. Data has been permanently deleted."),await p())}catch(V){const q=V&&typeof V=="object"&&"message"in V?String(V.message||""):"";m("Live purge failed: "+q)}finally{r(!1)}},N=F=>new Date(F).toLocaleString("tr-TR"),T=F=>F.legalHold?e.jsx("span",{title:"Legal Hold - Protected",children:e.jsx(zs,{className:"w-5 h-5 text-yellow-600"})}):e.jsx("span",{title:"Active Retention Policy",children:e.jsx(Ui,{className:"w-5 h-5 text-blue-600"})}),_=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"Temizlenebilir Sistem Loglar"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:t?.statistics.eligibleAuditLogs||0})]}),e.jsx(Bi,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-800 text-sm font-medium",children:"Sresi Dolmu irketler"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:t?.statistics.expiredTenants||0})]}),e.jsx(uA,{className:"w-8 h-8 text-orange-600"})]})}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-800 text-sm font-medium",children:"Eski Yedek Dosyalar"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:t?.statistics.expiredBackupFiles||0})]}),e.jsx(Xr,{className:"w-8 h-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-800 text-sm font-medium",children:"Toplam Temizlenebilir"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:t?.statistics.totalEligibleRecords||0})]}),e.jsx(Cm,{className:"w-8 h-8 text-green-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(yv,{className:"w-5 h-5 mr-2"}),"Veri Temizleme lemleri"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:v,disabled:i||n,className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Zr,{className:"w-5 h-5 mr-2"}),i?"alyor...":"Test altr (Dry Run)"]}),e.jsxs("button",{onClick:y,disabled:i||n,className:"flex items-center justify-center px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Xr,{className:"w-5 h-5 mr-2"}),i?"altrlyor...":"Gerek Temizlik Yap"]})]}),e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(vn,{className:"w-5 h-5 text-yellow-600 mr-2 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Gvenlik Kurallar:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsxs("li",{children:[" nce ",e.jsx("strong",{children:"Test altr"})," ile hangi verilerin silineceini grn"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Gerek Temizlik"})," verileri kalc olarak siler - yedeklerinizin olduundan emin olun"]}),e.jsx("li",{children:" Hukuki koruma (muhasebe belgeleri) altndaki kaytlar otomatik korunur"}),e.jsx("li",{children:" Tm ilemler denetim kaydnda loglanr"})]})]})]})})]}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Tl,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-800",children:u})]})}),x&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx($s,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsx("p",{className:"text-green-800",children:x})]})}),t&&e.jsxs("div",{className:"text-sm text-gray-600 text-center",children:["Last updated: ",N(t.lastUpdated)]})]}),O=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(Jc,{className:"w-5 h-5 mr-2"}),"Retention Policies"]}),a&&e.jsx("div",{className:"space-y-4",children:Object.entries(a.retentionPolicies).map(([F,V])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[T(V),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800 capitalize",children:F.replace("_"," ")}),e.jsx("p",{className:"text-gray-600 text-sm",children:V.description}),V.note&&e.jsxs("p",{className:"text-yellow-700 text-sm mt-1",children:[" ",V.note]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:V.retentionPeriod}),e.jsxs("div",{className:"text-xs text-gray-500",children:[V.retentionDays," days"]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:V.categories.map(q=>e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${V.legalHold?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:q},q))})})]},F))}),a&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Global Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${a.globalSettings.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.globalSettings.enabled?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Dry Run Default:"}),e.jsx("span",{className:"ml-2",children:a.globalSettings.dryRunByDefault?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Audit Retention:"}),e.jsx("span",{className:"ml-2",children:a.globalSettings.auditRetention?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Max Records Per Run:"}),e.jsx("span",{className:"ml-2",children:a.globalSettings.maxPurgeRecordsPerRun})]})]})]})]})}),H=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(Vr,{className:"w-5 h-5 mr-2"}),"Retention Job History"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Policy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Records"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(F=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(F.timestamp)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.details.policy}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F.details.category}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsxs("div",{children:["Eligible: ",F.details.eligibleRecords]}),e.jsxs("div",{children:["Purged: ",F.details.purgedRecords]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[F.details.dryRun?e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Dry Run"}):e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Live Purge"}),F.details.errors.length>0&&e.jsx("span",{title:"Had errors",children:e.jsx(vn,{className:"w-4 h-4 text-yellow-600 ml-2"})})]})})]},F.id))})]}),h.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No retention job history found"})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[e.jsx(Bi,{className:"w-8 h-8 mr-3 text-blue-600"}),"Veri Temizleme Ynetimi"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Otomatik veri temizleme ve saklama politikalarn ynetin"})]}),e.jsxs("button",{onClick:p,disabled:n,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 transition-colors",children:[e.jsx(Hc,{className:`w-4 h-4 mr-2 ${n?"animate-spin":""}`}),"Yenile"]})]}),e.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[e.jsx("button",{onClick:()=>c("overview"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${s==="overview"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Genel Bak"}),e.jsx("button",{onClick:()=>c("config"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${s==="config"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Yaplandrma"}),e.jsx("button",{onClick:()=>c("history"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${s==="history"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Gemi"})]}),n&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Hc,{className:"w-6 h-6 animate-spin text-blue-600 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading retention data..."})]}),!n&&e.jsxs(e.Fragment,{children:[s==="overview"&&_(),s==="config"&&O(),s==="history"&&H()]})]})}const LT={free:"Starter",professional:"Pro",enterprise:"Business"},dl=({value:a,onChange:o,label:t})=>{const[f,h]=G.useState(String(a));return G.useEffect(()=>h(String(a)),[a]),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:t}),e.jsx("input",{type:"number",value:f,onChange:d=>h(d.target.value),onBlur:()=>{const d=parseInt(f,10);if(isNaN(d))return h(String(a));o(d)},className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),e.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"-1 = Snrsz"})]})},OT=()=>{const[a,o]=G.useState({}),[t,f]=G.useState(!1),[h,d]=G.useState(""),n=async()=>{try{f(!0);const s=(await hr.getPlanLimits())?.limits||{};o(s)}catch(r){console.error("Plan limitleri alnamad",r)}finally{f(!1)}};G.useEffect(()=>{n()},[]);const l=async(r,s)=>{try{f(!0),await hr.updatePlanLimits(r,s),d("Kaydedildi"),setTimeout(()=>d(""),2e3),n()}catch(c){console.error("Gncelleme baarsz",c)}finally{f(!1)}},i=r=>{const s=a[r];return s?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:LT[r]}),e.jsx("button",{disabled:t,onClick:()=>n(),className:"text-sm text-gray-600 hover:text-gray-900",children:"Yenile"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(dl,{label:"Maks. Kullanc",value:s.maxUsers,onChange:c=>l(r,{maxUsers:c})}),e.jsx(dl,{label:"Maks. Hesap",value:s.maxCustomers,onChange:c=>l(r,{maxCustomers:c})}),e.jsx(dl,{label:"Maks. Tedariki",value:s.maxSuppliers,onChange:c=>l(r,{maxSuppliers:c})}),e.jsx(dl,{label:"Maks. Banka Hesab",value:s.maxBankAccounts,onChange:c=>l(r,{maxBankAccounts:c})}),e.jsx(dl,{label:"Aylk Maks. Fatura",value:s.monthly?.maxInvoices??-1,onChange:c=>l(r,{monthly:{maxInvoices:c}})}),e.jsx(dl,{label:"Aylk Maks. Gider",value:s.monthly?.maxExpenses??-1,onChange:c=>l(r,{monthly:{maxExpenses:c}})})]})]},r):null};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:" Plan Limitleri"}),h&&e.jsx("div",{className:"text-xs text-green-700 bg-green-50 border border-green-200 px-3 py-1 rounded",children:h})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Plan limitlerini burada grntleyebilir ve dzenleyebilirsiniz. Deiiklikler annda geerlidir ve sunucu yeniden balatldnda config/plan-limits.json dosyasndan yklenir."}),t&&e.jsx("div",{className:"text-sm text-gray-500 mb-3",children:"Ykleniyor"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["free","professional","enterprise"].map(i)})]})},FT=()=>No.getToken(),BT=()=>{const a=FT();return a?{"admin-token":a}:{}},Gc={getSettings:async()=>(await Xe.get("/site-settings")).data,updateSettings:async a=>(await Xe.put("/site-settings",a,{headers:BT()})).data};function UT(){const[a,o]=G.useState({enableIndexing:!0}),[t,f]=G.useState(!0),[h,d]=G.useState(!1),[n,l]=G.useState(null);G.useEffect(()=>{i()},[]);const i=async()=>{try{f(!0);const c=await Gc.getSettings();o(c),l(null)}catch(c){console.error("Failed to load site settings:",c);const u=c.response?.data?.message||c.message||"Failed to load settings. Backend may not be ready.";l({type:"error",text:u})}finally{f(!1)}},r=async()=>{try{d(!0),l(null),await Gc.updateSettings(a),l({type:"success",text:"Settings saved successfully!"}),await i();try{window.dispatchEvent(new CustomEvent("siteSettingsUpdated"))}catch{}}catch(c){console.error("Failed to save settings:",c),l({type:"error",text:c.response?.data?.message||"Failed to save settings"})}finally{d(!1)}},s=(c,u)=>{o(m=>({...m,[c]:u}))};return t?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading settings..."})}):e.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Site Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage global SEO metadata and analytics tracking codes"})]}),n&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg border flex items-start gap-3 ${n.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[n.type==="success"?e.jsx(Gp,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}):e.jsx(up,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:n.text})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Duyurular & Bakm Modu"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Duyuru ubuu"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"announcementEnabled",checked:!!a.announcementEnabled,onChange:c=>s("announcementEnabled",c.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"announcementEnabled",className:"text-sm font-medium text-gray-700",children:"Duyuru ubuunu etkinletir"})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-7",children:"Bu mesaj, uygulamann st ksmnda tm kullanclar iin gsterilir."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 ml-7",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duyuru Tipi"}),e.jsxs("select",{value:a.announcementType||"info",onChange:c=>s("announcementType",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"critical",children:"Critical"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duyuru Mesaj"}),e.jsx("textarea",{value:a.announcementMessage||"",onChange:c=>s("announcementMessage",c.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"rn: Cuma 22:00 - 23:00 aras bakm almas yaplacaktr."})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Bakm Modu (Salt Okunur)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"maintenanceModeEnabled",checked:!!a.maintenanceModeEnabled,onChange:c=>s("maintenanceModeEnabled",c.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"maintenanceModeEnabled",className:"text-sm font-medium text-gray-700",children:"Bakm modunu etkinletir (yazma ilemleri engellenir)"})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-7",children:"Etkinletirildiinde, normal kullanclarn oluturma/gncelleme/silme ilemleri geici olarak engellenir. Ynetici paneli aktr."}),e.jsxs("div",{className:"ml-7",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bakm Mesaj"}),e.jsx("textarea",{value:a.maintenanceMessage||"",onChange:c=>s("maintenanceMessage",c.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"rn: Sistem bakmda, ltfen bir sre sonra tekrar deneyin."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" SEO Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Site Title"}),e.jsx("input",{type:"text",value:a.defaultMetaTitle||"",onChange:c=>s("defaultMetaTitle",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. Comptario - Accounting Dashboard"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This will be used as the default page title when individual pages don't specify one"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Meta Description"}),e.jsx("textarea",{value:a.defaultMetaDescription||"",onChange:c=>s("defaultMetaDescription",c.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"A brief description of your site..."}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"160 characters or less recommended for optimal display in search results"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Open Graph Image URL"}),e.jsx("input",{type:"url",value:a.defaultOgImageUrl||"",onChange:c=>s("defaultOgImageUrl",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/og-image.jpg"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Image shown when your site is shared on social media (1200x630px recommended)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Canonical Base URL"}),e.jsx("input",{type:"url",value:a.canonicalBaseUrl||"",onChange:c=>s("canonicalBaseUrl",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://yoursite.com"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Your site's primary domain (used for canonical URLs)"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsx("input",{type:"checkbox",id:"enableIndexing",checked:a.enableIndexing??!0,onChange:c=>s("enableIndexing",c.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"enableIndexing",className:"text-sm font-medium text-gray-700",children:"Allow search engines to index this site"})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-7",children:"If unchecked, a noindex meta tag will be added to all pages"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Analytics & Tracking"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Google Analytics (GA4) Measurement ID"}),e.jsx("input",{type:"text",value:a.googleAnalyticsId||"",onChange:c=>s("googleAnalyticsId",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"G-XXXXXXXXXX"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Find this in your Google Analytics 4 property settings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Google Tag Manager ID"}),e.jsx("input",{type:"text",value:a.googleTagManagerId||"",onChange:c=>s("googleTagManagerId",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"GTM-XXXXXXX"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Google Tag Manager container ID from your GTM account"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pinterest Tag ID"}),e.jsx("input",{type:"text",value:a.pinterestTagId||"",onChange:c=>s("pinterestTagId",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"1234567890123"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Pinterest Tag ID for conversion tracking"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta/Facebook Pixel ID"}),e.jsx("input",{type:"text",value:a.metaPixelId||"",onChange:c=>s("metaPixelId",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"123456789012345"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Facebook Pixel ID for ads tracking and conversion optimization"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Insight Tag ID"}),e.jsx("input",{type:"text",value:a.linkedinInsightTagId||"",onChange:c=>s("linkedinInsightTagId",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"123456"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"LinkedIn Insight Tag Partner ID for B2B analytics"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:" Advanced HTML Injection"}),e.jsxs("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-md text-sm text-amber-800",children:[e.jsx("strong",{children:" Warning:"})," Only add code from trusted sources. Invalid HTML can break your site."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom <head> HTML"}),e.jsx("textarea",{value:a.customHeadHtml||"",onChange:c=>s("customHeadHtml",c.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-xs",placeholder:"<script>...<\/script> or <link>...</link>"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Raw HTML injected into <head> section (e.g., verification tags, custom scripts)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom <body> Start HTML"}),e.jsx("textarea",{value:a.customBodyStartHtml||"",onChange:c=>s("customBodyStartHtml",c.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-xs",placeholder:"<noscript>...</noscript> or <div>...</div>"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Injected right after opening <body> tag (e.g., GTM noscript, body-level scripts)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom <body> End HTML"}),e.jsx("textarea",{value:a.customBodyEndHtml||"",onChange:c=>s("customBodyEndHtml",c.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-xs",placeholder:"<script>...<\/script>"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Injected right before closing </body> tag (e.g., analytics, chat widgets)"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:r,disabled:h,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Qp,{className:"h-4 w-4"}),h?"Saving...":"Save Settings"]})})]})]})}const VT=()=>{const[a,o]=G.useState([]),[t,f]=G.useState(""),[h,d]=G.useState(""),[n,l]=G.useState(null),[i,r]=G.useState(!1),[s,c]=G.useState(""),[u,m]=G.useState(""),[x,b]=G.useState(!1),[p,v]=G.useState({}),[y,N]=G.useState([]),[T,_]=G.useState([]),[O,H]=G.useState(!1),[F,V]=G.useState(null),[q,W]=G.useState(!1),[B,E]=G.useState(!1),P=G.useRef(""),A=ue=>{if(!ue)return"STARTER";const ze=String(ue).toLowerCase();return ze.includes("enterprise")||ze==="business"?"BUSINESS":ze.includes("professional")||ze==="pro"?"PRO":"STARTER"},k=ue=>{const ze=String(ue).toUpperCase();return ze==="BUSINESS"?"enterprise":ze==="PRO"?"professional":"basic"};G.useEffect(()=>{(async()=>{try{r(!0);const ze=await hr.getTenants();o(Array.isArray(ze)?ze:[])}catch(ze){const tt=ze?.response?.status;c(tt===401?"Admin girii gerekli. Ltfen admin panelde oturum an.":"irket listesi alnamad")}finally{r(!1)}})()},[]);const j=G.useMemo(()=>{const ue=t.trim().toLowerCase();return ue?a.filter(ze=>(ze.companyName||ze.name||"").toLowerCase().includes(ue)||A(ze.subscriptionPlan).toLowerCase().includes(ue)):a},[a,t]),S=async ue=>{if(ue)try{r(!0);const ze=await hr.getTenantOverview(ue);if(P.current!==ue)return;l(ze),v(ze?.limits?.overrides??{}),N([]);try{const tt=await hr.getTenantSubscriptionRaw(ue);if(P.current!==ue)return;V(tt)}catch{V(null)}try{const tt=await hr.getTenantInvoices(ue);if(P.current!==ue)return;if(Array.isArray(tt?.invoices)&&tt.invoices.length>0)_(tt.invoices);else try{const kt=!!zn(),we=Yu();if(kt&&we?.id===ue){const st=await im(ue);if(P.current!==ue)return;_(Array.isArray(st?.invoices)?st.invoices:[])}else _([])}catch{_([])}}catch{try{const kt=!!zn(),we=Yu();if(kt&&we?.id===ue){const st=await im(ue);if(P.current!==ue)return;_(Array.isArray(st?.invoices)?st.invoices:[])}else _([])}catch{_([])}}}catch(ze){const tt=ze?.response?.status,kt=ze?.config?.url||ze?.response?.config?.url;typeof window<"u"&&console.error("Admin tenant overview error:",{status:tt,url:kt,data:ze?.response?.data}),c(tt===401?"Admin girii gerekli. Ltfen admin panelde oturum an.":`zet alnamad${tt?` (HTTP ${tt})`:""}`)}finally{P.current===ue&&r(!1)}};G.useEffect(()=>{P.current=h,l(null),_([]),V(null),c(""),m(""),h&&S(h)},[h]);const C=n?.tenant,D=n?.limits,R=n?.usage,L=n?.users||[],Y=n?.invites||[],X=Math.max(0,Number(C?.requiredUserReduction??0)),ae=Number(D?.effective?.maxUsers??0),$=Math.max(0,Number(R?.users??0)-Math.max(0,ae)),Q=Math.max(X,$),z=C?.downgradePendingUntil?String(C.downgradePendingUntil):"",M=z?new Date(z).getTime():0,U=Date.now(),te=M>U?Math.ceil((M-U)/1e3):0,[ie,se]=G.useState({email:"",firstName:"",lastName:"",role:"user",password:"",autoPassword:!0,activate:!0}),[le,Ne]=G.useState(""),ke=async()=>{if(h){if(!ie.email){c("E-posta gerekli");return}try{r(!0),c(""),m(""),Ne("");const ue={email:ie.email,firstName:ie.firstName||void 0,lastName:ie.lastName||void 0,role:ie.role||void 0,activate:ie.activate,autoPassword:ie.autoPassword};!ie.autoPassword&&ie.password&&(ue.password=ie.password);const ze=await hr.addUserToTenant(h,ue);ze?.tempPassword&&Ne(ze.tempPassword),m("Kullanc eklendi/gncellendi"),setTimeout(()=>m(""),2e3),await S(h),se({email:"",firstName:"",lastName:"",role:"user",password:"",autoPassword:!0,activate:!0})}catch(ue){c(ue?.message||"Kullanc ekleme baarsz")}finally{r(!1)}}},[Z,ce]=G.useState(""),[ve,De]=G.useState(""),[Ae,Ie]=G.useState("");G.useEffect(()=>{C&&(ce(C.companyName||C.name||""),De(A(C.subscriptionPlan)),Ie(C.status||"trial"))},[C?.id]);const Ue=async()=>{if(h)try{r(!0),await hr.updateTenantDetails(h,{companyName:Z}),await hr.updateTenantSubscription(h,{plan:k(ve),status:Ae}),m("irket bilgileri gncellendi"),setTimeout(()=>m(""),2e3),await S(h)}catch{c("irket bilgileri gncellenemedi")}finally{r(!1)}},[Ge,Le]=G.useState({}),[at,ut]=G.useState(new Set),Ce=ue=>{Le(ze=>({...ze,[ue.id]:{firstName:ue.firstName,lastName:ue.lastName,email:ue.email,role:ue.role}}))},it=ue=>{Le(ze=>{const tt={...ze};return delete tt[ue],tt})},xt=(ue,ze,tt)=>{Le(kt=>({...kt,[ue]:{...kt[ue],[ze]:tt}}))},jt=async ue=>{const ze=Ge[ue];if(ze)try{r(!0),await hr.updateUserDetails(ue,ze),m("Kullanc gncellendi"),setTimeout(()=>m(""),2e3),await S(h),it(ue)}catch{c("Kullanc gncellenemedi")}finally{r(!1)}},Ee=ue=>{v(ze=>{const tt={...ze,...ue};return ue.monthly&&(tt.monthly={...ze.monthly||{},...ue.monthly}),tt})},xe=ue=>{if(N(ze=>ze.includes(ue)?ze:[...ze,ue]),ue.startsWith("monthly.")){const[,ze]=ue.split(".");v(tt=>{const kt={...tt.monthly||{}};ze&&ze in kt&&delete kt[ze];const we={...tt};return Object.keys(kt).length>0?we.monthly=kt:delete we.monthly,we});return}v(ze=>{const tt={...ze};return ue in tt&&delete tt[ue],tt})},Be=async()=>{if(h)try{r(!0);const ue={...p};y.length&&(ue.__clear=y),await hr.updateTenantLimits(h,ue),m("Limitler kaydedildi"),setTimeout(()=>m(""),2e3),await S(h)}catch{c("Limitleri kaydetme baarsz")}finally{r(!1)}},$e=async()=>{if(h)try{r(!0),await hr.updateTenantLimits(h,{__clearAll:!0}),v({}),N([]),m("Overridelar temizlendi"),setTimeout(()=>m(""),2e3),await S(h)}catch{c("Temizleme baarsz")}finally{r(!1)}},ye=async(ue,ze)=>{try{r(!0),await hr.updateUserStatus(ue,!ze),m(ze?"Kullanc pasifletirildi":"Kullanc aktifletirildi"),setTimeout(()=>m(""),2e3),await S(h)}catch{c("Kullanc durumu deitirilemedi")}finally{r(!1)}},oe=async ue=>{try{r(!0),await hr.sendPasswordReset(ue),m("ifre sfrlama e-postas gnderildi (simlasyon)"),setTimeout(()=>m(""),2e3)}catch{c("ifre sfrlama gnderilemedi")}finally{r(!1)}},me=async()=>{if(h)try{b(!0);const ue=await hr.exportUsersCsv(h),ze=window.URL.createObjectURL(ue),tt=document.createElement("a"),kt=(C?.companyName||C?.name||h||"users").toString().replace(/[^a-zA-Z0-9_-]+/g,"_").slice(0,50);tt.href=ze,tt.download=`kullanicilar_${kt}.csv`,document.body.appendChild(tt),tt.click(),tt.remove(),window.URL.revokeObjectURL(ze)}catch{c("CSV da aktarma baarsz")}finally{b(!1)}};return e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-full md:w-72 bg-white border border-gray-200 rounded-lg p-3 h-fit",children:[e.jsx("div",{className:"mb-2",children:e.jsx("input",{value:t,onChange:ue=>f(ue.target.value),placeholder:"irket ara",className:"w-full px-3 py-2 border border-gray-300 rounded"})}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto divide-y",children:j.map(ue=>e.jsxs("button",{onClick:()=>d(ue.id),className:`w-full text-left px-2 py-2 hover:bg-gray-50 ${h===ue.id?"bg-gray-100":""}`,children:[e.jsx("div",{className:"font-medium text-sm",children:ue.companyName||ue.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[A(ue.subscriptionPlan),"  ",ue.status]})]},ue.id))})]}),e.jsxs("div",{className:"flex-1 bg-white border border-gray-200 rounded-lg p-4",children:[h?i&&!n?e.jsx("div",{className:"text-sm text-gray-600",children:"Ykleniyor"}):n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:[e.jsx("input",{value:Z,onChange:ue=>ce(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded w-64",placeholder:"irket ad"}),e.jsxs("select",{value:ve,onChange:ue=>De(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"STARTER",children:"STARTER"}),e.jsx("option",{value:"PRO",children:"PRO"}),e.jsx("option",{value:"BUSINESS",children:"BUSINESS"})]}),e.jsxs("select",{value:Ae,onChange:ue=>Ie(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"active",children:"active"}),e.jsx("option",{value:"trial",children:"trial"}),e.jsx("option",{value:"suspended",children:"suspended"}),e.jsx("option",{value:"expired",children:"expired"})]}),e.jsx("button",{onClick:Ue,className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Kaydet"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Plan: ",A(C?.subscriptionPlan),"  Durum: ",C?.status]})]}),u&&e.jsx("div",{className:"text-xs text-green-700 bg-green-50 border border-green-200 px-3 py-1 rounded",children:u})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3",children:[e.jsx(ul,{title:"Kullanc",value:R?.users,max:D?.effective?.maxUsers}),e.jsx(ul,{title:"Hesap",value:R?.customers,max:D?.effective?.maxCustomers}),e.jsx(ul,{title:"Tedariki",value:R?.suppliers,max:D?.effective?.maxSuppliers}),e.jsx(ul,{title:"Banka",value:R?.bankAccounts,max:D?.effective?.maxBankAccounts}),e.jsx(ul,{title:"Fatura (Ay)",value:R?.monthly?.invoices,max:D?.effective?.monthly?.maxInvoices}),e.jsx(ul,{title:"Gider (Ay)",value:R?.monthly?.expenses,max:D?.effective?.monthly?.maxExpenses})]}),Q>0&&e.jsxs("div",{className:"border border-amber-300 bg-amber-50 text-amber-800 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Plan drme uyars:"})," ","Bu irkette aktif kullanc says etkili limitin zerinde."]}),e.jsxs("div",{className:"text-xs mt-1 text-amber-900",children:["Pasifletirmeniz gereken kullanc says: ",e.jsx("span",{className:"font-semibold",children:Q}),M?e.jsxs(e.Fragment,{children:[" "," Son tarih: ",e.jsx("span",{className:"font-mono",children:new Date(M).toLocaleString()}),te>0&&e.jsxs("span",{children:["  Kalan: ",qT(te)]})]}):null]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1.5 text-xs rounded bg-amber-600 text-white hover:bg-amber-700 disabled:opacity-50",disabled:B||!h,onClick:async()=>{if(!(!h||!window.confirm("Fazla kullanclar rastgele pasifletirmek istediinize emin misiniz? (tenant_admin/super_admin hari)")))try{E(!0);const ze=await hr.enforceTenantDowngrade(h);m(`Uyguland: ${ze?.enforced??0}`),setTimeout(()=>m(""),2e3),await S(h)}catch{c("Uygulama baarsz")}finally{E(!1)}},children:B?"Uygulanyor":"Fazlay Otomatik Pasifletir"}),e.jsx("span",{className:"text-[11px] text-amber-900",children:"Alternatif: Aadaki listeden kullanclar tek tek pasifletirin."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsx(Pf,{title:"Stripe Abonelik zeti",children:F?e.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"subscriptionId:"})," ",F.subscriptionId||""]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"status:"})," ",F.status||""]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"interval:"})," ",F.interval||""]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"plan (remote):"})," ",String(F.plan||"").toUpperCase()||""]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"baseIncluded:"})," ",F.baseIncluded??""]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"addonQty:"})," ",F.addonQty??0]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"computedSeats (remote):"})," ",e.jsx("span",{className:"font-semibold",children:F.computedSeats??""})]}),e.jsxs("div",{className:"mt-2 border-t pt-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"stripeCustomerId:"})," ",n?.tenant?.stripeCustomerId||""]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"stripeSubscriptionId:"})," ",n?.tenant?.stripeSubscriptionId||""]})]})]}):e.jsx("div",{className:"text-xs text-gray-500",children:"Stripe abonelik bilgisi alnamad."})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Pf,{title:"Plan Varsaylanlar",children:e.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(D?.default,null,2)})}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-medium",children:"Override"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:$e,className:"px-2 py-1 text-xs border rounded",children:"Overridelar Temizle"}),e.jsx("button",{onClick:Be,className:"px-2 py-1 text-xs bg-blue-600 text-white rounded",children:"Kaydet"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(ml,{label:"Maks. Kullanc",value:p.maxUsers,onChange:ue=>Ee({maxUsers:ue}),onClear:()=>xe("maxUsers")}),e.jsx(ml,{label:"Maks. Hesap",value:p.maxCustomers,onChange:ue=>Ee({maxCustomers:ue}),onClear:()=>xe("maxCustomers")}),e.jsx(ml,{label:"Maks. Tedariki",value:p.maxSuppliers,onChange:ue=>Ee({maxSuppliers:ue}),onClear:()=>xe("maxSuppliers")}),e.jsx(ml,{label:"Maks. Banka Hesab",value:p.maxBankAccounts,onChange:ue=>Ee({maxBankAccounts:ue}),onClear:()=>xe("maxBankAccounts")}),e.jsx(ml,{label:"Aylk Maks. Fatura",value:p.monthly?.maxInvoices,onChange:ue=>Ee({monthly:{maxInvoices:ue}}),onClear:()=>xe("monthly.maxInvoices")}),e.jsx(ml,{label:"Aylk Maks. Gider",value:p.monthly?.maxExpenses,onChange:ue=>Ee({monthly:{maxExpenses:ue}}),onClear:()=>xe("monthly.maxExpenses")})]})]}),e.jsx(Pf,{title:"Efektif",children:e.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(D?.effective,null,2)})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"px-3 py-2 border-b font-medium flex items-center justify-between",children:[e.jsx("span",{children:"Kullanclar"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:me,disabled:x||!h,className:"px-2 py-1 text-xs border rounded hover:bg-gray-50 disabled:opacity-50",children:x?"ndiriliyor":"CSV ndir"}),le&&e.jsxs("div",{className:"text-xs text-orange-700 bg-orange-50 border border-orange-200 px-2 py-1 rounded",children:["Geici ifre: ",e.jsx("span",{className:"font-mono font-semibold",children:le})]})]})]}),e.jsx("div",{className:"max-h-[40vh] overflow-y-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:e.jsx("input",{type:"checkbox",checked:L.length>0&&at.size>0&&L.every(ue=>at.has(ue.id)),onChange:ue=>{const ze=new Set;ue.target.checked&&L.forEach(tt=>ze.add(tt.id)),ut(ze)}})}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Ad Soyad"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"E-posta"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Rol"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Durum"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"lem"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-t bg-gray-50/60",children:[e.jsx("td",{className:"px-3 py-2"}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:ie.firstName,onChange:ue=>se(ze=>({...ze,firstName:ue.target.value})),className:"px-2 py-1 border border-gray-300 rounded w-28",placeholder:"Ad"}),e.jsx("input",{value:ie.lastName,onChange:ue=>se(ze=>({...ze,lastName:ue.target.value})),className:"px-2 py-1 border border-gray-300 rounded w-28",placeholder:"Soyad"})]})}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("input",{value:ie.email,onChange:ue=>se(ze=>({...ze,email:ue.target.value})),className:"px-2 py-1 border border-gray-300 rounded w-60",placeholder:"email@ornek.com"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsxs("label",{className:"text-[11px] text-gray-600 flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:ie.autoPassword,onChange:ue=>se(ze=>({...ze,autoPassword:ue.target.checked}))}),"Otomatik ifre"]}),!ie.autoPassword&&e.jsx("input",{value:ie.password,onChange:ue=>se(ze=>({...ze,password:ue.target.value})),className:"px-2 py-1 border border-gray-300 rounded w-40",placeholder:"Parola (>=8)"})]})]}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("select",{value:ie.role,onChange:ue=>se(ze=>({...ze,role:ue.target.value})),className:"px-2 py-1 border border-gray-300 rounded",children:[e.jsx("option",{value:"user",children:"user"}),e.jsx("option",{value:"accountant",children:"accountant"}),e.jsx("option",{value:"tenant_admin",children:"tenant_admin"}),e.jsx("option",{value:"super_admin",children:"super_admin"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("label",{className:"text-xs flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:ie.activate,onChange:ue=>se(ze=>({...ze,activate:ue.target.checked}))}),"Aktif"]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("button",{onClick:ke,className:"px-2 py-1 text-xs bg-green-600 text-white rounded",children:"Ekle"})})]}),L.map(ue=>{const ze=Ge[ue.id];return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:at.has(ue.id),onChange:tt=>{ut(kt=>{const we=new Set(kt);return tt.target.checked?we.add(ue.id):we.delete(ue.id),we})}})}),e.jsx("td",{className:"px-3 py-2",children:ze?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:ze.firstName||"",onChange:tt=>xt(ue.id,"firstName",tt.target.value),className:"px-2 py-1 border border-gray-300 rounded w-28",placeholder:"Ad"}),e.jsx("input",{value:ze.lastName||"",onChange:tt=>xt(ue.id,"lastName",tt.target.value),className:"px-2 py-1 border border-gray-300 rounded w-28",placeholder:"Soyad"})]}):e.jsxs(e.Fragment,{children:[ue.firstName," ",ue.lastName]})}),e.jsx("td",{className:"px-3 py-2",children:ze?e.jsx("input",{value:ze.email||"",onChange:tt=>xt(ue.id,"email",tt.target.value),className:"px-2 py-1 border border-gray-300 rounded w-60"}):ue.email}),e.jsx("td",{className:"px-3 py-2",children:ze?e.jsxs("select",{value:ze.role||"user",onChange:tt=>xt(ue.id,"role",tt.target.value),className:"px-2 py-1 border border-gray-300 rounded",children:[e.jsx("option",{value:"user",children:"user"}),e.jsx("option",{value:"accountant",children:"accountant"}),e.jsx("option",{value:"tenant_admin",children:"tenant_admin"}),e.jsx("option",{value:"super_admin",children:"super_admin"})]}):ue.role}),e.jsx("td",{className:"px-3 py-2",children:ue.isActive?"Aktif":"Pasif"}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ze?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>jt(ue.id),className:"px-2 py-1 text-xs bg-blue-600 text-white rounded",children:"Kaydet"}),e.jsx("button",{onClick:()=>it(ue.id),className:"px-2 py-1 text-xs border rounded",children:"ptal"})]}):e.jsx("button",{onClick:()=>Ce(ue),className:"px-2 py-1 text-xs border rounded",children:"Dzenle"}),e.jsx("button",{onClick:()=>ye(ue.id,ue.isActive),className:`px-2 py-1 text-xs rounded ${ue.isActive?"bg-red-600 text-white":"bg-green-600 text-white"}`,children:ue.isActive?"Pasifletir":"Aktifletir"}),e.jsx("button",{onClick:()=>oe(ue.id),className:"px-2 py-1 text-xs border rounded",children:"ifre Sfrla"})]})})]},ue.id)})]})]})}),at.size>0&&e.jsxs("div",{className:"px-3 py-2 border-t bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-700",children:["Seili: ",e.jsx("span",{className:"font-semibold",children:at.size})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1.5 text-xs rounded bg-red-600 text-white hover:bg-red-700",onClick:async()=>{const ue=L.filter(tt=>at.has(tt.id)&&tt.isActive);if(ue.length===0){c("Seilenlerde aktif kullanc yok");return}if(window.confirm(`${ue.length} kullanc pasifletirilsin mi?`))try{r(!0);for(const tt of ue)await hr.updateUserStatus(tt.id,!1);m(`${ue.length} kullanc pasifletirildi`),setTimeout(()=>m(""),2e3),ut(new Set),await S(h)}catch{c("Toplu pasifletirme baarsz")}finally{r(!1)}},children:"Seilenleri Pasifletir"}),e.jsx("button",{className:"px-3 py-1.5 text-xs rounded border",onClick:()=>ut(new Set),children:"Seimi Temizle"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"px-3 py-2 border-b font-medium flex items-center justify-between",children:[e.jsx("span",{children:"Davetler"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h&&S(h),className:"px-2 py-1 text-xs border rounded",children:"Yenile"}),Y.length>8&&e.jsx("button",{onClick:()=>W(ue=>!ue),className:"px-2 py-1 text-xs bg-indigo-600 text-white rounded",children:q?"Daralt":"Tm"})]})]}),Y.length===0?e.jsx("div",{className:"p-3 text-sm text-gray-600",children:"Grntlenecek davet yok."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"E-posta"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Rol"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Durum"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Oluturulma"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Son Tarih"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Organizasyon"})]})}),e.jsx("tbody",{children:(q?Y:Y.slice(0,8)).map(ue=>{const ze=ue.createdAt?new Date(ue.createdAt):null,tt=ue.expiresAt?new Date(ue.expiresAt):null,st=(ue.acceptedAt?new Date(ue.acceptedAt):null)?"Kabul edildi":tt&&tt<new Date?"Sresi doldu":"Beklemede",wt=st==="Kabul edildi"?"bg-green-50 text-green-700 border border-green-200":st==="Beklemede"?"bg-amber-50 text-amber-700 border border-amber-200":"bg-red-50 text-red-700 border border-red-200";return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-3 py-2",children:ue.email}),e.jsx("td",{className:"px-3 py-2",children:ue.role||"MEMBER"}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:`inline-flex items-center text-[10px] px-2 py-0.5 rounded-full ${wt}`,children:st})}),e.jsx("td",{className:"px-3 py-2",children:ze?ze.toLocaleString():""}),e.jsx("td",{className:"px-3 py-2",children:tt?tt.toLocaleString():""}),e.jsx("td",{className:"px-3 py-2",children:ue.organizationName||""})]},ue.id)})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"px-3 py-2 border-b font-medium",children:"Fatura Gemii"}),e.jsx("div",{className:"overflow-x-auto",children:T.length===0?e.jsxs("div",{className:"p-3 text-sm text-gray-600 space-y-2",children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Fatura bulunamad"}),e.jsx("div",{children:"Olas nedenler:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-xs",children:[e.jsx("li",{children:"Henz Stripe hesap oluturulmad (ilk upgrade / deme ilemi yaplmad)."}),e.jsx("li",{children:"Aktif abonelik yok: subscription plan test veya balang aamasnda olabilir."}),e.jsx("li",{children:"Test modunda hi fatura kesilmedi; yalnzca proration olumu olabilir."}),e.jsx("li",{children:"Stripe API'den bo dnd; dashboarddan manuel kontrol edin."})]}),e.jsxs("div",{className:"text-xs mt-2 border-t pt-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"stripeCustomerId:"})," ",n?.tenant?.stripeCustomerId||""]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"stripeSubscriptionId:"})," ",n?.tenant?.stripeSubscriptionId||""]})]})]}):e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Numara"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Tarih"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Tutar"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Durum"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Balantlar"})]})}),e.jsx("tbody",{children:(O?T:T.slice(0,8)).map(ue=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-3 py-2",children:ue.number||ue.id}),e.jsx("td",{className:"px-3 py-2",children:ue.created?new Date(ue.created).toLocaleDateString():"-"}),e.jsx("td",{className:"px-3 py-2",children:typeof ue.total=="number"?`${(ue.total/100).toLocaleString(void 0,{minimumFractionDigits:2})} ${String(ue.currency||"").toUpperCase()}`:"-"}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:(()=>{const ze=String(ue.status||"").toLowerCase();return ze==="paid"?"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full bg-green-50 text-green-700 border border-green-200":ze==="open"||ze==="draft"?"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full bg-amber-50 text-amber-700 border border-amber-200":ze==="uncollectible"||ze==="void"||ze==="unpaid"?"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full bg-red-50 text-red-700 border border-red-200":"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full bg-gray-50 text-gray-700 border border-gray-200"})(),children:(ue.status||(ue.paid?"paid":"-")).toUpperCase()})}),e.jsxs("td",{className:"px-3 py-2 space-x-2",children:[ue.hostedInvoiceUrl&&e.jsx("a",{href:ue.hostedInvoiceUrl,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:"Grntle"}),ue.pdf&&e.jsx("a",{href:ue.pdf,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:"PDF"})]})]},ue.id))})]})}),T.length>8&&e.jsx("div",{className:"p-3 border-t flex justify-center",children:e.jsx("button",{onClick:()=>H(ue=>!ue),className:"px-4 py-1 text-xs rounded bg-indigo-600 text-white hover:bg-indigo-700",children:O?"Daralt":"Tm"})})]})]}):null:e.jsx("div",{className:"text-sm text-gray-600",children:"Soldan bir irket sein"}),s&&e.jsx("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 text-red-700 text-sm",children:s})]})]})},Pf=({title:a,children:o})=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[e.jsx("div",{className:"font-medium mb-2",children:a}),o]}),ul=({title:a,value:o,max:t})=>{const f=typeof t=="number"?t<0?"":t:void 0;return e.jsxs("div",{className:"border rounded p-3 text-center",children:[e.jsxs("div",{className:"text-xl font-semibold",children:[o??0,f!==void 0?` / ${f}`:""]}),e.jsx("div",{className:"text-xs text-gray-600",children:a})]})},ml=({label:a,value:o,onChange:t,onClear:f})=>{const[h,d]=G.useState(o===void 0?"":String(o));return G.useEffect(()=>{d(o===void 0?"":String(o))},[o]),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:a}),e.jsx("input",{type:"number",value:h,onChange:n=>d(n.target.value),onBlur:()=>{if(h==="")return;const n=parseInt(h,10);if(isNaN(n)){d(o===void 0?"":String(o));return}t(n)},placeholder:"Bo = varsaylan",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"}),e.jsx("div",{className:"mt-1",children:e.jsx("button",{onClick:f,className:"text-xs text-gray-600 underline",children:"Temizle"})})]})};function qT(a){const o=Math.floor(a/86400),t=Math.floor(a%86400/3600),f=Math.floor(a%3600/60),h=a%60,d=[];return o&&d.push(`${o}g`),t&&d.push(`${t}s`),f&&d.push(`${f}d`),h&&d.length===0&&d.push(`${h}sn`),d.join(" ")}const $T=()=>{const{t:a,i18n:o}=$t("status"),t=[{key:"api",icon:e.jsx(Hx,{className:"h-5 w-5 text-emerald-600"})},{key:"database",icon:e.jsx(Bi,{className:"h-5 w-5 text-emerald-600"})},{key:"email",icon:e.jsx(Hs,{className:"h-5 w-5 text-emerald-600"})},{key:"pdf",icon:e.jsx(Fr,{className:"h-5 w-5 text-emerald-600"})},{key:"storage",icon:e.jsx(Hx,{className:"h-5 w-5 text-emerald-600"})}];function f(){return{components:{api:a("components.api"),database:a("components.database"),email:a("components.email"),pdf:a("components.pdf"),storage:a("components.storage")},status:{operational:a("status.operational")}}}const h=f(),d=new Date().toLocaleString(o.language||void 0);return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("header",{className:"bg-white border-b border-slate-200",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:a("title")}),e.jsx("p",{className:"text-slate-600 mt-1",children:a("subtitle")}),e.jsxs("div",{className:"mt-4 inline-flex items-center space-x-2 rounded-full bg-emerald-50 px-3 py-1 border border-emerald-200",children:[e.jsx(Gp,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{className:"text-sm font-medium text-emerald-700",children:a("allOperational")})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:a("lastUpdated",{time:d})})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-8 space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Bileenler"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-md border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[n.icon,e.jsx("span",{className:"text-slate-800 font-medium",children:h.components[n.key]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"h-2.5 w-2.5 inline-flex rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm text-emerald-700",children:h.status.operational})]})]},n.key))})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-2",children:a("incidents.title")}),e.jsxs("div",{className:"flex items-center space-x-3 text-slate-600",children:[e.jsx(vn,{className:"h-5 w-5 text-slate-400"}),e.jsx("p",{children:a("incidents.none")})]})]}),e.jsxs("section",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-2",children:a("contact.title")}),e.jsx("p",{className:"text-slate-600",children:a("contact.text")}),e.jsx("p",{className:"mt-2",children:e.jsx("a",{href:"mailto:support@comptario.com",className:"text-indigo-600 hover:underline",children:a("contact.email")})})]})]})]})},HT=_t.lazy(()=>Mr(()=>import("./AdminSecurityPage-DW9vZ7b6.js"),[])),hy=()=>{const{t:a}=$t("common"),{tenant:o}=Gs(),[t,f]=G.useState(!1),[h,d]=G.useState({username:"admin",password:"",totp:""}),[n,l]=G.useState([]),[i,r]=G.useState([]),[s,c]=G.useState({customers:[],suppliers:[],products:[],invoices:[],expenses:[]}),[u,m]=G.useState(!1),[x,b]=G.useState(""),[p,v]=G.useState("users"),[y,N]=G.useState("all"),[T,_]=G.useState("all"),[O,H]=G.useState(!1),[F,V]=G.useState("all"),[q,W]=G.useState({status:"",plan:"",startFrom:"",startTo:""}),[B,E]=G.useState(""),[P,A]=G.useState(null),[k,j]=G.useState({firstName:"",lastName:"",email:"",phone:""}),[S,C]=G.useState(null),[D,R]=G.useState("soft"),[L,Y]=G.useState(!1),[X,ae]=G.useState(null),$=pe=>{A(pe),j({firstName:pe.firstName||"",lastName:pe.lastName||"",email:pe.email||"",phone:pe.phone||""})},Q=()=>A(null),z=async()=>{if(P&&window.confirm(a("admin.users.updateConfirm","Bu kullancy gncellemek istediinize emin misiniz?")))try{m(!0),await hr.updateUserDetails(P.id,k);const pe=await hr.getUsers(T!=="all"?T:void 0);l(pe||[]),E("Kullanc gncellendi"),setTimeout(()=>E(""),2e3),Q()}catch(pe){console.error("Kullanc gncellenemedi",pe)}finally{m(!1)}},M=async()=>{if(P&&window.confirm(a("admin.users.passwordResetConfirm","ifre sfrlama e-postas gnderilsin mi?")))try{m(!0),await hr.sendPasswordReset(P.id),E("ifre sfrlama e-postas gnderildi (simlasyon)"),setTimeout(()=>E(""),2500)}catch(pe){console.error("E-posta gnderilemedi",pe)}finally{m(!1)}},U=async pe=>{if(window.confirm(a("admin.users.markVerifiedConfirm","Bu kullancy dorulanm olarak iaretlemek istediinize emin misiniz?")))try{ae(pe),await hr.markUserVerified(pe),l(Qe=>Qe.map(fe=>fe.id===pe?{...fe,isEmailVerified:!0}:fe)),E("Kullanc doruland"),setTimeout(()=>E(""),2e3)}catch(Qe){console.error("Dorulama gncellenemedi",Qe),b("E-posta dorulamas gncellenemedi")}finally{ae(null)}},[te,ie]=G.useState(new Set),[se,le]=G.useState(new Set),[Ne,ke]=G.useState(new Set),[Z,ce]=G.useState(new Set),[ve,De]=G.useState({}),[Ae,Ie]=G.useState({}),[Ue,Ge]=G.useState({}),Le=pe=>{const Qe=(pe||"").toLowerCase();return Qe.includes("enterprise")||Qe.includes("business")?"BUSINESS":Qe.includes("professional")||Qe==="pro"?"PRO":"STARTER"},at=pe=>{const Qe=pe.toUpperCase();return Qe==="BUSINESS"?"enterprise":Qe==="PRO"?"professional":"free"},ut=pe=>pe?at(pe):"",Ce=(pe,Qe,fe)=>{pe(He=>{const lt=new Set(He);return fe===void 0?lt.has(Qe)?lt.delete(Qe):lt.add(Qe):fe?lt.add(Qe):lt.delete(Qe),lt})},[it,xt]=G.useState({customers:!1,suppliers:!1,products:!1,invoices:!1,expenses:!1}),[jt,Ee]=G.useState({customers:"",suppliers:"",products:"",invoices:"",expenses:""});G.useEffect(()=>{if(No.getToken()){f(!0);const Qe=o?.id||"all";N(Qe),_(Qe),V(Qe),Be(Qe!=="all"?Qe:void 0)}},[]),G.useEffect(()=>{const pe=()=>{f(!1),b("Admin oturumunuz sona erdi. Ltfen yeniden giri yapn.")};return window.addEventListener("adminAuthExpired",pe),()=>window.removeEventListener("adminAuthExpired",pe)},[]),G.useEffect(()=>{t&&oe(y!=="all"?y:void 0)},[y]),G.useEffect(()=>{t&&$e(T!=="all"?T:void 0)},[T]);const xe=async pe=>{pe.preventDefault(),m(!0),b("");try{const Qe=await hr.login(h.username,h.password,h.totp||void 0);if(Qe.success){f(!0),No.setToken(Qe.adminToken);const fe=o?.id||"all";N(fe),_(fe),V(fe),Be(fe!=="all"?fe:void 0)}}catch(Qe){b(Qe.response?.data?.message||"Giri baarsz. 2FA etkinse 6 haneli kod ya da kurtarma kodu giriniz.")}finally{m(!1)}},Be=async pe=>{try{m(!0);const[Qe,fe]=await Promise.all([hr.getUsers(pe),hr.getTenants()]);l(Qe||[]),r(fe||[]);const[He,lt,Pe,rt,je]=await Promise.all([hr.getTableData("customers",pe).catch(()=>[]),hr.getTableData("suppliers",pe).catch(()=>[]),hr.getTableData("products",pe).catch(()=>[]),hr.getTableData("invoices",pe).catch(()=>[]),hr.getTableData("expenses",pe).catch(()=>[])]);c({customers:Array.isArray(He)?He.reverse():[],suppliers:Array.isArray(lt)?lt.reverse():[],products:Array.isArray(Pe)?Pe.reverse():[],invoices:Array.isArray(rt)?rt.reverse():[],expenses:Array.isArray(je)?je.reverse():[]})}catch(Qe){b("Veri ykleme baarsz"),console.error("Load data error:",Qe)}finally{m(!1)}},$e=async pe=>{try{m(!0);const Qe=await hr.getUsers(pe);l(Qe||[])}catch(Qe){console.error("Kullanclar yklenemedi",Qe)}finally{m(!1)}},ye=async()=>{try{m(!0);const pe=await hr.getTenants({status:q.status||void 0,plan:q.plan?ut(q.plan):void 0,startFrom:q.startFrom||void 0,startTo:q.startTo||void 0});r(pe||[])}catch(pe){console.error("irketler yklenemedi",pe)}finally{m(!1)}};G.useEffect(()=>{t&&ye()},[q.status,q.plan,q.startFrom,q.startTo]);const oe=async pe=>{try{m(!0);const[Qe,fe,He,lt,Pe]=await Promise.all([hr.getTableData("customers",pe).catch(()=>[]),hr.getTableData("suppliers",pe).catch(()=>[]),hr.getTableData("products",pe).catch(()=>[]),hr.getTableData("invoices",pe).catch(()=>[]),hr.getTableData("expenses",pe).catch(()=>[])]);c({customers:Array.isArray(Qe)?Qe.reverse():[],suppliers:Array.isArray(fe)?fe.reverse():[],products:Array.isArray(He)?He.reverse():[],invoices:Array.isArray(lt)?lt.reverse():[],expenses:Array.isArray(Pe)?Pe.reverse():[]})}catch(Qe){console.error("Tablolar yklenemedi:",Qe)}finally{m(!1)}},me=pe=>{xt(Qe=>({...Qe,[pe]:!Qe[pe]}))},ue=(pe,Qe)=>{Ee(fe=>({...fe,[pe]:Qe}))},ze=(pe,Qe)=>{const fe=jt[Qe].toLowerCase();return fe?pe.filter(He=>Object.values(He).some(lt=>String(lt||"").toLowerCase().includes(fe))):pe},tt=()=>{f(!1),No.clearToken(),l([]),r([]),c({customers:[],suppliers:[],products:[],invoices:[],expenses:[]})},kt=()=>({users:n.filter(Qe=>Qe.isActive).length,customers:s.customers.length,suppliers:s.suppliers.length,products:s.products.length,invoices:s.invoices.length,expenses:s.expenses.length}),we=(pe,Qe,fe)=>{const He=ze(Qe,pe),lt=it[pe];return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:()=>me(pe),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[lt?e.jsx(qs,{className:"w-5 h-5"}):e.jsx(bs,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-medium capitalize",children:[pe," (",Qe.length,")"]})]})}),lt&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(gv,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Filtrele...",value:jt[pe],onChange:Pe=>ue(pe,Pe.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),jt[pe]&&e.jsx("button",{onClick:()=>ue(pe,""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Nr,{className:"w-4 h-4"})})]})})]}),lt&&e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsx("tr",{children:fe.map(Pe=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:Pe},Pe))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:He.slice(0,10).map((Pe,rt)=>e.jsx("tr",{className:"hover:bg-gray-50",children:fe.map(je=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:typeof Pe[je]=="object"?JSON.stringify(Pe[je]):Pe[je]||"-"},je))},rt))})]}),He.length>10&&e.jsxs("div",{className:"p-4 text-center text-sm text-gray-500 border-t border-gray-200",children:[He.length-10," daha fazla kayt var (kaydrarak grn)"]})]})})]})},st=async(pe,Qe)=>{try{m(!0);const fe=Qe?a("admin.users.deactivateConfirm","Kullancy pasifletirmek istediinize emin misiniz?"):a("admin.users.activateConfirm","Kullancy aktifletirmek istediinize emin misiniz?");if(!window.confirm(fe))return;await hr.updateUserStatus(pe,!Qe);const He=await hr.getUsers(T!=="all"?T:void 0);l(He||[])}catch(fe){console.error("Kullanc durumu gncellenemedi",fe)}finally{m(!1)}};if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-orange-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-red-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Admin Panel"}),e.jsx("p",{className:"text-gray-600",children:"Gvenli giri gereklidir"})]}),e.jsxs("form",{onSubmit:xe,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kullanc Ad"}),e.jsx("input",{type:"text",value:h.username,onChange:pe=>d(Qe=>({...Qe,username:pe.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ifre"}),e.jsx("input",{type:"password",value:h.password,onChange:pe=>d(Qe=>({...Qe,password:pe.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2FA Kodu (varsa)"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9A-Za-z\\-\\s]{4,}",placeholder:"123456 veya kurtarma kodu",value:h.totp,onChange:pe=>d(Qe=>({...Qe,totp:pe.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"2FA etkinse 6 haneli kodu ya da kurtarma kodunu girin."})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-red-600 text-white py-3 px-4 rounded-lg hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors disabled:opacity-50",children:u?"Giri yaplyor...":"Giri Yap"})]}),x&&e.jsx("div",{className:"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm",children:x})]})})});const wt=kt();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Admin Paneli"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:tt,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"k Yap"})})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg mb-6 w-fit",children:[e.jsxs("button",{onClick:()=>v("users"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="users"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[" Kullanclar (",wt.users,")"]}),e.jsxs("button",{onClick:()=>v("tenants"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="tenants"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[" irketler (",i.length,")"]}),e.jsx("button",{onClick:()=>v("data"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="data"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Veri Taban"}),e.jsx("button",{onClick:()=>v("backups"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="backups"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Yedekleme"}),e.jsx("button",{onClick:()=>v("retention"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="retention"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Veri Temizleme"}),e.jsx("button",{onClick:()=>v("planLimits"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="planLimits"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Plan Limitleri"}),e.jsx("button",{onClick:()=>v("tenantConsole"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="tenantConsole"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Tenant Ynetim"}),e.jsx("button",{onClick:()=>v("status"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="status"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Durum"}),e.jsx("button",{onClick:()=>v("siteSettings"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="siteSettings"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Site Ayarlar"}),e.jsx("button",{onClick:()=>v("security"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="security"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:" Gvenlik"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:wt.users}),e.jsx("div",{className:"text-sm text-blue-800",children:"Kullanc"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:wt.customers}),e.jsx("div",{className:"text-sm text-green-800",children:"Hesap"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:wt.suppliers}),e.jsx("div",{className:"text-sm text-purple-800",children:"Tedariki"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:wt.products}),e.jsx("div",{className:"text-sm text-yellow-800",children:"rn"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:wt.invoices}),e.jsx("div",{className:"text-sm text-red-800",children:"Fatura"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:wt.expenses}),e.jsx("div",{className:"text-sm text-orange-800",children:"Gider"})]})]}),p==="users"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:" Kullanclar"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"irket:"}),e.jsxs("select",{value:T,onChange:pe=>_(pe.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"Tm"}),i.map(pe=>e.jsx("option",{value:pe.id,children:pe.companyName||pe.name},pe.id))]}),e.jsx("button",{onClick:async()=>{try{H(!0);const pe=T!=="all"?T:void 0,Qe=await hr.exportUsersCsv(pe),fe=window.URL.createObjectURL(Qe),He=document.createElement("a"),lt=i.find(je=>je.id===pe),Pe=pe?lt?.companyName||lt?.name||pe:"tum",rt=String(Pe).replace(/[^a-zA-Z0-9_-]+/g,"_").slice(0,50);He.href=fe,He.download=`kullanicilar_${rt}.csv`,document.body.appendChild(He),He.click(),He.remove(),window.URL.revokeObjectURL(fe)}catch{b("CSV da aktarma baarsz")}finally{H(!1)}},disabled:O,className:"px-3 py-2 rounded-lg text-sm border border-gray-300 bg-white hover:bg-gray-50 disabled:opacity-50",children:O?"ndiriliyor":"CSV ndir"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ad Soyad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"E-posta"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"irket"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yetki"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Son Giri"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Son Giri Saat Dilimi"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"E-posta Dorulama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"lemler"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(T==="all"?n:n.filter(pe=>pe.tenant?.id===T)).map(pe=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[pe.firstName," ",pe.lastName]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.tenant?.companyName||pe.tenant?.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${pe.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:pe.role==="admin"?"Ynetici":"Kullanc"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:pe.lastLoginAt?new Date(pe.lastLoginAt).toLocaleString():""}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(()=>{const Qe=pe.lastLoginTimeZone,fe=pe.lastLoginUtcOffsetMinutes,He=typeof fe=="number"?`UTC${fe>=0?"+":""}${(fe/60).toFixed(1).replace(".0","")}`:"";return Qe||He||""})()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${pe.isEmailVerified?"bg-emerald-100 text-emerald-800":"bg-amber-100 text-amber-800"}`,children:pe.isEmailVerified?"Doruland":"Bekliyor"}),pe.isEmailVerified&&pe.emailVerifiedAt&&e.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:new Date(pe.emailVerifiedAt).toLocaleDateString()})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${pe.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:pe.isActive?"Aktif":"Pasif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>$(pe),className:"text-indigo-600 hover:text-indigo-900",title:"Dzenle",children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{R("soft"),C(pe)},className:"text-red-600 hover:text-red-900",title:"Sil",children:e.jsx(Xr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>st(pe.id,pe.isActive),className:`px-3 py-1 rounded-md text-xs font-medium text-white ${pe.isActive?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:pe.isActive?"Pasifletir":"Aktifletir"}),!pe.isEmailVerified&&e.jsx("button",{onClick:()=>U(pe.id),disabled:X===pe.id,className:"px-3 py-1 rounded-md text-xs font-medium text-indigo-700 bg-indigo-100 hover:bg-indigo-200 disabled:opacity-60",children:X===pe.id?"leniyor":"Doruland say"})]})})]},pe.id))})]})})]})}),p==="tenants"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:" irketler ve Abonelik Ynetimi"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Bu sayfadan tm irketleri grntleyebilir, plan ve durumlarn gncelleyebilir, sonraki deme tarihini ayarlayabilir veya abonelii iptal edebilirsiniz. Yaplan her deiiklik iin onay istenir."}),B&&e.jsx("div",{className:"mt-2 inline-block text-xs text-green-700 bg-green-50 border border-green-200 px-3 py-1 rounded",children:B})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Durum"}),e.jsxs("select",{value:q.status,onChange:pe=>W(Qe=>({...Qe,status:pe.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Tm"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"suspended",children:"Askda"}),e.jsx("option",{value:"trial",children:"Deneme"}),e.jsx("option",{value:"expired",children:"Sresi Doldu"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Plan"}),e.jsxs("select",{value:q.plan,onChange:pe=>W(Qe=>({...Qe,plan:pe.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Tm"}),e.jsx("option",{value:"STARTER",children:"STARTER"}),e.jsx("option",{value:"PRO",children:"PRO"}),e.jsx("option",{value:"BUSINESS",children:"BUSINESS"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Balang ()"}),e.jsx("input",{type:"date",value:q.startFrom,onChange:pe=>W(Qe=>({...Qe,startFrom:pe.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Biti ()"}),e.jsx("input",{type:"date",value:q.startTo,onChange:pe=>W(Qe=>({...Qe,startTo:pe.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsx("button",{onClick:async()=>{m(!0);try{const pe=await hr.getTenants({status:q.status||void 0,plan:q.plan||void 0,startFrom:q.startFrom||void 0,startTo:q.startTo||void 0});r(pe||[])}catch(pe){console.error("irketler yklenemedi",pe)}finally{m(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:"Filtreleri Uygula"})]})]})}),e.jsx("div",{className:"p-6 space-y-6",children:i.map(pe=>{const Qe=ve[pe.id],fe=Qe?.limits?.effective?.maxUsers,He=Qe?.tenant?.maxUsers,lt=Qe?.limits?.default?.maxUsers,Pe=pe.maxUsers,rt=fe??He??Pe??lt,Me=!!Qe?.tenant?.stripeCustomerId,Ye=!!(Qe&&!Me),dt=mt=>{if(mt!=null)return mt===-1?"":mt};return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"irket Ad"}),e.jsx("p",{className:"text-gray-600",children:pe.companyName||pe.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"URL Kodu"}),e.jsxs("p",{className:"text-gray-600",children:["@",pe.slug]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Abonelik Plan"}),te.has(pe.id)?e.jsxs("select",{autoFocus:!0,defaultValue:Le(pe.subscriptionPlan),onBlur:()=>Ce(ie,pe.id,!1),onChange:async mt=>{const yt=mt.target.value,Gt=at(yt);if(window.confirm(a("admin.tenants.updatePlanConfirm",{name:pe.companyName||pe.name,plan:yt,defaultValue:`${pe.companyName||pe.name} iin plan '${yt}' olarak gncellemek istediinize emin misiniz?`})))try{await hr.updateTenantSubscription(pe.id,{plan:Gt});const Lt=await hr.getTenants();r(Lt||[]),E("Plan ve limitler gncellendi"),setTimeout(()=>E(""),2e3)}catch(Lt){console.error("Plan gncellenemedi",Lt)}finally{Ce(ie,pe.id,!1)}},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"STARTER",children:"STARTER"}),e.jsx("option",{value:"PRO",children:"PRO"}),e.jsx("option",{value:"BUSINESS",children:"BUSINESS"})]}):e.jsx("button",{onClick:()=>Ce(ie,pe.id,!0),className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 hover:bg-gray-200",title:"Dzenlemek iin tklayn",children:Le(pe.subscriptionPlan)||"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Durum"}),se.has(pe.id)?e.jsxs("select",{autoFocus:!0,defaultValue:pe.status||"active",onBlur:()=>Ce(le,pe.id,!1),onChange:mt=>{const yt=mt.target.value;window.confirm(a("admin.tenants.updateStatusConfirm",{name:pe.companyName||pe.name,status:yt,defaultValue:`${pe.companyName||pe.name} iin durumu '${yt}' olarak gncellemek istediinize emin misiniz?`}))&&hr.updateTenantSubscription(pe.id,{status:yt}).then(()=>{r(Gt=>Gt.map(Lt=>Lt.id===pe.id?{...Lt,status:yt}:Lt)),E("Durum gncellendi"),setTimeout(()=>E(""),2e3)}).catch(Gt=>console.error("Durum gncellenemedi",Gt)).finally(()=>Ce(le,pe.id,!1))},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"suspended",children:"Askda"}),e.jsx("option",{value:"trial",children:"Deneme"}),e.jsx("option",{value:"expired",children:"Sresi Doldu"})]}):e.jsx("button",{onClick:()=>Ce(le,pe.id,!0),className:`px-2 py-1 text-xs rounded-full ${pe.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,title:"Dzenlemek iin tklayn",children:pe.status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Balang"}),e.jsx("p",{className:"text-gray-600",children:pe.createdAt?new Date(pe.createdAt).toLocaleDateString():"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Sonraki deme"}),Ne.has(pe.id)?e.jsx("input",{autoFocus:!0,type:"date",defaultValue:pe.subscriptionExpiresAt?new Date(pe.subscriptionExpiresAt).toISOString().slice(0,10):"",onBlur:()=>Ce(ke,pe.id,!1),onKeyDown:mt=>{mt.key==="Escape"&&Ce(ke,pe.id,!1)},onChange:mt=>{const yt=mt.target.value;yt&&window.confirm(a("admin.tenants.updateNextPaymentConfirm",{name:pe.companyName||pe.name,date:yt,defaultValue:`${pe.companyName||pe.name} iin sonraki deme tarihini ${yt} olarak ayarlamak istediinize emin misiniz?`}))&&hr.updateTenantSubscription(pe.id,{nextBillingAt:yt}).then(()=>{E("Sonraki deme tarihi gncellendi"),setTimeout(()=>E(""),2e3)}).catch(Gt=>console.error("Tarih gncellenemedi",Gt)).finally(()=>Ce(ke,pe.id,!1))},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}):e.jsx("button",{onClick:()=>Ce(ke,pe.id,!0),className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 hover:bg-gray-200",title:"Dzenlemek iin tklayn",children:pe.subscriptionExpiresAt?new Date(pe.subscriptionExpiresAt).toLocaleDateString():"-"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Abonelik"}),e.jsx("button",{onClick:()=>{window.confirm(a("admin.tenants.cancelSubscriptionConfirm",{name:pe.companyName||pe.name,defaultValue:`${pe.companyName||pe.name} iin abonelii iptal etmek istediinize emin misiniz?`}))&&hr.updateTenantSubscription(pe.id,{cancel:!0}).then(()=>{E("Abonelik iptal edildi"),setTimeout(()=>E(""),2e3)}).catch(mt=>console.error("ptal edilemedi",mt))},className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 text-sm",children:"ptal Et"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Tehlikeli Blge"}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center mt-2",children:[e.jsx("button",{onClick:async()=>{const mt=pe.companyName||pe.name;if(window.confirm(a("admin.tenants.dangerDeleteTenantConfirm",{name:mt,defaultValue:`DKKAT: '${mt}' hesabn ve tm verilerini KALICI olarak silmek zeresiniz. Bu ilem geri alnamaz. Devam etmek istiyor musunuz?`})))try{m(!0),await hr.deleteTenant(pe.id,{hard:!0,backupBefore:!1}),r(Gt=>Gt.filter(Lt=>Lt.id!==pe.id)),T===pe.id?(_("all"),await $e(void 0)):await $e(T!=="all"?T:void 0),y===pe.id&&(N("all"),await oe(void 0)),E("Hesap kalc olarak silindi"),setTimeout(()=>E(""),2500)}catch(Gt){console.error("Hesap silinemedi",Gt),alert("Hesap silinemedi. Konsolu kontrol edin.")}finally{m(!1)}},className:"px-4 py-2 border border-red-400 text-white bg-red-600 rounded-lg hover:bg-red-700 text-sm",children:"Hesab Kalc Olarak Sil"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Bu ilem geri alnamaz. Yalnzca yetkili yneticiler kullanmaldr."})]})]}),e.jsxs("div",{className:"md:col-span-2 border-t pt-3 mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Detaylar"}),e.jsx("button",{onClick:async()=>{const mt=new Set(Z);if(mt.has(pe.id)){mt.delete(pe.id),ce(mt);return}mt.add(pe.id),ce(mt);try{const[yt,Gt]=await Promise.all([hr.getTenantOverview(pe.id).catch(()=>null),hr.getTenantInvoices(pe.id).catch(()=>null)]);if(yt&&De(Lt=>({...Lt,[pe.id]:yt})),Gt&&Array.isArray(Gt.invoices)&&Gt.invoices.length>0)Ie(Lt=>({...Lt,[pe.id]:Gt.invoices}));else try{const Lt=Yu();if(Lt?.id&&Lt.id===pe.id){const Oe=await im(pe.id);Array.isArray(Oe?.invoices)&&Oe.invoices.length>0&&Ie(ot=>({...ot,[pe.id]:Oe.invoices}))}}catch{}}catch{}},className:"px-3 py-1 text-sm rounded-md border border-gray-300 hover:bg-gray-50",children:Z.has(pe.id)?"Gizle":"Gster"})]}),Z.has(pe.id)&&e.jsxs("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-md p-3 border",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Plan ve Limitler"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Plan: "}),e.jsx("span",{className:"font-medium",children:Le(pe.subscriptionPlan)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Kullanc Limiti (maxUsers): "}),e.jsx("span",{className:"font-medium",children:dt(rt)??"-"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-md p-3 border",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Fatura Gemii"}),Array.isArray(Ae[pe.id])&&Ae[pe.id].length>0?e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500",children:[e.jsx("th",{className:"py-1 pr-4",children:"Numara"}),e.jsx("th",{className:"py-1 pr-4",children:"Tarih"}),e.jsx("th",{className:"py-1 pr-4",children:"Tutar"}),e.jsx("th",{className:"py-1 pr-4",children:"Durum"}),e.jsx("th",{className:"py-1 pr-4",children:"Balantlar"})]})}),e.jsx("tbody",{children:Ae[pe.id].slice(0,Ue[pe.id]?Ae[pe.id].length:6).map(mt=>{const yt=mt.status||(mt.paid?"paid":"unknown"),Gt=(()=>{switch(yt){case"paid":return"bg-green-100 text-green-700 border border-green-200";case"open":return"bg-yellow-100 text-yellow-700 border border-yellow-200";case"draft":return"bg-blue-100 text-blue-700 border border-blue-200";case"uncollectible":return"bg-orange-100 text-orange-700 border border-orange-200";case"void":return"bg-gray-200 text-gray-600 border border-gray-300";case"upcoming":return"bg-purple-100 text-purple-700 border border-purple-200";default:return"bg-gray-100 text-gray-700 border border-gray-200"}})();return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-1 pr-4",children:mt.number||mt.id}),e.jsx("td",{className:"py-1 pr-4",children:mt.created?new Date(mt.created).toLocaleDateString():"-"}),e.jsx("td",{className:"py-1 pr-4",children:typeof mt.total=="number"?`${(mt.total/100).toLocaleString(void 0,{minimumFractionDigits:2})} ${mt.currency?.toUpperCase()}`:"-"}),e.jsx("td",{className:"py-1 pr-4",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium inline-block ${Gt}`,children:yt})}),e.jsxs("td",{className:"py-1 pr-4 space-x-2",children:[mt.hostedInvoiceUrl&&e.jsx("a",{className:"text-blue-600 hover:underline",href:mt.hostedInvoiceUrl,target:"_blank",rel:"noreferrer",children:"Grntle"}),mt.pdf&&e.jsx("a",{className:"text-blue-600 hover:underline",href:mt.pdf,target:"_blank",rel:"noreferrer",children:"PDF"})]})]},mt.id)})})]}),Ae[pe.id].length>6&&e.jsx("div",{className:"mt-2 text-center",children:e.jsx("button",{onClick:()=>Ge(mt=>({...mt,[pe.id]:!mt[pe.id]})),className:"text-xs px-3 py-1 rounded border border-gray-300 bg-white hover:bg-gray-50",children:Ue[pe.id]?"Daha az gster":`Tmn gster (${Ae[pe.id].length})`})})]}):e.jsxs("div",{className:"text-sm text-gray-500",children:["Fatura bulunamad.",Ye&&e.jsx("span",{className:"ml-1 text-xs text-gray-400",children:"(Stripe hesap ID yok  ilk abonelik/fatura ilemi sonras oluur)"})]})]})]})]})]})},pe.id)})})]})}),p==="tenants"&&e.jsx("div",{className:"mt-2"}),p==="data"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:" Veri Taban Tablolar"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"irket:"}),e.jsxs("select",{value:F,onChange:pe=>{const Qe=pe.target.value;V(Qe),N(Qe)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"Tm"}),i.map(pe=>e.jsx("option",{value:pe.id,children:pe.companyName||pe.name},pe.id))]})]})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Tablolar varsaylan olarak gizlidir. Grntlemek iin tablo balna tklayn."}),we("customers",s.customers,["name","email","company","phone","totalSpent"]),we("suppliers",s.suppliers,["name","email","company","phone","totalPaid"]),we("products",s.products,["name","description","price","category","stock"]),we("invoices",s.invoices,["invoiceNumber","customerName","amount","status","date"]),we("expenses",s.expenses,["expenseNumber","supplierName","amount","category","date"])]})}),p==="backups"&&e.jsx(RT,{}),p==="retention"&&e.jsx(zT,{}),p==="planLimits"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(OT,{})}),p==="tenantConsole"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(VT,{})}),p==="status"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"p-6",children:e.jsx($T,{})})}),p==="siteSettings"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx(UT,{})}),p==="security"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx(G.Suspense,{fallback:e.jsx("div",{className:"text-sm text-gray-500",children:"Ykleniyor..."}),children:e.jsx(HT,{})})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg shadow-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Kullanc Dzenle"}),e.jsx("button",{onClick:Q,className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Ad"}),e.jsx("input",{type:"text",value:k.firstName,onChange:pe=>j(Qe=>({...Qe,firstName:pe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Soyad"}),e.jsx("input",{type:"text",value:k.lastName,onChange:pe=>j(Qe=>({...Qe,lastName:pe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"E-posta"}),e.jsx("input",{type:"email",value:k.email,onChange:pe=>j(Qe=>({...Qe,email:pe.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Telefon"}),e.jsx("input",{type:"tel",value:k.phone,onChange:pe=>j(Qe=>({...Qe,phone:pe.target.value})),placeholder:"+90...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:M,className:"px-4 py-2 text-sm border border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50",children:"ifre Sfrlama Maili Gnder"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Q,className:"px-4 py-2 text-sm border rounded-lg",children:a("common.cancel")}),e.jsx("button",{onClick:z,className:"px-4 py-2 text-sm rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Kaydet"})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md shadow-xl border border-red-200",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-red-100 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700",children:"Kullancy Sil"}),e.jsx("button",{onClick:()=>C(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-700 leading-relaxed",children:[e.jsxs("p",{className:"mb-2",children:[e.jsxs("strong",{children:[S.firstName," ",S.lastName]})," - ",S.email]}),e.jsx("p",{className:"mb-2",children:"Bu ilemi dikkatli yapn. Soft silme kullancy pasif hale getirir ve gerektiinde geri dndrlebilir. Hard silme kalcdr ve kullanc kayd tamamen kaldrlr."}),D==="hard"&&e.jsx("p",{className:"text-red-600 font-medium",children:"DKKAT: Hard silme geri alnamaz. lgili ilikisel kaytlar (audit log vb. hari) cascade ile kaybolabilir."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"radio",name:"delMode",value:"soft",checked:D==="soft",onChange:()=>R("soft")}),e.jsx("span",{children:"Soft Sil (Pasifletir)"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"radio",name:"delMode",value:"hard",checked:D==="hard",onChange:()=>R("hard")}),e.jsx("span",{className:"text-red-600",children:"Hard Sil (Kalc)"})]})]})]}),e.jsxs("div",{className:"px-5 py-4 border-t flex items-center justify-between bg-red-50",children:[e.jsx("button",{onClick:()=>C(null),className:"px-4 py-2 text-sm rounded-lg border bg-white hover:bg-gray-50",disabled:L,children:a("common.cancel")}),e.jsx("button",{onClick:async()=>{if(!S)return;const pe=D==="hard",Qe=pe?"Bu kullanc kalc olarak silinecek. Onaylyor musunuz?":"Kullanc pasifletirilecek. Onaylyor musunuz?";if(window.confirm(Qe))try{Y(!0),await hr.deleteUser(S.id,{hard:pe}),l(fe=>pe?fe.filter(He=>He.id!==S.id):fe.map(He=>He.id===S.id?{...He,isActive:!1}:He)),E(pe?"Kullanc kalc olarak silindi":"Kullanc pasifletirildi"),setTimeout(()=>E(""),2500),C(null)}catch(fe){console.error("Silme hatas",fe),fe?.response?.status===404?(E("Kullanc zaten silinmi veya bulunamad (404)"),setTimeout(()=>E(""),2500),C(null),$e(T!=="all"?T:void 0)):alert("Silme baarsz. Konsolu kontrol edin.")}finally{Y(!1)}},disabled:L,className:`px-4 py-2 text-sm rounded-lg text-white ${D==="hard"?"bg-red-600 hover:bg-red-700":"bg-orange-600 hover:bg-orange-700"} disabled:opacity-60`,children:L?"leniyor...":D==="hard"?"Kalc Sil":"Pasifletir"})]})]})})]})]})};function KT({isOpen:a,onClose:o,onSelectNewSale:t,onSelectExistingSale:f,onSelectReturn:h}){const{t:d}=$t();return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Fr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d("invoices.newInvoice")}),e.jsx("p",{className:"text-sm text-gray-500",children:d("invoices.selectInvoiceType")})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:t,className:"w-full p-6 bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg hover:from-blue-100 hover:to-blue-200 transition-all group",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center group-hover:bg-blue-600 transition-colors",children:e.jsx(Ks,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:d("invoices.newSale")}),e.jsx("p",{className:"text-sm text-gray-600",children:d("invoices.newSaleDescription")}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:d("invoices.newSaleNote")})]})]})}),e.jsx("button",{onClick:f,className:"w-full p-6 bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg hover:from-green-100 hover:to-green-200 transition-all group",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center group-hover:bg-green-600 transition-colors",children:e.jsx(Fr,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:d("invoices.existingSale")}),e.jsx("p",{className:"text-sm text-gray-600",children:d("invoices.existingSaleDescription")}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:d("invoices.existingSaleNote")})]})]})}),e.jsx("button",{onClick:h,className:"w-full p-6 bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-lg hover:from-red-100 hover:to-red-200 transition-all group",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center group-hover:bg-red-600 transition-colors",children:e.jsx(jl,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:d("invoices.returnInvoice")}),e.jsx("p",{className:"text-sm text-gray-600",children:d("invoices.returnInvoiceDescription")}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d("invoices.returnInvoiceNote")})]})]})})]})}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:d("common.cancel")})})})]})}):null}const Ln=a=>{if(a==null)return"";try{return String(a).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim()}catch{return String(a).toLowerCase().trim()}},oi=a=>{if(!a)return 0;if(a instanceof Date){const h=a.getTime();return Number.isFinite(h)?h:0}if(typeof a=="number")return Number.isFinite(a)?a:0;const o=String(a).trim();if(/^\d{4}-\d{2}-\d{2}/.test(o)){const h=new Date(o).getTime();return Number.isFinite(h)?h:0}const t=o.match(/^(\d{1,2})[./-](\d{1,2})[./-](\d{4})(?:[ T](\d{1,2}):(\d{2})(?::(\d{2}))?)?$/);if(t){const h=parseInt(t[1],10),d=parseInt(t[2],10)-1,n=parseInt(t[3],10),l=t[4]?parseInt(t[4],10):0,i=t[5]?parseInt(t[5],10):0,r=t[6]?parseInt(t[6],10):0,s=new Date(n,d,h,l,i,r).getTime();return Number.isFinite(s)?s:0}const f=new Date(o).getTime();return Number.isFinite(f)?f:0},Hr=a=>{if(typeof a=="number")return Number.isFinite(a)?a:0;if(a==null)return 0;const t=String(a).trim().replace(/\s/g,"").replace(/\.(?=\d{3}(?:\D|$))/g,"").replace(/,(?=\d{3}(?:\D|$))/g,"").replace(/,(?=\d{1,2}$)/,"."),f=parseFloat(t);return Number.isFinite(f)?f:0},GT=(a,o,t,f,h)=>{let d="",n="";switch(f){case"number":d=Hr(a),n=Hr(o);break;case"date":d=oi(a),n=oi(o);break;case"string":default:d=Ln(a),n=Ln(o)}if(h&&f==="string"){const l=h.indexOf(Ln(a)),i=h.indexOf(Ln(o));if(l!==-1||i!==-1){const r=(l===-1?Number.MAX_SAFE_INTEGER:l)-(i===-1?Number.MAX_SAFE_INTEGER:i);return t==="asc"?r:-r}}return d<n?t==="asc"?-1:1:d>n?t==="asc"?1:-1:0},Ms=(a,o,t,f,h,d)=>GT(t(a),t(o),f,h,d),WT=["draft","sent","paid","overdue","cancelled"],YT=["pending","approved","paid","rejected"],QT=["completed","pending","cancelled"];function ZT({isOpen:a,onClose:o,onSelectSale:t,sales:f,existingInvoices:h}){const{formatCurrency:d}=Jr(),{t:n,i18n:l}=$t(),[i,r]=G.useState(""),s=typeof window<"u"&&window.navigator?.language?window.navigator.language:"tr-TR",c=G.useMemo(()=>Et.getItem("language")||l.language||s,[l.language,s]),u=N=>{if(N==null)return null;const T=String(N).trim();return T||null},m=G.useMemo(()=>{const N=new Set;return h.forEach(T=>{const _=u(T?.saleId);_&&N.add(_)}),N},[h]),x=G.useMemo(()=>f.filter(N=>{const T=u(N.id);return!(T&&m.has(T)||N.invoiceId)}),[f,m]),b=G.useMemo(()=>{if(!i.trim())return x;const N=Ln(i);return x.filter(T=>{const _=Ln(T.customerName).includes(N),O=Ln(T.productName).includes(N),H=T.saleNumber?Ln(T.saleNumber).includes(N):!1;return _||O||H})},[x,i]),p=N=>{if(!N)return"";const T=new Date(N);return Number.isNaN(T.getTime())?"":T.toLocaleDateString(c)};if(!a)return null;const v=N=>{const T=Hr(N.subtotal);if(T>0)return T;if(Array.isArray(N.items)&&N.items.length>0){const V=N.items.reduce((q,W)=>{const B=Hr(W?.quantity),E=Hr(W?.unitPrice);if(B<=0||E<=0){const P=Hr(W?.total);return q+(P>0?P:0)}return q+B*E},0);if(V>0)return V}const _=Hr(N.amount??N.total),O=Hr(N.taxAmount);if(_>0&&O>0&&_>O)return _-O;const H=Hr(N.quantity),F=Hr(N.unitPrice);return H>0&&F>0?H*F:_},y=N=>{he.info("existingSaleModal.selectSale",{saleId:N.id,saleNumber:N.saleNumber,customerName:N.customerName}),t(N)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Fr,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n("sales.selectExistingSale")}),e.jsx("p",{className:"text-sm text-gray-500",children:n("sales.selectSaleForInvoice")})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:i,onChange:N=>r(N.target.value),placeholder:n("sales.searchSalesPlaceholder"),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",style:{maxHeight:"calc(90vh - 200px)"},children:b.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Fr,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n(i?"sales.noSalesFound":"sales.noInvoiceableSales")}),e.jsx("p",{className:"text-gray-500",children:n(i?"sales.changeSearchCriteria":"sales.allSalesInvoiced")})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:b.map(N=>e.jsx("div",{onClick:()=>y(N),className:"p-6 hover:bg-gray-50 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ds,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"font-medium",children:N.customerName})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Vr,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:p(N.date)})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.productName}),N.saleNumber&&e.jsxs("p",{className:"text-sm text-gray-500",children:[n("sales.saleNumber"),": ",N.saleNumber]})]}),N.quantity&&N.unitPrice&&e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[N.quantity," ",n("sales.pieces"),"  ",d(N.unitPrice)]}),N.notes&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',N.notes,'"']})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center text-lg font-bold text-green-600 mb-2",children:[e.jsx(Bn,{className:"w-5 h-5 mr-1"}),d(v(N))]}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:n("sales.createInvoice")})]})]})},N.id))})}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:n("sales.salesWaitingForInvoice",{count:b.length})}),e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:n("common.cancel")})]})})]})})}function XT({isOpen:a,onClose:o,onSave:t,sale:f}){const{formatCurrency:h}=Jr(),{t:d,i18n:n}=$t(),[l,i]=G.useState(null),[r,s]=G.useState(null),[c,u]=G.useState(!1),[m,x]=G.useState(null),[b,p]=G.useState({dueDate:"",status:"draft",notes:""}),v=typeof window<"u"&&window.navigator?.language?window.navigator.language:"tr-TR",y=G.useMemo(()=>Et.getItem("language")||n.language||v,[n.language,v]);G.useEffect(()=>{let F=!1;async function V(){if(a){u(!0);try{const[q,W]=await Promise.allSettled([bp(),rg.getAll().then(B=>B.map(E=>({id:E.id,name:E.name,parentId:E.parentId??null,taxRate:di(E.taxRate)})))]);if(F)return;q.status==="fulfilled"&&i(q.value||[]),W.status==="fulfilled"&&s(W.value||[])}catch(q){he.warn("invoiceFromSale.metaLoad.failed",q)}finally{F||u(!1)}}}return V(),()=>{F=!0}},[a]);const N=G.useMemo(()=>{try{const F=en(),V=F?`products_cache_${F}`:"products_cache",q=Et.getItem(V);if(!q)return[];const W=JSON.parse(q);if(Array.isArray(W))return W}catch(F){he.warn("invoiceFromSale.productsCache.parseFailed",F)}return[]},[]),T=G.useCallback(F=>{const V=vp(F,{products:l??void 0,categories:r??void 0,defaultRate:cn,preferResolvedOverExisting:!0});return di(V.taxRate)!==null?V:N.length?vp(V,{products:N,categories:r??void 0,defaultRate:cn,preferResolvedOverExisting:!0}):V},[l,r,N]);G.useEffect(()=>{if(a&&f){const F=new Date;F.setDate(F.getDate()+30),p({dueDate:F.toISOString().split("T")[0],status:"draft",notes:f.notes||""})}},[a,f]);const _=G.useMemo(()=>{if(!f)return{lineItems:[],subtotal:0,tax:0,total:0};const F=Array.isArray(f.items)?f.items:[],V=Math.max(1,Hr(f.quantity)||1);let q=Hr(f.unitPrice);if(q<=0&&V>0){const k=Hr(f.subtotal);if(k>0)q=k/V;else{const j=Hr(f.amount);j>0&&(q=j/1.18/V)}}const W=f.productName||d("products.name","Product"),B=(F.length>0?F:[{productId:f.productId,productName:W,quantity:V,unitPrice:q,description:W}]).map(k=>{const j=Math.max(1,Hr(k.quantity)||V),S=Hr(k.unitPrice),C=S>0?S:q,D=k.productName||k.description||W,R={productId:k.productId??f.productId,productName:D,description:D,quantity:j,unitPrice:C,total:j*C,taxRate:di(k.taxRate)??void 0};return T(R)}),{subtotal:E,taxAmount:P,total:A}=wp(B,0,cn);return{lineItems:B,subtotal:E,tax:P,total:A}},[f,T,d]),O=()=>{if(!f)return;if(!b.dueDate){window.alert(d("validation.dueDateRequired"));return}if(!_.lineItems.length){he.warn("invoiceFromSale.noLineItems",{saleId:f.id}),window.alert(d("invoices.noLineItemsError",{defaultValue:"Faturaya aktarlacak satr bulunamad."}));return}try{const W=Array.isArray(l)?l:[];for(const B of _.lineItems){let E=W.find(P=>String(P.id)===String(B.productId));if(!E&&B.description){const P=B.description.toLowerCase();E=W.find(A=>String(A.name||"").trim().toLowerCase()===P)||W.find(A=>String(A.name||"").toLowerCase().includes(P))}if(E){const P=Hr(E.stock??E.stockQuantity),A=B.quantity;if(P>0&&A>P){he.info("invoiceFromSale.stockWarning",{saleId:f.id,productId:E.id,requested:A,available:P}),x({product:E,requested:A,available:P});return}}}}catch(W){he.warn("invoiceFromSale.stockCheck.error",W)}const F=_.lineItems.map(W=>({...W})),V=Math.max(0,Hr(f.discountAmount)),q={saleId:f.id,issueDate:new Date().toISOString().split("T")[0],dueDate:b.dueDate,status:b.status,notes:b.notes.trim(),customerName:f.customerName,customerEmail:f.customerEmail,type:"service",items:F,lineItems:F,subtotal:_.subtotal,taxAmount:_.tax,total:_.total,discountAmount:V};he.info("invoiceFromSale.save.request",{saleId:f.id,lineItemCount:F.length,subtotal:_.subtotal});try{t(q),he.info("invoiceFromSale.save.success",{saleId:f.id}),o()}catch(W){he.error("invoiceFromSale.save.failed",W)}},H=G.useCallback(F=>{if(!F)return"";const V=new Date(F);return Number.isNaN(V.getTime())?"":V.toLocaleDateString(y)},[y]);return!a||!f?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Fr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d("invoices.createInvoiceFromSale")}),e.jsx("p",{className:"text-sm text-gray-500",children:d("invoices.completeInvoiceInfo")})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("sales.saleInfo")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ds,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[d("invoices.customer"),":"]}),e.jsx("span",{className:"ml-2 font-medium",children:f.customerName})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[d("sales.saleDate"),":"]}),e.jsx("span",{className:"ml-2 font-medium",children:H(f.date)})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(bn,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[d("sales.productService",{defaultValue:d("products.name","Product")}),":"]}),e.jsx("span",{className:"ml-2 font-medium",children:f.productName})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[d("invoices.amountExclTax",{defaultValue:"Tutar (KDV Hari)"}),":"]}),e.jsx("span",{className:"ml-2 font-bold text-green-600",title:`Orijinal sat tutar (KDV dahil olabilir): ${h(Hr(f.amount))}`,children:c?e.jsxs("span",{className:"inline-flex items-center text-gray-500",children:[e.jsx(rm,{className:"w-4 h-4 animate-spin mr-1"})," "]}):h(_.subtotal)})]})]}),f.saleNumber&&e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[e.jsxs("strong",{children:[d("sales.saleNumber"),":"]})," ",f.saleNumber]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d("invoices.invoiceInfo",{defaultValue:"Fatura Bilgileri"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Vr,{className:"w-4 h-4 inline mr-2"}),d("common.dueDate")," *"]}),e.jsx("input",{type:"date",value:b.dueDate,onChange:F=>p(V=>({...V,dueDate:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:d("invoices.invoiceStatus",{defaultValue:"Invoice Status"})}),e.jsxs("select",{value:b.status,onChange:F=>p(V=>({...V,status:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"draft",children:d("status.draft",{defaultValue:"Taslak"})}),e.jsx("option",{value:"sent",children:d("status.sent",{defaultValue:"Gnderildi"})}),e.jsx("option",{value:"paid",children:d("status.paid",{defaultValue:"dendi"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:d("invoices.invoiceNotes",{defaultValue:"Fatura Notlar"})}),e.jsx("textarea",{value:b.notes,onChange:F=>p(V=>({...V,notes:F.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:d("invoices.notesPlaceholder",{defaultValue:"Fatura ile ilgili notlar..."})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:d("invoices.invoiceTotals",{defaultValue:"Invoice Totals"})}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:d("invoice.subtotal")}),e.jsx("span",{children:h(_.subtotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:d("invoice.vat")}),e.jsx("span",{children:c?e.jsxs("span",{className:"inline-flex items-center text-gray-500",children:[e.jsx(rm,{className:"w-4 h-4 animate-spin mr-1"})," "]}):h(_.tax)})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg border-t border-blue-300 pt-2",children:[e.jsx("span",{children:d("invoice.grandTotal")}),e.jsx("span",{children:h(_.total)})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:d("common.cancel")}),e.jsx("button",{onClick:O,disabled:!b.dueDate||c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:d("invoices.createInvoice")})]})]})}),m&&e.jsx(Em,{isOpen:!0,product:m.product,requested:m.requested,available:m.available,onClose:()=>x(null)})]})}const JT=async a=>(await Xe.get("/crm/activities",{params:{...a?.opportunityId?{opportunityId:a.opportunityId}:{},...a?.accountId?{accountId:a.accountId}:{},...a?.contactId?{contactId:a.contactId}:{},...a?.q?{q:a.q}:{},...a?.startDate?{startDate:a.startDate}:{},...a?.endDate?{endDate:a.endDate}:{},...a?.sortBy?{sortBy:a.sortBy}:{},...a?.sortDir?{sortDir:a.sortDir}:{},...a?.status?{status:a.status}:{},...typeof a?.limit=="number"?{limit:a.limit}:{},...typeof a?.offset=="number"?{offset:a.offset}:{}}})).data,eE=async a=>(await Xe.post("/crm/activities",a)).data,tE=async(a,o)=>(await Xe.patch(`/crm/activities/${a}`,o)).data,rE=async a=>{await Xe.delete(`/crm/activities/${a}`)},Dp=async a=>(await Xe.get("/crm/contacts",{params:{accountId:a?.accountId,q:a?.q,startDate:a?.startDate,endDate:a?.endDate,sortBy:a?.sortBy,sortDir:a?.sortDir,limit:a?.limit,offset:a?.offset}})).data,sE=async a=>(await Xe.post("/crm/contacts",a)).data,nE=async(a,o)=>(await Xe.patch(`/crm/contacts/${a}`,o)).data,aE=async a=>{await Xe.delete(`/crm/contacts/${a}`)},ig=async()=>(await Xe.post("/crm/pipeline/bootstrap")).data,og=async()=>(await Xe.get("/crm/stages")).data,Bv=async a=>(await Xe.get(`/crm/opportunities/${a}`)).data,lm=async a=>{const o=new URLSearchParams;a?.q&&o.set("q",a.q),a?.stageId&&o.set("stageId",a.stageId),a?.accountId&&o.set("accountId",a.accountId),a?.status&&o.set("status",a.status),a?.startDate&&o.set("startDate",a.startDate),a?.endDate&&o.set("endDate",a.endDate),a?.sortBy&&o.set("sortBy",a.sortBy),a?.sortDir&&o.set("sortDir",a.sortDir),typeof a?.limit=="number"&&o.set("limit",String(a.limit)),typeof a?.offset=="number"&&o.set("offset",String(a.offset));const t=o.toString();return(await Xe.get(`/crm/opportunities${t?`?${t}`:""}`)).data},iE=async a=>(await Xe.post("/crm/opportunities",a)).data,oE=async(a,o)=>(await Xe.post(`/crm/opportunities/${a}/move`,{stageId:o})).data,NP=async(a,o)=>(await Xe.post(`/crm/opportunities/${a}/team`,{userIds:o})).data,kP=async(a,o)=>(await Xe.patch(`/crm/opportunities/${a}`,o)).data,jP=async a=>(await Xe.get(`/crm/opportunities/${encodeURIComponent(String(a))}/sales`)).data,SP=async a=>(await Xe.get(`/crm/opportunities/${encodeURIComponent(String(a))}/invoices`)).data,Rs=({page:a,pageSize:o,total:t,onPageChange:f,onPageSizeChange:h,pageSizeOptions:d=[20,50,100],className:n=""})=>{const{t:l}=$t(),i=Math.max(1,Math.ceil(t/o)),r=t===0?0:(a-1)*o+1,s=Math.min(t,a*o),c=()=>f(Math.max(1,a-1)),u=()=>f(Math.min(i,a+1)),m=[],x=5;let b=Math.max(1,a-Math.floor(x/2)),p=Math.min(i,b+x-1);p-b+1<x&&(b=Math.max(1,p-x+1));for(let v=b;v<=p;v++)m.push(v);return e.jsxs("div",{className:`flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between ${n}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[e.jsxs("span",{children:[l("pagination.itemsPerPage",{defaultValue:"Sayfa bana"}),":"]}),e.jsx("select",{value:o,onChange:v=>h(Number(v.target.value)),className:"px-2 py-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:d.map(v=>e.jsx("option",{value:v,children:v},v))}),e.jsx("span",{className:"ml-2 text-gray-500",children:l("pagination.range",{start:r,end:s,total:t,defaultValue:`${r}-${s} / ${t}`})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:c,disabled:a<=1,className:`px-3 py-1.5 text-sm rounded-lg border ${a<=1?"text-gray-300 border-gray-200 cursor-not-allowed":"text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:l("pagination.previous",{defaultValue:"nceki"})}),b>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f(1),className:"px-3 py-1.5 text-sm rounded-lg border text-gray-700 border-gray-300 hover:bg-gray-50",children:"1"}),b>2&&e.jsx("span",{className:"px-2 text-gray-400",children:""})]}),m.map(v=>e.jsx("button",{onClick:()=>f(v),className:`px-3 py-1.5 text-sm rounded-lg border ${v===a?"bg-gray-900 text-white border-gray-900":"text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:v},v)),p<i&&e.jsxs(e.Fragment,{children:[p<i-1&&e.jsx("span",{className:"px-2 text-gray-400",children:""}),e.jsx("button",{onClick:()=>f(i),className:"px-3 py-1.5 text-sm rounded-lg border text-gray-700 border-gray-300 hover:bg-gray-50",children:i})]}),e.jsx("button",{onClick:u,disabled:a>=i,className:`px-3 py-1.5 text-sm rounded-lg border ${a>=i?"text-gray-300 border-gray-200 cursor-not-allowed":"text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:l("pagination.next",{defaultValue:"Sonraki"})})]})]})},Iu=()=>new Date().toISOString(),lE=a=>{if(typeof a!="object"||a===null)return!1;const o=Object.getPrototypeOf(a);return o===null||o===Object.prototype},mu=(a,o="")=>typeof a=="string"?a:o,cE=(a,o)=>{if(!lE(a))return null;const t=mu(a.id).trim();if(!t)return null;const f=mu(a.name).trim()||"Grnm",h=mu(a.createdAt)||Iu(),d=mu(a.updatedAt)||h,n=a.state??o??{},l=typeof a.isDefault=="boolean"?a.isDefault:void 0;return{id:t,name:f,state:n,createdAt:h,updatedAt:d,isDefault:l}},Uv=(a,o)=>Array.isArray(a)?a.map(t=>cE(t,o)).filter(t=>!!t):[],dE=(a,o)=>{if(!a)return[];try{const t=JSON.parse(a);return Uv(t,o)}catch(t){return he.warn("[useSavedListViews] Failed to parse localStorage snapshot",t),[]}},uE=a=>{if(!a)return"";if(a.id)return String(a.id);const o=a?.tenantId;return o?String(o):""};function qi({listType:a,initialState:o}){const{tenant:t}=Gs(),h=uE(t)||"anon",d=G.useMemo(()=>`saved_lv_${a}`,[a]),n=G.useMemo(()=>`lv_${h}_${a}`,[h,a]),[l,i]=G.useState([]),[r,s]=G.useState(null);G.useEffect(()=>{try{let N=Uv(is(d,{tenantId:h,fallbackToBase:!0})??[],o),T=!1;if(!N.length){const O=Et.getItem(n),H=dE(O,o);H.length&&(N=H,T=!0)}i(N);const _=N.find(O=>O.isDefault);s(_?_.id:null),T&&N.length&&(Ur(d,N,{tenantId:h,mirrorToBase:!0}),Et.removeItem(n))}catch(N){he.warn("[useSavedListViews] Unable to read from localStorage",N),i([]),s(null)}},[d,h,o,n]);const c=G.useCallback(N=>{i(N),Ur(d,N,{tenantId:h,mirrorToBase:!0})},[d,h]),u=G.useCallback((N,T)=>{const _=Iu(),O=crypto?.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),H={id:O,name:N.trim()||"Grnm",state:T,createdAt:_,updatedAt:_},F=[H,...l];return c(F),s(O),H},[l,c]),m=G.useCallback((N,T)=>{const _=l.map(O=>O.id===N?{...O,...T,updatedAt:Iu()}:O);c(_)},[l,c]),x=G.useCallback(N=>{const T=l.filter(_=>_.id!==N);c(T),r===N&&s(null)},[l,c,r]),b=G.useCallback(N=>{const T=l.map(_=>({..._,isDefault:N?_.id===N:!1,updatedAt:Iu()}));c(T),s(N)},[l,c]),p=G.useCallback((N,T)=>m(N,{name:T}),[m]),v=G.useCallback(()=>l.find(N=>N.isDefault)||null,[l]),y=G.useCallback(()=>{c([]),s(null)},[c]);return{views:l,activeViewId:r,setActiveViewId:s,saveCurrent:u,updateView:m,deleteView:x,setDefault:b,renameView:p,getDefault:v,clearAll:y}}function ca({listType:a,title:o,getState:t,applyState:f,presets:h=[]}){const{t:d,i18n:n}=$t("common"),{tenant:l}=Gs(),i=String(l?.subscriptionPlan||"").toLowerCase(),r=["professional","pro","business","enterprise"].some(S=>i.includes(S)),{views:s,activeViewId:c,setActiveViewId:u,saveCurrent:m,deleteView:x,setDefault:b,renameView:p,getDefault:v}=qi({listType:a});v();const[y,N]=_t.useState(!1),[T,_]=_t.useState(""),[O,H]=_t.useState(!1),[F,V]=_t.useState(!1),q=_t.useRef(null),W=_t.useRef(null),[B,E]=_t.useState(!1),P=(n.language||"tr").split("-")[0],A={presetsBtn:{tr:"Hazr Filtreler",en:"Preset Filters",fr:"Filtres prts",de:"Vordefinierte Filter"},noPresets:{tr:"n tanml filtre yok",en:"No preset filters",fr:"Aucun filtre prdfini",de:"Keine vordefinierten Filter"},viewsBtn:{tr:"Grnmler",en:"Views",fr:"Vues",de:"Ansichten"},noViews:{tr:"Henz kaydedilmi grnm yok.",en:"No saved views yet.",fr:"Aucune vue enregistre.",de:"Noch keine gespeicherten Ansichten."},defaultV:{tr:"Varsaylan grnm",en:"Default view",fr:"Vue par dfaut",de:"Standardansicht"},makeDefault:{tr:"Varsaylan yap",en:"Set default",fr:"Dfinir par dfaut",de:"Als Standard festlegen"},rename:{tr:"Yeniden adlandr",en:"Rename",fr:"Renommer",de:"Umbenennen"},del:{tr:"Sil",en:"Delete",fr:"Supprimer",de:"Lschen"},namePh:{tr:"Grnm ad",en:"View name",fr:"Nom de la vue",de:"Name der Ansicht"},save:{tr:"Kaydet",en:"Save",fr:"Enregistrer",de:"Speichern"},saveTitle:{tr:"Mevcut filtreleri adla kaydet",en:"Save current filters with name",fr:"Enregistrer les filtres actuels avec un nom",de:"Aktuelle Filter mit Namen speichern"},planReq:{tr:"Bu zellik Pro planda",en:"This feature requires Pro plan",fr:"Fonction disponible avec le plan Pro",de:"Funktion erfordert den Pro-Tarif"},planNote:{tr:"Grnm kaydetme Pro plan ile aktif.",en:"Saving views is available on Pro plan.",fr:"Lenregistrement des vues est disponible avec le plan Pro.",de:"Ansichten speichern ist im Pro-Tarif verfgbar."}};_t.useEffect(()=>{const S=D=>{const R=D.target;F&&q.current&&!q.current.contains(R)&&V(!1),O&&W.current&&!W.current.contains(R)&&H(!1)},C=D=>{D.key==="Escape"&&(H(!1),V(!1))};return document.addEventListener("mousedown",S),document.addEventListener("keydown",C),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("keydown",C)}},[O,F]),_t.useEffect(()=>{if(B)return;const S=v();if(S&&S.state)try{f(S.state)}catch{}E(!0)},[s]);const k=()=>{const S=T.trim();if(!S)return;const C=t(),D=m(S,C);_(""),N(!1),f(D.state)},j=S=>{const C=s.find(D=>D.id===S);C&&(u(S),f(C.state))};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",ref:q,children:[e.jsxs("button",{type:"button",onClick:()=>{V(S=>!S),H(!1)},className:"inline-flex items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",title:A.presetsBtn[P],children:[e.jsx(ci,{className:"h-4 w-4"}),e.jsx("span",{children:A.presetsBtn[P]}),e.jsx(bs,{className:"h-3.5 w-3.5"})]}),F&&e.jsx("div",{className:"absolute z-20 mt-2 w-56 rounded-lg border border-gray-200 bg-white p-1 shadow-lg",children:h.length===0?e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:A.noPresets[P]}):h.map(S=>e.jsx("button",{type:"button",onClick:()=>{V(!1),S.apply()},className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:e.jsx("span",{children:S.label})},S.id))})]}),e.jsxs("div",{className:"relative",ref:W,children:[e.jsxs("button",{type:"button",onClick:()=>{H(S=>!S),V(!1)},className:"inline-flex items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",title:A.viewsBtn[P],children:[e.jsx(nA,{className:"h-4 w-4"}),e.jsx("span",{children:A.viewsBtn[P]}),e.jsx(bs,{className:"h-3.5 w-3.5"})]}),O&&e.jsxs("div",{className:"absolute right-0 z-20 mt-2 w-80 rounded-lg border border-gray-200 bg-white p-2 shadow-lg",children:[e.jsx("div",{className:"max-h-64 overflow-auto",children:s.length===0?e.jsx("div",{className:"px-2 py-3 text-sm text-gray-500",children:A.noViews[P]}):s.map(S=>e.jsxs("div",{className:"flex items-center justify-between rounded-md px-2 py-2 hover:bg-gray-50",children:[e.jsx("button",{type:"button",onClick:()=>j(S.id),className:`truncate text-left text-sm ${c===S.id?"text-indigo-700 font-medium":"text-gray-700"}`,title:S.name,children:S.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>{b(S.id);try{f(S.state)}catch{}},className:`inline-flex h-7 w-7 items-center justify-center rounded-md ${S.isDefault?"text-yellow-600 bg-yellow-50":"text-gray-400 hover:bg-gray-100"}`,title:S.isDefault?A.defaultV[P]:A.makeDefault[P],children:e.jsx(Kc,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>{const C=prompt("Yeni ad",S.name);C&&C.trim()&&p(S.id,C.trim())},className:"inline-flex h-7 w-7 items-center justify-center rounded-md text-gray-400 hover:bg-gray-100",title:A.rename[P],children:"Aa"}),e.jsx("button",{type:"button",onClick:()=>x(S.id),className:"inline-flex h-7 w-7 items-center justify-center rounded-md text-red-500 hover:bg-red-50",title:A.del[P],children:e.jsx(Xr,{className:"h-4 w-4"})})]})]},S.id))}),e.jsxs("div",{className:"mt-2 border-t pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(sA,{className:"h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",value:T,onChange:S=>_(S.target.value),placeholder:A.namePh[P],className:"flex-1 rounded-md border border-gray-200 px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:!r})]}),e.jsx("button",{type:"button",onClick:k,disabled:!r||!T.trim(),className:`rounded-md px-3 py-1.5 text-sm font-medium ${r?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,title:r?A.saveTitle[P]:A.planReq[P],children:A.save[P]})]}),!r&&e.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:A.planNote[P]})]})]})]})]})}const _p="crm.activities.pageState.v1",mE=()=>{const a=Er.getItem(_p),o=Wn(a,_p);return o||null},fy={title:"",type:"",dueAt:"",completed:!1,contactId:""};function Lc(a={}){const{t:o,i18n:t}=$t("common"),f=a?.opportunityId,h=a?.dealName,d=a?.contactId,n=a?.contactName,l=a?.accountId,i=a?.accountName,r=f?"opportunity":d?"contact":l?"account":"global",s=r!=="global",[c,u]=G.useState([]),[m,x]=G.useState(0),[b,p]=G.useState(!0),[v,y]=G.useState(null),[N,T]=G.useState([]),[_,O]=G.useState(!1),[H,F]=G.useState(""),[V,q]=G.useState(""),W=String(h??"").trim()?String(h??""):V,[B,E]=G.useState(!1),[P,A]=G.useState(!1),[k,j]=G.useState(null),[S,C]=G.useState(null),[D,R]=G.useState(fy),[L,Y]=G.useState(!1),[X,ae]=G.useState(null),$=G.useMemo(()=>r==="global"?mE():null,[]),[Q,z]=G.useState(()=>{const oe=$?.statusFilter;return typeof oe=="string"&&["all","open","completed"].includes(oe)?oe:"all"}),[M,U]=G.useState(()=>{const oe=$?.sortKey;return typeof oe=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","titleAsc","titleDesc"].includes(oe)?oe:"updatedDesc"}),[te,ie]=G.useState(()=>typeof $?.query=="string"?$.query:""),[se,le]=G.useState(()=>typeof $?.startDate=="string"?$.startDate:""),[Ne,ke]=G.useState(()=>typeof $?.endDate=="string"?$.endDate:""),[Z,ce]=G.useState(()=>{const oe=$?.limit,me=[20,50,100];return typeof oe=="number"&&Number.isFinite(oe)&&me.includes(oe)?oe:20}),[ve,De]=G.useState(()=>{const oe=$?.offset;return typeof oe=="number"&&Number.isFinite(oe)?oe:0});G.useEffect(()=>{r==="global"&&Er.setItem(_p,JSON.stringify({query:te,statusFilter:Q,startDate:se,endDate:Ne,sortKey:M,limit:Z,offset:ve}))},[r,te,Q,se,Ne,M,Z,ve]);const Ae=r==="global"&&!(S?.opportunityId||S?.accountId),Ie=async()=>{y(null),p(!0);try{const oe=Q==="completed"?"completed":Q==="open"?"open":void 0,me=te.trim()?te.trim():void 0,ue=s?void 0:(()=>{switch(M){case"updatedAsc":return{sortBy:"updatedAt",sortDir:"asc"};case"createdDesc":return{sortBy:"createdAt",sortDir:"desc"};case"createdAsc":return{sortBy:"createdAt",sortDir:"asc"};case"titleAsc":return{sortBy:"title",sortDir:"asc"};case"titleDesc":return{sortBy:"title",sortDir:"desc"};case"updatedDesc":default:return{sortBy:"updatedAt",sortDir:"desc"}}})(),ze={q:me,status:oe,startDate:se||void 0,endDate:Ne||void 0,limit:Z,offset:ve,...ue?{sortBy:ue.sortBy,sortDir:ue.sortDir}:{}},tt=await JT(r==="opportunity"?{opportunityId:f,...ze}:r==="contact"?{contactId:d,...ze}:r==="account"?{accountId:l,...ze}:{...ze}),kt=Array.isArray(tt?.items)?tt.items:[];u(kt),x(typeof tt?.total=="number"?tt.total:kt.length)}catch(oe){y(os(oe))}finally{p(!1)}};G.useEffect(()=>{Ie()},[f,d,l,s,Q,te,se,Ne,M,Z,ve]),G.useEffect(()=>{z("all")},[f,d,l]),G.useEffect(()=>{ie("")},[f,d,l]),G.useEffect(()=>{De(0)},[f,d,l,s,Q,te,se,Ne,M,Z]),G.useEffect(()=>{if(r!=="global")return;let oe=!1;return(async()=>{try{O(!0);const ue=await Dp({limit:200,offset:0}),ze=Array.isArray(ue?.items)?ue.items:[];oe||T(ze)}catch{oe||T([])}finally{oe||O(!1)}})(),()=>{oe=!0}},[r]),G.useEffect(()=>{if(r!=="contact"){F("");return}const oe=String(d??"").trim();if(!oe){F("");return}if(String(n??"").trim()){F("");return}let me=!1;return(async()=>{try{const ze=await Dp({limit:200,offset:0}),kt=(Array.isArray(ze?.items)?ze.items:[]).find(we=>String(we.id)===oe);me||F(kt?.name??"")}catch{me||F("")}})(),()=>{me=!0}},[r,d,n]),G.useEffect(()=>{if(r!=="opportunity"){q("");return}const oe=String(f??"").trim();if(!oe){q("");return}if(String(h??"").trim()){q("");return}let me=!1;return(async()=>{try{const ze=await Bv(oe);me||q(String(ze?.name??""))}catch{me||q("")}})(),()=>{me=!0}},[r,f,h]);const Ue=oe=>{const me=String(oe??"").trim();if(!me)return null;const ue=me.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/);if(ue){const kt=Number(ue[1]),we=Number(ue[2]),st=Number(ue[3]);if(Number.isFinite(kt)&&Number.isFinite(we)&&Number.isFinite(st))return Date.UTC(kt,we-1,st)}const ze=me.match(/^([0-9]{1,2})[./-]([0-9]{1,2})[./-]([0-9]{4})$/);if(ze){const kt=Number(ze[1]),we=Number(ze[2]),st=Number(ze[3]);if(Number.isFinite(st)&&Number.isFinite(we)&&Number.isFinite(kt))return Date.UTC(st,we-1,kt)}const tt=Date.parse(me);return Number.isFinite(tt)?tt:null},Ge=(oe,me)=>{const ue=Ue(oe);if(ue!=null)return new Intl.DateTimeFormat(t.language,{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(ue));const ze=String(oe??"").trim();if(ze)return ze;const tt=Ue(me);return tt!=null?new Intl.DateTimeFormat(t.language,{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(tt)):""},Le=()=>{j(null),C(null),R(fy),E(!0)},at=oe=>{j(null),C(oe),R({title:oe.title??"",type:oe.type??"",dueAt:oe.dueAt??"",completed:!!oe.completed,contactId:oe.contactId??""}),E(!0)},ut=()=>{P||E(!1)},Ce=async()=>{j(null);const oe=D.title.trim();if(!oe){j(o("crm.validation.titleRequired"));return}const me={title:oe,type:D.type.trim()||void 0,opportunityId:r==="opportunity"?f:void 0,accountId:r==="account"?l:void 0,contactId:r==="contact"?d:r==="opportunity"?void 0:r==="account"?null:Ae&&D.contactId?D.contactId:null,dueAt:D.dueAt.trim()?D.dueAt.trim():null,completed:!!D.completed};try{A(!0),S?await tE(S.id,me):await eE(me),await Ie(),E(!1)}catch(ue){j(os(ue))}finally{A(!1)}},it=oe=>{ae(oe)},xt=()=>{L||ae(null)},jt=async()=>{if(X)try{Y(!0),await rE(X.id),await Ie(),ae(null)}catch(oe){y(os(oe))}finally{Y(!1)}},Ee=G.useMemo(()=>Array.isArray(c)?c:[],[c]),xe=G.useMemo(()=>{if(!s)return Ee;const oe=Array.isArray(Ee)?[...Ee]:[],me=ue=>Ue(ue.dueAt)??Ue(ue.createdAt)??0;return oe.sort((ue,ze)=>me(ze)-me(ue)),oe},[Ee,s]),Be=G.useMemo(()=>{const oe=new Map;for(const ue of xe){const ze=Ue(ue.dueAt)??Ue(ue.createdAt)??0,tt=Ge(ue.dueAt,ue.createdAt)||"-",kt=`${ze}:${tt}`,we=oe.get(kt);we?we.items.push(ue):oe.set(kt,{header:tt,ms:ze,items:[ue]})}const me=Array.from(oe.values());return me.sort((ue,ze)=>ze.ms-ue.ms),me},[xe]),$e=!b&&!v&&m>0&&xe.length===0,ye=Math.floor(ve/Z)+1;return e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:o("crm.activities.title")}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:r==="opportunity"?o("crm.activities.subtitleForDeal",{dealName:W||""}):r==="contact"?o("crm.activities.subtitleForContact",{contactName:n||H||""}):r==="account"?o("crm.activities.subtitleForAccount",{accountName:i||""}):o("crm.activities.subtitle")})]}),e.jsx("button",{type:"button",onClick:Le,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm",children:o("common.add")})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3 lg:flex-row lg:items-center",children:[e.jsx("input",{type:"text",value:te,onChange:oe=>ie(oe.target.value),placeholder:`${o("common.search")}...`,className:"w-full lg:flex-1 border rounded-lg px-3 py-2 border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsxs("div",{className:"flex w-full gap-2 lg:w-auto",children:[e.jsx("input",{type:"date",value:se,onChange:oe=>le(oe.target.value),placeholder:o("startDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsx("input",{type:"date",value:Ne,onChange:oe=>ke(oe.target.value),placeholder:o("endDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("select",{value:Q,onChange:oe=>z(oe.target.value),className:"w-full lg:w-64 border rounded-lg px-3 py-2 text-sm border-gray-300 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("crm.activities.filters.all"),children:[e.jsx("option",{value:"all",children:o("crm.activities.filters.all")}),e.jsx("option",{value:"open",children:o("crm.activities.filters.open")}),e.jsx("option",{value:"completed",children:o("crm.activities.filters.completed")})]}),!s&&e.jsxs("select",{value:M,onChange:oe=>U(oe.target.value),className:"w-full lg:w-64 border rounded-lg px-3 py-2 text-sm border-gray-300 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("app.sort.label"),children:[e.jsx("option",{value:"updatedDesc",children:o("app.sort.updatedDesc")}),e.jsx("option",{value:"updatedAsc",children:o("app.sort.updatedAsc")}),e.jsx("option",{value:"createdDesc",children:o("app.sort.createdDesc")}),e.jsx("option",{value:"createdAsc",children:o("app.sort.createdAsc")}),e.jsx("option",{value:"titleAsc",children:o("app.sort.titleAsc")}),e.jsx("option",{value:"titleDesc",children:o("app.sort.titleDesc")})]}),r==="global"&&e.jsx("div",{className:"lg:ml-auto flex items-center",children:e.jsx(ca,{listType:"crm_activities",getState:()=>({query:te,statusFilter:Q,startDate:se,endDate:Ne,sortKey:M,pageSize:Z}),applyState:oe=>{oe&&(ie(oe.query??""),typeof oe.statusFilter=="string"?z(["all","open","completed"].includes(oe.statusFilter)?oe.statusFilter:"all"):z("all"),le(oe.startDate??""),ke(oe.endDate??""),typeof oe.sortKey=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","titleAsc","titleDesc"].includes(oe.sortKey)&&U(oe.sortKey),oe.pageSize&&[20,50,100].includes(oe.pageSize)&&ce(oe.pageSize),De(0))},presets:[{id:"this-month",label:o("presets.thisMonth"),apply:()=>{const oe=new Date,me=new Date(oe.getFullYear(),oe.getMonth(),1).toISOString().slice(0,10),ue=new Date(oe.getFullYear(),oe.getMonth()+1,0).toISOString().slice(0,10);le(me),ke(ue),De(0)}},{id:"open",label:o("crm.activities.filters.open"),apply:()=>z("open")},{id:"completed",label:o("crm.activities.filters.completed"),apply:()=>z("completed")}]})})]}),b&&e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:o("common.loading")}),v&&e.jsx("div",{className:"mt-4 text-sm text-red-600",children:v}),!b&&!v&&m===0&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:o("crm.activities.empty")}),!b&&!v&&$e&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:o("common.noResults")}),!b&&!v&&Ee.length>0&&!$e&&s&&e.jsx("div",{className:"mt-6 space-y-6",children:Be.map(oe=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:oe.header}),e.jsx("div",{className:"space-y-3",children:oe.items.map(me=>{const ue=!!me.completed;return e.jsxs("div",{className:"relative pl-5",children:[e.jsx("div",{className:"absolute left-1 top-3 h-full w-px bg-gray-200"}),e.jsx("div",{className:ue?"absolute left-0 top-3 h-2 w-2 rounded-full bg-gray-300":"absolute left-0 top-3 h-2 w-2 rounded-full bg-gray-500"}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:ue?"text-sm font-medium text-gray-700 line-through":"text-sm font-medium text-gray-900",children:me.title}),e.jsx("div",{className:"mt-1 flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-gray-500",children:me.type?e.jsx("span",{children:me.type}):null})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("span",{className:ue?"px-2 py-1 rounded-md text-xs bg-gray-200 text-gray-700":"px-2 py-1 rounded-md text-xs bg-gray-100 text-gray-800",children:o(ue?"crm.activities.filters.completed":"crm.activities.filters.open")}),e.jsx("button",{type:"button",onClick:()=>at(me),className:"text-blue-600 hover:underline text-sm",children:o("common.edit")}),e.jsx("button",{type:"button",onClick:()=>it(me),className:"text-red-600 hover:underline text-sm",children:o("common.delete")})]})]})})]},me.id)})})]},`${oe.ms}:${oe.header}`))}),!b&&!v&&Ee.length>0&&!$e&&!s&&e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-500 border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.title")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.type")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.dueAt")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.completed")}),e.jsx("th",{className:"py-2",children:o("crm.fields.actions")})]})}),e.jsx("tbody",{children:xe.map(oe=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2 pr-4 text-gray-900",children:oe.title}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:oe.type||"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:oe.dueAt||"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:oe.completed?o("common.yes"):o("common.no")}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>at(oe),className:"text-blue-600 hover:underline",children:o("common.edit")}),e.jsx("button",{type:"button",onClick:()=>it(oe),className:"text-red-600 hover:underline",children:o("common.delete")})]})})]},oe.id))})]})}),!b&&!v&&e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4",children:e.jsx(Rs,{page:ye,pageSize:Z,total:m,onPageChange:oe=>De((oe-1)*Z),onPageSizeChange:oe=>{ce(oe),De(0)}})}),B&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:o(S?"crm.activities.modal.editTitle":"crm.activities.modal.createTitle")}),k&&e.jsx("div",{className:"mb-4 text-sm text-red-600",children:k}),e.jsxs("div",{className:"space-y-4",children:[Ae&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.contact")}),e.jsxs("select",{value:D.contactId,onChange:oe=>R(me=>({...me,contactId:oe.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",disabled:_,children:[e.jsx("option",{value:"",children:"-"}),N.map(oe=>e.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.title")}),e.jsx("input",{type:"text",value:D.title,onChange:oe=>R(me=>({...me,title:oe.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.type")}),e.jsx("input",{type:"text",value:D.type,onChange:oe=>R(me=>({...me,type:oe.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.dueAt")}),e.jsx("input",{type:"text",value:D.dueAt,onChange:oe=>R(me=>({...me,dueAt:oe.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",placeholder:o("crm.activities.dueAtPlaceholder")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"crm-activity-completed",type:"checkbox",checked:D.completed,onChange:oe=>R(me=>({...me,completed:oe.target.checked})),className:"h-4 w-4"}),e.jsx("label",{htmlFor:"crm-activity-completed",className:"text-sm text-gray-700",children:o("crm.fields.completed")})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:ut,className:"px-3 py-2 rounded-lg text-sm border border-gray-300 text-gray-700 hover:bg-gray-50",disabled:P,children:o("common.cancel")}),e.jsx("button",{type:"button",onClick:Ce,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm",disabled:P,children:o("common.save")})]})]})}),X&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:o("crm.confirmDelete.title")}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:o("crm.confirmDelete.message",{name:X.title})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:xt,className:"px-3 py-2 rounded-lg text-sm border border-gray-300 text-gray-700 hover:bg-gray-50",disabled:L,children:o("common.cancel")}),e.jsx("button",{type:"button",onClick:jt,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg text-sm",disabled:L,children:o("common.confirm")})]})]})})]})}const hE=async a=>(await Xe.get("/crm/tasks",{params:{opportunityId:a?.opportunityId,accountId:a?.accountId,q:a?.q,startDate:a?.startDate,endDate:a?.endDate,sortBy:a?.sortBy,sortDir:a?.sortDir,status:a?.status,limit:a?.limit,offset:a?.offset}})).data,fE=async a=>(await Xe.post("/crm/tasks",a)).data,pE=async(a,o)=>(await Xe.patch(`/crm/tasks/${a}`,o)).data,gE=async a=>{await Xe.delete(`/crm/tasks/${a}`)},Pp="crm.tasks.pageState.v1",xE=()=>{const a=Er.getItem(Pp),o=Wn(a,Pp);return o||null},py={title:"",dueAt:"",completed:!1,assigneeUserId:""};function Mu(a){const{t:o,i18n:t}=$t("common"),f=a.opportunityId,h=a.accountId,d=a.dealName,n=a.accountName,[l,i]=G.useState(""),r=String(d??"").trim()?String(d??""):l,s=!f&&!h,c=G.useMemo(()=>s?xE():null,[]);G.useEffect(()=>{const Le=String(f??"").trim();if(!Le){i("");return}if(String(d??"").trim()){i("");return}let at=!1;return(async()=>{try{const Ce=await Bv(Le);at||i(String(Ce?.name??""))}catch{at||i("")}})(),()=>{at=!0}},[f,d]);const[u,m]=G.useState([]),[x,b]=G.useState(0),[p,v]=G.useState(!0),[y,N]=G.useState(null),[T,_]=G.useState(!1),[O,H]=G.useState(!1),[F,V]=G.useState(null),[q,W]=G.useState(null),[B,E]=G.useState(py),[P,A]=G.useState(!1),[k,j]=G.useState(null),[S,C]=G.useState(()=>{const Le=c?.statusFilter;return typeof Le=="string"&&["all","open","completed"].includes(Le)?Le:"all"}),[D,R]=G.useState(()=>{const Le=c?.sortKey;return typeof Le=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","titleAsc","titleDesc"].includes(Le)?Le:"updatedDesc"}),[L,Y]=G.useState(()=>typeof c?.query=="string"?c.query:""),[X,ae]=G.useState(()=>typeof c?.startDate=="string"?c.startDate:""),[$,Q]=G.useState(()=>typeof c?.endDate=="string"?c.endDate:""),[z,M]=G.useState(()=>{const Le=c?.limit,at=[20,50,100];return typeof Le=="number"&&Number.isFinite(Le)&&at.includes(Le)?Le:20}),[U,te]=G.useState(()=>{const Le=c?.offset;return typeof Le=="number"&&Number.isFinite(Le)?Le:0});G.useEffect(()=>{s&&Er.setItem(Pp,JSON.stringify({query:L,statusFilter:S,startDate:X,endDate:$,sortKey:D,limit:z,offset:U}))},[s,L,S,X,$,D,z,U]);const ie=async()=>{N(null),v(!0);try{const Le=S==="completed"?"completed":S==="open"?"open":void 0,at=L.trim()?L.trim():void 0,ut=(()=>{switch(D){case"updatedAsc":return{sortBy:"updatedAt",sortDir:"asc"};case"createdDesc":return{sortBy:"createdAt",sortDir:"desc"};case"createdAsc":return{sortBy:"createdAt",sortDir:"asc"};case"titleAsc":return{sortBy:"title",sortDir:"asc"};case"titleDesc":return{sortBy:"title",sortDir:"desc"};case"updatedDesc":default:return{sortBy:"updatedAt",sortDir:"desc"}}})(),Ce=await hE(f?{opportunityId:f,q:at,startDate:X||void 0,endDate:$||void 0,sortBy:ut.sortBy,sortDir:ut.sortDir,status:Le,limit:z,offset:U}:h?{accountId:h,q:at,startDate:X||void 0,endDate:$||void 0,sortBy:ut.sortBy,sortDir:ut.sortDir,status:Le,limit:z,offset:U}:{q:at,startDate:X||void 0,endDate:$||void 0,sortBy:ut.sortBy,sortDir:ut.sortDir,status:Le,limit:z,offset:U}),it=Array.isArray(Ce?.items)?Ce.items:[];m(it),b(typeof Ce?.total=="number"?Ce.total:it.length)}catch(Le){N(os(Le))}finally{v(!1)}};G.useEffect(()=>{ie()},[f,h,S,L,X,$,D,z,U]),G.useEffect(()=>{C("all")},[f,h]),G.useEffect(()=>{Y("")},[f,h]),G.useEffect(()=>{te(0)},[f,h,S,L,X,$,D,z]);const se=Le=>{const at=String(Le??"").trim();if(!at)return null;const ut=at.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/);if(ut){const xt=Number(ut[1]),jt=Number(ut[2]),Ee=Number(ut[3]);if(Number.isFinite(xt)&&Number.isFinite(jt)&&Number.isFinite(Ee))return Date.UTC(xt,jt-1,Ee)}const Ce=at.match(/^([0-9]{1,2})[./-]([0-9]{1,2})[./-]([0-9]{4})$/);if(Ce){const xt=Number(Ce[1]),jt=Number(Ce[2]),Ee=Number(Ce[3]);if(Number.isFinite(Ee)&&Number.isFinite(jt)&&Number.isFinite(xt))return Date.UTC(Ee,jt-1,xt)}const it=Date.parse(at);return Number.isFinite(it)?it:null},le=(Le,at)=>{const ut=se(Le);if(ut!=null)return new Intl.DateTimeFormat(t.language,{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(ut));const Ce=String(Le??"").trim();if(Ce)return Ce;const it=se(at);return it!=null?new Intl.DateTimeFormat(t.language,{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(it)):""},Ne=G.useMemo(()=>Array.isArray(u)?u:[],[u]),ke=!p&&!y&&x>0&&Ne.length===0,Z=Math.floor(U/z)+1,ce=()=>{s||(V(null),W(null),E(py),_(!0))},ve=Le=>{V(null),W(Le),E({title:Le.title??"",dueAt:Le.dueAt??"",completed:!!Le.completed,assigneeUserId:Le.assigneeUserId??""}),_(!0)},De=()=>{O||_(!1)},Ae=async()=>{V(null);const Le=B.title.trim();if(!Le){V(o("crm.validation.titleRequired"));return}const at={title:Le,opportunityId:f||null,accountId:h||null,dueAt:B.dueAt.trim()?B.dueAt.trim():null,completed:!!B.completed,assigneeUserId:B.assigneeUserId?B.assigneeUserId:null};try{H(!0),q?await pE(q.id,at):await fE(at),await ie(),_(!1)}catch(ut){V(os(ut))}finally{H(!1)}},Ie=Le=>{j(Le)},Ue=()=>{P||j(null)},Ge=async()=>{if(k)try{A(!0),await gE(k.id),await ie(),j(null)}catch(Le){N(os(Le))}finally{A(!1)}};return e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:o("crm.tasks.title")}),f&&e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:o("crm.tasks.subtitleForDeal",{dealName:r||""})}),!f&&h&&e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:o("crm.tasks.subtitleForAccount",{accountName:n||""})})]}),!s&&e.jsx("button",{type:"button",onClick:ce,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm",children:o("common.add")})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3 lg:flex-row lg:items-center",children:[e.jsx("input",{type:"text",value:L,onChange:Le=>Y(Le.target.value),placeholder:`${o("common.search")}...`,className:"w-full lg:flex-1 border rounded-lg px-3 py-2 border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsxs("div",{className:"flex w-full gap-2 lg:w-auto",children:[e.jsx("input",{type:"date",value:X,onChange:Le=>ae(Le.target.value),placeholder:o("startDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsx("input",{type:"date",value:$,onChange:Le=>Q(Le.target.value),placeholder:o("endDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("select",{value:S,onChange:Le=>C(Le.target.value),className:"w-full lg:w-64 border rounded-lg px-3 py-2 text-sm border-gray-300 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("crm.tasks.filters.all"),children:[e.jsx("option",{value:"all",children:o("crm.tasks.filters.all")}),e.jsx("option",{value:"open",children:o("crm.tasks.filters.open")}),e.jsx("option",{value:"completed",children:o("crm.tasks.filters.completed")})]}),e.jsxs("select",{value:D,onChange:Le=>R(Le.target.value),className:"w-full lg:w-64 border rounded-lg px-3 py-2 text-sm border-gray-300 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("app.sort.label"),children:[e.jsx("option",{value:"updatedDesc",children:o("app.sort.updatedDesc")}),e.jsx("option",{value:"updatedAsc",children:o("app.sort.updatedAsc")}),e.jsx("option",{value:"createdDesc",children:o("app.sort.createdDesc")}),e.jsx("option",{value:"createdAsc",children:o("app.sort.createdAsc")}),e.jsx("option",{value:"titleAsc",children:o("app.sort.titleAsc")}),e.jsx("option",{value:"titleDesc",children:o("app.sort.titleDesc")})]}),s&&e.jsx("div",{className:"lg:ml-auto flex items-center",children:e.jsx(ca,{listType:"crm_tasks",getState:()=>({query:L,statusFilter:S,startDate:X,endDate:$,sortKey:D,pageSize:z}),applyState:Le=>{Le&&(Y(Le.query??""),typeof Le.statusFilter=="string"?C(["all","open","completed"].includes(Le.statusFilter)?Le.statusFilter:"all"):C("all"),ae(Le.startDate??""),Q(Le.endDate??""),typeof Le.sortKey=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","titleAsc","titleDesc"].includes(Le.sortKey)&&R(Le.sortKey),Le.pageSize&&[20,50,100].includes(Le.pageSize)&&M(Le.pageSize),te(0))},presets:[{id:"this-month",label:o("presets.thisMonth"),apply:()=>{const Le=new Date,at=new Date(Le.getFullYear(),Le.getMonth(),1).toISOString().slice(0,10),ut=new Date(Le.getFullYear(),Le.getMonth()+1,0).toISOString().slice(0,10);ae(at),Q(ut),te(0)}},{id:"open",label:o("crm.tasks.filters.open"),apply:()=>C("open")},{id:"completed",label:o("crm.tasks.filters.completed"),apply:()=>C("completed")}]})})]}),p&&e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:o("common.loading")}),y&&e.jsx("div",{className:"mt-4 text-sm text-red-600",children:y}),!p&&!y&&ke&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:o("common.noResults")}),!p&&!y&&!ke&&x===0&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:o("crm.tasks.empty")}),!p&&!y&&Ne.length>0&&e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-500 border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.title")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.assignee")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.dueAt")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.completed")}),e.jsx("th",{className:"py-2",children:o("crm.fields.actions")})]})}),e.jsx("tbody",{children:Ne.map(Le=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2 pr-4 text-gray-900",children:Le.title}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:(a.assignees??[]).find(ut=>ut.id===Le.assigneeUserId)?.label||(Le.assigneeUserId?Le.assigneeUserId:"-")}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:le(Le.dueAt,Le.createdAt)||"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:Le.completed?o("common.yes"):o("common.no")}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>ve(Le),className:"text-blue-600 hover:underline",children:o("common.edit")}),e.jsx("button",{type:"button",onClick:()=>Ie(Le),className:"text-red-600 hover:underline",children:o("common.delete")})]})})]},Le.id))})]})}),!p&&!y&&e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4",children:e.jsx(Rs,{page:Z,pageSize:z,total:x,onPageChange:Le=>te((Le-1)*z),onPageSizeChange:Le=>{M(Le),te(0)}})}),T&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:o(q?"crm.tasks.modal.editTitle":"crm.tasks.modal.createTitle")}),F&&e.jsx("div",{className:"mb-4 text-sm text-red-600",children:F}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.title")}),e.jsx("input",{type:"text",value:B.title,onChange:Le=>E(at=>({...at,title:Le.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.assignee")}),e.jsxs("select",{value:B.assigneeUserId,onChange:Le=>E(at=>({...at,assigneeUserId:Le.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",children:[e.jsx("option",{value:"",children:o("crm.tasks.unassigned")}),(a.assignees??[]).map(Le=>e.jsx("option",{value:Le.id,children:Le.label},Le.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.dueAt")}),e.jsx("input",{type:"text",value:B.dueAt,onChange:Le=>E(at=>({...at,dueAt:Le.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",placeholder:o("crm.tasks.dueAtPlaceholder")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"crm-task-completed",type:"checkbox",checked:B.completed,onChange:Le=>E(at=>({...at,completed:Le.target.checked})),className:"h-4 w-4"}),e.jsx("label",{htmlFor:"crm-task-completed",className:"text-sm text-gray-700",children:o("crm.fields.completed")})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:De,className:"px-3 py-2 rounded-lg text-sm border border-gray-300 text-gray-700 hover:bg-gray-50",disabled:O,children:o("common.cancel")}),e.jsx("button",{type:"button",onClick:Ae,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm",disabled:O,children:o("common.save")})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:o("crm.confirmDelete.title")}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:o("crm.confirmDelete.message",{name:k.title})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:Ue,className:"px-3 py-2 rounded-lg text-sm border border-gray-300 text-gray-700 hover:bg-gray-50",disabled:P,children:o("common.cancel")}),e.jsx("button",{type:"button",onClick:Ge,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg text-sm",disabled:P,children:o("common.confirm")})]})]})})]})}function yE({isOpen:a,onClose:o,customer:t,onEdit:f,onCreateInvoice:h,onRecordPayment:d,onViewHistory:n}){const{t:l,i18n:i}=$t(),[r,s]=_t.useState([]),c=(y,N)=>{const T=l(`common:${y}`,{defaultValue:""});if(typeof T=="string"&&T!==`common:${y}`&&T.trim()!=="")return T;const _=l(y,{defaultValue:N});return typeof _=="string"&&_!==y&&_.trim()!==""?_:N},u=()=>{const y=Et.getItem("i18nextLng");return y&&y.length>=2?y.slice(0,2).toLowerCase():(i.resolvedLanguage||i.language||"en").slice(0,2).toLowerCase()},m=y=>y==="tr"?"tr-TR":y==="de"?"de-DE":y==="fr"?"fr-FR":"en-US",x=u(),b=y=>new Date(y).toLocaleDateString(m(x));_t.useEffect(()=>{if(!a)return;let y=!1;return(async()=>{try{const _=(await hs.getAll()??[])[0];if(!_?.id){y||s([]);return}const O=await hs.getMembers(_.id);y||s(O??[])}catch{y||s([])}})(),()=>{y=!0}},[a]);const p=_t.useMemo(()=>{const y=(Array.isArray(r)?r:[]).filter(N=>!!N?.user?.id).map(N=>{const T=[N.user.firstName,N.user.lastName].filter(Boolean).join(" ").trim();return{id:N.user.id,label:T||N.user.email||N.user.id}});return y.sort((N,T)=>N.label.localeCompare(T.label)),y},[r]);if(_t.useEffect(()=>{},[a,t?.id]),!a||!t)return null;const v={createdBy:{tr:"Oluturan",en:"Created by",de:"Erstellt von",fr:"Cr par"}[x]||"Created by",createdAt:{tr:"Oluturulma",en:"Created at",de:"Erstellt am",fr:"Cr le"}[x]||"Created at",updatedBy:{tr:"Son gncelleyen",en:"Last updated by",de:"Zuletzt aktualisiert von",fr:"Dernire mise  jour par"}[x]||"Last updated by",updatedAt:{tr:"Son gncelleme",en:"Last updated",de:"Zuletzt aktualisiert",fr:"Dernire mise  jour"}[x]||"Last updated"};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-bold text-2xl",children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:c("customer.details","Account Details")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>f(t),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(vs,{className:"w-5 h-5 text-gray-500"})}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"p-6",id:`customer-${t.id}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[v.createdBy,":"]})," ",e.jsx("span",{className:"font-medium",children:t.createdByName||""})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[v.createdAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.createdAt?new Date(t.createdAt).toLocaleString(m(x)):""})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[v.updatedBy,":"]})," ",e.jsx("span",{className:"font-medium",children:t.updatedByName||""})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[v.updatedAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.updatedAt?new Date(t.updatedAt).toLocaleString(m(x)):""})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:c("customer.accountInfo","Account Information")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ds,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[c("customer.name","Name"),":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.name})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Hs,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[c("customer.email","Email"),":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.email})]})]}),t.phone&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Co,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[c("customer.phone","Phone"),":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.phone})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[c("customer.registeredAt","Registered Date"),":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:b(t.createdAt)})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-4",children:[t.company&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ts,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[c("customer.company","Company"),":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.company})]})]}),t.taxNumber&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"w-4 h-4 text-gray-400 mr-3 text-xs font-bold flex items-center justify-center",children:"VN"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[c("customer.taxNumber","Tax Number"),":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.taxNumber})]})]})]})})]})]}),t.address&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:c("customer.addressInfo","Address Information")}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Al,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5"}),e.jsx("p",{className:"text-gray-700",children:t.address})]})})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:c("customer.quickActions","Quick Actions")}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>h?.(t),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:e.jsx("span",{children:c("customer.createInvoice","Create Invoice")})}),e.jsx("button",{onClick:()=>{window.location.hash=`crm-contacts:${t.id}`,o()},className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:e.jsx("span",{children:c("sidebar.crmContacts","CRM Contacts")})}),e.jsx("button",{onClick:()=>{window.location.hash=`crm-opportunities:${t.id}`,o()},className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:e.jsx("span",{children:c("sidebar.crmOpportunities","Opportunities")})}),e.jsx("button",{onClick:()=>{window.location.hash=`crm-activities:${t.id}`,o()},className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:e.jsx("span",{children:c("sidebar.crmActivities","Activities")})}),e.jsx("button",{onClick:()=>{window.location.hash=`crm-tasks:${t.id}`,o()},className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:e.jsx("span",{children:c("crm.tasks.title","Tasks")})}),e.jsx("button",{onClick:()=>n?.(t),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:e.jsx("span",{children:c("customer.viewHistory","View History")})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(Lc,{accountId:String(t.id),accountName:t.name})}),e.jsx("div",{className:"mt-6",children:e.jsx(Mu,{accountId:String(t.id),accountName:t.name,assignees:p})})]})]})})}function bE({isOpen:a,onClose:o,product:t,onEdit:f}){const{formatCurrency:h}=Jr(),{i18n:d}=$t(),n=()=>{try{return Et.getItem("i18nextLng")}catch{return null}},l=()=>{const c=n();return c&&c.length>=2?c.slice(0,2).toLowerCase():(d.resolvedLanguage||d.language||"en").slice(0,2).toLowerCase()},i=c=>c==="tr"?"tr-TR":c==="de"?"de-DE":c==="fr"?"fr-FR":"en-US",r=l(),s={edit:{tr:"Dzenle",en:"Edit",fr:"Modifier",de:"Bearbeiten"}[r]||"Edit",close:{tr:"Kapat",en:"Close",fr:"Fermer",de:"Schlieen"}[r]||"Close",recordInfo:{tr:"Kayt Bilgisi",en:"Record Info",fr:"Infos denregistrement",de:"Eintragsinfo"}[r]||"Record Info",createdBy:{tr:"Oluturan",en:"Created by",fr:"Cr par",de:"Erstellt von"}[r]||"Created by",createdAt:{tr:"Oluturulma",en:"Created at",fr:"Cr le",de:"Erstellt am"}[r]||"Created at",updatedBy:{tr:"Son gncelleyen",en:"Last updated by",fr:"Dernire mise  jour par",de:"Zuletzt aktualisiert von"}[r]||"Last updated by",updatedAt:{tr:"Son gncelleme",en:"Last updated",fr:"Dernire mise  jour",de:"Zuletzt aktualisiert"}[r]||"Last updated",features:{tr:"zellikler",en:"Features",fr:"Caractristiques",de:"Eigenschaften"}[r]||"Features",category:{tr:"Kategori",en:"Category",fr:"Catgorie",de:"Kategorie"}[r]||"Category",sku:{tr:"SKU",en:"SKU",fr:"SKU",de:"SKU"}[r]||"SKU",unit:{tr:"Birim",en:"Unit",fr:"Unit",de:"Einheit"}[r]||"Unit",registeredDate:{tr:"Kayt Tarihi",en:"Registered Date",fr:"Date denregistrement",de:"Registrierungsdatum"}[r]||"Registered Date",priceStock:{tr:"Fiyat ve Stok",en:"Price and Stock",fr:"Prix et Stock",de:"Preis und Bestand"}[r]||"Price and Stock",salePrice:{tr:"Sat Fiyat",en:"Sale Price",fr:"Prix de vente",de:"Verkaufspreis"}[r]||"Sale Price",cost:{tr:"Maliyet",en:"Cost",fr:"Cot",de:"Kosten"}[r]||"Cost",stockQty:{tr:"Stok Miktar",en:"Stock Quantity",fr:"Quantit en stock",de:"Bestandsmenge"}[r]||"Stock Quantity",critical:{tr:"Kritik Seviye",en:"Critical Level",fr:"Niveau critique",de:"Kritischer Bestand"}[r]||"Critical Level",description:{tr:"Aklama",en:"Description",fr:"Description",de:"Beschreibung"}[r]||"Description",notSpecified:{tr:"Belirtilmemi",en:"Not specified",fr:"Non spcifi",de:"Nicht angegeben"}[r]||"Not specified"};return!a||!t?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"w-full max-w-2xl rounded-2xl bg-white shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-lg bg-indigo-100",children:e.jsx(bn,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.sku,": ",t.sku]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f&&e.jsx("button",{type:"button",onClick:()=>{f(t),o()},className:"rounded-lg border border-indigo-100 px-4 py-2 text-sm font-medium text-indigo-600 transition-colors hover:bg-indigo-50",children:s.edit}),e.jsx("button",{type:"button",onClick:o,className:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600","aria-label":s.close,children:e.jsx(Nr,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"grid gap-6 p-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500",children:s.recordInfo}),e.jsxs("div",{className:"mt-3 grid gap-4 sm:grid-cols-2 text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[s.createdBy,": ",e.jsx("span",{className:"font-medium",children:t.createdByName||""})]}),e.jsxs("div",{children:[s.createdAt,": ",e.jsx("span",{className:"font-medium",children:t.createdAt?new Date(t.createdAt).toLocaleString(i(r)):""})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[s.updatedBy,": ",e.jsx("span",{className:"font-medium",children:t.updatedByName||""})]}),e.jsxs("div",{children:[s.updatedAt,": ",e.jsx("span",{className:"font-medium",children:t.updatedAt?new Date(t.updatedAt).toLocaleString(i(r)):""})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500",children:s.features}),e.jsxs("div",{className:"mt-3 grid gap-4 sm:grid-cols-2",children:[e.jsx(Pi,{icon:Fa,label:s.category,value:t.category||s.notSpecified}),e.jsx(Pi,{icon:mv,label:s.sku,value:t.sku}),e.jsx(Pi,{icon:ci,label:s.unit,value:t.unit}),e.jsx(Pi,{icon:Vr,label:s.registeredDate,value:new Date(t.createdAt).toLocaleDateString(i(r))})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500",children:s.priceStock}),e.jsxs("div",{className:"mt-3 grid gap-4 sm:grid-cols-2",children:[e.jsx(Pi,{icon:Bn,label:s.salePrice,value:h(t.unitPrice||0)}),e.jsx(Pi,{icon:Bn,label:s.cost,value:h(t.costPrice||0)}),e.jsx(Pi,{icon:ci,label:s.stockQty,value:`${t.stockQuantity} ${t.unit}`}),e.jsx(Pi,{icon:ci,label:s.critical,value:t.reorderLevel})]})]}),t.description&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500",children:s.description}),e.jsx("p",{className:"mt-3 rounded-lg border border-gray-100 bg-gray-50 p-4 text-sm text-gray-700",children:t.description})]})]})]})})}function Pi({icon:a,label:o,value:t}){return e.jsxs("div",{className:"rounded-lg border border-gray-100 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-gray-500",children:[e.jsx(a,{className:"h-4 w-4 text-gray-400"}),o]}),e.jsx("div",{className:"mt-2 text-sm font-medium text-gray-900",children:t})]})}function vE({isOpen:a,onClose:o,supplier:t,onEdit:f,onCreateExpense:h,onViewHistory:d}){const{i18n:n}=$t();if(!a||!t)return null;const l=()=>{const u=Et.getItem("i18nextLng");return u&&u.length>=2?u.slice(0,2).toLowerCase():(n.resolvedLanguage||n.language||"en").slice(0,2).toLowerCase()},i=u=>u==="tr"?"tr-TR":u==="de"?"de-DE":u==="fr"?"fr-FR":"en-US",r=l(),s={details:{tr:"Tedariki Detaylar",en:"Supplier Details",fr:"Dtails Fournisseur",de:"Lieferant Details"}[r]||"Supplier Details",createdBy:{tr:"Oluturan",en:"Created by",fr:"Cr par",de:"Erstellt von"}[r]||"Created by",createdAt:{tr:"Oluturulma",en:"Created at",fr:"Cr le",de:"Erstellt am"}[r]||"Created at",updatedBy:{tr:"Son gncelleyen",en:"Last updated by",fr:"Dernire mise  jour par",de:"Zuletzt aktualisiert von"}[r]||"Last updated by",updatedAt:{tr:"Son gncelleme",en:"Last updated",fr:"Dernire mise  jour",de:"Zuletzt aktualisiert"}[r]||"Last updated",basicInfo:{tr:"Temel Bilgiler",en:"Basic Information",fr:"Informations de base",de:"Grundinformationen"}[r]||"Basic Information",supplierName:{tr:"Tedariki Ad",en:"Supplier Name",fr:"Nom du Fournisseur",de:"Lieferantenname"}[r]||"Supplier Name",email:{tr:"E-posta",en:"Email",fr:"E-mail",de:"E-Mail"}[r]||"Email",phone:{tr:"Telefon",en:"Phone",fr:"Tlphone",de:"Telefon"}[r]||"Phone",registeredAt:{tr:"Kayt Tarihi",en:"Registered Date",fr:"Date d'enregistrement",de:"Registrierungsdatum"}[r]||"Registered Date",companyInfo:{tr:"irket Bilgileri",en:"Company Information",fr:"Informations Socit",de:"Firmendaten"}[r]||"Company Information",company:{tr:"irket",en:"Company",fr:"Socit",de:"Firma"}[r]||"Company",category:{tr:"Kategori",en:"Category",fr:"Catgorie",de:"Kategorie"}[r]||"Category",taxNumber:{tr:"Vergi No",en:"Tax Number",fr:"Numro Fiscal",de:"Steuernummer"}[r]||"Tax Number",addressInfo:{tr:"Adres Bilgileri",en:"Address Information",fr:"Informations d'adresse",de:"Adressinformationen"}[r]||"Address Information",quickActions:{tr:"Hzl lemler",en:"Quick Actions",fr:"Actions Rapides",de:"Schnellaktionen"}[r]||"Quick Actions",createExpense:{tr:"Gider Olutur",en:"Create Expense",fr:"Crer Dpense",de:"Ausgabe erstellen"}[r]||"Create Expense",viewHistory:{tr:"Gemi lemler",en:"View History",fr:"Historique",de:"Verlauf anzeigen"}[r]||"View History",edit:{tr:"Dzenle",en:"Edit",fr:"Modifier",de:"Bearbeiten"}[r]||"Edit"},c=u=>new Date(u).toLocaleDateString(i(r));return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 font-bold text-2xl",children:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.details})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})})]}),e.jsxs("div",{className:"p-6",id:`supplier-${t.id}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[s.createdBy,":"]})," ",e.jsx("span",{className:"font-medium",children:t.createdByName||""})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[s.createdAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.createdAt?new Date(t.createdAt).toLocaleString(i(r)):""})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[s.updatedBy,":"]})," ",e.jsx("span",{className:"font-medium",children:t.updatedByName||""})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[s.updatedAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.updatedAt?new Date(t.updatedAt).toLocaleString(i(r)):""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s.basicInfo}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ds,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[s.supplierName,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.name})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Hs,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[s.email,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.email})]})]}),t.phone&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Co,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[s.phone,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.phone})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[s.registeredAt,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:c(t.createdAt)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s.companyInfo}),e.jsxs("div",{className:"space-y-4",children:[t.company&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ts,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[s.company,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.company})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Fa,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[s.category,":"]}),e.jsx("span",{className:"ml-2",children:e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full",children:t.category})})]})]}),t.taxNumber&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"w-4 h-4 text-gray-400 mr-3 text-xs font-bold flex items-center justify-center",children:"VN"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[s.taxNumber,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.taxNumber})]})]})]})]})]}),t.address&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s.addressInfo}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Al,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5"}),e.jsx("p",{className:"text-gray-700",children:t.address})]})})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:s.quickActions}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>h?.(t),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:e.jsx("span",{children:s.createExpense})}),e.jsx("button",{onClick:()=>d?.(t),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:e.jsx("span",{children:s.viewHistory})}),e.jsxs("button",{onClick:()=>{o(),setTimeout(()=>f(t),100)},className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:s.edit})]})]})]})]})]})})}function lg({isOpen:a,onClose:o,invoice:t,onEdit:f,onDownload:h}){const{formatCurrency:d}=Jr(),{t:n,i18n:l}=$t(),r=(()=>{try{const N=Et.getItem("i18nextLng");if(N&&typeof N=="string"&&N.length>=2)return N.slice(0,2).toLowerCase()}catch{}return(l.resolvedLanguage||l.language||"en").slice(0,2).toLowerCase()})(),s=y=>y==="tr"?"tr-TR":y==="de"?"de-DE":y==="fr"?"fr-FR":"en-US",c={tr:{createdBy:"Oluturan",createdAt:"Oluturulma",updatedBy:"Son gncelleyen",updatedAt:"Son gncelleme",noCustomer:"Hesap Yok"},en:{createdBy:"Created by",createdAt:"Created at",updatedBy:"Last updated by",updatedAt:"Last updated",noCustomer:"No Account"},de:{createdBy:"Erstellt von",createdAt:"Erstellt am",updatedBy:"Zuletzt aktualisiert von",updatedAt:"Zuletzt aktualisiert",noCustomer:"Kein Account"},fr:{createdBy:"Cr par",createdAt:"Cr le",updatedBy:"Dernire mise  jour par",updatedAt:"Dernire mise  jour",noCustomer:"Aucun Compte"}},u=c[r]||c.en,m=G.useMemo(()=>({draft:{label:zt(n,"draft"),class:"bg-gray-100 text-gray-800"},sent:{label:zt(n,"sent"),class:"bg-blue-100 text-blue-800"},paid:{label:zt(n,"paid"),class:"bg-green-100 text-green-800"},overdue:{label:zt(n,"overdue"),class:"bg-red-100 text-red-800"}}),[n]);if(!a||!t)return null;const x=y=>new Date(y).toLocaleDateString(s(r)),b=y=>{const N=typeof y=="string"?parseFloat(y):y;return d(Number.isFinite(N)?N:0)},p=(y,N,T)=>{const _=y?.trim(),O=[N?.firstName,N?.lastName].filter(Boolean).join(" ").trim();return _||(O.length?O:void 0)||N?.email||T||""},v=y=>{const N=Kr(y),_=(O=>O in m)(N)?m[N]:{label:zt(n,N),class:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${_.class}`,children:_.label})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:y=>y.target===y.currentTarget&&o(),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.invoiceNumber}),e.jsx("p",{className:"text-sm text-gray-500",children:n("invoice.details")})]}),v(t.status)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>h?.(t),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Cs,{className:"w-4 h-4"}),e.jsx("span",{children:n("invoice.downloadPdf")})]}),e.jsxs("button",{onClick:()=>{o(),setTimeout(()=>f?.(t),100)},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:n("common.edit")})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"p-6",id:`invoice-${t.id}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[u.createdBy,":"]})," ",e.jsx("span",{className:"font-medium",children:p(t.createdByName,t.createdByUser,t.createdBy)})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[u.createdAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.createdAt?new Date(t.createdAt).toLocaleString(s(r)):""})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[u.updatedBy,":"]})," ",e.jsx("span",{className:"font-medium",children:p(t.updatedByName,t.updatedByUser,t.updatedBy)})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[u.updatedAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.updatedAt?new Date(t.updatedAt).toLocaleString(s(r)):""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:n("invoice.information")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[n("invoice.type"),":"]}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${t.type==="product"?"bg-blue-100 text-blue-800":t.type==="service"?"bg-green-100 text-green-800":"bg-indigo-100 text-indigo-800"}`,children:t.type==="product"?n("invoice.productSale"):t.type==="service"?n("invoice.serviceSale"):n("invoice.generalSale","Genel")})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[n("invoice.issueDate"),":"]}),e.jsx("span",{className:"ml-2 font-medium",children:x(t.issueDate)})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[n("invoice.dueDate"),":"]}),e.jsx("span",{className:"ml-2 font-medium",children:x(t.dueDate)})]}),t.sourceQuoteId&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Fr,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[n("invoices.table.sourceQuote",{defaultValue:"Kaynak Teklif"}),":"]}),e.jsx("button",{type:"button",className:"ml-2 font-medium text-indigo-600 hover:text-indigo-800",onClick:()=>{try{const y=String(t.sourceQuoteId||"").trim();if(!y)return;o(),setTimeout(()=>{try{window.location.hash=`quotes-edit:${y}`}catch{}},100)}catch{}},title:n("quotes.editModal.title",{defaultValue:"Teklifi Dzenle"}),children:String(t.sourceQuoteNumber||"").trim()||n("common.open",{defaultValue:"A"})}),String(t.sourceOpportunityId||"").trim()&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2 text-gray-300",children:"|"}),e.jsx("button",{type:"button",className:"font-medium text-indigo-600 hover:text-indigo-800",onClick:()=>{try{const y=String(t.sourceOpportunityId||"").trim();if(!y)return;o(),setTimeout(()=>{try{window.location.hash=`crm-deal:${y}`}catch{}},100)}catch{}},title:n("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"}),children:n("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"})})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:n("invoice.customerInfo")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.customer?.name||t.customerName||n("common:noCustomer",{defaultValue:u.noCustomer})}),(t.customer?.email||t.customerEmail)&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),t.customer?.email||t.customerEmail]}),(t.customer?.address||t.customerAddress)&&e.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[e.jsx(Al,{className:"w-4 h-4 mr-2 mt-0.5"}),e.jsx("span",{children:t.customer?.address||t.customerAddress})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:n("invoice.itemsServices")}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:n("invoice.description")}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700",children:n("invoice.quantity")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:n("invoice.unitPrice")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:n("invoice.total")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Array.isArray(t.items)&&t.items.map((y,N)=>{const T=Number(y?.quantity)||0,_=Number(y?.unitPrice)||0,O=T*_||Number(y?.total)||0;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:y?.description||""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:y?.quantity??""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right",children:b(_)}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 text-right",children:b(O)})]},`${y?.description??"item"}-${N}`)})})]})})]}),e.jsx("div",{className:"flex justify-end mb-8",children:e.jsxs("div",{className:"w-80 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[n("invoice.subtotal"),":"]}),e.jsx("span",{className:"font-medium",children:b(Number(t.subtotal)||0)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[n("invoice.vat"),":"]}),e.jsx("span",{className:"font-medium",children:b(Number(t.taxAmount)||0)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-3",children:[e.jsxs("span",{children:[n("invoice.grandTotal"),":"]}),e.jsx("span",{children:b(Number(t.total)||0)})]})]})}),t.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n("invoice.notes")}),e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:t.notes})]})]})]})})}function Vv({isOpen:a,onClose:o,expense:t,onEdit:f,onDownload:h}){const{formatCurrency:d}=Jr(),{t:n,i18n:l}=$t(),i=(O,H)=>{const F=n(`common:${O}`,{defaultValue:""});if(F&&F!==`common:${O}`&&F.trim()!=="")return F;const V=n(O,{defaultValue:""});return V&&V!==O&&V.trim()!==""?V:H},r=()=>{const O=Et.getItem("i18nextLng");return O&&typeof O=="string"&&O.length>=2?O.slice(0,2).toLowerCase():(l?.resolvedLanguage||l?.language||"en").toString().slice(0,2).toLowerCase()},s=O=>O==="tr"?"tr-TR":O==="de"?"de-DE":O==="fr"?"fr-FR":"en-US",c={tr:{createdBy:"Oluturan",createdAt:"Oluturulma",updatedBy:"Son gncelleyen",updatedAt:"Son gncelleme"},en:{createdBy:"Created by",createdAt:"Created at",updatedBy:"Last updated by",updatedAt:"Last updated"},de:{createdBy:"Erstellt von",createdAt:"Erstellt am",updatedBy:"Zuletzt aktualisiert von",updatedAt:"Zuletzt aktualisiert"},fr:{createdBy:"Cr par",createdAt:"Cr le",updatedBy:"Dernire mise  jour par",updatedAt:"Dernire mise  jour"}},u=r(),m=c[u]||c.en,x=G.useMemo(()=>({draft:{label:zt(n,"draft"),className:"bg-gray-100 text-gray-800"},approved:{label:zt(n,"approved"),className:"bg-blue-100 text-blue-800"},paid:{label:zt(n,"paid"),className:"bg-green-100 text-green-800"},pending:{label:zt(n,"pending"),className:"bg-yellow-100 text-yellow-800"},rejected:{label:zt(n,"rejected"),className:"bg-red-100 text-red-800"}}),[n]);if(!a||!t)return null;const b=typeof t.supplier=="string"?void 0:t.supplier,p=typeof t.supplier=="string"?t.supplier:t.supplier?.name,v=O=>n(`expenseCategories.${O}`)||O,y=O=>{const H=new Date(O);return Number.isNaN(H.getTime())?"":H.toLocaleDateString(s(u))},N=O=>{const H=typeof O=="string"?parseFloat(O):O;return d(H||0)},T=O=>{const H=(O||"").trim(),F=(l?.language||"tr").slice(0,2).toLowerCase(),V=F==="tr"?"Tedariki Yok":F==="de"?"Kein Lieferant":F==="fr"?"Aucun Fournisseur":"No Supplier";if(!H)return n("common:noSupplier",{defaultValue:V});const q=H.toLowerCase();return["nosupplier","no supplier","tedariki yok","kein lieferant","aucun fournisseur"].includes(q)?n("common:noSupplier",{defaultValue:V}):H},_=O=>{const H=Kr(O),F=x[H]||{label:zt(n,H),className:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${F.className}`,children:F.label})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.expenseNumber}),e.jsx("p",{className:"text-sm text-gray-500",children:i("expense.details","Expense Details")})]}),_(t.status)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[h&&e.jsxs("button",{onClick:()=>h(t),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Cs,{className:"w-4 h-4"}),e.jsx("span",{children:n("invoice.downloadPdf")})]}),e.jsxs("button",{onClick:()=>{o(),setTimeout(()=>f(t),100)},className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:n("common.edit")})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"p-6",id:`expense-${t.id}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[m.createdBy,":"]})," ",e.jsx("span",{className:"font-medium",children:t.createdByName||""})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[m.createdAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.createdAt?new Date(t.createdAt).toLocaleString(s(u)):""})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[m.updatedBy,":"]})," ",e.jsx("span",{className:"font-medium",children:t.updatedByName||""})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[m.updatedAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.updatedAt?new Date(t.updatedAt).toLocaleString(s(u)):""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("expense.information","Expense Information")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[i("expense.date","Expense Date"),":"]}),e.jsx("span",{className:"ml-2 font-medium",children:y(t.expenseDate)})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Fa,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[i("expense.category","Category"),":"]}),e.jsx("span",{className:"ml-2 font-medium",children:v(t.category)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("expense.supplier","Supplier")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ts,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[i("expense.supplier","Supplier"),":"]}),e.jsx("span",{className:"ml-2 font-medium",children:T(p)})]}),b?.email&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"E-posta:"}),e.jsx("span",{className:"ml-2 font-medium",children:b.email})]}),b?.address&&e.jsxs("div",{className:"flex items-start text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Adres:"}),e.jsx("span",{className:"ml-2 font-medium",children:b.address})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:n("invoice.description")}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-700",children:t.description})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("expense.amount","Amount")}),e.jsx("div",{className:"bg-red-50 rounded-lg p-6 border border-red-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-red-800 font-medium text-lg",children:[i("expense.amount","Amount"),":"]}),e.jsx("span",{className:"text-2xl font-bold text-red-600",children:N(t.amount)})]})})]}),t.receiptUrl&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:i("expense.receipt","Receipt")}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(un,{className:"w-5 h-5 text-blue-600"}),e.jsx("a",{href:t.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-medium underline",children:i("expense.viewReceipt","View Receipt")})]})})]}),t.notes&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:n("invoice.notes")}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-700",children:t.notes})})]})]})]})})}const hl=a=>{if(typeof a=="number")return Number.isFinite(a)?a:0;if(a==null)return 0;const o=String(a).trim();if(!o)return 0;if(o.includes(".")&&o.includes(",")){const h=o.replace(/\./g,"").replace(/,/g,"."),d=Number.parseFloat(h);return Number.isFinite(d)?d:0}if(o.includes(",")&&!o.includes(".")){const f=Number.parseFloat(o.replace(/,/g,"."));return Number.isFinite(f)?f:0}const t=Number.parseFloat(o.replace(/\s/g,""));return Number.isFinite(t)?t:0};function cg({isOpen:a,onClose:o,sale:t,onEdit:f,onDelete:h,onDownload:d}){const{formatCurrency:n}=Jr(),{t:l,i18n:i}=$t();if(!a||!t)return null;const r=()=>{const B=Et.getItem("i18nextLng");return B&&B.length>=2?B.slice(0,2).toLowerCase():(i.resolvedLanguage||i.language||"en").slice(0,2).toLowerCase()},s=B=>B==="tr"?"tr-TR":B==="de"?"de-DE":B==="fr"?"fr-FR":"en-US",c=r(),u=s(c),m={details:{tr:"Sat Detaylar",en:"Sale Details",fr:"Dtails de vente",de:"Verkaufsdetails"}[c]||"Sale Details",createdBy:{tr:"Oluturan",en:"Created by",fr:"Cr par",de:"Erstellt von"}[c]||"Created by",createdAt:{tr:"Oluturulma",en:"Created at",fr:"Cr le",de:"Erstellt am"}[c]||"Created at",updatedBy:{tr:"Son gncelleyen",en:"Last updated by",fr:"Dernire mise  jour par",de:"Zuletzt aktualisiert von"}[c]||"Last updated by",updatedAt:{tr:"Son gncelleme",en:"Last updated",fr:"Dernire mise  jour",de:"Zuletzt aktualisiert"}[c]||"Last updated",saleInfo:{tr:"Sat Bilgileri",en:"Sale Information",fr:"Informations de vente",de:"Verkaufsinformationen"}[c]||"Sale Information",saleDate:{tr:"Sat Tarihi",en:"Sale Date",fr:"Date de vente",de:"Verkaufsdatum"}[c]||"Sale Date",paymentMethod:{tr:"deme Yntemi",en:"Payment Method",fr:"Mthode de paiement",de:"Zahlungsmethode"}[c]||"Payment Method",sourceQuote:{tr:"Kaynak Teklif",en:"Source Quote",fr:"Devis source",de:"Quellangebot"}[c]||"Source Quote",customerInfo:{tr:"Hesap Bilgileri",en:"Account Information",fr:"Informations compte",de:"Accountinformationen"}[c]||"Account Information",customer:{tr:"Hesap",en:"Account",fr:"Compte",de:"Account"}[c]||"Account",email:{tr:"E-posta",en:"Email",fr:"E-mail",de:"E-Mail"}[c]||"Email",itemsInfo:{tr:"rn/Hizmet Bilgileri",en:"Product/Service Information",fr:"Informations Produit/Service",de:"Produkt-/Dienstleistungsinformationen"}[c]||"Product/Service Information",productService:{tr:"rn/Hizmet",en:"Product/Service",fr:"Produit/Service",de:"Produkt/Dienstleistung"}[c]||"Product/Service",quantity:{tr:"Miktar",en:"Quantity",fr:"Quantit",de:"Menge"}[c]||"Quantity",unitPrice:{tr:"Birim Fiyat",en:"Unit Price",fr:"Prix unitaire",de:"Stckpreis"}[c]||"Unit Price",total:{tr:"Toplam",en:"Total",fr:"Total",de:"Gesamt"}[c]||"Total",grandTotalExclVat:{tr:"Genel Toplam (KDV Hari):",en:"Grand Total (excl. VAT):",fr:"Total gnral (HT):",de:"Gesamtsumme (ohne MwSt.):"}[c]||"Grand Total (excl. VAT):",downloadPdf:{tr:"PDF ndir",en:"Download PDF",fr:"Tlcharger PDF",de:"PDF herunterladen"}[c]||"Download PDF",edit:{tr:"Dzenle",en:"Edit",fr:"Modifier",de:"Bearbeiten"}[c]||"Edit",delete:{tr:"Sil",en:"Delete",fr:"Supprimer",de:"Lschen"}[c]||"Delete",amountInfo:{tr:"Tutar Bilgileri",en:"Amount Information",fr:"Informations de montant",de:"Betragsinformationen"}[c]||"Amount Information",totalExclVat:{tr:"Toplam Tutar (KDV Hari):",en:"Total Amount (excl. VAT):",fr:"Montant total (HT):",de:"Gesamtbetrag (ohne MwSt.):"}[c]||"Total Amount (excl. VAT):",notes:{tr:"Notlar",en:"Notes",fr:"Notes",de:"Notizen"}[c]||"Notes"},x=B=>{if(!B)return"";const E=new Date(B);return Number.isNaN(E.getTime())?"":E.toLocaleDateString(u)},b=B=>{if(!B)return"";const E=new Date(B);return Number.isNaN(E.getTime())?"":E.toLocaleString(u)},p=B=>n(hl(B)),v=B=>{const E=hl(B.total);return E>0?E:hl(B.unitPrice)*hl(B.quantity)},y=Array.isArray(t.items)?t.items:[],N=y.length>0,T=N?y.reduce((B,E)=>B+v(E),0):0,_=hl(t.quantity),O=hl(t.unitPrice),H=N?0:O*_,F=!N&&(_>0||O>0),V={createdByName:t.createdByName||"",createdAt:b(t.createdAt),updatedByName:t.updatedByName||"",updatedAt:b(t.updatedAt)},q=B=>{const E=Kr(B),P=["completed","paid","invoiced","approved"].includes(E),A=["cancelled"].includes(E),k=P?"completed":A?"cancelled":"pending",S={completed:{label:zt(l,"completed"),class:"bg-green-100 text-green-800"},pending:{label:zt(l,"pending"),class:"bg-yellow-100 text-yellow-800"},cancelled:{label:zt(l,"cancelled"),class:"bg-red-100 text-red-800"}}[k]||{label:zt(l,E),class:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S.class}`,children:S.label})},W=B=>{const E=(B||"").toString().toLowerCase();return{cash:l("payments.methods.cash","Nakit"),card:l("payments.methods.card","Kredi/Banka Kart"),transfer:l("payments.methods.transfer","Havale/EFT"),check:l("payments.methods.check","ek")}[E]||B||""};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.saleNumber||`SAL-${t.id}`}),e.jsx("p",{className:"text-sm text-gray-500",children:l("sales.details",m.details)})]}),q(t.status)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[d&&e.jsxs("button",{onClick:()=>d(t),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Cs,{className:"w-4 h-4"}),e.jsx("span",{children:m.downloadPdf})]}),e.jsxs("button",{onClick:()=>f(t),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:m.edit})]}),h&&e.jsxs("button",{onClick:()=>h(t.id),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Xr,{className:"w-4 h-4"}),e.jsx("span",{children:m.delete})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"p-6",id:`sale-${t.id}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[m.createdBy,":"]})," ",e.jsx("span",{className:"font-medium",children:V.createdByName})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[m.createdAt,":"]})," ",e.jsx("span",{className:"font-medium",children:V.createdAt})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[m.updatedBy,":"]})," ",e.jsx("span",{className:"font-medium",children:V.updatedByName})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[m.updatedAt,":"]})," ",e.jsx("span",{className:"font-medium",children:V.updatedAt})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m.saleInfo}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[m.saleDate,":"]}),e.jsx("span",{className:"ml-2 font-medium",children:x(t.date)})]}),t.paymentMethod&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ja,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[m.paymentMethod,":"]}),e.jsx("span",{className:"ml-2 font-medium",children:W(t.paymentMethod)})]}),t?.sourceQuoteId&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Fr,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[m.sourceQuote,":"]}),e.jsx("button",{type:"button",className:"ml-2 font-medium text-indigo-600 hover:text-indigo-800",onClick:()=>{try{const B=String(t.sourceQuoteId||"").trim();if(!B)return;o(),setTimeout(()=>{try{window.location.hash=`quotes-edit:${B}`}catch{}},100)}catch{}},title:l("quotes.editModal.title",{defaultValue:"Teklifi Dzenle"}),children:String(t?.sourceQuoteNumber||"").trim()||l("common.open",{defaultValue:"A"})}),String(t?.sourceOpportunityId||"").trim()&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2 text-gray-300",children:"|"}),e.jsx("button",{type:"button",className:"font-medium text-indigo-600 hover:text-indigo-800",onClick:()=>{try{const B=String(t.sourceOpportunityId||"").trim();if(!B)return;o(),setTimeout(()=>{try{window.location.hash=`crm-deal:${B}`}catch{}},100)}catch{}},title:l("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"}),children:l("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"})})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m.customerInfo}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ds,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-600",children:[m.customer,":"]}),e.jsx("span",{className:"ml-2 font-medium",children:t.customerName||""})]}),t.customerEmail&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"w-4 h-4 text-gray-400 mr-2 text-xs",children:"@"}),e.jsxs("span",{className:"text-gray-600",children:[m.email,":"]}),e.jsx("span",{className:"ml-2 font-medium",children:t.customerEmail})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m.itemsInfo}),N?e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:m.productService}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:m.quantity}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:m.unitPrice}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:m.total})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map((B,E)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(bn,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900",children:B.productName})]})}),e.jsx("td",{className:"px-4 py-3 text-center text-gray-700",children:B.quantity}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-700",children:p(B.unitPrice)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium text-gray-900",children:p(v(B))})]},E))}),e.jsx("tfoot",{className:"bg-gray-50 border-t-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-4 py-4 text-right font-semibold text-gray-900",children:m.grandTotalExclVat}),e.jsx("td",{className:"px-4 py-4 text-right font-bold text-green-600 text-lg",children:p(T)})]})})]})}):e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(bn,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.productName||""})]}),F&&e.jsxs("div",{className:"text-sm text-gray-600 ml-8",children:[e.jsxs("span",{children:[m.quantity,": ",t.quantity??""]}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{children:[m.unitPrice,": ",t.unitPrice!=null?p(t.unitPrice):""]}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{children:[m.total,": ",p(H)]})]})]})]}),!N&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m.amountInfo}),e.jsx("div",{className:"bg-green-50 rounded-lg p-6 border border-green-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-green-800 font-medium text-lg",children:l("sales.totalExclVat",m.totalExclVat)}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:p(H)})]})})]}),t.notes&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m.notes}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-gray-700",children:t.notes})})]})]})]})})}const wE={TRY:{symbol:"",locale:"tr-TR",name:"Trk Liras"},USD:{symbol:"$",locale:"en-US",name:"US Dollar"},EUR:{symbol:"",locale:"en-US",name:"Euro"}},qv=(a,o="TRY")=>{const t=typeof a=="number"?a:0,f=wE[o];return f?`${f.symbol}${t.toLocaleString(f.locale,{minimumFractionDigits:2,maximumFractionDigits:2})}`:`${t.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function NE({isOpen:a=!0,onClose:o,bankAccount:t,bank:f,onEdit:h,onAddTransaction:d,onViewTransactions:n}){const{t:l,i18n:i}=$t(),r=t||f;if(!a||!r)return null;const s=()=>{const y=Et.getItem("i18nextLng");return y&&y.length>=2?y.slice(0,2).toLowerCase():(i.resolvedLanguage||i.language||"en").slice(0,2).toLowerCase()},c=y=>y==="tr"?"tr-TR":y==="de"?"de-DE":y==="fr"?"fr-FR":"en-US",u=s(),m={currentBalance:{tr:"Mevcut Bakiye",en:"Current Balance",fr:"Solde actuel",de:"Aktueller Kontostand"}[u]||"Current Balance",accountInfo:{tr:"Hesap Bilgileri",en:"Account Information",fr:"Informations du compte",de:"Kontoinformationen"}[u]||"Account Information",accountName:{tr:"Hesap Ad",en:"Account Name",fr:"Nom du compte",de:"Kontoname"}[u]||"Account Name",accountNo:{tr:"Hesap No",en:"Account No",fr:"N de compte",de:"Kontonummer"}[u]||"Account No",accountType:{tr:"Hesap Tr",en:"Account Type",fr:"Type de compte",de:"Kontotyp"}[u]||"Account Type",openingDate:{tr:"Al Tarihi",en:"Opening Date",fr:"Date d'ouverture",de:"Erffnungsdatum"}[u]||"Opening Date",bankInfo:{tr:"Banka Bilgileri",en:"Bank Information",fr:"Informations bancaires",de:"Bankinformationen"}[u]||"Bank Information",bank:{tr:"Banka",en:"Bank",fr:"Banque",de:"Bank"}[u]||"Bank",swiftBic:{tr:"SWIFT/BIC",en:"SWIFT/BIC",fr:"SWIFT/BIC",de:"SWIFT/BIC"}[u]||"SWIFT/BIC",routingNumber:{tr:"Routing Numaras",en:"Routing Number",fr:"Numro de routage",de:"Routing-Nummer"}[u]||"Routing Number",branchCode:{tr:"ube Kodu",en:"Branch Code",fr:"Code agence",de:"Filialcode"}[u]||"Branch Code",currency:{tr:"Para Birimi",en:"Currency",fr:"Devise",de:"Whrung"}[u]||"Currency",quickActions:{tr:"Hzl lemler",en:"Quick Actions",fr:"Actions rapides",de:"Schnellaktionen"}[u]||"Quick Actions",copyIban:{tr:"IBAN Kopyala",en:"Copy IBAN",fr:"Copier IBAN",de:"IBAN kopieren"}[u]||"Copy IBAN",ibanCopied:{tr:"IBAN kopyaland!",en:"IBAN copied!",fr:"IBAN copi!",de:"IBAN kopiert!"}[u]||"IBAN copied!",notSpecified:{tr:"Belirtilmemi",en:"Not specified",fr:"Non spcifi",de:"Nicht angegeben"}[u]||"Not specified"},x=y=>y?new Date(y).toLocaleDateString(c(u)):m.notSpecified,b=(y,N="TRY")=>qv(y,N),p=y=>{const N={tr:{checking:"Vadesiz Hesap",savings:"Vadeli Hesap",business:"Ticari Hesap"},en:{checking:"Checking Account",savings:"Savings Account",business:"Business Account"},fr:{checking:"Compte courant",savings:"Compte pargne",business:"Compte professionnel"},de:{checking:"Girokonto",savings:"Sparkonto",business:"Geschftskonto"}};return(N[u]||N.en)[y]||y},v=y=>{const N={tr:{TRY:"Trk Liras",USD:"Amerikan Dolar",EUR:"Euro",GBP:"ngiliz Sterlini"},en:{TRY:"Turkish Lira",USD:"US Dollar",EUR:"Euro",GBP:"British Pound"},fr:{TRY:"Livre turque",USD:"Dollar amricain",EUR:"Euro",GBP:"Livre sterling"},de:{TRY:"Trkische Lira",USD:"US-Dollar",EUR:"Euro",GBP:"Britisches Pfund"}};return(N[u]||N.en)[y]||y};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(ja,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.bankName}),e.jsx("p",{className:"text-sm text-gray-500",children:l("banks.viewDetails",{defaultValue:"Banka Hesap Detaylar"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>h(r),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:l("common.edit"),children:e.jsx(vs,{className:"w-5 h-5 text-gray-500"})}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"p-6",id:`bank-${r.id}`,children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:m.currentBalance}),e.jsx("p",{className:"text-3xl font-bold",children:b(r.balance,r.currency)}),e.jsx("p",{className:"text-green-100 text-sm mt-1",children:v(r.currency)})]}),e.jsx("div",{className:"text-right",children:(()=>{const y=r?.isActive!==!1;return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${y?"bg-green-400 text-green-900":"bg-gray-400 text-gray-900"}`,children:y?l("chartOfAccounts.active",{defaultValue:"Aktif"}):l("chartOfAccounts.passive",{defaultValue:"Pasif"})})})()})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m.accountInfo}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ds,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[m.accountName,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:r.accountName})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Du,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[m.accountNo,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:r.accountNumber})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(em,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[m.accountType,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:p(r.accountType)})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[m.openingDate,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:x(r.createdAt)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m.bankInfo}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ts,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[m.bank,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:r.bankName})]})]}),e.jsxs("div",{className:"flex items-start text-sm",children:[e.jsx(oa,{className:"w-4 h-4 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"IBAN:"}),e.jsx("div",{className:"ml-2 font-medium text-gray-900 font-mono text-xs bg-gray-100 p-2 rounded mt-1",children:r.iban})]})]}),!!r.swiftBic&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(oa,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[m.swiftBic,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:r.swiftBic})]})]}),!!r.routingNumber&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Du,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[m.routingNumber,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:r.routingNumber})]})]}),!!r.branchCode&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Du,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[m.branchCode,":"]}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:r.branchCode})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Bn,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-600",children:[m.currency,":"]}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[r.currency," - ",v(r.currency)]})]})]})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:m.quickActions}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsxs("button",{onClick:()=>{const y=r.iban.replace(/\s/g,"");navigator.clipboard.writeText(y),alert(m.ibanCopied)},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx(oa,{className:"w-4 h-4"}),e.jsx("span",{children:m.copyIban})]})})]})]})]})})}const ui=({isOpen:a,title:o,message:t,confirmText:f,cancelText:h,danger:d=!1,onConfirm:n,onCancel:l})=>{const{t:i}=$t("common"),r=o??i("confirm",{defaultValue:"Onay"}),s=f??i("yes",{defaultValue:"Evet"}),c=h??i("cancel",{defaultValue:"ptal"});return a?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:l}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[e.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r})}),e.jsx("div",{className:"px-5 py-4 text-gray-700 whitespace-pre-line",children:t}),e.jsxs("div",{className:"px-5 py-4 border-t border-gray-200 flex justify-end gap-2",children:[e.jsx("button",{onClick:l,className:"inline-flex items-center px-4 py-2 rounded-md border border-gray-200 bg-white text-gray-700 hover:bg-gray-50",children:c}),e.jsx("button",{onClick:n,className:`inline-flex items-center px-4 py-2 rounded-md text-white focus:outline-none ${d?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:s})]})]})]}):null};const{entries:$v,setPrototypeOf:gy,isFrozen:kE,getPrototypeOf:jE,getOwnPropertyDescriptor:SE}=Object;let{freeze:wn,seal:la,create:Ip}=Object,{apply:Mp,construct:Rp}=typeof Reflect<"u"&&Reflect;wn||(wn=function(o){return o});la||(la=function(o){return o});Mp||(Mp=function(o,t){for(var f=arguments.length,h=new Array(f>2?f-2:0),d=2;d<f;d++)h[d-2]=arguments[d];return o.apply(t,h)});Rp||(Rp=function(o){for(var t=arguments.length,f=new Array(t>1?t-1:0),h=1;h<t;h++)f[h-1]=arguments[h];return new o(...f)});const hu=Nn(Array.prototype.forEach),CE=Nn(Array.prototype.lastIndexOf),xy=Nn(Array.prototype.pop),xc=Nn(Array.prototype.push),AE=Nn(Array.prototype.splice),Ru=Nn(String.prototype.toLowerCase),If=Nn(String.prototype.toString),Mf=Nn(String.prototype.match),yc=Nn(String.prototype.replace),TE=Nn(String.prototype.indexOf),EE=Nn(String.prototype.trim),ka=Nn(Object.prototype.hasOwnProperty),xn=Nn(RegExp.prototype.test),bc=DE(TypeError);function Nn(a){return function(o){o instanceof RegExp&&(o.lastIndex=0);for(var t=arguments.length,f=new Array(t>1?t-1:0),h=1;h<t;h++)f[h-1]=arguments[h];return Mp(a,o,f)}}function DE(a){return function(){for(var o=arguments.length,t=new Array(o),f=0;f<o;f++)t[f]=arguments[f];return Rp(a,t)}}function Or(a,o){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ru;gy&&gy(a,null);let f=o.length;for(;f--;){let h=o[f];if(typeof h=="string"){const d=t(h);d!==h&&(kE(o)||(o[f]=d),h=d)}a[h]=!0}return a}function _E(a){for(let o=0;o<a.length;o++)ka(a,o)||(a[o]=null);return a}function ni(a){const o=Ip(null);for(const[t,f]of $v(a))ka(a,t)&&(Array.isArray(f)?o[t]=_E(f):f&&typeof f=="object"&&f.constructor===Object?o[t]=ni(f):o[t]=f);return o}function vc(a,o){for(;a!==null;){const f=SE(a,o);if(f){if(f.get)return Nn(f.get);if(typeof f.value=="function")return Nn(f.value)}a=jE(a)}function t(){return null}return t}const yy=wn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rf=wn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),zf=wn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),PE=wn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Lf=wn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),IE=wn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),by=wn(["#text"]),vy=wn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Of=wn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wy=wn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fu=wn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ME=la(/\{\{[\w\W]*|[\w\W]*\}\}/gm),RE=la(/<%[\w\W]*|[\w\W]*%>/gm),zE=la(/\$\{[\w\W]*/gm),LE=la(/^data-[\-\w.\u00B7-\uFFFF]+$/),OE=la(/^aria-[\-\w]+$/),Hv=la(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),FE=la(/^(?:\w+script|data):/i),BE=la(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Kv=la(/^html$/i),UE=la(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ny=Object.freeze({__proto__:null,ARIA_ATTR:OE,ATTR_WHITESPACE:BE,CUSTOM_ELEMENT:UE,DATA_ATTR:LE,DOCTYPE_NAME:Kv,ERB_EXPR:RE,IS_ALLOWED_URI:Hv,IS_SCRIPT_OR_DATA:FE,MUSTACHE_EXPR:ME,TMPLIT_EXPR:zE});const wc={element:1,text:3,progressingInstruction:7,comment:8,document:9},VE=function(){return typeof window>"u"?null:window},qE=function(o,t){if(typeof o!="object"||typeof o.createPolicy!="function")return null;let f=null;const h="data-tt-policy-suffix";t&&t.hasAttribute(h)&&(f=t.getAttribute(h));const d="dompurify"+(f?"#"+f:"");try{return o.createPolicy(d,{createHTML(n){return n},createScriptURL(n){return n}})}catch{return console.warn("TrustedTypes policy "+d+" could not be created."),null}},ky=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Gv(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:VE();const o=Mt=>Gv(Mt);if(o.version="3.3.0",o.removed=[],!a||!a.document||a.document.nodeType!==wc.document||!a.Element)return o.isSupported=!1,o;let{document:t}=a;const f=t,h=f.currentScript,{DocumentFragment:d,HTMLTemplateElement:n,Node:l,Element:i,NodeFilter:r,NamedNodeMap:s=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:c,DOMParser:u,trustedTypes:m}=a,x=i.prototype,b=vc(x,"cloneNode"),p=vc(x,"remove"),v=vc(x,"nextSibling"),y=vc(x,"childNodes"),N=vc(x,"parentNode");if(typeof n=="function"){const Mt=t.createElement("template");Mt.content&&Mt.content.ownerDocument&&(t=Mt.content.ownerDocument)}let T,_="";const{implementation:O,createNodeIterator:H,createDocumentFragment:F,getElementsByTagName:V}=t,{importNode:q}=f;let W=ky();o.isSupported=typeof $v=="function"&&typeof N=="function"&&O&&O.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:B,ERB_EXPR:E,TMPLIT_EXPR:P,DATA_ATTR:A,ARIA_ATTR:k,IS_SCRIPT_OR_DATA:j,ATTR_WHITESPACE:S,CUSTOM_ELEMENT:C}=Ny;let{IS_ALLOWED_URI:D}=Ny,R=null;const L=Or({},[...yy,...Rf,...zf,...Lf,...by]);let Y=null;const X=Or({},[...vy,...Of,...wy,...fu]);let ae=Object.seal(Ip(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,Q=null;const z=Object.seal(Ip(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let M=!0,U=!0,te=!1,ie=!0,se=!1,le=!0,Ne=!1,ke=!1,Z=!1,ce=!1,ve=!1,De=!1,Ae=!0,Ie=!1;const Ue="user-content-";let Ge=!0,Le=!1,at={},ut=null;const Ce=Or({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let it=null;const xt=Or({},["audio","video","img","source","image","track"]);let jt=null;const Ee=Or({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xe="http://www.w3.org/1998/Math/MathML",Be="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml";let ye=$e,oe=!1,me=null;const ue=Or({},[xe,Be,$e],If);let ze=Or({},["mi","mo","mn","ms","mtext"]),tt=Or({},["annotation-xml"]);const kt=Or({},["title","style","font","a","script"]);let we=null;const st=["application/xhtml+xml","text/html"],wt="text/html";let pe=null,Qe=null;const fe=t.createElement("form"),He=function(Re){return Re instanceof RegExp||Re instanceof Function},lt=function(){let Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Qe&&Qe===Re)){if((!Re||typeof Re!="object")&&(Re={}),Re=ni(Re),we=st.indexOf(Re.PARSER_MEDIA_TYPE)===-1?wt:Re.PARSER_MEDIA_TYPE,pe=we==="application/xhtml+xml"?If:Ru,R=ka(Re,"ALLOWED_TAGS")?Or({},Re.ALLOWED_TAGS,pe):L,Y=ka(Re,"ALLOWED_ATTR")?Or({},Re.ALLOWED_ATTR,pe):X,me=ka(Re,"ALLOWED_NAMESPACES")?Or({},Re.ALLOWED_NAMESPACES,If):ue,jt=ka(Re,"ADD_URI_SAFE_ATTR")?Or(ni(Ee),Re.ADD_URI_SAFE_ATTR,pe):Ee,it=ka(Re,"ADD_DATA_URI_TAGS")?Or(ni(xt),Re.ADD_DATA_URI_TAGS,pe):xt,ut=ka(Re,"FORBID_CONTENTS")?Or({},Re.FORBID_CONTENTS,pe):Ce,$=ka(Re,"FORBID_TAGS")?Or({},Re.FORBID_TAGS,pe):ni({}),Q=ka(Re,"FORBID_ATTR")?Or({},Re.FORBID_ATTR,pe):ni({}),at=ka(Re,"USE_PROFILES")?Re.USE_PROFILES:!1,M=Re.ALLOW_ARIA_ATTR!==!1,U=Re.ALLOW_DATA_ATTR!==!1,te=Re.ALLOW_UNKNOWN_PROTOCOLS||!1,ie=Re.ALLOW_SELF_CLOSE_IN_ATTR!==!1,se=Re.SAFE_FOR_TEMPLATES||!1,le=Re.SAFE_FOR_XML!==!1,Ne=Re.WHOLE_DOCUMENT||!1,ce=Re.RETURN_DOM||!1,ve=Re.RETURN_DOM_FRAGMENT||!1,De=Re.RETURN_TRUSTED_TYPE||!1,Z=Re.FORCE_BODY||!1,Ae=Re.SANITIZE_DOM!==!1,Ie=Re.SANITIZE_NAMED_PROPS||!1,Ge=Re.KEEP_CONTENT!==!1,Le=Re.IN_PLACE||!1,D=Re.ALLOWED_URI_REGEXP||Hv,ye=Re.NAMESPACE||$e,ze=Re.MATHML_TEXT_INTEGRATION_POINTS||ze,tt=Re.HTML_INTEGRATION_POINTS||tt,ae=Re.CUSTOM_ELEMENT_HANDLING||{},Re.CUSTOM_ELEMENT_HANDLING&&He(Re.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ae.tagNameCheck=Re.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Re.CUSTOM_ELEMENT_HANDLING&&He(Re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ae.attributeNameCheck=Re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Re.CUSTOM_ELEMENT_HANDLING&&typeof Re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ae.allowCustomizedBuiltInElements=Re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),se&&(U=!1),ve&&(ce=!0),at&&(R=Or({},by),Y=[],at.html===!0&&(Or(R,yy),Or(Y,vy)),at.svg===!0&&(Or(R,Rf),Or(Y,Of),Or(Y,fu)),at.svgFilters===!0&&(Or(R,zf),Or(Y,Of),Or(Y,fu)),at.mathMl===!0&&(Or(R,Lf),Or(Y,wy),Or(Y,fu))),Re.ADD_TAGS&&(typeof Re.ADD_TAGS=="function"?z.tagCheck=Re.ADD_TAGS:(R===L&&(R=ni(R)),Or(R,Re.ADD_TAGS,pe))),Re.ADD_ATTR&&(typeof Re.ADD_ATTR=="function"?z.attributeCheck=Re.ADD_ATTR:(Y===X&&(Y=ni(Y)),Or(Y,Re.ADD_ATTR,pe))),Re.ADD_URI_SAFE_ATTR&&Or(jt,Re.ADD_URI_SAFE_ATTR,pe),Re.FORBID_CONTENTS&&(ut===Ce&&(ut=ni(ut)),Or(ut,Re.FORBID_CONTENTS,pe)),Ge&&(R["#text"]=!0),Ne&&Or(R,["html","head","body"]),R.table&&(Or(R,["tbody"]),delete $.tbody),Re.TRUSTED_TYPES_POLICY){if(typeof Re.TRUSTED_TYPES_POLICY.createHTML!="function")throw bc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Re.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw bc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=Re.TRUSTED_TYPES_POLICY,_=T.createHTML("")}else T===void 0&&(T=qE(m,h)),T!==null&&typeof _=="string"&&(_=T.createHTML(""));wn&&wn(Re),Qe=Re}},Pe=Or({},[...Rf,...zf,...PE]),rt=Or({},[...Lf,...IE]),je=function(Re){let pt=N(Re);(!pt||!pt.tagName)&&(pt={namespaceURI:ye,tagName:"template"});const Ot=Ru(Re.tagName),Se=Ru(pt.tagName);return me[Re.namespaceURI]?Re.namespaceURI===Be?pt.namespaceURI===$e?Ot==="svg":pt.namespaceURI===xe?Ot==="svg"&&(Se==="annotation-xml"||ze[Se]):!!Pe[Ot]:Re.namespaceURI===xe?pt.namespaceURI===$e?Ot==="math":pt.namespaceURI===Be?Ot==="math"&&tt[Se]:!!rt[Ot]:Re.namespaceURI===$e?pt.namespaceURI===Be&&!tt[Se]||pt.namespaceURI===xe&&!ze[Se]?!1:!rt[Ot]&&(kt[Ot]||!Pe[Ot]):!!(we==="application/xhtml+xml"&&me[Re.namespaceURI]):!1},Me=function(Re){xc(o.removed,{element:Re});try{N(Re).removeChild(Re)}catch{p(Re)}},Ye=function(Re,pt){try{xc(o.removed,{attribute:pt.getAttributeNode(Re),from:pt})}catch{xc(o.removed,{attribute:null,from:pt})}if(pt.removeAttribute(Re),Re==="is")if(ce||ve)try{Me(pt)}catch{}else try{pt.setAttribute(Re,"")}catch{}},dt=function(Re){let pt=null,Ot=null;if(Z)Re="<remove></remove>"+Re;else{const ft=Mf(Re,/^[\r\n\t ]+/);Ot=ft&&ft[0]}we==="application/xhtml+xml"&&ye===$e&&(Re='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Re+"</body></html>");const Se=T?T.createHTML(Re):Re;if(ye===$e)try{pt=new u().parseFromString(Se,we)}catch{}if(!pt||!pt.documentElement){pt=O.createDocument(ye,"template",null);try{pt.documentElement.innerHTML=oe?_:Se}catch{}}const qe=pt.body||pt.documentElement;return Re&&Ot&&qe.insertBefore(t.createTextNode(Ot),qe.childNodes[0]||null),ye===$e?V.call(pt,Ne?"html":"body")[0]:Ne?pt.documentElement:qe},mt=function(Re){return H.call(Re.ownerDocument||Re,Re,r.SHOW_ELEMENT|r.SHOW_COMMENT|r.SHOW_TEXT|r.SHOW_PROCESSING_INSTRUCTION|r.SHOW_CDATA_SECTION,null)},yt=function(Re){return Re instanceof c&&(typeof Re.nodeName!="string"||typeof Re.textContent!="string"||typeof Re.removeChild!="function"||!(Re.attributes instanceof s)||typeof Re.removeAttribute!="function"||typeof Re.setAttribute!="function"||typeof Re.namespaceURI!="string"||typeof Re.insertBefore!="function"||typeof Re.hasChildNodes!="function")},Gt=function(Re){return typeof l=="function"&&Re instanceof l};function Lt(Mt,Re,pt){hu(Mt,Ot=>{Ot.call(o,Re,pt,Qe)})}const Oe=function(Re){let pt=null;if(Lt(W.beforeSanitizeElements,Re,null),yt(Re))return Me(Re),!0;const Ot=pe(Re.nodeName);if(Lt(W.uponSanitizeElement,Re,{tagName:Ot,allowedTags:R}),le&&Re.hasChildNodes()&&!Gt(Re.firstElementChild)&&xn(/<[/\w!]/g,Re.innerHTML)&&xn(/<[/\w!]/g,Re.textContent)||Re.nodeType===wc.progressingInstruction||le&&Re.nodeType===wc.comment&&xn(/<[/\w]/g,Re.data))return Me(Re),!0;if(!(z.tagCheck instanceof Function&&z.tagCheck(Ot))&&(!R[Ot]||$[Ot])){if(!$[Ot]&&ht(Ot)&&(ae.tagNameCheck instanceof RegExp&&xn(ae.tagNameCheck,Ot)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(Ot)))return!1;if(Ge&&!ut[Ot]){const Se=N(Re)||Re.parentNode,qe=y(Re)||Re.childNodes;if(qe&&Se){const ft=qe.length;for(let Ct=ft-1;Ct>=0;--Ct){const er=b(qe[Ct],!0);er.__removalCount=(Re.__removalCount||0)+1,Se.insertBefore(er,v(Re))}}}return Me(Re),!0}return Re instanceof i&&!je(Re)||(Ot==="noscript"||Ot==="noembed"||Ot==="noframes")&&xn(/<\/no(script|embed|frames)/i,Re.innerHTML)?(Me(Re),!0):(se&&Re.nodeType===wc.text&&(pt=Re.textContent,hu([B,E,P],Se=>{pt=yc(pt,Se," ")}),Re.textContent!==pt&&(xc(o.removed,{element:Re.cloneNode()}),Re.textContent=pt)),Lt(W.afterSanitizeElements,Re,null),!1)},ot=function(Re,pt,Ot){if(Ae&&(pt==="id"||pt==="name")&&(Ot in t||Ot in fe))return!1;if(!(U&&!Q[pt]&&xn(A,pt))){if(!(M&&xn(k,pt))){if(!(z.attributeCheck instanceof Function&&z.attributeCheck(pt,Re))){if(!Y[pt]||Q[pt]){if(!(ht(Re)&&(ae.tagNameCheck instanceof RegExp&&xn(ae.tagNameCheck,Re)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(Re))&&(ae.attributeNameCheck instanceof RegExp&&xn(ae.attributeNameCheck,pt)||ae.attributeNameCheck instanceof Function&&ae.attributeNameCheck(pt,Re))||pt==="is"&&ae.allowCustomizedBuiltInElements&&(ae.tagNameCheck instanceof RegExp&&xn(ae.tagNameCheck,Ot)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(Ot))))return!1}else if(!jt[pt]){if(!xn(D,yc(Ot,S,""))){if(!((pt==="src"||pt==="xlink:href"||pt==="href")&&Re!=="script"&&TE(Ot,"data:")===0&&it[Re])){if(!(te&&!xn(j,yc(Ot,S,"")))){if(Ot)return!1}}}}}}}return!0},ht=function(Re){return Re!=="annotation-xml"&&Mf(Re,C)},It=function(Re){Lt(W.beforeSanitizeAttributes,Re,null);const{attributes:pt}=Re;if(!pt||yt(Re))return;const Ot={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y,forceKeepAttr:void 0};let Se=pt.length;for(;Se--;){const qe=pt[Se],{name:ft,namespaceURI:Ct,value:er}=qe,Rt=pe(ft),Ht=er;let ir=ft==="value"?Ht:EE(Ht);if(Ot.attrName=Rt,Ot.attrValue=ir,Ot.keepAttr=!0,Ot.forceKeepAttr=void 0,Lt(W.uponSanitizeAttribute,Re,Ot),ir=Ot.attrValue,Ie&&(Rt==="id"||Rt==="name")&&(Ye(ft,Re),ir=Ue+ir),le&&xn(/((--!?|])>)|<\/(style|title|textarea)/i,ir)){Ye(ft,Re);continue}if(Rt==="attributename"&&Mf(ir,"href")){Ye(ft,Re);continue}if(Ot.forceKeepAttr)continue;if(!Ot.keepAttr){Ye(ft,Re);continue}if(!ie&&xn(/\/>/i,ir)){Ye(ft,Re);continue}se&&hu([B,E,P],qt=>{ir=yc(ir,qt," ")});const Zt=pe(Re.nodeName);if(!ot(Zt,Rt,ir)){Ye(ft,Re);continue}if(T&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Ct)switch(m.getAttributeType(Zt,Rt)){case"TrustedHTML":{ir=T.createHTML(ir);break}case"TrustedScriptURL":{ir=T.createScriptURL(ir);break}}if(ir!==Ht)try{Ct?Re.setAttributeNS(Ct,ft,ir):Re.setAttribute(ft,ir),yt(Re)?Me(Re):xy(o.removed)}catch{Ye(ft,Re)}}Lt(W.afterSanitizeAttributes,Re,null)},Tt=function Mt(Re){let pt=null;const Ot=mt(Re);for(Lt(W.beforeSanitizeShadowDOM,Re,null);pt=Ot.nextNode();)Lt(W.uponSanitizeShadowNode,pt,null),Oe(pt),It(pt),pt.content instanceof d&&Mt(pt.content);Lt(W.afterSanitizeShadowDOM,Re,null)};return o.sanitize=function(Mt){let Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pt=null,Ot=null,Se=null,qe=null;if(oe=!Mt,oe&&(Mt="<!-->"),typeof Mt!="string"&&!Gt(Mt))if(typeof Mt.toString=="function"){if(Mt=Mt.toString(),typeof Mt!="string")throw bc("dirty is not a string, aborting")}else throw bc("toString is not a function");if(!o.isSupported)return Mt;if(ke||lt(Re),o.removed=[],typeof Mt=="string"&&(Le=!1),Le){if(Mt.nodeName){const er=pe(Mt.nodeName);if(!R[er]||$[er])throw bc("root node is forbidden and cannot be sanitized in-place")}}else if(Mt instanceof l)pt=dt("<!---->"),Ot=pt.ownerDocument.importNode(Mt,!0),Ot.nodeType===wc.element&&Ot.nodeName==="BODY"||Ot.nodeName==="HTML"?pt=Ot:pt.appendChild(Ot);else{if(!ce&&!se&&!Ne&&Mt.indexOf("<")===-1)return T&&De?T.createHTML(Mt):Mt;if(pt=dt(Mt),!pt)return ce?null:De?_:""}pt&&Z&&Me(pt.firstChild);const ft=mt(Le?Mt:pt);for(;Se=ft.nextNode();)Oe(Se),It(Se),Se.content instanceof d&&Tt(Se.content);if(Le)return Mt;if(ce){if(ve)for(qe=F.call(pt.ownerDocument);pt.firstChild;)qe.appendChild(pt.firstChild);else qe=pt;return(Y.shadowroot||Y.shadowrootmode)&&(qe=q.call(f,qe,!0)),qe}let Ct=Ne?pt.outerHTML:pt.innerHTML;return Ne&&R["!doctype"]&&pt.ownerDocument&&pt.ownerDocument.doctype&&pt.ownerDocument.doctype.name&&xn(Kv,pt.ownerDocument.doctype.name)&&(Ct="<!DOCTYPE "+pt.ownerDocument.doctype.name+`>
`+Ct),se&&hu([B,E,P],er=>{Ct=yc(Ct,er," ")}),T&&De?T.createHTML(Ct):Ct},o.setConfig=function(){let Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};lt(Mt),ke=!0},o.clearConfig=function(){Qe=null,ke=!1},o.isValidAttribute=function(Mt,Re,pt){Qe||lt({});const Ot=pe(Mt),Se=pe(Re);return ot(Ot,Se,pt)},o.addHook=function(Mt,Re){typeof Re=="function"&&xc(W[Mt],Re)},o.removeHook=function(Mt,Re){if(Re!==void 0){const pt=CE(W[Mt],Re);return pt===-1?void 0:AE(W[Mt],pt,1)[0]}return xy(W[Mt])},o.removeHooks=function(Mt){W[Mt]=[]},o.removeAllHooks=function(){W=ky()},o}var Wv=Gv();const CP=Object.freeze(Object.defineProperty({__proto__:null,default:Wv},Symbol.toStringTag,{value:"Module"})),Yv=a=>{const o=/^(?:(?:https?|mailto|ftp|tel|file|sms|cid|data):|[^a-z]|[a-z+.-]+(?:[^a-z+.-]|$))/i;return Wv.sanitize(a,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","br","strong","b","em","i","u","s","code","pre","blockquote","hr","ul","ol","li","a","img","table","thead","tbody","tr","th","td"],ALLOWED_ATTR:["href","target","rel","src","alt","title","colspan","rowspan"],ALLOW_DATA_ATTR:!1,ALLOWED_URI_REGEXP:o,FORBID_TAGS:["script","style"]})},$E=a=>{const o=a.description??a.name??a.productName??"",t=Number(a.quantity??a.qty??0),f=Number(a.unitPrice??a.price??a.unit_price??0),h=Number(a.total??(Number.isFinite(t)&&Number.isFinite(f)?t*f:0)),d=a.id??`${o}-${f}-${h}`;return{key:String(d),description:o,quantity:t,unitPrice:f,total:h}},Qv=({isOpen:a,onClose:o,quote:t,onEdit:f,onChangeStatus:h,onRevise:d})=>{const{t:n,i18n:l}=$t(),{formatCurrency:i}=Jr(),[r,s]=_t.useState(!1),[c,u]=_t.useState(!1),[m,x]=_t.useState(!1),b=()=>{const B=Et.getItem("i18nextLng");return B&&B.length>=2?B.slice(0,2).toLowerCase():(l.resolvedLanguage||l.language||"en").slice(0,2).toLowerCase()},p=B=>B==="tr"?"tr-TR":B==="de"?"de-DE":B==="fr"?"fr-FR":"en-US",v=b(),y={createdBy:{tr:"Oluturan",en:"Created by",fr:"Cr par",de:"Erstellt von"}[v]||"Created by",createdAt:{tr:"Oluturulma",en:"Created at",fr:"Cr le",de:"Erstellt am"}[v]||"Created at",updatedBy:{tr:"Son gncelleyen",en:"Last updated by",fr:"Dernire mise  jour par",de:"Zuletzt aktualisiert von"}[v]||"Last updated by",updatedAt:{tr:"Son gncelleme",en:"Last updated",fr:"Dernire mise  jour",de:"Zuletzt aktualisiert"}[v]||"Last updated",status:{draft:{tr:"Taslak",en:"Draft",fr:"Brouillon",de:"Entwurf"}[v]||"Draft",sent:{tr:"Gnderildi",en:"Sent",fr:"Envoy",de:"Gesendet"}[v]||"Sent",viewed:{tr:"Grntlendi",en:"Viewed",fr:"Consult",de:"Gesehen"}[v]||"Viewed",accepted:{tr:"Kabul Edildi",en:"Accepted",fr:"Accept",de:"Angenommen"}[v]||"Accepted",declined:{tr:"Reddedildi",en:"Declined",fr:"Refus",de:"Abgelehnt"}[v]||"Declined",expired:{tr:"Sresi Doldu",en:"Expired",fr:"Expir",de:"Abgelaufen"}[v]||"Expired"}},N={draft:{label:n("quotes.statusLabels.draft",{defaultValue:y.status.draft}),className:"bg-gray-100 text-gray-800"},sent:{label:n("quotes.statusLabels.sent",{defaultValue:y.status.sent}),className:"bg-blue-100 text-blue-800"},viewed:{label:n("quotes.statusLabels.viewed",{defaultValue:y.status.viewed}),className:"bg-indigo-100 text-indigo-800"},accepted:{label:n("quotes.statusLabels.accepted",{defaultValue:y.status.accepted}),className:"bg-green-100 text-green-800"},declined:{label:n("quotes.statusLabels.declined",{defaultValue:y.status.declined}),className:"bg-red-100 text-red-800"},expired:{label:n("quotes.statusLabels.expired",{defaultValue:y.status.expired}),className:"bg-yellow-100 text-yellow-800"}},T=G.useMemo(()=>{if(!t?.validUntil)return null;const B=new Date(t.validUntil).getTime(),E=new Date().setHours(0,0,0,0);return Math.ceil((B-E)/(1e3*60*60*24))},[t?.validUntil]);if(!a||!t)return null;const _=B=>new Date(B).toLocaleDateString(p(v)),O=B=>{const E=String(B),P=y.status;switch(E){case"draft":return n("quotes.statusLabels.draft",{defaultValue:P.draft});case"sent":return n("quotes.statusLabels.sent",{defaultValue:P.sent});case"viewed":return n("quotes.statusLabels.viewed",{defaultValue:P.viewed});case"accepted":return n("quotes.statusLabels.accepted",{defaultValue:P.accepted});case"declined":return n("quotes.statusLabels.declined",{defaultValue:P.declined});case"expired":return n("quotes.statusLabels.expired",{defaultValue:P.expired});default:return B}},H=new Date().toISOString().slice(0,10),F=t.status==="accepted"||t.status==="declined"||t.status==="expired",V=t.status==="accepted",q=t.validUntil?t.validUntil<H:!1,W=!F&&q;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:B=>B.target===B.currentTarget&&o(),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[t.quoteNumber,t.version&&t.version>1&&e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:n("quotes.version",{n:t.version})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:n("quotes.viewModal.details")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N[t.status].className}`,children:N[t.status].label}),t.opportunityId&&e.jsxs("button",{type:"button",onClick:()=>{try{const B=String(t.opportunityId||"").trim();if(!B)return;o(),setTimeout(()=>{try{window.location.hash=`crm-deal:${B}`}catch{}},100)}catch{}},className:"inline-flex items-center gap-1 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200",title:n("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"}),children:[e.jsx(fs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:n("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"})})]}),V&&e.jsxs("span",{className:"ml-1 inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",title:n("quotes.lockedHint")||"Kabul edildi. Bu teklif kilitli.",children:[e.jsx(Yn,{className:"w-3 h-3"}),n("quotes.locked",{defaultValue:"Kilitli"})]}),W&&e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:n("quotes.statusLabels.expired")}),d&&F&&t.status!=="accepted"&&e.jsxs("button",{onClick:()=>{o(),setTimeout(()=>d(t),100)},className:"inline-flex items-center gap-1 px-3 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",title:n("quotes.actions.revise"),children:[e.jsx(Hc,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:n("quotes.actions.revise")})]}),h&&t.status==="draft"&&e.jsxs("button",{onClick:()=>h(t,"sent"),className:"inline-flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",title:n("quotes.actions.send"),children:[e.jsx(wv,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:n("quotes.actions.send")})]}),h&&(t.status==="sent"||t.status==="viewed")&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",title:n("quotes.actions.accept"),children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:n("quotes.actions.accept")})]}),e.jsxs("button",{onClick:()=>h(t,"declined"),className:"inline-flex items-center gap-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",title:n("quotes.actions.decline"),children:[e.jsx(Tl,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:n("quotes.actions.decline")})]})]}),f&&!V&&e.jsx("button",{onClick:()=>{o(),setTimeout(()=>f(t),100)},className:"px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[y.createdBy,":"]})," ",e.jsx("span",{className:"font-medium",children:t.createdByName||""})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[y.createdAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.createdAt?new Date(t.createdAt).toLocaleString(p(v)):""})]})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[y.updatedBy,":"]})," ",e.jsx("span",{className:"font-medium",children:t.updatedByName||""})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500",children:[y.updatedAt,":"]})," ",e.jsx("span",{className:"font-medium",children:t.updatedAt?new Date(t.updatedAt).toLocaleString(p(v)):""})]})]})]}),V&&e.jsxs("div",{className:"rounded-md border border-gray-200 bg-gray-50 text-gray-800 px-3 py-2 text-sm",children:[" ",n("quotes.lockedBanner",{defaultValue:"Bu teklif kabul edildi ve kilitlidir. Dzenleme veya silme yaplamaz."})]}),Array.isArray(t.items)&&t.items.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:n("invoices.productsAndServices")}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:n("invoices.description")}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:n("invoices.quantity")}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:n("invoices.unitPriceExclVAT")}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:n("invoices.totalInclVAT")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(t.items??[]).map(B=>{const E=$E(B);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm text-gray-800",children:E.description}),e.jsx("td",{className:"px-3 py-2 text-sm text-right text-gray-700",children:E.quantity}),e.jsx("td",{className:"px-3 py-2 text-sm text-right text-gray-700",children:i(E.unitPrice,t.currency)}),e.jsx("td",{className:"px-3 py-2 text-sm text-right font-medium text-gray-900",children:i(E.total,t.currency)})]},E.key)})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(Vr,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{className:"mr-2 text-gray-500",children:[n("quotes.table.date"),":"]}),e.jsx("span",{className:"font-medium",children:_(t.issueDate)})]}),t.validUntil&&e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(Vr,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{className:"mr-2 text-gray-500",children:[n("quotes.validUntil"),":"]}),e.jsx("span",{className:"font-medium",children:_(t.validUntil)}),typeof T=="number"&&T>=0&&!W&&e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:n("quotes.expiresIn",{days:T})}),W&&e.jsx("span",{className:"ml-2 text-xs text-red-600",children:n("quotes.expiredOn",{date:_(t.validUntil)})})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(ds,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{className:"mr-2 text-gray-500",children:[n("quotes.table.customer"),":"]}),e.jsx("span",{className:"font-medium",children:t.customerName})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(eA,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{className:"mr-2 text-gray-500",children:[n("quotes.table.amount"),":"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:i(t.total,t.currency)})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsxs("span",{className:"mr-2 text-gray-500",children:[n("quotes.createModal.currency"),":"]}),e.jsx("span",{className:"font-medium",children:t.currency})]})]})]}),Array.isArray(t.revisions)&&t.revisions.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:n("quotes.revisionHistory",{defaultValue:"Revizyon Gemii"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",style:{width:"15%"},children:"v"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",style:{width:"25%"},children:n("quotes.table.date")}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",style:{width:"25%"},children:n("quotes.validUntil")}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",style:{width:"20%"},children:n("quotes.table.status")}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",style:{width:"15%"},children:n("quotes.table.amount")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.revisions.map((B,E)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-3 py-2 text-sm text-gray-800",children:["v",B.version]}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:_(B.issueDate)}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:B.validUntil?_(B.validUntil):"-"}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-700",children:O(B.status)}),e.jsx("td",{className:"px-3 py-2 text-sm text-right font-medium text-gray-900",children:i(Number(B.total||0),t.currency)})]},`rev-${E}`))})]})})]}),t.scopeOfWorkHtml&&String(t.scopeOfWorkHtml).trim().length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:n("quotes.scopeOfWork.title",{defaultValue:"in Kapsam"})}),e.jsx("div",{className:"prose max-w-none prose-sm text-gray-800 border border-gray-200 rounded-lg p-4 bg-white",dangerouslySetInnerHTML:{__html:Yv(String(t.scopeOfWorkHtml||""))}})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-2 border-t border-gray-100",children:[e.jsxs("button",{onClick:async()=>{const{generateQuotePDF:B}=await Mr(async()=>{const{generateQuotePDF:E}=await import("./pdfGenerator--172hwWR.js").then(P=>P.p);return{generateQuotePDF:E}},[]);await B({id:t.id,quoteNumber:t.quoteNumber,customerName:t.customerName,customerId:t.customerId,issueDate:t.issueDate,validUntil:t.validUntil,status:t.status,currency:t.currency,total:t.total,items:(t.items||[]).map(E=>({description:E.description,quantity:E.quantity,unitPrice:E.unitPrice,total:E.total})),scopeOfWorkHtml:t.scopeOfWorkHtml||""},{filename:t.quoteNumber})},className:"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200",title:n("quotes.actions.downloadPdf"),children:[e.jsx(kl,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:n("quotes.actions.downloadPdf")})]}),t.publicId&&e.jsxs("button",{onClick:async()=>{try{const E=`${typeof window<"u"?window.location.origin:""}/public/quote/${encodeURIComponent(String(t.publicId))}`;await navigator.clipboard.writeText(E);try{window.dispatchEvent(new CustomEvent("showToast",{detail:{message:n("quotes.actions.copyPublicLinkSuccess",{defaultValue:"Balant kopyaland."}),tone:"success"}}))}catch(P){he.debug("Public quote toast dispatch failed",P)}h&&t.status==="draft"&&h(t,"sent")}catch(B){console.warn("Clipboard copy failed, showing fallback",B);try{const P=`${typeof window<"u"?window.location.origin:""}/public/quote/${encodeURIComponent(String(t.publicId))}`;alert(P)}catch(E){he.debug("Public quote link alert fallback failed",E)}}},className:"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200",title:n("quotes.actions.copyPublicLink",{defaultValue:"Public Link Kopyala"}),children:[e.jsx(Yp,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:n("quotes.actions.copyPublicLink",{defaultValue:"Public Link Kopyala"})})]}),t.status==="accepted"&&e.jsxs("button",{onClick:async()=>{if(!c){u(!0);try{const B=await u8(t.id);try{window.dispatchEvent(new CustomEvent("showToast",{detail:{message:n("quotes.actions.convertToSaleSuccess",{defaultValue:"Sat oluturuldu."}),tone:"success"}}))}catch(E){he.debug("QuoteViewModal: toast dispatch failed",E)}o(),setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("open-sale-edit",{detail:{sale:B}}))}catch(E){he.debug("QuoteViewModal: open-sale-edit dispatch failed",E)}},50)}catch(B){he.warn("QuoteViewModal: convertToSale failed",B);try{window.dispatchEvent(new CustomEvent("showToast",{detail:{message:n("quotes.actions.convertToSaleFailed",{defaultValue:"Sat oluturulamad."}),tone:"error"}}))}catch(E){he.debug("QuoteViewModal: error toast dispatch failed",E)}}finally{u(!1)}}},className:"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200",title:n("quotes.actions.convertToSale",{defaultValue:"Sata Dntr"}),disabled:c,children:[e.jsx(fs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:c?n("common.loading",{defaultValue:"Ykleniyor"}):n("quotes.actions.convertToSale",{defaultValue:"Sata Dntr"})})]}),t.status==="accepted"&&e.jsxs("button",{onClick:async()=>{if(!m){x(!0);try{const B=await a8(t.id);try{window.dispatchEvent(new CustomEvent("showToast",{detail:{message:n("quotes.actions.convertToInvoiceSuccess",{defaultValue:"Fatura oluturuldu."}),tone:"success"}}))}catch(E){he.debug("QuoteViewModal: invoice toast dispatch failed",E)}o(),setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("open-invoice-edit",{detail:{invoice:B}}))}catch(E){he.debug("QuoteViewModal: open-invoice-edit dispatch failed",E)}},50)}catch(B){he.warn("QuoteViewModal: convertToInvoice failed",B);try{window.dispatchEvent(new CustomEvent("showToast",{detail:{message:n("quotes.actions.convertToInvoiceFailed",{defaultValue:"Fatura oluturulamad."}),tone:"error"}}))}catch(E){he.debug("QuoteViewModal: invoice error toast dispatch failed",E)}}finally{x(!1)}}},className:"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200",title:n("quotes.actions.convertToInvoice",{defaultValue:"Faturaya Dntr"}),disabled:m,children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:m?n("common.loading",{defaultValue:"Ykleniyor"}):n("quotes.actions.convertToInvoice",{defaultValue:"Faturaya Dntr"})})]})]})]})]})}),r&&e.jsx(ui,{isOpen:!0,title:n("common.confirm",{defaultValue:"Onay"}),message:n("quotes.confirmAccept",{defaultValue:"Teklifi kabul etmek istediinizden emin misiniz? Bu ilem geri alnamaz."}),confirmText:n("common.yes",{defaultValue:"Evet"}),cancelText:n("common.no",{defaultValue:"Hayr"}),onCancel:()=>s(!1),onConfirm:()=>{s(!1),h&&t&&h(t,"accepted")}})]})},dg=({value:a,onChange:o,placeholder:t,height:f=220,readOnly:h,className:d})=>{const n=G.useRef(null),l=G.useRef(!1),i=G.useRef(null),[r,s]=G.useState(!1),c=G.useRef(null),[u,m]=G.useState(!1),[x,b]=G.useState(!1),[p,v]=G.useState({r:3,c:3});G.useEffect(()=>{const q=n.current;q&&typeof a=="string"&&a!==q.innerHTML&&(q.innerHTML=a||"")},[a]);const y=()=>{const q=n.current;if(!q)return;document.activeElement!==q&&q.focus();const W=window.getSelection?.();W&&c.current&&(W.removeAllRanges(),W.addRange(c.current))},N=(q,W)=>{try{y(),document.execCommand(q,!1,W);const B=n.current;B&&o&&o(B.innerHTML)}catch{}},T=q=>{try{y(),document.execCommand("insertHTML",!1,q);const W=n.current;W&&o&&o(W.innerHTML)}catch{}},_=()=>{n.current&&o&&o(n.current.innerHTML)},O=q=>{(q.ctrlKey||q.metaKey)&&q.key.toLowerCase()==="b"&&(q.preventDefault(),N("bold")),(q.ctrlKey||q.metaKey)&&q.key.toLowerCase()==="u"&&(q.preventDefault(),N("underline")),(q.ctrlKey||q.metaKey)&&q.key.toLowerCase()==="i"&&(q.preventDefault(),N("italic")),(q.ctrlKey||q.metaKey)&&q.key.toLowerCase()==="z"&&(q.preventDefault(),N("undo")),(q.ctrlKey||q.metaKey)&&q.shiftKey&&q.key.toLowerCase()==="z"&&(q.preventDefault(),N("redo"))},H=({title:q,onClick:W,children:B})=>e.jsx("button",{type:"button",onMouseDown:E=>{E.preventDefault(),W()},title:q,className:"inline-flex items-center justify-center w-8 h-8 rounded-md text-slate-700 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:B}),F=()=>e.jsx("span",{className:"w-px h-6 bg-slate-200","aria-hidden":"true"}),V=typeof f=="number"?`${f}px`:f;return G.useEffect(()=>{const q=n.current;if(!q)return;const W=(E,P)=>P?E===P||E.contains(P):!1,B=()=>{const E=window.getSelection?.();if(!E||E.rangeCount===0)return;const P=E.getRangeAt(0);W(q,P.commonAncestorContainer)&&(c.current=P.cloneRange())};return document.addEventListener("selectionchange",B),()=>document.removeEventListener("selectionchange",B)},[]),e.jsxs("div",{className:d,children:[!h&&e.jsxs("div",{className:"flex flex-wrap items-center gap-1 border border-slate-200 rounded-t-md bg-white px-2 py-1.5 shadow-sm relative",children:[e.jsx(H,{title:"Kaln (Ctrl+B)",onClick:()=>N("bold"),children:e.jsx(rA,{className:"w-4 h-4"})}),e.jsx(H,{title:"talik (Ctrl+I)",onClick:()=>N("italic"),children:e.jsx(wA,{className:"w-4 h-4"})}),e.jsx(H,{title:"Alt izili (Ctrl+U)",onClick:()=>N("underline"),children:e.jsx(zA,{className:"w-4 h-4"})}),e.jsx(H,{title:"st izili",onClick:()=>N("strikeThrough"),children:e.jsx(MA,{className:"w-4 h-4"})}),e.jsx(F,{}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{title:"Balk (H1H6)",onClick:()=>m(q=>!q),children:e.jsx(Kx,{className:"w-4 h-4"})}),u&&e.jsx("div",{className:"absolute z-50 mt-1 w-44 bg-white border border-slate-200 rounded-md shadow-lg p-1",children:[{tag:"P",label:"Paragraf",Icon:Gx},{tag:"H1",label:"Balk 1",Icon:Kx},{tag:"H2",label:"Balk 2",Icon:fA},{tag:"H3",label:"Balk 3",Icon:pA},{tag:"H4",label:"Balk 4",Icon:gA},{tag:"H5",label:"Balk 5",Icon:xA},{tag:"H6",label:"Balk 6",Icon:yA}].map(({tag:q,label:W,Icon:B})=>e.jsxs("button",{type:"button",onMouseDown:E=>{E.preventDefault(),N("formatBlock",q),m(!1)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm text-slate-700 rounded hover:bg-slate-100",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:W})]},q))})]}),e.jsx(F,{}),e.jsx(H,{title:"Madde aretli Liste",onClick:()=>N("insertUnorderedList"),children:e.jsx(jA,{className:"w-4 h-4"})}),e.jsx(H,{title:"Numaral Liste",onClick:()=>N("insertOrderedList"),children:e.jsx(kA,{className:"w-4 h-4"})}),e.jsx(F,{}),e.jsx(H,{title:"Sola Hizala",onClick:()=>N("justifyLeft"),children:e.jsx(ZC,{className:"w-4 h-4"})}),e.jsx(H,{title:"Ortala",onClick:()=>N("justifyCenter"),children:e.jsx(YC,{className:"w-4 h-4"})}),e.jsx(H,{title:"Saa Hizala",onClick:()=>N("justifyRight"),children:e.jsx(XC,{className:"w-4 h-4"})}),e.jsx(H,{title:"ki Yana Yasla",onClick:()=>N("justifyFull"),children:e.jsx(QC,{className:"w-4 h-4"})}),e.jsx(F,{}),e.jsx(H,{title:"Alnt",onClick:()=>N("formatBlock","BLOCKQUOTE"),children:e.jsx(vv,{className:"w-4 h-4"})}),e.jsx(H,{title:"Kod Blou",onClick:()=>N("formatBlock","PRE"),children:e.jsx(oA,{className:"w-4 h-4"})}),e.jsx(H,{title:"Yatay izgi",onClick:()=>N("insertHorizontalRule"),children:e.jsx(Gx,{className:"w-4 h-4"})}),e.jsx(F,{}),e.jsx(H,{title:"Alt indis",onClick:()=>N("subscript"),children:e.jsxs("span",{className:"text-[10px] font-semibold",children:["x",e.jsx("sub",{children:"2"})]})}),e.jsx(H,{title:"st indis",onClick:()=>N("superscript"),children:e.jsxs("span",{className:"text-[10px] font-semibold",children:["x",e.jsx("sup",{children:"2"})]})}),e.jsx(F,{}),e.jsx(H,{title:"Balant Ekle",onClick:()=>{const q=window.prompt("Balant URLsi:");q&&N("createLink",q)},children:e.jsx(Yp,{className:"w-4 h-4"})}),e.jsx(H,{title:"Grsel Ekle",onClick:()=>i.current?.click(),children:e.jsx(vA,{className:"w-4 h-4"})}),e.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:async q=>{const W=q.target.files?.[0];if(!W)return;const B=new FileReader;B.onload=()=>{try{const E=String(B.result||"");E&&N("insertImage",E)}catch{}},B.readAsDataURL(W),q.currentTarget.value=""}}),e.jsx(F,{}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{title:"Tablo Ekle",onClick:()=>b(q=>!q),children:e.jsx("span",{className:"grid grid-cols-3 grid-rows-3 gap-[1px] w-4 h-4",children:Array.from({length:9}).map((q,W)=>e.jsx("span",{className:"bg-slate-500/50"},W))})}),x&&e.jsxs("div",{className:"absolute z-50 mt-1 bg-white border border-slate-200 rounded-md shadow-lg p-2",children:[e.jsx("div",{className:"grid grid-cols-6 gap-1",children:Array.from({length:36}).map((q,W)=>{const B=Math.floor(W/6)+1,E=W%6+1,P=B<=p.r&&E<=p.c;return e.jsx("div",{onMouseEnter:()=>v({r:B,c:E}),onMouseDown:A=>{A.preventDefault();const k=Array.from({length:B}).map(()=>`<tr>${Array.from({length:E}).map(()=>"<td>&nbsp;</td>").join("")}</tr>`).join("");T(`<table><tbody>${k}</tbody></table>`),b(!1)},className:`w-5 h-5 border ${P?"bg-indigo-500 border-indigo-500":"bg-white border-slate-200"} cursor-pointer`},W)})}),e.jsxs("div",{className:"text-xs text-slate-600 mt-2 text-center",children:[p.r,"  ",p.c]})]})]}),e.jsx(F,{}),e.jsx(H,{title:"Geri Al (Ctrl+Z)",onClick:()=>N("undo"),children:e.jsx(LA,{className:"w-4 h-4"})}),e.jsx(H,{title:"Yinele (Shift+Ctrl+Z)",onClick:()=>N("redo"),children:e.jsx(EA,{className:"w-4 h-4"})}),e.jsx(H,{title:"Biimlendirmeyi Temizle",onClick:()=>N("removeFormat"),children:e.jsx(cA,{className:"w-4 h-4"})})]}),e.jsx("div",{ref:n,className:`border border-slate-200 ${h?"rounded-md":"rounded-b-md"} p-3 focus:outline-none min-h-[140px] prose prose-sm max-w-none bg-white ${r?"ring-2 ring-indigo-500":""}`,contentEditable:!h,suppressContentEditableWarning:!0,onInput:_,onKeyDown:O,style:{height:V,overflowY:"auto"},"data-placeholder":t||"",onFocus:q=>{s(!0),m(!1),b(!1),!a&&!l.current&&(q.currentTarget.innerHTML="",l.current=!0)},onBlur:()=>s(!1)}),e.jsx("style",{children:`
        .prose h1 { font-size: 1.25rem; font-weight: 700; margin: 0.5rem 0; }
        .prose h2 { font-size: 1.1rem; font-weight: 700; margin: 0.5rem 0; }
        .prose p { margin: 0.25rem 0; }
        .prose ul { list-style: disc; padding-left: 1.25rem; margin: 0.25rem 0; }
        .prose ol { list-style: decimal; padding-left: 1.25rem; margin: 0.25rem 0; }
        .prose blockquote { border-left: 3px solid #e5e7eb; color: #374151; padding-left: 0.75rem; margin: 0.5rem 0; }
        .prose pre { background: #0f172a; color: #e5e7eb; padding: 0.5rem 0.75rem; border-radius: 0.375rem; overflow-x: auto; }
        .prose code { background: #f1f5f9; padding: 0.1rem 0.3rem; border-radius: 0.25rem; }
        .prose img { max-width: 100%; height: auto; border-radius: 0.25rem; }
        .prose table { width: 100%; border-collapse: collapse; margin: 0.5rem 0; }
        .prose th, .prose td { border: 1px solid #e5e7eb; padding: 6px; }
        .prose thead th { background: #f9fafb; }
      `})]})},Zv=({isOpen:a,onClose:o,quote:t,onSave:f,products:h=[]})=>{const{t:d,i18n:n}=$t(),i=(()=>{const W=Et.getItem("i18nextLng");return W&&W.length>=2?W.slice(0,2).toLowerCase():(n.resolvedLanguage||n.language||"en").slice(0,2).toLowerCase()})(),r={draft:{tr:"Taslak",en:"Draft",fr:"Brouillon",de:"Entwurf"}[i]||"Draft",sent:{tr:"Gnderildi",en:"Sent",fr:"Envoy",de:"Gesendet"}[i]||"Sent"},[s,c]=G.useState(null),[u,m]=G.useState([]),[x,b]=G.useState(null),[p,v]=G.useState(""),[y,N]=G.useState(null);G.useEffect(()=>{if(t){c({...t});const W=Array.isArray(t.items)&&t.items.length>0?t.items.map(B=>({...B})):[{id:"l1",description:"",quantity:1,unitPrice:0,total:0}];m(W),v(t.scopeOfWorkHtml||"")}else c(null),m([]),v("")},[t]);const T=G.useMemo(()=>u.reduce((W,B)=>W+(Number(B.total)||0),0),[u]);if(!a||!s)return null;const _=()=>{m(W=>[...W,{id:`l${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}])},O=W=>{m(B=>B.length===1?B:B.filter(E=>E.id!==W))},H=(W,B,E)=>{m(P=>P.map(A=>{if(A.id!==W)return A;const k={...A,[B]:E},j=Number(B==="quantity"?E:k.quantity)||0,S=Number(B==="unitPrice"?E:k.unitPrice)||0;return k.total=j*S,k}))},F=W=>{const B=(W||"").trim().toLowerCase();return h.filter(E=>!B||E.name.toLowerCase().includes(B)||(E.sku||"").toLowerCase().includes(B)||(E.category||"").toLowerCase().includes(B)).slice(0,12)},V=(W,B)=>{m(E=>E.map(P=>{if(P.id!==W)return P;const A=P.quantity>0?P.quantity:1,k=Number(B.unitPrice??B.price??P.unitPrice??0);return{...P,productId:String(B.id),description:B.name,unit:B.unit,unitPrice:k,quantity:A,total:A*k}})),b(null)},q=()=>{if(!s||!s.customerName||!s.issueDate)return;const W={...s,items:u,total:T,...p?{scopeOfWorkHtml:p}:{scopeOfWorkHtml:""}};N({title:d("common.confirm",{defaultValue:"Onay"}),message:d("quotes.saveConfirm",{defaultValue:"Deiiklikleri kaydetmek istiyor musunuz?"}),onConfirm:()=>{f(W),o(),N(null)}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d("quotes.editModal.title")}),e.jsx("p",{className:"text-sm text-gray-500",children:d("quotes.editModal.subtitle")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.opportunityId&&e.jsxs("button",{type:"button",onClick:()=>{try{const W=String(s.opportunityId||"").trim();if(!W)return;o(),setTimeout(()=>{try{window.location.hash=`crm-deal:${W}`}catch{}},100)}catch{}},className:"inline-flex items-center gap-1 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200",title:d("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"}),children:[e.jsx(fs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:d("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"})})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"p-6 space-y-4 flex-1 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("quotes.editModal.quoteNumber")}),e.jsx("input",{type:"text",value:s.quoteNumber,readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("quotes.createModal.customer")}),e.jsx("input",{type:"text",value:s.customerName,onChange:W=>c({...s,customerName:W.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("quotes.createModal.date")}),e.jsx("input",{type:"date",value:s.issueDate,onChange:W=>c({...s,issueDate:W.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("quotes.createModal.currency")}),e.jsxs("select",{value:s.currency,onChange:W=>c({...s,currency:W.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("quotes.validUntil")}),e.jsx("input",{type:"date",value:s.validUntil||"",onChange:W=>c({...s,validUntil:W.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("quotes.createModal.amount")}),e.jsx("input",{type:"text",value:Number(T||0).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("quotes.table.status")}),e.jsxs("select",{value:s.status,onChange:W=>c({...s,status:W.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-white",children:[e.jsx("option",{value:"draft",children:d("common:status.draft",{defaultValue:r.draft})}),e.jsx("option",{value:"sent",children:d("common:status.sent",{defaultValue:r.sent})}),e.jsx("option",{value:"viewed",children:d("quotes.statusLabels.viewed")}),e.jsx("option",{value:"accepted",children:d("quotes.statusLabels.accepted")}),e.jsx("option",{value:"declined",children:d("quotes.statusLabels.declined")}),e.jsx("option",{value:"expired",children:d("quotes.statusLabels.expired")})]})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:d("invoices.productsAndServices")}),e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:d("invoices.addLine")})]})]}),e.jsx("div",{className:"overflow-x-auto",style:{overflow:"visible"},children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",style:{width:"45%"},children:d("invoices.description")}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",style:{width:"15%"},children:d("invoices.quantity")}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",style:{width:"20%"},children:d("invoices.unitPriceExclVAT")}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",style:{width:"15%"},children:d("invoices.totalInclVAT")}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-700",style:{width:"5%"},children:d("invoices.actions")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(W=>{const B=F(String(W.description||""));return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",style:{position:"relative"},children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:W.description||"",onChange:E=>{H(W.id,"description",E.target.value),E.target.value.length>0&&b(W.id)},onClick:()=>{W.description?.length>0&&b(W.id)},onBlur:()=>setTimeout(()=>b(E=>E===W.id?null:E),200),className:"w-full px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:d("invoices.productServiceDescription")}),x===W.id&&B.length>0&&e.jsxs("div",{className:"absolute z-[100] mt-1 w-[450px] left-0 rounded-lg border-2 border-gray-300 bg-white shadow-2xl max-h-[400px] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-indigo-50 p-2 text-xs font-medium text-indigo-700 border-b border-indigo-200",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(Os,{className:"w-3 h-3 mr-1"}),B.length," rn bulundu"]})}),B.map(E=>e.jsxs("button",{type:"button",onMouseDown:P=>P.preventDefault(),onClick:()=>V(W.id,E),className:"w-full p-3 text-left hover:bg-indigo-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-0.5",children:E.name}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[E.sku&&e.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded",children:["SKU: ",E.sku]}),e.jsx("span",{className:"font-medium text-green-600",children:(E.unitPrice??E.price??0).toLocaleString("tr-TR",{minimumFractionDigits:2})})]})]},`${W.id}-${E.id}`))]})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"number",value:W.quantity,onChange:E=>H(W.id,"quantity",parseInt(E.target.value,10)||1),className:"w-24 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",min:1,step:1})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"number",value:W.unitPrice,onChange:E=>H(W.id,"unitPrice",parseFloat(E.target.value)||0),className:"w-28 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",min:0,step:.01})}),e.jsx("td",{className:"px-3 py-2 text-right text-sm font-medium text-gray-900",children:(W.total||0).toLocaleString("tr-TR",{minimumFractionDigits:2})}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("button",{onClick:()=>O(W.id),disabled:u.length===1,className:"p-1 text-red-600 hover:bg-red-50 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Xr,{className:"w-4 h-4"})})})]},W.id)})})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("quotes.scopeOfWork.title",{defaultValue:"in Kapsam"})}),e.jsx(dg,{value:p,onChange:v,placeholder:d("quotes.scopeOfWork.placeholder",{defaultValue:"Proje kapsam, teslimatlar, varsaymlar ve hariler..."}),height:220}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d("quotes.scopeOfWork.note",{defaultValue:"Bu ierik teklif PDFinde mevcut blmden sonra yeni bir sayfa olarak eklenecek ve genel linkte grnecek."})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:d("common.cancel")}),e.jsx("button",{onClick:q,className:"px-5 py-2 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700",children:d("common.update")})]})]})}),y&&e.jsx(ui,{isOpen:!0,title:y.title,message:y.message,confirmText:d("common.yes",{defaultValue:"Evet"}),cancelText:d("common.no",{defaultValue:"Hayr"}),onConfirm:y.onConfirm,onCancel:()=>N(null)})]})},HE=a=>{if(typeof a!="object"||a===null)return!1;const o=Object.getPrototypeOf(a);return o===null||o===Object.prototype},mo=(a,o="")=>typeof a=="string"?a:o,KE=a=>{if(typeof a=="number")return Number.isFinite(a)?a:void 0;if(typeof a=="string"){const o=Number(a);return Number.isFinite(o)?o:void 0}},Oi=a=>typeof a=="string"?a.trim().toLowerCase():"",GE=(a,o)=>{if(!HE(a))return null;const t=mo(a.id).trim()||o,f=mo(a.quoteNumber).trim()||o,h=mo(a.customerName).trim(),d=mo(a.issueDate).slice(0,10)||void 0,n=KE(a.total),l=typeof a.version=="number"?a.version:void 0,i=mo(a.status).toLowerCase(),r=mo(a.currency)||void 0,s=mo(a.customerEmail)||void 0;return{id:t,quoteNumber:f,customerName:h,issueDate:d,total:n,status:i,version:l,currency:r,customerEmail:s}},WE=(a,o)=>{try{const t=en()||"",f=t?`quotes_cache_${t}`:"quotes_cache",h=Et.getItem(f);if(!h)return[];const d=JSON.parse(h);if(!Array.isArray(d))return[];const n=Oi(a),l=Oi(o);return d.map((i,r)=>GE(i,`quote-${r}`)).filter(i=>!!i).filter(i=>{const r=Oi(i.customerName),s=Oi(i.customerEmail);return(n?r===n:!1)||(l?s===l:!1)})}catch(t){return he.warn("[CustomerHistoryModal] Failed to read quote cache",t),[]}};function YE({isOpen:a,onClose:o,customer:t,invoices:f,sales:h=[],onViewInvoice:d,onCreateInvoice:n,onViewSale:l,onViewQuote:i}){const{formatCurrency:r}=Jr(),{t:s}=$t(),c=Oi(t?.name),u=Oi(t?.email),m=G.useMemo(()=>h.length?!c&&!u?[]:h.filter(y=>{const N=Oi(y.customerName),T=Oi(y.customerEmail);return(c?N===c:!1)||(u?T===u:!1)}):[],[h,c,u]),x=G.useMemo(()=>WE(t?.name,t?.email),[t?.name,t?.email]),b=G.useMemo(()=>({paid:` ${zt(s,"paid")}`,sent:` ${zt(s,"sent")}`,overdue:` ${zt(s,"overdue")}`,draft:` ${zt(s,"draft")}`}),[s]);if(!a||!t)return null;const p=y=>{if(!y)return"";const N=new Date(y);return Number.isNaN(N.getTime())?"":N.toLocaleDateString("tr-TR")},v=y=>{const N=typeof y=="number"&&Number.isFinite(y)?y:0;return r(N)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[t.name," - ",s("customer.history")]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[f.length+m.length," ",s("customer.transactions")]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"p-6",children:f.length===0&&m.length===0&&x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Fr,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("customer.noHistory")}),e.jsxs("p",{className:"text-gray-500 mb-6",children:[t.name," ",s("customer.noHistoryDesc")]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[" ",e.jsx("strong",{children:s("customer.tip")})," ",s("customer.tipDesc")]}),e.jsx("button",{onClick:()=>n?.(t),className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:s("customer.createInvoice")})]})]}):e.jsxs("div",{className:"space-y-4",children:[x.map((y,N)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 text-sm font-bold",children:"Q"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-purple-600",children:[e.jsx("button",{onClick:()=>i?.(y),className:"text-purple-600 hover:text-purple-800 transition-colors cursor-pointer",title:s("quotes.view")||"Teklifi grntle",children:y.quoteNumber}),y.version&&y.version>1?e.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["v",y.version]}):null]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Vr,{className:"w-3 h-3 mr-1"}),p(y.issueDate)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:v(y.total)}),e.jsx("div",{className:"text-xs text-gray-500",children:(()=>{const T=Kr(String(y.status||""));return zt(s,T)})()})]})]})},`quote-${N}`)),m.map((y,N)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"S"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-600",children:e.jsx("button",{onClick:()=>l?.(y),className:"text-green-600 hover:text-green-800 transition-colors cursor-pointer",title:s("sales.view")||"Sat grntle",children:y.saleNumber||`SAL-${y.id}`})}),e.jsx("p",{className:"text-sm text-gray-600",children:y.productName}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Vr,{className:"w-3 h-3 mr-1"}),p(y.date||y.saleDate||y.createdAt)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-600",children:["+",v(y.amount)]}),e.jsx("div",{className:"text-sm text-gray-500",children:(()=>{const T=Kr(String(y.status||"")),_={completed:` ${zt(s,"completed")}`,pending:` ${zt(s,"pending")}`,cancelled:` ${zt(s,"cancelled")}`};return T in _?_[T]:zt(s,T)})()})]})]})},`sale-${N}`)),f.map((y,N)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Fr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>d?.(y),className:"font-medium text-blue-600 hover:text-blue-800 transition-colors cursor-pointer",title:s("common.view",{defaultValue:"Grntle"}),children:y.invoiceNumber||s("invoices.unnamed",{defaultValue:"Fatura"})}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Vr,{className:"w-3 h-3 mr-1"}),p(y.issueDate)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:v(y.total)}),e.jsx("div",{className:"text-sm text-gray-500",children:(()=>{const T=Kr(String(y.status||""));return b[T]||zt(s,T)})()})]})]})},`invoice-${N}`))]})}),e.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Kapat"})})]})})}function QE({isOpen:a,onClose:o,supplier:t,expenses:f,onViewExpense:h,onCreateExpense:d}){const{formatCurrency:n}=Jr(),{t:l,i18n:i}=$t(),r=G.useMemo(()=>({paid:` ${zt(l,"paid")}`,approved:` ${zt(l,"approved")}`,draft:` ${zt(l,"draft")}`}),[l]),s=b=>{if(!b)return"";const p=b instanceof Date?b:new Date(b);return Number.isNaN(p.getTime())?"":p.toLocaleDateString(i.language==="tr"?"tr-TR":void 0)},c=b=>{const p=typeof b=="number"&&Number.isFinite(b)?b:0;return n(p)},u=G.useMemo(()=>Array.isArray(f)?f.filter(Boolean).map((b,p)=>({...b,_rowId:b.id||b.expenseNumber||`expense-${p}`})):[],[f]);if(!a||!t)return null;const m=()=>{d?.(t)},x=b=>{h?.(b)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[t.name," - ",l("supplier.expenseHistory")]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[u.length," ",l("supplier.expensesFound")]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"p-6",children:u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(un,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l("supplier.noExpenseHistory")}),e.jsxs("p",{className:"text-gray-500 mb-6",children:[t.name," ",l("supplier.noExpenseHistoryDesc")]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-red-800",children:[" ",e.jsx("strong",{children:l("supplier.tip")})," ",l("supplier.tipDesc")]}),e.jsx("button",{onClick:m,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:l("supplier.createExpense")})]})]}):e.jsx("div",{className:"space-y-4",children:u.map(b=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(un,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>x(b),className:"font-medium text-red-600 hover:text-red-800 transition-colors cursor-pointer",title:l("supplier.viewExpense"),children:b.expenseNumber||l("expenses.unnamed",{defaultValue:"Gider"})}),e.jsx("p",{className:"text-sm text-gray-600",children:b.description}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Vr,{className:"w-3 h-3 mr-1"}),s(b.expenseDate||b.date)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-red-600",children:["-",c(b.amount)]}),e.jsx("div",{className:"text-sm text-gray-500",children:(()=>{const p=Kr(String(b.status||""));return r[p]||zt(l,p)})()})]})]})},b._rowId))})}),e.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Kapat"})})]})})}function ZE({isOpen:a,onClose:o,title:t,message:f,relatedItems:h,itemType:d}){if(!a)return null;const n=i=>e.jsx("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:i.invoiceNumber??i.id}),e.jsxs("span",{className:"ml-3 text-sm text-gray-600",children:[i.total??""," TL - ",i.status??"pending"]})]})},i.id),l=i=>e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:i.expenseNumber??i.id}),e.jsx("span",{className:"ml-3 text-sm text-gray-600",children:i.description??""})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[i.amount??""," TL"]})]},i.id);return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:o}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:e.jsx(Nr,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx(vn,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:t}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:f}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Bal ",d==="invoice"?"Faturalar":"Giderler",":"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:h.map(i=>d==="invoice"?n(i):l(i))})]}),e.jsx("button",{onClick:o,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Anladm"}),e.jsxs("p",{className:"text-xs text-gray-500 text-center mt-3",children:["Silmek iin nce bal ",d==="invoice"?"faturalar":"giderleri"," silmeniz gerekir."]})]})]})})}const Ff=a=>(a||"").toLowerCase(),cm=[20,50,100],zu=a=>cm.includes(a),XE=()=>{const a=Et.getItem("customers_pageSize"),o=a?Number(a):cm[0];return zu(o)?o:cm[0]};function JE({customers:a,onAddCustomer:o,onEditCustomer:t,onDeleteCustomer:f,onViewCustomer:h,onSelectCustomer:d,onImportCustomers:n,selectionMode:l=!1}){const{t:i,i18n:r}=$t(),s=()=>{const $=Et.getItem("i18nextLng");return $&&$.length>=2?$.slice(0,2).toLowerCase():(r.resolvedLanguage||r.language||"en").slice(0,2).toLowerCase()},c=$=>$==="tr"?"tr-TR":$==="de"?"de-DE":$==="fr"?"fr-FR":"en-US",u=s(),m={emailExists:{tr:"E-posta var",en:"Has email",fr:"E-mail prsent",de:"E-Mail vorhanden"}[u]||"Has email",phoneExists:{tr:"Telefon var",en:"Has phone",fr:"Tlphone prsent",de:"Telefon vorhanden"}[u]||"Has phone",companyExists:{tr:"irketi olanlar",en:"Has company",fr:"A une entreprise",de:"Hat Firma"}[u]||"Has company",from:{tr:"Balang",en:"From",fr:"De",de:"Von"}[u]||"From",to:{tr:"Biti",en:"To",fr:"",de:"Bis"}[u]||"To",clear:{tr:"Temizle",en:"Clear",fr:"Effacer",de:"Lschen"}[u]||"Clear"},x=G.useRef(null),[b,p]=G.useState(""),[v,y]=G.useState(!1),[N,T]=G.useState(!1),[_,O]=G.useState(!1),[H,F]=G.useState(""),[V,q]=G.useState(""),[W,B]=G.useState(1),[E,P]=G.useState(()=>XE()),{getDefault:A}=qi({listType:"customers"});G.useEffect(()=>{const $=A();if($&&$.state)try{p($.state.searchTerm??""),y(!!$.state.hasEmailOnly),T(!!$.state.hasPhoneOnly),O(!!$.state.hasCompanyOnly),F($.state.startDate??""),q($.state.endDate??""),$.state.pageSize&&zu($.state.pageSize)&&C($.state.pageSize)}catch(Q){he.warn("Failed to apply default customer saved view",Q)}},[]);const k=G.useMemo(()=>Array.isArray(a)?a.filter(Boolean):[],[a]),j=G.useMemo(()=>{const $=b.trim().toLowerCase();return k.filter(Q=>{const z=Ff(Q?.name),M=Ff(Q?.email),U=Ff(Q?.company),te=!$||z.includes($)||M.includes($)||U.includes($),ie=!v||!!(Q?.email&&Q.email.trim()),se=!N||!!(Q?.phone&&Q.phone.trim()),le=!_||!!(Q?.company&&Q.company.trim()),Ne=Q?.createdAt?new Date(Q.createdAt):null;let ke=!0;return H&&Ne&&(ke=ke&&Ne>=new Date(H)),V&&Ne&&(ke=ke&&Ne<=new Date(V)),te&&ie&&se&&le&&ke})},[k,b,v,N,_,H,V]),S=G.useMemo(()=>{const $=(W-1)*E;return j.slice($,$+E)},[j,W,E]);G.useEffect(()=>{B(1)},[b,v,N,_,H,V]);const C=$=>{const Q=zu($)?$:cm[0];P(Q),Et.setItem("customers_pageSize",String(Q)),B(1)},D=()=>{x.current?.click()},R=$=>{const Q=$.target.files?.[0];if(!Q){$.target.value="";return}n&&n(Q),$.target.value=""},L=()=>{if(typeof document>"u"){he.debug("CustomerList: download skipped (no document)");return}try{const $=["Name,Email,Phone,Address,Company,TaxNumber","John Doe,john.doe@email.com,+1-555-123-4567,123 Main Street New York NY USA,Tech Solutions Inc,123456789","Jane Smith,jane.smith@company.com,+1-555-987-6543,456 Oak Avenue Los Angeles CA USA,Marketing Pro LLC,987654321","Michael Johnson,m.johnson@business.org,+1-555-456-7890,789 Pine Road Chicago IL USA,Johnson & Associates,456789123"].join(`
`),Q=new Blob(["\uFEFF"+$],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a");if(z.download===void 0){he.warn("CustomerList: download attribute unsupported");return}const M=URL.createObjectURL(Q);z.setAttribute("href",M),z.setAttribute("download","account_import_template.csv"),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(M)}catch($){he.error("CustomerList: template download failed",$)}},Y=()=>e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l?"Hesap Se":i("customers.title")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[k.length," ",i("customers.customersRegistered")]})]}),!l&&e.jsxs("div",{className:"flex flex-wrap items-center justify-start gap-2 sm:justify-end",children:[e.jsx("input",{ref:x,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:R}),e.jsxs("button",{type:"button",onClick:L,className:"flex items-center gap-2 rounded-lg border border-blue-200 px-4 py-2 text-blue-600 transition-colors hover:bg-blue-50",title:i("customers.downloadTemplate"),children:[e.jsx(Cs,{className:"h-4 w-4"}),e.jsx("span",{children:i("customers.downloadTemplate")})]}),e.jsxs("button",{type:"button",onClick:D,className:"flex items-center gap-2 rounded-lg border border-purple-200 px-4 py-2 text-purple-600 transition-colors hover:bg-purple-50 disabled:cursor-not-allowed disabled:border-gray-200 disabled:text-gray-300",disabled:!n,children:[e.jsx(Zp,{className:"h-4 w-4"}),e.jsx("span",{children:i("customers.importCSV")})]}),e.jsxs("button",{type:"button",onClick:o,className:"flex items-center gap-2 rounded-lg bg-purple-600 px-4 py-2 text-white transition-colors hover:bg-purple-700",children:[e.jsx(Ks,{className:"h-4 w-4"}),e.jsx("span",{children:i("customers.newCustomer")})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:flex-nowrap lg:overflow-x-auto",children:[e.jsxs("div",{className:"relative flex-1 min-w-[260px]",children:[e.jsx(Os,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 transform text-gray-400"}),e.jsx("input",{type:"text",value:b,onChange:$=>p($.target.value),placeholder:i("customers.search"),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 lg:flex-nowrap lg:shrink-0",children:[e.jsxs("label",{className:"text-sm text-gray-700 inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded",checked:v,onChange:$=>y($.target.checked)}),m.emailExists]}),e.jsxs("label",{className:"text-sm text-gray-700 inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded",checked:N,onChange:$=>T($.target.checked)}),m.phoneExists]}),e.jsxs("label",{className:"text-sm text-gray-700 inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded",checked:_,onChange:$=>O($.target.checked)}),m.companyExists]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-700",children:m.from}),e.jsx("input",{type:"date",lang:c(u),value:H,onChange:$=>F($.target.value),className:"h-9 px-2 border border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:m.to}),e.jsx("input",{type:"date",lang:c(u),value:V,onChange:$=>q($.target.value),className:"h-9 px-2 border border-gray-300 rounded"}),(H||V)&&e.jsx("button",{onClick:()=>{F(""),q("")},className:"h-9 px-2 text-sm bg-gray-100 rounded hover:bg-gray-200",children:m.clear})]})]}),e.jsx("div",{className:"flex w-full flex-wrap justify-start gap-2 sm:justify-end lg:ml-auto lg:w-auto lg:shrink-0",children:e.jsx(ca,{listType:"customers",getState:()=>({searchTerm:b,hasEmailOnly:v,hasPhoneOnly:N,hasCompanyOnly:_,startDate:H,endDate:V,pageSize:E}),applyState:$=>{const Q=$??{};p(Q.searchTerm??""),y(!!Q.hasEmailOnly),T(!!Q.hasPhoneOnly),O(!!Q.hasCompanyOnly),F(Q.startDate??""),q(Q.endDate??""),Q.pageSize&&zu(Q.pageSize)&&C(Q.pageSize)},presets:[{id:"with-email",label:i("presets.withEmail"),apply:()=>{y(!0),T(!1),O(!1)}},{id:"with-phone",label:i("presets.withPhone"),apply:()=>{T(!0),y(!1),O(!1)}},{id:"with-company",label:i("presets.withCompany"),apply:()=>{O(!0),y(!1),T(!1)}},{id:"added-this-month",label:i("presets.addedThisMonth"),apply:()=>{const $=new Date,Q=new Date($.getFullYear(),$.getMonth(),1).toISOString().slice(0,10),z=new Date($.getFullYear(),$.getMonth()+1,0).toISOString().slice(0,10);F(Q),q(z)}}]})})]})})]}),X=()=>e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100",children:e.jsx(ts,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900",children:i(b?"customers.noCustomersFound":"customers.noCustomers")}),e.jsx("p",{className:"mb-4 text-gray-500",children:i(b?"customers.noCustomersFoundDesc":"customers.noCustomersDesc")}),!l&&!b&&e.jsx("button",{type:"button",onClick:o,className:"rounded-lg bg-purple-600 px-4 py-2 text-sm font-medium text-white hover:bg-purple-700",children:i("customers.createFirstCustomer")})]}),ae=($,Q)=>{const z=$?.id!=null?String($.id):`customer-${Q}`,M=$?.name?.trim()||"simsiz Hesap",U=$?.email||"E-posta bilgisi yok",te=$?.phone,ie=M.charAt(0).toUpperCase()||"?",se=()=>{if(l){d?.($);return}h($)},le=ke=>{ke.stopPropagation(),t($)},Ne=ke=>{ke.stopPropagation(),$?.id&&f(String($.id))};return e.jsx("div",{className:"p-4 transition-colors hover:bg-gray-50",role:"button",tabIndex:0,onClick:se,onKeyDown:ke=>{ke.key==="Enter"&&se()},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100",children:e.jsx("span",{className:"text-lg font-semibold text-purple-600",children:ie})}),e.jsxs("div",{children:[l?e.jsx("h3",{className:"font-semibold text-gray-900",children:M}):e.jsx("button",{type:"button",onClick:ke=>{ke.stopPropagation(),h($)},className:"font-semibold text-purple-600 transition-colors hover:text-purple-800",children:M}),$?.company&&e.jsxs("p",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ts,{className:"mr-1 h-3 w-3"}),$.company]}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Hs,{className:"h-3 w-3"}),U]}),te&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Co,{className:"h-3 w-3"}),te]})]})]})]}),!l&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:le,className:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-blue-50 hover:text-blue-600",children:e.jsx(vs,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:Ne,className:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-red-50 hover:text-red-600",children:e.jsx(Xr,{className:"h-4 w-4"})})]})]})},z)};return e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white",children:[Y(),e.jsx("div",{className:"divide-y divide-gray-200",children:j.length===0?X():S.map(ae)}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx(Rs,{page:W,pageSize:E,total:j.length,onPageChange:B,onPageSizeChange:C})})]})}const Na=async()=>(await Mr(async()=>{const{productCategoriesApi:a}=await Promise.resolve().then(()=>Fc);return{productCategoriesApi:a}},void 0)).productCategoriesApi,Bc=[20,50,100],ho="Genel",eD="product-categories-updated",tD=new Set(["hizmet","hizmetler","services","servisler","dienstleistungen"]),rD=new Set(["urun","urunler","rn","rnler","products","produits","produkte"]),Bf=a=>typeof a=="object"&&a!==null,Nc=()=>{if(!(typeof window>"u"))try{window.dispatchEvent(new Event(eD))}catch(a){he.debug("Product category event dispatch failed",a)}},jy=a=>{const o=(a||"").trim(),t=o.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase();return tD.has(t)?"__MAIN_SERVICES__":rD.has(t)?"__MAIN_PRODUCTS__":o},Gn=(a,o)=>jy(a).localeCompare(jy(o),"tr-TR",{sensitivity:"accent"})===0,kc=a=>{if(!Bf(a))return null;const o="response"in a?a.response:void 0;if(!Bf(o))return null;const t="data"in o?o.data:void 0;return Bf(t)?t:null},sD=()=>{try{const a=Et.getItem("i18nextLng");if(a&&a.length>=2)return a.slice(0,2).toLowerCase()}catch(a){he.debug("Unable to read preferred language",a)}return"en"},Lu=a=>Bc.includes(a),nD=()=>{try{const a=Et.getItem("products_pageSize"),o=a?Number(a):Bc[0];return Lu(o)?o:Bc[0]}catch(a){return he.debug("Unable to read saved product page size",a),Bc[0]}},jc=(a,o)=>{const t=a.trim();switch(t){case"Hizmetler":return o("products.mainCategories.services");case"rnler":return o("products.mainCategories.products");default:return t}};function aD({products:a,categories:o,onAddProduct:t,onEditProduct:f,onDeleteProduct:h,onViewProduct:d,onEditCategory:n,onDeleteCategory:l,onBulkAction:i,onImportProducts:r}){const{formatCurrency:s}=Jr(),{t:c}=$t(),u=sD(),m={sort:{tr:"Sralama",en:"Sort",fr:"Tri",de:"Sortierung"}[u]||"Sort",showArchived:{tr:"Arivlenmileri gster",en:"Show archived",fr:"Afficher archivs",de:"Archivierte anzeigen"}[u]||"Show archived",hideArchived:{tr:"Arivlenmileri gizle",en:"Hide archived",fr:"Masquer archivs",de:"Archivierte ausblenden"}[u]||"Hide archived"},[x,b]=G.useState(null),[p,v]=G.useState(""),[y,N]=G.useState("all"),[T,_]=G.useState("all"),[O,H]=G.useState("recent"),[F,V]=G.useState(!1),[q,W]=G.useState(null),[B,E]=G.useState([]),[P,A]=G.useState(null),[k,j]=G.useState(!1),[S,C]=G.useState([]),[D,R]=G.useState(!1),L=G.useRef(null),[Y,X]=G.useState(null),[ae,$]=G.useState(1),[Q,z]=G.useState(nD),{getDefault:M}=qi({listType:"products"});G.useEffect(()=>{const Pe=M();Pe?.state&&(v(Pe.state.searchTerm??""),N(Pe.state.categoryFilter??"all"),_(Pe.state.stockFilter??"all"),H(Pe.state.sortOption??"recent"),Pe.state.pageSize&&Lu(Pe.state.pageSize)&&lt(Pe.state.pageSize))},[]),G.useEffect(()=>{(async()=>{try{const je=await(await Na()).getAll({includeInactive:!0});C(je)}catch(rt){he.error("Kategoriler yklenirken hata:",rt)}})()},[]);const U=_t.useRef(null),te=_t.useRef(null),ie=_t.useRef(null),se=_t.useRef(null),le=G.useMemo(()=>S.filter(rt=>rt.isActive).map(rt=>rt.name.trim()).filter(rt=>!!rt).sort((rt,je)=>rt.localeCompare(je,"tr-TR")),[S]),Ne=G.useMemo(()=>S.filter(Pe=>!Pe.isActive).sort((Pe,rt)=>Pe.name.localeCompare(rt.name,"tr-TR")),[S]),ke=_t.useCallback(Pe=>S.find(rt=>rt.name.localeCompare(Pe,"tr-TR",{sensitivity:"accent"})===0)||null,[S]),Z=_t.useCallback((Pe,rt)=>{if(!Pe||!rt)return!1;let je=Pe;const Me=new Map(S.map(Ye=>[Ye.id,Ye]));for(;je;){if(je.id===rt.id)return!0;je=je.parentId?Me.get(je.parentId):void 0}return!1},[S]),ce=G.useMemo(()=>{const rt=le.filter(Me=>S.find(dt=>dt.name.localeCompare(Me,"tr-TR",{sensitivity:"accent"})===0)?.isProtected||Gn(Me,ho)).map(Me=>{const Ye=S.find(mt=>mt.name.localeCompare(Me,"tr-TR",{sensitivity:"accent"})===0),dt=le.filter(mt=>{const yt=S.find(Gt=>Gt.name.localeCompare(mt,"tr-TR",{sensitivity:"accent"})===0);return!yt?.isProtected&&!Gn(mt,ho)&&yt?.parentId===Ye?.id});return{mainCategory:Me,subCategories:dt,categoryObj:Ye}}),je=le.filter(Me=>{const Ye=S.find(dt=>dt.name.localeCompare(Me,"tr-TR",{sensitivity:"accent"})===0);return!Ye?.isProtected&&!Gn(Me,ho)&&!Ye?.parentId});return{hierarchicalCategories:rt,orphanSubCategories:je}},[le,S]),{hierarchicalCategories:ve,orphanSubCategories:De}=ce,Ae=G.useMemo(()=>{const Pe=new Map;return a.forEach(rt=>{const je=(rt.category||ho).trim()||ho;Pe.set(je,(Pe.get(je)??0)+1)}),Pe},[a]);_t.useEffect(()=>{y!=="all"&&!le.some(Pe=>Gn(Pe,y))&&N("all")},[le,y]),_t.useEffect(()=>{if(!q)return;const Pe=rt=>{const je=rt.target,Ye={category:U,stock:te,sort:ie}[q]?.current;Ye&&!Ye.contains(je)&&W(null)};return document.addEventListener("mousedown",Pe),()=>document.removeEventListener("mousedown",Pe)},[q]),_t.useEffect(()=>{E(Pe=>Pe.filter(rt=>a.some(je=>je.id===rt)))},[a]);const Ie=G.useMemo(()=>{const Pe=Math.floor(a.reduce((Ye,dt)=>{const mt=Number(dt.stockQuantity)||0;return Ye+mt},0)),rt=a.reduce((Ye,dt)=>{const mt=Number(dt.stockQuantity)||0,yt=Number(dt.unitPrice)||0;return Ye+mt*yt},0),je=a.filter(Ye=>{const dt=Number(Ye.stockQuantity)||0,mt=Number(Ye.reorderLevel)||0;return dt<mt}).length,Me=a.filter(Ye=>Ye.status!=="archived").length;return{totalStock:Pe,totalValue:rt,lowStock:je,activeCount:Me}},[a]),Ue=G.useMemo(()=>{const Pe=p.trim().toLowerCase(),rt=dt=>Pe?dt.name.toLowerCase().includes(Pe)||dt.sku.toLowerCase().includes(Pe)||dt.category.toLowerCase().includes(Pe):!0,je=dt=>{if(y==="all")return!0;const mt=ke(y);if(mt){const yt=ke(dt.category);return yt?Z(yt,mt):Gn(dt.category,y)}return Gn(dt.category,y)},Me=dt=>T==="all"?!0:T==="low"?dt.stockQuantity<dt.reorderLevel:T==="out"?dt.stockQuantity===0:T==="overstock"?dt.stockQuantity>dt.reorderLevel*2:!0;return a.filter(dt=>rt(dt)&&je(dt)&&Me(dt)).sort((dt,mt)=>{switch(O){case"price-desc":return mt.unitPrice-dt.unitPrice;case"price-asc":return dt.unitPrice-mt.unitPrice;case"stock-desc":return mt.stockQuantity-dt.stockQuantity;case"stock-asc":return dt.stockQuantity-mt.stockQuantity;case"recent":default:return new Date(mt.createdAt).getTime()-new Date(dt.createdAt).getTime()}})},[a,p,y,T,O,ke,Z]),Ge=Pe=>{const rt=S.find(je=>je.name.localeCompare(Pe,"tr-TR",{sensitivity:"accent"})===0);A({id:rt?.id||"",name:Pe.trim(),taxRate:rt?.taxRate??18,isActive:rt?.isActive??!0,isProtected:rt?.isProtected??!1})},Le=async(Pe,rt,je)=>{if(!P)try{await(await Na()).create({name:Pe.trim(),taxRate:rt,parentId:je});const yt=await(await Na()).getAll({includeInactive:!0});C(yt),Nc(),j(!1);return}catch(mt){he.error("Kategori eklenirken hata:",mt);const yt=kc(mt);typeof yt?.message=="string"&&alert(yt.message);return}const Me=P.name,Ye=Pe.trim(),dt=S.find(mt=>mt.name.localeCompare(Me,"tr-TR",{sensitivity:"accent"})===0);if(!dt){he.error("Kategori bulunamad:",Me),A(null);return}if(dt.isProtected&&Ye!==Me){alert(`"${Me}" ana kategori olduu iin ismi deitirilemez. Sadece KDV oran gncellenebilir.`),A(null);return}try{await(await Na()).update(dt.id,{name:Ye!==Me?Ye:void 0,taxRate:rt!==P.taxRate?rt:void 0});const yt=await(await Na()).getAll({includeInactive:!0});if(C(yt),Nc(),Ye!==Me){if(le.some(Lt=>!Gn(Lt,Me)&&Gn(Lt,Ye)))return;n(Me,Ye)}A(null)}catch(mt){he.error("Kategori gncellenirken hata:",mt);const yt=kc(mt);typeof yt?.message=="string"&&b({title:c("common.error"),message:yt.message})}},at=async Pe=>{try{await(await Na()).delete(Pe);const je=await(await Na()).getAll({includeInactive:!0});C(je),Nc(),A(null)}catch(rt){he.error("Kategori arivlenirken hata:",rt);const je=kc(rt);if(je?.code==="CATEGORY_HAS_PRODUCTS"){const Me=Number(je?.count??0);A(null),b({title:c("common.warning"),message:c("products.cannotArchiveCategoryWithProducts",{count:Me})})}else typeof je?.message=="string"&&(A(null),b({title:c("common.error"),message:je.message}))}},ut=async Pe=>{try{await(await Na()).update(Pe,{isActive:!0});const je=await(await Na()).getAll({includeInactive:!0});C(je),Nc(),A(null)}catch(rt){he.error("Kategori aktif edilirken hata:",rt);const je=kc(rt);typeof je?.message=="string"&&b({title:c("common.error"),message:je.message})}},Ce=async Pe=>{if(typeof window>"u")return;if(Gn(Pe,ho)){b({title:c("common.warning"),message:c("products.generalCategoryCannotDeleteAlert")});return}const rt=S.find(Me=>Me.name.localeCompare(Pe,"tr-TR",{sensitivity:"accent"})===0);if(rt?.isProtected){b({title:c("common.warning"),message:c("products.categoryCannotDeleteProtected",{category:Pe})});return}const je=Ae.get(Pe)??0;if(je>0){b({title:c("common.warning"),message:c("products.deleteCategoryWithProducts",{count:je})});return}X({title:c("products.deleteCategory"),message:c("products.deleteCategoryConfirm"),confirmText:c("common.yes"),cancelText:c("common.no"),onConfirm:async()=>{try{if(rt){await(await Na()).delete(rt.id);const Ye=await(await Na()).getAll({includeInactive:!0});C(Ye),Nc()}l(Pe)}catch(Me){he.error("Kategori silinirken hata:",Me);const Ye=kc(Me);Ye?.code==="CATEGORY_HAS_PRODUCTS"?b({title:c("common.warning"),message:c("products.deleteCategoryWithProducts",{count:Ye.count})}):typeof Ye?.message=="string"&&b({title:c("common.error"),message:Ye.message})}finally{X(null)}}})},it=[{value:"all",label:c("products.filterCategory")},...le.map(Pe=>({value:Pe,label:jc(Pe,c)}))],xt={all:c("products.allStock"),low:c("products.lowStockFilter"),out:c("products.outOfStock"),overstock:c("products.overstock")},jt={recent:c("products.newest"),"price-desc":c("products.priceHighLow"),"price-asc":c("products.priceLowHigh"),"stock-desc":c("products.stockHighLow"),"stock-asc":c("products.stockLowHigh")},Ee=[{id:"category",label:c("products.category"),value:y,display:y==="all"?c("products.filterCategory"):jc(y,c),options:it,onChange:N,defaultValue:"all",menuRef:U},{id:"stock",label:c("products.stock"),value:T,display:xt[T]??T,options:Object.entries(xt).map(([Pe,rt])=>({value:Pe,label:rt})),onChange:_,defaultValue:"all",menuRef:te},{id:"sort",label:c("products.sort",{defaultValue:m.sort}),value:O,display:jt[O]??O,options:Object.entries(jt).map(([Pe,rt])=>({value:Pe,label:rt})),onChange:H,defaultValue:"recent",menuRef:ie}],xe=+(y!=="all")+ +(T!=="all")+ +(O!=="recent"),Be=()=>{N("all"),_("all"),H("recent"),W(null),E([])},$e=()=>{L.current?.click()},ye=Pe=>{const rt=Pe.target.files?.[0];if(!rt){Pe.target.value="";return}r&&r(rt),Pe.target.value=""},oe=()=>{const Pe=["Name,SKU,UnitPrice,CostPrice,TaxRate,StockQuantity,ReorderLevel,Unit,Category,Description",'rnek rn A,SKU-001,199.90,120.00,18,50,10,adet,Genel,"Aklama: rnek rn A"','rnek rn B,SKU-002,49.99,25.00,10,200,20,adet,Genel,"Aklama: rnek rn B"'].join(`
`),rt=new Blob(["\uFEFF"+Pe],{type:"text/csv;charset=utf-8;"}),je=document.createElement("a");if(je.download!==void 0){const Me=URL.createObjectURL(rt);je.setAttribute("href",Me),je.setAttribute("download","product_import_template.csv"),je.style.visibility="hidden",document.body.appendChild(je),je.click(),document.body.removeChild(je),URL.revokeObjectURL(Me)}},me=Pe=>{N(Pe),q==="category"&&W(null),typeof window<"u"&&window.innerWidth<1024&&V(!1)},ue=G.useMemo(()=>{const Pe=(ae-1)*Q;return Ue.slice(Pe,Pe+Q)},[Ue,ae,Q]),ze=G.useMemo(()=>ue.map(Pe=>Pe.id),[ue]),tt=G.useMemo(()=>ze.filter(Pe=>B.includes(Pe)),[ze,B]),kt=ze.length>0&&tt.length===ze.length,we=tt.length>0&&!kt,st=tt.length>0,wt=a.length>0,pe=[{action:"update-price",label:c("products.updatePrice")},{action:"assign-category",label:c("products.assignCategory")},{action:"archive",label:c("products.archive")},{action:"delete",label:c("products.delete"),tone:"danger"}],Qe=Pe=>{E(rt=>rt.includes(Pe)?rt.filter(je=>je!==Pe):[...rt,Pe])},fe=Pe=>{E(rt=>{if(ze.length===0)return rt;if(ze.every(Ye=>rt.includes(Ye)))return rt.filter(Ye=>!ze.includes(Ye));const Me=new Set([...rt,...ze]);return Array.from(Me)})},He=Pe=>{tt.length&&(i?.(Pe,tt),E(rt=>rt.filter(je=>!tt.includes(je))))};_t.useEffect(()=>{se.current&&(se.current.indeterminate=we)},[we]),G.useEffect(()=>{$(1)},[p,y,T,O]);const lt=Pe=>{const rt=Lu(Pe)?Pe:Bc[0];z(rt),Et.setItem("products_pageSize",String(rt)),$(1)};return e.jsxs("div",{className:"space-y-6",children:[Y&&e.jsx(ui,{isOpen:!0,title:Y.title,message:Y.message,confirmText:Y.confirmText,cancelText:Y.cancelText,danger:!0,onConfirm:Y.onConfirm,onCancel:()=>X(null)}),x&&e.jsx(Fi,{isOpen:!0,title:x.title,message:x.message,onClose:()=>b(null)}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:c("products.totalProducts")}),e.jsx(bn,{className:"h-5 w-5 text-indigo-500"})]}),e.jsx("p",{className:"mt-3 text-2xl font-semibold text-gray-900",children:Ie.activeCount}),e.jsx("p",{className:"text-xs text-gray-500",children:c("products.activeProductsDesc")})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:c("products.stockValue")}),e.jsx(tA,{className:"h-5 w-5 text-emerald-500"})]}),e.jsx("p",{className:"mt-3 text-2xl font-semibold text-gray-900",children:s(Ie.totalValue||0)}),e.jsx("p",{className:"text-xs text-gray-500",children:c("products.totalStockCostDesc")})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:c("products.totalStock")}),e.jsx(ci,{className:"h-5 w-5 text-blue-500"})]}),e.jsxs("p",{className:"mt-3 text-2xl font-semibold text-gray-900",children:[Ie.totalStock.toLocaleString("tr-TR")," ",c("products.unit")]}),e.jsx("p",{className:"text-xs text-gray-500",children:c("products.totalUnitsDesc")})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:c("products.lowStock")}),e.jsx(vn,{className:"h-5 w-5 text-orange-500"})]}),e.jsx("p",{className:"mt-3 text-2xl font-semibold text-gray-900",children:Ie.lowStock}),e.jsx("p",{className:"text-xs text-gray-500",children:c("products.criticalLevelDesc")})]})]}),e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[e.jsx("aside",{className:`${F?"block":"hidden"} lg:block lg:w-72 lg:flex-shrink-0`,children:e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 lg:sticky lg:top-24",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:c("products.productCategories")}),e.jsxs("p",{className:"text-xs text-gray-500",children:[le.length," ",c("products.categoriesCount")," - ",a.length," ",c("products.productsCount")]})]}),e.jsxs("button",{type:"button",onClick:()=>{A(null),j(!0)},className:"inline-flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-2 text-xs font-medium text-gray-600 transition-colors hover:bg-gray-50",children:[e.jsx(Fa,{className:"h-4 w-4"}),c("products.addCategory")]})]}),e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs("button",{type:"button",onClick:()=>me("all"),className:`flex w-full items-center justify-between rounded-lg px-3 py-2 text-sm transition-colors ${y==="all"?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"truncate",children:c("products.allProducts")}),e.jsx("span",{className:"text-xs text-gray-500",children:a.length})]}),e.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[le.length," ",c("products.categoriesCount")]}),e.jsx("button",{type:"button",onClick:()=>R(Pe=>!Pe),className:"text-[11px] text-indigo-600 hover:text-indigo-700",children:D?c("products.hideArchived",{defaultValue:m.hideArchived}):c("products.showArchived",{defaultValue:m.showArchived})})]}),le.length===0?e.jsx("p",{className:"rounded-lg bg-gray-50 px-3 py-2 text-xs text-gray-500",children:c("products.noCategories")}):e.jsxs(e.Fragment,{children:[ve.map(({mainCategory:Pe,subCategories:rt,categoryObj:je})=>{const Me=Ae.get(Pe)??0,Ye=y!=="all"&&Gn(Pe,y),dt=Gn(Pe,ho),mt=je?.isProtected||!1;return e.jsxs("div",{className:"space-y-1 mb-4",children:[e.jsxs("div",{className:"ml-2",children:[e.jsxs("button",{type:"button",onClick:()=>me(Pe),className:`flex w-full items-center justify-between rounded-lg px-3 py-2 text-sm font-medium transition-colors ${Ye?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsxs("span",{className:"truncate flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),jc(Pe,c)]}),e.jsx("span",{className:"text-xs text-gray-500",children:Me})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 px-5 text-[11px]",children:[e.jsx("button",{type:"button",onClick:()=>Ge(Pe),className:"text-gray-400 transition-colors hover:text-gray-600",title:c(mt?"products.mainCategoryEditTooltip":"products.editCategoryTooltip"),children:c("products.editCategory")}),e.jsx("span",{className:"text-gray-300",children:"-"}),e.jsx("button",{type:"button",onClick:()=>Ce(Pe),disabled:dt||mt,className:`transition-colors ${dt||mt?"cursor-not-allowed text-gray-300":"text-red-500 hover:text-red-600"}`,title:dt?c("products.generalCategoryCannotDelete"):mt?c("products.mainCategoryCannotDelete"):void 0,children:c("products.deleteCategory")})]})]}),rt.length>0&&e.jsx("div",{className:"ml-6 space-y-1",children:rt.map(yt=>{const Gt=Ae.get(yt)??0,Lt=y!=="all"&&Gn(yt,y);return e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>me(yt),className:`flex w-full items-center justify-between rounded-lg px-3 py-2 text-sm transition-colors ${Lt?"bg-gray-50 text-gray-700":"text-gray-600 hover:bg-gray-25"}`,children:[e.jsxs("span",{className:"truncate flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-400"}),jc(yt,c)]}),e.jsx("span",{className:"text-xs text-gray-500",children:Gt})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 px-5 text-[11px]",children:[e.jsx("button",{type:"button",onClick:()=>Ge(yt),className:"text-gray-400 transition-colors hover:text-gray-600",title:c("products.editCategoryTooltip"),children:c("products.editCategory")}),e.jsx("span",{className:"text-gray-300",children:"-"}),e.jsx("button",{type:"button",onClick:()=>Ce(yt),className:"text-red-500 transition-colors hover:text-red-600",children:c("products.deleteCategory")})]})]},yt)})})]},Pe)}),De.length>0&&e.jsxs("div",{className:"space-y-1 mt-4",children:[e.jsx("div",{className:"px-2 py-1",children:e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:c("products.subCategories")})}),De.map(Pe=>{const rt=Ae.get(Pe)??0,je=y!=="all"&&Gn(Pe,y);return e.jsxs("div",{className:"ml-4",children:[e.jsxs("button",{type:"button",onClick:()=>me(Pe),className:`flex w-full items-center justify-between rounded-lg px-3 py-2 text-sm transition-colors ${je?"bg-gray-50 text-gray-700":"text-gray-600 hover:bg-gray-25"}`,children:[e.jsxs("span",{className:"truncate flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-400"}),jc(Pe,c)]}),e.jsx("span",{className:"text-xs text-gray-500",children:rt})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 px-5 text-[11px]",children:[e.jsx("button",{type:"button",onClick:()=>Ge(Pe),className:"text-gray-400 transition-colors hover:text-gray-600",title:c("products.editCategoryTooltip"),children:c("products.editCategory")}),e.jsx("span",{className:"text-gray-300",children:"-"}),e.jsx("button",{type:"button",onClick:()=>Ce(Pe),className:"text-red-500 transition-colors hover:text-red-600",children:c("products.deleteCategory")})]})]},Pe)})]}),D&&e.jsxs("div",{className:"space-y-1 mt-4",children:[e.jsxs("div",{className:"px-2 py-1 flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:c("products.archivedCategories")}),e.jsx("span",{className:"text-[11px] text-gray-400",children:Ne.length})]}),Ne.length===0?e.jsx("div",{className:"ml-2 rounded-lg px-3 py-2 text-xs text-gray-400 bg-gray-50",children:c("products.noArchivedCategories")}):Ne.map(Pe=>{const rt=Ae.get(Pe.name)??0;return e.jsxs("div",{className:"ml-2 flex items-center justify-between rounded-lg px-3 py-2 text-sm text-gray-500 bg-gray-50",children:[e.jsx("span",{className:"truncate",children:Pe.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[11px] text-gray-400",children:rt}),e.jsx("button",{type:"button",onClick:()=>ut(Pe.id),className:"text-[11px] rounded border border-emerald-200 bg-white px-2 py-1 text-emerald-600 hover:border-emerald-300 hover:text-emerald-700",children:c("products.activate")})]})]},Pe.id)})]})]})]})]})}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-6",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:c("products.title")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Ue.length," ",c("products.title").toLowerCase()," - ",c("invoice.total"),": ",a.length]})]}),e.jsxs("button",{type:"button",onClick:()=>V(Pe=>!Pe),className:"inline-flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-2 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-50 lg:hidden",children:[e.jsx(Fa,{className:"h-4 w-4"}),c(F?"common.close":"products.manageCategories")]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"lg:sticky lg:top-16 lg:z-20",children:e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white/95 p-4 shadow-sm backdrop-blur",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Os,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:p,onChange:Pe=>v(Pe.target.value),placeholder:c("products.search"),className:"w-full rounded-lg border border-gray-300 py-2 pl-9 pr-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsx("input",{ref:L,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:ye}),e.jsxs("button",{type:"button",onClick:oe,className:"inline-flex items-center justify-center gap-2 rounded-lg border border-blue-200 px-3 py-2 text-sm font-semibold text-blue-600 transition-colors hover:bg-blue-50",title:c("customers.downloadTemplate"),children:[e.jsx(Cs,{className:"h-4 w-4"}),c("customers.downloadTemplate")]}),e.jsxs("button",{type:"button",onClick:$e,className:"inline-flex items-center justify-center gap-2 rounded-lg border border-purple-200 px-3 py-2 text-sm font-semibold text-purple-600 transition-colors hover:bg-purple-50 disabled:cursor-not-allowed disabled:border-gray-200 disabled:text-gray-300",disabled:!r,title:c("customers.importCSV"),children:[e.jsx(Zp,{className:"h-4 w-4"}),c("customers.importCSV")]}),e.jsxs("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-indigo-700",children:[e.jsx(Ks,{className:"h-4 w-4"}),c("products.newProduct")]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[Ee.map(({id:Pe,label:rt,display:je,value:Me,options:Ye,onChange:dt,defaultValue:mt,menuRef:yt})=>{const Gt=Me!==mt;return e.jsxs("div",{ref:yt,className:"relative flex items-center gap-1",children:[e.jsxs("button",{type:"button",onClick:()=>W(Lt=>Lt===Pe?null:Pe),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-sm transition-colors ${Gt?"border-indigo-200 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300 hover:text-gray-800"}`,children:[e.jsxs("span",{className:"whitespace-nowrap",children:[rt,": ",je]}),e.jsx(bs,{className:"h-3.5 w-3.5"})]}),Gt&&e.jsx("button",{type:"button",onClick:()=>{dt(mt),q===Pe&&W(null)},className:"inline-flex h-6 w-6 items-center justify-center rounded-full border border-gray-200 bg-white text-gray-500 transition-colors hover:border-gray-300 hover:text-gray-700",children:e.jsx(Nr,{className:"h-3.5 w-3.5"})}),q===Pe&&e.jsx("div",{className:"absolute left-0 top-[calc(100%+0.5rem)] z-20 w-56 rounded-lg border border-gray-200 bg-white p-1 shadow-lg",children:Ye.map(Lt=>{const Oe=Lt.value===Me;return e.jsxs("button",{type:"button",onClick:()=>{dt(Lt.value),W(null)},className:`flex w-full items-center justify-between rounded-md px-3 py-2 text-sm transition-colors ${Oe?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx("span",{children:Lt.label}),Oe&&e.jsx(cs,{className:"h-4 w-4"})]},Lt.value)})})]},Pe)}),xe>0&&e.jsx("button",{type:"button",onClick:Be,className:"ml-auto text-sm font-medium text-indigo-600 transition-colors hover:text-indigo-700",children:c("archive.clearFilters",{defaultValue:c("common.actions.clear")})})]}),e.jsx("div",{className:"mt-3 flex items-center justify-end",children:e.jsx(ca,{listType:"products",getState:()=>({searchTerm:p,categoryFilter:y,stockFilter:T,sortOption:O,pageSize:Q}),applyState:Pe=>{v(Pe.searchTerm??""),N(Pe.categoryFilter??"all"),_(Pe.stockFilter??"all"),H(Pe.sortOption??"recent"),Pe.pageSize&&Lu(Pe.pageSize)&&lt(Pe.pageSize)},presets:[{id:"low-stock",label:c("products.lowStockFilter"),apply:()=>_("low")},{id:"out-of-stock",label:c("products.outOfStock"),apply:()=>_("out")},{id:"price-high",label:c("products.priceHighLow"),apply:()=>H("price-desc")},{id:"price-low",label:c("products.priceLowHigh"),apply:()=>H("price-asc")}]})}),st&&e.jsxs("div",{className:"mt-3 flex flex-col gap-3 rounded-lg border border-indigo-100 bg-indigo-50 px-4 py-3 text-sm text-indigo-900 md:flex-row md:items-center md:justify-between",children:[e.jsxs("span",{className:"font-medium",children:["Toplu islem icin ",tt.length," urun secildi"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[pe.map(({action:Pe,label:rt,tone:je})=>e.jsx("button",{type:"button",onClick:()=>He(Pe),className:`rounded-full px-3 py-1.5 text-sm font-medium transition-colors ${je==="danger"?"border border-red-200 bg-white text-red-600 hover:border-red-300 hover:text-red-700":"border border-indigo-200 bg-white text-indigo-600 hover:border-indigo-300 hover:text-indigo-700"}`,children:rt},Pe)),e.jsx("button",{type:"button",onClick:()=>E(Pe=>Pe.filter(rt=>!tt.includes(rt))),className:"rounded-full border border-gray-200 px-3 py-1.5 text-sm font-medium text-gray-600 transition-colors hover:border-gray-300 hover:text-gray-800",children:"Secimleri kaldir"})]})]})]})}),e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white",children:Ue.length===0?wt?e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3 py-16",children:[e.jsx(bn,{className:"h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c("products.noProducts")}),e.jsx("p",{className:"max-w-md text-center text-sm text-gray-500",children:c("transactions.noTransactions")}),e.jsx("button",{type:"button",onClick:Be,className:"rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-sm font-semibold text-indigo-600 hover:bg-indigo-100",children:c("common.search")})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3 py-16",children:[e.jsx(bn,{className:"h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c("products.noProductsYet")}),e.jsx("p",{className:"max-w-md text-center text-sm text-gray-500",children:"Urun ekleyerek envanterinizi takip etmeye baslayin. Fiyat, stok ve kategori bilgileriniz burada gorunecek."}),e.jsx("button",{type:"button",onClick:t,className:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-700",children:c("products.addFirstProduct")})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm table-auto lg:min-w-[1024px] divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"hidden md:table-cell w-12 px-4 py-3",children:e.jsx("input",{ref:se,type:"checkbox",checked:ze.length>0&&kt,onChange:fe,"aria-label":c("common.yes"),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-500 w-full md:w-[320px]",children:c("products.name")}),e.jsx("th",{className:"hidden lg:table-cell w-40 px-4 md:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-500",children:c("products.category")}),e.jsx("th",{className:"hidden lg:table-cell w-32 px-4 md:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-500",children:c("products.price")}),e.jsx("th",{className:"hidden xl:table-cell w-32 px-4 md:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-500",children:c("products.stock")}),e.jsx("th",{className:"hidden xl:table-cell w-32 px-4 md:px-6 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-500",children:c("products.status")}),e.jsx("th",{className:"hidden md:table-cell sticky right-0 z-10 w-32 lg:w-44 min-w-[140px] lg:min-w-[176px] px-4 md:px-6 py-3 text-right text-xs font-semibold uppercase tracking-wide text-gray-500 bg-gray-50",children:c("products.actions")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:ue.map(Pe=>{const rt=B.includes(Pe.id),je=Pe.stockQuantity===0,Me=!je&&Pe.stockQuantity<Pe.reorderLevel,Ye=c(je?"products.depleted":Me?"products.critical":"products.inStock"),dt=je?"danger":Me?"warning":"success",mt=dt==="danger"?"bg-red-100 text-red-700":dt==="warning"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700";return e.jsxs("tr",{className:`group transition-colors hover:bg-gray-50 ${rt?"bg-indigo-50":""}`,children:[e.jsx("td",{className:"hidden md:table-cell px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:rt,onChange:()=>Qe(Pe.id),"aria-label":`Urunu sec: ${Pe.name}`,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("td",{className:"whitespace-nowrap px-4 md:px-6 py-4 align-top",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-indigo-100",children:e.jsx(bn,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:()=>d(Pe),className:"block max-w-[220px] truncate text-left font-medium text-gray-900 transition-colors hover:text-indigo-600",children:Pe.name}),e.jsx("div",{className:"md:hidden",children:e.jsx("input",{type:"checkbox",checked:rt,onChange:()=>Qe(Pe.id),"aria-label":`Urunu sec: ${Pe.name}`,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})})]}),e.jsx("div",{className:"hidden text-xs text-gray-500 lg:block",children:e.jsxs("span",{className:"inline-block max-w-[260px] truncate",title:`SKU: ${Pe.sku}`,children:["SKU: ",Pe.sku]})}),e.jsxs("div",{className:"mt-3 space-y-2 text-xs text-gray-600 md:hidden",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"SKU:"}),e.jsx("span",{className:"text-gray-900",children:Pe.sku||""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[c("products.category"),":"]}),e.jsx("span",{className:"text-gray-900",children:Pe.category})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[c("products.price"),":"]}),e.jsx("span",{className:"text-gray-900 font-semibold",children:s(Pe.unitPrice||0)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[c("products.stock"),":"]}),e.jsxs("span",{className:"text-gray-900",children:[Math.floor(Pe.stockQuantity)," ",Pe.unit]})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${mt}`,children:Ye})})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 md:hidden",children:[e.jsx("button",{type:"button",onClick:()=>d(Pe),className:"inline-flex h-9 w-9 items-center justify-center rounded-lg text-gray-400 transition-colors hover:bg-gray-100 hover:text-indigo-600",title:c("products.viewProduct"),children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>f(Pe),className:"inline-flex h-9 w-9 items-center justify-center rounded-lg text-gray-400 transition-colors hover:bg-gray-100 hover:text-blue-600",title:c("products.edit"),children:e.jsx(vs,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>h(Pe.id),className:"inline-flex h-9 w-9 items-center justify-center rounded-lg text-gray-400 transition-colors hover:bg-gray-100 hover:text-red-600",title:c("products.delete"),children:e.jsx(Xr,{className:"h-4 w-4"})})]})]})]})}),e.jsx("td",{className:"hidden lg:table-cell w-40 whitespace-nowrap px-4 md:px-6 py-4 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(Fa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"truncate",title:Pe.category,children:Pe.category})]})}),e.jsxs("td",{className:"hidden lg:table-cell w-32 whitespace-nowrap px-4 md:px-6 py-4 text-sm text-gray-900",children:[e.jsx("div",{className:"font-semibold",children:s(Pe.unitPrice||0)}),e.jsxs("div",{className:"hidden text-xs text-gray-500 lg:block",children:[c("products.costPrice"),": ",s(Pe.costPrice||0)]})]}),e.jsxs("td",{className:"hidden xl:table-cell w-32 whitespace-nowrap px-4 md:px-6 py-4 text-sm text-gray-900",title:`${c("products.minStock")}: ${Math.floor(Pe.reorderLevel)}`,children:[e.jsxs("div",{className:"font-semibold",children:[Math.floor(Pe.stockQuantity)," ",Pe.unit]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[c("products.minStock"),": ",Math.floor(Pe.reorderLevel)]})]}),e.jsx("td",{className:"hidden xl:table-cell w-32 whitespace-nowrap px-4 md:px-6 py-4 text-sm",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${mt}`,children:Ye})}),e.jsx("td",{className:"hidden md:table-cell sticky right-0 w-32 lg:w-44 min-w-[140px] lg:min-w-[176px] whitespace-nowrap px-4 md:px-6 py-4 text-right text-sm font-medium bg-white group-hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>d(Pe),className:"inline-flex h-8 w-8 items-center justify-center rounded-lg text-gray-400 transition-colors hover:bg-gray-100 hover:text-indigo-600",title:c("products.viewProduct"),children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>f(Pe),className:"inline-flex h-8 w-8 items-center justify-center rounded-lg text-gray-400 transition-colors hover:bg-gray-100 hover:text-blue-600",title:c("products.edit"),children:e.jsx(vs,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>h(Pe.id),className:"inline-flex h-8 w-8 items-center justify-center rounded-lg text-gray-400 transition-colors hover:bg-gray-100 hover:text-red-600",title:c("products.delete"),children:e.jsx(Xr,{className:"h-4 w-4"})})]})})]},Pe.id)})})]})})}),e.jsx("div",{className:"p-4 border border-t-0 border-gray-200 rounded-b-xl bg-white",children:e.jsx(Rs,{page:ae,pageSize:Q,total:Ue.length,onPageChange:$,onPageSizeChange:lt})})]})]})]}),e.jsx(Ev,{isOpen:k||!!P,onClose:()=>{A(null),j(!1)},onSubmit:Le,categories:le,categoryObjects:S,editingCategory:P,onArchive:Pe=>at(Pe),onRestore:Pe=>ut(Pe)})]})}const dm=[20,50,100],Ou=a=>dm.includes(a),Uf=a=>(a??"").toLowerCase(),iD=()=>{const a=Et.getItem("suppliers_pageSize"),o=a?Number(a):dm[0];return Ou(o)?o:dm[0]};function oD({suppliers:a,onAddSupplier:o,onEditSupplier:t,onDeleteSupplier:f,onViewSupplier:h,onSelectSupplier:d,selectionMode:n=!1}){const{t:l,i18n:i}=$t(),r=(i.resolvedLanguage||i.language||"en").split("-")[0],s={"Ofis Malzemeleri":{tr:"Ofis Malzemeleri",en:"Office Supplies",fr:"Fournitures de bureau",de:"Bromaterial"},Teknoloji:{tr:"Teknoloji",en:"Technology",fr:"Technologie",de:"Technologie"},Hizmet:{tr:"Hizmet",en:"Services",fr:"Services",de:"Dienstleistungen"},retim:{tr:"retim",en:"Manufacturing",fr:"Production",de:"Fertigung"},Lojistik:{tr:"Lojistik",en:"Logistics",fr:"Logistique",de:"Logistik"},Dier:{tr:"Dier",en:"Other",fr:"Autre",de:"Sonstiges"}},c=A=>s[A]?.[r]||A,[u,m]=G.useState(""),[x,b]=G.useState("all"),[p,v]=G.useState(""),[y,N]=G.useState(""),[T,_]=G.useState(1),[O,H]=G.useState(()=>iD()),F=G.useMemo(()=>Array.isArray(a)?a.filter(Boolean):[],[a]),V=F.length,{getDefault:q}=qi({listType:"suppliers"});G.useEffect(()=>{const A=q();if(A&&A.state)try{m(A.state.searchTerm??""),b(A.state.categoryFilter??"all"),A.state.startDate&&v(A.state.startDate),A.state.endDate&&N(A.state.endDate),A.state.pageSize&&Ou(A.state.pageSize)&&P(A.state.pageSize)}catch(k){he.warn("Failed to hydrate supplier saved view",k)}},[]);const W=["Ofis Malzemeleri","Teknoloji","Hizmet","retim","Lojistik","Dier"],B=G.useMemo(()=>{const A=u.trim().toLowerCase();return F.filter(k=>{const j=Uf(k?.name),S=Uf(k?.email),C=Uf(k?.company),D=!A||j.includes(A)||S.includes(A)||C.includes(A),R=x==="all"||k?.category===x;let L=!0;const Y=k?.createdAt?new Date(k.createdAt):null;return Y&&p&&(L=L&&Y>=new Date(p)),Y&&y&&(L=L&&Y<=new Date(y)),D&&R&&L})},[F,u,x,p,y]),E=G.useMemo(()=>{const A=(T-1)*O;return B.slice(A,A+O)},[B,T,O]);G.useEffect(()=>{_(1)},[u,x,p,y]);const P=A=>{const k=Ou(A)?A:dm[0];H(k),Et.setItem("suppliers_pageSize",String(k)),_(1)};return e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 min-w-full lg:min-w-[920px]",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n?"Tedariki Se":l("suppliers.title")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[V," ",l("suppliers.suppliersRegistered")]})]}),!n&&e.jsxs("button",{onClick:o,className:"flex items-center gap-2 self-start rounded-lg bg-orange-600 px-4 py-2 text-white transition-colors hover:bg-orange-700",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:l("suppliers.newSupplier")})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Os,{className:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 transform text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:l("suppliers.search"),value:u,onChange:A=>m(A.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("select",{value:x,onChange:A=>b(A.target.value),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 md:w-56",children:[e.jsx("option",{value:"all",children:i.language==="tr"?"Tm kategoriler":i.language==="en"?"All categories":i.language==="de"?"Alle Kategorien":i.language==="fr"?"Toutes les catgories":"All categories"}),W.map(A=>e.jsx("option",{value:A,children:c(A)},A))]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-700 whitespace-nowrap",children:l("startDate")}),e.jsx("input",{type:"date",value:p,onChange:A=>v(A.target.value),className:"rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700 whitespace-nowrap",children:l("endDate")}),e.jsx("input",{type:"date",value:y,onChange:A=>N(A.target.value),className:"rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-500"}),(p||y)&&e.jsx("button",{onClick:()=>{v(""),N("")},className:"rounded-lg bg-gray-100 px-3 py-2 text-sm hover:bg-gray-200",children:l("archive.clearFilters")})]}),e.jsx("div",{className:"flex w-full flex-wrap justify-start sm:justify-end",children:e.jsx(ca,{listType:"suppliers",getState:()=>({searchTerm:u,categoryFilter:x,startDate:p,endDate:y,pageSize:O}),applyState:A=>{const k=A??{};m(k.searchTerm??""),b(k.categoryFilter??"all"),v(k.startDate??""),N(k.endDate??""),k.pageSize&&Ou(k.pageSize)&&P(k.pageSize)},presets:[{id:"cat-office",label:c("Ofis Malzemeleri"),apply:()=>b("Ofis Malzemeleri")},{id:"cat-technology",label:c("Teknoloji"),apply:()=>b("Teknoloji")},{id:"cat-services",label:c("Hizmet"),apply:()=>b("Hizmet")},{id:"added-this-month",label:l("presets.addedThisMonth"),apply:()=>{const A=new Date,k=new Date(A.getFullYear(),A.getMonth(),1).toISOString().slice(0,10),j=new Date(A.getFullYear(),A.getMonth()+1,0).toISOString().slice(0,10);v(k),N(j)}}]})})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:B.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ts,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l(u||x!=="all"?"suppliers.noSuppliersFound":"suppliers.noSuppliers")}),e.jsx("p",{className:"text-gray-500 mb-4",children:l(u||x!=="all"?"suppliers.noSuppliersFoundDesc":"suppliers.noSuppliersDesc")}),!n&&!u&&x==="all"&&e.jsx("button",{onClick:o,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:l("suppliers.createFirstSupplier")})]}):E.map((A,k)=>{const j=A.name?.trim()||l("suppliers.unnamed",{defaultValue:"simsiz Tedariki"}),S=j.charAt(0).toUpperCase(),C=A.company?.trim(),D=A.email||l("suppliers.noEmail",{defaultValue:"E-posta yok"}),R=A.phone||"",L=A.id||`supplier-${k}`,Y=A.category||"Dier",X=c(Y);return e.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${n?"cursor-pointer":""}`,onClick:()=>n&&d?.(A),children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-start sm:items-center gap-4 min-w-0 w-full",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 font-semibold text-lg",children:S})}),e.jsxs("div",{className:"min-w-0",children:[n?e.jsx("h3",{className:"font-semibold text-gray-900",children:j}):e.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),h(A)},className:"font-semibold text-orange-600 hover:text-orange-800 transition-colors cursor-pointer text-left",title:"Tedariki detaylarn grntle",children:j}),C&&e.jsxs("p",{className:"text-sm text-gray-600 flex items-center truncate",children:[e.jsx(ts,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"truncate",children:C})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-1 min-w-0",children:[e.jsxs("span",{className:"text-sm text-gray-500 flex items-center truncate",children:[e.jsx(Hs,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"truncate",children:D})]}),R&&e.jsxs("span",{className:"text-sm text-gray-500 flex items-center truncate",children:[e.jsx(Co,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"truncate",children:R})]}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full",children:X})]}),!n&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 sm:hidden",children:[e.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),t(A)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Edit",children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation(),f(A.id)},className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","aria-label":"Delete",children:e.jsx(Xr,{className:"w-4 h-4"})})]})]})]}),!n&&e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 shrink-0",children:[e.jsx("button",{onClick:()=>t(A),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(A.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(Xr,{className:"w-4 h-4"})})]})]})},L)})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsx(Rs,{page:T,pageSize:O,total:B.length,onPageChange:_,onPageSizeChange:P})})]})})}function ug(a,o=250){const[t,f]=G.useState(a);return G.useEffect(()=>{const h=setTimeout(()=>f(a),o);return()=>clearTimeout(h)},[a,o]),t}const Sy=365,um=[20,50,100],Fu=a=>um.includes(a),lD=()=>{const a=Et.getItem("invoices_pageSize"),o=a?Number(a):um[0];return Fu(o)?o:um[0]},Cy=a=>{if(!a||typeof a!="object")return!1;const o=a,t=["invoiceNumber","customer","description","amount","status","dueDate","issueDate"],f=["asc","desc"];return!!(o.by&&o.dir&&t.includes(o.by)&&f.includes(o.dir))};function Ay({invoices:a,onAddInvoice:o,onEditInvoice:t,onDeleteInvoice:f,onViewInvoice:h,onUpdateInvoice:d,onDownloadInvoice:n,onVoidInvoice:l,onRestoreInvoice:i}){const{formatCurrency:r}=Jr(),{t:s,i18n:c}=$t("common"),{tenant:u}=Gs(),m=G.useMemo(()=>{try{const Ce=u?.id||en()||void 0,it=is("quotes_cache",{tenantId:Ce,fallbackToBase:!0})??[],xt=new Map;for(const jt of it){const Ee=jt?.id,xe=jt?.quoteNumber;Ee!=null&&xe!=null&&String(xe).trim()&&xt.set(String(Ee),String(xe))}return xt}catch{return new Map}},[u?.id]),[x,b]=G.useState(""),[p,v]=G.useState("all"),[y,N]=G.useState(!1),[T,_]=G.useState(null),[O,H]=G.useState(null),[F,V]=G.useState(""),[q,W]=G.useState(!1),[B,E]=G.useState(null),[P,A]=G.useState(""),[k,j]=G.useState({by:"issueDate",dir:"desc"}),[S,C]=G.useState(""),[D,R]=G.useState(""),L=ug(x,300),[Y,X]=G.useState(1),[ae,$]=G.useState(()=>lD()),{getDefault:Q}=qi({listType:"invoices"});G.useEffect(()=>{const Ce=Q();if(Ce&&Ce.state)try{b(Ce.state.searchTerm??""),v(Ce.state.statusFilter??"all"),C(Ce.state.startDate??""),R(Ce.state.endDate??""),N(!!Ce.state.showVoided),Cy(Ce.state.sort)&&j(Ce.state.sort),Ce.state.pageSize&&Fu(Ce.state.pageSize)&&ke(Ce.state.pageSize)}catch(it){he.warn("Failed to hydrate invoice saved view",it)}},[]);const z=String(u?.subscriptionPlan||"").toLowerCase(),M=z.includes("free")||z.includes("starter"),U=G.useMemo(()=>{const Ce=new Date,it=new Date(Ce.getFullYear(),Ce.getMonth(),1,0,0,0,0),xt=new Date(Ce.getFullYear(),Ce.getMonth()+1,0,23,59,59,999);return a.filter(jt=>{if(jt?.isVoided)return!1;const Ee=jt?.createdAt?new Date(jt.createdAt):jt?.issueDate?new Date(jt.issueDate):null;return!Ee||Number.isNaN(Ee.getTime())?!1:Ee>=it&&Ee<=xt}).length},[a]),te=5,ie=M&&U>=te,se=a.filter(Ce=>{const it=new Date(Ce.issueDate),xt=new Date;return xt.setDate(xt.getDate()-Sy),it>=xt}),le=G.useMemo(()=>a.filter(Ce=>{const it=Ln(L),xt=(Ce.items||Ce.lineItems||[]).map(ue=>ue.productName||ue.description||"").join(" "),jt=[Ce.invoiceNumber,Ce.customer?.name,Ce.customer?.email,Ce.status,Ce.issueDate,Ce.dueDate,xt,String(Ce.total)].map(Ln).join(" "),Ee=it.length===0||jt.includes(it),xe=p==="all"||Ce.status===p,Be=y||!Ce.isVoided,$e=new Date(Ce.issueDate),ye=new Date;ye.setDate(ye.getDate()-Sy);const oe=$e>=ye;let me=!0;return S&&(me=me&&new Date(Ce.issueDate)>=new Date(S)),D&&(me=me&&new Date(Ce.issueDate)<=new Date(D)),Ee&&xe&&Be&&oe&&me}).sort((Ce,it)=>{switch(k.by){case"invoiceNumber":return Ms(Ce,it,xt=>xt.invoiceNumber,k.dir,"string");case"customer":return Ms(Ce,it,xt=>xt.customer?.name||"",k.dir,"string");case"description":return Ms(Ce,it,jt=>{const Ee=jt.items||jt.lineItems||[];return Ee[0]?.productName||Ee[0]?.description||""},k.dir,"string");case"amount":return Ms(Ce,it,xt=>Hr(xt.total),k.dir,"number");case"status":return Ms(Ce,it,xt=>xt.status,k.dir,"string",WT);case"dueDate":{const xt=oi(Ce.dueDate),jt=oi(it.dueDate);return xt===jt?Ms(Ce,it,Ee=>Ee.invoiceNumber,k.dir,"string"):xt<jt?k.dir==="asc"?-1:1:k.dir==="asc"?1:-1}case"issueDate":default:{const xt=oi(Ce.issueDate),jt=oi(it.issueDate);return xt===jt?Ms(Ce,it,Ee=>Ee.invoiceNumber,k.dir,"string"):xt<jt?k.dir==="asc"?-1:1:k.dir==="asc"?1:-1}}}),[a,L,p,y,S,D,k.by,k.dir]),Ne=G.useMemo(()=>{const Ce=(Y-1)*ae;return le.slice(Ce,Ce+ae)},[le,Y,ae]);G.useEffect(()=>{X(1)},[L,p,y,S,D,k.by,k.dir]);const ke=Ce=>{const it=Fu(Ce)?Ce:um[0];$(it),Et.setItem("invoices_pageSize",String(it)),X(1)},Z=Ce=>{j(it=>it.by===Ce?{...it,dir:it.dir==="asc"?"desc":"asc"}:{by:Ce,dir:Ce==="amount"||Ce==="dueDate"||Ce==="issueDate"?"desc":"asc"})},ce=({active:Ce})=>e.jsx("span",{className:"inline-block ml-1 text-gray-400",children:Ce?k.dir==="asc"?"":"":""}),ve=(Ce,it)=>{if(it)return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:s("common:status.cancelled")});const xt=Kr(Ce),Ee={draft:{label:zt(s,"draft"),class:"bg-gray-100 text-gray-800"},sent:{label:zt(s,"sent"),class:"bg-blue-100 text-blue-800"},paid:{label:zt(s,"paid"),class:"bg-green-100 text-green-800"},overdue:{label:zt(s,"overdue"),class:"bg-red-100 text-red-800"},cancelled:{label:zt(s,"cancelled"),class:"bg-red-100 text-red-800"}}[xt],xe=Ee?Ee.label:zt(s,xt),Be=Ee?Ee.class:"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Be}`,children:xe})},De=Ce=>{const it=(c?.language||"en").toString();return new Date(Ce).toLocaleDateString(it)},Ae=Ce=>r(Ce),Ie=(Ce,it,xt)=>{_(Ce),H(it),V(xt)},Ue=Ce=>{O==="status"?d({...Ce,status:F}):O==="dueDate"?d({...Ce,dueDate:F}):O==="issueDate"&&d({...Ce,issueDate:F}),_(null),H(null),V("")},Ge=()=>{_(null),H(null),V("")},Le=Ce=>{E(Ce),W(!0)},at=()=>{B&&l&&P.trim()&&(l(B.id,P),W(!1),E(null),A(""))},ut=Ce=>{i&&i(Ce)};return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s("invoices.title")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[se.length," ",s("invoices.invoicesRegistered"),"  ",a.length-se.length," ",s("invoices.inArchive")]})]}),e.jsxs("button",{onClick:o,disabled:ie,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${ie?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,title:ie?"Starter/Free planda bu ayki fatura limiti doldu (5/5)":void 0,children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:s("invoices.newInvoice")})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 xl:flex-row",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:s("invoices.search"),value:x,onChange:Ce=>b(Ce.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:p,onChange:Ce=>v(Ce.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-auto",children:[e.jsx("option",{value:"all",children:s("invoices.filterAll")}),e.jsx("option",{value:"draft",children:zt(s,"draft")}),e.jsx("option",{value:"sent",children:zt(s,"sent")}),e.jsx("option",{value:"paid",children:zt(s,"paid")}),e.jsx("option",{value:"overdue",children:zt(s,"overdue")}),e.jsx("option",{value:"cancelled",children:zt(s,"cancelled")})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-center",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-700 whitespace-nowrap",children:s("startDate")}),e.jsx("input",{type:"date",value:S,onChange:Ce=>C(Ce.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 w-full sm:w-auto"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-700 whitespace-nowrap",children:s("endDate")}),e.jsx("input",{type:"date",value:D,onChange:Ce=>R(Ce.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 w-full sm:w-auto"})]}),(S||D)&&e.jsx("button",{onClick:()=>{C(""),R("")},className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 w-full sm:w-auto",title:s("archive.clearFilters"),children:s("archive.clearFilters")})]}),e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 bg-gray-50 rounded-lg w-full sm:w-auto",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:Ce=>N(Ce.target.checked),className:"mr-2"}),s(y?"invoices.hideVoided":"invoices.showVoided")]}),e.jsx("div",{className:"w-full flex justify-start lg:justify-end",children:e.jsx(ca,{listType:"invoices",getState:()=>({searchTerm:x,statusFilter:p,startDate:S,endDate:D,showVoided:y,sort:k,pageSize:ae}),applyState:Ce=>{const it=Ce??{};b(it.searchTerm??""),v(it.statusFilter??"all"),C(it.startDate??""),R(it.endDate??""),N(!!it.showVoided),Cy(it.sort)&&j(it.sort),it.pageSize&&Fu(it.pageSize)&&ke(it.pageSize)},presets:[{id:"this-month",label:s("presets.thisMonth"),apply:()=>{const Ce=new Date,it=new Date(Ce.getFullYear(),Ce.getMonth(),1).toISOString().slice(0,10),xt=new Date(Ce.getFullYear(),Ce.getMonth()+1,0).toISOString().slice(0,10);C(it),R(xt)}},{id:"last-month",label:s("presets.lastMonth"),apply:()=>{const Ce=new Date,it=new Date(Ce.getFullYear(),Ce.getMonth()-1,1).toISOString().slice(0,10),xt=new Date(Ce.getFullYear(),Ce.getMonth(),0).toISOString().slice(0,10);C(it),R(xt)}},{id:"this-year",label:s("presets.thisYear"),apply:()=>{const Ce=new Date,it=new Date(Ce.getFullYear(),0,1).toISOString().slice(0,10),xt=new Date(Ce.getFullYear(),11,31).toISOString().slice(0,10);C(it),R(xt)}},{id:"status-draft",label:zt(s,"draft"),apply:()=>v("draft")},{id:"status-sent",label:zt(s,"sent"),apply:()=>v("sent")},{id:"status-paid",label:zt(s,"paid"),apply:()=>v("paid")},{id:"status-overdue",label:zt(s,"overdue"),apply:()=>v("overdue")}]})}),M&&e.jsxs("div",{className:"px-3 py-2 text-sm rounded-lg border border-gray-200 bg-gray-50 w-full sm:w-auto text-center sm:text-left",children:["Bu ay: ",e.jsxs("strong",{className:`${ie?"text-red-600":"text-gray-900"}`,children:[U,"/",te]})]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:le.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Fr,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s(x||p!=="all"?"invoices.noInvoicesFound":"invoices.noInvoices")}),e.jsx("p",{className:"text-gray-500 mb-4",children:s(x||p!=="all"?"invoices.noInvoicesFoundDesc":"invoices.noInvoicesDesc")}),!x&&p==="all"&&e.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:s("invoices.createFirstInvoice")})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm table-auto lg:min-w-[1024px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>Z("invoiceNumber"),className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-full md:w-40",children:[s("invoices.invoiceNumber"),e.jsx(ce,{active:k.by==="invoiceNumber"})]}),e.jsx("th",{className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-44",children:s("invoices.table.sourceQuote",{defaultValue:"Kaynak Teklif"})}),e.jsxs("th",{onClick:()=>Z("customer"),className:"hidden md:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-56",children:[s("invoices.customer"),e.jsx(ce,{active:k.by==="customer"})]}),e.jsxs("th",{onClick:()=>Z("description"),className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-[320px]",children:[s("common.description"),e.jsx(ce,{active:k.by==="description"})]}),e.jsxs("th",{onClick:()=>Z("amount"),className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-32",children:[s("invoices.amount"),e.jsx(ce,{active:k.by==="amount"})]}),e.jsxs("th",{onClick:()=>Z("status"),className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-40",children:[s("invoices.status"),e.jsx(ce,{active:k.by==="status"})]}),e.jsxs("th",{onClick:()=>Z("issueDate"),className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-32",children:[s("invoices.date"),e.jsx(ce,{active:k.by==="issueDate"})]}),e.jsx("th",{className:"hidden md:table-cell px-4 md:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32 lg:w-44 min-w-[140px] lg:min-w-[176px] sticky right-0 bg-gray-50 z-10",children:s("invoices.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ne.map(Ce=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-4 md:px-6 py-4 align-top",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Fr,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.jsx("button",{onClick:()=>h(Ce),className:"text-blue-600 hover:text-blue-800 font-medium transition-colors cursor-pointer",title:s("invoices.viewInvoice"),children:Ce.invoiceNumber})}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(Vr,{className:"w-3 h-3 mr-1"}),De(Ce.dueDate)]})]})]}),e.jsxs("div",{className:"mt-3 space-y-2 text-xs text-gray-600 md:hidden",children:[Ce.sourceQuoteId&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("invoices.table.sourceQuote",{defaultValue:"Kaynak Teklif"}),":"]}),e.jsx("button",{type:"button",className:"text-indigo-600 hover:text-indigo-800",onClick:()=>{try{window.location.hash=`quotes-edit:${String(Ce.sourceQuoteId)}`}catch{}},title:s("quotes.editModal.title",{defaultValue:"Teklifi Dzenle"}),children:Ce?.sourceQuoteNumber||m.get(String(Ce.sourceQuoteId))||s("common.open",{defaultValue:"A"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("invoices.customer"),":"]}),e.jsx("span",{className:"text-gray-900",children:Ce.customer?.name||s("invoices.noCustomer",{defaultValue:"Hesap Yok"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("invoices.status"),":"]}),ve(Ce.status,Ce.isVoided)]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("invoices.amount"),":"]}),e.jsx("span",{className:"text-gray-900 font-semibold",children:Ae(Number(Ce.total)||0)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Vr,{className:"w-3 h-3"}),e.jsx("span",{children:De(Ce.issueDate)}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("span",{children:De(Ce.dueDate)})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 md:hidden",children:[e.jsx("button",{onClick:()=>h(Ce),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:s("invoices.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t(Ce),disabled:Ce.isVoided,className:`inline-flex items-center justify-center w-9 h-9 rounded transition-colors ${Ce.isVoided?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-blue-600 hover:bg-blue-50"}`,title:Ce.isVoided?s("invoices.cannotEditVoided",{defaultValue:"ptal edilmi fatura dzenlenemez"}):s("invoices.edit"),children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n?.(Ce),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("invoices.download"),children:e.jsx(Cs,{className:"w-4 h-4"})}),Ce.isVoided?e.jsx("button",{onClick:()=>ut(Ce.id),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("invoices.restore",{defaultValue:"Geri Ykle"}),children:e.jsx(jl,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>Le(Ce),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors",title:s("invoices.void",{defaultValue:"Faturay ptal Et"}),children:e.jsx(qc,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(Ce.id),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:s("invoices.delete"),children:e.jsx(Xr,{className:"w-4 h-4"})})]})]}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:Ce.sourceQuoteId?e.jsx("button",{type:"button",className:"text-indigo-600 hover:text-indigo-800",onClick:()=>{try{window.location.hash=`quotes-edit:${String(Ce.sourceQuoteId)}`}catch{}},title:s("quotes.editModal.title",{defaultValue:"Teklifi Dzenle"}),children:Ce?.sourceQuoteNumber||m.get(String(Ce.sourceQuoteId))||s("common.open",{defaultValue:"A"})}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"hidden md:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ce.customer?.name||"Hesap Yok"}),e.jsx("div",{className:"text-xs text-gray-500 hidden lg:block",children:Ce.customer?.email||""})]})}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-700 max-w-[260px]",children:(()=>{const it=Ce.items||Ce.lineItems||[];return it.length>0?e.jsxs("div",{className:"space-y-1",children:[it.slice(0,2).map((xt,jt)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-gray-400 mr-1",children:""}),e.jsxs("span",{className:"line-clamp-1",children:[xt.productName||xt.description||"rn",xt.quantity&&` (${xt.quantity}x)`]})]},jt)),it.length>2&&e.jsxs("div",{className:"text-xs text-gray-400",children:["+",it.length-2," daha..."]})]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"rn bilgisi yok"})})()})}),e.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap text-left md:text-right",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Ae(Number(Ce.total)||0)})})}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:T===Ce.id&&O==="status"?e.jsxs("div",{className:"flex items-center space-x-2 flex-nowrap z-10",children:[e.jsxs("select",{value:F,onChange:it=>V(it.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 w-[120px] max-w-[120px]",children:[e.jsx("option",{value:"draft",children:zt(s,"draft")}),e.jsx("option",{value:"sent",children:zt(s,"sent")}),e.jsx("option",{value:"paid",children:zt(s,"paid")}),e.jsx("option",{value:"overdue",children:zt(s,"overdue")})]}),e.jsx("button",{onClick:()=>Ue(Ce),className:"inline-flex items-center justify-center w-7 h-7 rounded-md hover:bg-green-50 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-green-500","aria-label":s("common.save"),children:e.jsx(cs,{className:"w-4 h-4 shrink-0 text-green-600"})}),e.jsx("button",{onClick:Ge,className:"inline-flex items-center justify-center w-7 h-7 rounded-md hover:bg-red-50 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-red-500","aria-label":s("common.cancel"),children:e.jsx(Nr,{className:"w-4 h-4 shrink-0 text-red-600"})})]}):e.jsx("div",{onClick:()=>!Ce.isVoided&&Ie(Ce.id,"status",Ce.status),className:`${Ce.isVoided?"cursor-not-allowed":"cursor-pointer hover:opacity-80"} transition-opacity inline-block`,children:ve(Ce.status,Ce.isVoided)})}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T===Ce.id&&O==="issueDate"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"date",value:F,onChange:it=>V(it.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("button",{onClick:()=>Ue(Ce),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Ge,className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(Nr,{className:"w-4 h-4"})})]}):e.jsx("div",{onClick:()=>Ie(Ce.id,"issueDate",Ce.issueDate),className:"cursor-pointer hover:bg-gray-50 rounded p-1",children:De(Ce.issueDate)})}),e.jsx("td",{className:"hidden md:table-cell px-4 md:px-6 py-4 whitespace-nowrap text-right text-sm font-medium sticky right-0 bg-white z-10 min-w-[140px] lg:min-w-[176px]",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>h(Ce),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:s("invoices.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t(Ce),disabled:Ce.isVoided,className:`inline-flex items-center justify-center w-8 h-8 rounded transition-colors ${Ce.isVoided?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-blue-600 hover:bg-blue-50"}`,title:Ce.isVoided?s("invoices.cannotEditVoided",{defaultValue:"ptal edilmi fatura dzenlenemez"}):s("invoices.edit"),children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{n&&n(Ce)},className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("invoices.download"),children:e.jsx(Cs,{className:"w-4 h-4"})}),Ce.isVoided?e.jsx("button",{onClick:()=>ut(Ce.id),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("invoices.restore",{defaultValue:"Geri Ykle"}),children:e.jsx(jl,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>Le(Ce),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors",title:s("invoices.void",{defaultValue:"Faturay ptal Et"}),children:e.jsx(qc,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(Ce.id),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:s("invoices.delete"),children:e.jsx(Xr,{className:"w-4 h-4"})})]})})]},Ce.id))})]})})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsx(Rs,{page:Y,pageSize:ae,total:le.length,onPageChange:X,onPageSizeChange:ke})}),q&&B&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:s("invoices.void",{defaultValue:"Faturay ptal Et"})}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s("invoices.voidConfirm",{defaultValue:"{{invoiceNumber}} numaral faturay iptal etmek istediinizden emin misiniz?",invoiceNumber:B.invoiceNumber})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("invoices.voidReason",{defaultValue:"ptal Nedeni"})," *"]}),e.jsx("textarea",{value:P,onChange:Ce=>A(Ce.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",rows:3,placeholder:s("invoices.voidReasonPlaceholder",{defaultValue:"ptal nedenini aklayn..."}),required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{W(!1),E(null),A("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:s("common.cancel")}),e.jsx("button",{onClick:at,disabled:!P.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s("invoices.void",{defaultValue:"Faturay ptal Et"})})]})]})})]})}const cD=a=>a==null?'""':`"${String(a).replace(/"/g,'""')}"`,mm=[20,50,100],Bu=a=>mm.includes(a),dD=()=>{const a=Et.getItem("expenses_pageSize"),o=a?Number(a):mm[0];return Bu(o)?o:mm[0]},Ty=a=>{if(!a||typeof a!="object")return!1;const o=a,t=["description","supplier","category","amount","status","expenseDate"],f=["asc","desc"];return!!(o.by&&o.dir&&t.includes(o.by)&&f.includes(o.dir))};function uD({expenses:a,onAddExpense:o,onEditExpense:t,onDeleteExpense:f,onViewExpense:h,onUpdateExpense:d,onDownloadExpense:n,onVoidExpense:l,onRestoreExpense:i}){const{formatCurrency:r}=Jr(),{t:s,i18n:c}=$t("common"),{tenant:u}=Gs(),[m,x]=G.useState(""),[b,p]=G.useState("all"),[v,y]=G.useState("all"),[N,T]=G.useState(!1),[_,O]=G.useState(null),[H,F]=G.useState(null),[V,q]=G.useState(""),[W,B]=G.useState(!1),[E,P]=G.useState(null),[A,k]=G.useState(""),[j,S]=G.useState({by:"expenseDate",dir:"desc"}),[C,D]=G.useState(""),[R,L]=G.useState(""),Y=ug(m,300),[X,ae]=G.useState(1),[$,Q]=G.useState(()=>dD()),{getDefault:z}=qi({listType:"expenses"});G.useEffect(()=>{const Ee=z();if(Ee&&Ee.state)try{x(Ee.state.searchTerm??""),p(Ee.state.statusFilter??"all"),y(Ee.state.categoryFilter??"all"),D(Ee.state.startDate??""),L(Ee.state.endDate??""),T(!!Ee.state.showVoided),Ty(Ee.state.sort)&&S(Ee.state.sort),Ee.state.pageSize&&Bu(Ee.state.pageSize)&&Ae(Ee.state.pageSize)}catch(xe){he.warn("Failed to hydrate expense saved view",xe)}},[]);const M=String(u?.subscriptionPlan||"").toLowerCase(),U=M.includes("free")||M.includes("starter"),te=G.useMemo(()=>{const Ee=new Date,xe=new Date(Ee.getFullYear(),Ee.getMonth(),1,0,0,0,0),Be=new Date(Ee.getFullYear(),Ee.getMonth()+1,0,23,59,59,999);return a.filter($e=>{if($e?.isVoided)return!1;const ye=$e?.createdAt?new Date($e.createdAt):$e?.expenseDate?new Date($e.expenseDate):null;return!ye||Number.isNaN(ye.getTime())?!1:ye>=xe&&ye<=Be}).length},[a]),ie=5,se=U&&te>=ie,le=["equipment","utilities","rent","salaries","personnel","supplies","marketing","travel","insurance","taxes","other"],Ne=G.useCallback(Ee=>{const xe=s(`expenseCategories.${Ee}`)||Ee;return String(xe).replace(/\s*\([^)]*\)\s*/g,"").trim()},[s]),ke=G.useMemo(()=>a.filter(Ee=>{const xe=Ln(Y),Be=[Ee.expenseNumber,Ee.description,Ee.supplier?.name,Ee.category,Ee.status,Ee.expenseDate,String(Ee.amount)].map(Ln).join(" "),$e=xe.length===0||Be.includes(xe),ye=b==="all"||Ee.status===b,oe=v==="all"||Ee.category===v,me=N||!Ee.isVoided;let ue=!0;return C&&(ue=ue&&new Date(Ee.expenseDate)>=new Date(C)),R&&(ue=ue&&new Date(Ee.expenseDate)<=new Date(R)),$e&&ye&&oe&&me&&ue}).sort((Ee,xe)=>{switch(j.by){case"description":return Ms(Ee,xe,Be=>Be.description,j.dir,"string");case"supplier":return Ms(Ee,xe,Be=>Be.supplier?.name||"",j.dir,"string");case"category":return Ms(Ee,xe,Be=>Be.category,j.dir,"string");case"amount":return Ms(Ee,xe,Be=>Hr(Be.amount),j.dir,"number");case"status":return Ms(Ee,xe,Be=>Be.status,j.dir,"string",YT);case"expenseDate":default:{const Be=oi(Ee.expenseDate),$e=oi(xe.expenseDate);return Be===$e?Ms(Ee,xe,ye=>ye.description||"",j.dir,"string"):Be<$e?j.dir==="asc"?-1:1:j.dir==="asc"?1:-1}}}),[a,Y,b,v,N,C,R,j.by,j.dir]);G.useEffect(()=>{ae(1)},[Y,b,v,N,C,R,j.by,j.dir]);const Z=G.useMemo(()=>{const Ee=(X-1)*$;return ke.slice(Ee,Ee+$)},[ke,X,$]),ce=G.useCallback(Ee=>{const xe=(c?.language||"en").toString(),Be=new Date(Ee);return Number.isNaN(Be.getTime())?"":Be.toLocaleDateString(xe)},[c?.language]),ve=G.useCallback(Ee=>{const xe=(Ee||"").trim(),Be=(c.language||"tr").slice(0,2).toLowerCase(),$e=Be==="tr"?"Tedariki Yok":Be==="de"?"Kein Lieferant":Be==="fr"?"Aucun Fournisseur":"No Supplier";if(!xe)return s("common:noSupplier",{defaultValue:$e});const ye=xe.toLowerCase();return["nosupplier","no supplier","tedariki yok","kein lieferant","aucun fournisseur"].includes(ye)?s("common:noSupplier",{defaultValue:$e}):xe},[c.language,s]),De=G.useCallback(()=>{if(!(typeof window>"u")){if(!ke.length){he.info("Expense CSV export skipped: no rows match current filters");return}try{const Ee=[s("expenses.expenseNumber",{defaultValue:"Expense Number"}),s("common.description",{defaultValue:"Description"}),s("expenses.supplier",{defaultValue:"Supplier"}),s("expenses.category",{defaultValue:"Category"}),s("common.statusLabel",{defaultValue:"Status"}),s("expenses.expenseDate",{defaultValue:"Expense Date"}),s("expenses.amount",{defaultValue:"Amount"})],xe=ke.map(me=>{const ue=typeof me.supplier=="string"?me.supplier:me.supplier?.name;return[me.expenseNumber||me.id||"",me.description||"",ve(ue),Ne(me.category),zt(s,Kr(me.status)),ce(me.expenseDate),r(Hr(me.amount))]}),Be=[Ee,...xe].map(me=>me.map(cD).join(",")).join(`\r
`),$e=new Blob(["\uFEFF"+Be],{type:"text/csv;charset=utf-8;"}),ye=URL.createObjectURL($e),oe=document.createElement("a");oe.href=ye,oe.download=`expenses_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(ye),he.info("Expense CSV export completed",{rowCount:ke.length})}catch(Ee){he.error("Expense CSV export failed",Ee)}}},[ke,r,ce,Ne,ve,s]),Ae=Ee=>{const xe=Bu(Ee)?Ee:mm[0];Q(xe),Et.setItem("expenses_pageSize",String(xe)),ae(1)},Ie=Ee=>{S(xe=>xe.by===Ee?{...xe,dir:xe.dir==="asc"?"desc":"asc"}:{by:Ee,dir:Ee==="amount"||Ee==="expenseDate"?"desc":"asc"})},Ue=({active:Ee})=>e.jsx("span",{className:"inline-block ml-1 text-gray-400",children:Ee?j.dir==="asc"?"":"":""}),Ge=(Ee,xe)=>{if(xe)return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:s("common:status.cancelled")});const Be=Kr(Ee),ye={pending:{label:zt(s,"pending"),class:"bg-yellow-100 text-yellow-800"},approved:{label:zt(s,"approved"),class:"bg-blue-100 text-blue-800"},paid:{label:zt(s,"paid"),class:"bg-green-100 text-green-800"},rejected:{label:zt(s,"rejected"),class:"bg-red-100 text-red-800"},cancelled:{label:zt(s,"cancelled"),class:"bg-red-100 text-red-800"}}[Be],oe=ye?ye.label:zt(s,Be),me=ye?ye.class:"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${me}`,children:oe})},Le=Ee=>{const xe=typeof Ee=="string"?parseFloat(Ee):Ee;return r(xe||0)},at=(Ee,xe,Be)=>{O(Ee),F(xe),q(Be)},ut=Ee=>{H==="status"&&["pending","approved","paid","rejected"].includes(V)&&d({...Ee,status:V}),O(null),F(null),q("")},Ce=()=>{O(null),F(null),q("")},it=Ee=>{P(Ee),B(!0)},xt=()=>{E&&l&&A.trim()&&(l(E.id,A),B(!1),P(null),k(""))},jt=Ee=>{i&&i(Ee)};return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s("expenses.title")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.length," ",s("expenses.expensesRegistered")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:De,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(kl,{className:"w-4 h-4"}),e.jsx("span",{children:s("expenses.exportCsv",{defaultValue:"CSV Da Aktar"})})]}),e.jsxs("button",{onClick:o,disabled:se,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${se?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,title:se?"Starter/Free planda bu ayki gider limiti doldu (5/5)":void 0,children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:s("expenses.newExpense")})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:s("expenses.search"),value:m,onChange:Ee=>x(Ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("select",{value:b,onChange:Ee=>p(Ee.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"all",children:s("expenses.filterAll")}),e.jsx("option",{value:"pending",children:zt(s,"pending")}),e.jsx("option",{value:"approved",children:zt(s,"approved")}),e.jsx("option",{value:"paid",children:zt(s,"paid")}),e.jsx("option",{value:"rejected",children:zt(s,"rejected")})]}),e.jsxs("select",{value:v,onChange:Ee=>y(Ee.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"all",children:c.language==="tr"?"Tm kategoriler":c.language==="en"?"All categories":c.language==="de"?"Alle Kategorien":c.language==="fr"?"Toutes les catgories":"All categories"}),le.map(Ee=>e.jsx("option",{value:Ee,children:Ne(Ee)},Ee))]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-700 whitespace-nowrap",children:s("startDate")}),e.jsx("input",{type:"date",value:C,onChange:Ee=>D(Ee.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-700 whitespace-nowrap",children:s("endDate")}),e.jsx("input",{type:"date",value:R,onChange:Ee=>L(Ee.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),(C||R)&&e.jsx("button",{onClick:()=>{D(""),L("")},className:"px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",title:s("archive.clearFilters"),children:s("archive.clearFilters")})]}),e.jsxs("label",{className:"flex items-center px-3 py-2 text-sm text-gray-700 whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:Ee=>T(Ee.target.checked),className:"mr-2"}),s(N?"fiscalPeriods.filters.hideVoided":"fiscalPeriods.filters.showVoided")]}),e.jsx("div",{className:"ml-auto flex items-center",children:e.jsx(ca,{listType:"expenses",getState:()=>({searchTerm:m,statusFilter:b,categoryFilter:v,startDate:C,endDate:R,showVoided:N,sort:j,pageSize:$}),applyState:Ee=>{const xe=Ee??{};x(xe.searchTerm??""),p(xe.statusFilter??"all"),y(xe.categoryFilter??"all"),D(xe.startDate??""),L(xe.endDate??""),T(!!xe.showVoided),Ty(xe.sort)&&S(xe.sort),xe.pageSize&&Bu(xe.pageSize)&&Ae(xe.pageSize)},presets:[{id:"this-month",label:s("presets.thisMonth"),apply:()=>{const Ee=new Date,xe=new Date(Ee.getFullYear(),Ee.getMonth(),1).toISOString().slice(0,10),Be=new Date(Ee.getFullYear(),Ee.getMonth()+1,0).toISOString().slice(0,10);D(xe),L(Be)}},{id:"last-month",label:s("presets.lastMonth"),apply:()=>{const Ee=new Date,xe=new Date(Ee.getFullYear(),Ee.getMonth()-1,1).toISOString().slice(0,10),Be=new Date(Ee.getFullYear(),Ee.getMonth(),0).toISOString().slice(0,10);D(xe),L(Be)}},{id:"this-year",label:s("presets.thisYear"),apply:()=>{const Ee=new Date,xe=new Date(Ee.getFullYear(),0,1).toISOString().slice(0,10),Be=new Date(Ee.getFullYear(),11,31).toISOString().slice(0,10);D(xe),L(Be)}},{id:"status-pending",label:zt(s,"pending"),apply:()=>p("pending")},{id:"status-approved",label:zt(s,"approved"),apply:()=>p("approved")},{id:"status-paid",label:zt(s,"paid"),apply:()=>p("paid")},{id:"status-rejected",label:zt(s,"rejected"),apply:()=>p("rejected")}]})}),U&&e.jsxs("div",{className:"px-3 py-2 text-sm rounded-lg border border-gray-200 bg-gray-50 whitespace-nowrap",children:["Bu ay: ",e.jsxs("strong",{className:`${se?"text-red-600":"text-gray-900"}`,children:[te,"/",ie]})]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:ke.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(un,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s(m||b!=="all"||v!=="all"?"expenses.noExpensesFound":"expenses.noExpenses")}),e.jsx("p",{className:"text-gray-500 mb-4",children:s(m||b!=="all"||v!=="all"?"expenses.noExpensesFoundDesc":"expenses.noExpensesDesc")}),!m&&b==="all"&&v==="all"&&e.jsx("button",{onClick:o,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:s("expenses.createFirstExpense")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm table-auto lg:min-w-[1024px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>Ie("description"),className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-full md:w-[320px]",children:[s("expenses.description"),e.jsx(Ue,{active:j.by==="description"})]}),e.jsxs("th",{onClick:()=>Ie("supplier"),className:"hidden md:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-56",children:[s("expenses.supplier"),e.jsx(Ue,{active:j.by==="supplier"})]}),e.jsxs("th",{onClick:()=>Ie("category"),className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-40",children:[s("expenses.category"),e.jsx(Ue,{active:j.by==="category"})]}),e.jsxs("th",{onClick:()=>Ie("amount"),className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-32",children:[s("expenses.amount"),e.jsx(Ue,{active:j.by==="amount"})]}),e.jsxs("th",{onClick:()=>Ie("status"),className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-40",children:[s("expenses.status"),e.jsx(Ue,{active:j.by==="status"})]}),e.jsxs("th",{onClick:()=>Ie("expenseDate"),className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-32",children:[s("expenses.date"),e.jsx(Ue,{active:j.by==="expenseDate"})]}),e.jsx("th",{className:"hidden md:table-cell px-4 md:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32 lg:w-44 min-w-[140px] lg:min-w-[176px] sticky right-0 bg-gray-50 z-10",children:s("expenses.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map(Ee=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-4 md:px-6 py-4 align-top",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(un,{className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.jsx("button",{onClick:()=>h(Ee),className:"text-red-600 hover:text-red-800 font-medium transition-colors cursor-pointer",title:s("expenses.viewExpense"),children:Ee.expenseNumber})}),e.jsx("div",{className:"text-xs text-gray-500 truncate max-w-[260px]",title:Ee.description,children:Ee.description})]})]}),e.jsxs("div",{className:"mt-3 space-y-2 text-xs text-gray-600 md:hidden",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("expenses.supplier"),":"]}),e.jsx("span",{className:"text-gray-900",children:ve(typeof Ee.supplier=="string"?Ee.supplier:Ee.supplier?.name)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("expenses.category"),":"]}),e.jsx("span",{children:Ne(Ee.category)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("expenses.status"),":"]}),Ge(Ee.status,Ee.isVoided)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vr,{className:"w-3 h-3"}),e.jsx("span",{children:ce(Ee.expenseDate)})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 md:hidden",children:[e.jsx("button",{onClick:()=>h(Ee),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:s("expenses.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t(Ee),disabled:Ee.isVoided,className:`inline-flex items-center justify-center w-9 h-9 rounded transition-colors ${Ee.isVoided?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:Ee.isVoided?"ptal edilmi gider dzenlenemez":s("expenses.edit"),children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{n&&n(Ee)},className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("expenses.download"),children:e.jsx(Cs,{className:"w-4 h-4"})}),Ee.isVoided?e.jsx("button",{onClick:()=>jt(Ee.id),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Gideri geri ykle",children:e.jsx(jl,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>it(Ee),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors",title:"Gideri iptal et",children:e.jsx(qc,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(Ee.id),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:s("expenses.delete"),children:e.jsx(Xr,{className:"w-4 h-4"})})]})]}),e.jsx("td",{className:"hidden md:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ve(typeof Ee.supplier=="string"?Ee.supplier:Ee.supplier?.name)})}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs font-medium rounded-full",children:Ne(Ee.category)})}),e.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap text-left md:text-right",children:e.jsxs("span",{className:"text-sm font-semibold text-red-600",children:["-",Le(Ee.amount)]})}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:_===Ee.id&&H==="status"?e.jsxs("div",{className:"flex items-center space-x-2 flex-nowrap z-10",children:[e.jsxs("select",{value:V,onChange:xe=>q(xe.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-red-500 w-[120px] max-w-[120px]",children:[e.jsx("option",{value:"pending",children:zt(s,"pending")}),e.jsx("option",{value:"approved",children:zt(s,"approved")}),e.jsx("option",{value:"paid",children:zt(s,"paid")}),e.jsx("option",{value:"rejected",children:zt(s,"rejected")})]}),e.jsx("button",{onClick:()=>ut(Ee),className:"inline-flex items-center justify-center w-7 h-7 rounded-md hover:bg-green-50 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-green-500","aria-label":s("common.save"),children:e.jsx(cs,{className:"w-4 h-4 shrink-0 text-green-600"})}),e.jsx("button",{onClick:Ce,className:"inline-flex items-center justify-center w-7 h-7 rounded-md hover:bg-red-50 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-red-500","aria-label":s("common.cancel"),children:e.jsx(Nr,{className:"w-4 h-4 shrink-0 text-red-600"})})]}):e.jsx("div",{onClick:()=>!Ee.isVoided&&at(Ee.id,"status",Ee.status),className:`${Ee.isVoided?"cursor-not-allowed":"cursor-pointer hover:opacity-80"} transition-opacity inline-block`,children:Ge(Ee.status,Ee.isVoided)})}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_===Ee.id&&H==="dueDate"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"date",value:V,onChange:xe=>q(xe.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-red-500"}),e.jsx("button",{onClick:()=>ut(Ee),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Ce,className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(Nr,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vr,{className:"w-3 h-3 mr-1"}),ce(Ee.expenseDate)]})}),e.jsx("td",{className:"hidden md:table-cell px-4 md:px-6 py-4 whitespace-nowrap text-right text-sm font-medium sticky right-0 bg-white z-10 min-w-[140px] lg:min-w-[176px]",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>h(Ee),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:s("expenses.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t(Ee),disabled:Ee.isVoided,className:`inline-flex items-center justify-center w-8 h-8 rounded transition-colors ${Ee.isVoided?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:Ee.isVoided?"ptal edilmi gider dzenlenemez":s("expenses.edit"),children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{n&&n(Ee)},className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("expenses.download"),children:e.jsx(Cs,{className:"w-4 h-4"})}),Ee.isVoided?e.jsx("button",{onClick:()=>jt(Ee.id),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Gideri geri ykle",children:e.jsx(jl,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>it(Ee),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors",title:"Gideri iptal et",children:e.jsx(qc,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(Ee.id),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:s("expenses.delete"),children:e.jsx(Xr,{className:"w-4 h-4"})})]})})]},Ee.id))})]})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsx(Rs,{page:X,pageSize:$,total:ke.length,onPageChange:ae,onPageSizeChange:Ae})})]})}),W&&E&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gideri ptal Et"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[e.jsx("strong",{children:E.description})," giderini iptal etmek istediinizden emin misiniz?"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ptal Nedeni *"}),e.jsx("textarea",{value:A,onChange:Ee=>k(Ee.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",rows:3,placeholder:"ptal nedenini aklayn...",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{B(!1),P(null),k("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"ptal"}),e.jsx("button",{onClick:xt,disabled:!A.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Gideri ptal Et"})]})]})})]})}const Uu=[20,50,100],mD=a=>Uu.includes(a),hD=()=>{try{const a=Et.getItem("banks_pageSize"),o=a?Number(a):Uu[0];return mD(o)?o:Uu[0]}catch{return Uu[0]}};function fD({bankAccounts:a,onAddBank:o,onEditBank:t,onDeleteBank:f,onViewBank:h}){const{t:d}=$t(),[n,l]=G.useState(""),[i,r]=G.useState("all"),[s,c]=G.useState(1),[u,m]=G.useState(()=>hD()),x=G.useMemo(()=>a.filter(_=>{const O=_.bankName.toLowerCase().includes(n.toLowerCase())||_.accountName.toLowerCase().includes(n.toLowerCase())||_.accountNumber.includes(n),H=i==="all"||i==="active"&&_.isActive||i==="inactive"&&!_.isActive;return O&&H}),[a,n,i]),b=G.useMemo(()=>{const _=(s-1)*u;return x.slice(_,_+u)},[x,s,u]);G.useEffect(()=>{c(1)},[n,i]);const p=_=>{m(_),Et.setItem("banks_pageSize",String(_)),c(1)},v=(_,O="TRY")=>qv(_,O),y=_=>(typeof _=="number"?_:0).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}),N=_=>{const H={checking:{label:d("banks.accountTypes.checking",{defaultValue:"Vadesiz Hesap"}),class:"bg-blue-100 text-blue-800"},savings:{label:d("banks.accountTypes.savings",{defaultValue:"Vadeli Hesap"}),class:"bg-green-100 text-green-800"},business:{label:d("banks.accountTypes.business",{defaultValue:"Ticari Hesap"}),class:"bg-purple-100 text-purple-800"}}[_];return H?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H.class}`,children:H.label}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:_})},T=x.reduce((_,O)=>O.currency==="TRY"?_+O.balance:_,0);return e.jsx("div",{className:"bg-white rounded-xl border border-gray-200",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"border-b border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d("banks.title")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.length," ",d("banks.accountsRegistered"),"  ",d("banks.totalBalance"),": ",y(T)]})]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 self-start rounded-lg bg-green-600 px-4 py-2 text-white transition-colors hover:bg-green-700",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:d("banks.newAccount")})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:d("banks.search"),value:n,onChange:_=>l(_.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("select",{value:i,onChange:_=>r(_.target.value),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 md:w-56",children:[e.jsx("option",{value:"all",children:d("banks.filterAll")}),e.jsx("option",{value:"active",children:d("chartOfAccounts.active")}),e.jsx("option",{value:"inactive",children:d("chartOfAccounts.passive")})]})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:x.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ja,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:d(n||i!=="all"?"banks.noBanksFound":"banks.noBanks")}),e.jsx("p",{className:"text-gray-500 mb-4",children:d(n||i!=="all"?"banks.noBanksFoundDesc":"banks.noBanksDesc")}),!n&&i==="all"&&e.jsx("button",{onClick:o,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:d("banks.createFirstAccount")})]}):b.map(_=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ja,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("button",{onClick:()=>h(_),className:"font-semibold text-green-600 hover:text-green-800 transition-colors cursor-pointer text-left",title:d("common.view"),children:_.bankName}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center truncate",children:[e.jsx(ts,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"truncate",children:_.accountName})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 min-w-0",children:[e.jsx("span",{className:"text-sm text-gray-500 truncate",children:e.jsx("span",{className:"truncate",children:_.accountNumber})}),N(_.accountType),(()=>{const O=_?.isActive!==!1;return e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${O?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:O?d("chartOfAccounts.active",{defaultValue:"Aktif"}):d("chartOfAccounts.passive",{defaultValue:"Pasif"})})})()]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 sm:hidden",children:[e.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),h(_)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"View",title:d("common.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),t(_)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Edit",title:d("common.edit"),children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),f(_.id)},className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","aria-label":"Delete",title:d("common.delete"),children:e.jsx(Xr,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx(Bn,{className:"w-4 h-4 mr-1 text-green-600 sm:inline hidden"}),v(_.balance,_.currency)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["IBAN: ",_.iban.slice(0,8),"..."]})]}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>h(_),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:d("common.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t(_),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:d("common.edit"),children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(_.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:d("common.delete"),children:e.jsx(Xr,{className:"w-4 h-4"})})]})]})]})},_.id))}),e.jsx("div",{className:"border-t border-gray-200 bg-white p-4",children:e.jsx(Rs,{page:s,pageSize:u,total:x.length,onPageChange:c,onPageSizeChange:p})})]})})}const Xv=async a=>(await Xe.get("/quotes",{params:a})).data,AP=async a=>(await Xe.get(`/quotes/${a}`)).data,Ey=async a=>(await Xe.post("/quotes",a)).data,fl=async(a,o)=>(await Xe.patch(`/quotes/${a}`,o)).data,pD=async a=>{await Xe.delete(`/quotes/${a}`)},gD=async a=>(await Xe.get(`/public/quotes/${a}`)).data,xD=async a=>(await Xe.post(`/public/quotes/${a}/viewed`,{})).data,yD=async a=>(await Xe.post(`/public/quotes/${a}/accept`,{})).data,bD=async a=>(await Xe.post(`/public/quotes/${a}/decline`,{})).data,Ss=(a,o="")=>typeof a=="string"?a:typeof a=="number"?String(a):o,Dy=a=>{const o=Ss(a).trim();if(o)return o.slice(0,10)},vD=a=>{if(!a||typeof a!="object")return{};const o=a;return{description:Ss(o.description),quantity:o.quantity,unitPrice:o.unitPrice,total:o.total}},wD=(a,o=0)=>{const t=a??{};return{id:Ss(t.id,Ss(t.quoteNumber,`quote-${o}`)),quoteNumber:Ss(t.quoteNumber),customerId:t.customerId,customerName:Ss(t.customerName??t.customer?.name),issueDate:Dy(t.issueDate),validUntil:Dy(t.validUntil),currency:Ss(t.currency),total:t.total,amount:t.amount,status:t.status,version:typeof t.version=="number"?t.version:void 0,scopeOfWorkHtml:Ss(t.scopeOfWorkHtml),items:Array.isArray(t.items)?t.items.map(vD):[],createdAt:Ss(t.createdAt??t.created_at),updatedAt:Ss(t.updatedAt??t.updated_at)}},pu=a=>Array.isArray(a)?a.map((o,t)=>wD(o,t)):[],ND=a=>a==null?'""':`"${String(a).replace(/"/g,'""')}"`,Js=a=>Hr(a),Dm=a=>a?a.total!=null?Js(a.total):Js(a.quantity)*Js(a.unitPrice):0,ko=a=>{if(!a)return new Date("1970-01-01");const o=String(a).trim();if(/^\d{4}-\d{2}-\d{2}/.test(o))return new Date(o);if(/^\d{2}\.\d{2}\.\d{4}$/.test(o)){const[t,f,h]=o.split(".");return new Date(`${h}-${f}-${t}`)}return new Date(o)},Jv=a=>String(a??"").toLowerCase(),fo=a=>{const o=Jv(a);return o.includes("paid")||o.includes("den")||o.includes("odendi")||o.includes("dendi")},Sc=a=>{const o=Kr(String(a??""));return o==="paid"||o==="approved"},Cc=a=>{const o=Jv(a);return o.includes("completed")||o.includes("tamam")},Vf=a=>{if(!a)return 0;const o=Js(a.total??a.amount);return o>0?o:Array.isArray(a.items)?a.items.reduce((t,f)=>t+Dm(f),0):0},_y=a=>Js(a?.amount),gu=a=>{if(!a)return 0;if(Array.isArray(a.items)&&a.items.length)return a.items.reduce((f,h)=>f+Dm(h),0);if(a.total!=null)return Js(a.total);if(a.amount!=null)return Js(a.amount);const o=Js(a.quantity),t=Js(a.unitPrice);return o>0&&t>0?o*t:0},qf=a=>{if(!a)return 0;const o=Js(a?.taxAmount);if(o>0)return o;const t=Js(a?.subtotal),f=Js(a?.total??a?.amount);if(f>0&&t>=0&&f>=t){const h=f-t;if(h>0)return h}if(Array.isArray(a?.items)){const h=a.items.reduce((d,n)=>{const l=Js(n?.taxRate);return l<=0?d:d+Dm(n)*(l/100)},0);if(h>0)return h}return 0},Ac=(a,o)=>{if(!a)return!1;const t=String(a.id??"");if(!t)return!1;if(a.invoiceId||o.some(d=>String(d?.saleId??"")===t))return!0;const h=a.saleNumber||`SAL-${t}`;return o.some(d=>typeof d?.notes=="string"&&d.notes.includes(h))},xu=a=>ko(a?.issueDate??a?.date),kD=a=>ko(a?.expenseDate??a?.date),Py=a=>ko(a?.date??a?.saleDate),Iy=a=>{if(!a||typeof a!="object")return"";const o=a,t=o.customer,f=[Ss(o.customerName),Ss(o.companyName),Ss(o.customerCompany),Ss(o.customerCompanyName),Ss(o.clientName),Ss(o.contactName),Ss(o.name)];t&&typeof t=="object"&&f.unshift(Ss(t.name),Ss(t.fullName),Ss(t.companyName),Ss(t.company));for(const h of f){const d=h.trim();if(d)return d}return""},$f="quotes-cache-updated",Hf=a=>ko(a?.issueDate),Kf=a=>Js(a?.total??a?.amount),jD=a=>{const o=Kr(String(a??""));return o==="draft"||o==="sent"||o==="viewed"};function SD({invoices:a=[],expenses:o=[],sales:t=[],customers:f=[],quotes:h=[]}){const{t:d,i18n:n}=$t("common"),{formatCurrency:l}=Jr(),i=new Date,r=(...Z)=>{},s=G.useMemo(()=>a.filter(Z=>fo(Z.status)),[a]),c=G.useMemo(()=>pu(h),[h]),[u,m]=G.useState(c);G.useEffect(()=>{m(c)},[c]),G.useEffect(()=>{if(typeof window>"u")return;const Z=De=>{if(!(!De.key||!De.key.includes("quotes_cache")))try{const Ae=De.newValue?JSON.parse(De.newValue):[],Ie=pu(Ae);Ie.length&&m(Ie)}catch(Ae){he.debug("Failed to parse quotes_cache storage event",Ae)}},ce=()=>{try{const De=Vb().filter(Ae=>Ae.includes("quotes_cache"));for(const Ae of De){const Ie=Et.getItem(Ae),Ue=Ie?JSON.parse(Ie):[],Ge=pu(Ue);if(Ge.length){m(Ge);break}}}catch(De){he.debug("Unable to refresh quotes from localStorage",De)}},ve=()=>{document.visibilityState==="visible"&&ce()};return window.addEventListener("storage",Z),window.addEventListener($f,ce),document.addEventListener("visibilitychange",ve),()=>{window.removeEventListener("storage",Z),window.removeEventListener($f,ce),document.removeEventListener("visibilitychange",ve)}},[]),G.useEffect(()=>{if(typeof window>"u")return;let Z=!1;return(async()=>{if(!(u.length>0))try{const ve=await Xv();if(Z)return;const De=pu(ve);if(!De.length)return;m(De);try{const Ae=en()||"",Ie=Ae?`quotes_cache_${Ae}`:"quotes_cache";Et.setItem(Ie,JSON.stringify(De)),window.dispatchEvent(new Event($f))}catch(Ae){he.debug("Unable to cache quotes locally",Ae)}}catch(ve){he.error("Reports quotes preload failed:",ve)}})(),()=>{Z=!0}},[u.length]);const[x,b]=G.useState(new Set),p=Z=>{const ce=new Set(x);ce.has(Z)?ce.delete(Z):ce.add(Z),b(ce)},v=G.useMemo(()=>{const Z=new Date;r("Generating last 6 months starting from",Z.toISOString());const ce=[d("months.short.jan"),d("months.short.feb"),d("months.short.mar"),d("months.short.apr"),d("months.short.may"),d("months.short.jun"),d("months.short.jul"),d("months.short.aug"),d("months.short.sep"),d("months.short.oct"),d("months.short.nov"),d("months.short.dec")],ve=[];for(let De=0;De<6;De+=1){const Ae=new Date(Z.getFullYear(),Z.getMonth()-De,1),Ie=Ae.getMonth(),Ue=Ae.getFullYear(),Ge=a.filter(Ee=>{if(!fo(Ee.status))return!1;const xe=xu(Ee);return xe.getMonth()===Ie&&xe.getFullYear()===Ue}),Le=o.filter(Ee=>{if(!Sc(Ee.status))return!1;const xe=kD(Ee);return xe.getMonth()===Ie&&xe.getFullYear()===Ue}),at=t.filter(Ee=>{if(!Cc(Ee.status)||Ac(Ee,a))return!1;const xe=Py(Ee);return xe.getMonth()===Ie&&xe.getFullYear()===Ue}),ut=Ge.reduce((Ee,xe)=>Ee+Vf(xe),0),Ce=Ge.reduce((Ee,xe)=>Ee+qf(xe),0),it=at.reduce((Ee,xe)=>Ee+gu(xe),0),xt=ut+it,jt=Le.reduce((Ee,xe)=>Ee+_y(xe),0);ve.push({month:ce[Ie],monthIndex:Ie,year:Ue,income:xt,expense:jt,vat:Ce})}return ve},[o,a,t,d]),y=s.reduce((Z,ce)=>Z+Vf(ce),0),N=t.filter(Z=>Cc(Z.status)?!Ac(Z,a):!1).reduce((Z,ce)=>Z+gu(ce),0),T=y+N,_=o.filter(Z=>Sc(Z.status)).reduce((Z,ce)=>Z+_y(ce),0),O=T-_,H=T>0?O/T*100:0,F=v.map(Z=>({month:Z.month,income:Z.income,expense:Z.expense,net:Z.income-Z.expense})),V=G.useMemo(()=>v.map(Z=>({label:`${Z.month} ${Z.year}`,amount:Z.vat??0})),[v]),q=Math.max(...V.map(Z=>Z.amount),1),W=V[0]?.amount??0,B=V[1]?.amount??0,E=s.reduce((Z,ce)=>xu(ce).getFullYear()===i.getFullYear()?Z+qf(ce):Z,0),P=s.reduce((Z,ce)=>xu(ce).getFullYear()===i.getFullYear()-1?Z+qf(ce):Z,0),A=V.length?V.reduce((Z,ce)=>Z+ce.amount,0)/V.length:0,k=B>0?(W-B)/B*100:W?100:0,j=P>0?(E-P)/P*100:E?100:0,S=G.useMemo(()=>{const Z=new Map;return a.filter(ce=>fo(ce.status)).forEach(ce=>{(ce.items??[]).forEach(ve=>{const De=ve.description||"",Ae=Z.get(De)??{name:De,total:0,count:0};Ae.total+=Dm(ve),Ae.count+=1,Z.set(De,Ae)})}),t.forEach(ce=>{if(!Cc(ce.status)||Ac(ce,a))return;const ve=ce.productName||"",De=Z.get(ve)??{name:ve,total:0,count:0};De.total+=gu(ce),De.count+=1,Z.set(ve,De)}),Array.from(Z.values()).sort((ce,ve)=>ve.total-ce.total).slice(0,8)},[a,t]),C=G.useMemo(()=>{const Z=new Map;return o.filter(ce=>Sc(ce.status)).forEach(ce=>{const ve=Z.get(ce.category)||{category:ce.category,total:0,count:0};ve.total+=Js(ce.amount),ve.count+=1,Z.set(ce.category,ve)}),Array.from(Z.values()).sort((ce,ve)=>ve.total-ce.total)},[o]),D=G.useMemo(()=>{const Z=new Map,ce="__unknown__",ve=Ae=>{const Ie=Ae.trim();return Ie?Ie.toLowerCase():ce},De=(Ae,Ie,Ue)=>{const Ge=ve(Ae),Le=Z.get(Ge),ut=Ae.trim()||Le?.name||Ae,Ce=(Le?.total??0)+Ie,it=(Le?.count??0)+1,xt=Le?.lastPurchase,jt=!xt||new Date(Ue)>new Date(xt);Z.set(Ge,{name:ut,total:Ce,count:it,lastPurchase:jt?Ue:xt})};return a.filter(Ae=>fo(Ae.status)).forEach(Ae=>{const Ie=Iy(Ae),Ue=xu(Ae).toISOString();De(Ie,Vf(Ae),Ue)}),t.filter(Ae=>Cc(Ae.status)).forEach(Ae=>{if(!Ac(Ae,a)){const Ie=Iy(Ae),Ue=Py(Ae).toISOString();De(Ie,gu(Ae),Ue)}}),Array.from(Z.values()).sort((Ae,Ie)=>Ie.total-Ae.total).slice(0,8)},[a,t]),R=G.useCallback(Z=>l(Js(Z)),[l]),L=G.useCallback(Z=>`${Z>=0?"+":""}${Z.toFixed(1)}%`,[]),Y=G.useCallback(Z=>{if(!Z)return"";const ce=new Date(Z);return Number.isNaN(ce.getTime())?"":ce.toLocaleDateString(n.language,{day:"2-digit",month:"short",year:"numeric"})},[n.language]),X=G.useCallback(Z=>{const ce=(Z||"").trim();return ce||d("common:noSupplier",{defaultValue:"No Supplier"})},[d]),ae=G.useCallback(Z=>Z?d(`expenseCategories.${Z}`,{defaultValue:Z})||Z:d("expenses.category",{defaultValue:"Category"}),[d]),$=G.useCallback(()=>{if(typeof window>"u")return;const Z=o.filter(ce=>fo(ce.status));if(!Z.length){he.info("[ReportsPage] Expense export skipped: no paid expenses");return}try{const ce=[d("expenses.expenseNumber",{defaultValue:"Expense Number"}),d("common.description",{defaultValue:"Description"}),d("expenses.supplier",{defaultValue:"Supplier"}),d("expenses.category",{defaultValue:"Category"}),d("common.statusLabel",{defaultValue:"Status"}),d("expenses.expenseDate",{defaultValue:"Expense Date"}),d("expenses.amount",{defaultValue:"Amount"})],ve=Z.map((Ge,Le)=>{const at=zt(d,Kr(Ge.status));return[Ge.id||Ge.expenseDate||`expense-${Le}`,Ge.description||"",X(Ge.supplier),ae(Ge.category),at,Y(Ge.expenseDate??Ge.date),R(Ge.amount)]}),De=[ce,...ve].map(Ge=>Ge.map(ND).join(",")).join(`\r
`),Ae=new Blob(["\uFEFF"+De],{type:"text/csv;charset=utf-8;"}),Ie=URL.createObjectURL(Ae),Ue=document.createElement("a");Ue.href=Ie,Ue.download=`reports_expenses_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue),URL.revokeObjectURL(Ie),he.info("[ReportsPage] Expense export completed",{rowCount:Z.length})}catch(ce){he.error("[ReportsPage] Expense export failed",ce)}},[o,R,Y,ae,X,d]),Q=F[F.length-1],z=F[F.length-2],M=z?.income>0?(Q.income-z.income)/z.income*100:0,U=a.filter(Z=>fo(Z.status)).length,te=t.filter(Z=>Cc(Z.status)?!Ac(Z,a):!1).length,ie=U+te,se=ie>0?T/ie:0,le=[{title:d("reports.growthRate"),value:`${M>=0?"+":""}${M.toFixed(1)}%`,change:M>=0?"increase":"decrease",color:"blue",icon:fs},{title:d("reports.profitMargin"),value:`${H.toFixed(1)}%`,change:H>=20?"increase":"decrease",color:"green",icon:_u},{title:d("reports.averageSale"),value:R(se),change:"increase",color:"purple",icon:Bn},{title:d("reports.activeCustomers"),value:D.length.toString(),change:"increase",color:"orange",icon:Ls}],Ne=F,ke=Math.max(...Ne.flatMap(Z=>[Z.income,Z.expense]),1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Cm,{className:"w-8 h-8 text-blue-600 mr-3"}),d("reports.title")]}),e.jsx("p",{className:"text-gray-600",children:d("reports.subtitle")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:d("reports.reportDate")}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:i.toLocaleDateString("tr-TR")})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p("overview"),children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(em,{className:"w-6 h-6 text-blue-600 mr-3"}),d("reports.overview")]}),x.has("overview")?e.jsx(bs,{className:"w-5 h-5 text-gray-400"}):e.jsx(qs,{className:"w-5 h-5 text-gray-400"})]})}),!x.has("overview")&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"cursor-pointer",onClick:()=>p("basic-metrics"),children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d("reports.basicMetrics")}),x.has("basic-metrics")?e.jsx(bs,{className:"w-4 h-4 text-gray-400"}):e.jsx(qs,{className:"w-4 h-4 text-gray-400"})]}),!x.has("basic-metrics")&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fs,{className:"w-8 h-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:d("reports.totalIncome")}),e.jsx("p",{className:"text-xl font-bold text-green-700",children:R(T)})]})]})}),e.jsx("div",{className:"bg-red-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(hp,{className:"w-8 h-8 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-600",children:d("reports.totalExpense")}),e.jsx("p",{className:"text-xl font-bold text-red-700",children:R(_)})]})]})}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Bn,{className:"w-8 h-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600",children:d("reports.netProfit")}),e.jsx("p",{className:`text-xl font-bold ${O>=0?"text-blue-700":"text-red-700"}`,children:R(O)})]})]})}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ls,{className:"w-8 h-8 text-purple-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600",children:d("reports.totalCustomers")}),e.jsx("p",{className:"text-xl font-bold text-purple-700",children:f.length})]})]})})]})]}),e.jsxs("div",{className:"cursor-pointer",onClick:()=>p("monthly-chart"),children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d("reports.last6MonthsPerformance")}),x.has("monthly-chart")?e.jsx(bs,{className:"w-4 h-4 text-gray-400"}):e.jsx(qs,{className:"w-4 h-4 text-gray-400"})]}),!x.has("monthly-chart")&&e.jsx("div",{className:"space-y-4",children:Ne.map((Z,ce)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:Z.month}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d("reports.net"),": ",R(Z.net)]})]}),e.jsxs("div",{className:"relative h-8 bg-gray-100 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 h-4 bg-blue-500 rounded-sm",style:{width:`${ke>0?Z.income/ke*100:0}%`}}),e.jsx("div",{className:"absolute bottom-0 left-0 h-4 bg-red-500 rounded-sm",style:{width:`${ke>0?Z.expense/ke*100:0}%`}})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[d("common.income"),": ",R(Z.income)]}),e.jsxs("span",{children:[d("common.expense"),": ",R(Z.expense)]})]})]},ce))})]}),e.jsxs("div",{className:"cursor-pointer",onClick:()=>p("financial-health"),children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d("reports.financialHealth")}),x.has("financial-health")?e.jsx(bs,{className:"w-4 h-4 text-gray-400"}):e.jsx(qs,{className:"w-4 h-4 text-gray-400"})]}),!x.has("financial-health")&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:d("reports.profitMargin")}),e.jsxs("p",{className:"text-2xl font-bold",children:[H.toFixed(1),"%"]})]}),e.jsx(_u,{className:"w-8 h-8 text-green-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:d("reports.growthRate")}),e.jsxs("p",{className:"text-2xl font-bold",children:[`${M>=0?"+":""}${M.toFixed(1)}`,"%"]})]}),e.jsx(fs,{className:"w-8 h-8 text-blue-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:d("reports.averageSale")}),e.jsx("p",{className:"text-2xl font-bold",children:R(se)})]}),e.jsx(Bn,{className:"w-8 h-8 text-purple-200"})]})})]})]}),e.jsxs("div",{className:"cursor-pointer",onClick:()=>p("payment-status"),children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d("reports.paymentStatusAnalysis")}),x.has("payment-status")?e.jsx(bs,{className:"w-4 h-4 text-gray-400"}):e.jsx(qs,{className:"w-4 h-4 text-gray-400"})]}),!x.has("payment-status")&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:d("reports.invoiceStatuses")}),e.jsx("div",{className:"space-y-2",children:["paid","sent","draft","overdue"].map(Z=>{const ce=new Date;ce.setHours(0,0,0,0);const ve=Z==="overdue"?a.filter(Ae=>{if(!Ae.dueDate)return!1;const Ie=ko(Ae.dueDate);return Ie.setHours(0,0,0,0),Ie.getTime()<ce.getTime()&&!fo(Ae.status)}).length:a.filter(Ae=>Kr(String(Ae.status??""))===Z).length,De={paid:"bg-green-100 text-green-800",sent:"bg-blue-100 text-blue-800",draft:"bg-gray-100 text-gray-800",overdue:"bg-red-100 text-red-800"};return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${De[Z]}`,children:zt(d,Z)}),e.jsx("span",{className:"font-medium",children:ve})]},Z)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:d("reports.expenseStatuses")}),e.jsx("div",{className:"space-y-2",children:["paid","approved","draft"].map(Z=>{const ce=o.filter(De=>Kr(String(De.status??""))===Z).length,ve={paid:"bg-green-100 text-green-800",approved:"bg-blue-100 text-blue-800",draft:"bg-gray-100 text-gray-800"};return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ve[Z]}`,children:zt(d,Z)}),e.jsx("span",{className:"font-medium",children:ce})]},Z)})})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p("vat"),children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(un,{className:"w-6 h-6 text-orange-600 mr-3"}),d("reports.vatAnalysis")]}),e.jsx("p",{className:"text-gray-600",children:d("reports.vatAnalysisSubtitle")})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:d("reports.currentYearLabel",{year:i.getFullYear()})}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:R(E)})]}),x.has("vat")?e.jsx(bs,{className:"w-5 h-5 text-gray-400"}):e.jsx(qs,{className:"w-5 h-5 text-gray-400"})]})]})}),!x.has("vat")&&e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[e.jsx("p",{className:"text-sm text-amber-700",children:d("reports.vatYearToDate")}),e.jsx("p",{className:"text-2xl font-bold text-amber-900",children:R(E)}),e.jsx("p",{className:"text-xs text-amber-700 mt-1",children:d("reports.vatChangeVsLastYear",{percent:L(j),lastYear:R(P)})})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[e.jsx("p",{className:"text-sm text-orange-700",children:d("reports.vatThisMonth")}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:R(W)}),e.jsx("p",{className:"text-xs text-orange-700 mt-1",children:d("reports.vatChangeVsPreviousMonth",{percent:L(k),previous:R(B)})})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-700",children:d("reports.vatAverageSixMonths")}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:R(A)}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:d("reports.vatAverageHint")})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d("reports.vatMonthlyBreakdown")}),e.jsx("span",{className:"text-sm text-gray-500",children:d("reports.lastMonthsPerformance",{count:V.length})})]}),V.length?e.jsx("div",{className:"space-y-3",children:V.map(Z=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900",children:Z.label}),e.jsx("span",{className:"font-semibold text-gray-900",children:R(Z.amount)})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-2 bg-orange-500 rounded-full",style:{width:`${q>0?Z.amount/q*100:0}%`}})})]},Z.label))}):e.jsx("p",{className:"text-sm text-gray-500",children:d("reports.noVatData")})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p("revenue"),children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(fs,{className:"w-6 h-6 text-green-600 mr-3"}),d("reports.revenueAnalysis")]}),x.has("revenue")?e.jsx(bs,{className:"w-5 h-5 text-gray-400"}):e.jsx(qs,{className:"w-5 h-5 text-gray-400"})]})}),!x.has("revenue")&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.productBasedSales")}),e.jsx("div",{className:"space-y-3",children:S.map((Z,ce)=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:Z.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[Z.count," ",d("reports.sales")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-green-600",children:R(Z.total)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d("reports.avg"),": ",R(Z.total/Z.count)]})]})]},ce))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.monthlyRevenueTrend")}),e.jsx("div",{className:"space-y-3",children:Ne.map((Z,ce)=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 w-12",children:Z.month}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-300",style:{width:`${ke>0?Z.income/ke*100:0}%`}})})}),e.jsx("span",{className:"text-sm font-semibold text-green-600 w-24 text-right",children:R(Z.income)})]},ce))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p("expenses"),children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(un,{className:"w-6 h-6 text-red-600 mr-3"}),d("reports.expenseAnalysis")]}),x.has("expenses")?e.jsx(bs,{className:"w-5 h-5 text-gray-400"}):e.jsx(qs,{className:"w-5 h-5 text-gray-400"})]})}),!x.has("expenses")&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("p",{className:"text-sm text-gray-500",children:d("reports.expenseExportHint",{defaultValue:"Includes paid expenses only."})}),e.jsxs("button",{type:"button",onClick:$,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(kl,{className:"w-4 h-4"}),e.jsx("span",{children:d("reports.exportExpensesCsv",{defaultValue:"Export CSV"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.categoryBasedExpenses")}),e.jsx("div",{className:"space-y-3",children:C.map((Z,ce)=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:Z.category}),e.jsxs("div",{className:"text-sm text-gray-500",children:[Z.count," ",d("reports.expenses")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-red-600",children:R(Z.total)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d("reports.avg"),": ",R(Z.total/Z.count)]})]})]},ce))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.monthlyExpenseTrend")}),e.jsx("div",{className:"space-y-3",children:Ne.map((Z,ce)=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 w-12",children:Z.month}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-400 to-red-600 rounded-full transition-all duration-300",style:{width:`${ke>0?Z.expense/ke*100:0}%`}})})}),e.jsx("span",{className:"text-sm font-semibold text-red-600 w-24 text-right",children:R(Z.expense)})]},ce))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.topSuppliers")}),e.jsx("div",{className:"space-y-3",children:(()=>{const Z=new Map;return o.filter(ce=>Sc(ce.status)).forEach(ce=>{const ve=Z.get(ce.supplier)||{name:ce.supplier,total:0,count:0,lastExpense:ce.expenseDate};ve.total+=Js(ce.amount),ve.count+=1,new Date(ce.expenseDate)>new Date(ve.lastExpense)&&(ve.lastExpense=ce.expenseDate),Z.set(ce.supplier,ve)}),Array.from(Z.values()).sort((ce,ve)=>ve.total-ce.total).slice(0,5)})().map((Z,ce)=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-red-600 font-semibold text-sm",children:Z.name?.charAt(0)?.toUpperCase()||"?"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:Z.name||d("reports.noSupplier")}),e.jsxs("div",{className:"text-sm text-gray-500",children:[Z.count," ",d("reports.expenses"),"  ",d("reports.last"),": ",Y(Z.lastExpense)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-red-600",children:R(Z.total)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d("reports.avg"),": ",R(Z.total/Z.count)]})]})]},ce))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.recentExpenses")}),e.jsx("div",{className:"space-y-2",children:o.filter(Z=>Sc(Z.status)).sort((Z,ce)=>new Date(ce.expenseDate).getTime()-new Date(Z.expenseDate).getTime()).slice(0,5).map((Z,ce)=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-2 hover:bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Z.supplier,"  ",Y(Z.expenseDate)]})]}),e.jsx("div",{className:"text-sm font-semibold text-red-600",children:R(Z.amount)})]},ce))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.expenseCategoryDistribution")}),e.jsx("div",{className:"space-y-3",children:C.slice(0,6).map((Z,ce)=>{const ve=_>0?Z.total/_*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:Z.category}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ve.toFixed(1),"%  ",R(Z.total)]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-400 to-red-600 rounded-full transition-all duration-300",style:{width:`${ve}%`}})})]},ce)})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p("quotes"),children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Fr,{className:"w-6 h-6 text-indigo-600 mr-3"}),d("reports.quoteAnalysis")]}),x.has("quotes")?e.jsx(bs,{className:"w-5 h-5 text-gray-400"}):e.jsx(qs,{className:"w-5 h-5 text-gray-400"})]})}),!x.has("quotes")&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:(()=>{const Z=u.length,ce=u.filter(Ie=>Kr(Ie?.status)==="accepted").length,ve=(()=>{const Ie=new Date;Ie.setHours(0,0,0,0);const Ue=new Date(Ie);return Ue.setDate(Ue.getDate()+7),u.filter(Ge=>{const Le=Kr(Ge?.status);if(Le==="accepted"||Le==="declined"||Le==="expired"||!Ge?.validUntil)return!1;const at=ko(Ge.validUntil);return at.setHours(0,0,0,0),at.getTime()>=Ie.getTime()&&at.getTime()<=Ue.getTime()}).length})(),De=Z>0?u.reduce((Ie,Ue)=>Ie+Kf(Ue),0)/Z:0;return[{label:d("reports.totalQuotes"),value:String(Z),color:"indigo"},{label:d("reports.acceptedRate"),value:Z>0?`${(ce/Z*100).toFixed(1)}%`:"0%",color:"green"},{label:d("reports.averageQuote"),value:R(De),color:"purple"},{label:d("reports.expiringSoon"),value:String(ve),color:"orange"}].map((Ie,Ue)=>e.jsxs("div",{className:`bg-${Ie.color}-50 rounded-lg p-4 border border-${Ie.color}-200`,children:[e.jsx("div",{className:`text-sm text-${Ie.color}-600`,children:Ie.label}),e.jsx("div",{className:`text-2xl font-bold text-${Ie.color}-700`,children:Ie.value})]},Ue))})()}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.quoteStatuses")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx("div",{className:"space-y-2",children:["accepted","declined","expired","viewed","sent","draft"].map(Z=>{const ce=u.filter(De=>Kr(String(De.status??""))===Z).length,ve={accepted:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800",viewed:"bg-blue-100 text-blue-800",sent:"bg-indigo-100 text-indigo-800",draft:"bg-yellow-100 text-yellow-800"};return e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ve[Z]}`,children:zt(d,Z)}),e.jsx("span",{className:"font-medium",children:ce})]},Z)})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:d("reports.expiringSoon")}),e.jsx("div",{className:"space-y-2",children:(()=>{const Z=new Date;Z.setHours(0,0,0,0);const ce=new Date(Z);return ce.setDate(ce.getDate()+14),u.filter(De=>jD(De?.status)&&De?.validUntil).map(De=>({q:De,dt:(()=>{const Ae=ko(De.validUntil);return Ae.setHours(0,0,0,0),Ae})()})).filter(De=>De.dt.getTime()>=Z.getTime()&&De.dt.getTime()<=ce.getTime()).sort((De,Ae)=>De.dt.getTime()-Ae.dt.getTime()).slice(0,5).map(({q:De,dt:Ae},Ie)=>{const Ue=Math.ceil((Ae.getTime()-Z.getTime())/864e5);return e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:De.quoteNumber||""}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d("reports.daysLeft"),": ",Ue,"  ",R(Kf(De))]})]},Ie)})})()})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.recentQuotes")}),e.jsx("div",{className:"space-y-2",children:u.slice().sort((Z,ce)=>Hf(ce).getTime()-Hf(Z).getTime()).slice(0,5).map((Z,ce)=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-2 hover:bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.quoteNumber||""}),e.jsxs("div",{className:"text-xs text-gray-500",children:[zt(d,Kr(Z.status)),"  ",Hf(Z).toLocaleDateString("tr-TR")]})]}),e.jsx("div",{className:"text-sm font-semibold text-indigo-600",children:R(Kf(Z))})]},ce))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p("customers"),children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(Ls,{className:"w-6 h-6 text-purple-600 mr-3"}),d("reports.customerAnalysis")]}),x.has("customers")?e.jsx(bs,{className:"w-5 h-5 text-gray-400"}):e.jsx(qs,{className:"w-5 h-5 text-gray-400"})]})}),!x.has("customers")&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.topCustomers")}),e.jsx("div",{className:"space-y-3",children:D.map((Z,ce)=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:Z.name?.charAt(0)?.toUpperCase()||"?"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:Z.name||d("reports.noCustomer")}),e.jsxs("div",{className:"text-sm text-gray-500",children:[Z.count," ",d("reports.purchases"),"  ",d("reports.last"),": ",Y(Z.lastPurchase)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-purple-600",children:R(Z.total)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d("reports.avg"),": ",R(Z.total/Z.count)]})]})]},ce))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.customerStatistics")}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f.length}),e.jsx("div",{className:"text-sm text-purple-600",children:d("reports.totalCustomers")})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:D.length}),e.jsx("div",{className:"text-sm text-green-600",children:d("reports.activeCustomersCount")})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R(D.length>0?T/D.length:0)}),e.jsx("div",{className:"text-sm text-blue-600",children:d("reports.revenuePerCustomer")})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:D.length>0?(ie/D.length).toFixed(1):"0"}),e.jsx("div",{className:"text-sm text-orange-600",children:d("reports.salesPerCustomer")})]}),e.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:D.length>0?Math.round(ie/D.length):0}),e.jsx("div",{className:"text-sm text-indigo-600",children:d("reports.averagePurchases")})]}),e.jsxs("div",{className:"bg-pink-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-pink-600",children:D.length>0?Math.max(...D.map(Z=>Z.count)):0}),e.jsx("div",{className:"text-sm text-pink-600",children:d("reports.maxPurchases")})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p("performance"),children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(_u,{className:"w-6 h-6 text-orange-600 mr-3"}),d("reports.performanceReports")]}),x.has("performance")?e.jsx(bs,{className:"w-5 h-5 text-gray-400"}):e.jsx(qs,{className:"w-5 h-5 text-gray-400"})]})}),!x.has("performance")&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.kpiDashboard")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:le.map((Z,ce)=>e.jsxs("div",{className:`bg-${Z.color}-50 rounded-lg p-4 border border-${Z.color}-200`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-${Z.color}-600 text-sm font-medium`,children:Z.title}),e.jsx("p",{className:`text-2xl font-bold text-${Z.color}-700`,children:Z.value})]}),e.jsx(Z.icon,{className:`w-8 h-8 text-${Z.color}-600`})]}),e.jsxs("div",{className:"mt-2 flex items-center",children:[Z.change==="increase"?e.jsx(fs,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(hp,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsx("span",{className:`text-xs ${Z.change==="increase"?"text-green-600":"text-red-600"}`,children:Z.change==="increase"?d("reports.increase"):d("reports.decrease")})]})]},ce))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.monthlyPerformanceTable")}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:d("reports.totalIncome6Months")}),e.jsx("div",{className:"text-lg font-bold text-green-700",children:R(Ne.reduce((Z,ce)=>Z+ce.income,0))})]}),e.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-red-600 mb-1",children:d("reports.totalExpense6Months")}),e.jsx("div",{className:"text-lg font-bold text-red-700",children:R(Ne.reduce((Z,ce)=>Z+ce.expense,0))})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:d("reports.netProfit6Months")}),e.jsx("div",{className:`text-lg font-bold ${Ne.reduce((Z,ce)=>Z+ce.net,0)>=0?"text-blue-700":"text-red-700"}`,children:R(Ne.reduce((Z,ce)=>Z+ce.net,0))})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:d("reports.month")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:d("common.income")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:d("common.expense")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:d("reports.profit")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:d("reports.profitMarginPercent")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:d("reports.expenseRatio")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Ne.map((Z,ce)=>{const ve=Z.income>0?Z.net/Z.income*100:0,De=Z.income>0?Z.expense/Z.income*100:0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:Z.month}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-green-600 font-medium",children:R(Z.income)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-red-600 font-medium",children:R(Z.expense)}),e.jsx("td",{className:`px-4 py-3 text-sm text-right font-medium ${Z.net>=0?"text-green-600":"text-red-600"}`,children:R(Z.net)}),e.jsxs("td",{className:`px-4 py-3 text-sm text-right font-medium ${ve>=0?"text-green-600":"text-red-600"}`,children:[ve.toFixed(1),"%"]}),e.jsxs("td",{className:`px-4 py-3 text-sm text-right font-medium ${De<=70?"text-green-600":De<=85?"text-yellow-600":"text-red-600"}`,children:[De.toFixed(1),"%"]})]},ce)})})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d("reports.expenseEfficiency")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:d("reports.expenseCategoryPerformance")}),e.jsx("div",{className:"space-y-2",children:C.slice(0,5).map((Z,ce)=>{const ve=_>0?Z.total/_*100:0;return e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:Z.category}),e.jsxs("span",{className:"text-xs text-gray-500",children:[ve.toFixed(1),"%  ",R(Z.total)]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-400 to-red-600 rounded-full transition-all duration-300",style:{width:`${ve}%`}})})]},ce)})})]})})]})]})]})]})})}function CD(){const{t:a,i18n:o}=$t(),f=["chartOfAccounts.title","chartOfAccounts.subtitle","chartOfAccounts.accountNames.101","chartOfAccounts.accountNames.201","chartOfAccounts.accountNames.600","chartOfAccounts.accountNames.601","chartOfAccounts.accountNames.602","chartOfAccounts.accountTypes.asset","chartOfAccounts.accountTypesPlural.expense","status.paid","status.draft","status.sent","status.overdue","status.pending","status.cancelled","status.completed","status.approved","status.rejected"].map(l=>({key:l,direct:a(l),commonPrefixed:a(`common:${l}`)})),h=o.services?.resourceStore?.data?.[o.language],d=!!h?.common,n=!!h?.status;return e.jsxs("div",{style:{padding:16,fontFamily:"monospace"},children:[e.jsxs("h2",{children:[" Translation Debug (",o.language,")"]}),e.jsxs("p",{children:["Common ykl: ",String(d)," | Status ns ykl: ",String(n)]}),e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",marginTop:12},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{border:"1px solid #ccc",padding:4},children:"Key"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:4},children:"t(key)"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:4},children:"t(common:key)"})]})}),e.jsx("tbody",{children:f.map(l=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #ccc",padding:4},children:l.key}),e.jsx("td",{style:{border:"1px solid #ccc",padding:4},children:l.direct}),e.jsx("td",{style:{border:"1px solid #ccc",padding:4},children:l.commonPrefixed})]},l.key))})]}),e.jsxs("details",{style:{marginTop:16},children:[e.jsx("summary",{children:"Ham resourceStore (ksaltlm)"}),e.jsx("pre",{style:{maxHeight:300,overflow:"auto",fontSize:11},children:JSON.stringify({language:o.language,commonKeysSample:Object.keys(h?.common||{}).slice(0,50),statusKeys:Object.keys(h?.status||{})},null,2)})]})]})}const My=[{value:"this-month",labelKey:"chartOfAccounts.dateFilters.thisMonth",defaultLabel:"Bu Ay"},{value:"this-quarter",labelKey:"chartOfAccounts.dateFilters.thisQuarter",defaultLabel:"Bu eyrek"},{value:"this-year",labelKey:"chartOfAccounts.dateFilters.thisYear",defaultLabel:"Bu Yl"},{value:"last-year",labelKey:"chartOfAccounts.dateFilters.lastYear",defaultLabel:"Geen Yl"},{value:"all",labelKey:"chartOfAccounts.dateFilters.all",defaultLabel:"Tm"},{value:"custom",labelKey:"chartOfAccounts.dateFilters.custom",defaultLabel:"zel Tarih"}],Tc=a=>{const o=new Date(a);return o.setHours(0,0,0,0),o},Ec=a=>{const o=new Date(a);return o.setHours(23,59,59,999),o},mg=a=>{if(!a)return new Date("1970-01-01");const o=String(a).trim();if(!o)return new Date("1970-01-01");if(/^\d{4}-\d{2}-\d{2}/.test(o))return new Date(o);if(/^\d{2}\.\d{2}\.\d{4}$/.test(o)){const[t,f,h]=o.split(".");return new Date(`${h}-${f}-${t}`)}return new Date(o)},AD=a=>mg(a?.issueDate??a?.date),TD=a=>mg(a?.expenseDate??a?.date),ED=a=>mg(a?.date??a?.saleDate),Ry=a=>{if(!a)return;const o=new Date(a);if(!Number.isNaN(o.getTime()))return o},Gf=(a,o,t)=>{if(!a||Number.isNaN(a.getTime()))return!0;const f=a.getTime();return!(typeof o=="number"&&f<o||typeof t=="number"&&f>t)};function DD({accounts:a=[],onAccountsUpdate:o,invoices:t=[],expenses:f=[],sales:h=[],customers:d=[]}){const{formatCurrency:n,getCurrencySymbol:l}=Jr(),{t:i}=$t("common"),[r,s]=G.useState(""),[c,u]=G.useState("all"),[m,x]=G.useState(new Set),[b,p]=G.useState(null),[v,y]=G.useState(null),[N,T]=G.useState({}),[_,O]=G.useState(!1),[H,F]=G.useState(null),[V,q]=G.useState("this-year"),[W,B]=G.useState(""),[E,P]=G.useState(""),A=G.useMemo(()=>{if(V==="custom")return W||E?`${W||""}  ${E||""}`:i("chartOfAccounts.dateFilters.custom",{defaultValue:"zel Tarih"});const ye=My.find(oe=>oe.value===V);return ye?i(ye.labelKey,{defaultValue:ye.defaultLabel}):i("chartOfAccounts.dateFilters.all",{defaultValue:"Tm"})},[E,W,V,i]),k=[{label:"Dier",value:"other"},{label:"Ekipman",value:"equipment"},{label:"Faturalar",value:"utilities"},{label:"Kira",value:"rent"},{label:"Maalar",value:"salaries"},{label:"Malzemeler",value:"supplies"},{label:"Pazarlama",value:"marketing"},{label:"Personel",value:"personnel"},{label:"Seyahat",value:"travel"},{label:"Sigorta",value:"insurance"},{label:"Vergiler",value:"taxes"}],j={"Kira Giderleri":"rent","Personel Giderleri":"personnel","Fatura Giderleri":"utilities",Dier:"other",Ekipman:"equipment",Faturalar:"utilities",Kira:"rent",Maalar:"salaries",Malzemeler:"supplies",Pazarlama:"marketing",Personel:"personnel",Seyahat:"travel",Sigorta:"insurance",Vergiler:"taxes"},S=()=>[{id:"1",code:"100",name:i("chartOfAccounts.accountNames.100"),type:"asset",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"2",code:"101",name:i("chartOfAccounts.accountNames.101"),type:"asset",parentId:"1",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"3",code:"102",name:i("chartOfAccounts.accountNames.102"),type:"asset",parentId:"1",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"4",code:"120",name:i("chartOfAccounts.accountNames.120"),type:"asset",parentId:"1",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"5",code:"150",name:i("chartOfAccounts.accountNames.150"),type:"asset",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"7",code:"200",name:i("chartOfAccounts.accountNames.200"),type:"liability",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"8",code:"201",name:i("chartOfAccounts.accountNames.201"),type:"liability",parentId:"7",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"10",code:"300",name:i("chartOfAccounts.accountNames.300"),type:"equity",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"13",code:"600",name:i("chartOfAccounts.accountNames.600"),type:"revenue",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"14",code:"601",name:i("chartOfAccounts.accountNames.601"),type:"revenue",parentId:"13",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"15",code:"602",name:i("chartOfAccounts.accountNames.602"),type:"revenue",parentId:"13",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"16",code:"700",name:i("chartOfAccounts.accountNames.700"),type:"expense",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"17",code:"701",name:i("chartOfAccounts.accountNames.701"),type:"expense",parentId:"16",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"18",code:"702",name:i("chartOfAccounts.accountNames.702"),type:"expense",parentId:"16",isActive:!0,balance:0,createdAt:"2024-01-01"},{id:"19",code:"703",name:i("chartOfAccounts.accountNames.703"),type:"expense",parentId:"16",isActive:!0,balance:0,createdAt:"2024-01-01"}],[C,D]=G.useState(a.length>0?a:S()),R=G.useMemo(()=>{const ye=new Date,oe=ye.getFullYear();let me,ue;switch(V){case"this-month":me=Tc(new Date(oe,ye.getMonth(),1)),ue=Ec(new Date(oe,ye.getMonth()+1,0));break;case"this-quarter":{const tt=Math.floor(ye.getMonth()/3)*3;me=Tc(new Date(oe,tt,1)),ue=Ec(new Date(oe,tt+3,0));break}case"this-year":me=Tc(new Date(oe,0,1)),ue=Ec(new Date(oe,11,31));break;case"last-year":me=Tc(new Date(oe-1,0,1)),ue=Ec(new Date(oe-1,11,31));break;case"custom":{const ze=Ry(W),tt=Ry(E);me=ze?Tc(ze):void 0,ue=tt?Ec(tt):void 0;break}case"all":default:me=void 0,ue=void 0;break}if(me&&ue&&me.getTime()>ue.getTime()){const ze=me;me=ue,ue=ze}return{startMs:me?.getTime(),endMs:ue?.getTime(),preset:V}},[V,W,E]),{startMs:L,endMs:Y}=R,X=G.useMemo(()=>!L&&!Y?t:t.filter(ye=>Gf(AD(ye),L,Y)),[t,L,Y]),ae=G.useMemo(()=>!L&&!Y?f:f.filter(ye=>Gf(TD(ye),L,Y)),[f,L,Y]),$=G.useMemo(()=>!L&&!Y?h:h.filter(ye=>Gf(ED(ye),L,Y)),[h,L,Y]);G.useEffect(()=>{a.length===0&&D(S())},[i]);const Q=ye=>{switch(ye.code){case"101":return X.filter(me=>me.status==="paid"&&me.paymentMethod==="cash").reduce((me,ue)=>me+(Number(ue.total)||0),0);case"102":return X.filter(me=>me.status==="paid"&&(me.paymentMethod==="card"||me.paymentMethod==="transfer")).reduce((me,ue)=>me+(Number(ue.total)||0),0);case"120":return X.filter(me=>me.status==="sent"||me.status==="overdue").reduce((me,ue)=>me+(Number(ue.total)||0),0);case"201":return ae.filter(me=>me.status==="approved"||me.status==="pending").reduce((me,ue)=>me+(Number(ue.amount)||0),0);case"600":{const me=C.filter(ue=>ue.parentId===ye.id);return me.length>0?me.reduce((ue,ze)=>ue+Q(ze),0):X.filter(ue=>ue.type!=="refund"&&(ue.status==="paid"||ue.status==="sent"||ue.status==="overdue")).reduce((ue,ze)=>ue+(Number(ze.total)||0),0)}case"601":return X.filter(me=>me.type!=="refund"&&(me.status==="paid"||me.status==="sent"||me.status==="overdue")&&me.type==="product").reduce((me,ue)=>me+(Number(ue.total)||0),0);case"602":return X.filter(me=>me.type!=="refund"&&(me.status==="paid"||me.status==="sent"||me.status==="overdue")&&me.type==="service").reduce((me,ue)=>me+(Number(ue.total)||0),0);case"701":return ae.filter(me=>me.category==="rent").reduce((me,ue)=>me+(Number(ue.amount)||0),0);case"702":return ae.filter(me=>me.category==="personnel").reduce((me,ue)=>me+(Number(ue.amount)||0),0);case"703":return ae.filter(me=>me.category==="utilities").reduce((me,ue)=>me+(Number(ue.amount)||0),0);case"700":return ae.reduce((me,ue)=>me+(Number(ue.amount)||0),0);default:if(ye.type==="expense"&&ye.parentId&&C.find(ue=>ue.id===ye.parentId)?.code==="700"){const ue=j[ye.name];if(ue)return ae.filter(ze=>ze.category===ue).reduce((ze,tt)=>ze+(Number(tt.amount)||0),0)}return ye.balance}},z=ye=>{const oe=["101","102","120","201","600","601","602","700","701","702","703"];return ye.type==="expense"&&ye.parentId&&C.find(ue=>ue.id===ye.parentId)?.code==="700"&&j[ye.name]?!0:oe.includes(ye.code)},M=ye=>{const oe=ye.code,me={101:"Kasa: denen faturalarn nakit demeleri (Faturalar > dendi)",102:"Bankalar: denen faturalarn banka/kart demeleri (Faturalar > dendi)",120:"Alclar: denmemi faturalar (Faturalar > Gnderildi/Vadesi Geti)",201:"Satclar: denmemi giderler (Giderler > Onayland/Beklemede)",600:"GELRLER: Tm gelirler toplam (Faturalar sayfasndan)",601:"Sat Gelirleri: rn kategorili faturalar (rnler > rnler kategorisi)",602:"Hizmet Gelirleri: Hizmet kategorili faturalar (rnler > Hizmetler kategorisi)",700:"GDERLER: Tm giderler toplam (Giderler sayfasndan)",701:"Kira Giderleri: Kira kategorili giderler (Giderler sayfasndan)",702:"Personel Giderleri: Personel kategorili giderler (Giderler sayfasndan)",703:"Fatura Giderleri: Fatura kategorili giderler (Giderler sayfasndan)"};return ye.type==="expense"&&ye.parentId&&C.find(ze=>ze.id===ye.parentId)?.code==="700"&&j[ye.name]?`${ye.name}: ${ye.name} kategorili giderler (Giderler sayfasndan)`:me[oe]||"Bu hesap dier sayfalardan otomatik ynetilir"};_t.useEffect(()=>{console.log(" Hesap Plan Veri Kontrol:",{invoicesCount:X.length,expensesCount:ae.length,salesCount:$.length,customersCount:d.length,sampleInvoice:X[0],sampleExpense:ae[0],sampleSale:$[0]});const ye=C.map(oe=>{if(z(oe)){const me=Q(oe);return{...oe,balance:Number.isFinite(me)?me:0}}return oe});D(ye)},[X,ae,$,d]);const U=C.filter(ye=>{const oe=ye.name.toLowerCase().includes(r.toLowerCase())||ye.code.includes(r),me=c==="all"||ye.type===c;return oe&&me}),te=ye=>i(`chartOfAccounts.accountTypeLabels.${ye}`,ye),ie=ye=>({asset:"bg-blue-100 text-blue-800",liability:"bg-red-100 text-red-800",equity:"bg-purple-100 text-purple-800",revenue:"bg-green-100 text-green-800",expense:"bg-orange-100 text-orange-800"})[ye]||"bg-gray-100 text-gray-800",se=ye=>{const oe=Number(ye)||0;return n(oe)},le=ye=>{const oe=Number(ye)||0,me=Math.abs(oe),ue=l();if(me>=1e6){const ze=oe/1e6;return`${ue}${ze.toFixed(2)}M`}if(me>=1e3){const ze=oe/1e3;return`${ue}${ze.toFixed(2)}K`}return n(oe)},Ne=ye=>ye?ye.replace(/^0+/,"")||"0":"",ke=ye=>{const oe=new Set(m);oe.has(ye)?oe.delete(ye):oe.add(ye),x(oe)},Z=ye=>U.filter(oe=>oe.parentId===ye),ce=ye=>U.some(oe=>oe.parentId===ye),ve=(ye,oe,me)=>{p(ye),y(oe),T({[oe]:String(me)})},De=ye=>{if(!v||!b)return;const oe={...ye};v==="code"?oe.code=N.code||ye.code:v==="name"?oe.name=N.name||ye.name:v==="balance"&&(oe.balance=parseFloat(N.balance)||ye.balance);const me=C.map(ue=>ue.id===ye.id?oe:ue);D(me),o&&o(me),Ae()},Ae=()=>{p(null),y(null),T({})},Ie=(ye,oe)=>{T(me=>({...me,[ye]:oe}))},Ue=ye=>{const oe=ye.target.value;q(oe),oe!=="custom"&&(B(""),P(""))},Ge=ye=>{if(ye){const ue=C.find(ze=>ze.id===ye);if(ue?.parentId){alert("Alt kategorilere tekrar alt kategori eklenemez. Sadece ana kategorilere alt kategori eklenebilir.");return}if(ue?.code==="700"){F(ye),O(!0);return}}const oe={id:Date.now().toString(),code:"",name:"Yeni Hesap",type:ye?Le(ye):"asset",parentId:ye,isActive:!0,balance:0,createdAt:new Date().toISOString()},me=[...C,oe];D(me),o&&o(me),setTimeout(()=>{ve(oe.id,"name",oe.name)},100)},Le=ye=>C.find(me=>me.id===ye)?.type||"asset",at=(ye,oe)=>{if(!H)return;if(C.some(we=>we.parentId!==H?!1:j[we.name]===ye)){alert(`"${oe}" kategorisi zaten eklenmi. Her kategori sadece bir kez eklenebilir.`),O(!1),F(null);return}const ue=C.filter(we=>we.code.startsWith("70")&&we.parentId===H).map(we=>parseInt(we.code)).filter(we=>!isNaN(we)),ze=ue.length>0?Math.max(...ue)+1:704,tt={id:Date.now().toString(),code:ze.toString(),name:oe,type:"expense",parentId:H,isActive:!0,balance:0,createdAt:new Date().toISOString()},kt=[...C,tt];D(kt),o&&o(kt),O(!1),F(null)},ut=ye=>C.filter(me=>me.parentId===ye).reduce((me,ue)=>{if(C.some(kt=>kt.parentId===ue.id))return me+ut(ue.id);let tt=0;if(z(ue)){const kt=Q(ue);tt=Number.isFinite(kt)?kt:0}else tt=Number(ue.balance)||0;return me+tt},0),Ce=ye=>{if(ye.code==="700"||ye.code==="600"){const me=Q(ye);return Number.isFinite(me)?me:0}if(ce(ye.id))return ut(ye.id);if(z(ye)){const me=Q(ye);return Number.isFinite(me)?me:0}return Number(ye.balance)||0},it=ye=>{if(confirm(i("chartOfAccounts.deleteConfirm","Bu hesab silmek istediinizden emin misiniz?"))){if(C.some(ue=>ue.parentId===ye)){alert("Bu hesabn alt hesaplar var. nce alt hesaplar silin.");return}const me=C.filter(ue=>ue.id!==ye);D(me),o&&o(me)}},xt=ye=>{const oe={...ye,isActive:!ye.isActive},me=C.map(ue=>ue.id===ye.id?oe:ue);D(me),o&&o(me)},jt=(ye,oe=0)=>{const me=ce(ye.id),ue=m.has(ye.id),ze=Z(ye.id),tt=b===ye.id;return e.jsxs(_t.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",style:{paddingLeft:`${oe*20}px`},children:[me&&e.jsx("button",{onClick:()=>ke(ye.id),className:"mr-2 p-1 hover:bg-gray-200 rounded",children:ue?e.jsx(mA,{className:"w-4 h-4 text-gray-600"}):e.jsx(hA,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Eu,{className:"w-4 h-4 text-blue-600"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[tt&&v==="code"?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("input",{type:"text",value:N.code||"",onChange:kt=>Ie("code",kt.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0}),e.jsx("button",{onClick:()=>De(ye),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:e.jsx(cs,{className:"w-3 h-3"})}),e.jsx("button",{onClick:Ae,className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(Nr,{className:"w-3 h-3"})})]}):e.jsxs("span",{onClick:()=>!z(ye)&&ve(ye.id,"code",ye.code),className:`text-sm font-medium text-blue-600 px-1 py-0.5 rounded ${z(ye)?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-blue-50"}`,title:z(ye)?M(ye):"Kodu dzenlemek iin tklayn",children:[Ne(ye.code),z(ye)&&e.jsx("span",{className:"ml-1 text-xs",children:""})]}),e.jsx("span",{className:"text-gray-400",children:"-"}),tt&&v==="name"?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("input",{type:"text",value:N.name||"",onChange:kt=>Ie("name",kt.target.value),className:"px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0}),e.jsx("button",{onClick:()=>De(ye),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:e.jsx(cs,{className:"w-3 h-3"})}),e.jsx("button",{onClick:Ae,className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(Nr,{className:"w-3 h-3"})})]}):e.jsxs("span",{onClick:()=>!z(ye)&&ve(ye.id,"name",ye.name),className:`text-sm font-medium text-gray-900 px-1 py-0.5 rounded ${z(ye)?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-gray-50"}`,title:z(ye)?M(ye):"Ad dzenlemek iin tklayn",children:[ye.name,z(ye)&&e.jsx("span",{className:"ml-1 text-xs",children:""})]})]})})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ie(ye.type)}`,children:te(ye.type)})}),e.jsx("td",{className:"px-6 py-4 text-right",style:{minWidth:"180px"},children:tt&&v==="balance"?e.jsxs("div",{className:"flex items-center justify-end space-x-1",children:[e.jsx("input",{type:"number",value:N.balance||"",onChange:kt=>Ie("balance",kt.target.value),className:"w-24 px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-right",step:"0.01",autoFocus:!0}),e.jsx("button",{onClick:()=>De(ye),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:e.jsx(cs,{className:"w-3 h-3"})}),e.jsx("button",{onClick:Ae,className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(Nr,{className:"w-3 h-3"})})]}):e.jsx("div",{className:"text-right max-w-xs ml-auto",children:me?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-blue-600 truncate",title:se(Ce(ye)),children:se(Ce(ye))}),e.jsxs("div",{className:"text-xs text-gray-500",children:["(",i("chartOfAccounts.allSummed"),")"]})]}):e.jsxs("span",{onClick:()=>!z(ye)&&ve(ye.id,"balance",ye.balance),className:`inline-block text-sm font-semibold text-gray-900 px-2 py-1 rounded truncate max-w-full ${z(ye)?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-gray-50"}`,title:z(ye)?`${se(Ce(ye))} - ${M(ye)}`:`${se(Ce(ye))} (Dzenlemek iin tklayn)`,children:[se(Ce(ye)),z(ye)&&e.jsx("span",{className:"ml-1 text-xs text-blue-600",children:""})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>xt(ye),className:`px-2 py-1 rounded-full text-xs font-medium cursor-pointer transition-colors ${ye.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,title:i("chartOfAccounts.tooltips.toggleStatus",{defaultValue:"Durumu deitirmek iin tklayn"}),children:ye.isActive?i("chartOfAccounts.statusLabels.active"):i("chartOfAccounts.statusLabels.inactive")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>Ge(ye.id),className:"p-1 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:i("chartOfAccounts.tooltips.addSubAccount",{defaultValue:"Alt hesap ekle"}),children:e.jsx(Ks,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>it(ye.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:i("chartOfAccounts.tooltips.deleteAccount",{defaultValue:"Hesab sil"}),children:e.jsx(Xr,{className:"w-4 h-4"})})]})})]}),me&&ue&&ze.map(kt=>jt(kt,oe+1))]},ye.id)},Ee=U.filter(ye=>!ye.parentId),xe=C.reduce((ye,oe)=>{const me=ce(oe.id);if(!me&&oe.isActive){let ue=0;if(z(oe)){const ze=Q(oe);ue=Number.isFinite(ze)?ze:0}else ue=Number(oe.balance)||0;(oe.type==="revenue"||oe.type==="expense")&&console.log(` ${oe.name} (${oe.code}):`,{type:oe.type,balance:ue,storedBalance:oe.balance,isDataFromOtherPages:z(oe),hasChildren:me}),ye[oe.type]=(ye[oe.type]||0)+ue}return ye},{}),Be=C.find(ye=>ye.code==="600");if(Be){const ye=Q(Be);Number.isFinite(ye)&&(xe.revenue=ye)}const $e=C.find(ye=>ye.code==="700");if($e){const ye=Q($e);Number.isFinite(ye)&&(xe.expense=ye)}return console.log(" Hesaplanan Toplamlar:",xe),e.jsxs("div",{className:"space-y-6",children:[typeof window<"u"&&window.location.search.includes("debugTranslations")&&e.jsxs("div",{className:"border border-yellow-300 rounded-lg bg-yellow-50 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:"eviri Tanlama Paneli"}),e.jsx(CD,{})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Eu,{className:"w-8 h-8 text-blue-600 mr-3"}),i("chartOfAccounts.title")]}),e.jsx("p",{className:"text-gray-600",children:i("chartOfAccounts.subtitle")})]}),e.jsxs("button",{onClick:()=>Ge(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:i("chartOfAccounts.newAccount")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:i("chartOfAccounts.accountTypesPlural.asset")}),e.jsx("div",{className:"text-lg font-bold text-blue-700 truncate",title:se(xe.asset||0),children:le(xe.asset||0)})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-red-600 mb-1",children:i("chartOfAccounts.accountTypesPlural.liability")}),e.jsx("div",{className:"text-lg font-bold text-red-700 truncate",title:se(xe.liability||0),children:le(xe.liability||0)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:i("chartOfAccounts.accountTypesPlural.equity")}),e.jsx("div",{className:"text-lg font-bold text-purple-700 truncate",title:se(xe.equity||0),children:le(xe.equity||0)})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:i("chartOfAccounts.accountTypesPlural.revenue")}),e.jsx("div",{className:"text-lg font-bold text-green-700 truncate",title:se(xe.revenue||0),children:le(xe.revenue||0)})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-orange-600 mb-1",children:i("chartOfAccounts.accountTypesPlural.expense")}),e.jsx("div",{className:"text-lg font-bold text-orange-700 truncate",title:se(xe.expense||0),children:le(xe.expense||0)})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:[i("chartOfAccounts.activeDateRangeLabel",{defaultValue:"Tarih filtresi:"})," ",e.jsx("span",{className:"font-medium text-gray-700",children:A})]}),e.jsxs("div",{className:"flex flex-col gap-4 xl:flex-row xl:items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:i("chartOfAccounts.search"),value:r,onChange:ye=>s(ye.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-3 w-full xl:w-auto",children:[e.jsxs("select",{value:c,onChange:ye=>u(ye.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:i("chartOfAccounts.accountTypes.all")}),e.jsx("option",{value:"asset",children:i("chartOfAccounts.accountTypesPlural.asset")}),e.jsx("option",{value:"liability",children:i("chartOfAccounts.accountTypesPlural.liability")}),e.jsx("option",{value:"equity",children:i("chartOfAccounts.accountTypesPlural.equity")}),e.jsx("option",{value:"revenue",children:i("chartOfAccounts.accountTypesPlural.revenue")}),e.jsx("option",{value:"expense",children:i("chartOfAccounts.accountTypesPlural.expense")})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx(Vr,{className:"w-4 h-4 text-gray-500"}),e.jsx("select",{value:V,onChange:Ue,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:My.map(ye=>e.jsx("option",{value:ye.value,children:i(ye.labelKey,{defaultValue:ye.defaultLabel})},ye.value))})]}),V==="custom"&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"date",value:W,onChange:ye=>B(ye.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"date",value:E,onChange:ye=>P(ye.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i("chartOfAccounts.title")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[C.length," ",i("chartOfAccounts.accountsRegistered"),"  ",i("chartOfAccounts.clickToEdit")]})]}),e.jsx("div",{className:"text-xs text-gray-500 bg-blue-50 px-3 py-2 rounded-lg",children:i("chartOfAccounts.tooltips.editHint")})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-full lg:min-w-[1024px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i("chartOfAccounts.accountName")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i("chartOfAccounts.type")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:i("chartOfAccounts.balance")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i("chartOfAccounts.status")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:i("chartOfAccounts.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ee.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Eu,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Henz hesap bulunmuyor"}),e.jsx("p",{className:"text-gray-400 text-sm",children:i("chartOfAccounts.addAccountTip")})]})}):Ee.map(ye=>jt(ye))})]})})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gider Kategorisi Sein"}),e.jsx("button",{onClick:()=>{O(!1),F(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Nr,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Giderler kategorisine eklenecek alt kategoriyi sein. Bu kategori, giderler sayfasndaki kategorilerle otomatik eletirilecektir."}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-96 overflow-y-auto",children:k.map(ye=>{const oe=C.some(me=>me.parentId!==H?!1:j[me.name]===ye.value);return e.jsx("button",{onClick:()=>!oe&&at(ye.value,ye.label),disabled:oe,className:`px-4 py-3 text-left border rounded-lg transition-colors ${oe?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed opacity-60":"border-gray-200 hover:bg-blue-50 hover:border-blue-300"}`,children:e.jsxs("span",{className:"text-sm font-medium flex items-center justify-between",children:[ye.label,oe&&e.jsx(cs,{className:"w-4 h-4 text-green-500"})]})},ye.value)})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:()=>{O(!1),F(null)},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:i("common.cancel")})})]})})})]})}const zp=[20,50,100],ew=a=>zp.includes(a),La={invoices:"archive_invoices_pageSize",expenses:"archive_expenses_pageSize",sales:"archive_sales_pageSize",customers:"archive_customers_pageSize",suppliers:"archive_suppliers_pageSize"},Dc=a=>{const o=Et.getItem(a),t=o?Number(o):zp[0];return ew(t)?t:zp[0]},_D=(a,o)=>{Et.setItem(a,String(o))},_c=(a,o,t,f)=>{if(!ew(a)){he.warn("Attempted to set invalid archive page size",{storageKey:f,size:a});return}o(a),_D(f,a),t(1)};function PD({invoices:a=[],expenses:o=[],sales:t=[],customers:f=[],suppliers:h=[],onViewInvoice:d,onViewExpense:n,onViewSale:l,onViewCustomer:i,onViewSupplier:r,onDownloadInvoice:s,onDownloadExpense:c,onDownloadSale:u}){const{formatCurrency:m}=Jr(),{t:x}=$t("common"),[b,p]=G.useState(""),[v,y]=G.useState(""),[N,T]=G.useState(new Set(["invoices","expenses","sales"])),[_,O]=G.useState("all"),[H,F]=G.useState(1),[V,q]=G.useState(()=>Dc(La.invoices)),[W,B]=G.useState(1),[E,P]=G.useState(()=>Dc(La.expenses)),[A,k]=G.useState(1),[j,S]=G.useState(()=>Dc(La.sales)),[C,D]=G.useState(1),[R,L]=G.useState(()=>Dc(La.customers)),[Y,X]=G.useState(1),[ae,$]=G.useState(()=>Dc(La.suppliers)),Q=oe=>_c(oe,q,F,La.invoices),z=oe=>_c(oe,P,B,La.expenses),M=oe=>_c(oe,S,k,La.sales),U=oe=>_c(oe,L,D,La.customers),te=oe=>_c(oe,$,X,La.suppliers),ie=a.filter(oe=>oe.status==="paid"||oe.status==="overdue"),se=o.filter(oe=>oe.status==="paid"),le=t.filter(oe=>oe.status==="completed"||oe.status==="cancelled"),Ne=f,ke=h,Z=oe=>{const me=new Set(N);me.has(oe)?me.delete(oe):me.add(oe),T(me)},ce=oe=>new Date(oe).toLocaleDateString("tr-TR"),ve=oe=>{const me=typeof oe=="number"?oe:parseFloat(String(oe??""));return Number.isFinite(me)?me:0},De=oe=>m(ve(oe)),Ae=(oe,me)=>{const ue=Kr(oe),tt={paid:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[ue]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${tt}`,children:zt(x,ue)})},Ie=(oe,me)=>oe.filter(ue=>{const ze=b===""||me.some(kt=>{const we=ue[kt];return we&&we.toString().toLowerCase().includes(b.toLowerCase())}),tt=v===""||(()=>{const kt=new Date(ue.issueDate||ue.expenseDate||ue.date||ue.createdAt),we=new Date(v);return kt.toDateString()===we.toDateString()})();return ze&&tt}),Ue=Ie(ie,["invoiceNumber","customerName"]),Ge=Ie(se,["expenseNumber","description","supplier"]),Le=Ie(le,["saleNumber","customerName","productName"]),at=Ie(Ne,["name","email","company"]),ut=Ie(ke,["name","email","company"]),Ce=G.useMemo(()=>{const oe=(H-1)*V;return Ue.slice(oe,oe+V)},[Ue,H,V]),it=G.useMemo(()=>{const oe=(W-1)*E;return Ge.slice(oe,oe+E)},[Ge,W,E]),xt=G.useMemo(()=>{const oe=(A-1)*j;return Le.slice(oe,oe+j)},[Le,A,j]),jt=G.useMemo(()=>{const oe=(C-1)*R;return at.slice(oe,oe+R)},[at,C,R]),Ee=G.useMemo(()=>{const oe=(Y-1)*ae;return ut.slice(oe,oe+ae)},[ut,Y,ae]),xe=ie.reduce((oe,me)=>oe+ve(me.total??me.amount??me.grandTotal),0)+le.reduce((oe,me)=>oe+ve(me.amount??me.total),0),Be=se.reduce((oe,me)=>oe+ve(me.amount??me.total),0),$e=[{id:"all",label:x("archive.tabs.all"),count:Ue.length+Ge.length+Le.length},{id:"invoices",label:x("archive.tabs.invoices"),count:Ue.length},{id:"expenses",label:x("archive.tabs.expenses"),count:Ge.length},{id:"sales",label:x("archive.tabs.sales"),count:Le.length},{id:"contacts",label:x("archive.tabs.contacts"),count:at.length+ut.length}],ye=oe=>_==="all"||_===oe||_==="contacts"&&(oe==="customers"||oe==="suppliers");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(uv,{className:"w-8 h-8 text-gray-600 mr-3"}),x("archive.title")]}),e.jsx("p",{className:"text-gray-600",children:x("archive.subtitle")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:x("archive.totalArchive")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ie.length+se.length+le.length+Ne.length+ke.length})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fr,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600",children:x("archive.archivedInvoices")}),e.jsx("p",{className:"text-lg font-bold text-blue-700",children:ie.length})]})]})}),e.jsx("div",{className:"bg-red-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(un,{className:"w-6 h-6 text-red-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-600",children:x("archive.archivedExpenses")}),e.jsx("p",{className:"text-lg font-bold text-red-700",children:se.length})]})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fs,{className:"w-6 h-6 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:x("archive.archivedSales")}),e.jsx("p",{className:"text-lg font-bold text-green-700",children:le.length})]})]})}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ls,{className:"w-6 h-6 text-purple-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600",children:x("archive.totalContacts")}),e.jsx("p",{className:"text-lg font-bold text-purple-700",children:Ne.length+ke.length})]})]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:x("archive.searchPlaceholder"),value:b,onChange:oe=>p(oe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"date",value:v,onChange:oe=>y(oe.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsx("button",{onClick:()=>{p(""),y("")},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:x("archive.clearFilters")})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex flex-wrap gap-3 px-4 sm:px-6",children:$e.map(oe=>e.jsxs("button",{onClick:()=>O(oe.id),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${_===oe.id?"border-gray-600 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[oe.label,e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-600 py-1 px-2 rounded-full text-xs",children:oe.count})]},oe.id))})}),e.jsxs("div",{className:"p-6",children:[ye("invoices")&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>Z("invoices"),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Fr,{className:"w-5 h-5 text-blue-600 mr-2"}),x("archive.sections.archivedInvoices")," (",Ue.length,")"]}),N.has("invoices")?e.jsx(qs,{className:"w-5 h-5 text-gray-400"}):e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),N.has("invoices")&&e.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-200 overflow-hidden",children:Ue.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(Fr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:x("archive.empty.invoices")}),e.jsx("p",{className:"text-sm text-gray-400",children:x("archive.empty.invoicesHelper")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto text-sm",children:[e.jsx("thead",{className:"bg-blue-100 text-blue-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.invoice")}),e.jsx("th",{className:"hidden md:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.customer")}),e.jsx("th",{className:"hidden md:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.amount")}),e.jsx("th",{className:"hidden lg:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.status")}),e.jsx("th",{className:"hidden lg:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.date")}),e.jsx("th",{className:"hidden md:table-cell px-4 py-3 text-right text-xs font-semibold uppercase",children:x("archive.table.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-blue-100",children:Ce.map(oe=>e.jsxs("tr",{className:"hover:bg-blue-25 transition-colors",children:[e.jsxs("td",{className:"px-4 py-3 align-top",children:[e.jsx("button",{onClick:()=>d?.(oe),className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:oe.invoiceNumber}),e.jsxs("div",{className:"mt-2 space-y-2 text-xs text-gray-600 md:hidden",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.customer"),":"]}),e.jsx("span",{className:"text-gray-900",children:oe.customerName})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.amount"),":"]}),e.jsx("span",{className:"text-gray-900 font-semibold",children:De(oe.total)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.status"),":"]}),e.jsx("span",{className:"inline-flex",children:Ae(oe.status)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.date"),":"]}),e.jsx("span",{className:"text-gray-900",children:ce(oe.issueDate)})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 md:hidden",children:[e.jsx("button",{onClick:()=>d?.(oe),className:"inline-flex items-center justify-center w-9 h-9 rounded text-gray-400 hover:text-blue-600 hover:bg-blue-50",title:x("archive.actions.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>s?.(oe),className:"inline-flex items-center justify-center w-9 h-9 rounded text-gray-400 hover:text-green-600 hover:bg-green-50",title:x("archive.actions.download"),children:e.jsx(Cs,{className:"w-4 h-4"})})]})]}),e.jsx("td",{className:"hidden md:table-cell px-4 py-3 text-sm text-gray-900",children:oe.customerName}),e.jsx("td",{className:"hidden md:table-cell px-4 py-3 text-sm font-semibold text-gray-900",children:De(oe.total)}),e.jsx("td",{className:"hidden lg:table-cell px-4 py-3",children:Ae(oe.status)}),e.jsx("td",{className:"hidden lg:table-cell px-4 py-3 text-sm text-gray-500",children:ce(oe.issueDate)}),e.jsx("td",{className:"hidden md:table-cell px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>d?.(oe),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:x("archive.actions.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>s?.(oe),className:"p-1 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:x("archive.actions.download"),children:e.jsx(Cs,{className:"w-4 h-4"})})]})})]},oe.id))})]})}),e.jsx("div",{className:"p-3 border-t border-blue-200 bg-blue-50",children:e.jsx(Rs,{page:H,pageSize:V,total:Ue.length,onPageChange:F,onPageSizeChange:Q})})]})})]}),ye("expenses")&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>Z("expenses"),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(un,{className:"w-5 h-5 text-red-600 mr-2"}),x("archive.sections.archivedExpenses")," (",Ge.length,")"]}),N.has("expenses")?e.jsx(qs,{className:"w-5 h-5 text-gray-400"}):e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),N.has("expenses")&&e.jsx("div",{className:"bg-red-50 rounded-lg border border-red-200 overflow-hidden",children:Ge.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(un,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:x("archive.empty.expenses")}),e.jsx("p",{className:"text-sm text-gray-400",children:x("archive.empty.expensesHelper")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto text-sm",children:[e.jsx("thead",{className:"bg-red-100 text-red-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.expense")}),e.jsx("th",{className:"hidden md:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.supplier")}),e.jsx("th",{className:"hidden lg:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.category")}),e.jsx("th",{className:"hidden md:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.amount")}),e.jsx("th",{className:"hidden lg:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.date")}),e.jsx("th",{className:"hidden md:table-cell px-4 py-3 text-right text-xs font-semibold uppercase",children:x("archive.table.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-red-100",children:it.map(oe=>e.jsxs("tr",{className:"hover:bg-red-25 transition-colors",children:[e.jsxs("td",{className:"px-4 py-3 align-top",children:[e.jsx("button",{onClick:()=>n?.(oe),className:"text-red-600 hover:text-red-800 font-medium transition-colors",children:oe.expenseNumber}),oe.description&&e.jsx("div",{className:"text-xs text-gray-500",children:oe.description}),e.jsxs("div",{className:"mt-2 space-y-2 text-xs text-gray-600 md:hidden",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.supplier"),":"]}),e.jsx("span",{className:"text-gray-900",children:oe.supplier||""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.category"),":"]}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-800 text-xs font-medium rounded-full",children:oe.category})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.amount"),":"]}),e.jsxs("span",{className:"text-red-600 font-semibold",children:["-",De(oe.amount)]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.date"),":"]}),e.jsx("span",{className:"text-gray-900",children:ce(oe.expenseDate)})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 md:hidden",children:[e.jsx("button",{onClick:()=>n?.(oe),className:"inline-flex items-center justify-center w-9 h-9 rounded text-gray-400 hover:text-red-600 hover:bg-red-50",title:x("archive.actions.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c?.(oe),className:"inline-flex items-center justify-center w-9 h-9 rounded text-gray-400 hover:text-green-600 hover:bg-green-50",title:x("archive.actions.download"),children:e.jsx(Cs,{className:"w-4 h-4"})})]})]}),e.jsx("td",{className:"hidden md:table-cell px-4 py-3 text-sm text-gray-900",children:oe.supplier}),e.jsx("td",{className:"hidden lg:table-cell px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs font-medium rounded-full",children:oe.category})}),e.jsxs("td",{className:"hidden md:table-cell px-4 py-3 text-sm font-semibold text-red-600",children:["-",De(oe.amount)]}),e.jsx("td",{className:"hidden lg:table-cell px-4 py-3 text-sm text-gray-500",children:ce(oe.expenseDate)}),e.jsx("td",{className:"hidden md:table-cell px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>n?.(oe),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:x("archive.actions.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c?.(oe),className:"p-1 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:x("archive.actions.download"),children:e.jsx(Cs,{className:"w-4 h-4"})})]})})]},oe.id))})]})}),e.jsx("div",{className:"p-3 border-t border-red-200 bg-red-50",children:e.jsx(Rs,{page:W,pageSize:E,total:Ge.length,onPageChange:B,onPageSizeChange:z})})]})})]}),ye("sales")&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>Z("sales"),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(fs,{className:"w-5 h-5 text-green-600 mr-2"}),x("archive.sections.archivedSales")," (",Le.length,")"]}),N.has("sales")?e.jsx(qs,{className:"w-5 h-5 text-gray-400"}):e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),N.has("sales")&&e.jsx("div",{className:"bg-green-50 rounded-lg border border-green-200 overflow-hidden",children:Le.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(fs,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:x("archive.empty.sales")}),e.jsx("p",{className:"text-sm text-gray-400",children:x("archive.empty.salesHelper")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto text-sm",children:[e.jsx("thead",{className:"bg-green-100 text-green-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.sale")}),e.jsx("th",{className:"hidden md:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.customer")}),e.jsx("th",{className:"hidden lg:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.product")}),e.jsx("th",{className:"hidden md:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.amount")}),e.jsx("th",{className:"hidden lg:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.status")}),e.jsx("th",{className:"hidden lg:table-cell px-4 py-3 text-left text-xs font-semibold uppercase",children:x("archive.table.date")}),e.jsx("th",{className:"hidden md:table-cell px-4 py-3 text-right text-xs font-semibold uppercase",children:x("archive.table.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-green-100",children:xt.map(oe=>e.jsxs("tr",{className:"hover:bg-green-25 transition-colors",children:[e.jsxs("td",{className:"px-4 py-3 align-top",children:[e.jsx("button",{onClick:()=>l?.(oe),className:"text-green-600 hover:text-green-800 font-medium transition-colors",children:oe.saleNumber||`SAL-${oe.id}`}),e.jsxs("div",{className:"mt-2 space-y-2 text-xs text-gray-600 md:hidden",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.customer"),":"]}),e.jsx("span",{className:"text-gray-900",children:oe.customerName})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.product"),":"]}),e.jsx("span",{className:"text-gray-900",children:oe.productName||""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.amount"),":"]}),e.jsx("span",{className:"text-green-600 font-semibold",children:De(oe.amount)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.status"),":"]}),e.jsx("span",{className:"inline-flex",children:Ae(oe.status)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[x("archive.table.date"),":"]}),e.jsx("span",{className:"text-gray-900",children:ce(oe.date)})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 md:hidden",children:[e.jsx("button",{onClick:()=>l?.(oe),className:"inline-flex items-center justify-center w-9 h-9 rounded text-gray-400 hover:text-green-600 hover:bg-green-50",title:x("archive.actions.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u?.(oe),className:"inline-flex items-center justify-center w-9 h-9 rounded text-gray-400 hover:text-green-600 hover:bg-green-50",title:x("archive.actions.download"),children:e.jsx(Cs,{className:"w-4 h-4"})})]})]}),e.jsx("td",{className:"hidden md:table-cell px-4 py-3 text-sm text-gray-900",children:oe.customerName}),e.jsx("td",{className:"hidden lg:table-cell px-4 py-3 text-sm text-gray-900",children:oe.productName}),e.jsx("td",{className:"hidden md:table-cell px-4 py-3 text-sm font-semibold text-green-600",children:De(oe.amount)}),e.jsx("td",{className:"hidden lg:table-cell px-4 py-3",children:Ae(oe.status)}),e.jsx("td",{className:"hidden lg:table-cell px-4 py-3 text-sm text-gray-500",children:ce(oe.date)}),e.jsx("td",{className:"hidden md:table-cell px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>l?.(oe),className:"p-1 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:x("archive.actions.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u?.(oe),className:"p-1 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:x("archive.actions.download"),children:e.jsx(Cs,{className:"w-4 h-4"})})]})})]},oe.id))})]})}),e.jsx("div",{className:"p-3 border-t border-green-200 bg-green-50",children:e.jsx(Rs,{page:A,pageSize:j,total:Le.length,onPageChange:k,onPageSizeChange:M})})]})})]}),ye("contacts")&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>Z("customers"),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Ls,{className:"w-5 h-5 text-purple-600 mr-2"}),x("archive.sections.customers")," (",at.length,")"]}),N.has("customers")?e.jsx(qs,{className:"w-5 h-5 text-gray-400"}):e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),N.has("customers")&&e.jsx("div",{className:"bg-purple-50 rounded-lg border border-purple-200 overflow-hidden",children:at.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(Ls,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:x("archive.empty.customers")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"divide-y divide-purple-100",children:jt.map(oe=>e.jsx("div",{className:"p-4 hover:bg-purple-25 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 font-semibold",children:oe.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>i?.(oe),className:"font-medium text-purple-600 hover:text-purple-800 transition-colors",children:oe.name}),oe.company&&e.jsx("p",{className:"text-sm text-gray-600",children:oe.company}),e.jsx("p",{className:"text-xs text-gray-500",children:oe.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[x("archive.table.registered"),": ",ce(oe.createdAt)]}),e.jsx("button",{onClick:()=>i?.(oe),className:"p-1 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded transition-colors mt-1",title:x("archive.actions.view"),children:e.jsx(Zr,{className:"w-4 h-4"})})]})]})},oe.id))}),e.jsx("div",{className:"p-3 border-t border-purple-200 bg-purple-50",children:e.jsx(Rs,{page:C,pageSize:R,total:at.length,onPageChange:D,onPageSizeChange:U})})]})})]}),ye("contacts")&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>Z("suppliers"),children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ts,{className:"w-5 h-5 text-orange-600 mr-2"}),x("archive.sections.suppliers")," (",ut.length,")"]}),N.has("suppliers")?e.jsx(qs,{className:"w-5 h-5 text-gray-400"}):e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]}),N.has("suppliers")&&e.jsx("div",{className:"bg-orange-50 rounded-lg border border-orange-200 overflow-hidden",children:ut.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(ts,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:x("archive.empty.suppliers")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"divide-y divide-orange-100",children:Ee.map(oe=>e.jsx("div",{className:"p-4 hover:bg-orange-25 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 font-semibold",children:oe.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>r?.(oe),className:"font-medium text-orange-600 hover:text-orange-800 transition-colors",children:oe.name}),oe.company&&e.jsx("p",{className:"text-sm text-gray-600",children:oe.company}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:oe.email}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full",children:oe.category})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[x("archive.table.registered"),": ",ce(oe.createdAt)]}),e.jsx("button",{onClick:()=>r?.(oe),className:"p-1 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors mt-1",title:x("archive.actions.view"),children:e.jsx(Zr,{className:"w-4 h-4"})})]})]})},oe.id))}),e.jsx("div",{className:"p-3 border-t border-orange-200 bg-orange-50",children:e.jsx(Rs,{page:Y,pageSize:ae,total:ut.length,onPageChange:X,onPageSizeChange:te})})]})})]}),_==="all"&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ui,{className:"w-5 h-5 text-gray-600 mr-2"}),x("archive.sections.archiveSummary")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:x("archive.summary.financial")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[x("archive.summary.totalIncome"),":"]}),e.jsx("span",{className:"font-semibold text-green-600",children:De(xe)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[x("archive.summary.totalExpense"),":"]}),e.jsx("span",{className:"font-semibold text-red-600",children:De(Be)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-300 pt-2",children:[e.jsxs("span",{className:"text-gray-900 font-medium",children:[x("archive.summary.netArchive"),":"]}),e.jsx("span",{className:`font-bold ${xe-Be>=0?"text-green-600":"text-red-600"}`,children:De(xe-Be)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:x("archive.summary.recordCounts")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[x("archive.archivedInvoices"),":"]}),e.jsx("span",{className:"font-medium",children:ie.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[x("archive.archivedExpenses"),":"]}),e.jsx("span",{className:"font-medium",children:se.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[x("archive.archivedSales"),":"]}),e.jsx("span",{className:"font-medium",children:le.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[x("archive.totalContacts"),":"]}),e.jsx("span",{className:"font-medium",children:Ne.length+ke.length})]})]})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx($s,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:x("archive.info.title")}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:x("archive.info.description")})]})]})})]})]})]})}const Ii=a=>{if(typeof a=="number")return Number.isFinite(a)?a:0;if(a==null)return 0;const o=String(a).trim();if(!o)return 0;if(o.includes(".")&&o.includes(",")){const h=o.replace(/\./g,"").replace(/,/g,"."),d=parseFloat(h);return Number.isFinite(d)?d:0}if(o.includes(",")&&!o.includes(".")){const f=parseFloat(o.replace(/,/g,"."));return Number.isFinite(f)?f:0}const t=parseFloat(o.replace(/\s/g,""));return Number.isFinite(t)?t:0};function ID({invoices:a,expenses:o,sales:t}){const{formatCurrency:f}=Jr(),{t:h,i18n:d}=$t(),[n]=G.useState(""),[l]=G.useState(""),[i]=G.useState(""),[r]=G.useState(""),[s]=G.useState(""),[c]=G.useState("all"),[u,m]=G.useState(null),[x,b]=G.useState(null),[p,v]=G.useState(null),y=[20,50,100],N=A=>y.includes(A),T=()=>{const A=Et.getItem("ledger_pageSize"),k=A?Number(A):y[0];return N(k)?k:y[0]},[_,O]=G.useState(1),[H,F]=G.useState(()=>T()),V=G.useMemo(()=>{const A=[],k=[],j=R=>R==null?0:R.total!=null?Ii(R.total):R.amount!=null?Ii(R.amount):Array.isArray(R.items)?R.items.reduce((L,Y)=>L+Ii(Y.quantity)*Ii(Y.unitPrice),0):0,S=R=>R==null?0:Ii(R.amount),C=R=>R?.amount!=null?Ii(R.amount):Ii(R?.quantity)*Ii(R?.unitPrice);a.forEach(R=>{k.push({date:R.issueDate,type:"invoice",data:R})}),o.forEach(R=>{k.push({date:R.expenseDate,type:"expense",data:R})}),t.forEach(R=>{k.push({date:R.date,type:"sale",data:R})}),k.sort((R,L)=>new Date(L.date).getTime()-new Date(R.date).getTime());let D=0;return k.forEach(R=>{if(R.type==="invoice"){const L=R.data,Y=j(L);L.status==="paid"&&(D+=Y);const X=L.type==="product"?h("chartOfAccounts.accountNames.601"):h("chartOfAccounts.accountNames.602");A.push({id:`inv-${L.id}`,date:L.issueDate,description:`${h("ledger.entry.invoicePrefix")} - ${L.customerName||L.customer?.name||h("common.generic.customer")}`,reference:L.invoiceNumber,customer:L.customerName||L.customer?.name||"",category:X,debit:0,credit:L.status==="paid"?Y:0,displayCredit:Y,balance:D,type:"invoice",originalData:L})}else if(R.type==="expense"){const L=R.data,Y=S(L);L.status==="paid"&&(D-=Y),A.push({id:`exp-${L.id}`,date:L.expenseDate,description:`${h("ledger.entry.expensePrefix")} - ${L.description}`,reference:L.expenseNumber,customer:L.supplier?.name||L.supplier||"",category:h(`expenseCategories.${L.category}`,{defaultValue:L.category}),debit:L.status==="paid"?Y:0,credit:0,displayDebit:Y,balance:D,type:"expense",originalData:L})}else if(R.type==="sale"){const L=R.data,Y=C(L);L.status==="completed"&&(D+=Y),A.push({id:`sal-${L.id}`,date:L.date,description:`${h("ledger.entry.salePrefix")} - ${L.productName}`,reference:L.saleNumber||`SAL-${L.id}`,customer:L.customerName,category:h("chartOfAccounts.accountNames.601"),debit:0,credit:L.status==="completed"?Y:0,displayCredit:Y,balance:D,type:"sale",originalData:L})}}),A},[a,o,t,d.language]),q=G.useMemo(()=>V.filter(A=>{const k=c==="all"||A.type===c,j=!n||A.description&&A.description.toLowerCase().includes(n.toLowerCase())||A.reference&&A.reference.toLowerCase().includes(n.toLowerCase())||A.customer&&A.customer.toLowerCase().includes(n.toLowerCase()),S=new Date(A.date),C=!l||S>=new Date(l),D=!i||S<=new Date(i),R=C&&D,L=!r||A.customer&&A.customer.toLowerCase().includes(r.toLowerCase()),Y=!s||A.category&&A.category.toLowerCase().includes(s.toLowerCase());return k&&j&&R&&L&&Y}),[V,c,n,l,i,r,s]),W=G.useMemo(()=>{const A=(_-1)*H;return q.slice(A,A+H)},[q,_,H]);G.useEffect(()=>{O(1)},[c,n,l,i,r,s]);const B=A=>{const k=N(A)?A:y[0];F(k),Et.setItem("ledger_pageSize",String(k)),O(1)},E=A=>f(A||0),P=A=>A==="invoice"?e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold",children:"F"})}):A==="expense"?e.jsx("div",{className:"w-6 h-6 bg-red-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-red-600 text-xs font-bold",children:"G"})}):A==="sale"?e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 text-xs font-bold",children:"S"})}):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-white shadow",children:[e.jsx("div",{className:"text-sm text-gray-500",children:h("ledger.totalCredit")}),e.jsx("div",{className:"text-xl font-semibold",children:E(q.reduce((A,k)=>A+k.credit,0))})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white shadow",children:[e.jsx("div",{className:"text-sm text-gray-500",children:h("ledger.totalDebit")}),e.jsx("div",{className:"text-xl font-semibold",children:E(q.reduce((A,k)=>A+k.debit,0))})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white shadow",children:[e.jsx("div",{className:"text-sm text-gray-500",children:h("ledger.netBalance")}),e.jsx("div",{className:"text-xl font-semibold",children:E(q.reduce((A,k)=>A+k.credit-k.debit,0))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"divide-y divide-gray-100",children:[W.map(A=>e.jsxs("div",{className:"grid grid-cols-12 items-center px-4 py-3",children:[e.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[P(A.type),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:[A.reference?`Ref: ${A.reference}  `:"",A.customer||"-"]})]})]}),e.jsx("div",{className:"col-span-2 text-sm text-gray-700",children:A.date}),e.jsx("div",{className:"col-span-3 text-sm text-gray-700",children:A.category||"-"}),e.jsx("div",{className:"col-span-2 text-right",children:e.jsx("span",{className:`text-sm font-medium ${(A.displayDebit??A.debit)>0?"text-red-600":"text-gray-400"}`,children:E(A.displayDebit??A.debit)})}),e.jsx("div",{className:"col-span-2 text-right",children:e.jsx("span",{className:`text-sm font-medium ${(A.displayCredit??A.credit)>0?"text-green-600":"text-gray-400"}`,children:E(A.displayCredit??A.credit)})})]},A.id)),q.length===0&&e.jsx("div",{className:"p-6 text-center text-sm text-gray-500",children:"Kayt bulunamad."})]}),e.jsx("div",{className:"p-3 border-t border-gray-200 bg-white",children:e.jsx(Rs,{page:_,pageSize:H,total:q.length,onPageChange:O,onPageSizeChange:B})})]}),u&&e.jsx(lg,{invoice:u,isOpen:!0,onClose:()=>m(null),onEdit:()=>{}}),x&&e.jsx(Vv,{expense:x,isOpen:!0,onClose:()=>b(null),onEdit:()=>{}}),p&&e.jsx(cg,{sale:p,isOpen:!0,onClose:()=>v(null),onEdit:()=>{}})]})}const ii=a=>{if(typeof a=="number")return Number.isFinite(a)?a:0;if(a==null)return 0;const o=String(a).trim();if(!o)return 0;if(o.includes(".")&&o.includes(",")){const h=o.replace(/\./g,"").replace(/,/g,"."),d=parseFloat(h);return Number.isFinite(d)?d:0}if(o.includes(",")&&!o.includes(".")){const f=parseFloat(o.replace(/,/g,"."));return Number.isFinite(f)?f:0}const t=parseFloat(o.replace(/\s/g,""));return Number.isFinite(t)?t:0},MD=a=>{if(a==null)return"";const o=String(a);return/[",\n]/.test(o)?`"${o.replace(/"/g,'""')}"`:o},Pc=a=>{if(Array.isArray(a.items)&&a.items.length>0)return a.items.reduce((f,h)=>f+ii(h.unitPrice)*ii(h.quantity),0);const o=ii(a.quantity??0),t=ii(a.unitPrice??0);return o>0&&t>0?o*t:ii(a.amount??a.total??0)},Lp=[20,50,100],Vu=a=>Lp.includes(a),RD=()=>{const a=Et.getItem("sales_pageSize"),o=a?Number(a):Lp[0];return Vu(o)?o:Lp[0]};function zy({customers:a=[],sales:o=[],invoices:t=[],products:f=[],onSalesUpdate:h,onUpsertSale:d,onCreateInvoice:n,onEditInvoice:l,onDownloadSale:i,onDeleteSale:r}){const{t:s,i18n:c}=$t("common"),{formatCurrency:u}=Jr(),m=G.useMemo(()=>{try{const fe=en()||void 0,He=is("quotes_cache",{tenantId:fe,fallbackToBase:!0})??[],lt=new Map;for(const Pe of He){const rt=Pe?.id,je=Pe?.quoteNumber;rt!=null&&je!=null&&String(je).trim()&&lt.set(String(rt),String(je))}return lt}catch{return new Map}},[]),[x,b]=G.useState(!1),[p,v]=G.useState(!1),[y,N]=G.useState(!1),[T,_]=G.useState(!1),[O,H]=G.useState(!1),[F,V]=G.useState(null),[q,W]=G.useState(null),[B,E]=G.useState(null),[P,A]=G.useState(null),[k,j]=G.useState(null),[S,C]=G.useState(!1),[D,R]=G.useState(""),[L,Y]=G.useState("all"),[X,ae]=G.useState(""),[$,Q]=G.useState(""),[z,M]=G.useState(null),[U,te]=G.useState(""),[ie,se]=G.useState("date"),[le,Ne]=G.useState("desc"),ke=ug(D,300),[Z,ce]=G.useState(1),[ve,De]=G.useState(()=>RD()),{getDefault:Ae}=qi({listType:"sales"});G.useEffect(()=>{const fe=Ae();if(fe&&fe.state)try{R(fe.state.searchTerm??""),Y(fe.state.statusFilter??"all"),ae(fe.state.startDate??""),Q(fe.state.endDate??""),fe.state.sortBy&&se(fe.state.sortBy),fe.state.sortDir&&Ne(fe.state.sortDir),fe.state.pageSize&&Vu(fe.state.pageSize)&&me(fe.state.pageSize)}catch(He){he.warn("Failed to hydrate simple sales saved view",He)}},[]);const Ie=fe=>{he.info("simpleSales.addSale.request",{viaUpsert:!!d,createInvoice:!!fe.createInvoice}),d?(d(fe),b(!1),j(null)):(E(fe),N(!0))},Ue=fe=>{if(!B)return;he.info("simpleSales.confirmation.accepted",{pendingSaleId:B.id,createInvoice:fe});const He=B.id?String(B.id):`temp-${Date.now()}`,lt=B.date??B.saleDate??new Date().toISOString().split("T")[0],Pe=ii(B.quantity??1)||1,rt=ii(B.unitPrice??0),je=ii(B.total??B.amount??rt*Pe),Me=Pe>0?je/Pe:je,Ye={id:He,saleNumber:B.saleNumber,customerName:B.customerName??"",customerEmail:B.customerEmail,productName:B.productName??"",quantity:Pe,unitPrice:Me,amount:je,total:je,date:lt,status:B.status??"completed",paymentMethod:B.paymentMethod,items:B.items,notes:B.notes},dt=[Ye,...o];if(h&&h(dt),fe&&n){const yt=B?.taxRate??18,Gt=Pe,Lt=je,ot=(Me||Lt/Gt)/(1+yt/100),ht=ot*Gt,It={id:`inv-${Date.now()}`,invoiceNumber:`INV-${new Date().getFullYear()}-${String(Date.now()).slice(-3)}`,customerName:B.customerName,customerEmail:B.customerEmail||"",customerAddress:"",issueDate:lt,dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],status:"sent",type:"product",items:[{id:"1",description:B.productName,quantity:Gt,unitPrice:ot,total:ht}],subtotal:ht,taxAmount:Lt-ht,total:Lt,notes:`Bu fatura ${B.saleNumber||`SAL-${B.id}`} numaral sattan otomatik oluturulmutur.`};n(It),setTimeout(()=>{i&&i(Ye)},500)}N(!1),E(null)},Ge=fe=>{he.info("simpleSales.edit.opened",{saleId:fe.id,saleNumber:fe.saleNumber}),j(fe),b(!0)},Le=fe=>{if(he.info("simpleSales.edit.submitted",{viaUpsert:!!d,saleId:fe.id}),d)d(fe),j(null),b(!1);else{const He=o.map(lt=>fe.id&&String(lt.id)===String(fe.id)?{...lt,...fe}:lt);h&&h(He),j(null)}},at=async fe=>{if(r){await r(fe);return}if(!confirm(s("sales.deleteConfirm")))return;const He=o.filter(lt=>String(lt.id)!==String(fe));h?.(He),p&&(v(!1),A(null))},ut=fe=>{A(fe),v(!0)},Ce=G.useCallback(fe=>{const He=ii(fe);return u(He)},[u]),it=G.useCallback(fe=>{if(!fe)return"";const He=new Date(fe);if(Number.isNaN(He.getTime()))return"";const lt=c.language||"en",Pe=lt.startsWith("tr")?"tr-TR":lt;try{return He.toLocaleDateString(Pe)}catch(rt){return he.warn("Failed to format sale date",{dateString:fe,error:rt}),He.toLocaleDateString("en-US")}},[c.language]),xt=G.useCallback(fe=>{if(!fe)return"";switch(fe){case"cash":return s("common.cash");case"card":return s("common.card");case"transfer":return s("common.transfer");case"check":return s("common.check");default:return fe}},[s]),jt=o.reduce((fe,He)=>fe+Pc(He),0),Ee=o.filter(fe=>fe.status==="completed").length,xe=(c.language||"").toLowerCase(),Be=xe.startsWith("tr")?" (KDV Hari)":xe.startsWith("en")?" (Net of VAT)":xe.startsWith("fr")?" (HT)":xe.startsWith("de")?" (netto)":"",$e=o.filter(fe=>{const He=Ln(ke),lt=fe.items&&fe.items.length>0&&fe.items[0].productName||"",Pe=(fe.status||"").toString().toLowerCase(),rt=["completed","paid","invoiced","approved"].includes(Pe)?"completed":["cancelled","canceled","void","refunded","deleted"].includes(Pe)?"cancelled":(["pending","created","new","draft","open","processing"].includes(Pe),"pending"),je=[fe.saleNumber,fe.customerName,fe.customerEmail,fe.productName,lt,rt,fe.date,String(Pc(fe))].map(Ln).join(" "),Me=He.length===0||je.includes(He),Ye=L==="all"||rt===L,dt=(fe.date||"").slice(0,10),mt=!X||dt>=X,yt=!$||dt<=$;return Me&&Ye&&mt&&yt}).sort((fe,He)=>{switch(ie){case"saleNumber":return Ms(fe,He,lt=>lt.saleNumber||`SAL-${lt.id}`,le,"string");case"customer":return Ms(fe,He,lt=>lt.customerName||"",le,"string");case"product":return Ms(fe,He,Pe=>Pe.items&&Pe.items.length>0?Pe.items[0].productName||"":Pe.productName||"",le,"string");case"amount":return Ms(fe,He,Pe=>Hr(Pe.amount??Pe.total??Hr(Pe.quantity)*Hr(Pe.unitPrice)),le,"number");case"status":return Ms(fe,He,lt=>lt.status,le,"string",QT);case"date":default:return Ms(fe,He,lt=>oi(lt.date),le,"date")}}),ye=G.useMemo(()=>{const fe=(Z-1)*ve;return $e.slice(fe,fe+ve)},[$e,Z,ve]),oe=G.useCallback(()=>{if(!(typeof window>"u")){if(!$e.length){he.info("simpleSales.export.skipped",{reason:"empty"});return}try{const fe=[s("sales.sale",{defaultValue:"Sale"}),s("sales.customer",{defaultValue:"Account"}),s("sales.productService",{defaultValue:"Product/Service"}),s("sales.amount",{defaultValue:"Amount"}),s("sales.status",{defaultValue:"Status"}),s("sales.date",{defaultValue:"Date"}),s("sales.paymentMethod",{defaultValue:"Payment Method"})],He=$e.map(Me=>{const Ye=zt(s,Kr(Me.status)),dt=Array.isArray(Me.items)&&Me.items.length>0?`${Me.items[0].productName}${Me.items.length>1?` (+${Me.items.length-1})`:""}`:Me.productName;return[Me.saleNumber||`SAL-${Me.id}`,Me.customerName,dt,Ce(Pc(Me)),Ye,it(Me.date),xt(Me.paymentMethod)||""]}),lt=[fe,...He].map(Me=>Me.map(MD).join(",")).join(`\r
`),Pe=new Blob(["\uFEFF"+lt],{type:"text/csv;charset=utf-8;"}),rt=URL.createObjectURL(Pe),je=document.createElement("a");je.href=rt,je.download=`sales_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(je),je.click(),document.body.removeChild(je),URL.revokeObjectURL(rt),he.info("simpleSales.export.completed",{rowCount:He.length})}catch(fe){he.error("simpleSales.export.failed",{error:fe})}}},[$e,Ce,it,xt,s]);G.useEffect(()=>{ce(1)},[ke,L,ie,le,X,$]);const me=fe=>{if(!Vu(fe)){he.warn("Attempted to set invalid sales page size",fe);return}De(fe),Et.setItem("sales_pageSize",String(fe)),ce(1)},ue=fe=>{ie===fe?Ne(He=>He==="asc"?"desc":"asc"):(se(fe),Ne(fe==="amount"||fe==="date"?"desc":"asc"))},ze=({active:fe})=>e.jsx("span",{className:"inline-block ml-1 text-gray-400",children:fe?le==="asc"?"":"":""}),tt=fe=>{const He=Kr(fe),lt=["completed","paid","invoiced","approved"].includes(He),Pe=["cancelled"].includes(He),rt=lt?"completed":Pe?"cancelled":"pending",Me={completed:{label:zt(s,"completed"),class:"bg-green-100 text-green-800"},pending:{label:zt(s,"pending"),class:"bg-yellow-100 text-yellow-800"},cancelled:{label:zt(s,"cancelled"),class:"bg-red-100 text-red-800"}}[rt]||{label:zt(s,He),class:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Me.class}`,children:Me.label})},kt=(fe,He,lt)=>{M({saleId:fe,field:He}),te(String(lt))},we=fe=>{if(!z)return;const He={...fe};if(z.field==="amount"){const Pe=parseFloat(U)||0;He.amount=Pe}else z.field==="status"&&(He.status=U);const lt=o.map(Pe=>Pe.id===fe.id?He:Pe);h&&h(lt),M(null),te("")},st=()=>{M(null),te("")},wt=fe=>{he.info("simpleSales.invoice.requested",{saleId:fe.id,saleNumber:fe.saleNumber});const He=t.find(lt=>lt.saleId&&String(lt.saleId)===String(fe.id)||fe.invoiceId&&String(fe.invoiceId)===String(lt.id));He?(he.info("simpleSales.invoice.existingFound",{saleId:fe.id,saleNumber:fe.saleNumber,invoiceId:He.id,invoiceNumber:He.invoiceNumber,hasCustomer:!!He.customer}),W(He),H(!0)):(he.info("simpleSales.invoice.createFlow.start",{saleId:fe.id,saleNumber:fe.saleNumber}),V(fe),_(!0))},pe=async()=>{if(!(!F||S)){C(!0);try{const fe=F;if(fe.invoiceId){he.info("simpleSales.invoice.linkedSaleDetected",{saleId:fe.id,invoiceId:fe.invoiceId});const Re=t.find(pt=>pt.id===fe.invoiceId);if(Re){_(!1),V(null),W(Re),H(!0);return}}he.debug("simpleSales.invoice.buildInput.start",{saleCustomerName:fe.customerName,saleCustomerEmail:fe.customerEmail,totalCustomers:a.length});const He=fe.quantity&&fe.quantity>0?fe.quantity:1,lt=fe.productId?f.find(Re=>String(Re.id)===String(fe.productId)):f.find(Re=>Re.name.toLowerCase()===(fe.productName||"").toLowerCase()),Pe=fe.unitPrice&&fe.unitPrice>0?fe.unitPrice:lt?.unitPrice??0,rt=fe.amount&&fe.amount>0?fe.amount:Pe*He,je=Number.isFinite(rt)?rt:0,Me=He>0?je/He:Pe,Ye=(lt?.category||"").toLowerCase().trim(),dt=(lt?.name||fe.productName||"").toLowerCase().trim();he.debug("simpleSales.invoice.typeDetection",{productName:lt?.name||fe.productName,categoryRaw:lt?.category,categoryLower:Ye,productNameLower:dt});let mt="product";const yt=["hizmet","danmanlk","danismanlik","eitim","egitim","reklam","pazarlama"];if(yt.some(Re=>Ye.includes(Re))?(mt="service",he.debug("simpleSales.invoice.typeDetection.categoryMatch",{invoiceType:mt})):Ye.length===0?yt.some(Re=>dt.includes(Re))?(mt="service",he.debug("simpleSales.invoice.typeDetection.nameMatch")):he.debug("simpleSales.invoice.typeDetection.defaultProduct"):he.debug("simpleSales.invoice.typeDetection.categoryDefault"),he.info("simpleSales.invoice.typeDetection.result",{invoiceType:mt}),a.length===0){he.error("simpleSales.invoice.noCustomers"),alert(`Fatura oluturmak iin nce en az bir hesap eklemelisiniz.

"Hesaplar" sayfasndan yeni hesap ekleyebilirsiniz.`),_(!1),V(null);return}const Gt=fe.customerName?.toLowerCase().trim()||"",Lt=fe.customerEmail?.toLowerCase().trim()||"",Oe=a.find(Re=>{const pt=Re.name?.toLowerCase().trim()||"",Ot=Re.email?.toLowerCase().trim()||"";return pt===Gt||Ot===Lt||pt.includes(Gt)||Gt.includes(pt)});he.debug("simpleSales.invoice.customerMatch",{found:!!Oe,matchedCustomerId:Oe?.id});const ot=Oe||a[0];Oe||he.warn("simpleSales.invoice.customerFallback",{fallbackCustomerId:ot.id});const ht=lt?.taxRate??18,It=He>0?Me/(1+ht/100):Me,Tt=It*He,Mt={saleId:fe.id,customerId:String(ot.id),type:mt,issueDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],status:"sent",lineItems:[{productId:lt?.id,productName:lt?.name||fe.productName,description:lt?.name||fe.productName,quantity:He,unitPrice:It,total:Tt,taxRate:ht}],subtotal:Tt,taxAmount:je-Tt,total:je,notes:"Bu fatura "+(fe.saleNumber||"SAL-"+fe.id)+" numaral sattan oluturulmutur."};he.debug("simpleSales.invoice.payloadPrepared",{customerId:Mt.customerId,saleId:Mt.saleId,totalWithTax:je,unitPriceWithTax:Me,quantity:He});try{if(n){const Re=await n(Mt);if(Re&&Re.id){he.info("simpleSales.invoice.created",{invoiceId:Re.id,saleId:fe.id});const pt={...fe,invoiceId:Re.id},Ot=o.map(Se=>Se.id===fe.id?pt:Se);h&&h(Ot),he.debug("simpleSales.invoice.saleLinked",{saleId:fe.id,invoiceId:Re.id}),_(!1),V(null)}else he.error("simpleSales.invoice.missingId",{saleId:fe.id})}}catch(Re){he.error("simpleSales.invoice.createFailed",{saleId:fe.id,error:Re});return}}finally{C(!1)}}},Qe=()=>{_(!1),V(null),C(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(fs,{className:"w-8 h-8 text-green-600 mr-3"}),s("sidebar.sales")]}),e.jsx("p",{className:"text-gray-600",children:s("sales.subtitle")})]}),e.jsxs("button",{onClick:()=>{he.debug("simpleSales.modal.openNewSaleFromHeader"),j(null),b(!0)},className:"flex items-center gap-2 self-start rounded-lg bg-green-600 px-4 py-2 text-white transition-colors hover:bg-green-700",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:s("sales.newSale")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Bn,{className:"w-8 h-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:s("sales.totalSales")+Be}),e.jsx("p",{className:"text-xl font-bold text-green-700",children:Ce(jt)})]})]})}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(bn,{className:"w-8 h-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600",children:s("sales.totalSalesCount")}),e.jsx("p",{className:"text-xl font-bold text-blue-700",children:o.length})]})]})}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ds,{className:"w-8 h-8 text-purple-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600",children:s("sales.completed")}),e.jsx("p",{className:"text-xl font-bold text-purple-700",children:Ee})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s("sales.salesList")}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[o.length," ",s("sales.salesRegistered")]}),e.jsxs("button",{type:"button",onClick:oe,className:"inline-flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-green-700 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx(Cs,{className:"w-4 h-4"}),e.jsx("span",{children:s("sales.exportCsv",{defaultValue:"Export CSV"})})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-4",children:[e.jsxs("div",{className:"relative w-full md:flex-1",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:s("sales.search"),value:D,onChange:fe=>R(fe.target.value),className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("select",{value:L,onChange:fe=>Y(fe.target.value),className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 md:w-56",children:[e.jsx("option",{value:"all",children:c.language==="tr"?"Tm Durumlar":c.language==="en"?"All Statuses":c.language==="de"?"Alle Status":c.language==="fr"?"Tous les Statuts":"All Statuses"}),e.jsx("option",{value:"completed",children:zt(s,"completed")}),e.jsx("option",{value:"pending",children:zt(s,"pending")}),e.jsx("option",{value:"cancelled",children:zt(s,"cancelled")})]})]}),e.jsxs("div",{className:"grid w-full gap-2 sm:grid-cols-2 md:max-w-md",children:[e.jsx("input",{type:"date",value:X,onChange:fe=>ae(fe.target.value),placeholder:s("startDate"),className:"rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"}),e.jsx("input",{type:"date",value:$,onChange:fe=>Q(fe.target.value),placeholder:s("endDate"),className:"rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsx("div",{className:"flex w-full flex-wrap justify-start gap-2 sm:justify-end",children:e.jsx(ca,{listType:"sales",getState:()=>({searchTerm:D,statusFilter:L,startDate:X,endDate:$,sortBy:ie,sortDir:le,pageSize:ve}),applyState:fe=>{const He=fe||{};R(He.searchTerm??""),Y(He.statusFilter??"all"),ae(He.startDate??""),Q(He.endDate??""),He.sortBy&&se(He.sortBy),He.sortDir&&Ne(He.sortDir),He.pageSize&&Vu(He.pageSize)&&me(He.pageSize)},presets:[{id:"this-month",label:s("presets.thisMonth"),apply:()=>{const fe=new Date,He=new Date(fe.getFullYear(),fe.getMonth(),1).toISOString().slice(0,10),lt=new Date(fe.getFullYear(),fe.getMonth()+1,0).toISOString().slice(0,10);ae(He),Q(lt)}},{id:"completed",label:zt(s,"completed"),apply:()=>Y("completed")},{id:"pending",label:zt(s,"pending"),apply:()=>Y("pending")},{id:"cancelled",label:zt(s,"cancelled"),apply:()=>Y("cancelled")}]})})]})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:$e.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(fs,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s(D||L!=="all"?"sales.noSalesFound":"sales.noSales")}),e.jsx("p",{className:"text-gray-500 mb-4",children:s(D||L!=="all"?"sales.noSalesFoundDesc":"sales.noSalesDesc")}),!D&&L==="all"&&e.jsx("button",{onClick:()=>{he.debug("simpleSales.modal.openNewSaleFromEmptyState"),j(null),b(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:s("sales.createFirstSale")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto relative",children:e.jsxs("table",{className:"w-full text-sm table-auto lg:min-w-[1024px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>ue("saleNumber"),className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-full md:w-40",children:[s("sales.sale"),e.jsx(ze,{active:ie==="saleNumber"})]}),e.jsx("th",{className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-44",children:s("sales.table.sourceQuote",{defaultValue:"Kaynak Teklif"})}),e.jsxs("th",{onClick:()=>ue("customer"),className:"hidden md:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-56",children:[s("sales.customer"),e.jsx(ze,{active:ie==="customer"})]}),e.jsxs("th",{onClick:()=>ue("product"),className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-[320px]",children:[s("sales.productService"),e.jsx(ze,{active:ie==="product"})]}),e.jsxs("th",{onClick:()=>ue("amount"),className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-32",children:[s("sales.amount"),e.jsx(ze,{active:ie==="amount"})]}),e.jsxs("th",{onClick:()=>ue("status"),className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-40",children:[s("sales.status"),e.jsx(ze,{active:ie==="status"})]}),e.jsx("th",{className:"hidden xl:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-40",children:s("customer.historyColumns.createdBy")}),e.jsxs("th",{onClick:()=>ue("date"),className:"hidden lg:table-cell px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none w-32",children:[s("sales.date"),e.jsx(ze,{active:ie==="date"})]}),e.jsx("th",{className:"hidden md:table-cell px-4 md:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32 lg:w-44 min-w-[140px] lg:min-w-[176px] sticky right-0 bg-gray-50 z-10",children:s("sales.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ye.map(fe=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-4 md:px-6 py-4 align-top",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(fs,{className:"w-4 h-4 text-green-600"})}),e.jsx("div",{children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.jsx("button",{onClick:()=>ut(fe),className:"text-green-600 hover:text-green-800 font-medium transition-colors cursor-pointer",title:s("sales.viewSale"),children:fe.saleNumber||`SAL-${fe.id}`})})})]}),e.jsxs("div",{className:"mt-3 space-y-2 text-xs text-gray-600 md:hidden",children:[fe?.sourceQuoteId&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("sales.table.sourceQuote",{defaultValue:"Kaynak Teklif"}),":"]}),e.jsx("button",{type:"button",className:"text-indigo-600 hover:text-indigo-800",onClick:()=>{try{window.location.hash=`quotes-edit:${String(fe.sourceQuoteId)}`}catch{}},title:s("quotes.editModal.title",{defaultValue:"Teklifi Dzenle"}),children:fe?.sourceQuoteNumber||m.get(String(fe.sourceQuoteId))||s("common.open",{defaultValue:"A"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("sales.customer"),":"]}),e.jsx("span",{className:"text-gray-900",children:fe.customerName})]}),fe.items&&fe.items.length>0?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("sales.productService"),":"]}),e.jsx("span",{className:"text-gray-900",children:fe.items[0].productName})]}):e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("sales.productService"),":"]}),e.jsx("span",{className:"text-gray-900",children:fe.productName})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("sales.amount"),":"]}),e.jsx("span",{className:"text-gray-900 font-semibold",children:Ce(Pc(fe))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 font-medium",children:[s("sales.status"),":"]}),tt(fe.status)]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Vr,{className:"w-3 h-3"}),e.jsx("span",{children:it(fe.date)}),fe.paymentMethod&&e.jsxs("span",{className:"text-gray-500",children:[" ",xt(fe.paymentMethod)]})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 md:hidden",children:[e.jsx("button",{onClick:()=>ut(fe),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("sales.viewSale"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ge(fe),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("sales.editSale"),children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>i?.(fe),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("sales.download"),children:e.jsx(Cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>wt(fe),className:`inline-flex items-center justify-center w-9 h-9 rounded transition-colors ${t.some(He=>He.saleId&&String(He.saleId)===String(fe.id)||fe.invoiceId&&String(fe.invoiceId)===String(He.id))?"text-blue-600 hover:text-blue-700 hover:bg-blue-50 bg-blue-50":"text-gray-400 hover:text-blue-600 hover:bg-blue-50"}`,title:t.some(He=>He.saleId&&String(He.saleId)===String(fe.id)||fe.invoiceId&&String(fe.invoiceId)===String(He.id))?s("sales.viewSale"):s("sales.createInvoice"),children:e.jsx(Fr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>at(fe.id),className:"inline-flex items-center justify-center w-9 h-9 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:s("sales.deleteSale"),children:e.jsx(Xr,{className:"w-4 h-4"})})]})]}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:fe?.sourceQuoteId?e.jsx("button",{type:"button",className:"text-indigo-600 hover:text-indigo-800",onClick:()=>{try{window.location.hash=`quotes-edit:${String(fe.sourceQuoteId)}`}catch{}},title:s("quotes.editModal.title",{defaultValue:"Teklifi Dzenle"}),children:fe?.sourceQuoteNumber||m.get(String(fe.sourceQuoteId))||s("common.open",{defaultValue:"A"})}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"hidden md:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:fe.customerName}),fe.customerEmail&&e.jsx("div",{className:"text-xs text-gray-500 hidden lg:block",children:fe.customerEmail})]})}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:fe.items&&fe.items.length>0?e.jsx("div",{children:e.jsxs("div",{className:"text-sm text-gray-900 truncate max-w-[260px]",title:fe.items[0].productName,children:[fe.items[0].productName,fe.items.length>1&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded whitespace-nowrap",children:["+",fe.items.length-1," rn"]})]})}):e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900 truncate max-w-[260px]",title:fe.productName,children:fe.productName}),fe.quantity&&fe.unitPrice&&e.jsxs("div",{className:"text-xs text-gray-500",children:[fe.quantity," x ",Ce(fe.unitPrice)]})]})}),e.jsx("td",{className:"px-4 md:px-6 py-4 text-left md:text-right whitespace-normal md:whitespace-nowrap",children:z?.saleId===fe.id&&z?.field==="amount"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:U,onChange:He=>te(He.target.value),className:"w-24 text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-green-500",min:"0",step:"0.01"}),e.jsx("button",{onClick:()=>we(fe),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:st,className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(Nr,{className:"w-4 h-4"})})]}):e.jsx("span",{onClick:()=>kt(fe.id,"amount",fe.amount),className:"text-sm font-semibold text-green-600 cursor-pointer hover:bg-green-50 rounded p-1 transition-colors",title:"Tutar dzenlemek iin tklayn",children:Ce(Pc(fe))})}),e.jsx("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap",children:z?.saleId===fe.id&&z?.field==="status"?e.jsxs("div",{className:"flex items-center space-x-2 flex-nowrap z-10",children:[e.jsxs("select",{value:U,onChange:He=>te(He.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-green-500 w-[120px] max-w-[120px]",children:[e.jsx("option",{value:"completed",children:zt(s,"completed")}),e.jsx("option",{value:"pending",children:zt(s,"pending")}),e.jsx("option",{value:"cancelled",children:zt(s,"cancelled")})]}),e.jsx("button",{onClick:()=>we(fe),className:"inline-flex items-center justify-center w-7 h-7 rounded-md hover:bg-green-50 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-green-500","aria-label":s("common.save"),children:e.jsx(cs,{className:"w-4 h-4 shrink-0 text-green-600"})}),e.jsx("button",{onClick:st,className:"inline-flex items-center justify-center w-7 h-7 rounded-md hover:bg-red-50 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-red-500","aria-label":s("common.cancel"),children:e.jsx(Nr,{className:"w-4 h-4 shrink-0 text-red-600"})})]}):e.jsx("div",{onClick:()=>kt(fe.id,"status",fe.status),className:"cursor-pointer hover:opacity-80 transition-opacity inline-block",title:s("sales.editSale"),children:tt(fe.status)})}),e.jsx("td",{className:"hidden xl:table-cell px-4 md:px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:fe.createdByName||""}),e.jsxs("td",{className:"hidden lg:table-cell px-4 md:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vr,{className:"w-3 h-3 mr-1"}),it(fe.date)]}),fe.paymentMethod&&e.jsx("div",{className:"text-xs text-gray-400",children:xt(fe.paymentMethod)})]}),e.jsx("td",{className:"hidden md:table-cell px-4 md:px-6 py-4 whitespace-nowrap text-right text-sm font-medium sticky right-0 bg-white z-10 min-w-[140px] lg:min-w-[176px]",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>ut(fe),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("sales.viewSale"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ge(fe),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("sales.editSale"),children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>i?.(fe),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:s("sales.download"),children:e.jsx(Cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>wt(fe),className:`inline-flex items-center justify-center w-8 h-8 rounded transition-colors ${t.some(He=>He.saleId&&String(He.saleId)===String(fe.id)||fe.invoiceId&&String(fe.invoiceId)===String(He.id))?"text-blue-600 hover:text-blue-700 hover:bg-blue-50 bg-blue-50":"text-gray-400 hover:text-blue-600 hover:bg-blue-50"}`,title:t.some(He=>He.saleId&&String(He.saleId)===String(fe.id)||fe.invoiceId&&String(fe.invoiceId)===String(He.id))?s("sales.viewSale"):s("sales.createInvoice"),children:e.jsx(Fr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>at(fe.id),className:"inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:s("sales.deleteSale"),children:e.jsx(Xr,{className:"w-4 h-4"})})]})})]},`${fe.id}-${fe.saleNumber||""}`))})]})}),e.jsx("div",{className:"p-3 border-t border-gray-200 bg-white",children:e.jsx(Rs,{page:Z,pageSize:ve,total:$e.length,onPageChange:ce,onPageSizeChange:me})})]})})]}),e.jsx(Mv,{isOpen:x,onClose:()=>{he.debug("simpleSales.modal.closeSaleModal"),b(!1),j(null)},onSave:k?Le:Ie,sale:k,customers:a||[],products:f}),e.jsx(cg,{isOpen:p,onClose:()=>{v(!1),A(null)},sale:P,onEdit:fe=>{v(!1),Ge(fe)},onDelete:fe=>at(fe),onDownload:i}),y&&B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[e.jsx("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx($s,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s("sales.saleCompleted")}),e.jsx("p",{className:"text-sm text-gray-500",children:s("sales.createInvoiceQuestion")})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:s("sales.saleSummary")}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[s("sales.customer"),":"]}),e.jsx("span",{className:"font-medium",children:B.customerName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[s("sales.productService"),":"]}),e.jsx("span",{className:"font-medium",children:B.productName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:[s("sales.amount"),":"]}),e.jsx("span",{className:"font-bold text-green-600",children:Ce(B.total||0)})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Fr,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:s("sales.createInvoiceQuestion")}),e.jsx("p",{className:"text-xs text-blue-600",children:s("sales.invoiceWillBeDownloaded")})]})]})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:()=>Ue(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:s("sales.recordOnlySale",{defaultValue:"Only Sale"})}),e.jsxs("button",{onClick:()=>Ue(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center space-x-2",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:s("sales.recordSaleWithInvoice",{defaultValue:"Sale with Invoice"})})]})]})]})}),e.jsx(lg,{isOpen:O,onClose:()=>{H(!1),W(null)},invoice:q,onEdit:fe=>{H(!1),W(null),W(null),l&&l(fe)},onDownload:fe=>{Mr(async()=>{const{generateInvoicePDF:He}=await import("./pdfGenerator--172hwWR.js").then(lt=>lt.p);return{generateInvoicePDF:He}},[]).then(({generateInvoicePDF:He})=>{const lt={...fe,customerName:fe.customer?.name||fe.customerName||"Hesap Yok",customerEmail:fe.customer?.email||fe.customerEmail||"",customerAddress:fe.customer?.address||fe.customerAddress||""};He(lt)})}}),T&&F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Fr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s("sales.createInvoice")}),e.jsx("p",{className:"text-sm text-gray-500",children:s("sales.createInvoiceQuestion")})]})]}),e.jsx("button",{onClick:Qe,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nr,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(fs,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-2",children:s("sales.saleSummary")}),e.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:[e.jsxs("strong",{children:[s("sales.customer"),":"]})," ",F.customerName]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:[e.jsxs("strong",{children:[s("sales.productService"),":"]})," ",F.productName]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsxs("strong",{children:[s("sales.amount"),":"]})," ",Ce(F.amount)]})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Fr,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:s("sales.confirmInvoiceCreation")}),e.jsx("p",{className:"text-xs text-blue-600",children:s("sales.invoiceWillOpen")})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:Qe,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:S,children:s("common.cancel")}),e.jsx("button",{onClick:pe,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx(rm,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:s("sales.creatingInvoice",{defaultValue:"Creating..."})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:s("sales.confirmInvoiceAction",{defaultValue:"Yes, Create"})})]})})]})]})})]})}const tw=(...a)=>{for(const o of a)if(typeof o=="number"&&Number.isFinite(o))return o},zD=a=>{if(!a)return[];try{const o=JSON.parse(a);return Array.isArray(o)?o.map(t=>{if(!t||typeof t!="object")return null;const f=t,h=typeof f.id=="string"?f.id:void 0,d=typeof f.name=="string"?f.name:void 0,n=typeof f.html=="string"?f.html:void 0;return!h||!d||!n?null:{id:h,name:d,html:n}}).filter(t=>!!t):[]}catch(o){return he.warn("[QuoteCreateModal] Failed to parse quote templates",o),[]}},LD=()=>{try{const a=en(),o=a?`companyProfile_${a}`:"companyProfile",t=Et.getItem(o)||Et.getItem(`${o}_plain`)||Et.getItem("company");if(!t)return{};const f=JSON.parse(t);return{name:typeof f.name=="string"?f.name:void 0,email:typeof f.email=="string"?f.email:void 0,phone:typeof f.phone=="string"?f.phone:void 0,address:typeof f.address=="string"?f.address:void 0}}catch(a){return he.warn("[QuoteCreateModal] Failed to load organization profile",a),{}}},OD=a=>a?{company:a.company,name:a.name,email:a.email,address:a.address}:{},Ly=(a,o,t,f,h)=>({quote:{date:o,validUntil:t,total:f,currency:h},org:LD(),client:OD(a)}),Oy=(a,o)=>tw(a.unitPrice,a.price,o)??0,Wf=a=>{if(a)return tw(a.stock,a.stockQuantity)},Yf=(a,o)=>new Date(a.getTime()+o*864e5),yu=a=>a.toISOString().slice(0,10),rw=({isOpen:a,onClose:o,customers:t,products:f,defaultCurrency:h,onCreate:d,onOpenTemplatesManager:n,enableTemplates:l})=>{const{t:i}=$t(),{formatCurrency:r,currency:s}=Jr(),[c,u]=G.useState(()=>{const U=new Date;return{currency:h??s??"TRY",issueDate:yu(U),validUntil:yu(Yf(U,30)),validityDays:30}}),[m,x]=G.useState([{id:"1",description:"",quantity:1,unitPrice:0,total:0}]),[b,p]=G.useState(""),[v,y]=G.useState(!1),[N,T]=G.useState(null),[_,O]=G.useState(null),[H,F]=G.useState(""),V=_t.useRef(null),[q,W]=G.useState(!1),[B,E]=G.useState([]),[P,A]=G.useState(""),[k,j]=G.useState(null),S=G.useMemo(()=>{const U=b.trim().toLowerCase();return t.filter(te=>{const ie=(te.name||"").toLowerCase(),se=(te.company||"").toLowerCase();return U?ie.includes(U)||se.includes(U):!0})},[t,b]),C=U=>{const te=U.trim().toLowerCase();return f.filter(ie=>!te||ie.name.toLowerCase().includes(te)||(ie.sku||"").toLowerCase().includes(te)||(ie.category||"").toLowerCase().includes(te)).slice(0,12)},D=()=>{const U={id:Date.now().toString(),description:"",quantity:1,unitPrice:0,total:0};x(te=>[...te,U])},R=U=>{x(te=>te.length===1?te:te.filter(ie=>ie.id!==U)),O(te=>te===U?null:te)},L=(U,te,ie)=>{x(se=>se.map(le=>{if(le.id!==U)return le;const Ne={...le,[te]:ie};if(te==="quantity"||te==="unitPrice"){const ke=Number(te==="quantity"?ie:Ne.quantity)||0,Z=Number(te==="unitPrice"?ie:Ne.unitPrice)||0;Ne.total=ke*Z}return Ne}))},Y=G.useMemo(()=>m.reduce((U,te)=>U+(Number(te.total)||0),0),[m]);_t.useEffect(()=>{if(a)try{const U=en(),te=U?`quote_templates_${U}`:"quote_templates",ie=Et.getItem(te);E(zD(ie))}catch(U){he.warn("[QuoteCreateModal] Failed to read templates from storage",U),E([])}},[a]);const X=async()=>{if(!P)return;const U=B.find(te=>te.id===P);if(U)try{const{fillTemplate:te}=await Mr(async()=>{const{fillTemplate:le}=await Promise.resolve().then(()=>By);return{fillTemplate:le}},void 0),ie=Ly(N,c.issueDate,c.validUntil,Y,c.currency),se=te(U.html,ie);F(se),W(!1)}catch(te){he.warn("[QuoteCreateModal] Failed to apply template",te)}};_t.useEffect(()=>{(async()=>{if(!l||!P||!a||q)return;const U=B.find(te=>te.id===P);if(U)try{const{fillTemplate:te}=await Mr(async()=>{const{fillTemplate:le}=await Promise.resolve().then(()=>By);return{fillTemplate:le}},void 0),ie=Ly(N,c.issueDate,c.validUntil,Y,c.currency),se=te(U.html,ie);F(se)}catch(te){he.warn("[QuoteCreateModal] Failed to refresh template preview",te)}})()},[P,N,c.issueDate,c.validUntil,Y,c.currency,a,l]);const[ae,$]=G.useState(null);if(!a)return null;const Q=U=>{T(U),p(U.name),y(!1)},z=(U,te)=>{x(le=>le.map(Ne=>{if(Ne.id!==U)return Ne;const ke=Ne.quantity>0?Ne.quantity:1,Z=Oy(te,Ne.unitPrice);return{...Ne,productId:String(te.id),description:te.name,unit:te.unit,unitPrice:Z,quantity:ke,total:ke*Z}})),O(null);const ie=m.find(le=>le.id===U)?.quantity||1,se=Wf(te);typeof se=="number"&&ie>se&&j({itemId:U,product:te,requested:ie,available:se})},M=()=>{if(N&&!(m.length===0||m.every(U=>!U.description||(Number(U.total)||0)<=0))){for(const U of m){const te=U.productId;let ie;if(te&&(ie=f.find(se=>String(se.id)===String(te))),!ie&&U.description){const se=String(U.description).trim().toLowerCase();ie=f.find(le=>String(le.name||"").trim().toLowerCase()===se)||f.find(le=>String(le.name||"").toLowerCase().includes(se))}if(ie){const se=Wf(ie),le=Number(U.quantity)||0;if(typeof se=="number"&&le>se){j({itemId:String(U.id),product:ie,requested:le,available:se});return}}}$({title:i("common.confirm",{defaultValue:"Onay"}),message:i("quotes.createConfirm",{defaultValue:"Teklifi kaydetmek istediinize emin misiniz?"}),onConfirm:()=>{d({customer:N,issueDate:c.issueDate,validUntil:c.validUntil,currency:c.currency,items:m,total:Y,scopeOfWorkHtml:H}),$(null)}})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 h-full w-full flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i("quotes.createModal.title")})}),e.jsxs("div",{className:"px-6 py-4 space-y-4 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("invoices.customerName")}),e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:b,onChange:U=>{p(U.target.value),T(null),y(U.target.value.length>0)},onFocus:()=>y(!0),className:"w-full pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:i("invoices.customerSearchPlaceholder")}),N&&e.jsx(cs,{className:"absolute right-2 top-1/2 -translate-y-1/2 text-indigo-600 w-4 h-4"})]}),v&&S.length>0&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-56 overflow-y-auto",children:[e.jsxs("div",{className:"p-2 text-xs text-gray-500 border-b",children:[S.length," hesap bulundu"]}),S.map(U=>e.jsxs("button",{type:"button",onMouseDown:te=>te.preventDefault(),onClick:()=>Q(U),className:"w-full p-3 text-left hover:bg-indigo-50 border-b last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),U.company&&e.jsx("div",{className:"text-xs text-gray-600",children:U.company}),e.jsx("div",{className:"text-xs text-gray-500",children:U.email})]},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("quotes.createModal.currency")}),e.jsxs("select",{value:c.currency,onChange:U=>u(te=>({...te,currency:U.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("quotes.createModal.date")}),e.jsx("input",{type:"date",value:c.issueDate,onChange:U=>u(te=>({...te,issueDate:U.target.value,validUntil:yu(Yf(new Date(U.target.value),te.validityDays||30))})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("quotes.validUntil")}),e.jsx("input",{type:"date",value:c.validUntil,onChange:U=>u(te=>({...te,validUntil:U.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("quotes.validityDays",{defaultValue:"Geerlilik (gn)"})}),e.jsx("input",{type:"number",min:1,value:c.validityDays,onChange:U=>u(te=>{const ie=Math.max(1,parseInt(U.target.value||"1",10));return{...te,validityDays:ie,validUntil:yu(Yf(new Date(te.issueDate),ie))}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:i("invoices.productsAndServices")}),e.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:i("invoices.addLine")})]})]}),e.jsx("div",{className:"overflow-x-auto",style:{overflow:"visible"},children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg table-fixed",style:{position:"relative"},children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700",style:{width:"44%"},children:i("invoices.description")}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700",style:{width:"12%"},children:i("invoices.quantity")}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700",style:{width:"18%"},children:i("invoices.unitPriceExclVAT",{defaultValue:"Birim Fiyat (KDV Hari)"})}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700",style:{width:"18%"},children:i("common.totalExclVAT",{defaultValue:"Toplam (KDV Hari)"})}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-700",style:{width:"8%"},children:i("invoices.actions")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",style:{position:"relative"},children:m.map(U=>{const te=C(U.description);return e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-2",style:{position:"static"},children:[e.jsxs("div",{className:"relative",style:{position:"static"},children:[e.jsx("input",{type:"text",value:U.description,onChange:ie=>{L(U.id,"description",ie.target.value),ie.target.value.length>0&&O(U.id)},onClick:()=>{U.description.length>0&&O(U.id)},onBlur:()=>setTimeout(()=>O(ie=>ie===U.id?null:ie),200),className:"w-full px-3 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:i("invoices.productServiceDescription")}),_===U.id&&te.length>0&&e.jsxs("div",{className:"absolute z-[100] mt-1 w-[450px] left-0 rounded-lg border-2 border-gray-300 bg-white shadow-2xl max-h-[400px] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-indigo-50 p-2 text-xs font-medium text-indigo-700 border-b border-indigo-200",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(Os,{className:"w-3 h-3 mr-1"}),te.length," rn bulundu"]})}),te.map(ie=>e.jsxs("button",{type:"button",onMouseDown:se=>se.preventDefault(),onClick:()=>z(U.id,ie),className:"w-full p-3 text-left hover:bg-indigo-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-0.5",children:ie.name}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[ie.sku&&e.jsxs("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded",children:["SKU: ",ie.sku]}),e.jsx("span",{className:"font-medium text-green-600",children:Oy(ie,0).toLocaleString("tr-TR",{minimumFractionDigits:2})})]})]},`${U.id}-${ie.id}`))]})]}),U.unit&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Birim: ",U.unit]})]}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:U.quantity,onChange:ie=>{const se=parseInt(ie.target.value,10)||1;L(U.id,"quantity",se);const le=m.find(Ne=>Ne.id===U.id);if(le?.productId){const Ne=f.find(ke=>String(ke.id)===String(le.productId));if(Ne){const ke=Wf(Ne);typeof ke=="number"&&se>ke&&j({itemId:U.id,product:Ne,requested:se,available:ke})}}},className:"w-20 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",min:1,step:1})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("input",{type:"number",value:U.unitPrice,onChange:ie=>L(U.id,"unitPrice",parseFloat(ie.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",min:0,step:.01})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"font-medium text-gray-900",children:(U.total||0).toLocaleString("tr-TR",{minimumFractionDigits:2})})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("button",{onClick:()=>R(U.id),disabled:m.length===1,className:"p-1 text-red-600 hover:bg-red-50 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Xr,{className:"w-4 h-4"})})})]},U.id)})})]})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 flex justify-end",children:e.jsxs("div",{className:"w-64 flex justify-between text-lg font-semibold",children:[e.jsxs("span",{children:[i("invoices.grandTotalExclVAT",{defaultValue:"Genel Toplam (KDV Hari)"}),":"]}),e.jsx("span",{children:r(Y,c.currency)})]})}),e.jsxs("div",{className:"mt-4",ref:V,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("quotes.scopeOfWork.title",{defaultValue:"in Kapsam"})}),l&&B.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("select",{value:P,onChange:U=>A(U.target.value),className:"px-2 py-1 border rounded text-sm",children:[e.jsx("option",{value:"",children:i("quotes.templates.selectPlaceholder",{defaultValue:"ablon sein"})}),B.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]}),e.jsx("button",{onClick:X,disabled:!P,className:"px-2.5 py-1.5 text-xs rounded bg-indigo-600 text-white disabled:opacity-50",children:i("quotes.templates.apply",{defaultValue:"Uygula"})}),e.jsx("button",{onClick:n,className:"px-2.5 py-1.5 text-xs rounded border",children:i("quotes.templates.manage",{defaultValue:"ablonlar Ynet"})})]}),l&&B.length===0&&e.jsx("div",{className:"mb-2",children:e.jsx("button",{onClick:n,className:"px-2.5 py-1.5 text-xs rounded border",children:i("quotes.templates.create",{defaultValue:"ablon Olutur"})})}),e.jsx(dg,{value:H,onChange:U=>{F(U),W(!0)},placeholder:i("quotes.scopeOfWork.placeholder",{defaultValue:"Proje kapsam, teslimatlar, varsaymlar ve hariler..."}),height:240}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i("quotes.scopeOfWork.note",{defaultValue:"Bu ierik teklif PDFinde mevcut blmden sonra yeni bir sayfa olarak eklenecek ve genel linkte grnecek."})})]})]}),e.jsxs("div",{className:"px-6 py-3 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:i("common.cancel")}),e.jsx("button",{onClick:M,disabled:!N||Y<=0,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i("quotes.createModal.create")})]})]})}),k&&e.jsx(Em,{isOpen:!0,product:k.product,requested:k.requested,available:k.available,onAdjust:()=>{x(U=>U.map(te=>te.id===k.itemId?{...te,quantity:k.available,total:k.available*(Number(te.unitPrice)||0)}:te))},onClose:()=>j(null)}),ae&&e.jsx(ui,{isOpen:!0,title:ae.title,message:ae.message,confirmText:i("common.yes",{defaultValue:"Evet"}),cancelText:i("common.no",{defaultValue:"Hayr"}),onConfirm:ae.onConfirm,onCancel:()=>$(null)})]})},sw=a=>a?`quote_templates_${a}`:"quote_templates",Fy=2e5,FD=a=>{if(typeof a!="object"||a===null)return!1;const o=Object.getPrototypeOf(a);return o===null||o===Object.prototype},Li=(a,o="")=>typeof a=="string"?a:o,nw=a=>a.length>Fy?a.slice(0,Fy):a,BD=a=>{if(!FD(a))return null;const o=Li(a.id).trim();if(!o)return null;const t=Li(a.name).trim()||"ablon",f=nw(Li(a.html)),h=Li(a.createdAt)||new Date().toISOString(),d=Li(a.updatedAt)||h,n=typeof a.isDefault=="boolean"?a.isDefault:void 0;return{id:o,name:t,html:f,createdAt:h,updatedAt:d,isDefault:n}},UD=a=>{if(!a)return[];try{const o=JSON.parse(a);return Array.isArray(o)?o.map(BD).filter(t=>!!t):[]}catch(o){return he.warn("[quoteTemplates] Failed to parse cache",o),[]}},hg=(a,o)=>{try{Et.setItem(sw(a),JSON.stringify(o))}catch(t){he.warn("[quoteTemplates] Failed to persist templates",t)}},VD=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`tpl_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,qD=a=>{const o=new Date().toISOString();return{id:Li(a.id).trim()||VD(),name:Li(a.name).trim()||"ablon",html:nw(Li(a.html)),isDefault:!!a.isDefault,createdAt:a.createdAt||o,updatedAt:o}},li=a=>{try{const o=Et.getItem(sw(a));return UD(o)}catch(o){return he.warn("[quoteTemplates] Unable to access localStorage",o),[]}},aw=(a,o)=>{const t=li(a),f=qD(o),h=t.findIndex(d=>d.id===f.id);return h>=0?t[h]={...t[h],...f}:t.push(f),f.isDefault&&t.forEach(d=>{d.id!==f.id&&(d.isDefault=!1)}),hg(a,t),f},iw=(a,o)=>{const t=li(a).filter(f=>f.id!==o);hg(a,t)},ow=(a,o)=>{const t=li(a).map(f=>({...f,isDefault:f.id===o}));hg(a,t)},lw=a=>li(a).find(o=>o.isDefault),fg=["[quote.number]","[quote.date]","[quote.valid_until]","[quote.total]","[quote.currency]","[org.name]","[org.email]","[org.phone]","[org.address]","[client.company]","[client.name]","[client.email]","[client.address]"],$D=(a,o)=>{const t={"[quote.number]":o.quote?.number,"[quote.date]":o.quote?.date,"[quote.valid_until]":o.quote?.validUntil,"[quote.total]":typeof o.quote?.total=="number"?String(o.quote?.total):o.quote?.total??void 0,"[quote.currency]":o.quote?.currency,"[org.name]":o.org?.name,"[org.email]":o.org?.email,"[org.phone]":o.org?.phone,"[org.address]":o.org?.address,"[client.company]":o.client?.company,"[client.name]":o.client?.name,"[client.email]":o.client?.email,"[client.address]":o.client?.address};let f=a;for(const h of fg){const d=t[h];if(typeof d=="string"&&d.length>0){const n=new RegExp(h.replace(/\[|\]|\./g,l=>`\\${l}`),"g");f=f.replace(n,d)}}return f},By=Object.freeze(Object.defineProperty({__proto__:null,availableTokens:fg,deleteTemplate:iw,fillTemplate:$D,getDefaultTemplate:lw,listTemplates:li,setDefaultTemplate:ow,upsertTemplate:aw},Symbol.toStringTag,{value:"Module"})),HD=a=>{const o=String(a||"").toLowerCase();return o==="pro"||o==="professional"?"pro":o==="enterprise"||o==="business"?"business":"free"},KD=({isOpen:a,onClose:o,planRaw:t})=>{const{t:f}=$t(),{tenant:h}=Gs(),d=h?.id||en()||void 0,n=HD(t||h?.subscriptionPlan),[l,i]=G.useState([]),[r,s]=G.useState(null),[c,u]=G.useState(""),[m,x]=G.useState(""),b=n!=="free",p=n==="pro"?1:1/0,v=l.length>=p;G.useEffect(()=>{if(a)try{const H=li(d||void 0);i(H),s(H.find(F=>F.isDefault)||H[0]||null),H.length?(u(H[0].name),x(H[0].html)):(u(""),x(""))}catch{}},[a,d]);const y=H=>{const F=l.find(V=>V.id===H)||null;s(F),u(F?.name||""),x(F?.html||"")},N=()=>{s(null),u(f("quotes.templates.newTemplate",{defaultValue:"Yeni ablon"})),x(f("quotes.templates.defaultBodyHtml",{defaultValue:""}))},T=()=>{if(!c.trim())return;const H=r?.id||Math.random().toString(36).slice(2),F=aw(d||void 0,{id:H,name:c.trim(),html:m,isDefault:r?.isDefault}),V=li(d||void 0);i(V),s(V.find(q=>q.id===F.id)||F)},_=()=>{if(!r)return;iw(d||void 0,r.id);const H=li(d||void 0);i(H);const F=H.find(V=>V.isDefault)||H[0]||null;s(F),u(F?.name||""),x(F?.html||"")},O=()=>{if(!r)return;ow(d||void 0,r.id);const H=li(d||void 0);i(H);const F=lw(d||void 0);F&&y(F.id)};return a?e.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl h-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"px-5 py-3 border-b flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:f("quotes.templates.title",{defaultValue:"Teklif ablonlar"})}),e.jsx("button",{onClick:o,className:"px-3 py-1.5 border rounded-md",children:f("common.close")})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"w-full lg:w-64 border-b lg:border-b-0 lg:border-r overflow-y-auto",children:[e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700",children:f("quotes.templates.list",{defaultValue:"ablonlar"})}),e.jsxs("button",{className:"text-xs px-2 py-1 rounded-md bg-indigo-600 text-white disabled:opacity-50",onClick:N,disabled:!b||v,title:b?v?f("quotes.templates.proLimit",{defaultValue:"Pro planda en fazla 1 ablon"}):f("quotes.templates.newTemplate",{defaultValue:"Yeni ablon"}):f("quotes.templates.requirePlan",{defaultValue:"Plan gerekli"}),children:[e.jsx(Ks,{className:"w-4 h-4 inline"})," ",f("quotes.templates.new",{defaultValue:"Yeni"})]})]}),!b&&e.jsx("div",{className:"mx-3 mb-3 p-2 text-[11px] text-amber-800 bg-amber-50 rounded border border-amber-200",children:f("quotes.templates.freeHidden",{defaultValue:"ablonlar Starter planda grnmez."})}),n==="pro"&&e.jsx("div",{className:"mx-3 mb-2 text-[11px] text-gray-500",children:f("quotes.templates.proLimit",{defaultValue:"Pro planda en fazla 1 ablon kaydedebilirsiniz."})}),e.jsx("ul",{children:l.map(H=>e.jsx("li",{children:e.jsx("button",{className:`w-full text-left px-3 py-2 border-b text-sm ${r?.id===H.id?"bg-indigo-50":""}`,onClick:()=>y(H.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"truncate",children:H.name}),H.isDefault?e.jsx(Kc,{className:"w-4 h-4 text-amber-500"}):null]})})},H.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:b?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 lg:flex-row lg:flex-wrap lg:items-center",children:[e.jsx("input",{type:"text",value:c,onChange:H=>u(H.target.value),placeholder:f("quotes.templates.placeholderName",{defaultValue:"ablon ad"}),className:"px-3 py-2 border rounded-md w-72"}),e.jsxs("button",{onClick:T,className:"px-3 py-2 bg-indigo-600 text-white rounded-md flex items-center gap-1",children:[e.jsx(Qp,{className:"w-4 h-4"}),f("common.save")]}),e.jsxs("button",{onClick:_,disabled:!r,className:"px-3 py-2 bg-red-600 text-white rounded-md disabled:opacity-50 flex items-center gap-1",children:[e.jsx(Xr,{className:"w-4 h-4"}),f("common.delete")]}),e.jsxs("button",{onClick:O,disabled:!r,className:"px-3 py-2 bg-amber-500 text-white rounded-md disabled:opacity-50 flex items-center gap-1",children:[r?.isDefault?e.jsx(IA,{className:"w-4 h-4"}):e.jsx(Kc,{className:"w-4 h-4"})," ",f("quotes.templates.setDefault",{defaultValue:"Varsaylan"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:f("quotes.templates.availableTokens",{defaultValue:"Kullanlabilir alanlar (tkla ve ierie ekle):"})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:fg.map(H=>e.jsx("button",{type:"button",onClick:()=>x(F=>(F||"")+(F?" ":"")+H),className:"px-2 py-1 text-xs border rounded bg-white hover:bg-gray-50",children:H},H))}),e.jsx(dg,{value:m,onChange:x,height:260})]})]}):e.jsx("div",{className:"text-sm text-gray-600",children:f("quotes.templates.manageUpgrade",{defaultValue:"ablon ynetimi iin Pro veya Business planna gein."})})})]})]})}):null},GD=()=>crypto?.randomUUID?.()??Math.random().toString(36).slice(2),WD=a=>({id:a.id??GD(),description:a.description,quantity:a.quantity,unitPrice:a.unitPrice,total:a.total,productId:a.productId,unit:a.unit}),YD=a=>({id:a.id,description:a.description,quantity:a.quantity,unitPrice:a.unitPrice,total:a.total,productId:a.productId,unit:a.unit}),bu=a=>({id:String(a.id),publicId:a.publicId,quoteNumber:a.quoteNumber,customerName:a.customer?.name||a.customerName||"",customerId:a.customerId,opportunityId:a.opportunityId,issueDate:String(a.issueDate).slice(0,10),validUntil:a.validUntil?String(a.validUntil).slice(0,10):void 0,currency:a.currency,total:Number(a.total)||0,status:Kr(String(a.status)),version:a.version||1,scopeOfWorkHtml:a.scopeOfWorkHtml||"",items:Array.isArray(a.items)?a.items.map(WD):[],revisions:Array.isArray(a.revisions)?a.revisions:[],convertedToSale:a.convertedToSale,createdAt:a.createdAt||a.created_at||void 0,updatedAt:a.updatedAt||a.updated_at||void 0,createdByName:a.createdByName,updatedByName:a.updatedByName}),Qf=({customers:a=[],products:o=[],initialOpenQuoteId:t,initialOpenMode:f="view"})=>{const{t:h}=$t(),{formatCurrency:d,currency:n}=Jr(),{tenant:l,user:i}=Gs(),r=String(l?.subscriptionPlan||"").toLowerCase(),[s,c]=G.useState(""),[u,m]=G.useState("all"),[x,b]=G.useState(""),[p,v]=G.useState(""),[y,N]=G.useState("date"),[T,_]=G.useState("desc"),[O,H]=G.useState(!1),[F,V]=G.useState(!1),[q,W]=G.useState(null),[B,E]=G.useState(!1),[P,A]=G.useState(!1),[k,j]=G.useState(null),[S,C]=G.useState(null),[D,R]=G.useState(null),[L,Y]=G.useState(1),[X,ae]=G.useState(()=>{const we=Et.getItem("quotes_pageSize"),st=we?Number(we):20;return[20,50,100].includes(st)?st:20}),[$,Q]=G.useState(null),[z,M]=G.useState(null),[U,te]=G.useState(""),{getDefault:ie}=qi({listType:"quotes"});G.useEffect(()=>{try{const we=ie();if(!we?.state)return;const st=we.state;c(st.searchTerm??""),m(st.statusFilter??"all"),b(st.startDate??""),v(st.endDate??""),st.sortBy&&N(st.sortBy),st.sortDir&&_(st.sortDir),st.pageSize&&[20,50,100].includes(st.pageSize)&&(ae(st.pageSize),Et.setItem("quotes_pageSize",String(st.pageSize)))}catch{}},[ie]);const se=(we,st)=>new Date(we.getTime()+st*864e5),le=we=>we.toISOString().slice(0,10),[Ne,ke]=G.useState([]),[Z,ce]=G.useState(!0),[ve,De]=G.useState(!1);G.useEffect(()=>{let we=!1;return(async()=>{try{ce(!0);const wt=await Xv();if(we)return;const pe=Array.isArray(wt)?wt.map(bu):[];ke(pe)}catch(wt){console.error("Quotes yklenemedi:",wt),ke([])}finally{we||ce(!1)}})(),()=>{we=!0}},[]),G.useEffect(()=>{if(ve)return;const we=String(t||"").trim();if(!we||Z)return;const st=Ne.find(wt=>String(wt.id)===we)||null;st&&(f==="edit"?ye(st):$e(st)),De(!0)},[ve,f,t,Z,Ne]);const Ae=G.useMemo(()=>{const we=s.toLowerCase().trim();return Ne.filter(st=>{const wt=[st.quoteNumber,st.customerName,st.status,st.currency,st.issueDate,String(st.total)].join(" ").toLowerCase(),pe=we.length===0||wt.includes(we),Qe=u==="all"||st.status===u,fe=new Date(st.issueDate).toISOString().slice(0,10),He=!x||fe>=x,lt=!p||fe<=p;return pe&&Qe&&He&&lt}).sort((st,wt)=>{const pe=T==="asc"?1:-1;switch(y){case"quoteNumber":return st.quoteNumber.localeCompare(wt.quoteNumber)*pe;case"customer":return st.customerName.localeCompare(wt.customerName)*pe;case"currency":return st.currency.localeCompare(wt.currency)*pe;case"total":return(st.total-wt.total)*pe;case"status":return st.status.localeCompare(wt.status)*pe;case"date":default:return(new Date(st.issueDate).getTime()-new Date(wt.issueDate).getTime())*pe}})},[Ne,s,u,y,T,x,p]),Ie=G.useMemo(()=>{const we=(L-1)*X;return Ae.slice(we,we+X)},[Ae,L,X]);G.useEffect(()=>{Y(1)},[s,u,y,T,x,p]);const Ue=we=>{ae(we),Et.setItem("quotes_pageSize",String(we)),Y(1)},Ge=we=>{N(st=>st===we?(_(wt=>wt==="asc"?"desc":"asc"),st):(_(we==="total"||we==="date"?"desc":"asc"),we))},Le=({active:we})=>e.jsx("span",{className:"inline-block ml-1 text-gray-400",children:we?T==="asc"?"":"":""}),at=we=>new Date(we).toLocaleDateString("tr-TR"),ut=(we,st)=>d(we,st),Ce=we=>{const st=Kr(String(we)),wt=zt(h,st),Qe={draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",viewed:"bg-indigo-100 text-indigo-800",accepted:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800",expired:"bg-yellow-100 text-yellow-800"}[st]||"bg-gray-100 text-gray-800";return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Qe}`,children:wt})},it=()=>{H(!0)},xt=()=>H(!1),jt=()=>V(!0),Ee=()=>V(!1),xe=()=>{if(!i)return"";const we=[i.firstName,i.lastName].filter(Boolean).join(" ").trim();return we||(i.name??"")};_t.useEffect(()=>{const we=()=>{it()};return typeof window<"u"&&window.addEventListener("open-new-quote-modal",we),()=>{typeof window<"u"&&window.removeEventListener("open-new-quote-modal",we)}},[]);const Be=we=>{const st=Ne.find(wt=>wt.id===we)||null;R(st)},$e=we=>{W(we),E(!0)},ye=we=>{W(we),A(!0)},oe=()=>E(!1),me=()=>A(!1),ue=we=>{j(we)};_t.useEffect(()=>{const we=new Date().toISOString().slice(0,10),st=["accepted","declined","expired"],wt=Ne.map(pe=>!st.includes(pe.status)&&pe.validUntil&&pe.validUntil<we?{...pe,status:"expired"}:pe);ke(wt)},[]);const ze=(we,st,wt)=>{Ne.find(Qe=>Qe.id===we)?.status!=="accepted"&&(Q(we),M(st),te(wt))},tt=()=>{Q(null),M(null),te("")},kt=async we=>{if(z)try{if(z==="status"){const st=U,wt=await fl(String(we.id),{status:st}),pe=Kr(String(wt.status));ke(Qe=>Qe.map(fe=>fe.id===we.id?{...fe,status:pe}:fe)),W(Qe=>!Qe||Qe.id!==we.id?Qe:{...Qe,status:pe})}if(z==="issueDate"){const wt={issueDate:U},pe=await fl(String(we.id),wt),Qe=String(pe.issueDate).slice(0,10);ke(fe=>fe.map(He=>He.id===we.id?{...He,issueDate:Qe}:He)),W(fe=>!fe||fe.id!==we.id?fe:{...fe,issueDate:Qe})}}finally{Q(null),M(null),te("")}};return _t.useEffect(()=>{try{const we=en()||"",st=we?`quotes_cache_${we}`:"quotes_cache",wt=Ne.map(pe=>({id:pe.id,quoteNumber:pe.quoteNumber,customerName:pe.customerName,customerId:pe.customerId,issueDate:pe.issueDate,validUntil:pe.validUntil,currency:pe.currency,total:pe.total,status:pe.status,version:pe.version,scopeOfWorkHtml:pe.scopeOfWorkHtml,items:pe.items,createdAt:pe.createdAt,updatedAt:pe.updatedAt}));Et.setItem(st,JSON.stringify(wt));try{window.dispatchEvent(new Event("quotes-cache-updated"))}catch{}}catch{}},[Ne]),e.jsxs("div",{className:"space-y-6",children:[S&&e.jsx(ui,{isOpen:!0,title:h("common.confirm",{defaultValue:"Onay"}),message:h("quotes.duplicateConfirm",{defaultValue:"Yinele ilemine devam edilsin mi?"}),confirmText:h("common.yes",{defaultValue:"Evet"}),cancelText:h("common.no",{defaultValue:"Hayr"}),onCancel:()=>C(null),onConfirm:async()=>{const we=S;if(we){try{const st={customerId:we.customerId,customerName:we.customerName,issueDate:le(new Date),validUntil:we.validUntil,currency:we.currency,total:we.total,status:"draft",items:(we.items||[]).map(YD),scopeOfWorkHtml:we.scopeOfWorkHtml||""},wt=await Ey(st),pe=bu(wt);ke(Qe=>[pe,...Qe])}catch(st){console.error("Duplicate quote failed:",st)}C(null)}}}),k&&e.jsx(ui,{isOpen:!0,title:h("common.confirm",{defaultValue:"Onay"}),message:h("quotes.reviseConfirm"),confirmText:h("common.yes",{defaultValue:"Evet"}),cancelText:h("common.no",{defaultValue:"Hayr"}),onCancel:()=>j(null),onConfirm:async()=>{const we=k;if(!we)return;const st=new Date,wt=le(st),pe=le(se(st,30)),Qe={version:we.version||1,issueDate:we.issueDate,validUntil:we.validUntil,status:we.status,total:we.total,items:we.items?we.items.map(fe=>({...fe})):void 0,snapshotAt:new Date().toISOString()};try{const fe={status:"draft",issueDate:wt,validUntil:pe,version:(we.version||1)+1,revisions:[...we.revisions||[],Qe]},He=await fl(String(we.id),fe);ke(lt=>lt.map(Pe=>Pe.id===we.id?{...Pe,status:Kr(String(He.status)),issueDate:String(He.issueDate).slice(0,10),validUntil:He.validUntil?String(He.validUntil).slice(0,10):void 0,version:He.version||Pe.version,revisions:Array.isArray(He.revisions)?He.revisions:Pe.revisions,updatedAt:He.updatedAt||Pe.updatedAt}:Pe)),W(lt=>!lt||lt.id!==we.id?lt:{...lt,status:"draft",issueDate:wt,validUntil:pe,version:(we.version||1)+1})}catch(fe){console.error("Revise failed:",fe)}j(null)}}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:h("quotes.title")}),e.jsx("p",{className:"text-sm text-gray-500",children:h("quotes.comingSoon")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[["professional","pro","enterprise","business"].includes(r)&&e.jsx("button",{type:"button",onClick:jt,className:"inline-flex items-center gap-2 rounded-lg border px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",title:h("quotes.templates.manageTitle",{defaultValue:"Teklif ablonlarn ynet"}),children:h("quotes.templates.manage",{defaultValue:"ablonlar Ynet"})}),e.jsxs("button",{type:"button",onClick:it,className:"inline-flex items-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-indigo-700",children:[e.jsx(Ks,{className:"w-4 h-4"}),h("quotes.newQuote")]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:h("quotes.search"),value:s,onChange:we=>c(we.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("select",{value:u,onChange:we=>m(we.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:h("quotes.filterAll")}),e.jsx("option",{value:"draft",children:h("quotes.statusLabels.draft")}),e.jsx("option",{value:"sent",children:h("quotes.statusLabels.sent")}),e.jsx("option",{value:"viewed",children:h("quotes.statusLabels.viewed")}),e.jsx("option",{value:"accepted",children:h("quotes.statusLabels.accepted")}),e.jsx("option",{value:"declined",children:h("quotes.statusLabels.declined")}),e.jsx("option",{value:"expired",children:h("quotes.statusLabels.expired")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:x,onChange:we=>b(we.target.value),placeholder:h("startDate"),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("input",{type:"date",value:p,onChange:we=>v(we.target.value),placeholder:h("endDate"),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsx("div",{className:"ml-auto flex items-center",children:e.jsx(ca,{listType:"quotes",getState:()=>({searchTerm:s,statusFilter:u,startDate:x,endDate:p,sortBy:y,sortDir:T,pageSize:X}),applyState:we=>{we&&(c(we.searchTerm??""),m(we.statusFilter??"all"),b(we.startDate??""),v(we.endDate??""),we.sortBy&&N(we.sortBy),we.sortDir&&_(we.sortDir),we.pageSize&&[20,50,100].includes(we.pageSize)&&Ue(we.pageSize))},presets:[{id:"this-month",label:h("presets.thisMonth"),apply:()=>{const we=new Date,st=new Date(we.getFullYear(),we.getMonth(),1).toISOString().slice(0,10),wt=new Date(we.getFullYear(),we.getMonth()+1,0).toISOString().slice(0,10);b(st),v(wt)}},{id:"accepted",label:h("quotes.statusLabels.accepted"),apply:()=>m("accepted")},{id:"declined",label:h("quotes.statusLabels.declined"),apply:()=>m("declined")},{id:"expired",label:h("quotes.statusLabels.expired"),apply:()=>m("expired")}]})})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:Z?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(6)].map((we,st)=>e.jsx("div",{className:"h-10 bg-gray-100 rounded"},st))})}):Ae.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Fr,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:h(s||u!=="all"?"quotes.noQuotesFound":"quotes.noQuotes")}),e.jsx("p",{className:"text-gray-500 mb-4",children:h(s||u!=="all"?"quotes.noQuotesFoundDesc":"quotes.noQuotesDesc")}),!s&&u==="all"&&e.jsx("button",{onClick:it,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:h("quotes.createFirstQuote")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[900px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>Ge("quoteNumber"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",children:[h("quotes.table.quote"),e.jsx(Le,{active:y==="quoteNumber"})]}),e.jsxs("th",{onClick:()=>Ge("customer"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",children:[h("quotes.table.customer"),e.jsx(Le,{active:y==="customer"})]}),e.jsxs("th",{onClick:()=>Ge("total"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",children:[h("quotes.table.amount"),e.jsx(Le,{active:y==="total"})]}),e.jsxs("th",{onClick:()=>Ge("status"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",children:[h("quotes.table.status"),e.jsx(Le,{active:y==="status"})]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h("customer.historyColumns.createdBy")}),e.jsxs("th",{onClick:()=>Ge("date"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",children:[h("quotes.table.date"),e.jsx(Le,{active:y==="date"})]}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:h("quotes.table.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ie.map(we=>e.jsxs(_t.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(Fr,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 truncate",children:[e.jsx("button",{onClick:()=>$e(we),className:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors cursor-pointer",title:h("quotes.view"),children:we.quoteNumber}),we.version&&we.version>1&&e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:h("quotes.version",{n:we.version})})]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(Vr,{className:"w-3 h-3 mr-1"}),at(we.issueDate)]}),we.opportunityId&&e.jsx("div",{className:"mt-1",children:e.jsxs("button",{type:"button",onClick:st=>{st.preventDefault(),st.stopPropagation();try{window.location.hash=`crm-deal:${String(we.opportunityId)}`}catch{}},className:"inline-flex items-center text-xs text-gray-500 hover:text-indigo-700",title:h("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"}),children:[e.jsx(fs,{className:"w-3 h-3 mr-1"}),h("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"})]})})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:we.customerName}),e.jsx("div",{className:"text-xs text-gray-500",children:we.currency})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:ut(we.total,we.currency)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$===we.id&&z==="status"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:U,onChange:st=>te(st.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[e.jsx("option",{value:"draft",children:h("quotes.statusLabels.draft")}),e.jsx("option",{value:"sent",children:h("quotes.statusLabels.sent")}),e.jsx("option",{value:"viewed",children:h("quotes.statusLabels.viewed")}),e.jsx("option",{value:"accepted",children:h("quotes.statusLabels.accepted")}),e.jsx("option",{value:"declined",children:h("quotes.statusLabels.declined")}),e.jsx("option",{value:"expired",children:h("quotes.statusLabels.expired")})]}),e.jsx("button",{onClick:()=>kt(we),className:"p-1 text-green-600 hover:bg-green-50 rounded",title:h("common.save"),children:e.jsx(cs,{className:"w-3 h-3"})}),e.jsx("button",{onClick:tt,className:"p-1 text-red-600 hover:bg-red-50 rounded",title:h("common.cancel"),children:e.jsx(Nr,{className:"w-3 h-3"})})]}):e.jsx("div",{onClick:()=>ze(we.id,"status",we.status),className:`${we.status==="accepted"?"cursor-default opacity-90":"cursor-pointer hover:opacity-80"} inline-block transition-opacity`,title:we.status==="accepted"?h("quotes.statusLabels.accepted"):h("common.edit"),children:Ce(we.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:we.createdByName||""}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$===we.id&&z==="issueDate"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"date",value:U,onChange:st=>te(st.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-indigo-500"}),e.jsx("button",{onClick:()=>kt(we),className:"p-1 text-green-600 hover:bg-green-50 rounded",title:h("common.save"),children:e.jsx(cs,{className:"w-3 h-3"})}),e.jsx("button",{onClick:tt,className:"p-1 text-red-600 hover:bg-red-50 rounded",title:h("common.cancel"),children:e.jsx(Nr,{className:"w-3 h-3"})})]}):e.jsx("div",{onClick:()=>ze(we.id,"issueDate",we.issueDate),className:`${we.status==="accepted"?"cursor-default":"cursor-pointer hover:bg-gray-50"} rounded p-1`,title:we.status==="accepted"?h("quotes.statusLabels.accepted"):h("common.edit"),children:at(we.issueDate)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium hidden sm:table-cell",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>$e(we),className:"p-1 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:h("quotes.view"),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:async()=>{const{generateQuotePDF:st}=await Mr(async()=>{const{generateQuotePDF:wt}=await import("./pdfGenerator--172hwWR.js").then(pe=>pe.p);return{generateQuotePDF:wt}},[]);await st({id:we.id,quoteNumber:we.quoteNumber,customerName:we.customerName,customerId:we.customerId,issueDate:we.issueDate,validUntil:we.validUntil,status:we.status,currency:we.currency,total:we.total,items:(we.items||[]).map(wt=>({description:wt.description,quantity:wt.quantity,unitPrice:wt.unitPrice,total:wt.total})),scopeOfWorkHtml:we.scopeOfWorkHtml||""},{filename:we.quoteNumber})},className:"p-1 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:h("quotes.actions.downloadPdf"),children:e.jsx(kl,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(we),className:"p-1 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:h("quotes.actions.duplicate"),children:e.jsx(mp,{className:"w-4 h-4"})}),we.status!=="accepted"&&e.jsx("button",{onClick:()=>ye(we),className:"p-1 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:h("quotes.edit"),children:e.jsx(vs,{className:"w-4 h-4"})}),we.status!=="accepted"&&e.jsx("button",{onClick:()=>Be(we.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:h("quotes.delete"),children:e.jsx(Xr,{className:"w-4 h-4"})})]})})]}),e.jsx("tr",{className:"sm:hidden",children:e.jsx("td",{className:"px-6 pb-4",colSpan:6,children:e.jsxs("div",{className:"flex items-center justify-start gap-3",children:[we.opportunityId&&e.jsx("button",{type:"button",onClick:()=>{try{window.location.hash=`crm-deal:${String(we.opportunityId)}`}catch{}},className:"px-2 py-1 text-gray-700 bg-gray-100 rounded hover:bg-gray-200 text-xs",title:h("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"}),children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(fs,{className:"w-3 h-3"})," ",h("crm.dealDetail.openDeal",{defaultValue:"Anlamay A"})]})}),e.jsx("button",{onClick:()=>$e(we),className:"px-2 py-1 text-gray-700 bg-gray-100 rounded hover:bg-gray-200 text-xs",title:h("quotes.view"),children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Zr,{className:"w-3 h-3"})," ",h("quotes.view")]})}),e.jsx("button",{onClick:async()=>{const{generateQuotePDF:st}=await Mr(async()=>{const{generateQuotePDF:wt}=await import("./pdfGenerator--172hwWR.js").then(pe=>pe.p);return{generateQuotePDF:wt}},[]);await st({id:we.id,quoteNumber:we.quoteNumber,customerName:we.customerName,customerId:we.customerId,issueDate:we.issueDate,validUntil:we.validUntil,status:we.status,currency:we.currency,total:we.total,items:(we.items||[]).map(wt=>({description:wt.description,quantity:wt.quantity,unitPrice:wt.unitPrice,total:wt.total})),scopeOfWorkHtml:we.scopeOfWorkHtml||""},{filename:we.quoteNumber})},className:"px-2 py-1 text-gray-700 bg-gray-100 rounded hover:bg-gray-200 text-xs",title:h("quotes.actions.downloadPdf"),children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(kl,{className:"w-3 h-3"})," PDF"]})}),e.jsx("button",{onClick:()=>C(we),className:"px-2 py-1 text-gray-700 bg-gray-100 rounded hover:bg-gray-200 text-xs",title:h("quotes.actions.duplicate"),children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(mp,{className:"w-3 h-3"})," ",h("quotes.actions.duplicate")]})}),we.status!=="accepted"&&e.jsx("button",{onClick:()=>ye(we),className:"px-2 py-1 text-indigo-700 bg-indigo-50 rounded hover:bg-indigo-100 text-xs",title:h("quotes.edit"),children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(vs,{className:"w-3 h-3"})," ",h("quotes.edit")]})}),we.status!=="accepted"&&e.jsx("button",{onClick:()=>Be(we.id),className:"px-2 py-1 text-red-700 bg-red-50 rounded hover:bg-red-100 text-xs",title:h("quotes.delete"),children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(Xr,{className:"w-3 h-3"})," ",h("quotes.delete")]})})]})})})]},we.id))})]})}),e.jsx("div",{className:"p-3 border-t border-gray-200 bg-white",children:e.jsx(Rs,{page:L,pageSize:X,total:Ae.length,onPageChange:Y,onPageSizeChange:Ue})})]})})]}),O&&e.jsx(rw,{isOpen:O,onClose:xt,customers:a,products:o,defaultCurrency:n,onOpenTemplatesManager:jt,enableTemplates:["professional","pro","enterprise","business"].includes(r),onCreate:async we=>{try{const st=String(we.customer.id??"").trim(),pe={customerId:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(st)?st:void 0,customerName:we.customer.name,issueDate:we.issueDate,validUntil:we.validUntil,currency:we.currency,total:we.total,items:we.items.map(Pe=>({id:Pe.id,description:Pe.description,quantity:Pe.quantity,unitPrice:Pe.unitPrice,total:Pe.total,productId:Pe.productId,unit:Pe.unit})),scopeOfWorkHtml:we.scopeOfWorkHtml||""},Qe=await Ey(pe),fe=bu(Qe),He=xe(),lt={...fe,createdByName:fe.createdByName||He,updatedByName:fe.updatedByName||He};ke(Pe=>[lt,...Pe])}catch(st){console.error("Quote create failed:",st)}finally{xt()}}}),F&&e.jsx(KD,{isOpen:F,onClose:Ee,planRaw:r}),D&&e.jsx(ui,{isOpen:!0,title:h("common.confirm",{defaultValue:"Onay"}),message:h("quotes.deleteConfirm",{defaultValue:`${D.quoteNumber} numaral teklifi silmek istediinize emin misiniz? Bu ilem geri alnamaz.`}),confirmText:h("common.delete",{defaultValue:"Sil"}),cancelText:h("common.cancel",{defaultValue:"Vazge"}),onCancel:()=>R(null),onConfirm:async()=>{const we=D?.id;if(!we){R(null);return}try{await pD(String(we)),ke(st=>st.filter(wt=>wt.id!==we))}catch(st){console.error("Delete quote failed:",st)}R(null)}}),e.jsx(Qv,{isOpen:B,onClose:oe,quote:q,onEdit:we=>{oe(),setTimeout(()=>ye(we),100)},onChangeStatus:async(we,st)=>{try{const wt={status:st},pe=await fl(String(we.id),wt),Qe=Kr(String(pe.status));ke(fe=>fe.map(He=>He.id===we.id?{...He,status:Qe,updatedAt:pe.updatedAt||He.updatedAt}:He)),W(fe=>!fe||fe.id!==we.id?fe:{...fe,status:Qe,updatedAt:pe.updatedAt||fe.updatedAt})}catch(wt){console.error("Quote status update failed:",wt)}},onRevise:we=>ue(we)}),e.jsx(Zv,{isOpen:P,onClose:me,quote:q,onSave:async we=>{try{const st={customerId:we.customerId,customerName:we.customerName,issueDate:we.issueDate,validUntil:we.validUntil,currency:we.currency,total:we.total,items:(we.items||[]).map(Qe=>({id:Qe.id,description:Qe.description,quantity:Qe.quantity,unitPrice:Qe.unitPrice,total:Qe.total,productId:Qe.productId,unit:Qe.unit})),scopeOfWorkHtml:we.scopeOfWorkHtml||"",status:we.status},wt=await fl(String(we.id),st),pe=bu(wt);ke(Qe=>Qe.map(fe=>fe.id===pe.id?pe:fe)),W(Qe=>Qe&&Qe.id===pe.id?pe:Qe)}catch(st){console.error("Quote update failed:",st)}},products:o})]})};function QD(){const{t:a}=$t("common"),{formatCurrency:o,currency:t}=Jr(),{user:f}=Gs(),h=z=>{try{window.location.hash=`crm-deal:${z}`}catch{}},d=z=>{try{window.location.hash=`crm-activities-opp:${z}`}catch{}},n=z=>{try{window.location.hash=`crm-tasks-opp:${z}`}catch{}},l=z=>{const M=String(z?.name||"").trim().toLowerCase(),U=M==="lead"?"lead":M==="qualified"?"qualified":M==="proposal"?"proposal":M==="negotiation"?"negotiation":M==="won"?"won":M==="lost"?"lost":null;return U?a(`crm.pipeline.stages.${U}`):z.name},[i,r]=G.useState(!0),[s,c]=G.useState(null),[u,m]=G.useState([]),[x,b]=G.useState([]),p=G.useMemo(()=>a("crm.pipeline.defaultName")||a("crm.pipeline.title"),[a]),[v,y]=G.useState(!1),[N,T]=G.useState(!1),[_,O]=G.useState(null),[H,F]=G.useState([]),[V,q]=G.useState([]),[W,B]=G.useState(null),[E,P]=G.useState(null),[A,k]=G.useState(null),[j,S]=G.useState({name:"",accountId:"",amount:"",currency:t,expectedCloseDate:"",stageId:"",teamUserIds:f?.id?[f.id]:[]});G.useEffect(()=>{let z=!1;return(async()=>{r(!0),c(null);try{await ig();const M=await og(),U=Array.isArray(M)?M:[],ie=await(async()=>{let le=0;const Ne=[];for(let ke=0;ke<100;ke+=1){const Z=await lm({limit:200,offset:le}),ce=Array.isArray(Z?.items)?Z.items:[];if(Ne.push(...ce),le+=ce.length,ce.length===0||typeof Z?.total=="number"&&Ne.length>=Z.total)break}return Ne})();z||(m(U),b(ie))}catch(M){const U=os(M);he.error("crm.board.loadFailed",M),z||c(U)}finally{z||r(!1)}})(),()=>{z=!0}},[]);const C=async()=>{try{c(null);const z=200;let M=0;const U=[];for(let te=0;te<100;te+=1){const ie=await lm({limit:z,offset:M}),se=Array.isArray(ie?.items)?ie.items:[];if(U.push(...se),M+=se.length,se.length===0||typeof ie?.total=="number"&&U.length>=ie.total)break}b(U)}catch(z){c(os(z))}};G.useEffect(()=>{if(!v||j.stageId)return;const z=u[0]?.id;z&&S(M=>({...M,stageId:z}))},[v,u]),G.useEffect(()=>{let z=!1;if(v)return(async()=>{O(null);try{const[M,U]=await Promise.all([Am(),hs.getAll()]);if(z)return;F(M??[]);const te=(U??[])[0];if(!te?.id){q([]);return}const ie=await hs.getMembers(te.id);z||q(ie??[])}catch(M){z||O(os(M))}})(),()=>{z=!0}},[v]);const D=G.useMemo(()=>{const z=new Map;for(const U of u)z.set(U.id,[]);for(const U of x){const te=z.get(U.stageId)??[];te.push(U),z.set(U.stageId,te)}const M=U=>{if(!U)return 0;const te=new Date(U).getTime();return Number.isFinite(te)?te:0};for(const U of z.values())U.sort((te,ie)=>{const se=M(ie.updatedAt)-M(te.updatedAt);return se!==0?se:String(te.name??"").localeCompare(String(ie.name??""))});return z},[u,x]),R=()=>{O(null),S({name:"",accountId:"",amount:"",currency:t,expectedCloseDate:"",stageId:u[0]?.id??"",teamUserIds:f?.id?[f.id]:[]}),y(!0)},L=()=>{y(!1)},Y=z=>{S(M=>{const te=M.teamUserIds.includes(z)?M.teamUserIds.filter(ie=>ie!==z):[...M.teamUserIds,z];return{...M,teamUserIds:te}})},X=async()=>{O(null);const z=j.name.trim();if(!z){O(a("crm.pipeline.validation.nameRequired"));return}if(!j.accountId){O(a("crm.pipeline.validation.accountRequired"));return}const M=Number(j.amount||0);if(!Number.isFinite(M)||M<0){O(a("crm.pipeline.validation.amountInvalid"));return}const U=Array.from(new Set([...j.teamUserIds??[],...f?.id?[f.id]:[]]));try{T(!0),await iE({accountId:j.accountId,name:z,amount:M,currency:j.currency,expectedCloseDate:j.expectedCloseDate||void 0,stageId:j.stageId||void 0,teamUserIds:U}),await C(),L()}catch(te){O(os(te))}finally{T(!1)}};if(i)return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:a("sidebar.crm")}),e.jsx("p",{className:"text-sm text-gray-600",children:a("crm.pipeline.loading")})]});const ae=async(z,M)=>{if(!z||!M)return;const U=x.find(te=>te.id===z);if(!(U?.stageId&&U.stageId===M)&&!W){c(null);try{B(z),await oE(z,M),await C()}catch(te){c(os(te))}finally{B(null)}}},$=z=>{try{return JSON.stringify(z)}catch{return""}},Q=z=>{if(!z)return null;try{const M=JSON.parse(z),U=String(M?.opportunityId??"").trim(),te=String(M?.fromStageId??"").trim();return U?{opportunityId:U,fromStageId:te}:null}catch{const M=String(z).trim();return M?{opportunityId:M,fromStageId:""}:null}};return s?e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:a("sidebar.crm")}),e.jsx("p",{className:"text-sm text-red-600",children:s})]}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:a("sidebar.crm")}),e.jsx("p",{className:"text-xs text-gray-500",children:p})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:a("crm.pipeline.visibilityOwnerAndTeam")}),e.jsx("button",{type:"button",onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm",children:a("crm.pipeline.addOpportunity")})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:a("crm.pipeline.createTitle")}),_&&e.jsx("div",{className:"mb-4 text-sm text-red-600",children:_}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.pipeline.fields.opportunityName")}),e.jsx("input",{type:"text",value:j.name,onChange:z=>S(M=>({...M,name:z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.pipeline.fields.account")}),e.jsxs("select",{value:j.accountId,onChange:z=>S(M=>({...M,accountId:z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",required:!0,children:[e.jsx("option",{value:"",children:a("crm.pipeline.selectPlaceholder")}),H.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.pipeline.fields.amount")}),e.jsx("input",{type:"number",value:j.amount,onChange:z=>S(M=>({...M,amount:z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",min:0,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.pipeline.fields.currency")}),e.jsxs("select",{value:j.currency,onChange:z=>S(M=>({...M,currency:z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",children:[e.jsx("option",{value:"TRY",children:"TRY"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.pipeline.fields.expectedCloseDate")}),e.jsx("input",{type:"date",value:j.expectedCloseDate,onChange:z=>S(M=>({...M,expectedCloseDate:z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.pipeline.fields.stage")}),e.jsx("select",{value:j.stageId,onChange:z=>S(M=>({...M,stageId:z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",disabled:u.length===0,children:u.map(z=>e.jsx("option",{value:z.id,children:l(z)},z.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.pipeline.fields.team")}),e.jsxs("div",{className:"border rounded-lg p-3 max-h-48 overflow-auto",children:[V.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:a("crm.pipeline.noMembers")}),e.jsx("div",{className:"space-y-2",children:V.map(z=>{const M=z.user.id,U=f?.id&&M===f.id,te=j.teamUserIds.includes(M)||!!U;return e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:te,disabled:!!U,onChange:()=>Y(M)}),e.jsxs("span",{className:"text-gray-800",children:[z.user.firstName," ",z.user.lastName," (",z.user.email,")"]})]},z.id)})}),f?.id&&e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:a("crm.pipeline.ownerAutoInTeam")})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-5",children:[e.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",disabled:N,children:a("common.cancel")}),e.jsx("button",{type:"button",onClick:X,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:N,children:a(N?"crm.pipeline.saving":"common.add")})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-3",children:u.map(z=>{const M=D.get(z.id)??[];return e.jsxs("div",{className:A===z.id?"border rounded bg-white ring-2 ring-blue-200":"border rounded bg-white",children:[e.jsxs("div",{className:"px-3 py-2 border-b",children:[e.jsx("div",{className:"text-sm font-medium",children:l(z)}),e.jsx("div",{className:"text-xs text-gray-500",children:a("crm.pipeline.opportunityCount",{count:M.length})})]}),e.jsxs("div",{className:"p-2 space-y-2",onDragEnter:()=>{k(z.id)},onDragOver:U=>{U.preventDefault(),k(z.id);try{U.dataTransfer.dropEffect="move"}catch{}},onDragLeave:()=>{k(U=>U===z.id?null:U)},onDrop:U=>{U.preventDefault(),k(null);const te=U.dataTransfer.getData("application/json")||U.dataTransfer.getData("text/plain")||"",ie=Q(te);ie?.opportunityId&&ae(ie.opportunityId,z.id)},children:[M.map(U=>e.jsxs("div",{className:E===U.id?"border rounded p-2 cursor-grabbing opacity-60":W===U.id?"border rounded p-2 cursor-not-allowed opacity-60":"border rounded p-2 cursor-grab",draggable:W!==U.id,onDragStart:te=>{P(U.id);try{te.dataTransfer.effectAllowed="move",te.dataTransfer.setData("application/json",$({opportunityId:U.id,fromStageId:U.stageId})),te.dataTransfer.setData("text/plain",U.id)}catch{}},onDragEnd:()=>{k(null),P(null)},children:[e.jsx("button",{type:"button",onClick:()=>{E!==U.id&&h(U.id)},className:"text-sm font-medium truncate text-left w-full text-blue-600 hover:underline",children:U.name}),e.jsx("div",{className:"text-xs text-gray-600",children:o(Number(U.amount??0),U.currency??"TRY")}),e.jsxs("div",{className:"text-[11px] text-gray-500",children:["Takm: ",U.teamUserIds?.length??0]}),e.jsxs("div",{className:"mt-1 flex flex-wrap gap-x-3 gap-y-1 text-[11px]",children:[e.jsx("button",{type:"button",onClick:()=>d(U.id),className:"text-blue-600 hover:underline",children:a("sidebar.crmActivities")}),e.jsx("button",{type:"button",onClick:()=>n(U.id),className:"text-blue-600 hover:underline",children:a("sidebar.crmTasks")})]})]},U.id)),M.length===0&&e.jsx("div",{className:"text-xs text-gray-400 p-2",children:a("crm.pipeline.empty")})]})]},z.id)})})]})}const Op="crm.opportunities.pageState.v1",ZD=()=>{const a=Er.getItem(Op),o=Wn(a,Op);return o||null},XD=(a,o)=>{const t=String(a??"").trim();if(!t)return"-";const f=Date.parse(t);return Number.isFinite(f)?new Intl.DateTimeFormat(o,{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(f)):t};function Uy({initialAccountId:a}){const{t:o,i18n:t}=$t("common"),{formatCurrency:f}=Jr(),h=G.useMemo(()=>ZD(),[]),[d,n]=G.useState(!0),[l,i]=G.useState(null),[r,s]=G.useState([]),[c,u]=G.useState([]),[m,x]=G.useState(()=>typeof h?.q=="string"?h.q:""),[b,p]=G.useState(""),[v,y]=G.useState(()=>a||(typeof h?.accountId=="string"?h.accountId:"")),[N,T]=G.useState(()=>{const Q=h?.status;return Q==="open"||Q==="won"||Q==="lost"||Q==="all"?Q:"all"}),[_,O]=G.useState(()=>typeof h?.stageId=="string"?h.stageId:""),[H,F]=G.useState(()=>typeof h?.startDate=="string"?h.startDate:""),[V,q]=G.useState(()=>typeof h?.endDate=="string"?h.endDate:""),[W,B]=G.useState(()=>{const Q=h?.sortKey;return typeof Q=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","nameAsc","nameDesc"].includes(Q)?Q:"updatedDesc"}),[E,P]=G.useState(()=>{const Q=h?.limit,z=[20,50,100];return typeof Q=="number"&&Number.isFinite(Q)&&z.includes(Q)?Q:20}),[A,k]=G.useState(0),[j,S]=G.useState({items:[],total:0,limit:25,offset:0}),C=Q=>{const z=String(Q?.name||"").trim().toLowerCase(),M=z==="lead"?"lead":z==="qualified"?"qualified":z==="proposal"?"proposal":z==="negotiation"?"negotiation":z==="won"?"won":z==="lost"?"lost":null;return M?o(`crm.pipeline.stages.${M}`):Q.name},D=Q=>o(`crm.opportunities.status.${Q==="open"?"open":Q==="won"?"won":Q==="lost"?"lost":"all"}`),R=G.useMemo(()=>{const Q=new Map;for(const z of c)z?.id&&Q.set(z.id,z.name);return Q},[c]);G.useEffect(()=>{const Q=window.setTimeout(()=>p(m.trim()),350);return()=>window.clearTimeout(Q)},[m]),G.useEffect(()=>{a&&y(Q=>Q===a?Q:a)},[a]),G.useEffect(()=>{Er.setItem(Op,JSON.stringify({q:m,accountId:v,status:N,stageId:_,startDate:H,endDate:V,sortKey:W,limit:E}))},[m,v,N,_,H,V,W,E]),G.useEffect(()=>{let Q=!1;return(async()=>{try{n(!0),i(null),await ig();const[z,M]=await Promise.all([og(),Am().catch(()=>[])]);if(Q)return;s(Array.isArray(z)?z:[]),u(Array.isArray(M)?M:[])}catch(z){Q||i(os(z))}finally{Q||n(!1)}})(),()=>{Q=!0}},[]),G.useEffect(()=>{k(0)},[b,v,N,_,H,V,W,E]),G.useEffect(()=>{let Q=!1;return(async()=>{try{n(!0),i(null);const z=await lm({q:b||void 0,stageId:_||void 0,accountId:v||void 0,status:N==="all"?void 0:N,startDate:H||void 0,endDate:V||void 0,...W==="updatedAsc"?{sortBy:"updatedAt",sortDir:"asc"}:W==="createdDesc"?{sortBy:"createdAt",sortDir:"desc"}:W==="createdAsc"?{sortBy:"createdAt",sortDir:"asc"}:W==="nameAsc"?{sortBy:"name",sortDir:"asc"}:W==="nameDesc"?{sortBy:"name",sortDir:"desc"}:{sortBy:"updatedAt",sortDir:"desc"},limit:E,offset:A});Q||S({items:Array.isArray(z?.items)?z.items:[],total:typeof z?.total=="number"?z.total:0,limit:typeof z?.limit=="number"?z.limit:E,offset:typeof z?.offset=="number"?z.offset:A})}catch(z){Q||i(os(z))}finally{Q||n(!1)}})(),()=>{Q=!0}},[b,v,_,N,H,V,W,E,A]);const L=j.total,Y=Math.floor(A/E)+1,X=Q=>{try{window.location.hash=`crm-deal:${Q}`}catch{}},ae=Q=>{try{window.location.hash=`crm-tasks-opp:${Q}`}catch{}},$=Q=>{try{window.location.hash=`crm-activities-opp:${Q}`}catch{}};return e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:o("crm.opportunities.title")}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:o("crm.opportunities.subtitle")})]})}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3 lg:flex-row lg:items-center",children:[e.jsx("label",{className:"sr-only",children:o("crm.opportunities.filters.search")}),e.jsx("input",{value:m,onChange:Q=>x(Q.target.value),placeholder:o("crm.opportunities.searchPlaceholder"),className:"w-full lg:flex-1 border rounded-lg px-3 py-2 border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsxs("div",{className:"flex w-full gap-2 lg:w-auto",children:[e.jsx("input",{type:"date",value:H,onChange:Q=>F(Q.target.value),placeholder:o("startDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsx("input",{type:"date",value:V,onChange:Q=>q(Q.target.value),placeholder:o("endDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsx("label",{className:"sr-only",children:o("crm.opportunities.filters.account")}),e.jsxs("select",{value:v,onChange:Q=>y(Q.target.value),className:"w-full lg:w-56 border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("crm.opportunities.filters.account"),children:[e.jsx("option",{value:"",children:o("crm.opportunities.filters.allAccounts")}),c.map(Q=>e.jsx("option",{value:Q.id,children:Q.name},Q.id))]}),e.jsx("label",{className:"sr-only",children:o("crm.opportunities.filters.status")}),e.jsxs("select",{value:N,onChange:Q=>T(Q.target.value),className:"w-full lg:w-40 border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("crm.opportunities.filters.status"),children:[e.jsx("option",{value:"all",children:D("all")}),e.jsx("option",{value:"open",children:D("open")}),e.jsx("option",{value:"won",children:D("won")}),e.jsx("option",{value:"lost",children:D("lost")})]}),e.jsx("label",{className:"sr-only",children:o("crm.opportunities.filters.stage")}),e.jsxs("select",{value:_,onChange:Q=>O(Q.target.value),className:"w-full lg:w-56 border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("crm.opportunities.filters.stage"),children:[e.jsx("option",{value:"",children:o("crm.opportunities.filters.allStages")}),r.map(Q=>e.jsx("option",{value:Q.id,children:C(Q)},Q.id))]}),e.jsx("label",{className:"sr-only",children:o("app.sort.label")}),e.jsxs("select",{value:W,onChange:Q=>B(Q.target.value),className:"w-full lg:w-56 border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("app.sort.label"),children:[e.jsx("option",{value:"updatedDesc",children:o("app.sort.updatedDesc")}),e.jsx("option",{value:"updatedAsc",children:o("app.sort.updatedAsc")}),e.jsx("option",{value:"createdDesc",children:o("app.sort.createdDesc")}),e.jsx("option",{value:"createdAsc",children:o("app.sort.createdAsc")}),e.jsx("option",{value:"nameAsc",children:o("app.sort.nameAsc")}),e.jsx("option",{value:"nameDesc",children:o("app.sort.nameDesc")})]}),e.jsx("div",{className:"lg:ml-auto flex items-center",children:e.jsx(ca,{listType:"crm_opportunities",getState:()=>({q:m,accountId:v,status:N,stageId:_,startDate:H,endDate:V,sortKey:W,pageSize:E}),applyState:Q=>{Q&&(x(Q.q??""),F(Q.startDate??""),q(Q.endDate??""),a||y(Q.accountId??""),typeof Q.status=="string"?T(["all","open","won","lost"].includes(Q.status)?Q.status:"all"):T("all"),O(Q.stageId??""),typeof Q.sortKey=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","nameAsc","nameDesc"].includes(Q.sortKey)&&B(Q.sortKey),Q.pageSize&&[20,50,100].includes(Q.pageSize)&&P(Q.pageSize),k(0))},presets:[{id:"this-month",label:o("presets.thisMonth"),apply:()=>{const Q=new Date,z=new Date(Q.getFullYear(),Q.getMonth(),1).toISOString().slice(0,10),M=new Date(Q.getFullYear(),Q.getMonth()+1,0).toISOString().slice(0,10);F(z),q(M),k(0)}},{id:"open",label:D("open"),apply:()=>T("open")},{id:"won",label:D("won"),apply:()=>T("won")},{id:"lost",label:D("lost"),apply:()=>T("lost")}]})})]}),d&&e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:o("common.loading")}),l&&e.jsx("div",{className:"mt-4 text-sm text-red-600",children:l}),!d&&!l&&j.items.length===0&&(()=>{const Q=!!m.trim()||!!v||!!_||!!H||!!V||N!=="all";return e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:o(Q?"common.noResults":"crm.opportunities.empty")})})(),!d&&!l&&j.items.length>0&&e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-500 border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.name")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.account")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.pipeline.fields.amount")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.pipeline.fields.stage")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.pipeline.fields.expectedCloseDate")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.status")}),e.jsx("th",{className:"py-2",children:o("crm.fields.actions")})]})}),e.jsx("tbody",{children:j.items.map(Q=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2 pr-4",children:e.jsx("button",{type:"button",onClick:()=>X(Q.id),className:"text-blue-600 hover:underline text-left",children:Q.name})}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:R.get(Q.accountId)||Q.accountId||"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:f(Number(Q.amount??0),Q.currency??"TRY")}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:C(r.find(z=>z.id===Q.stageId)??{id:Q.stageId,name:Q.stageId})}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:XD(Q.expectedCloseDate,t.language)}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:D(Q.status)}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[e.jsx("button",{type:"button",onClick:()=>X(Q.id),className:"text-blue-600 hover:underline",children:o("crm.opportunities.actions.open")}),e.jsx("button",{type:"button",onClick:()=>$(Q.id),className:"text-blue-600 hover:underline",children:o("sidebar.crmActivities")}),e.jsx("button",{type:"button",onClick:()=>ae(Q.id),className:"text-blue-600 hover:underline",children:o("sidebar.crmTasks")})]})})]},Q.id))})]})}),!d&&!l&&e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4",children:e.jsx(Rs,{page:Y,pageSize:E,total:L,onPageChange:Q=>k((Q-1)*E),onPageSizeChange:Q=>{P(Q),k(0)}})})]})}const JD=async a=>(await Xe.get("/crm/leads",{params:{q:a?.q,startDate:a?.startDate,endDate:a?.endDate,sortBy:a?.sortBy,sortDir:a?.sortDir,limit:a?.limit,offset:a?.offset}})).data,e_=async a=>(await Xe.post("/crm/leads",a)).data,t_=async(a,o)=>(await Xe.patch(`/crm/leads/${a}`,o)).data,r_=async a=>{await Xe.delete(`/crm/leads/${a}`)},Fp="crm.leads.pageState.v1",s_=()=>{const a=Er.getItem(Fp),o=Wn(a,Fp);return o||null},Vy={name:"",email:"",phone:"",company:"",status:""};function n_(){const{t:a}=$t("common"),[o,t]=G.useState([]),[f,h]=G.useState(0),[d,n]=G.useState(!0),[l,i]=G.useState(null),r=G.useMemo(()=>s_(),[]),[s,c]=G.useState(()=>typeof r?.query=="string"?r.query:""),[u,m]=G.useState(()=>typeof r?.startDate=="string"?r.startDate:""),[x,b]=G.useState(()=>typeof r?.endDate=="string"?r.endDate:""),[p,v]=G.useState(()=>{const te=r?.sortKey;return typeof te=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","nameAsc","nameDesc"].includes(te)?te:"updatedDesc"}),[y,N]=G.useState(()=>{const te=r?.limit,ie=[20,50,100];return typeof te=="number"&&Number.isFinite(te)&&ie.includes(te)?te:20}),[T,_]=G.useState(()=>{const te=r?.offset;return typeof te=="number"&&Number.isFinite(te)?te:0});G.useEffect(()=>{Er.setItem(Fp,JSON.stringify({query:s,startDate:u,endDate:x,sortKey:p,limit:y,offset:T}))},[s,u,x,p,y,T]);const[O,H]=G.useState(!1),[F,V]=G.useState(!1),[q,W]=G.useState(null),[B,E]=G.useState(null),[P,A]=G.useState(Vy),[k,j]=G.useState(!1),[S,C]=G.useState(null),D=async()=>{i(null),n(!0);try{const te=await JD({q:s.trim()?s.trim():void 0,startDate:u||void 0,endDate:x||void 0,...p==="updatedAsc"?{sortBy:"updatedAt",sortDir:"asc"}:p==="createdDesc"?{sortBy:"createdAt",sortDir:"desc"}:p==="createdAsc"?{sortBy:"createdAt",sortDir:"asc"}:p==="nameAsc"?{sortBy:"name",sortDir:"asc"}:p==="nameDesc"?{sortBy:"name",sortDir:"desc"}:{sortBy:"updatedAt",sortDir:"desc"},limit:y,offset:T}),ie=Array.isArray(te?.items)?te.items:[];t(ie),h(typeof te?.total=="number"?te.total:ie.length)}catch(te){i(os(te))}finally{n(!1)}};G.useEffect(()=>{D()},[s,u,x,p,y,T]),G.useEffect(()=>{_(0)},[s,u,x,p,y]);const R=()=>{W(null),E(null),A(Vy),H(!0)},L=te=>{W(null),E(te),A({name:te.name??"",email:te.email??"",phone:te.phone??"",company:te.company??"",status:te.status??""}),H(!0)},Y=()=>{F||H(!1)},X=async()=>{W(null);const te=P.name.trim();if(!te){W(a("crm.validation.nameRequired"));return}try{V(!0),B?await t_(B.id,{name:te,email:P.email.trim()||void 0,phone:P.phone.trim()||void 0,company:P.company.trim()||void 0,status:P.status.trim()||void 0}):await e_({name:te,email:P.email.trim()||void 0,phone:P.phone.trim()||void 0,company:P.company.trim()||void 0,status:P.status.trim()||void 0}),await D(),H(!1)}catch(ie){W(os(ie))}finally{V(!1)}},ae=te=>{C(te)},$=()=>{k||C(null)},Q=async()=>{if(S)try{j(!0),await r_(S.id),await D(),C(null)}catch(te){i(os(te))}finally{j(!1)}},z=G.useMemo(()=>Array.isArray(o)?o:[],[o]);s.trim();const M=!d&&!l&&f>0&&z.length===0,U=Math.floor(T/y)+1;return e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:a("crm.leads.title")}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:a("crm.leads.subtitle")})]}),e.jsx("button",{type:"button",onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm",children:a("common.add")})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3 lg:flex-row lg:items-center",children:[e.jsx("input",{type:"text",value:s,onChange:te=>c(te.target.value),placeholder:`${a("common.search")}...`,className:"w-full lg:flex-1 border rounded-lg px-3 py-2 border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsxs("div",{className:"flex w-full gap-2 lg:w-auto",children:[e.jsx("input",{type:"date",value:u,onChange:te=>m(te.target.value),placeholder:a("startDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsx("input",{type:"date",value:x,onChange:te=>b(te.target.value),placeholder:a("endDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("select",{value:p,onChange:te=>v(te.target.value),className:"w-full lg:w-64 border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":a("app.sort.label"),children:[e.jsx("option",{value:"updatedDesc",children:a("app.sort.updatedDesc")}),e.jsx("option",{value:"updatedAsc",children:a("app.sort.updatedAsc")}),e.jsx("option",{value:"createdDesc",children:a("app.sort.createdDesc")}),e.jsx("option",{value:"createdAsc",children:a("app.sort.createdAsc")}),e.jsx("option",{value:"nameAsc",children:a("app.sort.nameAsc")}),e.jsx("option",{value:"nameDesc",children:a("app.sort.nameDesc")})]}),e.jsx("div",{className:"lg:ml-auto flex items-center",children:e.jsx(ca,{listType:"crm_leads",getState:()=>({query:s,startDate:u,endDate:x,sortKey:p,pageSize:y}),applyState:te=>{te&&(c(te.query??""),m(te.startDate??""),b(te.endDate??""),typeof te.sortKey=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","nameAsc","nameDesc"].includes(te.sortKey)&&v(te.sortKey),te.pageSize&&[20,50,100].includes(te.pageSize)&&N(te.pageSize),_(0))},presets:[{id:"this-month",label:a("presets.thisMonth"),apply:()=>{const te=new Date,ie=new Date(te.getFullYear(),te.getMonth(),1).toISOString().slice(0,10),se=new Date(te.getFullYear(),te.getMonth()+1,0).toISOString().slice(0,10);m(ie),b(se),_(0)}},{id:"last-month",label:a("presets.lastMonth"),apply:()=>{const te=new Date,ie=new Date(te.getFullYear(),te.getMonth()-1,1).toISOString().slice(0,10),se=new Date(te.getFullYear(),te.getMonth(),0).toISOString().slice(0,10);m(ie),b(se),_(0)}},{id:"this-year",label:a("presets.thisYear"),apply:()=>{const te=new Date,ie=new Date(te.getFullYear(),0,1).toISOString().slice(0,10),se=new Date(te.getFullYear(),11,31).toISOString().slice(0,10);m(ie),b(se),_(0)}}]})})]}),d&&e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:a("common.loading")}),l&&e.jsx("div",{className:"mt-4 text-sm text-red-600",children:l}),!d&&!l&&f===0&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:a("crm.leads.empty")}),!d&&!l&&M&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:a("common.noResults")}),!d&&!l&&z.length>0&&e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-500 border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:a("crm.fields.name")}),e.jsx("th",{className:"py-2 pr-4",children:a("crm.fields.email")}),e.jsx("th",{className:"py-2 pr-4",children:a("crm.fields.phone")}),e.jsx("th",{className:"py-2 pr-4",children:a("crm.fields.company")}),e.jsx("th",{className:"py-2 pr-4",children:a("crm.fields.status")}),e.jsx("th",{className:"py-2",children:a("crm.fields.actions")})]})}),e.jsx("tbody",{children:z.map(te=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2 pr-4 text-gray-900",children:te.name}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:te.email||"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:te.phone||"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:te.company||"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:te.status||"-"}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>L(te),className:"text-blue-600 hover:underline",children:a("common.edit")}),e.jsx("button",{type:"button",onClick:()=>ae(te),className:"text-red-600 hover:underline",children:a("common.delete")})]})})]},te.id))})]})}),!d&&!l&&e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4",children:e.jsx(Rs,{page:U,pageSize:y,total:f,onPageChange:te=>_((te-1)*y),onPageSizeChange:te=>{N(te),_(0)}})}),O&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:a(B?"crm.leads.modal.editTitle":"crm.leads.modal.createTitle")}),q&&e.jsx("div",{className:"mb-4 text-sm text-red-600",children:q}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.fields.name")}),e.jsx("input",{type:"text",value:P.name,onChange:te=>A(ie=>({...ie,name:te.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.fields.email")}),e.jsx("input",{type:"email",value:P.email,onChange:te=>A(ie=>({...ie,email:te.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.fields.phone")}),e.jsx("input",{type:"text",value:P.phone,onChange:te=>A(ie=>({...ie,phone:te.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.fields.company")}),e.jsx("input",{type:"text",value:P.company,onChange:te=>A(ie=>({...ie,company:te.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("crm.fields.status")}),e.jsx("input",{type:"text",value:P.status,onChange:te=>A(ie=>({...ie,status:te.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:Y,className:"px-3 py-2 rounded-lg text-sm border border-gray-300 text-gray-700 hover:bg-gray-50",disabled:F,children:a("common.cancel")}),e.jsx("button",{type:"button",onClick:X,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm",disabled:F,children:a("common.save")})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a("crm.confirmDelete.title")}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:a("crm.confirmDelete.message",{name:S.name})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:$,className:"px-3 py-2 rounded-lg text-sm border border-gray-300 text-gray-700 hover:bg-gray-50",disabled:k,children:a("common.cancel")}),e.jsx("button",{type:"button",onClick:Q,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg text-sm",disabled:k,children:a("common.confirm")})]})]})})]})}const Bp="crm.contacts.pageState.v1",a_=()=>{const a=Er.getItem(Bp),o=Wn(a,Bp);return o||null},qy={name:"",email:"",phone:"",company:"",accountId:""};function $y({initialAccountId:a}){const{t:o}=$t("common"),t=G.useMemo(()=>a_(),[]),[f,h]=G.useState([]),[d,n]=G.useState(0),[l,i]=G.useState([]),[r,s]=G.useState(!0),[c,u]=G.useState(null),[m,x]=G.useState(!1),[b,p]=G.useState(!1),[v,y]=G.useState(null),[N,T]=G.useState(null),[_,O]=G.useState(qy),[H,F]=G.useState(()=>typeof t?.query=="string"?t.query:""),[V,q]=G.useState(()=>a||(typeof t?.accountFilterId=="string"?t.accountFilterId:"")),[W,B]=G.useState(()=>typeof t?.startDate=="string"?t.startDate:""),[E,P]=G.useState(()=>typeof t?.endDate=="string"?t.endDate:""),[A,k]=G.useState(()=>{const Z=t?.limit,ce=[20,50,100];return typeof Z=="number"&&Number.isFinite(Z)&&ce.includes(Z)?Z:20}),[j,S]=G.useState(()=>{const Z=t?.offset;return typeof Z=="number"&&Number.isFinite(Z)?Z:0}),[C,D]=G.useState(()=>{const Z=t?.sortKey;return typeof Z=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","nameAsc","nameDesc"].includes(Z)?Z:"updatedDesc"}),[R,L]=G.useState(!1),[Y,X]=G.useState(null),ae=async()=>{u(null),s(!0);try{const Z=await Dp({accountId:V.trim()?V.trim():void 0,q:H.trim()?H.trim():void 0,startDate:W||void 0,endDate:E||void 0,...C==="updatedAsc"?{sortBy:"updatedAt",sortDir:"asc"}:C==="createdDesc"?{sortBy:"createdAt",sortDir:"desc"}:C==="createdAsc"?{sortBy:"createdAt",sortDir:"asc"}:C==="nameAsc"?{sortBy:"name",sortDir:"asc"}:C==="nameDesc"?{sortBy:"name",sortDir:"desc"}:{sortBy:"updatedAt",sortDir:"desc"},limit:A,offset:j}),ce=Array.isArray(Z?.items)?Z.items:[];h(ce),n(typeof Z?.total=="number"?Z.total:ce.length)}catch(Z){u(os(Z))}finally{s(!1)}},$=async()=>{try{const Z=await Am();i(Array.isArray(Z)?Z:[])}catch{i([])}};G.useEffect(()=>{a&&q(Z=>Z===a?Z:a)},[a]),G.useEffect(()=>{Er.setItem(Bp,JSON.stringify({query:H,accountFilterId:V,startDate:W,endDate:E,sortKey:C,limit:A,offset:j}))},[H,V,W,E,C,A,j]),G.useEffect(()=>{ae(),$()},[V,H,W,E,C,A,j]),G.useEffect(()=>{S(0)},[V,H,W,E,C,A]);const Q=()=>{y(null),T(null),O(qy),x(!0)},z=Z=>{y(null),T(Z),O({name:Z.name??"",email:Z.email??"",phone:Z.phone??"",company:Z.company??"",accountId:Z.accountId??""}),x(!0)},M=()=>{b||x(!1)},U=async()=>{y(null);const Z=_.name.trim();if(!Z){y(o("crm.validation.nameRequired"));return}try{p(!0),N?await nE(N.id,{name:Z,email:_.email.trim()||void 0,phone:_.phone.trim()||void 0,company:_.company.trim()||void 0,accountId:_.accountId.trim()?_.accountId.trim():null}):await sE({name:Z,email:_.email.trim()||void 0,phone:_.phone.trim()||void 0,company:_.company.trim()||void 0,accountId:_.accountId.trim()?_.accountId.trim():void 0}),await ae(),x(!1)}catch(ce){y(os(ce))}finally{p(!1)}},te=Z=>{X(Z)},ie=()=>{R||X(null)},se=async()=>{if(Y)try{L(!0),await aE(Y.id),await ae(),X(null)}catch(Z){u(os(Z))}finally{L(!1)}},le=G.useMemo(()=>Array.isArray(f)?f:[],[f]),Ne=!r&&!c&&d>0&&le.length===0,ke=Math.floor(j/A)+1;return e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:o("crm.contacts.title")}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:o("crm.contacts.subtitle")})]}),e.jsx("button",{type:"button",onClick:Q,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm",children:o("common.add")})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3 lg:flex-row lg:items-center",children:[e.jsx("input",{type:"text",value:H,onChange:Z=>F(Z.target.value),placeholder:`${o("common.search")}...`,className:"w-full lg:flex-1 border rounded-lg px-3 py-2 border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsxs("div",{className:"flex w-full gap-2 lg:w-auto",children:[e.jsx("input",{type:"date",value:W,onChange:Z=>B(Z.target.value),placeholder:o("startDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsx("input",{type:"date",value:E,onChange:Z=>P(Z.target.value),placeholder:o("endDate"),className:"w-full border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("select",{value:V,onChange:Z=>q(Z.target.value),className:"w-full lg:w-64 border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("crm.opportunities.filters.account"),children:[e.jsx("option",{value:"",children:o("crm.opportunities.filters.allAccounts")}),l.map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))]}),e.jsxs("select",{value:C,onChange:Z=>D(Z.target.value),className:"w-full lg:w-64 border rounded-lg px-3 py-2 border-gray-300 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":o("app.sort.label"),children:[e.jsx("option",{value:"updatedDesc",children:o("app.sort.updatedDesc")}),e.jsx("option",{value:"updatedAsc",children:o("app.sort.updatedAsc")}),e.jsx("option",{value:"createdDesc",children:o("app.sort.createdDesc")}),e.jsx("option",{value:"createdAsc",children:o("app.sort.createdAsc")}),e.jsx("option",{value:"nameAsc",children:o("app.sort.nameAsc")}),e.jsx("option",{value:"nameDesc",children:o("app.sort.nameDesc")})]}),e.jsx("div",{className:"lg:ml-auto flex items-center",children:e.jsx(ca,{listType:"crm_contacts",getState:()=>({query:H,accountFilterId:V,startDate:W,endDate:E,sortKey:C,pageSize:A}),applyState:Z=>{Z&&(F(Z.query??""),B(Z.startDate??""),P(Z.endDate??""),a||q(Z.accountFilterId??""),typeof Z.sortKey=="string"&&["updatedDesc","updatedAsc","createdDesc","createdAsc","nameAsc","nameDesc"].includes(Z.sortKey)&&D(Z.sortKey),Z.pageSize&&[20,50,100].includes(Z.pageSize)&&k(Z.pageSize),S(0))},presets:[{id:"this-month",label:o("presets.thisMonth"),apply:()=>{const Z=new Date,ce=new Date(Z.getFullYear(),Z.getMonth(),1).toISOString().slice(0,10),ve=new Date(Z.getFullYear(),Z.getMonth()+1,0).toISOString().slice(0,10);B(ce),P(ve),S(0)}},{id:"last-month",label:o("presets.lastMonth"),apply:()=>{const Z=new Date,ce=new Date(Z.getFullYear(),Z.getMonth()-1,1).toISOString().slice(0,10),ve=new Date(Z.getFullYear(),Z.getMonth(),0).toISOString().slice(0,10);B(ce),P(ve),S(0)}},{id:"this-year",label:o("presets.thisYear"),apply:()=>{const Z=new Date,ce=new Date(Z.getFullYear(),0,1).toISOString().slice(0,10),ve=new Date(Z.getFullYear(),11,31).toISOString().slice(0,10);B(ce),P(ve),S(0)}}]})})]}),r&&e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:o("common.loading")}),c&&e.jsx("div",{className:"mt-4 text-sm text-red-600",children:c}),!r&&!c&&d===0&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:o("crm.contacts.empty")}),!r&&!c&&Ne&&e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:o("common.noResults")}),!r&&!c&&le.length>0&&e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-500 border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.name")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.email")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.phone")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.account")}),e.jsx("th",{className:"py-2 pr-4",children:o("crm.fields.company")}),e.jsx("th",{className:"py-2",children:o("crm.fields.actions")})]})}),e.jsx("tbody",{children:le.map(Z=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2 pr-4 text-gray-900",children:Z.name}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:Z.email||"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:Z.phone||"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:Z.accountId?e.jsx("button",{type:"button",onClick:()=>{window.location.hash=`customer-history:${Z.accountId}`},className:"text-blue-600 hover:underline text-left",children:customerNameById.get(Z.accountId)||Z.accountId}):"-"}),e.jsx("td",{className:"py-2 pr-4 text-gray-700",children:Z.company||"-"}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>z(Z),className:"text-blue-600 hover:underline",children:o("common.edit")}),e.jsx("button",{type:"button",onClick:()=>{window.location.hash=`crm-activities-contact:${Z.id}`},className:"text-blue-600 hover:underline",children:o("sidebar.crmActivities")}),Z.accountId?e.jsx("button",{type:"button",onClick:()=>{window.location.hash=`crm-tasks:${Z.accountId}`},className:"text-blue-600 hover:underline",children:o("sidebar.crmTasks")}):null,e.jsx("button",{type:"button",onClick:()=>te(Z),className:"text-red-600 hover:underline",children:o("common.delete")})]})})]},Z.id))})]})}),!r&&!c&&e.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4",children:e.jsx(Rs,{page:ke,pageSize:A,total:d,onPageChange:Z=>S((Z-1)*A),onPageSizeChange:Z=>{k(Z),S(0)}})}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:o(N?"crm.contacts.modal.editTitle":"crm.contacts.modal.createTitle")}),v&&e.jsx("div",{className:"mb-4 text-sm text-red-600",children:v}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.account")}),e.jsxs("select",{value:_.accountId,onChange:Z=>O(ce=>({...ce,accountId:Z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300",children:[e.jsx("option",{value:"",children:o("crm.pipeline.selectPlaceholder")}),l.map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.name")}),e.jsx("input",{type:"text",value:_.name,onChange:Z=>O(ce=>({...ce,name:Z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.email")}),e.jsx("input",{type:"email",value:_.email,onChange:Z=>O(ce=>({...ce,email:Z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.phone")}),e.jsx("input",{type:"text",value:_.phone,onChange:Z=>O(ce=>({...ce,phone:Z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("crm.fields.company")}),e.jsx("input",{type:"text",value:_.company,onChange:Z=>O(ce=>({...ce,company:Z.target.value})),className:"w-full border rounded-lg px-3 py-2 border-gray-300"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:M,className:"px-3 py-2 rounded-lg text-sm border border-gray-300 text-gray-700 hover:bg-gray-50",disabled:b,children:o("common.cancel")}),e.jsx("button",{type:"button",onClick:U,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm",disabled:b,children:o("common.save")})]})]})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:o("crm.confirmDelete.title")}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:o("crm.confirmDelete.message",{name:Y.name})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:ie,className:"px-3 py-2 rounded-lg text-sm border border-gray-300 text-gray-700 hover:bg-gray-50",disabled:R,children:o("common.cancel")}),e.jsx("button",{type:"button",onClick:se,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg text-sm",disabled:R,children:o("common.confirm")})]})]})})]})}const i_=a=>Number.isFinite(a)?new Intl.NumberFormat("tr-TR",{maximumFractionDigits:0}).format(a):"0",o_=a=>{const o={};for(const t of a){const f=(t.currency||"TRY").toUpperCase(),h=Number(t.amount)||0;o[f]=(o[f]||0)+h}return o};function cw(){const{t:a}=$t(),[o,t]=_t.useState(!0),[f,h]=_t.useState(null),[d,n]=_t.useState(0),[l,i]=_t.useState({}),[r,s]=_t.useState([]);return _t.useEffect(()=>{let c=!1;return(async()=>{try{t(!0),h(null),await ig();const u=await og(),x=await(async()=>{let N=0;const T=[];for(let _=0;_<100;_+=1){const O=await lm({status:"open",limit:200,offset:N}),H=Array.isArray(O?.items)?O.items:[];if(T.push(...H),N+=H.length,H.length===0||typeof O?.total=="number"&&T.length>=O.total)break}return T})(),b=new Map((Array.isArray(u)?u:[]).map(y=>[y.id,y.name])),p=new Map;for(const y of x){const N=b.get(y.stageId)||a("summary.crm.unknownStage");p.set(N,(p.get(N)||0)+1)}const v=Array.from(p.entries()).map(([y,N])=>({stage:y,count:N})).sort((y,N)=>N.count-y.count);c||(n(x.length),i(o_(x)),s(v))}catch(u){c||h(u?.message?String(u.message):a("crm.errors.boardFetch",{defaultValue:"CRM verisi alnamad"}))}finally{c||t(!1)}})(),()=>{c=!0}},[a]),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:a("summary.blocks.crmFlow")}),e.jsxs("div",{className:"text-xs text-gray-500",children:[a(o?"summary.loading":"summary.crm.openDeals"),":",e.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:d})]})]}),f?e.jsx("div",{className:"mt-3 text-sm text-red-600",children:f}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-3 rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:a("summary.crm.expectedAmount")}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-3",children:Object.keys(l).length===0?e.jsx("div",{className:"text-lg font-bold text-gray-900",children:"0"}):Object.entries(l).map(([c,u])=>e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[i_(u)," ",c]},c))})]}),e.jsx("div",{className:"mt-3",children:r.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:a("summary.crm.noStageData")}):e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:r.slice(0,6).map(c=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-gray-100 bg-white px-3 py-2",children:[e.jsx("div",{className:"text-sm text-gray-700 truncate",children:c.stage}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:c.count})]},c.stage))})})]})]})}function l_(){const{t:a}=$t();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:a("sidebar.crmDashboard")}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:a("crm.dashboard.subtitle")})]}),e.jsx(cw,{}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:a("summary.blocks.latestActivities")}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:a("summary.latestActivitiesPlaceholder")})]})]})}const Hy=a=>{if(!a)return null;if(a instanceof Date)return Number.isFinite(a.getTime())?a:null;const o=typeof a=="number"?a:Number.NaN;if(Number.isFinite(o)){const t=new Date(o);return Number.isFinite(t.getTime())?t:null}if(typeof a=="string"){const t=new Date(a);return Number.isFinite(t.getTime())?t:null}return null},dw=a=>{const o=new Date(a);return o.setHours(0,0,0,0),o},c_=a=>{const o=dw(a),f=(o.getDay()+6)%7;return o.setDate(o.getDate()-f),o},Ky=(a,o)=>a.getTime()>=o.getTime();function d_({invoices:a,products:o,sales:t,quotes:f=[]}){const{t:h}=$t(),d=a.filter(b=>{const p=String(b.status||"").toLowerCase();return p!=="paid"&&p!=="cancelled"}).length,n=a.filter(b=>String(b.status||"").toLowerCase()==="overdue").length,l=o.filter(b=>{const p=String(b.status||"").toLowerCase();if(p==="out-of-stock"||p==="low")return!0;const v=Number(b.stockQuantity??b.stock??0),y=Number(b.reorderLevel??b.minStock??0);return!Number.isFinite(v)||!Number.isFinite(y)?!1:v<=y}).length,i=new Date,r=dw(i),s=c_(i),c=t.filter(b=>{const p=Hy(b.date||b.createdAt||b.issueDate);return p?Ky(p,r):!1}).length,u=t.filter(b=>{const p=Hy(b.date||b.createdAt||b.issueDate);return p?Ky(p,s):!1}).length,m=t.filter(b=>{const p=b.invoiceId||b.invoice?.id,v=String(b.status||"").toLowerCase();return!p&&v!=="invoiced"&&v!=="cancelled"}).length,x=f.filter(b=>{const p=String(b.status||"").toLowerCase();return p!=="accepted"&&p!=="declined"&&p!=="expired"}).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h("summary.blocks.actions")}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h("summary.today")}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:"0"})]}),e.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h("summary.thisWeek")}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:"0"})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h("summary.blocks.receivables")}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h("summary.pending")}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:d})]}),e.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h("summary.overdue")}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:n})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h("summary.blocks.criticalStock")}),e.jsxs("div",{className:"mt-3 rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h("summary.criticalProducts")}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:l})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h("summary.blocks.salesFlow")}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h("summary.todayOrders")}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:c})]}),e.jsxs("div",{className:"rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h("summary.weekOrders")}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:u})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h("summary.blocks.openQuotes")}),e.jsxs("div",{className:"mt-3 rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h("summary.openQuotesCount")}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:x})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h("summary.blocks.awaitingInvoiceSales")}),e.jsxs("div",{className:"mt-3 rounded-lg bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h("summary.awaitingInvoiceCount")}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:m})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2 min-w-0",children:e.jsx(cw,{})}),e.jsx("div",{className:"min-w-0",children:e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h("summary.blocks.latestActivities")}),e.jsx("div",{className:"mt-3 text-sm text-gray-500",children:h("summary.latestActivitiesPlaceholder")})]})})]})]})}const u_=({onNavigateToFiscalPeriods:a})=>{const{t:o}=$t("common"),[t,f]=G.useState([]),[h,d]=G.useState(!0),n=async()=>{try{const c=(await Xe.get("/fiscal-periods")).data;f(Array.isArray(c)?c:[])}catch(s){console.error("Dnemler yklenemedi:",s)}finally{d(!1)}};G.useEffect(()=>{n()},[]);const l={total:t.length,locked:t.filter(s=>s.isLocked).length,unlocked:t.filter(s=>!s.isLocked).length,current:t.find(s=>{const c=new Date,u=new Date(s.periodStart),m=new Date(s.periodEnd);return c>=u&&c<=m})},i=!!l.current,r=t.some(s=>t.some(c=>s.id!==c.id&&new Date(s.periodStart)<new Date(c.periodEnd)&&new Date(s.periodEnd)>new Date(c.periodStart)));return h?e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})}):e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vr,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o("fiscalPeriods.widget.title")})]}),e.jsx("button",{onClick:a,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:o("fiscalPeriods.widget.managePeriods")})]})}),e.jsx("div",{className:"p-6",children:t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Vr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:o("fiscalPeriods.widget.noActivePeriod")}),e.jsx("button",{onClick:a,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:o("fiscalPeriods.widget.createActivePeriod")})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.total}),e.jsx("div",{className:"text-sm text-gray-500",children:o("fiscalPeriods.widget.totalPeriods")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.locked}),e.jsx("div",{className:"text-sm text-gray-500",children:o("fiscalPeriods.widget.lockedPeriods")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.unlocked}),e.jsx("div",{className:"text-sm text-gray-500",children:o("fiscalPeriods.active")})]})]}),i&&l.current&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx($s,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:o("fiscalPeriods.widget.activePeriod")})]}),e.jsx("div",{className:"text-lg font-semibold text-blue-900",children:l.current.name}),e.jsxs("div",{className:"text-sm text-blue-700",children:[new Date(l.current.periodStart).toLocaleDateString("tr-TR")," -",new Date(l.current.periodEnd).toLocaleDateString("tr-TR")]}),l.current.isLocked&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Yn,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsx("span",{className:"text-xs text-red-600",children:o("fiscalPeriods.locked")})]})]}),(!i||r)&&e.jsxs("div",{className:"space-y-2",children:[!i&&e.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(vn,{className:"h-4 w-4 text-yellow-600 mr-2"}),e.jsx("span",{className:"text-sm text-yellow-800",children:o("fiscalPeriods.widget.warnings.noActive")})]}),r&&e.jsxs("div",{className:"flex items-center p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(vn,{className:"h-4 w-4 text-red-600 mr-2"}),e.jsx("span",{className:"text-sm text-red-800",children:o("fiscalPeriods.widget.warnings.overlapping")})]})]}),t.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:o("fiscalPeriods.title")}),e.jsx("div",{className:"space-y-2",children:t.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[new Date(s.periodStart).toLocaleDateString("tr-TR")," -",new Date(s.periodEnd).toLocaleDateString("tr-TR")]})]}),e.jsx("div",{className:"flex items-center",children:s.isLocked?e.jsx(Yn,{className:"h-3 w-3 text-red-600"}):e.jsx(fp,{className:"h-3 w-3 text-green-600"})})]},s.id))})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:a,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:o("fiscalPeriods.widget.managePeriods")})})]})})]})},Ba=()=>{const{t:a}=$t("common"),{currentLanguage:o,changeLanguage:t,languages:f}=Vi(),h=n=>{t(n)},d=()=>{window.location.href="/"};return e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:d,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(Xc,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:a("backToHome","Back to Home")})]}),e.jsx("div",{className:"h-4 w-px bg-gray-300"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(Tm,{className:"h-12 w-auto"})})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oa,{className:"h-4 w-4 text-gray-500"}),e.jsx("select",{value:o,onChange:n=>h(n.target.value),className:"bg-transparent border-none text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded cursor-pointer pr-8",children:f.map(n=>e.jsxs("option",{value:n.code,children:[n.flag," ",n.name]},n.code))})]})})]})})})},m_={},h_=()=>{if(typeof window>"u")return!1;const a=window.location.hostname||"";return a.endsWith(".github.dev")||a.endsWith(".githubpreview.dev")||a.includes(".app.github.dev")};function _m({onToken:a,className:o,disabled:t,invisible:f}){const h=m_?.VITE_TURNSTILE_SITE_KEY||"",d=!1,n=h_(),l=!h||n,i=G.useRef(null),r=G.useRef(null),s=G.useRef(a),[c,u]=G.useState(!1),[m,x]=G.useState(!1),[b,p]=G.useState(null),[v,y]=G.useState(!1),N=G.useRef(0);return G.useEffect(()=>{s.current=a},[a]),G.useEffect(()=>{l&&(h?n&&console.warn("[TurnstileCaptcha] GitHub Codespace ortam algland; Cloudflare domain kst nedeniyle dorulama atland."):console.warn("[TurnstileCaptcha] VITE_TURNSTILE_SITE_KEY tanml deil; dorulama atlanacak."),s.current?.("TURNSTILE_SKIPPED"))},[l,h,n]),G.useEffect(()=>{if(l||m)return;if(document.querySelector("script[data-turnstile-script]")){x(!0);return}const _=document.createElement("script");_.src="https://challenges.cloudflare.com/turnstile/v0/api.js",_.async=!0,_.defer=!0,_.setAttribute("data-turnstile-script","true"),_.onload=()=>x(!0),_.onerror=()=>p("Turnstile script yklenemedi"),document.head.appendChild(_)},[h,m,l]),G.useEffect(()=>{if(!(l||v)&&m&&i.current){if(!window.turnstile){const T=setInterval(()=>{window.turnstile&&(clearInterval(T),u(!0))},100);return()=>clearInterval(T)}u(!0)}},[h,m,v,l]),G.useEffect(()=>{if(!c||v||l||!i.current||!h)return;const T=window.turnstile;if(T){if(r.current){try{T.remove(r.current)}catch{}r.current=null}r.current=T.render(i.current,{sitekey:h,size:f?"invisible":"normal",theme:"auto",callback:_=>{console.log("[Turnstile] token:",_),s.current?.(_||null),N.current=0},"error-callback":()=>{N.current===0&&console.warn("[TurnstileCaptcha] error-callback tetiklendi"),N.current+=1;const _=d&&N.current>=3;N.current>=3?(y(!0),_?s.current?.("TURNSTILE_SKIPPED"):s.current?.(null)):s.current?.(null)},"expired-callback":()=>{s.current?.(null)}})}},[c,h,f,v,d,l]),G.useEffect(()=>{if(!v)return;const T=window.turnstile;if(T&&r.current){try{T.remove(r.current)}catch{}r.current=null}},[v]),G.useEffect(()=>{t&&s.current?.(null)},[t]),e.jsx("div",{className:o,children:h&&!v&&!l?e.jsxs(e.Fragment,{children:[!m&&!b&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Dorulama bileeni ykleniyor..."})]}),b&&e.jsx("div",{className:"text-xs text-red-600",children:b}),e.jsx("div",{ref:i})]}):e.jsx("div",{className:"text-xs text-gray-500 italic",children:v?d?"Captcha gelitirici modunda baarsz oldu, dorulama atland.":"Captcha u anda yklenemiyor. Ltfen sayfay yenileyin veya destekle iletiime gein.":n?"GitHub Codespace ortamnda dorulama atland; retimde Turnstile aktif olacak.":"Captcha dev ortamda atland (site key yok)"})})}function Gy(){const{login:a,isLoading:o}=Gs(),{t,i18n:f}=$t(),[h,d]=G.useState(()=>{const k=Er.getItem("prefill_email")||Et.getItem("prefill_email")||"";return k&&(Er.removeItem("prefill_email"),Et.removeItem("prefill_email")),{email:k,password:""}}),[n,l]=G.useState(!1),[i,r]=G.useState(""),[s,c]=G.useState(null),[u,m]=G.useState(!1),[x,b]=G.useState(""),[p,v]=G.useState(!1),[y,N]=G.useState(!1),[T,_]=G.useState(null),O={en:"Security verification required. Please complete the verification.",de:"Sicherheitsberprfung erforderlich. Bitte schlieen Sie die Verifizierung ab.",fr:"Vrification de scurit requise. Merci de finaliser la vrification.",tr:"Gvenlik dorulamas gerekli. Ltfen dorulamay tamamlayn."},H=(f.language||"en").split("-")[0],F=t("auth.securityVerificationRequired",O[H]||O.en),V=t("auth.emailNotVerified","E-posta dorulanmad. Ltfen giri yapmadan nce e-postanz dorulayn."),q=(k,j)=>{r(k),c(j??null)},W=G.useMemo(()=>{if(!i)return"";if(typeof i=="string"){const k=i.toLowerCase();if(k.includes("security verification required"))return F;if(k.includes("email not verified")||k.includes("email_not_verified"))return V;if(k.includes("mfa required")||k.includes("mfa_required"))return"ki faktrl dorulama gerekli. Ltfen dorulama kodunu girin."}return i},[i,F,V]),B=async k=>{k.preventDefault(),q("",null);try{if(y&&!T){q(F,"CAPTCHA_REQUIRED");return}const j=await a(h.email,h.password,u&&x||void 0,y&&T||void 0);if(j?.mfaRequired){m(!0),q("MFA_REQUIRED","MFA_REQUIRED");return}if(j?.captchaRequired){N(!0),q(F,"CAPTCHA_REQUIRED");return}m(!1),b(""),N(!1),_(null),q("",null)}catch(j){const S=j?.message||"Giri srasnda bir hata olutu",C=S?.toLowerCase?.()||"";S==="MFA_REQUIRED"||C.includes("mfa required")?(m(!0),q("MFA_REQUIRED","MFA_REQUIRED")):S==="CAPTCHA_REQUIRED"||C.includes("security verification required")?(N(!0),q(F,"CAPTCHA_REQUIRED")):S==="EMAIL_NOT_VERIFIED"||C.includes("email not verified")||C.includes("email_not_verified")?q("EMAIL_NOT_VERIFIED","EMAIL_NOT_VERIFIED"):q(S)}},E=s==="EMAIL_NOT_VERIFIED",P=async()=>{if(h.email){v(!0);try{await yn.resendVerification(h.email),q(t("auth.verificationEmailSent","Dorulama e-postas gnderildi. Ltfen e-postanz kontrol edin."),"VERIFICATION_EMAIL_SENT")}catch(k){q(k?.message||t("common.error","Hata"))}finally{v(!1)}}},A=k=>{d(j=>({...j,[k.target.name]:k.target.value}))};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("img",{src:"/ikon-2.png",alt:"Comptario",className:"h-12 w-12"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t("auth.welcomeTitle","Ho Geldiniz")}),e.jsx("p",{className:"text-gray-600",children:t("auth.welcomeSubtitle","Hesabnza giri yaparak devam edin")})]}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:t("auth.emailAddress","E-posta Adresi")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Hs,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:h.email,onChange:A,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:t("auth.emailPlaceholder","ornek@email.com")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:t("auth.password","ifre")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Yn,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:n?"text":"password",required:!0,value:h.password,onChange:A,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:t("auth.passwordPlaceholder","")}),e.jsx("button",{type:"button",onClick:()=>l(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",children:n?e.jsx($c,{className:"h-5 w-5"}):e.jsx(Zr,{className:"h-5 w-5"})})]})]}),u&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"totp",className:"block text-sm font-semibold text-gray-700 mb-2",children:"2FA Kodu"}),e.jsx("input",{id:"totp",name:"totp",type:"text",inputMode:"numeric",pattern:"[0-9A-Z]{6,8}",value:x,onChange:k=>b(k.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"6 haneli TOTP veya 8 karakter yedek kod",autoFocus:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Google Authenticator / 1Password kodunu girin."})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:t("auth.rememberMe","Beni hatrla")})]}),e.jsx("button",{type:"button",onClick:()=>window.location.hash="forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 transition-colors font-medium",children:t("auth.forgotPassword","ifremi unuttum")})]}),y&&e.jsxs("div",{children:[e.jsx(_m,{onToken:k=>_(k)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("auth.captchaHint","Birden fazla baarsz giri denemesi algland - ltfen insan dorulamasn tamamlayn.")})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:o?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:u?"Dorula ve Giri Yap":t("auth.signIn","Giri Yap")}),e.jsx(Nl,{className:"h-4 w-4"})]})})]}),i&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-600",children:[e.jsx("span",{children:W||i}),E&&e.jsx("button",{type:"button",disabled:p,onClick:P,className:"ml-auto text-blue-700 underline disabled:opacity-50",children:p?t("common.loading","Ykleniyor..."):t("auth.resendVerification","Dorulama e-postasn tekrar gnder")})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white px-2 text-gray-500",children:t("auth.or","veya")})})]}),e.jsxs("button",{type:"button",onClick:()=>window.location.href="#admin",className:"w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx(ts,{className:"h-5 w-5"}),t("auth.adminLogin","Ynetici Girii")]})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[t("auth.noAccount","Hesabnz yok mu?")," ",e.jsx("button",{onClick:()=>window.location.href="#register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:t("auth.createFreeAccount","cretsiz hesap oluturun")})]})})]})})})]})}const f_={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function p_(){const{register:a,isLoading:o}=Gs(),{t}=$t(),[f,h]=G.useState(()=>({name:"",email:Er.getItem("prefill_email")||Et.getItem("prefill_email")||"",password:"",confirmPassword:"",company:"",phone:"",address:""})),[d,n]=G.useState(!1),[l,i]=G.useState(!1),[r,s]=G.useState(!1),[c,u]=G.useState(null),[m,x]=G.useState(""),[b,p]=G.useState(null),[v,y]=G.useState(null),[N,T]=G.useState(0),[_,O]=G.useState(!1),[H,F]=G.useState(null),V=!!(Er.getItem("pending_invite_token")||Et.getItem("pending_invite_token"));G.useEffect(()=>{Er.removeItem("prefill_email"),Et.removeItem("prefill_email");const B=Er.getItem("pending_verification_email");Qu()&&B&&(p(B),x("Hesabnz oluturuldu. Ltfen e-postanz kontrol edin ve dorulama balantsna tklayn."))},[]),G.useEffect(()=>{if(N<=0)return;const B=setInterval(()=>T(E=>E-1),1e3);return()=>clearInterval(B)},[N]);const q=async B=>{if(B.preventDefault(),u(null),x(""),F(null),!f.name||!f.email||!f.password){u({message:"Ltfen tm zorunlu alanlar doldurun"});return}if(f.password!==f.confirmPassword){u({message:"ifreler elemiyor"});return}if(f.password.length<6){u({message:"ifre en az 6 karakter olmaldr"});return}if(!d){u({message:"Kullanm Koullar ve Gizlilik Politikasn kabul etmelisiniz"});return}try{const E={name:f.name,email:f.email,password:f.password,company:f.company,phone:f.phone,address:f.address,turnstileToken:v||void 0};if((f_?.VITE_TURNSTILE_SITE_KEY||"")&&!v){u({key:"auth.captchaRequired"});return}await a(E);const A=Qu();A?(x("Hesabnz oluturuldu. Ltfen e-postanz kontrol edin ve dorulama balantsna tklayn."),p(f.email)):x("Hesabnz baaryla oluturuldu! Giri yapabilirsiniz."),A||setTimeout(()=>{window.location.href="#login"},2e3)}catch(E){const P=E?.response?.status??E?.status,A=E?.response?.data?.message||E?.message||"",k=String(A).toLowerCase();P===409||A==="EMAIL_IN_USE"||k.includes("already exists")||k.includes("zaten")?F({email:f.email}):u({message:A||"Kayt srasnda bir hata olutu"})}},W=B=>{h(E=>({...E,[B.target.name]:B.target.value}))};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(pp,{className:"h-8 w-8 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t("auth.registerTitle","Hesap Olutur")}),e.jsx("p",{className:"text-gray-600",children:t("auth.registerSubtitle","cretsiz hesabnz oluturun ve hemen balayn")})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[c&&!H&&e.jsx("div",{className:"flex items-center space-x-2 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-600",children:e.jsx("span",{children:c.key?t(c.key,"Ltfen insan dorulamasn tamamlayn"):c.message})}),H&&e.jsxs("div",{className:"space-y-3 rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800",children:[e.jsxs("p",{className:"font-semibold",children:["Bu e-posta ile zaten bir hesap var: ",e.jsx("span",{className:"underline",children:H.email})]}),e.jsx("p",{children:"Nasl devam etmek istersiniz?"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsxs("li",{children:["ifrenizi biliyorsanz ",e.jsx("button",{type:"button",onClick:()=>window.location.hash="login",className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"Giri yapn"})]}),e.jsxs("li",{children:["ifrenizi hatrlamyorsanz ",e.jsx("button",{type:"button",onClick:()=>window.location.hash="forgot-password",className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"ifre sfrlama balants isteyin"})]}),e.jsx("li",{children:"Farkl bir hesap oluturmak istiyorsanz baka bir e-posta adresiyle tekrar deneyin."})]}),e.jsx("div",{className:"text-xs text-amber-700 pt-1",children:"Gvenlik iin hangi e-postalarn kaytl olduunu aka gstermiyoruz; bu uyar sizin girdinizden yola karak gsterilir."})]}),m&&e.jsxs("div",{className:"space-y-3 rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-700",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5 w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:m}),b&&e.jsxs("p",{className:"text-xs mt-1",children:["Gnderilen adres: ",e.jsx("span",{className:"font-mono",children:b})]})]})]}),b&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{type:"button",onClick:()=>window.location.hash="verify-notice",className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-600 text-white text-xs font-semibold hover:bg-blue-700 transition-colors",children:"Dorulama Durumunu Gr"}),e.jsxs("button",{type:"button",disabled:N>0||_,onClick:async()=>{if(!(!b||N>0)){O(!0);try{await Mr(()=>Promise.resolve().then(()=>Qb),void 0).then(B=>B.authService.resendVerification(b)),T(60)}catch{T(60)}finally{O(!1)}}},className:"inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md border text-xs font-semibold disabled:opacity-50 disabled:cursor-not-allowed bg-white text-gray-700 hover:bg-gray-50 border-gray-300",children:[_?e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):e.jsx(Hc,{className:"h-4 w-4"}),N>0?`Tekrar gnder (${N}s)`:"Tekrar Gnder"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[t("auth.fullName","Ad Soyad")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ds,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"name",value:f.name,onChange:W,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:t("auth.fullNamePlaceholder","Adnz ve soyadnz girin"),required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[t("auth.emailAddress","E-posta Adresi")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Hs,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",name:"email",value:f.email,onChange:W,disabled:V,className:`w-full pl-10 pr-4 py-3 border ${V?"bg-gray-100 text-gray-600 cursor-not-allowed":"border-gray-300"} rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200`,placeholder:t("auth.emailPlaceholder","ornek@email.com"),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("auth.companyName","irket Ad")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ts,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"company",value:f.company,onChange:W,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:t("auth.companyPlaceholder","irket adnz (opsiyonel)")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:t("auth.phone","Telefon")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Co,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"tel",name:"phone",value:f.phone,onChange:W,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:t("auth.phonePlaceholder","0555 123 45 67 (opsiyonel)")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[t("auth.password","ifre")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Yn,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:l?"text":"password",name:"password",value:f.password,onChange:W,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:t("auth.passwordHint","En az 6 karakter"),required:!0}),e.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",children:l?e.jsx($c,{className:"h-5 w-5"}):e.jsx(Zr,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[t("auth.passwordConfirm","ifre Onay")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Yn,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:r?"text":"password",name:"confirmPassword",value:f.confirmPassword,onChange:W,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:t("auth.passwordConfirmPlaceholder","ifrenizi tekrar girin"),required:!0}),e.jsx("button",{type:"button",onClick:()=>s(!r),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",children:r?e.jsx($c,{className:"h-5 w-5"}):e.jsx(Zr,{className:"h-5 w-5"})})]})]}),e.jsx("div",{children:e.jsx(_m,{onToken:B=>y(B)})}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{id:"terms-checkbox",type:"checkbox",checked:d,onChange:B=>n(B.target.checked),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"terms-checkbox",className:"text-sm text-gray-600 leading-5",children:[t("auth.termsText.prefix","unlar kabul ederim: "),e.jsx("a",{href:"#legal/terms",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline transition-colors",children:t("footer.terms","Hizmet artlar")}),t("auth.and"," ve "),e.jsx("a",{href:"#legal/dpa",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline transition-colors",children:t("auth.dataProcessing","Veri leme Szlemesi")}),t("auth.and"," ve "),e.jsx("a",{href:"#legal/privacy",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline transition-colors",children:t("footer.privacy","Gizlilik Politikas")}),t("auth.and"," ve "),e.jsx("a",{href:"#legal/cookies",target:"_blank",className:"text-blue-600 hover:text-blue-700 underline transition-colors",children:t("footer.cookies","erez Politikas")}),t("auth.termsText.suffix"," belgelerini okudum.")]})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:o?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(pp,{className:"h-4 w-4"}),e.jsx("span",{children:t("auth.registerCta","Hesap Olutur")})]})})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[t("auth.alreadyHaveAccount","Zaten hesabnz var m?")," ",e.jsx("button",{onClick:()=>window.location.href="#login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:t("auth.goToLogin","Giri yapn")})]})})]})]})})]})}function g_(){const{t:a,i18n:o}=$t("common"),[t,f]=G.useState(""),[h,d]=G.useState(!1),[n,l]=G.useState(null),[i,r]=G.useState(!1),[s,c]=G.useState(0);_t.useEffect(()=>{if(s<=0)return;const m=setInterval(()=>c(x=>x>0?x-1:0),1e3);return()=>clearInterval(m)},[s]);const u=async m=>{m.preventDefault(),l(null),r(!0);try{if(s>0)return;await yn.forgotPassword(t),d(!0),c(60)}catch(x){l(x?.message||"lem srasnda bir hata olutu")}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("button",{onClick:()=>window.location.hash="login",className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1 mb-4",children:[e.jsx(Xc,{className:"h-4 w-4"})," ",a("back")]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:a("auth.forgotPassword")}),e.jsx("p",{className:"text-gray-600 mb-6",children:a("auth.forgotPasswordHelp")}),h?e.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-4 text-emerald-900",children:a("auth.resetEmailSent")}):e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:a("auth.emailAddress")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Hs,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:m=>f(m.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:a("auth.emailPlaceholder")})]})]}),e.jsx("button",{type:"submit",disabled:i||s>0,className:"w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(wv,{className:"h-4 w-4"})," ",s>0?a("auth.resendIn",{seconds:s}):a("auth.sendResetLink")]})}),n&&e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-red-700",children:n})]})]})})})]})}function Wy(a){return G.useMemo(()=>{const o=new URL(window.location.href);if(o.hash&&o.hash.includes("?")){const t=o.hash.indexOf("?"),f=o.hash.substring(t+1),d=new URLSearchParams(f).get(a);if(d)return d}return o.searchParams.get(a)||""},[])}function x_(){const{t:a,i18n:o}=$t("common"),t=Wy("token"),f=Wy("u"),[h,d]=G.useState(""),[n,l]=G.useState(""),[i,r]=G.useState(!1),[s,c]=G.useState(null),[u,m]=G.useState(!1),[x,b]=G.useState(0),[p,v]=G.useState([]);G.useEffect(()=>{let N=!1;return h?(async()=>{try{const O=(await Mr(()=>import("./main-BxLeqwQQ.js").then(H=>H.m),[])).default(h||"");N||(b(O.score||0),v(O.feedback?.suggestions||[]))}catch{}})():(b(0),v([])),()=>{N=!0}},[h]);const y=async N=>{if(N.preventDefault(),c(null),!h||h.length<8){c(a("auth.passwordTooShort","ifre en az 8 karakter olmal"));return}if(x<3){c(a("auth.passwordTooWeak","Ltfen daha gl bir ifre belirleyin"));return}if(h!==n){c(a("auth.passwordMismatch","ifreler elemiyor"));return}m(!0);try{t&&f?await yn.resetPasswordHashed(t,f,h):await yn.resetPassword(t,h),r(!0)}catch(T){c(T?.message||"lem baarsz")}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("button",{onClick:()=>window.location.hash="login",className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1 mb-4","data-lang":o.language,children:[e.jsx(Xc,{className:"h-4 w-4"})," ",a("back")]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:a("auth.resetPassword","ifre Sfrla")}),e.jsx("p",{className:"text-gray-600 mb-6",children:a("auth.resetPasswordHelp","Yeni ifrenizi belirleyin.")}),i?e.jsxs("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-4 text-emerald-900 flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:a("auth.passwordResetSuccess","ifreniz gncellendi")}),e.jsx("button",{onClick:()=>window.location.hash="login",className:"text-emerald-700 underline",children:a("auth.goToLogin","Girie dn")})]})]}):e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:a("auth.newPassword","Yeni ifre")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Yn,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"password",required:!0,value:h,onChange:N=>d(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:a("auth.passwordPlaceholder","")})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-2 w-full bg-gray-200 rounded",children:e.jsx("div",{className:`h-2 rounded ${x>=3?"bg-emerald-500":x===2?"bg-yellow-500":"bg-red-500"}`,style:{width:`${(x+1)*20}%`}})}),p.length>0&&e.jsx("ul",{className:"mt-1 text-xs text-gray-500 list-disc list-inside",children:p.slice(0,2).map((N,T)=>e.jsx("li",{children:N},T))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:a("auth.confirmPassword","ifreyi Dorula")}),e.jsx("input",{type:"password",required:!0,value:n,onChange:N=>l(N.target.value),className:"w-full pr-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:a("auth.passwordPlaceholder","")})]}),s&&e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-red-700",children:s}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:u?a("common.loading","Ykleniyor..."):a("auth.updatePassword","ifreyi Gncelle")})]})]})})})]})}function Yy(a){return G.useMemo(()=>{const o=new URL(window.location.href);if(o.hash&&o.hash.includes("?")){const t=o.hash.indexOf("?"),f=o.hash.substring(t+1),d=new URLSearchParams(f).get(a);if(d)return d}return o.searchParams.get(a)||""},[])}function y_(){const{t:a}=$t(),o=Yy("token"),t=Yy("u"),[f,h]=G.useState("loading"),[d,n]=G.useState(null),[l,i]=G.useState(5);return G.useEffect(()=>{o&&(async()=>{try{if(o&&t)await yn.verifyEmailHashed(o,t);else if(o)await yn.verifyEmail(o);else throw new Error("Token bulunamad");h("success"),Er.removeItem("pending_verification_email")}catch(s){h("error"),n(s?.message||"Dorulama baarsz")}})()},[o,t]),G.useEffect(()=>{if(f!=="success")return;const r=setInterval(()=>i(c=>c-1),1e3),s=setTimeout(()=>{window.location.hash="login"},5e3);return()=>{clearInterval(r),clearTimeout(s)}},[f]),e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100 text-center",children:[e.jsxs("button",{onClick:()=>window.location.hash="login",className:"text-sm text-gray-500 hover:text-gray-700 inline-flex items-center gap-1 mb-4",children:[e.jsx(Xc,{className:"h-4 w-4"})," ",a("common.back","Geri")]}),f==="loading"&&e.jsx("div",{children:a("common.loading","Ykleniyor...")}),f==="success"&&e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx($s,{className:"h-12 w-12 text-emerald-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a("auth.emailVerified","E-posta doruland")}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[a("auth.redirectingToLogin","Giri sayfasna ynlendiriliyorsunuz...")," (",l,")"]}),e.jsx("button",{onClick:()=>window.location.hash="login",className:"text-blue-600 underline",children:a("auth.goToLogin","Girie dn")})]}),f==="error"&&e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Tl,{className:"h-12 w-12 text-red-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a("auth.verificationFailed","Dorulama baarsz")}),d&&e.jsx("p",{className:"text-gray-600",children:d}),e.jsx("button",{onClick:()=>{t?window.location.hash="login":window.location.hash="register"},className:"text-sm text-blue-600 underline mt-2",children:a("auth.backToStart","Baa dn")})]})]})})})]})}function b_(){const{t:a}=$t(),o=()=>{const r=Er.getItem("pending_verification_cooldown_until");if(!r)return null;const s=parseInt(r,10);return Number.isFinite(s)?s:null},[t,f]=G.useState(()=>{const r=o();return r?Math.max(0,Math.ceil((r-Date.now())/1e3)):0}),[h,d]=G.useState(()=>o()),n=G.useMemo(()=>Er.getItem("pending_verification_email")||"",[]);G.useEffect(()=>{if(!h){f(0);return}const r=()=>{const c=Math.max(0,Math.ceil((h-Date.now())/1e3));f(c),c<=0&&(d(null),Er.removeItem("pending_verification_cooldown_until"))};r();const s=setInterval(r,1e3);return()=>clearInterval(s)},[h]);const l=()=>{const r=Date.now()+6e4;d(r),f(60),Er.setItem("pending_verification_cooldown_until",r.toString())},i=async()=>{if(n&&!(t>0))try{await yn.resendVerification(n),l()}catch{l()}};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100 text-center",children:[e.jsxs("button",{onClick:()=>window.location.hash="login",className:"text-sm text-gray-500 hover:text-gray-700 inline-flex items-center gap-1 mb-4",children:[e.jsx(Xc,{className:"h-4 w-4"})," ",a("common.back","Geri")]}),e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-blue-600 text-white flex items-center justify-center",children:e.jsx(Hs,{className:"h-8 w-8"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:a("auth.verifyYourEmail","E-postanz dorulayn")}),e.jsx("p",{className:"text-gray-600 mb-6",children:n?e.jsxs(e.Fragment,{children:[a("auth.verifySentTo","Dorulama balants e-posta adresinize gnderildi:")," ",e.jsx("strong",{children:n})]}):a("auth.verifySent","E-posta adresinize dorulama balants gnderdik.")}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsxs("button",{onClick:i,disabled:!n||t>0,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 text-white disabled:opacity-50",children:[e.jsx(Hc,{className:"h-4 w-4"}),t>0?a("auth.resendIn",{seconds:t,defaultValue:"Tekrar gndermek iin bekleyin: {{seconds}}s"}):a("auth.resend","Tekrar gnder")]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(RA,{className:"h-3 w-3"}),a("auth.resendCooldown","Gvenlik iin 60 saniye bekleme uygulanr")]})]})]})})})]})}const v_=({onTryForFree:a,onSignIn:o})=>{const{t}=$t(),{currentLanguage:f,changeLanguage:h,languages:d}=Vi(),{isAuthenticated:n}=Gs(),[l,i]=G.useState(!1),[r,s]=G.useState(!1),[c,u]=G.useState(!1);G.useEffect(()=>{const b=()=>{u(window.scrollY>0)};return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)},[]);const m=[{key:"features",href:"#features",label:t("landing.nav.features")},{key:"pricing",href:"#pricing",label:t("landing.nav.pricing")},{key:"faq",href:"#faq",label:t("landing.nav.faq")},{key:"contact",href:"#contact",label:t("landing.nav.contact")}],x=b=>{const p=document.querySelector(b);p&&p.scrollIntoView({behavior:"smooth"}),i(!1)};return e.jsx("nav",{className:`fixed left-0 right-0 z-40 transition-all duration-300 ${c?"bg-white/95 backdrop-blur-md shadow-sm":"bg-transparent"}`,style:{top:"var(--announcement-bar-height, 0px)"},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(Tm,{className:"h-16 w-auto"})})}),e.jsx("div",{className:"hidden md:flex items-center space-x-8",children:m.map(b=>e.jsx("button",{onClick:()=>x(b.href),className:"text-gray-700 hover:text-gray-900 px-3 py-2 text-sm font-medium transition-colors",children:b.label},b.key))}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!r),className:"flex items-center space-x-1 text-gray-700 hover:text-gray-900 px-3 py-2 text-sm font-medium transition-colors","aria-expanded":r,"aria-haspopup":"true",children:[e.jsx("span",{className:"text-lg",children:d.find(b=>b.code===f)?.flag}),e.jsx(bs,{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsx("div",{className:"py-1",children:d.map(b=>e.jsxs("button",{onClick:()=>{h(b.code),s(!1)},className:`${f===b.code?"bg-gray-100 text-gray-900":"text-gray-700"} group flex items-center px-4 py-2 text-sm w-full hover:bg-gray-50`,children:[e.jsx("span",{className:"mr-3 text-lg",children:b.flag}),b.name]},b.code))})})]}),e.jsx("button",{onClick:()=>{n?window.location.hash="":o()},className:"text-gray-700 hover:text-gray-900 px-4 py-2 text-sm font-medium transition-colors",children:n?"Dashboard":t("landing.cta.signin")}),e.jsx("button",{onClick:a,className:"bg-gray-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2",children:t("landing.cta.try")})]}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:()=>i(!l),className:"text-gray-700 hover:text-gray-900 p-2","aria-expanded":l,"aria-label":"Toggle navigation menu",children:l?e.jsx(Nr,{className:"h-6 w-6"}):e.jsx(xv,{className:"h-6 w-6"})})})]}),l&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-white border-t border-gray-200",children:[m.map(b=>e.jsx("button",{onClick:()=>x(b.href),className:"text-gray-700 hover:text-gray-900 block px-3 py-2 text-base font-medium w-full text-left",children:b.label},b.key)),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"px-3 py-2 text-sm font-medium text-gray-500",children:"Language"}),d.map(b=>e.jsxs("button",{onClick:()=>{h(b.code),i(!1)},className:`${f===b.code?"bg-gray-100 text-gray-900":"text-gray-700"} flex items-center px-3 py-2 text-base font-medium w-full hover:bg-gray-50`,children:[e.jsx("span",{className:"mr-3 text-lg",children:b.flag}),b.name]},b.code))]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[e.jsx("button",{onClick:()=>{n?window.location.hash="":o()},className:"text-gray-700 hover:text-gray-900 block px-3 py-2 text-base font-medium w-full text-left",children:n?"Dashboard":t("landing.cta.signin")}),e.jsx("button",{onClick:a,className:"bg-gray-900 text-white px-3 py-2 rounded-lg text-base font-medium hover:bg-gray-800 transition-colors w-full",children:t("landing.cta.try")})]})]})})]})})},Qy={info:"bg-blue-50 text-blue-800 border border-blue-200",warning:"bg-amber-50 text-amber-800 border border-amber-200",critical:"bg-red-50 text-red-800 border border-red-200"},uw=({settings:a})=>{const[o,t]=G.useState(a||null);G.useEffect(()=>{let r=!1;if(!a)return(async()=>{try{const s=await Gc.getSettings();r||t(s)}catch{}})(),()=>{r=!0}},[a]),G.useEffect(()=>{if(a)return;const r=async()=>{try{const s=await Gc.getSettings();t(s)}catch{}};return window.addEventListener("siteSettingsUpdated",r),()=>{window.removeEventListener("siteSettingsUpdated",r)}},[a]);const f=o||{},h=!!f.announcementEnabled&&!!(f.announcementMessage||"").toString().trim(),d=f.announcementType||"info",n=!!f.maintenanceModeEnabled,l=(f.maintenanceMessage||"").toString().trim();G.useEffect(()=>(h||n?document.body.classList.add("has-announcement-bar"):document.body.classList.remove("has-announcement-bar"),()=>{document.body.classList.remove("has-announcement-bar")}),[h,n]);const i=G.useRef(null);return G.useEffect(()=>{const r=i.current;if(!r)return;const s=r.offsetHeight;document.documentElement.style.setProperty("--announcement-bar-height",s+"px")},[h,n,f.announcementMessage]),!h&&!n?(document.documentElement.style.setProperty("--announcement-bar-height","0px"),null):e.jsxs("div",{ref:i,className:"fixed top-0 left-0 w-full z-[100] font-medium shadow-sm",children:[n&&e.jsx("div",{className:"w-full text-center text-xs md:text-sm px-3 py-1 bg-yellow-50 text-yellow-900 border-b border-yellow-200",children:l?e.jsxs(e.Fragment,{children:["Bakm modu aktif: ",l]}):e.jsx(e.Fragment,{children:"Bakm modu aktif: Sistem geici olarak salt okunur."})}),h&&e.jsx("div",{className:`w-full ${Qy[d]||Qy.info} px-0 py-0 border-t-0`,children:e.jsx("div",{className:"announcement-marquee-wrapper h-11 flex items-center",children:e.jsx("div",{className:"announcement-marquee text-sm",children:f.announcementMessage})})})]})},w_=({onTryForFree:a,onSignIn:o,onWatchDemo:t})=>{const{t:f}=$t();return e.jsxs("div",{className:"relative bg-gradient-to-br from-gray-50 via-white to-blue-50/30 pt-24 pb-20 sm:pt-32 sm:pb-24 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-gradient-to-br from-blue-100/40 to-indigo-100/40 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-96 h-96 bg-gradient-to-br from-emerald-100/40 to-green-100/40 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-gradient-to-br from-purple-100/30 to-pink-100/30 rounded-full blur-2xl"})]}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-white/80 backdrop-blur-sm border border-gray-200 text-gray-700 text-sm font-medium mb-8 shadow-sm",children:[e.jsx("img",{src:"/favicon-32x32.png",alt:"Comptario",className:"mr-2 w-4 h-4 rounded-sm"}),f("landing.hero.badge")]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight",children:f("landing.hero.title")}),e.jsx("p",{className:"text-lg text-gray-600 mb-8 max-w-2xl mx-auto md:mx-0 leading-relaxed",children:f("landing.hero.sub")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center md:justify-start items-center mb-12",children:[e.jsxs("button",{onClick:a,className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[f("landing.cta.try"),e.jsx(Nl,{className:"h-5 w-5"})]}),e.jsx("button",{onClick:o,className:"bg-white/80 backdrop-blur-sm text-gray-900 px-8 py-4 rounded-lg text-lg font-semibold border-2 border-gray-300 hover:border-gray-400 hover:bg-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2",children:f("landing.cta.signin")})]}),e.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start items-center gap-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),e.jsx("span",{children:f("landing.hero.features.pdf")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:f("landing.hero.features.currency")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:f("landing.hero.features.vat")})]})]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50/80 px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"comptario.com"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:"/favicon-32x32.png",alt:"Comptario",className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Comptario"})]})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-4 rounded-2xl border border-emerald-200",children:[e.jsx("div",{className:"text-emerald-600 font-semibold text-lg",children:"2,450"}),e.jsx("div",{className:"text-sm text-gray-600",children:f("landing.hero.mockup.revenue")})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-2xl border border-blue-200",children:[e.jsx("div",{className:"text-blue-600 font-semibold text-lg",children:"1,280"}),e.jsx("div",{className:"text-sm text-gray-600",children:f("landing.hero.mockup.expenses")})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-2xl border border-purple-200",children:[e.jsx("div",{className:"text-purple-600 font-semibold text-lg",children:"441"}),e.jsx("div",{className:"text-sm text-gray-600",children:f("landing.hero.mockup.vat")})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/50 rounded-2xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(Fr,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Invoice #INV-2024-001"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Account ABC Ltd."})]})]}),e.jsx("div",{className:"text-emerald-600 font-semibold",children:"850"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50/50 rounded-2xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ja,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Office Supplies"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Supplier XYZ"})]})]}),e.jsx("div",{className:"text-red-600 font-semibold",children:"125"})]})]})]})]})})]})})]})},N_=()=>{const{t:a}=$t(),o=[{icon:Fr,title:a("landing.features.inv.title"),description:a("landing.features.inv.desc"),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{icon:un,title:a("landing.features.exp.title"),description:a("landing.features.exp.desc"),color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},{icon:Cm,title:a("landing.features.vat.title"),description:a("landing.features.vat.desc"),color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},{icon:lA,title:a("landing.features.fx.title"),description:a("landing.features.fx.desc"),color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}];return e.jsx("section",{id:"features",className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:a("landing.features.title")}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:a("landing.features.subtitle")})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:o.map((t,f)=>{const h=t.icon;return e.jsxs("div",{className:`relative p-6 rounded-2xl border ${t.borderColor} ${t.bgColor} hover:shadow-lg transition-all duration-300 hover:scale-105 group`,children:[e.jsx("div",{className:`w-12 h-12 ${t.bgColor} rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300`,children:e.jsx(h,{className:`h-6 w-6 ${t.color}`})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:t.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description}),e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-transparent to-transparent group-hover:from-white/20 group-hover:to-transparent transition-all duration-300 pointer-events-none"})]},f)})})]})})},k_=()=>{const{t:a}=$t(),o="#register",t=()=>{if(o.startsWith("#")){window.location.hash=o.replace("#","");return}window.location.href=o},f=[{icon:Ls,title:a("landing.value.freelancers.title"),description:a("landing.value.freelancers.desc"),features:[a("landing.value.freelancers.basic"),a("landing.value.freelancers.expense"),a("landing.value.freelancers.tax")]},{icon:ts,title:a("landing.value.small.title"),description:a("landing.value.small.desc"),features:[a("landing.value.small.currency"),a("landing.value.small.customer"),a("landing.value.small.reporting")]},{icon:fs,title:a("landing.value.growing.title"),description:a("landing.value.growing.desc"),features:[a("landing.value.growing.team"),a("landing.value.growing.api"),a("landing.value.growing.support")]}];return e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:a("landing.value.title")}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:a("landing.value.subtitle")})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:f.map((h,d)=>{const n=h.icon;return e.jsxs("div",{className:`bg-white p-8 rounded-2xl shadow-sm border transition-all duration-300 hover:shadow-lg ${d===0?"border-blue-200 hover:border-blue-300":d===1?"border-emerald-200 hover:border-emerald-300":"border-purple-200 hover:border-purple-300"}`,children:[e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center mb-6 ${d===0?"bg-blue-500":d===1?"bg-emerald-500":"bg-purple-500"}`,children:e.jsx(n,{className:"h-7 w-7 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:h.title}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:h.description}),e.jsx("ul",{className:"space-y-3",children:h.features.map((l,i)=>e.jsxs("li",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(cs,{className:`h-4 w-4 mr-3 flex-shrink-0 ${d===0?"text-blue-500":d===1?"text-emerald-500":"text-purple-500"}`}),l]},i))})]},d)})}),e.jsx("div",{className:"mt-16 text-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-200 max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:a("landing.value.cta.title")}),e.jsx("p",{className:"text-gray-600 mb-6",children:a("landing.value.cta.subtitle")}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsx("button",{onClick:t,className:"bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-800 transition-colors",children:a("landing.value.cta.trial")})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-8 pt-8 border-t border-gray-200",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"10k+"}),e.jsx("div",{className:"text-sm text-gray-600",children:a("landing.value.stats.users")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"50k+"}),e.jsx("div",{className:"text-sm text-gray-600",children:a("landing.value.stats.invoices")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"99.9%"}),e.jsx("div",{className:"text-sm text-gray-600",children:a("landing.value.stats.uptime")})]})]})]})})]})})},j_=()=>{const{t:a}=$t(),o=[{icon:zs,title:a("landing.security.features.hosting.title"),description:a("landing.security.features.hosting.desc")},{icon:Yn,title:a("landing.security.features.encryption.title"),description:a("landing.security.features.encryption.desc")},{icon:sm,title:a("landing.security.features.backups.title"),description:a("landing.security.features.backups.desc")},{icon:dA,title:a("landing.security.features.gdpr.title"),description:a("landing.security.features.gdpr.desc")},{icon:oa,title:a("landing.security.features.monitoring.title"),description:a("landing.security.features.monitoring.desc")},{icon:FA,title:a("landing.security.features.uptime.title"),description:a("landing.security.features.uptime.desc")}];return e.jsx("section",{id:"security",className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-green-100 text-green-700 text-sm font-medium mb-4",children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),a("landing.security.badge")]}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:a("landing.security.title")}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:a("landing.security.items")})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:o.map((t,f)=>{const h=t.icon;return e.jsxs("div",{className:"text-center p-6 rounded-xl border border-gray-200 hover:border-green-200 hover:shadow-lg transition-all duration-300 hover:bg-green-50/30",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx(h,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:t.description})]},f)})}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 rounded-2xl p-8 md:p-10 border border-green-100/60 shadow-sm text-center",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-3",children:a("landing.security.trusted.title")}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-3xl mx-auto",children:a("landing.security.trusted.desc")}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-8 items-stretch",children:[e.jsx("div",{"aria-label":"GDPR",className:"group relative overflow-hidden rounded-xl bg-white/80 backdrop-blur-sm border border-gray-200 hover:border-blue-200 shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-5 md:p-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center mb-3",children:e.jsx(_A,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"GDPR"}),e.jsx("div",{className:"text-xs text-gray-500",children:a("landing.security.trusted.gdpr")})]})}),e.jsx("div",{"aria-label":"ISO 27001",className:"group relative overflow-hidden rounded-xl bg-white/80 backdrop-blur-sm border border-gray-200 hover:border-blue-200 shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-5 md:p-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-50 text-emerald-600 flex items-center justify-center mb-3",children:e.jsx(JC,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"ISO 27001"}),e.jsx("div",{className:"text-xs text-gray-500",children:a("landing.security.trusted.iso")})]})}),e.jsx("div",{"aria-label":"SOC 2",className:"group relative overflow-hidden rounded-xl bg-white/80 backdrop-blur-sm border border-gray-200 hover:border-blue-200 shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-5 md:p-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-50 text-purple-600 flex items-center justify-center mb-3",children:e.jsx(zs,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"SOC 2"}),e.jsx("div",{className:"text-xs text-gray-500",children:a("landing.security.trusted.soc")})]})}),e.jsx("div",{"aria-label":"SSL",className:"group relative overflow-hidden rounded-xl bg-white/80 backdrop-blur-sm border border-gray-200 hover:border-blue-200 shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-5 md:p-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-50 text-amber-600 flex items-center justify-center mb-3",children:e.jsx(Yn,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-sm font-semibold text-gray-800",children:"SSL"}),e.jsx("div",{className:"text-xs text-gray-500",children:a("landing.security.trusted.ssl")})]})})]})]})]})})},S_=()=>{const{t:a}=$t(),o=[{name:"Sarah Johnson",role:a("landing.testimonials.sarah.role"),company:a("landing.testimonials.sarah.company"),content:a("landing.testimonials.sarah.content"),rating:5,avatar:""},{name:"Marcus Weber",role:a("landing.testimonials.marcus.role"),company:a("landing.testimonials.marcus.company"),content:a("landing.testimonials.marcus.content"),rating:5,avatar:""},{name:"Elena Rodriguez",role:a("landing.testimonials.elena.role"),company:a("landing.testimonials.elena.company"),content:a("landing.testimonials.elena.content"),rating:5,avatar:""}];return e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:a("landing.testimonials.title")}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:a("landing.testimonials.subtitle")})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((t,f)=>e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-200 hover:shadow-lg transition-all duration-300 relative",children:[e.jsx("div",{className:"absolute top-6 right-6 text-gray-200",children:e.jsx(vv,{className:"h-8 w-8"})}),e.jsx("div",{className:"flex items-center mb-4",children:[...Array(t.rating)].map((h,d)=>e.jsx(Kc,{className:"h-5 w-5 text-yellow-400 fill-current"},d))}),e.jsxs("blockquote",{className:"text-gray-700 mb-6 leading-relaxed",children:['"',t.content,'"']}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-2xl mr-4",children:t.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.role,", ",t.company]})]})]})]},f))}),e.jsx("div",{className:"mt-16 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:"4.9/5"}),e.jsx("div",{className:"text-sm text-gray-600",children:a("landing.testimonials.stats.rating")})]}),e.jsx("div",{className:"w-px h-12 bg-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:"10,000+"}),e.jsx("div",{className:"text-sm text-gray-600",children:a("landing.testimonials.stats.customers")})]}),e.jsx("div",{className:"w-px h-12 bg-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:"50+"}),e.jsx("div",{className:"text-sm text-gray-600",children:a("landing.testimonials.stats.countries")})]})]})})]})})},C_=({loginUrl:a})=>{const{t:o}=$t(),t=[{name:o("landing.pricing.planNames.starter"),price:o("landing.pricing.price.free"),priceMonthly:o("landing.pricing.price.free"),annualLine:o("landing.pricing.annualLine.free",""),description:o("landing.pricing.plans.starter.desc"),features:[o("landing.pricing.features.users1"),o("landing.pricing.features.invoices5"),o("landing.pricing.features.expenses5"),o("landing.pricing.features.vat"),o("landing.pricing.features.pdf"),o("landing.pricing.features.quotesBasic")],cta:o("landing.pricing.ctaStarter"),popular:!1},{name:o("landing.pricing.planNames.pro"),price:o("landing.pricing.price.pro"),priceMonthly:o("landing.pricing.price.pro"),annualLine:o("landing.pricing.annualLine.pro"),description:o("landing.pricing.plans.pro.desc"),features:[o("landing.pricing.features.users3"),o("landing.pricing.features.quoteTemplate1"),o("landing.pricing.features.unlimitedInvoicesExpenses"),o("landing.pricing.features.customerSupplierUnlimited"),o("landing.pricing.features.quotesBasic"),o("landing.pricing.features.products"),o("landing.pricing.features.reports")],cta:o("landing.pricing.ctaPro"),popular:!0},{name:o("landing.pricing.planNames.business"),price:o("landing.pricing.price.biz"),priceMonthly:o("landing.pricing.price.biz"),annualLine:o("landing.pricing.annualLine.biz",""),description:o("landing.pricing.plans.business.desc"),features:[o("landing.pricing.features.everythingPro"),o("landing.pricing.features.users10"),o("landing.pricing.features.quoteTemplatesUnlimited"),o("landing.pricing.features.saveListViews"),o("landing.pricing.features.dedicatedSupport")],cta:o("landing.pricing.ctaBusiness"),popular:!1}],f=()=>{if(a.startsWith("#")){window.location.hash=a.replace("#","");return}if(a==="/register"){window.location.hash="register";return}if(a==="/login"){window.location.hash="login";return}window.location.href=a};return e.jsx("section",{id:"pricing",className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:o("landing.pricing.title")}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:o("landing.pricing.subtitle")})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto",children:t.map((h,d)=>e.jsxs("div",{className:`relative rounded-2xl border-2 p-8 ${h.popular?"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-500 shadow-xl scale-105":"bg-white border-gray-200 hover:border-gray-300"} transition-all duration-300 hover:shadow-lg`,children:[h.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsxs("span",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-4 py-1 rounded-full text-sm font-medium flex items-center shadow-lg",children:[e.jsx(Kc,{className:"h-4 w-4 mr-1 fill-current"}),o("landing.pricing.popular")]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:h.name}),e.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-3",children:h.priceMonthly}),h.annualLine&&e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:h.annualLine}),e.jsx("p",{className:"text-gray-600",children:h.description}),(d===1||d===2)&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:o("landing.pricing.pro.extraUser")})]}),e.jsx("ul",{className:"space-y-4 mb-8",children:h.features.map((n,l)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(cs,{className:`h-5 w-5 mr-3 flex-shrink-0 ${h.popular?"text-blue-500":"text-emerald-500"}`}),e.jsx("span",{className:"text-gray-700",children:n})]},l))}),e.jsxs("button",{onClick:f,className:`w-full py-3 px-6 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center ${h.popular?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white hover:from-blue-600 hover:to-indigo-600 shadow-lg hover:shadow-xl":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:[h.cta,e.jsx(Nl,{className:"h-4 w-4 ml-2"})]}),d===0&&e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:o("landing.pricing.features.noCredit")})]},d))}),e.jsxs("div",{className:"max-w-6xl mx-auto mt-12",children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3",children:e.jsx("div",{className:"flex justify-center lg:col-start-2 lg:col-span-1",children:e.jsxs("div",{className:"inline-flex flex-col sm:flex-row items-center gap-3 bg-gray-50 border border-gray-200 rounded-xl px-4 py-2 w-fit",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(tm,{className:"h-5 w-5 text-gray-500 mr-2"}),e.jsx("span",{children:o("landing.pricing.notes.vatAndCurrency")})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(cs,{className:"h-5 w-5 text-emerald-500 mr-2"}),e.jsx("span",{children:o("landing.pricing.notes.cancelAnytime")})]})]})})}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:o("landing.pricing.trust")})]}),e.jsx("div",{className:"text-center mt-16",children:e.jsxs("p",{className:"text-gray-600",children:[o("landing.pricing.questions")," ",e.jsx("button",{onClick:()=>{const h=document.getElementById("faq");h&&h.scrollIntoView({behavior:"smooth"})},className:"text-gray-900 font-medium hover:underline",children:o("landing.pricing.checkFaq")})," ",o("landing.pricing.or")," ",e.jsx("a",{href:"mailto:support@comptario.com",className:"text-gray-900 font-medium hover:underline",children:o("landing.pricing.contactSupport")})]})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center px-6 py-3 rounded-full bg-green-100 text-green-700",children:[e.jsx(cs,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:o("landing.pricing.guarantee")})]})})]})})},A_=()=>{const{t:a}=$t(),[o,t]=G.useState(0),f=[{question:a("landing.faq.q1"),answer:a("landing.faq.a1")},{question:a("landing.faq.q2"),answer:a("landing.faq.a2")},{question:a("landing.faq.q3"),answer:a("landing.faq.a3")},{question:a("landing.faq.q4"),answer:a("landing.faq.a4")},{question:a("landing.faq.q5"),answer:a("landing.faq.a5")},{question:a("landing.faq.q6"),answer:a("landing.faq.a6")}],h=d=>{t(o===d?null:d)};return e.jsx("section",{id:"faq",className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:a("landing.faq.title")}),e.jsxs("p",{className:"text-xl text-gray-600",children:[a("landing.faq.subtitle")," ",e.jsx("a",{href:"mailto:support@comptario.com",className:"text-gray-900 font-medium hover:underline",children:a("landing.faq.contactUs")}),"."]})]}),e.jsx("div",{className:"space-y-4",children:f.map((d,n)=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:border-blue-200 transition-colors",children:[e.jsxs("button",{onClick:()=>h(n),className:"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-blue-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset","aria-expanded":o===n,children:[e.jsx("span",{className:"font-semibold text-gray-900 pr-4",children:d.question}),o===n?e.jsx(qs,{className:"h-5 w-5 text-gray-500 flex-shrink-0"}):e.jsx(bs,{className:"h-5 w-5 text-gray-500 flex-shrink-0"})]}),o===n&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:d.answer})})]},n))}),e.jsx("div",{className:"mt-16 text-center",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-8 rounded-2xl shadow-sm border border-blue-100",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:a("landing.faq.support.title")}),e.jsx("p",{className:"text-gray-600 mb-6",children:a("landing.faq.support.desc")}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsx("a",{href:"mailto:support@comptario.com",className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 text-center shadow-lg hover:shadow-xl",children:a("landing.faq.support.contact")})})]})})]})})},T_=({loginUrl:a})=>{const{t:o}=$t(),t=()=>{if(a.startsWith("#")){window.location.hash=a.replace("#","");return}if(a==="/register"){window.location.hash="register";return}if(a==="/login"){window.location.hash="login";return}window.location.href=a};return e.jsx("section",{className:"py-16 bg-gradient-to-br from-gray-900 to-gray-800",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -top-10 -left-10 w-20 h-20 bg-blue-500/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-20 h-20 bg-purple-500/10 rounded-full blur-xl"}),e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-2xl mb-8",children:e.jsx(Kp,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-6 leading-tight",children:o("landing.finalCta.title")}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto leading-relaxed",children:o("landing.finalCta.subtitle")}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-8",children:e.jsxs("button",{onClick:t,className:"bg-white text-gray-900 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-all duration-300 flex items-center gap-2 shadow-xl hover:shadow-2xl transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-900",children:[e.jsx(PA,{className:"h-5 w-5"}),o("landing.finalCta.cta"),e.jsx(Nl,{className:"h-5 w-5"})]})}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8 text-gray-400 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsx("span",{children:o("landing.finalCta.trial")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{children:o("landing.finalCta.noSetup")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),e.jsx("span",{children:o("landing.finalCta.cancel")})]})]})]}),e.jsx("div",{className:"mt-16 pt-8 border-t border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"10,000+"}),e.jsx("div",{className:"text-gray-400 text-sm",children:o("landing.value.stats.users")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"500,000+"}),e.jsx("div",{className:"text-gray-400 text-sm",children:o("landing.value.stats.invoices")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"50+"}),e.jsx("div",{className:"text-gray-400 text-sm",children:o("landing.finalCta.stats.countries")})]})]})})]})})},E_=()=>{const{currentLanguage:a,changeLanguage:o,languages:t}=Vi(),f=new Date().getFullYear(),d={tr:{product:"RN",features:"zellikler",pricing:"Fiyatlar",security:"Gvenlik",api:"API",company:"RKET",about:"Hakknda",support:"DESTEK",helpCenter:"Yardm Merkezi",contactUs:"letiim",community:"Topluluk",legal:"HUKUK",privacy:"Gizlilik Politikas",terms:"Hizmet artlar",cookies:"erez Politikas",emailPolicy:"E-posta Politikas",subprocessors:"Alt leyiciler",imprint:"Knye",description:"Modern iletmeler iin basit, gvenli n muhasebe yazlm. Faturalar, giderleri ve KDV'yi gvenle ynetin.",email:"support@comptario.com",languages:"4 dilde mevcut",gdprCompliant:"GDPR Uyumlu",stayUpdated:"Gncel kaln",updatesDesc:"Yeni zellikler ve en iyi uygulamalar hakknda gncellemeler aln.",emailPlaceholder:"E-posta adresinizi girin",subscribe:"Abone Ol",copyright:` ${f} Comptario. Tm haklar sakldr.`,madeWith:"Avrupa'da  ile yapld"},en:{product:"PRODUCT",features:"Features",pricing:"Pricing",security:"Security",api:"API",company:"COMPANY",about:"About",support:"SUPPORT",helpCenter:"Help Center",contactUs:"Contact Us",community:"Community",legal:"LEGAL",privacy:"Privacy Policy",terms:"Terms of Service",cookies:"Cookie Policy",emailPolicy:"Email Policy",subprocessors:"Subprocessors",imprint:"Imprint",description:"Simple, secure pre-accounting software for modern businesses. Manage invoices, expenses, and VAT with confidence.",email:"support@comptario.com",languages:"Available in 4 languages",gdprCompliant:"GDPR Compliant",stayUpdated:"Stay updated",updatesDesc:"Get the latest updates on new features and best practices.",emailPlaceholder:"Enter your email",subscribe:"Subscribe",copyright:` ${f} Comptario. All rights reserved.`,madeWith:"Made with  in Europe"},de:{product:"PRODUKT",features:"Funktionen",pricing:"Preise",security:"Sicherheit",api:"API",company:"UNTERNEHMEN",about:"ber uns",support:"SUPPORT",helpCenter:"Hilfe Center",contactUs:"Kontakt",community:"Community",legal:"RECHTLICHES",privacy:"Datenschutz",terms:"Nutzungsbedingungen",cookies:"Cookie-Richtlinie",emailPolicy:"E-Mail-Richtlinie",subprocessors:"Unterauftragsverarbeiter",imprint:"Impressum",description:"Einfache, sichere Vorbuchhaltungssoftware fr moderne Unternehmen. Verwalten Sie Rechnungen, Ausgaben und MwSt. mit Vertrauen.",email:"support@comptario.com",languages:"In 4 Sprachen verfgbar",gdprCompliant:"DSGVO-konform",stayUpdated:"Bleiben Sie auf dem Laufenden",updatesDesc:"Erhalten Sie die neuesten Updates zu neuen Funktionen und bewhrten Praktiken.",emailPlaceholder:"E-Mail eingeben",subscribe:"Abonnieren",copyright:` ${f} Comptario. Alle Rechte vorbehalten.`,madeWith:"Mit  in Europa gemacht"},fr:{product:"PRODUIT",features:"Fonctionnalits",pricing:"Prix",security:"Scurit",api:"API",company:"ENTREPRISE",about:" propos",support:"SUPPORT",helpCenter:"Centre d'aide",contactUs:"Nous contacter",community:"Communaut",legal:"JURIDIQUE",privacy:"Politique de confidentialit",terms:"Conditions de service",cookies:"Politique des cookies",emailPolicy:"Politique e-mail",subprocessors:"Sous-traitants",imprint:"Mentions lgales",description:"Logiciel de pr-comptabilit simple et scuris pour les entreprises modernes. Grez les factures, les dpenses et la TVA en toute confiance.",email:"support@comptario.com",languages:"Disponible en 4 langues",gdprCompliant:"Conforme RGPD",stayUpdated:"Restez inform",updatesDesc:"Recevez les dernires mises  jour sur les nouvelles fonctionnalits et les meilleures pratiques.",emailPlaceholder:"Entrez votre e-mail",subscribe:"S'abonner",copyright:` ${f} Comptario. Tous droits rservs.`,madeWith:"Fait avec  en Europe"}}[a],n=[{title:d.product,links:[{name:d.features,href:"#features"},{name:d.pricing,href:"#pricing"},{name:d.security,href:"#security"},{name:d.api,href:"#api"}]},{title:d.company,links:[{name:d.about,href:"#about"}]},{title:d.support,links:[{name:d.helpCenter,href:"#help"},{name:d.contactUs,href:"mailto:support@comptario.com"}]},{title:d.legal,links:[{name:d.privacy,href:"#legal/privacy"},{name:d.terms,href:"#legal/terms"},{name:d.cookies,href:"#legal/cookies"},{name:d.emailPolicy,href:"#legal/email-policy"},{name:"DPA",href:"#legal/dpa"},{name:d.subprocessors,href:"#legal/subprocessors"},{name:d.imprint,href:"#legal/imprint"}]}],l=i=>{if(i.startsWith("#legal/"))window.location.hash=i;else if(i==="#help")window.location.hash="help";else if(i==="#about")window.location.hash="about";else if(i==="#api")window.location.hash="api";else if(i.startsWith("#")){const r=document.querySelector(i);r&&r.scrollIntoView({behavior:"smooth"})}};return e.jsx("footer",{id:"contact",className:"bg-gray-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsx("img",{src:"/logo-2.png",alt:"Comptario",className:"h-24 w-auto"})}),e.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:d.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-gray-400",children:[e.jsx(Hs,{className:"h-4 w-4"}),e.jsx("a",{href:"mailto:support@comptario.com",className:"hover:text-white transition-colors",children:d.email})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-gray-400",children:[e.jsx(oa,{className:"h-4 w-4"}),e.jsx("span",{children:d.languages})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-gray-400",children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsx("span",{children:d.gdprCompliant})]})]})]}),n.map((i,r)=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wide mb-4",children:i.title}),e.jsx("ul",{className:"space-y-3",children:i.links.map((s,c)=>e.jsx("li",{children:s.href.startsWith("#")?e.jsx("button",{onClick:()=>l(s.href),className:"text-gray-400 hover:text-white transition-colors text-sm",children:s.name}):e.jsx("a",{href:s.href,className:"text-gray-400 hover:text-white transition-colors text-sm",...s.href.startsWith("mailto:")?{}:{target:"_blank",rel:"noopener noreferrer"},children:s.name})},c))})]},r))]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:d.copyright}),e.jsxs("div",{className:"flex items-center space-x-6 mt-4 md:mt-0",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:d.madeWith}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oa,{className:"h-4 w-4 text-gray-400"}),e.jsx("div",{className:"flex items-center space-x-1",children:t.map(i=>e.jsx("button",{onClick:()=>o(i.code),className:`px-2 py-1 rounded text-sm transition-colors ${a===i.code?"bg-white text-gray-900":"text-gray-400 hover:text-white"}`,title:i.name,children:i.flag},i.code))})]})]})]})]})})},D_=({onClose:a})=>{G.useEffect(()=>{const t=f=>{f.key==="Escape"&&a()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[a]),G.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const o=t=>{t.target===t.currentTarget&&a()};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",onClick:o,children:e.jsxs("div",{className:"relative bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-colors","aria-label":"Close video",children:e.jsx(Nr,{className:"h-5 w-5"})}),e.jsx("div",{className:"aspect-video bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(yv,{className:"h-10 w-10 ml-1"})}),e.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Comptario Demo"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"See how easy it is to manage your pre-accounting with Comptario"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Demo video coming soon. In the meantime, try our free trial!"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Comptario Product Demo"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Discover how Comptario can streamline your invoicing, expense tracking, and VAT management in just a few minutes."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>{a(),window.open("/login","_blank")},className:"bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center gap-2",children:"Start Free Trial"}),e.jsx("button",{onClick:a,className:"text-gray-700 hover:text-gray-900 px-6 py-3 rounded-lg font-semibold transition-colors",children:"Close"})]})]})]})})},__=()=>{const{t:a,i18n:o}=$t(),[t,f]=G.useState(!1),h="#register";G.useEffect(()=>{document.title=a("landing.seo.title");const r=document.querySelector('meta[name="description"]');if(r)r.setAttribute("content",a("landing.seo.description"));else{const v=document.createElement("meta");v.name="description",v.content=a("landing.seo.description"),document.head.appendChild(v)}const s=document.querySelector('meta[property="og:title"]');if(s)s.setAttribute("content",a("landing.seo.title"));else{const v=document.createElement("meta");v.setAttribute("property","og:title"),v.content=a("landing.seo.title"),document.head.appendChild(v)}const c=document.querySelector('meta[property="og:description"]');if(c)c.setAttribute("content",a("landing.seo.description"));else{const v=document.createElement("meta");v.setAttribute("property","og:description"),v.content=a("landing.seo.description"),document.head.appendChild(v)}const u=document.querySelector('link[rel="canonical"]');if(u)u.setAttribute("href",window.location.origin);else{const v=document.createElement("link");v.rel="canonical",v.href=window.location.origin,document.head.appendChild(v)}["tr","en","de","fr"].forEach(v=>{const y=document.querySelector(`link[hreflang="${v}"]`);if(y)y.setAttribute("href",`${window.location.origin}?lang=${v}`);else{const N=document.createElement("link");N.rel="alternate",N.hreflang=v,N.href=`${window.location.origin}?lang=${v}`,document.head.appendChild(N)}});const x={"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:a("landing.faq.q1"),acceptedAnswer:{"@type":"Answer",text:a("landing.faq.a1")}},{"@type":"Question",name:a("landing.faq.q2"),acceptedAnswer:{"@type":"Answer",text:a("landing.faq.a2")}},{"@type":"Question",name:a("landing.faq.q3"),acceptedAnswer:{"@type":"Answer",text:a("landing.faq.a3")}},{"@type":"Question",name:a("landing.faq.q4"),acceptedAnswer:{"@type":"Answer",text:a("landing.faq.a4")}},{"@type":"Question",name:a("landing.faq.q5"),acceptedAnswer:{"@type":"Answer",text:a("landing.faq.a5")}},{"@type":"Question",name:a("landing.faq.q6"),acceptedAnswer:{"@type":"Answer",text:a("landing.faq.a6")}}]},b=document.querySelector('script[type="application/ld+json"]');b&&b.remove();const p=document.createElement("script");return p.type="application/ld+json",p.textContent=JSON.stringify(x),document.head.appendChild(p),()=>{document.title="Comptario"}},[a,o.language]);const d=()=>{h.startsWith("#")?window.location.hash=h.replace("#",""):window.location.href=h},n=()=>{window.location.hash="#login"},l=()=>{f(!0)},i=r=>{if(r.key==="Enter"){const s=document.getElementById("main-content");s&&(s.focus(),s.scrollIntoView())}};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium",onKeyDown:i,children:"Skip to main content"}),e.jsx(uw,{}),e.jsx(v_,{onTryForFree:d,onSignIn:n}),e.jsxs("main",{id:"main-content",tabIndex:-1,className:"focus:outline-none",children:[e.jsx(w_,{onTryForFree:d,onSignIn:n,onWatchDemo:l}),e.jsx(N_,{}),e.jsx(k_,{}),e.jsx(j_,{}),e.jsx(S_,{}),e.jsx(C_,{loginUrl:h}),e.jsx(A_,{}),e.jsx(T_,{loginUrl:h})]}),e.jsx(E_,{}),t&&e.jsx(D_,{onClose:()=>f(!1)})]})},P_=()=>{const{t:a}=$t("about");return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-10 space-y-10",children:[e.jsxs("header",{className:"mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:a("title")}),e.jsx("p",{className:"text-slate-600 mt-2",children:a("subtitle")})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-3",children:a("whoWeAre.title")}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:a("whoWeAre.text")})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-3",children:a("offerings.title")}),e.jsx("ul",{className:"list-disc pl-6 space-y-2 text-slate-700",children:a("offerings.items",{returnObjects:!0}).map((o,t)=>e.jsx("li",{children:o},t))})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-3",children:a("approach.title")}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:a("approach.text")})]}),e.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-3",children:a("contact.title")}),e.jsxs("p",{className:"text-slate-700",children:[a("contact.text")," ",e.jsx("a",{className:"text-indigo-600 hover:underline",href:"mailto:support@comptario.com",children:"support@comptario.com"})]}),e.jsx("p",{className:"text-slate-500 text-sm mt-3",children:a("contact.emailNotice")})]})]})]})},I_=()=>{const{t:a}=$t("api");return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-14",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:a("title")}),e.jsx("div",{className:"bg-white border border-slate-200 rounded-xl p-8 shadow-sm",children:e.jsx("p",{className:"text-slate-700 leading-relaxed",children:a("underConstruction")})})]})]})},vu={tr:"Son gncelleme: 10 Kasm 2025",en:"Last updated: November 10, 2025",de:"Zuletzt aktualisiert: 10. November 2025",fr:"Dernire mise  jour : 10 novembre 2025"},Yt={companyName:"Peaknova (trading as Comptario)",address:"30 Rue Jean Turel, 73200 Albertville, France",email:"legal@comptario.com",dataProtectionEmail:"privacy@comptario.com",representative:"Mustafa BASOL",identifiers:{siren:"937704740",siret:"93770474000011",tva:"",rcs:"",ape:""},hostingProvider:"Hostinger International Ltd.",emailInfrastructure:"MailerSend Ireland Limited  EU cluster (Frankfurt primary, Amsterdam failover)"},Zy=()=>{const{i18n:a}=$t("common"),o=a.language,t={tr:{title:"Hizmet artlar",subtitle:"Comptario muhasebe hizmetlerini kullanmnz iin artlar ve koullar",lastUpdated:vu.tr,sections:{acceptance:{title:"artlarn Kabul",content:"Bu hizmet artlar, Comptario muhasebe platformunu kullanmnz dzenler. Hizmeti kullanarak bu artlar kabul etmi saylrsnz."},service:{title:"Hizmet Tanm",content:"Comptario, kk ve orta lekli iletmeler iin bulut tabanl muhasebe zmleri sunar:",features:{invoicing:"Fatura oluturma ve ynetimi",expenses:"Gider takibi ve kategorilendirme",reporting:"Finansal raporlama ve analiz",multiTenant:"oklu hesap ynetimi"}},serviceEmails:{title:"Hizmet E-postalar",content:"E-posta iletiimi yalnzca ilem ve hesapla ilgili bildirimler (dorulama, gvenlik uyarlar, faturalama gibi) iin kullanlr. Pazarlama amal toplu e-posta gnderilmez."},responsibilities:{title:"Kullanc Sorumluluklar",content:"Hizmetimizi kullanrken aadaki sorumluluklarnz bulunmaktadr:",items:{accuracy:"Girdiiniz verilerin doruluunu salamak",compliance:"Yasal dzenlemelere uyum gstermek",security:"Hesap gvenliinizi korumak",backups:"Verilerinizin yedeklerini almak"}},dataProtection:{title:"Veri Koruma",content:"Kiisel verileriniz GDPR ve KVKK dzenlemelerine uygun olarak ilenir. Detayl bilgi iin gizlilik politikamz inceleyiniz."},acceptableUse:{title:"Kabul Edilebilir Kullanm",items:["Hizmet spam, kt amal yazlm datm veya yetkisiz veri toplama iin kullanlamaz","Hesap paylam veya sistemin ktye kullanm yasaktr","Hukuka aykr ierik barndrlamaz veya iletilemez"]},liability:{title:"Sorumluluk Snrlamas",content:"Comptario, hizmet kesintileri veya veri kayplar nedeniyle oluabilecek dolayl zararlardan sorumlu deildir."},termination:{title:"Hizmet Sonlandrma",content:"Bu szleme, taraflardan biri tarafndan 30 gn nceden bildirimde bulunularak sonlandrlabilir."},changes:{title:"art Deiiklikleri",content:"Bu artlar zaman zaman gncellenebilir. nemli deiiklikler e-posta yoluyla bildirilecektir."}},contact:{title:"letiim Bilgileri",email:"E-posta",address:"Adres",company:"irket",addressValue:Yt.address,companyValue:Yt.companyName},backToApp:"Uygulamaya Geri Dn"},en:{title:"Terms of Service",subtitle:"Terms and conditions for using Comptario accounting services",lastUpdated:vu.en,sections:{acceptance:{title:"Acceptance of Terms",content:"These terms of service govern your use of the Comptario accounting platform. By using the service, you agree to these terms."},service:{title:"Service Description",content:"Comptario provides cloud-based accounting solutions for small and medium businesses:",features:{invoicing:"Invoice creation and management",expenses:"Expense tracking and categorization",reporting:"Financial reporting and analysis",multiTenant:"Multi-account management"}},serviceEmails:{title:"Service Emails",content:"We use email only for transactional and account-related communications (e.g., verification, security alerts, billing). We do not send marketing bulk emails."},responsibilities:{title:"User Responsibilities",content:"When using our service, you have the following responsibilities:",items:{accuracy:"Ensure the accuracy of data you enter",compliance:"Comply with legal regulations",security:"Protect your account security",backups:"Backup your data"}},dataProtection:{title:"Data Protection",content:"Your personal data is processed in accordance with GDPR regulations. Please review our privacy policy for detailed information."},acceptableUse:{title:"Acceptable Use",items:["You may not use the service for spam, malware distribution, or unauthorized data scraping","Account sharing or abuse of system resources is prohibited","Illegal content may not be hosted or transmitted"]},liability:{title:"Limitation of Liability",content:"Comptario is not responsible for indirect damages that may occur due to service interruptions or data loss."},termination:{title:"Service Termination",content:"This agreement may be terminated by either party with 30 days' prior notice."},changes:{title:"Changes to Terms",content:"These terms may be updated from time to time. Important changes will be notified via email."}},contact:{title:"Contact Information",email:"Email",address:"Address",company:"Company",addressValue:Yt.address,companyValue:Yt.companyName},backToApp:"Back to App"},de:{title:"Nutzungsbedingungen",subtitle:"Geschftsbedingungen fr die Nutzung der Comptario Buchhaltungsdienste",lastUpdated:vu.de,sections:{acceptance:{title:"Annahme der Bedingungen",content:"Diese Nutzungsbedingungen regeln Ihre Nutzung der Comptario Buchhaltungsplattform. Durch die Nutzung des Dienstes stimmen Sie diesen Bedingungen zu."},service:{title:"Servicebeschreibung",content:"Comptario bietet cloud-basierte Buchhaltungslsungen fr kleine und mittlere Unternehmen:",features:{invoicing:"Rechnungserstellung und -verwaltung",expenses:"Ausgabenverfolgung und -kategorisierung",reporting:"Finanzberichterstattung und -analyse",multiTenant:"Multi-Account-Management"}},serviceEmails:{title:"Service-E-Mails",content:"E-Mails werden ausschlielich fr transaktionale und kontobezogene Mitteilungen verwendet (z. B. Verifizierung, Sicherheitswarnungen, Abrechnung). Marketing-Massenmails werden nicht versendet."},responsibilities:{title:"Benutzerverantwortlichkeiten",content:"Bei der Nutzung unseres Dienstes haben Sie folgende Verantwortlichkeiten:",items:{accuracy:"Sicherstellen der Genauigkeit der eingegebenen Daten",compliance:"Einhaltung gesetzlicher Vorschriften",security:"Schutz Ihrer Kontosicherheit",backups:"Sicherung Ihrer Daten"}},dataProtection:{title:"Datenschutz",content:"Ihre personenbezogenen Daten werden gem GDPR-Vorschriften verarbeitet. Bitte lesen Sie unsere Datenschutzrichtlinie fr detaillierte Informationen."},acceptableUse:{title:"Zulssige Nutzung",items:["Keine Nutzung fr Spam, Malware-Verteilung oder unbefugtes Datenscraping","Kontoteilung oder Missbrauch von Systemressourcen ist untersagt","Illegale Inhalte drfen nicht gehostet oder bertragen werden"]},liability:{title:"Haftungsbeschrnkung",content:"Comptario ist nicht verantwortlich fr indirekte Schden, die durch Serviceunterbrechungen oder Datenverlust entstehen knnen."},termination:{title:"Service-Kndigung",content:"Diese Vereinbarung kann von beiden Parteien mit 30-tgiger Vorankndigung gekndigt werden."},changes:{title:"nderungen der Bedingungen",content:"Diese Bedingungen knnen von Zeit zu Zeit aktualisiert werden. Wichtige nderungen werden per E-Mail mitgeteilt."}},contact:{title:"Kontaktinformationen",email:"E-Mail",address:"Adresse",company:"Unternehmen",addressValue:Yt.address,companyValue:Yt.companyName},backToApp:"Zurck zur App"},fr:{title:"Conditions d'utilisation",subtitle:"Termes et conditions pour l'utilisation des services comptables Comptario",lastUpdated:vu.fr,sections:{acceptance:{title:"Acceptation des conditions",content:"Ces conditions d'utilisation rgissent votre utilisation de la plateforme comptable Comptario. En utilisant le service, vous acceptez ces conditions."},service:{title:"Description du service",content:"Comptario fournit des solutions comptables bases sur le cloud pour les petites et moyennes entreprises :",features:{invoicing:"Cration et gestion de factures",expenses:"Suivi et catgorisation des dpenses",reporting:"Rapports financiers et analyse",multiTenant:"Gestion multi-comptes"}},serviceEmails:{title:"E-mails de service",content:"Nous utilisons l'e-mail uniquement pour les communications transactionnelles et lies au compte (vrification, alertes de scurit, facturation). Nous n'envoyons pas d'e-mails marketing en masse."},responsibilities:{title:"Responsabilits de l'utilisateur",content:"Lors de l'utilisation de notre service, vous avez les responsabilits suivantes :",items:{accuracy:"Assurer l'exactitude des donnes que vous saisissez",compliance:"Respecter les rglementations lgales",security:"Protger la scurit de votre compte",backups:"Sauvegarder vos donnes"}},dataProtection:{title:"Protection des donnes",content:"Vos donnes personnelles sont traites conformment aux rglementations GDPR. Veuillez consulter notre politique de confidentialit pour des informations dtailles."},acceptableUse:{title:"Utilisation acceptable",items:["Le service ne peut pas tre utilis pour le spam, la distribution de logiciels malveillants ou le scraping non autoris","Le partage de compte ou l'abus des ressources systme est interdit","Les contenus illgaux ne peuvent pas tre hbergs ni transmis"]},liability:{title:"Limitation de responsabilit",content:"Comptario n'est pas responsable des dommages indirects qui peuvent survenir en raison d'interruptions de service ou de perte de donnes."},termination:{title:"Rsiliation du service",content:"Cet accord peut tre rsili par l'une ou l'autre partie avec un pravis de 30 jours."},changes:{title:"Modifications des conditions",content:"Ces conditions peuvent tre mises  jour de temps  autre. Les modifications importantes seront notifies par e-mail."}},contact:{title:"Informations de contact",email:"Email",address:"Adresse",company:"Entreprise",addressValue:Yt.address,companyValue:Yt.companyName},backToApp:"Retour  l'application"}},f=t[o]||t.en;return e.jsx("div",{className:"bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Fr,{className:"h-8 w-8 text-blue-600"})})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:f.title}),e.jsx("p",{className:"text-lg text-gray-600",children:f.subtitle}),e.jsxs("div",{className:"flex items-center justify-center mt-4 text-sm text-gray-500",children:[e.jsx(Vr,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:f.lastUpdated})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"prose prose-lg max-w-none",children:[e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ds,{className:"h-6 w-6 mr-2 text-blue-600"}),f.sections.acceptance.title]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.acceptance.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:f.sections.serviceEmails.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.serviceEmails.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:f.sections.service.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.service.content}),e.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[e.jsx("li",{children:f.sections.service.features.invoicing}),e.jsx("li",{children:f.sections.service.features.expenses}),e.jsx("li",{children:f.sections.service.features.reporting}),e.jsx("li",{children:f.sections.service.features.multiTenant})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:f.sections.responsibilities.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.responsibilities.content}),e.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[e.jsx("li",{children:f.sections.responsibilities.items.accuracy}),e.jsx("li",{children:f.sections.responsibilities.items.compliance}),e.jsx("li",{children:f.sections.responsibilities.items.security}),e.jsx("li",{children:f.sections.responsibilities.items.backups})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(zs,{className:"h-6 w-6 mr-2 text-green-600"}),f.sections.dataProtection.title]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.dataProtection.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:f.sections.liability.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.liability.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:f.sections.acceptableUse.title}),Array.isArray(f.sections.acceptableUse.items)?e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:f.sections.acceptableUse.items.map((h,d)=>e.jsx("li",{children:h},d))}):e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.acceptableUse.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:f.sections.termination.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.termination.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:f.sections.changes.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.changes.content})]}),e.jsxs("section",{className:"border-t border-gray-200 pt-8 mt-12",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:f.contact.title}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsxs("strong",{children:[f.contact.email,":"]})," ",Yt.email]}),e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsxs("strong",{children:[f.contact.address,":"]})," ",f.contact.addressValue]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsxs("strong",{children:[f.contact.company,":"]})," ",f.contact.companyValue]})]})]})]})}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("a",{href:"#",onClick:()=>window.history.back(),className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium",children:[" ",f.backToApp]})})]})})},Xy=()=>{const{i18n:a}=$t("common"),o=a.language,t={tr:{title:"Gizlilik Politikas",subtitle:"Kiisel verilerinizi nasl topladmz, kullandmz ve koruduumuz",sections:{introduction:{title:"Giri",content:"Comptario olarak, gizliliinizi ciddiye alyoruz. Bu gizlilik politikas, kiisel verilerinizi nasl topladmz, kullandmz, paylatmz ve koruduumuzu aklar."},dataController:{title:"Veri Sorumlusu",content:`Veri sorumlusu: ${Yt.companyName}. Adres: ${Yt.address}. letiim: ${Yt.dataProtectionEmail}`},dataCollection:{title:"Topladmz Veriler",personal:{title:"Kiisel Bilgiler",items:["Adnz ve soyadnz","E-posta adresiniz","irket adnz","Telefon numaranz (istee bal)"]},business:{title:" Verileri",items:["Fatura bilgileri ve hesap verileri","Gider kaytlar ve tedariki bilgileri","Hesap iletiim bilgileri","Finansal raporlar ve vergi bilgileri"]}},dataUsage:{title:"Verileri Nasl Kullanyoruz",items:["Muhasebe hizmetlerini salamak","Destek sunmak","Hizmetlerimizi gelitirmek","Yasal ykmllklerimizi yerine getirmek"]},dataSecurity:{title:"Veri Gvenlii",content:"Verilerinizi korumak iin endstri standard gvenlik nlemleri alyoruz.",items:["SSL/TLS ifreleme","Snrl eriim kontrolleri","Srekli gvenlik izleme","Dzenli veri yedekleme"]},legalBases:{title:"leme Hukuki Dayanaklar (GDPR md. 6)",items:["Ak rza (md. 6/1-a)","Szlemenin ifas iin gereklilik (md. 6/1-b)","Hukuki ykmlle uyum (md. 6/1-c)","Meru menfaat (md. 6/1-f)  kullanc beklentileri ve gizlilikle dengelenmitir"]},dataRetention:{title:"Veri Saklama Sreleri",items:["Hesap ve faturalama verileri: vergi mevzuat gerei en az 10 yl","Destek kaytlar: en fazla 24 ay","Analitik veriler: 14-26 ay arasnda (ara ayarna bal)","erez tercihleri: tercih sresi boyunca veya silinene kadar"]},userRights:{title:"GDPR Haklarnz",content:"GDPR kapsamnda aadaki haklara sahipsiniz:",items:["Verilerinize eriim hakk","Verilerin dzeltilmesi hakk","Verilerin silinmesi hakk","Veri tanabilirlii hakk"]},complaints:{title:"ikayet ve Bavuru",content:"Veri koruma haklarnzn ihlal edildiini dnyorsanz, ncelikle bizimle iletiime geebilirsiniz. Ayrca ikamet ettiiniz lkedeki yetkili veri koruma otoritesine ikayette bulunma hakkna sahipsiniz."},contact:{title:"letiim",content:"Gizlilik ile ilgili sorularnz iin bizimle iletiime geebilirsiniz:",email:Yt.dataProtectionEmail}}},en:{title:"Privacy Policy",subtitle:"How we collect, use, and protect your personal data",sections:{introduction:{title:"Introduction",content:"At Comptario, we take your privacy seriously. This privacy policy explains how we collect, use, share, and protect your personal data."},dataController:{title:"Data Controller",content:`Data Controller: ${Yt.companyName}. Address: ${Yt.address}. Contact: ${Yt.dataProtectionEmail}`},dataCollection:{title:"Data We Collect",personal:{title:"Personal Information",items:["Your name and surname","Your email address","Your company name","Your phone number (optional)"]},business:{title:"Business Data",items:["Invoice information and account data","Expense records and supplier information","Account contact information","Financial reports and tax information"]}},dataUsage:{title:"How We Use Your Data",items:["To provide accounting services","To provide support","To improve our services","To fulfill our legal obligations"]},dataSecurity:{title:"Data Security",content:"We implement industry-standard security measures to protect your data.",items:["SSL/TLS encryption","Limited access controls","Continuous security monitoring","Regular data backups"]},legalBases:{title:"Legal Bases for Processing (GDPR Art. 6)",items:["Consent (Art. 6(1)(a))","Contract necessity (Art. 6(1)(b))","Legal obligation (Art. 6(1)(c))","Legitimate interests (Art. 6(1)(f))  balanced with user privacy"]},dataRetention:{title:"Data Retention",items:["Account and invoicing data: at least 10 years due to tax laws","Support tickets and communications: up to 24 months","Analytics data: 1426 months (tool configuration dependent)","Cookie preferences: for the duration of your choice or until cleared"]},userRights:{title:"Your GDPR Rights",content:"Under GDPR, you have the following rights:",items:["Right to access your data","Right to rectify your data","Right to erase your data","Right to data portability"]},complaints:{title:"Complaints",content:"If you believe your data protection rights have been violated, please contact us first. You also have the right to lodge a complaint with your local data protection authority."},contact:{title:"Contact",content:"For privacy-related questions, please contact us:",email:Yt.dataProtectionEmail}}},de:{title:"Datenschutzrichtlinie",subtitle:"Wie wir Ihre personenbezogenen Daten sammeln, verwenden und schtzen",sections:{introduction:{title:"Einfhrung",content:"Bei Comptario nehmen wir Ihre Privatsphre ernst. Diese Datenschutzrichtlinie erklrt, wie wir Ihre personenbezogenen Daten sammeln, verwenden, teilen und schtzen."},dataController:{title:"Verantwortlicher (Controller)",content:`Verantwortlicher: ${Yt.companyName}. Adresse: ${Yt.address}. Kontakt: ${Yt.dataProtectionEmail}`},dataCollection:{title:"Daten, die wir sammeln",personal:{title:"Persnliche Informationen",items:["Ihr Vor- und Nachname","Ihre E-Mail-Adresse","Ihr Firmenname","Ihre Telefonnummer (optional)"]},business:{title:"Geschftsdaten",items:["Rechnungsinformationen und Accountdaten","Ausgabenaufzeichnungen und Lieferanteninformationen","Account-Kontaktdaten","Finanzberichte und Steuerinformationen"]}},dataUsage:{title:"Wie wir Ihre Daten verwenden",items:["Zur Bereitstellung von Buchhaltungsdiensten","Zur Bereitstellung von Support","Zur Verbesserung unserer Dienste","Zur Erfllung unserer rechtlichen Verpflichtungen"]},dataSecurity:{title:"Datensicherheit",content:"Wir implementieren branchenbliche Sicherheitsmanahmen zum Schutz Ihrer Daten.",items:["SSL/TLS-Verschlsselung","Begrenzte Zugriffskontrollen","Kontinuierliche Sicherheitsberwachung","Regelmige Datensicherungen"]},legalBases:{title:"Rechtsgrundlagen der Verarbeitung (Art. 6 DSGVO)",items:["Einwilligung (Art. 6 Abs. 1 lit. a)","Vertragserfllung (Art. 6 Abs. 1 lit. b)","Rechtliche Verpflichtung (Art. 6 Abs. 1 lit. c)","Berechtigte Interessen (Art. 6 Abs. 1 lit. f)  unter Wahrung der Privatsphre"]},dataRetention:{title:"Aufbewahrungsfristen",items:["Konto- und Rechnungsdaten: mindestens 10 Jahre (Steuerrecht)","Support-Kommunikation: bis zu 24 Monate","Analysedaten: 1426 Monate (werkzeugspezifisch)","Cookie-Einstellungen: fr die gewhlte Dauer bzw. bis zur Lschung"]},userRights:{title:"Ihre GDPR-Rechte",content:"Unter der GDPR haben Sie folgende Rechte:",items:["Recht auf Zugang zu Ihren Daten","Recht auf Berichtigung Ihrer Daten","Recht auf Lschung Ihrer Daten","Recht auf Datenbertragbarkeit"]},complaints:{title:"Beschwerderecht",content:"Wenn Sie der Ansicht sind, dass Ihre Datenschutzrechte verletzt wurden, kontaktieren Sie uns bitte zunchst. Sie haben auerdem das Recht, eine Beschwerde bei der zustndigen Datenschutzaufsichtsbehrde einzureichen."},contact:{title:"Kontakt",content:"Fr datenschutzbezogene Fragen kontaktieren Sie uns bitte:",email:Yt.dataProtectionEmail}}},fr:{title:"Politique de confidentialit",subtitle:"Comment nous collectons, utilisons et protgeons vos donnes personnelles",sections:{introduction:{title:"Introduction",content:"Chez Comptario, nous prenons votre vie prive au srieux. Cette politique de confidentialit explique comment nous collectons, utilisons, partageons et protgeons vos donnes personnelles."},dataController:{title:"Responsable du traitement",content:`Responsable: ${Yt.companyName}. Adresse: ${Yt.address}. Contact: ${Yt.dataProtectionEmail}`},dataCollection:{title:"Donnes que nous collectons",personal:{title:"Informations personnelles",items:["Votre nom et prnom","Votre adresse e-mail","Le nom de votre entreprise","Votre numro de tlphone (optionnel)"]},business:{title:"Donnes commerciales",items:["Informations de facturation et donnes de compte","Enregistrements de dpenses et informations fournisseur","Informations de contact du compte","Rapports financiers et informations fiscales"]}},dataUsage:{title:"Comment nous utilisons vos donnes",items:["Pour fournir des services comptables","Pour fournir du support","Pour amliorer nos services","Pour respecter nos obligations lgales"]},dataSecurity:{title:"Scurit des donnes",content:"Nous mettons en uvre des mesures de scurit standards de l'industrie pour protger vos donnes.",items:["Chiffrement SSL/TLS","Contrles d'accs limits","Surveillance de scurit continue","Sauvegardes rgulires des donnes"]},legalBases:{title:"Bases lgales du traitement (RGPD art. 6)",items:["Consentement (art. 6(1)(a))","Ncessit contractuelle (art. 6(1)(b))","Obligation lgale (art. 6(1)(c))","Intrts lgitimes (art. 6(1)(f))  quilibrs avec la vie prive"]},dataRetention:{title:"Dures de conservation",items:["Donnes de compte et de facturation : au moins 10 ans (obligations fiscales)","Tickets de support : jusqu' 24 mois","Donnes analytiques : 1426 mois (selon l'outil)","Prfrences cookies : pendant la dure choisie ou jusqu' suppression"]},userRights:{title:"Vos droits GDPR",content:"Sous le GDPR, vous avez les droits suivants:",items:["Droit d'accs  vos donnes","Droit de rectification de vos donnes","Droit d'effacement de vos donnes","Droit  la portabilit des donnes"]},complaints:{title:"Rclamations",content:"Si vous estimez que vos droits en matire de protection des donnes ont t viols, veuillez d'abord nous contacter. Vous avez galement le droit d'introduire une rclamation auprs de l'autorit de protection des donnes comptente."},contact:{title:"Contact",content:"Pour les questions lies  la confidentialit, veuillez nous contacter:",email:Yt.dataProtectionEmail}}}},f=t[o]||t.en;return e.jsx("div",{className:"bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(zs,{className:"h-8 w-8 text-green-600"})})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:f.title}),e.jsx("p",{className:"text-lg text-gray-600",children:f.subtitle}),e.jsx("div",{className:"flex items-center justify-center mt-4 text-sm text-gray-500",children:e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full font-medium",children:"GDPR Compliant"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"prose prose-lg max-w-none",children:[e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Zr,{className:"h-6 w-6 mr-2 text-blue-600"}),f.sections.introduction.title]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.introduction.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ls,{className:"h-6 w-6 mr-2 text-blue-600"}),f.sections.dataController.title]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.dataController.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Bi,{className:"h-6 w-6 mr-2 text-orange-600"}),f.sections.dataCollection.title]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:f.sections.dataCollection.personal.title}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-2 mb-6",children:f.sections.dataCollection.personal.items.map((h,d)=>e.jsx("li",{children:h},d))}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:f.sections.dataCollection.business.title}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-2 mb-6",children:f.sections.dataCollection.business.items.map((h,d)=>e.jsx("li",{children:h},d))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Yn,{className:"h-6 w-6 mr-2 text-purple-600"}),f.sections.dataUsage.title]}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:f.sections.dataUsage.items.map((h,d)=>e.jsx("li",{children:h},d))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(zs,{className:"h-6 w-6 mr-2 text-red-600"}),f.sections.dataSecurity.title]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.dataSecurity.content}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:f.sections.dataSecurity.items.map((h,d)=>e.jsx("li",{children:h},d))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(zs,{className:"h-6 w-6 mr-2 text-green-600"}),f.sections.legalBases.title]}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:f.sections.legalBases.items.map((h,d)=>e.jsx("li",{children:h},d))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Bi,{className:"h-6 w-6 mr-2 text-orange-600"}),f.sections.dataRetention.title]}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:f.sections.dataRetention.items.map((h,d)=>e.jsx("li",{children:h},d))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ls,{className:"h-6 w-6 mr-2 text-green-600"}),f.sections.userRights.title]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.userRights.content}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:f.sections.userRights.items.map((h,d)=>e.jsx("li",{children:h},d))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(oa,{className:"h-6 w-6 mr-2 text-blue-600"}),f.sections.complaints.title]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.complaints.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(oa,{className:"h-6 w-6 mr-2 text-blue-600"}),f.sections.contact.title]}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:f.sections.contact.content}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsx("p",{className:"text-blue-800 font-medium",children:f.sections.contact.email})})]})]})})]})})},Jy=()=>{const[a,o]=G.useState(null),[t,f]=G.useState(!0),[h,d]=G.useState(null),{currentLanguage:n}=Vi(),l={tr:{title:"Alt lemci Listesi",subtitle:"Comptario tarafndan kiisel veri ileme faaliyetleri iin kullanlan alt ilemcilerin tam listesi",lastUpdated:"Son gncelleme",loading:"Alt ilemciler ykleniyor...",error:"Alt ilemciler yklenirken hata olutu",retry:"Tekrar Dene",noData:"Veri bulunamadi",provider:"Salayc",purpose:"Ama",region:"Blge",dataCategories:"Veri Kategorileri",dpaStatus:"DPA Durumu",available:"Mevcut",purposes:{hosting:"Bulut barndrma ve altyap hizmetleri",payment:"deme ileme ve finansal hizmetler",email:"E-posta teslimat ve iletiim hizmetleri",analytics:"Web sitesi analitik ve performans izleme",cdn:"erik datm a ve gvenlik hizmetleri"},categories:{technical:"Teknik veri",user:"Kullanc verisi",transaction:"lem verisi",payment:"deme verisi",customer:"Hesap verisi",email:"E-posta adresleri",communication:"letiim verisi",usage:"Kullanm verisi",analytics:"Analitik veri",security:"Gvenlik kaytlar"}},en:{title:"Subprocessors List",subtitle:"Complete list of subprocessors used by Comptario for personal data processing activities",lastUpdated:"Last updated",loading:"Loading subprocessors...",error:"Error loading subprocessors",retry:"Retry",noData:"No data available",provider:"Provider",purpose:"Purpose",region:"Region",dataCategories:"Data Categories",dpaStatus:"DPA Status",available:"Available",purposes:{hosting:"Cloud hosting and infrastructure services",payment:"Payment processing and financial services",email:"Email delivery and communication services",analytics:"Website analytics and performance monitoring",cdn:"Content delivery network and security services"},categories:{technical:"Technical data",user:"User data",transaction:"Transaction data",payment:"Payment data",customer:"Customer data",email:"Email addresses",communication:"Communication data",usage:"Usage data",analytics:"Analytics data",security:"Security logs"}},de:{title:"Auftragsverarbeiter Liste",subtitle:"Vollstndige Liste der von Comptario fr die Verarbeitung personenbezogener Daten verwendeten Auftragsverarbeiter",lastUpdated:"Zuletzt aktualisiert",loading:"Auftragsverarbeiter werden geladen...",error:"Fehler beim Laden der Auftragsverarbeiter",retry:"Wiederholen",noData:"Keine Daten verfgbar",provider:"Anbieter",purpose:"Zweck",region:"Region",dataCategories:"Datenkategorien",dpaStatus:"DPA Status",available:"Verfgbar",purposes:{hosting:"Cloud-Hosting und Infrastrukturdienste",payment:"Zahlungsabwicklung und Finanzdienstleistungen",email:"E-Mail-Zustellung und Kommunikationsdienste",analytics:"Website-Analyse und Leistungsberwachung",cdn:"Content Delivery Network und Sicherheitsdienste"},categories:{technical:"Technische Daten",user:"Benutzerdaten",transaction:"Transaktionsdaten",payment:"Zahlungsdaten",customer:"Accountdaten",email:"E-Mail-Adressen",communication:"Kommunikationsdaten",usage:"Nutzungsdaten",analytics:"Analysedaten",security:"Sicherheitsprotokolle"}},fr:{title:"Liste des Sous-traitants",subtitle:"Liste complte des sous-traitants utiliss par Comptario pour les activits de traitement des donnes personnelles",lastUpdated:"Dernire mise  jour",loading:"Chargement des sous-traitants...",error:"Erreur lors du chargement des sous-traitants",retry:"Ressayer",noData:"Aucune donne disponible",provider:"Fournisseur",purpose:"Objectif",region:"Rgion",dataCategories:"Catgories de Donnes",dpaStatus:"Statut DPA",available:"Disponible",purposes:{hosting:"Services d'hbergement cloud et d'infrastructure",payment:"Services de traitement des paiements et financiers",email:"Services de livraison d'e-mails et de communication",analytics:"Analyse de site web et surveillance des performances",cdn:"Rseau de diffusion de contenu et services de scurit"},categories:{technical:"Donnes techniques",user:"Donnes utilisateur",transaction:"Donnes de transaction",payment:"Donnes de paiement",customer:"Donnes de compte",email:"Adresses e-mail",communication:"Donnes de communication",usage:"Donnes d'utilisation",analytics:"Donnes analytiques",security:"Journaux de scurit"}}};G.useEffect(()=>{he.debug("SubprocessorsList component mounted"),(async()=>{try{he.info("Loading subprocessors data...");const u={subprocessors:[{id:"1",name:"MailerSend Inc.",purpose:"Transactional email delivery, suppression management and infrastructure (EU cluster, no marketing emails)",region:"EU (Frankfurt primary, Amsterdam failover)",dataCategories:["Email addresses","Transactional metadata","Technical delivery logs","Suppression records"],dpaLink:"https://www.mailersend.com/legal/data-processing-addendum",lastUpdated:"2025-11-10"},{id:"2",name:"Stripe Inc.",purpose:"Payment processing and financial services",region:"US, EU",dataCategories:["Payment data","Transaction data","Customer data"],dpaLink:"https://stripe.com/privacy",lastUpdated:"2025-11-10"},{id:"3",name:"Google Analytics",purpose:"Website analytics and performance monitoring",region:"US, EU",dataCategories:["Usage data","Analytics data","Technical data"],dpaLink:"https://privacy.google.com/businesses/processorterms/",lastUpdated:"2025-11-10"},{id:"4",name:"Cloudflare Inc.",purpose:"Content delivery network and security services",region:"Global",dataCategories:["Technical data","Security logs"],dpaLink:"https://www.cloudflare.com/cloudflare-customer-dpa/",lastUpdated:"2025-11-10"}],lastModified:"2025-11-10T10:00:00Z",version:"1.1",changelog:[{date:"2025-10-30",version:"1.0",changes:["Initial subprocessors list created"],author:"Legal Team"},{date:"2025-11-10",version:"1.1",changes:["Migrated transactional email coverage to MailerSend EU cluster","Clarified transactional-only email scope"],author:"Legal Team"}]};he.debug("Using hardcoded data:",u),o(u)}catch(u){console.error("Error loading subprocessors:",u),d("Failed to load subprocessors")}finally{f(!1)}})()},[]);const i=c=>c.includes("EU")?"":c.includes("US")?"":(c.includes("Global"),""),r=c=>{const u={tr:{"MailerSend Inc.":{name:"MailerSend Inc.",purpose:"E-posta teslimat, suppression ynetimi ve altyap (yalnz ilemsel trafik)",categories:["E-posta adresleri","lemsel meta veriler","Teknik teslimat kaytlar","Suppression kaytlar"]},"Stripe Inc.":{name:"Stripe Inc.",purpose:"deme ileme ve finansal hizmetler",categories:["deme verisi","lem verisi","Hesap verisi"]},"Google Analytics":{name:"Google Analytics",purpose:"Web sitesi analitik ve performans izleme",categories:["Kullanm verisi","Analitik veri","Teknik veri"]},"Cloudflare Inc.":{name:"Cloudflare Inc.",purpose:"erik datm a ve gvenlik hizmetleri",categories:["Teknik veri","Gvenlik kaytlar"]}}};return n==="tr"&&u.tr[c.name]?u.tr[c.name]:{name:c.name,purpose:c.purpose,categories:c.dataCategories}},s=l[n];return t?e.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:s.loading})]})}):h?e.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:s.error}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:s.retry})]})}):a?e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx(sm,{className:"h-8 w-8 text-indigo-600"})})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:s.title}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:s.subtitle}),e.jsxs("div",{className:"flex items-center justify-center mt-6 text-sm text-gray-500",children:[e.jsx(Ui,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[s.lastUpdated,": ",new Date(a.lastModified).toLocaleDateString()]})]})]}),e.jsx("div",{className:"hidden lg:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-8",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.provider}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.purpose}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.region}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.dataCategories}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.dpaStatus})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.subprocessors.map((c,u)=>{const m=r(c);return e.jsxs("tr",{className:u%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:m.purpose})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx("span",{className:"mr-2",children:i(c.region)}),c.region]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:m.categories.join(", ")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx($s,{className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("a",{href:c.dpaLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:text-indigo-800 underline",children:s.available})]})})]},c.id)})})]})})}),e.jsx("div",{className:"lg:hidden space-y-6",children:a.subprocessors.map(c=>{const u=r(c);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:u.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(oa,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"mr-2",children:i(c.region)}),c.region]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx($s,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("a",{href:c.dpaLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:text-indigo-800 underline",children:"DPA"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:s.purpose}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:u.purpose})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:s.dataCategories}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:u.categories.map((m,x)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded",children:m},x))})})]})]})]},c.id)})}),e.jsx("div",{className:"mt-12 text-center text-sm text-gray-500",children:e.jsxs("p",{children:[s.lastUpdated,": ",new Date(a.lastModified).toLocaleDateString()]})})]})}):e.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600",children:s.noData})})})},eb=()=>{const{currentLanguage:a}=Vi(),o={tr:{title:"Veri leme Szlemesi (DPA)",subtitle:"Comptario ile kullanclar arasndaki kiisel veri ileme szlemesi ve GDPR uyumluluk bilgileri",lastUpdated:"Son gncelleme",overview:"Genel Bak",overviewText:"Bu Veri leme Szlemesi (DPA), Comptario hizmetlerini kullanan kullanclarmz ile aramzdaki kiisel veri ileme faaliyetlerini dzenler ve GDPR (Genel Veri Koruma Ynetmelii) uyumluluunu salar.",sections:{definitions:{title:"Tanmlar",items:[{term:"Veri Sorumlusu",definition:"Comptario hizmetlerini kullanan ve kiisel verilerin ilenme amalarn ve aralarn belirleyen kurulu."},{term:"Veri leyici",definition:"Veri sorumlusu adna kiisel verileri ileyen Comptario irketi."},{term:"Kiisel Veri",definition:"Kimlii belirli veya belirlenebilir gerek kiiye ilikin her trl bilgi."},{term:"leme",definition:"Kiisel veriler zerinde gerekletirilen her trl ilem (toplama, kaydetme, dzenleme, deitirme, sorgulama, kullanma, aktarma, yaygnlatrma, snflandrma, silme vb.)."}]},processing:{title:"Veri leme Detaylar",categories:{title:"lenen Veri Kategorileri",items:["Kimlik bilgileri (ad, soyad, e-posta)","letiim bilgileri (telefon, adres)","Finansal veriler (fatura bilgileri, deme kaytlar)"," verileri (hesap kaytlar, rn bilgileri)","Teknik veriler (IP adresi, kullanm kaytlar)"]},purposes:{title:"leme Amalar",items:["Muhasebe ve finansal hizmetlerin salanmas","Destek hizmetleri","Sistem gvenlii ve performans optimizasyonu","Yasal ykmllklerin yerine getirilmesi","Hizmet gelitirme ve analiz"]},subjects:{title:"Veri Konusu Kategorileri",items:["Kullanc temsilcileri","Son kullanclar","Tedarikiler"," ortaklar","Web sitesi ziyaretileri"]}},obligations:{title:"Comptario'nun Ykmllkleri",items:["Kiisel verileri yalnzca kullancnn talimatlar dorultusunda ileme","Uygun teknik ve organizasyonel gvenlik nlemlerini uygulama","Personel gizlilik ykmllklerini salama","Alt ilemci kullanmnda kullanc onay alma","Veri ihlallerini gecikmeksizin bildirme","Veri konularnn haklarn kullanmasna yardmc olma","Kullancnn denetim haklarn destekleme"]},security:{title:"Gvenlik nlemleri",items:["Veri ifreleme (transit ve rest halinde)","Eriim kontrol ve kimlik dorulama","Dzenli gvenlik testleri ve penetrasyon testleri","Personel gvenlik eitimleri","Olay mdahale prosedrleri","Dzenli gvenlik gncellemeleri"]},internationalTransfers:{title:"Uluslararas Aktarmlar",content:"Kiisel veriler ncelikle AB/AEA iinde ilenir. nc lkelere aktarm gerekirse, Aktarm Etki Deerlendirmesi yaplr ve Standart Szleme Hkmleri (SCCs) ile ek teknik/organizasyonel nlemler uygulanr."},additionalSecurity:{title:"Ek Gvenlik Tedbirleri",items:["Mmkn olduunda hesap verilerinin sahte/anonimletirilmesi","Ayr retim ve test ortamlar","Eriimlerin en az ayrcalk ilkesine gre snrlandrlmas"]},dataSubjects:{title:"Veri Konusu Haklar",items:["Bilgilendirilme hakk","Eriim hakk","Dzeltme hakk",'Silme hakk ("unutulma hakk")',"lemeyi kstlama hakk","Veri tanabilirlii hakk","tiraz etme hakk"]},contact:{title:"letiim Bilgileri",dpo:"Veri Koruma Sorumlusu",email:Yt.dataProtectionEmail,address:`${Yt.companyName}, ${Yt.address}`,phone:""}}},en:{title:"Data Processing Agreement (DPA)",subtitle:"Personal data processing agreement between Comptario and service users and GDPR compliance information",lastUpdated:"Last updated",overview:"Overview",overviewText:"This Data Processing Agreement (DPA) governs the personal data processing activities between Comptario and users of our services, ensuring GDPR (General Data Protection Regulation) compliance.",sections:{definitions:{title:"Definitions",items:[{term:"Data Controller",definition:"The organization using Comptario services that determines the purposes and means of personal data processing."},{term:"Data Processor",definition:"Comptario company that processes personal data on behalf of the data controller."},{term:"Personal Data",definition:"Any information relating to an identified or identifiable natural person."},{term:"Processing",definition:"Any operation performed on personal data (collection, recording, organization, structuring, storage, adaptation, retrieval, consultation, use, disclosure, transmission, dissemination, alignment, combination, restriction, erasure, or destruction)."}]},processing:{title:"Data Processing Details",categories:{title:"Categories of Personal Data",items:["Identity information (name, surname, email)","Contact information (phone, address)","Financial data (invoice information, payment records)","Business data (account records, product information)","Technical data (IP address, usage logs)"]},purposes:{title:"Purposes of Processing",items:["Providing accounting and financial services","Support services","System security and performance optimization","Compliance with legal obligations","Service development and analysis"]},subjects:{title:"Categories of Data Subjects",items:["Account representatives","End users","Suppliers","Business partners","Website visitors"]}},obligations:{title:"Comptario's Obligations",items:["Process personal data only on data controller instructions","Implement appropriate technical and organizational security measures","Ensure staff confidentiality obligations","Obtain data controller approval for sub-processor usage","Notify data breaches without delay","Assist with data subject rights exercises","Support data controller audit rights"]},security:{title:"Security Measures",items:["Data encryption (in transit and at rest)","Access control and authentication","Regular security testing and penetration tests","Staff security training","Incident response procedures","Regular security updates"]},internationalTransfers:{title:"International Transfers",content:"Personal data is primarily processed within the EU/EEA. Where transfers to third countries occur, Transfer Impact Assessments are conducted and Standard Contractual Clauses (SCCs) plus supplementary technical/organizational measures are applied."},additionalSecurity:{title:"Additional Security Measures",items:["Pseudonymization/Anonymization of account data when possible","Separated production and test environments","Least-privilege access controls enforced"]},dataSubjects:{title:"Data Subject Rights",items:["Right to be informed","Right of access","Right to rectification",'Right to erasure ("right to be forgotten")',"Right to restrict processing","Right to data portability","Right to object"]},contact:{title:"Contact Information",dpo:"Data Protection Officer",email:Yt.dataProtectionEmail,address:`${Yt.companyName}, ${Yt.address}`,phone:""}}},de:{title:"Datenverarbeitungsvertrag (DPA)",subtitle:"Vereinbarung zur Verarbeitung personenbezogener Daten zwischen Comptario und Nutzern sowie DSGVO-Compliance-Informationen",lastUpdated:"Zuletzt aktualisiert",overview:"berblick",overviewText:"Diese Vereinbarung ber die Auftragsverarbeitung (DPA) regelt die Verarbeitung personenbezogener Daten zwischen Comptario und unseren Nutzern und stellt die Einhaltung der DSGVO sicher.",sections:{definitions:{title:"Definitionen",items:[{term:"Datenverantwortlicher",definition:"Die Organisation, die Comptario-Dienste nutzt und die Zwecke und Mittel der Verarbeitung personenbezogener Daten bestimmt."},{term:"Datenverarbeiter",definition:"Das Unternehmen Comptario, das personenbezogene Daten im Auftrag des Datenverantwortlichen verarbeitet."},{term:"Personenbezogene Daten",definition:"Alle Informationen, die sich auf eine identifizierte oder identifizierbare natrliche Person beziehen."},{term:"Verarbeitung",definition:"Jeder Vorgang im Zusammenhang mit personenbezogenen Daten (Erhebung, Erfassung, Organisation, Strukturierung, Speicherung, Anpassung, Abruf, Einsichtnahme, Verwendung, Offenlegung, bermittlung, Verbreitung, Abgleich, Kombination, Einschrnkung, Lschung oder Vernichtung)."}]},processing:{title:"Details zur Datenverarbeitung",categories:{title:"Kategorien personenbezogener Daten",items:["Identittsinformationen (Name, Nachname, E-Mail)","Kontaktinformationen (Telefon, Adresse)","Finanzdaten (Rechnungsinformationen, Zahlungsaufzeichnungen)","Geschftsdaten (Account-Datenstze, Produktinformationen)","Technische Daten (IP-Adresse, Nutzungsprotokolle)"]},purposes:{title:"Zwecke der Verarbeitung",items:["Bereitstellung von Buchhaltungs- und Finanzdienstleistungen","Support-Services","Systemsicherheit und Leistungsoptimierung","Einhaltung gesetzlicher Verpflichtungen","Serviceentwicklung und Analyse"]},subjects:{title:"Kategorien von betroffenen Personen",items:["Organisationsvertreter","Endbenutzer","Lieferanten","Geschftspartner","Website-Besucher"]}},obligations:{title:"Verpflichtungen von Comptario",items:["Verarbeitung personenbezogener Daten nur nach Nutzeranweisungen","Umsetzung angemessener technischer und organisatorischer Sicherheitsmanahmen","Gewhrleistung der Vertraulichkeitsverpflichtungen der Mitarbeiter","Einholung der Genehmigung des Nutzers fr die Nutzung von Unterauftragsverarbeitern","Unverzgliche Meldung von Datenschutzverletzungen","Untersttzung bei der Ausbung von Rechten betroffener Personen","Untersttzung der Audit-Rechte des Nutzers"]},security:{title:"Sicherheitsmanahmen",items:["Datenverschlsselung (bei bertragung und im Ruhezustand)","Zugriffskontrolle und Authentifizierung","Regelmige Sicherheitstests und Penetrationstests","Sicherheitsschulungen fr Mitarbeiter","Vorfallerkennungs- und Reaktionsverfahren","Regelmige Sicherheitsupdates"]},internationalTransfers:{title:"Internationale bermittlungen",content:"Personenbezogene Daten werden primr innerhalb der EU/des EWR verarbeitet. Bei bermittlungen in Drittlnder werden Transfer Impact Assessments durchgefhrt und Standardvertragsklauseln (SCCs) sowie zustzliche technische/organisatorische Manahmen angewandt."},additionalSecurity:{title:"Zustzliche Sicherheitsmanahmen",items:["Pseudonymisierung/Anonymisierung von Nutzerdaten, wenn mglich","Getrennte Produktions- und Testumgebungen","Durchsetzung des Least-Privilege-Prinzips beim Zugriff"]},dataSubjects:{title:"Rechte der betroffenen Personen",items:["Recht auf Information","Recht auf Auskunft","Recht auf Berichtigung",'Recht auf Lschung ("Recht auf Vergessenwerden")',"Recht auf Einschrnkung der Verarbeitung","Recht auf Datenbertragbarkeit","Widerspruchsrecht"]},contact:{title:"Kontaktinformationen",dpo:"Datenschutzbeauftragter",email:Yt.dataProtectionEmail,address:`${Yt.companyName}, ${Yt.address}`,phone:""}}},fr:{title:"Accord de Traitement des Donnes (DPA)",subtitle:"Accord de traitement des donnes personnelles entre Comptario et les utilisateurs et informations de conformit RGPD",lastUpdated:"Dernire mise  jour",overview:"Aperu",overviewText:"Cet Accord de Traitement des Donnes (DPA) rgit les activits de traitement des donnes personnelles entre Comptario et nos utilisateurs utilisant nos services, garantissant la conformit au RGPD.",sections:{definitions:{title:"Dfinitions",items:[{term:"Responsable du Traitement",definition:"L'organisation utilisant les services Comptario qui dtermine les finalits et les moyens du traitement des donnes personnelles."},{term:"Sous-traitant",definition:"La socit Comptario qui traite les donnes personnelles pour le compte du responsable du traitement."},{term:"Donnes Personnelles",definition:"Toute information concernant une personne physique identifie ou identifiable."},{term:"Traitement",definition:"Toute opration effectue sur des donnes personnelles (collecte, enregistrement, organisation, structuration, conservation, adaptation, extraction, consultation, utilisation, communication, diffusion, rapprochement, interconnexion, limitation, effacement ou destruction)."}]},processing:{title:"Dtails du Traitement des Donnes",categories:{title:"Catgories de Donnes Personnelles",items:["Informations d'identit (nom, prnom, email)","Informations de contact (tlphone, adresse)","Donnes financires (informations de facturation, enregistrements de paiement)","Donnes commerciales (dossiers de comptes, informations produits)","Donnes techniques (adresse IP, journaux d'utilisation)"]},purposes:{title:"Finalits du Traitement",items:["Fourniture de services comptables et financiers","Services de support","Scurit du systme et optimisation des performances","Respect des obligations lgales","Dveloppement et analyse des services"]},subjects:{title:"Catgories de Personnes Concernes",items:["Reprsentants de l'organisation","Utilisateurs finaux","Fournisseurs","Partenaires commerciaux","Visiteurs du site web"]}},obligations:{title:"Obligations de Comptario",items:["Traiter les donnes personnelles uniquement selon les instructions de l'utilisateur","Mettre en uvre des mesures de scurit techniques et organisationnelles appropries","Assurer les obligations de confidentialit du personnel","Obtenir l'approbation de l'utilisateur pour l'utilisation de sous-traitants","Notifier les violations de donnes sans dlai","Assister dans l'exercice des droits des personnes concernes","Soutenir les droits d'audit de l'utilisateur"]},security:{title:"Mesures de Scurit",items:["Chiffrement des donnes (en transit et au repos)","Contrle d'accs et authentification","Tests de scurit rguliers et tests de pntration","Formation  la scurit du personnel","Procdures de rponse aux incidents","Mises  jour de scurit rgulires"]},internationalTransfers:{title:"Transferts internationaux",content:"Les donnes personnelles sont principalement traites au sein de l'UE/EEE. En cas de transferts vers des pays tiers, des valuations d'impact sur les transferts sont ralises et les Clauses Contractuelles Types (CCT) ainsi que des mesures techniques/organisationnelles supplmentaires sont appliques."},additionalSecurity:{title:"Mesures de scurit supplmentaires",items:["Pseudonymisation/Anonymisation des donnes de compte lorsque possible","Environnements de production et de test spars","Contrles daccs selon le principe du moindre privilge"]},dataSubjects:{title:"Droits des Personnes Concernes",items:["Droit d'tre inform","Droit daccs","Droit de rectification",`Droit  l'effacement ("droit  l'oubli")`,"Droit de limiter le traitement","Droit  la portabilit des donnes","Droit d'opposition"]},contact:{title:"Informations de Contact",dpo:"Dlgu  la Protection des Donnes",email:Yt.dataProtectionEmail,address:`${Yt.companyName}, ${Yt.address}`,phone:""}}}},t=o[a]||o.tr;return e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Fr,{className:"h-8 w-8 text-blue-600"})})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:t.title}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:t.subtitle}),e.jsxs("div",{className:"flex items-center justify-center mt-6 text-sm text-gray-500",children:[e.jsx(Ui,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[t.lastUpdated,": 10.11.2025"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(zs,{className:"h-6 w-6 text-blue-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.overview})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.overviewText})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:t.sections.definitions.title}),e.jsx("div",{className:"space-y-4",children:t.sections.definitions.items.map((f,h)=>e.jsxs("div",{className:"border-l-4 border-blue-600 pl-4",children:[e.jsx("dt",{className:"font-semibold text-gray-900",children:f.term}),e.jsx("dd",{className:"text-gray-700 mt-1",children:f.definition})]},h))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Bi,{className:"h-6 w-6 text-green-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.sections.processing.title})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:t.sections.processing.categories.title}),e.jsx("ul",{className:"space-y-2",children:t.sections.processing.categories.items.map((f,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx($s,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:f})]},h))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:t.sections.processing.purposes.title}),e.jsx("ul",{className:"space-y-2",children:t.sections.processing.purposes.items.map((f,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx($s,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:f})]},h))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:t.sections.processing.subjects.title}),e.jsx("ul",{className:"space-y-2",children:t.sections.processing.subjects.items.map((f,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(Ls,{className:"h-4 w-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700",children:f})]},h))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:t.sections.obligations.title}),e.jsx("ul",{className:"grid md:grid-cols-2 gap-3",children:t.sections.obligations.items.map((f,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx($s,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:f})]},h))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(zs,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.sections.security.title})]}),e.jsx("ul",{className:"grid md:grid-cols-2 gap-3",children:t.sections.security.items.map((f,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx($s,{className:"h-5 w-5 text-red-500 mr-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:f})]},h))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:t.sections.internationalTransfers.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.sections.internationalTransfers.content})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:t.sections.additionalSecurity.title}),e.jsx("ul",{className:"grid md:grid-cols-2 gap-3",children:t.sections.additionalSecurity.items.map((f,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx($s,{className:"h-5 w-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:f})]},h))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ls,{className:"h-6 w-6 text-purple-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.sections.dataSubjects.title})]}),e.jsx("ul",{className:"grid md:grid-cols-2 gap-3",children:t.sections.dataSubjects.items.map((f,h)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx($s,{className:"h-5 w-5 text-purple-500 mr-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:f})]},h))})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:t.sections.contact.title}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:e.jsxs("strong",{children:[t.sections.contact.dpo,":"]})}),e.jsxs("p",{className:"text-gray-700",children:[" ",t.sections.contact.email]}),e.jsxs("p",{className:"text-gray-700",children:[" ",t.sections.contact.address]}),t.sections.contact.phone?e.jsxs("p",{className:"text-gray-700",children:[" ",t.sections.contact.phone]}):null]})]}),e.jsx("div",{className:"mt-12 text-center text-sm text-gray-500",children:e.jsx("p",{children:a==="tr"?"Bu DPA, GDPR ve dier veri koruma dzenlemelerine uygun olarak hazrlanmtr.":a==="en"?"This DPA has been prepared in accordance with GDPR and other data protection regulations.":a==="de"?"Diese DPA wurde in bereinstimmung mit der DSGVO und anderen Datenschutzbestimmungen erstellt.":"Ce DPA a t prpar conformment au RGPD et aux autres rglementations sur la protection des donnes."})})]})})},tb=()=>{const{i18n:a}=$t("common"),{openModal:o}=Xp(),t=a.language;G.useEffect(()=>{try{window.location.hash==="#cookie-preferences"&&o();const d=()=>{window.location.hash==="#cookie-preferences"&&o()};return window.addEventListener("hashchange",d),()=>window.removeEventListener("hashchange",d)}catch{}},[o]);const f={tr:{title:"erez Politikas",subtitle:"Web sitemizde erezleri nasl kullandmz ve ynetebileceiniz",preferencesTitle:"erez Tercihlerinizi Ynetin",preferencesDescription:"Hangi erezlerin saklanacan seebilirsiniz. Kiiselletirme iin baz erezler gereklidir.",manageButton:"erez Tercihlerini Ynet",sections:{whatAre:{title:"erezler Nedir?",content:"erezler, web sitesi ziyaretiniz srasnda taraycnzda saklanan kk veri dosyalardr. Bu dosyalar, web sitesinin dzgn almas ve size daha iyi bir deneyim sunmas iin kullanlr."},howWeUse:{title:"erezleri Nasl Kullanyoruz?",content:"Comptario olarak erezleri u amalarla kullanyoruz: oturum ynetimi, kullanc tercihlerini hatrlama, site performansn analiz etme ve gvenlii salama."},consentMode:{title:"Onay Modu (Consent Mode)",content:"Google Consent Mode v2 ve benzeri mekanizmalar destekliyoruz. Tercihleriniz dorultusunda lm/analitik etiketleri uyarlanr; onay verilmeden gerekli olmayan erezler yerletirilmez. Tercihlerinizi bu sayfadaki butonla dilediiniz an gncelleyebilirsiniz."},thirdParty:{title:"nc Taraf erezleri",content:"Baz hizmetlerimiz iin gvenilir nc taraf salayclardan erezler kullanyoruz:",partners:{title:" Ortaklarmz:",analytics:"Web sitesi kullanm istatistikleri",payments:"Gvenli deme ilemleri",support:"Destek hizmetleri"}},managing:{title:"erezleri Ynetme",content:"erez tercihlerinizi istediiniz zaman deitirebilirsiniz. Ayrca tarayc ayarlarndan da erezleri ynetebilirsiniz:",browsers:{chrome:"Ayarlar > Gizlilik ve Gvenlik > erezler",firefox:"Ayarlar > Gizlilik ve Gvenlik > erezler ve Site Verileri",safari:"Tercihler > Gizlilik > erezleri Ynet",edge:"Ayarlar > erezler ve Site zinleri"}}},contact:{title:"letiim",email:"E-posta",cmp:"erez Ynetimi",cmpNote:"Yukardaki butonu kullanarak tercihlerinizi deitirebilirsiniz",privacyEmail:Yt.dataProtectionEmail},backToApp:"Uygulamaya Geri Dn"},en:{title:"Cookie Policy",subtitle:"How we use cookies on our website and how you can manage them",preferencesTitle:"Manage Your Cookie Preferences",preferencesDescription:"You can choose which cookies to store. Some cookies are necessary for personalization.",manageButton:"Manage Cookie Preferences",sections:{whatAre:{title:"What Are Cookies?",content:"Cookies are small data files stored in your browser during your website visit. These files are used to help the website function properly and provide you with a better experience."},howWeUse:{title:"How We Use Cookies?",content:"At Comptario, we use cookies for the following purposes: session management, remembering user preferences, analyzing site performance, and ensuring security."},consentMode:{title:"Consent Mode",content:"We support Google Consent Mode v2 and similar frameworks. Measurement/analytics tags adapt to your choices; non-essential cookies are not set before consent. You can update your preferences at any time using the button above."},thirdParty:{title:"Third-Party Cookies",content:"We use cookies from trusted third-party providers for some of our services:",partners:{title:"Our Partners:",analytics:"Website usage statistics",payments:"Secure payment processing",support:"Support services"}},managing:{title:"Managing Cookies",content:"You can change your cookie preferences at any time. You can also manage cookies through your browser settings:",browsers:{chrome:"Settings > Privacy and Security > Cookies",firefox:"Settings > Privacy and Security > Cookies and Site Data",safari:"Preferences > Privacy > Manage Cookies",edge:"Settings > Cookies and Site Permissions"}}},contact:{title:"Contact",email:"Email",cmp:"Cookie Management",cmpNote:"You can change your preferences using the button above",privacyEmail:Yt.dataProtectionEmail},backToApp:"Back to App"},de:{title:"Cookie-Richtlinie",subtitle:"Wie wir Cookies auf unserer Website verwenden und wie Sie sie verwalten knnen",preferencesTitle:"Verwalten Sie Ihre Cookie-Einstellungen",preferencesDescription:"Sie knnen whlen, welche Cookies gespeichert werden sollen. Einige Cookies sind fr die Personalisierung notwendig.",manageButton:"Cookie-Einstellungen verwalten",sections:{whatAre:{title:"Was sind Cookies?",content:"Cookies sind kleine Datendateien, die whrend Ihres Website-Besuchs in Ihrem Browser gespeichert werden. Diese Dateien werden verwendet, um der Website beim ordnungsgemen Funktionieren zu helfen und Ihnen eine bessere Erfahrung zu bieten."},howWeUse:{title:"Wie verwenden wir Cookies?",content:"Bei Comptario verwenden wir Cookies fr folgende Zwecke: Sitzungsverwaltung, Benutzereinstellungen merken, Site-Performance analysieren und Sicherheit gewhrleisten."},consentMode:{title:"Einwilligungsmodus",content:"Wir untersttzen den Google Consent Mode v2 und hnliche Rahmenwerke. Mess-/Analyse-Tags passen sich Ihren Entscheidungen an; nicht notwendige Cookies werden ohne Einwilligung nicht gesetzt. Sie knnen Ihre Einstellungen jederzeit ber die oben stehende Schaltflche ndern."},thirdParty:{title:"Drittanbieter-Cookies",content:"Wir verwenden Cookies von vertrauenswrdigen Drittanbietern fr einige unserer Dienste:",partners:{title:"Unsere Partner:",analytics:"Website-Nutzungsstatistiken",payments:"Sichere Zahlungsabwicklung",support:"Support-Services"}},managing:{title:"Cookies verwalten",content:"Sie knnen Ihre Cookie-Einstellungen jederzeit ndern. Sie knnen Cookies auch ber Ihre Browser-Einstellungen verwalten:",browsers:{chrome:"Einstellungen > Datenschutz und Sicherheit > Cookies",firefox:"Einstellungen > Datenschutz und Sicherheit > Cookies und Website-Daten",safari:"Einstellungen > Datenschutz > Cookies verwalten",edge:"Einstellungen > Cookies und Website-Berechtigungen"}}},contact:{title:"Kontakt",email:"E-Mail",cmp:"Cookie-Verwaltung",cmpNote:"Sie knnen Ihre Einstellungen ber die obige Schaltflche ndern",privacyEmail:Yt.dataProtectionEmail},backToApp:"Zurck zur App"},fr:{title:"Politique des cookies",subtitle:"Comment nous utilisons les cookies sur notre site web et comment vous pouvez les grer",preferencesTitle:"Grez vos prfrences de cookies",preferencesDescription:"Vous pouvez choisir quels cookies stocker. Certains cookies sont ncessaires pour la personnalisation.",manageButton:"Grer les prfrences de cookies",sections:{whatAre:{title:"Que sont les cookies ?",content:"Les cookies sont de petits fichiers de donnes stocks dans votre navigateur lors de votre visite sur le site web. Ces fichiers sont utiliss pour aider le site web  fonctionner correctement et vous offrir une meilleure exprience."},howWeUse:{title:"Comment utilisons-nous les cookies ?",content:"Chez Comptario, nous utilisons les cookies aux fins suivantes : gestion de session, mmorisation des prfrences utilisateur, analyse des performances du site et assurance de la scurit."},consentMode:{title:"Mode de consentement",content:"Nous prenons en charge Google Consent Mode v2 et des cadres similaires. Les balises de mesure/analyse s'adaptent  vos choix ; les cookies non essentiels ne sont pas dposs avant consentement. Vous pouvez mettre  jour vos prfrences  tout moment via le bouton ci-dessus."},thirdParty:{title:"Cookies tiers",content:"Nous utilisons des cookies de fournisseurs tiers de confiance pour certains de nos services :",partners:{title:"Nos partenaires :",analytics:"Statistiques d'utilisation du site web",payments:"Traitement scuris des paiements",support:"Services de support"}},managing:{title:"Gestion des cookies",content:"Vous pouvez modifier vos prfrences de cookies  tout moment. Vous pouvez galement grer les cookies via les paramtres de votre navigateur :",browsers:{chrome:"Paramtres > Confidentialit et scurit > Cookies",firefox:"Paramtres > Confidentialit et scurit > Cookies et donnes de site",safari:"Prfrences > Confidentialit > Grer les cookies",edge:"Paramtres > Cookies et autorisations de site"}}},contact:{title:"Contact",email:"Email",cmp:"Gestion des cookies",cmpNote:"Vous pouvez modifier vos prfrences en utilisant le bouton ci-dessus",privacyEmail:Yt.dataProtectionEmail},backToApp:"Retour  l'application"}},h=f[t]||f.en;return e.jsx("div",{className:"bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(Wp,{className:"h-8 w-8 text-yellow-600"})})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:h.title}),e.jsx("p",{className:"text-lg text-gray-600",children:h.subtitle})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center justify-center",children:[e.jsx(Jc,{className:"h-6 w-6 mr-2 text-blue-600"}),h.preferencesTitle]}),e.jsx("p",{className:"text-gray-600 mb-6",children:h.preferencesDescription}),e.jsx("button",{onClick:()=>{try{o()}catch{}try{window.dispatchEvent(new Event("open-cookie-preferences"))}catch{}try{window.location.hash="cookie-preferences"}catch{}},className:"relative px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","data-testid":"open-cookie-preferences",children:h.manageButton})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"prose prose-lg max-w-none",children:[e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:h.sections.whatAre.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:h.sections.whatAre.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:h.sections.howWeUse.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:h.sections.howWeUse.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:h.sections.consentMode.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:h.sections.consentMode.content})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:h.sections.thirdParty.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:h.sections.thirdParty.content}),e.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:h.sections.thirdParty.partners.title}),e.jsxs("ul",{className:"text-yellow-700 text-sm space-y-1",children:[e.jsxs("li",{children:[" Google Analytics - ",h.sections.thirdParty.partners.analytics]}),e.jsxs("li",{children:[" Stripe - ",h.sections.thirdParty.partners.payments]}),e.jsxs("li",{children:[" Intercom - ",h.sections.thirdParty.partners.support]})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:h.sections.managing.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:h.sections.managing.content}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Chrome"}),e.jsx("p",{className:"text-gray-600 text-sm",children:h.sections.managing.browsers.chrome})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Firefox"}),e.jsx("p",{className:"text-gray-600 text-sm",children:h.sections.managing.browsers.firefox})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Safari"}),e.jsx("p",{className:"text-gray-600 text-sm",children:h.sections.managing.browsers.safari})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Edge"}),e.jsx("p",{className:"text-gray-600 text-sm",children:h.sections.managing.browsers.edge})]})]})]}),e.jsxs("section",{className:"border-t border-gray-200 pt-8 mt-12",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:h.contact.title}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsxs("strong",{children:[h.contact.email,":"]})," privacy@comptario.com"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsxs("strong",{children:[h.contact.cmp,":"]})," ",h.contact.cmpNote]}),e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsx("strong",{children:t.startsWith("tr")?"Veri Koruma:":t.startsWith("de")?"Datenschutz:":t.startsWith("fr")?"Protection des donnes :":"Data Protection:"})," ",h.contact.privacyEmail]})]})]})]})}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("a",{href:"#",onClick:()=>window.history.back(),className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium",children:[" ",h.backToApp]})})]})})},rb=()=>{const{i18n:a}=$t("common"),o=(a.language||"en").split("-")[0],t={tr:{title:"Knye",intro:"Bu sayfa, yasal bildirim ve iletiim bilgilerimizi ierir.",companyInfo:"irket Bilgileri",companyName:"irket Ad",address:"Adres",contact:"letiim",legal:"Yasal Bilgiler",email:"E-posta",responsible:"Sorumlu Kii",responsibleValue:Yt.representative,companyValue:Yt.companyName,addressValue:Yt.address,emailValue:Yt.email,legalNote:"Comptario, Peaknova tarafndan salanmaktadr. Bu sayfa, 5651 ve ilgili dzenlemeler erevesinde bilgilendirme amaldr."},en:{title:"Imprint",intro:"This page contains our legal notice and contact information.",companyInfo:"Company Information",companyName:"Company Name",address:"Address",contact:"Contact",legal:"Legal Information",email:"Email",responsible:"Responsible Person",responsibleValue:Yt.representative,companyValue:Yt.companyName,addressValue:Yt.address,emailValue:Yt.email,legalNote:"Comptario is provided by Peaknova. This page serves as a legal notice as required by applicable regulations."},de:{title:"Impressum",intro:"Diese Seite enthlt unser rechtliches Impressum und Kontaktinformationen.",companyInfo:"Unternehmensinformationen",companyName:"Unternehmensname",address:"Adresse",contact:"Kontakt",legal:"Rechtliche Informationen",email:"E-Mail",responsible:"Verantwortliche Person",responsibleValue:Yt.representative,companyValue:Yt.companyName,addressValue:Yt.address,emailValue:Yt.email,legalNote:"Comptario wird von Peaknova bereitgestellt. Diese Seite dient als rechtlicher Hinweis gem den geltenden Vorschriften."},fr:{title:"Mentions lgales",intro:"Cette page contient nos mentions lgales et nos informations de contact.",companyInfo:"Informations sur lentreprise",companyName:"Nom de lentreprise",address:"Adresse",contact:"Contact",legal:"Informations lgales",email:"Email",responsible:"Responsable",responsibleValue:Yt.representative,companyValue:Yt.companyName,addressValue:Yt.address,emailValue:Yt.email,legalNote:"Comptario est fourni par Peaknova. Cette page constitue une mention lgale conformment aux rglementations applicables."}},f=t[o]||t.en;return e.jsx("div",{className:"bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx(ts,{className:"h-8 w-8 text-indigo-600"})})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:f.title}),e.jsx("p",{className:"text-lg text-gray-600",children:f.intro})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"prose prose-lg max-w-none",children:[e.jsxs("section",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(ts,{className:"h-6 w-6 mr-2 text-indigo-600"}),f.companyInfo]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsxs("strong",{children:[f.companyName,":"]})," ",f.companyValue]}),e.jsxs("p",{className:"text-gray-700 mb-2 flex items-center",children:[e.jsx(Al,{className:"h-5 w-5 mr-2 text-gray-500"}),e.jsxs("span",{children:[e.jsxs("strong",{children:[f.address,":"]})," ",f.addressValue]})]}),e.jsxs("p",{className:"text-gray-700 mb-2 flex items-center",children:[e.jsx(Hs,{className:"h-5 w-5 mr-2 text-gray-500"}),e.jsxs("span",{children:[e.jsxs("strong",{children:[f.email,":"]})," ",f.emailValue]})]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsxs("strong",{children:[f.responsible,":"]})," ",f.responsibleValue]})]})]}),e.jsxs("section",{className:"mb-2",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(DA,{className:"h-6 w-6 mr-2 text-rose-600"}),f.legal]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:f.legalNote})]}),e.jsxs("section",{className:"mt-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:o==="tr"?"Altyap ve letiim":o==="de"?"Infrastruktur & Kontakt":o==="fr"?"Infrastructures & Contact":"Infrastructure & Contact"}),e.jsxs("ul",{className:"text-gray-700 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:o==="tr"?"Barndrma Salayc:":o==="de"?"Hosting-Anbieter:":o==="fr"?"Hbergeur :":"Hosting Provider:"})," ",Yt.hostingProvider]}),e.jsxs("li",{children:[e.jsx("strong",{children:o==="tr"?"E-posta Altyaps:":o==="de"?"E-Mail-Infrastruktur:":o==="fr"?"Infrastructure e-mail :":"Email Infrastructure:"})," ",Yt.emailInfrastructure]}),e.jsxs("li",{children:[e.jsx("strong",{children:o==="tr"?"Veri Koruma letiimi:":o==="de"?"Datenschutz Kontakt:":o==="fr"?"Contact protection des donnes :":"Data Protection Contact:"})," ",Yt.dataProtectionEmail]})]})]}),Yt.identifiers&&Yt.identifiers.siren?e.jsxs("section",{className:"mt-8",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(tm,{className:"h-5 w-5 mr-2 text-gray-600"}),o==="fr"?"Identifiants":o==="de"?"Kennnummern":o==="tr"?"Kimlik Bilgileri":"Identifiers"]}),e.jsxs("ul",{className:"text-gray-700 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"SIREN:"})," ",Yt.identifiers.siren]}),e.jsxs("li",{children:[e.jsx("strong",{children:"SIRET:"})," ",Yt.identifiers.siret]}),Yt.identifiers?.tva,Yt.identifiers?.rcs,Yt.identifiers?.ape,Yt.identifiers?.steuernummer&&e.jsxs("li",{children:[e.jsx("strong",{children:"Steuernummer:"})," ",Yt.identifiers.steuernummer]}),Yt.identifiers?.umsatzsteuerID&&e.jsxs("li",{children:[e.jsx("strong",{children:"USt-IdNr.:"})," ",Yt.identifiers.umsatzsteuerID]}),Yt.identifiers?.handelsregisternummer&&e.jsxs("li",{children:[e.jsx("strong",{children:"Handelsregisternummer:"})," ",Yt.identifiers.handelsregisternummer]})]})]}):null]})}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("a",{href:"#",onClick:()=>window.history.back(),className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium",children:[" ",o==="tr"?"Uygulamaya Geri Dn":o==="de"?"Zurck zur App":o==="fr"?"Retour  l'application":"Back to App"]})})]})})},sb=()=>{const{currentLanguage:a}=Vi(),o={tr:{title:"E-posta ve Anti-Spam Politikas",lastUpdated:"Son gncelleme: 10.11.2025",intro:"Bu politika Comptario tarafndan gnderilen e-postalarn kapsamn, amacn ve spam kart yaklammz aklar.",scope:{title:"Kapsam",items:["Bu politika Comptario platformu ve ilikili alan adlar zerinden gnderilen tm e-postalar kapsar.","Politika; kullanc hesaplar, kurulu yelii, gvenlik, faturalama, yasal bildirimler ve kritik ilem aklarna ilikin iletileri ierir."]},transactionalOnly:{title:"Sadece lem ve Zorunlu Bildirim E-postalar",items:["Pazarlama, promosyon veya toplu reklam e-postalar gndermiyoruz.","Tm e-postalar; hesap oluturma, e-posta dorulama, ifre sfrlama, deme/fatura bildirimi, gvenlik uyarlar, rol/organizasyon deiiklikleri, yasal zorunlu gncellemeler ve kritik sistem bilgilendirmeleri ile snrldr.","Kullanclar gereksiz e-posta kirliliine maruz braklmaz; asgari gerekli iletiim yaklam uygulanr."]},acceptableUse:{title:"Kabul Edilebilir Kullanm (E-posta)",items:["Platform zerinden yetkisiz ekilde toplu e-posta gnderimi yaplamaz.","Kullanc hesaplarna ait iletiim adresleri nc taraflara pazarlama amacyla aktarlmaz.","pheli yetkisiz eriim tespit edilirse ilgili hesaplara ait e-posta bildirimleri gvenlik amacyla kstlanabilir."]},antiSpam:{title:"Anti-Spam Yaklam",items:["SPF, DKIM ve DMARC yaplandrmalar uygulanr (e-posta btnl ve kimlik dorulama).","Yalnzca gvenilir ilem tetikleyicileri e-posta oluturabilir.","Gereksiz tekrarl gnderimler tespit edilirse sistem oran snrlama (rate limiting) uygular.","Yanltc konu satr veya gnderen bilgisi kullanlmaz."]},infrastructure:{title:"Altyap ve Teslimat",items:[`E-posta iletimi: ${Yt.emailInfrastructure}.`,"Teslimat kalitesi dzenli olarak izlenir (bounce/complaint oranlar).","Gerekirse teslimat zincirine ek gvenlik katmanlar (ifreleme, imzalama) eklenir."]},abuse:{title:"Ktye Kullanm Bildirimi",text:`Bu politikay ihlal eden veya yetkisiz grndn dndnz bir e-posta aldysanz ltfen u adrese bildirin: ${Yt.dataProtectionEmail}`},contact:{title:"letiim",text:`Sorular iin ${Yt.dataProtectionEmail} veya ${Yt.email} adresine ulaabilirsiniz.`}},en:{title:"Email & Anti-Spam Policy",lastUpdated:"Last updated: 10 Nov 2025",intro:"This policy explains the scope, purpose and anti-abuse posture of emails sent by Comptario.",scope:{title:"Scope",items:["Applies to all emails sent via the Comptario platform and associated domains.","Covers user account, organization membership, security, billing, legal notices and critical transactional flows."]},transactionalOnly:{title:"Transactional & Mandatory Notices Only",items:["We do not send marketing, promotional or bulk advertising emails.","All emails are limited to: account creation, email verification, password reset, payment/invoice notifications, security alerts, role/organization changes, legally mandated updates, and critical system advisories.","Users are not exposed to unnecessary email noise; minimal necessary communication is applied."]},acceptableUse:{title:"Acceptable Email Use",items:["Unauthorized bulk dispatch through the platform is prohibited.","User contact addresses are not sold or transferred to third parties for marketing.","If suspicious unauthorized access is detected, outbound notifications may be restricted for security."]},antiSpam:{title:"Anti-Spam Measures",items:["SPF, DKIM and DMARC are enforced (integrity & authentication).","Only trusted transactional triggers can generate emails.","Rate limiting applies if redundant repetitive sends are detected.","No deceptive subject lines or sender identities."]},infrastructure:{title:"Infrastructure & Delivery",items:[`Delivery infrastructure: ${Yt.emailInfrastructure}.`,"Delivery quality (bounce/complaint rates) is continuously monitored.","Additional cryptographic safeguards may be added where appropriate."]},abuse:{title:"Abuse Reporting",text:`Report any email you believe violates this policy or appears unauthorized to: ${Yt.dataProtectionEmail}`},contact:{title:"Contact",text:`Questions: ${Yt.dataProtectionEmail} or ${Yt.email}`}},de:{title:"E-Mail- & Anti-Spam-Richtlinie",lastUpdated:"Zuletzt aktualisiert: 10.11.2025",intro:"Diese Richtlinie erlutert den Umfang, Zweck und den Anti-Missbrauch-Ansatz der von Comptario versendeten E-Mails.",scope:{title:"Geltungsbereich",items:["Gilt fr alle ber die Comptario-Plattform und zugehrige Domains versendeten E-Mails.","Umfasst Benutzerkonto, Organisationsmitgliedschaft, Sicherheit, Abrechnung, rechtliche Hinweise und kritische transaktionale Ablufe."]},transactionalOnly:{title:"Nur Transaktionale & Gesetzlich Erforderliche Mitteilungen",items:["Wir versenden keine Marketing-, Werbe- oder Bulk-Mails.","Alle E-Mails beschrnken sich auf: Kontoerstellung, E-Mail-Besttigung, Passwort-Reset, Zahlungs-/Rechnungsbenachrichtigungen, Sicherheitswarnungen, Rollen-/Organisationsnderungen, gesetzlich erforderliche Updates und kritische Systemhinweise.","Es gilt das Prinzip der minimal notwendigen Kommunikation. "]},acceptableUse:{title:"Zulssige Nutzung (E-Mail)",items:["Unbefugter Massenversand ber die Plattform ist untersagt.","Kontaktdaten der Nutzer werden nicht zu Marketingzwecken verkauft oder bertragen.","Bei verdchtigem unbefugtem Zugriff knnen ausgehende Benachrichtigungen eingeschrnkt werden."]},antiSpam:{title:"Anti-Spam-Manahmen",items:["SPF, DKIM und DMARC sind implementiert.","Nur vertrauenswrdige transaktionale Auslser knnen E-Mails erzeugen.","Rate Limiting bei erkannten redundanten Wiederholungen.","Keine irrefhrenden Betreffzeilen oder Absenderangaben."]},infrastructure:{title:"Infrastruktur & Zustellung",items:[`Versandinfrastruktur: ${Yt.emailInfrastructure}.`,"Zustellqualitt (Bounce/Beschwerde-Raten) wird berwacht.","Bei Bedarf zustzliche kryptografische Schutzmanahmen."]},abuse:{title:"Meldeweg fr Missbrauch",text:`Melden Sie verdchtige oder unbefugte E-Mails an: ${Yt.dataProtectionEmail}`},contact:{title:"Kontakt",text:`Fragen: ${Yt.dataProtectionEmail} oder ${Yt.email}`}},fr:{title:"Politique E-mail & Anti-Spam",lastUpdated:"Dernire mise  jour : 10/11/2025",intro:"Cette politique dcrit le primtre, lobjectif et lapproche anti-abus des e-mails envoys par Comptario.",scope:{title:"Primtre",items:["Sapplique  tous les e-mails envoys via la plateforme Comptario et les domaines associs.","Couvre les comptes utilisateurs, lappartenance aux organisations, la scurit, la facturation, les notifications lgales et les flux transactionnels critiques."]},transactionalOnly:{title:"Uniquement Transactionnel & Obligations Lgales",items:["Nous nenvoyons pas de-mails marketing, promotionnels ou publicitaires de masse.","Tous les e-mails se limitent  : cration de compte, vrification de-mail, rinitialisation de mot de passe, notifications de paiement/facture, alertes de scurit, changements de rle/organisation, mises  jour lgales obligatoires et avis systmes critiques.","Principe appliqu :  communication minimale ncessaire ."]},acceptableUse:{title:"Utilisation Acceptable (E-mail)",items:["Tout envoi massif non autoris via la plateforme est interdit.","Les adresses des utilisateurs ne sont ni vendues ni transfres  des tiers  des fins marketing.","En cas daccs non autoris suspect, certaines notifications sortantes peuvent tre restreintes."]},antiSpam:{title:"Mesures Anti-Spam",items:["SPF, DKIM et DMARC activs (intgrit & authentification).","Seuls des dclencheurs transactionnels fiables peuvent gnrer des e-mails.","Limitation de frquence si des envois rptitifs redondants sont dtects.","Aucun objet ou expditeur trompeur."]},infrastructure:{title:"Infrastructure & Livraison",items:[`Infrastructure denvoi : ${Yt.emailInfrastructure}.`,"Qualit de livraison surveille (taux de rebond/rclamation).","Des protections cryptographiques additionnelles peuvent tre ajoutes si ncessaire."]},abuse:{title:"Signalement dAbus",text:`Signalez toute violation ou e-mail suspect  : ${Yt.dataProtectionEmail}`},contact:{title:"Contact",text:`Questions : ${Yt.dataProtectionEmail} ou ${Yt.email}`}}},t=o[a]||o.en;return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-12 space-y-10",children:[e.jsxs("header",{className:"text-center",children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900 mb-2 flex items-center justify-center gap-2",children:[e.jsx(Hs,{className:"h-7 w-7 text-indigo-600"})," ",t.title]}),e.jsx("p",{className:"text-sm text-slate-500",children:t.lastUpdated}),e.jsx("p",{className:"text-slate-600 mt-4 max-w-2xl mx-auto leading-relaxed",children:t.intro})]}),e.jsxs("section",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:t.scope.title}),e.jsx("ul",{className:"space-y-2 list-disc pl-5 text-slate-700",children:t.scope.items.map((f,h)=>e.jsx("li",{children:f},h))})]}),e.jsxs("section",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:t.transactionalOnly.title}),e.jsx("ul",{className:"space-y-2 list-disc pl-5 text-slate-700",children:t.transactionalOnly.items.map((f,h)=>e.jsx("li",{children:f},h))})]}),e.jsxs("section",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:t.acceptableUse.title}),e.jsx("ul",{className:"space-y-2 list-disc pl-5 text-slate-700",children:t.acceptableUse.items.map((f,h)=>e.jsx("li",{children:f},h))})]}),e.jsxs("section",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:t.antiSpam.title}),e.jsx("ul",{className:"space-y-2 list-disc pl-5 text-slate-700",children:t.antiSpam.items.map((f,h)=>e.jsx("li",{children:f},h))})]}),e.jsxs("section",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:t.infrastructure.title}),e.jsx("ul",{className:"space-y-2 list-disc pl-5 text-slate-700",children:t.infrastructure.items.map((f,h)=>e.jsx("li",{children:f},h))})]}),e.jsxs("section",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-indigo-900 mb-3 flex items-center gap-2",children:[e.jsx(qc,{className:"h-5 w-5"})," ",t.abuse.title]}),e.jsx("p",{className:"text-indigo-800 leading-relaxed",children:t.abuse.text})]}),e.jsxs("section",{className:"bg-slate-100 border border-slate-300 rounded-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5"})," ",t.contact.title]}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:t.contact.text})]}),e.jsx("div",{className:"text-center text-xs text-slate-500 pt-4",children:e.jsxs("p",{children:[" ",new Date().getFullYear()," ",Yt.companyName,". All rights reserved."]})})]})})},M_=()=>{const a=s=>{const c=document.getElementById(s);c&&c.scrollIntoView({behavior:"smooth",block:"start"})},{t:o}=$t("help"),[t,f]=G.useState(""),h=G.useMemo(()=>({sidebarTitle:o("sidebarTitle"),pageTitle:o("pageTitle"),overviewDesc:o("overviewDesc"),labels:{tip:o("labels.tip")},sections:o("sections",{returnObjects:!0}),gettingStarted:o("gettingStarted",{returnObjects:!0}),customers:o("customers",{returnObjects:!0}),suppliers:o("suppliers",{returnObjects:!0}),products:o("products",{returnObjects:!0}),invoices:o("invoices",{returnObjects:!0}),expenses:o("expenses",{returnObjects:!0}),sales:o("sales",{returnObjects:!0}),bank:o("bank",{returnObjects:!0}),reports:o("reports",{returnObjects:!0}),settings:o("settings",{returnObjects:!0}),users:o("users",{returnObjects:!0}),planLimits:o("planLimits",{returnObjects:!0}),periodLock:o("periodLock",{returnObjects:!0}),securityBackup:o("securityBackup",{returnObjects:!0}),faq:o("faq",{returnObjects:!0})}),[o]),d=G.useMemo(()=>h.sections||[],[h]),n=s=>s.toLowerCase().includes(t.trim().toLowerCase()),l=({text:s})=>{const c=t.trim();if(!c)return e.jsx(e.Fragment,{children:s});const u=s.split(new RegExp(`(${c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"));return e.jsx(e.Fragment,{children:u.map((m,x)=>m.toLowerCase()===c.toLowerCase()?e.jsx("mark",{className:"bg-yellow-200 rounded px-0.5",children:m},x):e.jsx(_t.Fragment,{children:m},x))})},i=({children:s})=>e.jsx("div",{className:"p-3 rounded-lg bg-blue-50 border border-blue-100 text-blue-900 text-sm",children:s}),r=({children:s})=>e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs rounded border bg-gray-50 border-gray-300 text-gray-800",children:s});return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("aside",{className:"lg:col-span-3",children:e.jsxs("div",{className:"sticky top-24 space-y-2",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide",children:h.sidebarTitle}),e.jsx("nav",{className:"space-y-1",children:d.map(s=>e.jsx("button",{onClick:()=>a(s.id),className:"block w-full text-left px-3 py-2 rounded-md text-sm text-gray-700 hover:text-gray-900 hover:bg-gray-100",children:s.title},s.id))})]})}),e.jsxs("div",{className:"lg:col-span-9 space-y-12",children:[e.jsx("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-4",children:e.jsx("input",{type:"text",value:t,onChange:s=>f(s.target.value),placeholder:o("searchPlaceholder",{ns:"common",defaultValue:"Ara..."}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(!t||n(h.pageTitle)||n(h.overviewDesc))&&e.jsxs("section",{id:"overview",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-3",children:h.pageTitle}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.jsx(l,{text:h.overviewDesc})})]}),(!t||n(h.gettingStarted.title)||(h.gettingStarted.steps||[]).some(s=>n(s)))&&e.jsxs("section",{id:"getting-started",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.gettingStarted.title}),e.jsx("ol",{className:"list-decimal pl-5 space-y-2 text-gray-700",children:h.gettingStarted.steps.map((s,c)=>e.jsx("li",{children:e.jsx(l,{text:s})},c))}),e.jsx("div",{className:"mt-4",children:e.jsxs(i,{children:[h.labels.tip,": ",h.gettingStarted.tipKeyboard," ",e.jsx(r,{children:"g"})," ",h.gettingStarted.tipAfter]})})]}),(!t||n(h.customers.title)||(h.customers.items||[]).some(s=>n(s)))&&e.jsxs("section",{id:"customers",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.customers.title}),e.jsx("ul",{className:"list-disc pl-5 space-y-2 text-gray-700",children:h.customers.items.map((s,c)=>e.jsx("li",{children:e.jsx(l,{text:s})},c))})]}),(!t||n(h.suppliers.title)||n(h.suppliers.desc))&&e.jsxs("section",{id:"suppliers",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.suppliers.title}),e.jsx("p",{className:"text-gray-700",children:e.jsx(l,{text:h.suppliers.desc})})]}),(!t||n(h.products.title)||n(h.products.desc)||(h.products.items||[]).some(s=>n(s)))&&e.jsxs("section",{id:"products",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.products.title}),e.jsx("p",{className:"text-gray-700 mb-3",children:e.jsx(l,{text:h.products.desc})}),e.jsx("ul",{className:"list-disc pl-5 space-y-2 text-gray-700",children:h.products.items.map((s,c)=>e.jsx("li",{children:e.jsx(l,{text:s})},c))})]}),(!t||n(h.invoices.title)||(h.invoices.steps||[]).some(s=>n(s)))&&e.jsxs("section",{id:"invoices",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.invoices.title}),e.jsx("ol",{className:"list-decimal pl-5 space-y-2 text-gray-700",children:h.invoices.steps.map((s,c)=>e.jsx("li",{children:e.jsx(l,{text:s})},c))})]}),(!t||n(h.expenses.title)||n(h.expenses.desc))&&e.jsxs("section",{id:"expenses",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.expenses.title}),e.jsx("p",{className:"text-gray-700",children:e.jsx(l,{text:h.expenses.desc})})]}),(!t||n(h.sales.title)||n(h.sales.desc))&&e.jsxs("section",{id:"sales",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.sales.title}),e.jsx("p",{className:"text-gray-700",children:e.jsx(l,{text:h.sales.desc})})]}),(!t||n(h.bank.title)||n(h.bank.desc))&&e.jsxs("section",{id:"bank",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.bank.title}),e.jsx("p",{className:"text-gray-700",children:e.jsx(l,{text:h.bank.desc})})]}),(!t||n(h.reports.title)||n(h.reports.desc))&&e.jsxs("section",{id:"reports",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.reports.title}),e.jsx("p",{className:"text-gray-700",children:e.jsx(l,{text:h.reports.desc})})]}),(!t||n(h.settings.title)||(h.settings.items||[]).some(s=>n(s)))&&e.jsxs("section",{id:"settings",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.settings.title}),e.jsx("ul",{className:"list-disc pl-5 space-y-2 text-gray-700",children:h.settings.items.map((s,c)=>e.jsx("li",{children:e.jsx(l,{text:s})},c))})]}),(!t||n(h.users.title)||n(h.users.desc))&&e.jsxs("section",{id:"users",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.users.title}),e.jsx("p",{className:"text-gray-700",children:e.jsx(l,{text:h.users.desc})})]}),(!t||n(h.planLimits.title)||n(h.planLimits.desc))&&e.jsxs("section",{id:"plan-limits",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.planLimits.title}),e.jsx("p",{className:"text-gray-700",children:e.jsx(l,{text:h.planLimits.desc})})]}),(!t||n(h.periodLock.title)||n(h.periodLock.desc))&&e.jsxs("section",{id:"period-lock",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.periodLock.title}),e.jsx("p",{className:"text-gray-700",children:e.jsx(l,{text:h.periodLock.desc})})]}),(!t||n(h.securityBackup.title)||n(h.securityBackup.items?.join(" ")))&&e.jsxs("section",{id:"security-backup",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.securityBackup.title}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-gray-700",children:[e.jsx("li",{children:e.jsx(l,{text:h.securityBackup.items[0]})}),e.jsx("li",{children:e.jsx(l,{text:h.securityBackup.items[1]})}),e.jsx("li",{children:e.jsx("a",{className:"underline",href:"#legal/cookies",children:h.securityBackup.cookiesText})})]})]}),(!t||n(h.faq.title)||n(h.faq.text))&&e.jsxs("section",{id:"faq-contact",className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:h.faq.title}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx(l,{text:h.faq.text.replace("support@comptario.com","")}),e.jsx("a",{className:"underline",href:"mailto:support@comptario.com",children:"support@comptario.com"})]})]})]})]})})]})},nb=()=>{const{t:a}=$t("common"),{showBanner:o,acceptAll:t,rejectAll:f,openModal:h,closeBanner:d}=Xp(),n=G.useRef(null);return G.useEffect(()=>{o&&n.current&&n.current.focus()},[o]),G.useEffect(()=>{const l=i=>{i.key==="Escape"&&o&&d()};if(o)return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[o,d]),o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:d,"aria-hidden":"true"}),e.jsx("div",{ref:n,role:"dialog","aria-labelledby":"cookie-banner-title","aria-describedby":"cookie-banner-description","aria-modal":"true",tabIndex:-1,className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-lg transform transition-transform duration-300 ease-in-out",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx(Wp,{className:"h-6 w-6 text-blue-600","aria-hidden":"true"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{id:"cookie-banner-title",className:"text-lg font-semibold text-gray-900 mb-1",children:a("cookie.banner.title")}),e.jsx("p",{id:"cookie-banner-description",className:"text-sm text-gray-600 leading-relaxed",children:a("cookie.banner.description")})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 lg:flex-shrink-0",children:[e.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors",children:a("cookie.banner.rejectAll")}),e.jsxs("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors inline-flex items-center gap-2",children:[e.jsx(Jc,{className:"h-4 w-4","aria-hidden":"true"}),a("cookie.banner.managePreferences")]}),e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:a("cookie.banner.acceptAll")})]}),e.jsx("button",{onClick:d,className:"absolute top-2 right-2 lg:relative lg:top-auto lg:right-auto p-2 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 rounded-lg","aria-label":a("cookie.banner.close"),children:e.jsx(Nr,{className:"h-5 w-5","aria-hidden":"true"})})]})})})]}):null},ab=()=>{const{t:a}=$t("common"),{showModal:o,consent:t,closeModal:f,updateConsent:h,acceptAll:d,rejectAll:n}=Xp(),l=G.useRef(null),i=G.useRef(null),[r,s]=G.useState({necessary:!0,analytics:!1,marketing:!1});G.useEffect(()=>{t&&s({necessary:t.necessary,analytics:t.analytics,marketing:t.marketing})},[t]),G.useEffect(()=>{const p=v=>{v.key==="Escape"&&f()};if(o)return i.current&&i.current.focus(),document.addEventListener("keydown",p),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",p),document.body.style.overflow="unset"}},[o,f]),G.useEffect(()=>{if(!o||!l.current)return;const p=l.current,v=p.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),y=v[0],N=v[v.length-1],T=_=>{_.key==="Tab"&&(_.shiftKey?document.activeElement===y&&(_.preventDefault(),N.focus()):document.activeElement===N&&(_.preventDefault(),y.focus()))};return p.addEventListener("keydown",T),()=>p.removeEventListener("keydown",T)},[o]);const c=(p,v)=>{s(y=>({...y,[p]:v}))},u=()=>{h(r)},m=()=>{s(p=>({...p,analytics:!0,marketing:!0})),d()},x=()=>{s(p=>({...p,analytics:!1,marketing:!1})),n()};if(!o){try{console.debug("[cookie] CookiePreferencesModal hidden (showModal=false)")}catch{}return null}const b=[{id:"necessary",title:a("cookie.modal.necessary.title"),description:a("cookie.modal.necessary.description"),icon:zs,enabled:!0,disabled:!0,required:!0},{id:"analytics",title:a("cookie.modal.analytics.title"),description:a("cookie.modal.analytics.description"),icon:Cm,enabled:r.analytics,disabled:!1,required:!1},{id:"marketing",title:a("cookie.modal.marketing.title"),description:a("cookie.modal.marketing.description"),icon:_u,enabled:r.marketing,disabled:!1,required:!1}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 transition-opacity",onClick:f,"aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-labelledby":"cookie-modal-title","aria-describedby":"cookie-modal-description","aria-modal":"true",children:e.jsxs("div",{ref:l,className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wp,{className:"h-6 w-6 text-blue-600","aria-hidden":"true"}),e.jsx("h2",{id:"cookie-modal-title",className:"text-xl font-semibold text-gray-900",children:a("cookie.modal.title")})]}),e.jsx("button",{ref:i,onClick:f,className:"p-2 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded-lg","aria-label":a("cookie.banner.close"),children:e.jsx(Nr,{className:"h-5 w-5","aria-hidden":"true"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{id:"cookie-modal-description",className:"text-gray-600 mb-6",children:a("cookie.modal.description")}),e.jsx("div",{className:"space-y-6",children:b.map(p=>{const v=p.icon;return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(v,{className:"h-5 w-5 text-gray-500 mt-1 flex-shrink-0","aria-hidden":"true"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:p.title}),e.jsx("p",{className:"text-sm text-gray-600",children:p.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.required?e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:a("cookie.modal.necessary.alwaysActive")}):e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:p.enabled?a("cookie.modal.analytics.enabled"):a("cookie.modal.analytics.disabled")}),e.jsxs("button",{onClick:()=>!p.disabled&&c(p.id,!p.enabled),disabled:p.disabled,className:`
                            relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
                            ${p.enabled?"bg-blue-600":"bg-gray-200"}
                            ${p.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"}
                          `,"aria-pressed":p.enabled,"aria-label":`Toggle ${p.title}`,children:[e.jsx("span",{className:`
                              inline-block h-4 w-4 transform rounded-full bg-white transition-transform
                              ${p.enabled?"translate-x-6":"translate-x-1"}
                            `}),p.enabled&&e.jsx(cs,{className:"absolute left-1.5 h-3 w-3 text-blue-600","aria-hidden":"true"})]})]})]})},p.id)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 p-6 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors",children:a("cookie.modal.rejectAll")}),e.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors",children:a("cookie.modal.cancel")}),e.jsxs("div",{className:"flex gap-3 sm:ml-auto",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:a("cookie.modal.acceptSelected")}),e.jsx("button",{onClick:m,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:a("cookie.modal.acceptAll")})]})]})]})})]})},Up=(a,o)=>{if(typeof a=="string")return a;if(a&&typeof a=="object"){const t=a;return t.response?.data?.message||t.message||o}return o},zi=(a,o)=>{try{a()}catch{}},R_=({invite:a,token:o,onJoinSuccess:t})=>{const{t:f}=$t(),[h,d]=G.useState(""),[n,l]=G.useState(!1),[i,r]=G.useState(!1),[s,c]=G.useState(null),[u,m]=G.useState(null),[x,b]=G.useState(0),p=f("auth.captchaRequired","Please complete the human verification."),v=async()=>{if(!h||h.length<6){c(f("auth.passwordTooShort","Password must be at least 8 characters."));return}if(!u){c(p);return}try{r(!0),await hs.completeInviteWithPassword(o,h,u),zi(()=>Er.removeItem("pending_invite_token"),"remove pending_invite_token from sessionStorage"),zi(()=>Et.removeItem("pending_invite_token"),"remove pending_invite_token from localStorage");try{const{authService:y}=await Mr(async()=>{const{authService:N}=await Promise.resolve().then(()=>Qb);return{authService:N}},void 0);await y.login({email:a.email,password:h}),zi(()=>window.dispatchEvent(new CustomEvent("showToast",{detail:{message:f("org.join.passwordFlow.toastSuccess"),tone:"success"}})),"dispatch invite success toast"),t?.()}catch{zi(()=>Er.setItem("prefill_email",a.email),"store prefill_email in sessionStorage"),zi(()=>Et.setItem("prefill_email",a.email),"store prefill_email in localStorage"),window.location.hash="login"}}catch(y){const N=Up(y,f("common.error","Operation failed"));c(N);const T=String(N||"").toLowerCase();(T.includes("human verification")||T.includes("captcha"))&&(m(null),b(_=>_+1)),zi(()=>window.dispatchEvent(new CustomEvent("showToast",{detail:{message:N,tone:"error"}})))}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(Ls,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:f("org.join.passwordFlow.title")}),e.jsx("p",{className:"text-gray-600 mb-6",children:f("org.join.passwordFlow.description",{email:a.email})}),e.jsxs("div",{className:"text-left space-y-2 mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:f("org.join.passwordFlow.passwordLabel")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",value:h,onChange:y=>d(y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:f("org.join.passwordFlow.passwordPlaceholder")}),e.jsx("button",{type:"button",onClick:()=>l(!n),className:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:f(n?"org.join.passwordFlow.hidePassword":"org.join.passwordFlow.showPassword")})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:f("auth.captchaPrompt","Please complete the human verification before continuing.")}),e.jsx(_m,{onToken:y=>{c(null),m(y)}},`invite-complete-${x}`)]}),e.jsx("button",{onClick:v,disabled:i,className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-colors",children:f(i?"org.join.passwordFlow.submitting":"org.join.passwordFlow.submit")}),s&&e.jsx("p",{className:"mt-3 text-sm text-red-600",children:s})]})})},ib=({token:a,onJoinSuccess:o,onNavigateHome:t,onNavigateDashboard:f})=>{const{t:h,i18n:d}=$t(),{user:n,isAuthenticated:l,logout:i}=Gs(),r=h("auth.captchaRequired","Please complete the human verification.");typeof window<"u"&&(window.location.hostname?.endsWith(".github.dev")||window.location.hostname?.endsWith(".githubpreview.dev")||window.location.hostname?.includes(".app.github.dev"));const c=!1,[u,m]=G.useState(!0),[x,b]=G.useState(null),[p,v]=G.useState("validating"),[y,N]=G.useState(null),[T,_]=G.useState(null),[O,H]=G.useState(0),[F,V]=G.useState(null),q=G.useCallback(()=>{_(null),H(k=>k+1)},[c]),W=G.useCallback(async k=>{if(!k){V(r);return}try{m(!0),v("validating"),N(null),V(null);const j=await hs.validateInviteToken(a,k);if(j.valid&&j.invite){V(null),b(j.invite);const S=new Date,C=new Date(j.invite.expiresAt);S>C?v("expired"):j.invite.acceptedAt?v("already_member"):v("valid")}else v("invalid"),N(j.error||"Invalid invite token")}catch(j){const S=Up(j,"Failed to validate invite token"),C=String(S||"").toLowerCase();if(C.includes("human verification")||C.includes("captcha")){V(h("auth.captchaVerificationFailed","nsan dorulamas dorulanamad. Ltfen tekrar deneyin.")),q();return}v("invalid"),N(S)}finally{m(!1)}},[a,q,r,h]);G.useEffect(()=>{!a||!T||W(T)},[a,T,W]);const B=async()=>{if(!(!x||!l))try{v("accepting"),await hs.acceptInvite({token:a}),v("success"),setTimeout(()=>{o?.()},2e3)}catch(k){console.error("Failed to accept invite:",k),v("error"),N(Up(k,"Failed to accept invitation"))}},E=()=>{t?.()},P=k=>{switch(k){case"OWNER":return e.jsx(pv,{className:"w-5 h-5 text-yellow-500"});case"ADMIN":return e.jsx(zs,{className:"w-5 h-5 text-blue-500"});case"MEMBER":return e.jsx(ds,{className:"w-5 h-5 text-gray-500"})}},A=G.useCallback(k=>{const j=d.language||typeof navigator<"u"&&navigator.language||"en-US";try{return new Date(k).toLocaleString(j,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return new Date(k).toLocaleString(j)}},[d.language]);if(!T)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(zs,{className:"w-16 h-16 text-emerald-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:h("auth.captchaRequired","Ltfen insan dorulamasn tamamlayn")}),e.jsx("p",{className:"text-gray-600 mb-6",children:h("auth.captchaPrompt","Daveti grmek iin ltfen ksa dorulamay tamamlayn.")}),e.jsx(_m,{onToken:k=>{V(null),_(k)}},`invite-validate-${O}`),F&&e.jsx("p",{className:"mt-4 text-sm text-red-600",children:F})]})});if(u||p==="validating")return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:h("org.join.loadingState.title")}),e.jsx("p",{className:"text-gray-600",children:h("org.join.loadingState.subtitle")})]})});if(p==="invalid"||p==="expired"){const k=p==="expired";return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(Tl,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:h(k?"org.join.expired.title":"org.join.invalid.title")}),e.jsx("p",{className:"text-gray-600 mb-6",children:h(k?"org.join.expired.subtitle":"org.join.invalid.subtitle")}),e.jsxs("button",{onClick:t,className:"flex items-center justify-center space-x-2 w-full px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(bA,{className:"w-4 h-4"}),e.jsx("span",{children:h(k?"org.join.expired.action":"org.join.invalid.action")})]}),y&&e.jsx("p",{className:"mt-4 text-sm text-red-600",children:y})]})})}return p==="already_member"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(Ls,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:h("org.join.alreadyMember.title")}),e.jsx("p",{className:"text-gray-600 mb-6",children:h("org.join.alreadyMember.subtitle")}),e.jsxs("button",{onClick:f,className:"flex items-center justify-center space-x-2 w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Nl,{className:"w-4 h-4"}),e.jsx("span",{children:h("org.join.alreadyMember.action")})]})]})}):p==="success"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx($s,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:h("org.join.success.title")}),e.jsx("p",{className:"text-gray-600 mb-6",children:x&&h("org.join.success.subtitle",{orgName:x.organization.name})}),e.jsxs("button",{onClick:f,className:"flex items-center justify-center space-x-2 w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Nl,{className:"w-4 h-4"}),e.jsx("span",{children:h("org.join.success.action")})]})]})}):p==="error"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(up,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:h("org.join.error.title")}),e.jsx("p",{className:"text-gray-600 mb-6",children:h("org.join.error.subtitle")}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:B,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:h("org.join.error.tryAgain")}),e.jsx("button",{onClick:t,className:"w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:h("common.backToHome","Back to Home")})]}),y&&e.jsx("p",{className:"mt-4 text-sm text-red-600",children:y})]})}):l?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(Ls,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:h("org.join.title")}),x&&e.jsx("p",{className:"text-gray-600",children:h("org.join.subtitle",{orgName:x.organization.name})})]}),x&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[h("org.join.details.organizationLabel"),":"]}),e.jsx("span",{className:"font-medium text-gray-900",children:x.organization.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[h("org.join.details.emailLabel"),":"]}),e.jsx("span",{className:"font-medium text-gray-900",children:x.email})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[h("org.join.details.roleLabel"),":"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[P(x.role),e.jsx("span",{className:"font-medium text-gray-900",children:h(`org.members.roles.${x.role}`)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[h("org.join.details.expiresLabel"),":"]}),e.jsx("span",{className:"text-sm text-gray-900",children:A(x.expiresAt)})]})]})}),n&&x&&n.email!==x.email&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(up,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsxs("strong",{children:[h("org.join.emailMismatch.title"),":"]})," ",h("org.join.emailMismatch.body",{inviteEmail:x.email,currentEmail:n.email||""})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{zi(()=>Er.setItem("prefill_email",x.email)),await i();try{window.location.hash="login"}catch{window.location.href="#login"}},className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",children:h("org.join.emailMismatch.loginAction",{inviteEmail:x.email})}),e.jsx("button",{type:"button",onClick:async()=>{zi(()=>Er.setItem("prefill_email",x.email)),await i();try{window.location.hash="register"}catch{window.location.href="#register"}},className:"px-3 py-2 text-sm bg-emerald-600 text-white rounded-md hover:bg-emerald-700",children:h("org.join.emailMismatch.registerAction",{inviteEmail:x.email})})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:B,disabled:p==="accepting"||n&&x&&n.email!==x.email,className:"flex items-center justify-center space-x-2 w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[p==="accepting"?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx($s,{className:"w-4 h-4"}),e.jsx("span",{children:h(p==="accepting"?"org.join.accepting":"org.join.accept")})]}),e.jsx("button",{onClick:E,disabled:p==="accepting",className:"w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 transition-colors",children:h("org.join.decline")})]})]})}):x?e.jsx(R_,{invite:x,token:a,onJoinSuccess:o}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{children:h("org.join.guestFallback.loading")})})},z_=({quoteId:a})=>{const{t:o,i18n:t}=$t(),{formatCurrency:f}=Jr(),[h,d]=G.useState(null),[n,l]=G.useState(!1),[i,r]=G.useState(null),[s,c]=G.useState(null),[u,m]=G.useState(null),[x,b]=G.useState(!1);G.useEffect(()=>{let B=!1;return(async()=>{try{const E=await gD(String(a));B||(d(E),E?.tenantPublicProfile&&c(E.tenantPublicProfile))}catch{B||d(null)}})(),()=>{B=!0}},[a]),G.useEffect(()=>{h&&(x||(h.status==="sent"||h.status==="draft")&&(async()=>{try{const B=await xD(String(a));d(B)}finally{b(!0)}})())},[h,x,a]),G.useEffect(()=>{if(!(typeof window>"u"))try{const B=Nm();if(!B){m(null);return}const E=[B.firstName,B.lastName].filter(Boolean).join(" ")||B.email;m(E||null)}catch{m(null)}},[]);const p=new Date().toISOString().slice(0,10),v=h?.validUntil?h.validUntil<p:!1,y=h&&!["accepted","declined","expired"].includes(h.status)&&v,N=B=>{const E=B.description??B.name??B.productName??"",P=Number(B.quantity??B.qty??0),A=Number(B.unitPrice??B.price??B.unit_price??0),k=Number(B.total??P*A),j=B.id??`${E}-${A}-${k}`;return{description:E,quantity:P,unitPrice:A,total:k,key:j}},T=G.useMemo(()=>{if(!h)return 0;const B=Number(h.total)||0;if(B>0)return B;const E=(h.items||[]).reduce((P,A)=>P+N(A).total,0);return Number(E)||0},[h]),_=G.useMemo(()=>{const B=(t.language||"tr").toLowerCase().substring(0,2);return["tr","en","fr","de"].includes(B)?B:"en"},[t.language]),O=G.useMemo(()=>({tr:{title:"Teklif",appSubtitle:"Teklif dkman",customerInfo:"Hesap Bilgileri",quoteNumber:"Teklif No",issueDate:"Dzenleme Tarihi",validUntil:"Geerlilik Tarihi",status:"Durum",items:{description:"Aklama",quantity:"Miktar",unitPrice:"Birim Fiyat",total:"Toplam"},totals:{grandTotal:"Genel Toplam"},footer:"Bu belge bilgi amaldr.",preparedBy:"Teklifi Hazrlayan",copied:"Balant kopyaland."},en:{title:"Quote",appSubtitle:"Quotation document",customerInfo:"Account Information",quoteNumber:"Quote No",issueDate:"Issue Date",validUntil:"Valid Until",status:"Status",items:{description:"Description",quantity:"Qty",unitPrice:"Unit Price",total:"Total"},totals:{grandTotal:"Grand Total"},footer:"This document is for information purposes.",preparedBy:"Prepared by",copied:"Link copied."},fr:{title:"Devis",appSubtitle:"Document de devis",customerInfo:"Informations compte",quoteNumber:"N de devis",issueDate:"Date",validUntil:"Valable jusquau",status:"Statut",items:{description:"Description",quantity:"Qt",unitPrice:"Prix unitaire",total:"Total"},totals:{grandTotal:"Total gnral"},footer:"Document  titre indicatif.",preparedBy:"Prpar par",copied:"Lien copi."},de:{title:"Angebot",appSubtitle:"Angebotsdokument",customerInfo:"Accountinformationen",quoteNumber:"Angebotsnr.",issueDate:"Datum",validUntil:"Gltig bis",status:"Status",items:{description:"Beschreibung",quantity:"Menge",unitPrice:"Einzelpreis",total:"Summe"},totals:{grandTotal:"Gesamtsumme"},footer:"Dieses Dokument dient nur zur Information.",preparedBy:"Erstellt von",copied:"Link kopiert."}})[_],[_]),H=G.useMemo(()=>{const B=(s?.country||"").toString().toUpperCase();return["TR","FR","DE","US","OTHER"].includes(B)?B:_==="tr"?"TR":_==="fr"?"FR":_==="de"?"DE":"US"},[s?.country,_]),F=G.useMemo(()=>{const B=s??{},E=(P,A)=>A?e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsxs("strong",{children:[P,":"]})," ",e.jsx("span",{children:A})]},P):null;switch(H){case"TR":return[E("VKN",B.taxNumber),E("Vergi Dairesi",B.taxOffice),E("Mersis",B.mersisNumber),E("KEP",B.kepAddress)];case"FR":return[E("SIRET",B.siretNumber),E("SIREN",B.sirenNumber),E("APE",B.apeCode),E("TVA",B.tvaNumber),E("RCS",B.rcsNumber)];case"DE":return[E("Steuernummer",B.steuernummer),E("USt-IdNr",B.umsatzsteuerID),E("HRB",B.handelsregisternummer),E("Geschftsfhrer",B.geschaeftsfuehrer)];case"US":return[E("EIN",B.einNumber),E("Tax ID",B.taxId),E("Business License",B.businessLicenseNumber),E("State",B.stateOfIncorporation)];default:return[E("Registration No",B.registrationNumber),E("VAT",B.vatNumberGeneric),E("Tax ID",B.taxIdGeneric),E("State/Region",B.stateOrRegion)]}},[s,H]),V=G.useMemo(()=>{if(!h)return"";const B=String(h.status).toLowerCase();switch(_){case"tr":return B==="accepted"?"Kabul Edildi":B==="declined"?"Reddedildi":B==="sent"?"Gnderildi":B==="viewed"?"Grntlendi":B==="expired"?"Sresi Doldu":"Taslak";case"fr":return B==="accepted"?"Accept":B==="declined"?"Refus":B==="sent"?"Envoy":B==="viewed"?"Consult":B==="expired"?"Expir":"Brouillon";case"de":return B==="accepted"?"Akzeptiert":B==="declined"?"Abgelehnt":B==="sent"?"Gesendet":B==="viewed"?"Gesehen":B==="expired"?"Abgelaufen":"Entwurf";default:return B.charAt(0).toUpperCase()+B.slice(1)}},[h,_]),q=async()=>{if(h&&window.confirm(o("quotes.confirmAccept",{defaultValue:"Teklifi kabul etmek istediinizden emin misiniz? Bu ilem geri alnamaz."}))){l("accept");try{const B=await yD(String(a));d(B),r(o("quotes.acceptedThanks",{defaultValue:"Teekkrler, teklif kabul edildi."}))}finally{l(!1)}}},W=async()=>{if(h&&window.confirm(o("quotes.confirmDecline",{defaultValue:"Teklifi reddetmek istediinizden emin misiniz?"}))){l("decline");try{const B=await bD(String(a));d(B),r(o("quotes.declinedInfo",{defaultValue:"Teklif reddedildi."}))}finally{l(!1)}}};return h?e.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-50 p-6",children:e.jsxs("div",{className:"bg-white border rounded-xl shadow p-6 w-full max-w-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-indigo-200 pb-3",children:[e.jsxs("div",{className:"flex items-end gap-3",children:[s?.logoDataUrl?e.jsx("img",{src:s.logoDataUrl,alt:"logo",className:"h-16 object-contain"}):e.jsx(Tm,{className:"h-16 w-auto"}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("div",{className:"text-indigo-600 font-extrabold text-xl",children:O.title}),e.jsx("div",{className:"text-gray-500 text-xs",children:O.appSubtitle}),e.jsx("div",{className:"text-sm text-gray-900 mt-1 font-semibold",children:h.quoteNumber})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:async()=>{const{generateQuotePDF:B}=await Mr(async()=>{const{generateQuotePDF:E}=await import("./pdfGenerator--172hwWR.js").then(P=>P.p);return{generateQuotePDF:E}},[]);await B({id:h.id,quoteNumber:h.quoteNumber,customerName:h.customerName,issueDate:h.issueDate,validUntil:h.validUntil,status:h.status,currency:h.currency,total:T,items:(h.items||[]).map(E=>{const P=N(E);return{description:P.description,quantity:P.quantity,unitPrice:P.unitPrice,total:P.total}}),scopeOfWorkHtml:h.scopeOfWorkHtml||""},{filename:h.quoteNumber,company:s||void 0})},className:"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200",children:[e.jsx(kl,{className:"w-4 h-4"})," ",e.jsx("span",{className:"text-sm",children:o("quotes.actions.downloadPdf")||"PDF ndir"})]}),e.jsxs("button",{onClick:async()=>{const B=window.location.href;try{await navigator.clipboard.writeText(B);try{window.dispatchEvent(new CustomEvent("showToast",{detail:{message:O.copied,tone:"success"}}))}catch(E){console.warn("Toast event dispatch failed",E)}r(O.copied)}catch(E){console.warn("Failed to copy link to clipboard",E);try{alert(B)}catch(P){console.warn("Alert fallback failed",P)}}},className:"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200",children:[e.jsx(Yp,{className:"w-4 h-4"})," ",e.jsx("span",{className:"text-sm",children:o("quotes.actions.copyLink")||"Link Kopyala"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-6 mt-2 mb-5",children:[e.jsxs("div",{className:"text-sm text-gray-800",children:[s?.name?e.jsx("div",{className:"text-base font-semibold text-gray-900",children:s.name}):null,s?.address?e.jsx("div",{className:"text-gray-600 whitespace-pre-line",children:s.address}):null,e.jsxs("div",{className:"mt-2 space-y-1",children:[F,s?.iban?e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("strong",{children:"IBAN:"})," ",e.jsx("span",{children:s.iban})]}):null,s?.phone?e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("strong",{children:"Tel:"})," ",e.jsx("span",{children:s.phone})]}):null,s?.email?e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("span",{children:s.email})]}):null,s?.website?e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("strong",{children:"Web:"})," ",e.jsx("span",{children:s.website})]}):null]})]}),e.jsxs("div",{className:"text-right text-sm text-gray-800",children:[e.jsx("div",{className:"text-gray-700 font-semibold mb-1",children:O.customerInfo}),e.jsx("div",{className:"font-medium",children:h.customerName})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 mr-2",children:[O.quoteNumber,":"]}),e.jsx("span",{className:"font-medium",children:h.quoteNumber})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 mr-2",children:[O.issueDate,":"]}),e.jsx("span",{className:"font-medium",children:new Date(h.issueDate).toLocaleDateString(_==="tr"?"tr-TR":_==="fr"?"fr-FR":_==="de"?"de-DE":"en-US")})]}),h.validUntil?e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 mr-2",children:[O.validUntil,":"]}),e.jsx("span",{className:"font-medium",children:new Date(h.validUntil).toLocaleDateString(_==="tr"?"tr-TR":_==="fr"?"fr-FR":_==="de"?"de-DE":"en-US")})]}):null]}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1 sm:text-right",children:[h.status?e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 mr-2",children:[O.status,":"]}),e.jsx("span",{className:"font-medium",children:V})]}):null,e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-500 mr-2",children:[o("quotes.createModal.currency")||"Para Birimi",":"]}),e.jsx("span",{className:"font-medium",children:h.currency})]})]})]}),i&&e.jsx("div",{className:"mb-4 rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-900",children:i}),Array.isArray(h.items)&&h.items.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:O.items.description}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:O.items.quantity}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:O.items.unitPrice}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:O.items.total})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(h.items||[]).map(B=>{const E=N(B),P=String(E.key);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm text-gray-800",children:E.description}),e.jsx("td",{className:"px-3 py-2 text-sm text-right text-gray-700",children:E.quantity}),e.jsx("td",{className:"px-3 py-2 text-sm text-right text-gray-700",children:f(E.unitPrice,h.currency)}),e.jsx("td",{className:"px-3 py-2 text-sm text-right font-medium text-gray-900",children:f(E.total,h.currency)})]},P)})})]})}),T>0&&e.jsx("div",{className:"flex items-center justify-end mt-4",children:e.jsx("div",{className:"text-lg font-semibold",children:f(T,h.currency)})}),!!h.scopeOfWorkHtml&&e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-base font-semibold text-gray-900 mb-2",children:o("quotes.scopeOfWork.title",{defaultValue:"in Kapsam"})}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-800",dangerouslySetInnerHTML:{__html:Yv(h.scopeOfWorkHtml||"")}})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-900 mb-1",children:_==="tr"?"AIKLAMA":_==="fr"?"REMARQUES":_==="de"?"ANMERKUNGEN":"NOTES"}),e.jsxs("ul",{className:"text-sm text-gray-800 list-disc pl-5 space-y-1",children:[e.jsx("li",{children:_==="tr"?"Teklifimiz KDV hari olarak paylalmtr.":_==="fr"?"Notre offre est indique hors TVA.":_==="de"?"Unser Angebot ist exkl. MwSt.":"Our offer is exclusive of VAT."}),e.jsx("li",{children:(()=>{if(!h.validUntil)return _==="tr"?"Teklifimiz 30 gn geerlidir.":_==="fr"?"Notre offre est valable 30 jours.":_==="de"?"Unser Angebot ist 30 Tage gltig.":"Our offer is valid for 30 days.";try{const B=new Date(h.issueDate).getTime(),E=new Date(h.validUntil).getTime(),P=Math.round((E-B)/864e5)||30;return _==="tr"?`Teklifimiz ${P} gn geerlidir.`:_==="fr"?`Notre offre est valable ${P} jours.`:_==="de"?`Unser Angebot ist ${P} Tage gltig.`:`Our offer is valid for ${P} days.`}catch{return _==="tr"?"Teklifimiz 30 gn geerlidir.":_==="fr"?"Notre offre est valable 30 jours.":_==="de"?"Unser Angebot ist 30 Tage gltig.":"Our offer is valid for 30 days."}})()})]}),u?e.jsxs("div",{className:"text-right text-sm text-gray-800 mt-2",children:[e.jsxs("strong",{children:[O.preparedBy,":"]})," ",u]}):null]}),!["accepted","declined"].includes(h.status)&&!y&&e.jsxs("div",{className:"mt-6 flex gap-3 text-sm",children:[e.jsxs("button",{disabled:n!==!1,onClick:q,className:`inline-flex items-center gap-1 rounded-lg px-3 py-2 text-white ${n==="accept"?"bg-green-700":"bg-green-600 hover:bg-green-700"}`,children:[e.jsx(cs,{className:"w-4 h-4"})," ",o("quotes.actions.accept")||"Kabul Et"]}),e.jsxs("button",{disabled:n!==!1,onClick:W,className:`inline-flex items-center gap-1 rounded-lg px-3 py-2 text-white ${n==="decline"?"bg-red-700":"bg-red-600 hover:bg-red-700"}`,children:[e.jsx(Tl,{className:"w-4 h-4"})," ",o("quotes.actions.decline")||"Reddet"]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-6",children:e.jsxs("div",{className:"bg-white border rounded-xl shadow p-8 max-w-lg w-full text-center",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:o("quotes.title")||"Teklif"}),e.jsx("p",{className:"text-gray-600",children:o("quotes.noQuotesFound")||"Teklif bulunamad."})]})})};function L_(){return G.useEffect(()=>{let a=!0;return(async()=>{try{const t=await Gc.getSettings();if(!a)return;const d=!!1||!1;if(t.defaultMetaTitle&&!document.title&&(document.title=t.defaultMetaTitle),t.defaultMetaDescription){let n=document.querySelector('meta[name="description"]');n||(n=document.createElement("meta"),n.setAttribute("name","description"),document.head.appendChild(n)),n.setAttribute("content",t.defaultMetaDescription)}if(!t.enableIndexing){let n=document.querySelector('meta[name="robots"]');n||(n=document.createElement("meta"),n.setAttribute("name","robots"),document.head.appendChild(n)),n.setAttribute("content","noindex, nofollow")}if(t.defaultOgImageUrl){let n=document.querySelector('meta[property="og:image"]');if(n||(n=document.createElement("meta"),n.setAttribute("property","og:image"),document.head.appendChild(n)),n.setAttribute("content",t.defaultOgImageUrl),t.defaultMetaTitle){let l=document.querySelector('meta[property="og:title"]');l||(l=document.createElement("meta"),l.setAttribute("property","og:title"),document.head.appendChild(l)),l.setAttribute("content",t.defaultMetaTitle)}if(t.defaultMetaDescription){let l=document.querySelector('meta[property="og:description"]');l||(l=document.createElement("meta"),l.setAttribute("property","og:description"),document.head.appendChild(l)),l.setAttribute("content",t.defaultMetaDescription)}}if(t.canonicalBaseUrl){let n=document.querySelector('link[rel="canonical"]');n||(n=document.createElement("link"),n.setAttribute("rel","canonical"),document.head.appendChild(n));const l=window.location.pathname+window.location.search;n.setAttribute("href",t.canonicalBaseUrl+l)}if(d&&(t.googleAnalyticsId&&O_(t.googleAnalyticsId),t.googleTagManagerId&&F_(t.googleTagManagerId),t.pinterestTagId&&B_(t.pinterestTagId),t.metaPixelId&&U_(t.metaPixelId),t.linkedinInsightTagId&&V_(t.linkedinInsightTagId)),t.customHeadHtml){const n=document.createElement("div");n.innerHTML=t.customHeadHtml,Array.from(n.children).forEach(l=>{document.head.appendChild(l.cloneNode(!0))})}if(t.customBodyStartHtml){const n=document.createElement("div");n.innerHTML=t.customBodyStartHtml,Array.from(n.children).forEach(l=>{document.body.insertBefore(l.cloneNode(!0),document.body.firstChild)})}if(t.customBodyEndHtml){const n=document.createElement("div");n.innerHTML=t.customBodyEndHtml,Array.from(n.children).forEach(l=>{document.body.appendChild(l.cloneNode(!0))})}}catch(t){console.error("Failed to load site settings for SEO injection:",t)}})(),()=>{a=!1}},[]),null}function O_(a){if(document.querySelector(`script[src*="googletagmanager.com/gtag/js?id=${a}"]`))return;const o=document.createElement("script");o.async=!0,o.src=`https://www.googletagmanager.com/gtag/js?id=${a}`,document.head.appendChild(o);const t=document.createElement("script");t.innerHTML=`
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '${a}');
  `,document.head.appendChild(t)}function F_(a){if(document.querySelector(`script[src*="googletagmanager.com/gtm.js?id=${a}"]`))return;const o=document.createElement("script");o.innerHTML=`
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','${a}');
  `,document.head.appendChild(o);const t=document.createElement("noscript");t.innerHTML=`<iframe src="https://www.googletagmanager.com/ns.html?id=${a}" height="0" width="0" style="display:none;visibility:hidden"></iframe>`,document.body.insertBefore(t,document.body.firstChild)}function B_(a){if(document.querySelector('script[src*="pintrk"]'))return;const o=document.createElement("script");o.innerHTML=`
    !function(e){if(!window.pintrk){window.pintrk = function () {
    window.pintrk.queue.push(Array.prototype.slice.call(arguments))};var
      n=window.pintrk;n.queue=[],n.version="3.0";var
      t=document.createElement("script");t.async=!0,t.src=e;var
      r=document.getElementsByTagName("script")[0];
      r.parentNode.insertBefore(t,r)}}("https://s.pinimg.com/ct/core.js");
    pintrk('load', '${a}');
    pintrk('page');
  `,document.head.appendChild(o)}function U_(a){if(document.querySelector('script[src*="connect.facebook.net"]'))return;const o=document.createElement("script");o.innerHTML=`
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '${a}');
    fbq('track', 'PageView');
  `,document.head.appendChild(o);const t=document.createElement("noscript");t.innerHTML=`<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=${a}&ev=PageView&noscript=1"/>`,document.body.appendChild(t)}function V_(a){if(document.querySelector('script[src*="snap.licdn.com"]'))return;const o=document.createElement("script");o.innerHTML=`
    _linkedin_partner_id = "${a}";
    window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
    window._linkedin_data_partner_ids.push(_linkedin_partner_id);
  `,document.head.appendChild(o);const t=document.createElement("script");t.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",t.async=!0,document.head.appendChild(t);const f=document.createElement("noscript");f.innerHTML=`<img height="1" width="1" style="display:none;" alt="" src="https://px.ads.linkedin.com/collect/?pid=${a}&fmt=gif" />`,document.body.appendChild(f)}function wu(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zf={exports:{}};var ob;function q_(){return ob||(ob=1,(function(a,o){(function(t){a.exports=t()})((function(){return(function t(f,h,d){function n(r,s){if(!h[r]){if(!f[r]){var c=typeof wu=="function"&&wu;if(!s&&c)return c(r,!0);if(l)return l(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var m=h[r]={exports:{}};f[r][0].call(m.exports,(function(x){return n(f[r][1][x]||x)}),m,m.exports,t,f,h,d)}return h[r].exports}for(var l=typeof wu=="function"&&wu,i=0;i<d.length;i++)n(d[i]);return n})({1:[function(t,f,h){const d=t("fs"),n=t("fast-csv"),l=t("dayjs/plugin/customParseFormat"),i=t("dayjs/plugin/utc"),r=t("dayjs").extend(l).extend(i),s=t("../utils/stream-buf"),{fs:{exists:c}}=t("../utils/utils"),u={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};f.exports=class{constructor(m){this.workbook=m,this.worksheet=null}async readFile(m,x){if(x=x||{},!await c(m))throw new Error("File not found: "+m);const b=d.createReadStream(m),p=await this.read(b,x);return b.close(),p}read(m,x){return x=x||{},new Promise((b,p)=>{const v=this.workbook.addWorksheet(x.sheetName),y=x.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],N=x.map||function(_){if(_==="")return null;const O=Number(_);if(!Number.isNaN(O)&&O!==1/0)return O;const H=y.reduce((V,q)=>{if(V)return V;const W=r(_,q,!0);return W.isValid()?W:null},null);if(H)return new Date(H.valueOf());const F=u[_];return F!==void 0?F:_},T=n.parse(x.parserOptions).on("data",_=>{v.addRow(_.map(N))}).on("end",()=>{T.emit("worksheet",v)});T.on("worksheet",b).on("error",p),m.pipe(T)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(m,x){return new Promise((b,p)=>{x=x||{};const v=this.workbook.getWorksheet(x.sheetName||x.sheetId),y=n.format(x.formatterOptions);m.on("finish",()=>{b()}),y.on("error",p),y.pipe(m);const{dateFormat:N,dateUTC:T}=x,_=x.map||(F=>{if(F){if(F.text||F.hyperlink)return F.hyperlink||F.text||"";if(F.formula||F.result)return F.result||"";if(F instanceof Date)return N?T?r.utc(F).format(N):r(F).format(N):T?r.utc(F).format():r(F).format();if(F.error)return F.error;if(typeof F=="object")return JSON.stringify(F)}return F}),O=x.includeEmptyRows===void 0||x.includeEmptyRows;let H=1;v&&v.eachRow((F,V)=>{if(O)for(;H++<V-1;)y.write([]);const{values:q}=F;q.shift(),y.write(q.map(_)),H=V}),y.end()})}writeFile(m,x){const b={encoding:(x=x||{}).encoding||"utf8"},p=d.createWriteStream(m,b);return this.write(p,x)}async writeBuffer(m){const x=new s;return await this.write(x,m),x.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(t,f,h){const d=t("../utils/col-cache");class n{constructor(i,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=i,r)if(typeof r=="string"){const c=d.decodeAddress(r);this.nativeCol=c.col+s,this.nativeColOff=0,this.nativeRow=c.row+s,this.nativeRowOff=0}else r.nativeCol!==void 0?(this.nativeCol=r.nativeCol||0,this.nativeColOff=r.nativeColOff||0,this.nativeRow=r.nativeRow||0,this.nativeRowOff=r.nativeRowOff||0):r.col!==void 0?(this.col=r.col+s,this.row=r.row+s):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(i){return i instanceof n||i==null?i:new n(i)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(i){this.nativeCol=Math.floor(i),this.nativeColOff=Math.floor((i-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(i){this.nativeRow=Math.floor(i),this.nativeRowOff=Math.floor((i-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(i){this.nativeCol=i.nativeCol,this.nativeColOff=i.nativeColOff,this.nativeRow=i.nativeRow,this.nativeRowOff=i.nativeRowOff}}f.exports=n},{"../utils/col-cache":19}],3:[function(t,f,h){const d=t("../utils/col-cache"),n=t("../utils/under-dash"),l=t("./enums"),{slideFormula:i}=t("../utils/shared-formula"),r=t("./note");class s{constructor(m,x,b){if(!m||!x)throw new Error("A Cell needs a Row");this._row=m,this._column=x,d.validateAddress(b),this._address=b,this._value=c.create(s.Types.Null,this),this.style=this._mergeStyle(m.style,x.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(m){this.style.numFmt=m}get font(){return this.style.font}set font(m){this.style.font=m}get alignment(){return this.style.alignment}set alignment(m){this.style.alignment=m}get border(){return this.style.border}set border(m){this.style.border=m}get fill(){return this.style.fill}set fill(m){this.style.fill=m}get protection(){return this.style.protection}set protection(m){this.style.protection=m}_mergeStyle(m,x,b){const p=m&&m.numFmt||x&&x.numFmt;p&&(b.numFmt=p);const v=m&&m.font||x&&x.font;v&&(b.font=v);const y=m&&m.alignment||x&&x.alignment;y&&(b.alignment=y);const N=m&&m.border||x&&x.border;N&&(b.border=N);const T=m&&m.fill||x&&x.fill;T&&(b.fill=T);const _=m&&m.protection||x&&x.protection;return _&&(b.protection=_),b}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===s.Types.Merge}merge(m,x){this._value.release(),this._value=c.create(s.Types.Merge,this,m),x||(this.style=m.style)}unmerge(){this.type===s.Types.Merge&&(this._value.release(),this._value=c.create(s.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(m){return this._value.type===s.Types.Merge&&this._value.isMergedTo(m)}get master(){return this.type===s.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===s.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(m){this.type!==s.Types.Merge?(this._value.release(),this._value=c.create(c.getType(m),this,m)):this._value.master.value=m}get note(){return this._comment&&this._comment.note}set note(m){this._comment=new r(m)}get text(){return this._value.toString()}get html(){return n.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(m){this.type===s.Types.String&&(this._value=c.create(s.Types.Hyperlink,this,{text:this._value.value,hyperlink:m}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:m}=this._row;return{sheetName:m.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(m){this.names=[m]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(m){const{definedNames:x}=this.workbook;x.removeAllNames(this.fullAddress),m.forEach(b=>{x.addEx(this.fullAddress,b)})}addName(m){this.workbook.definedNames.addEx(this.fullAddress,m)}removeName(m){this.workbook.definedNames.removeEx(this.fullAddress,m)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(m){this._dataValidations.add(this.address,m)}get model(){const{model:m}=this._value;return m.style=this.style,this._comment&&(m.comment=this._comment.model),m}set model(m){if(this._value.release(),this._value=c.create(m.type,this),this._value.model=m,m.comment)switch(m.comment.type){case"note":this._comment=r.fromModel(m.comment)}m.style?this.style=m.style:this.style={}}}s.Types=l.ValueType;const c={getType:u=>u==null?s.Types.Null:u instanceof String||typeof u=="string"?s.Types.String:typeof u=="number"?s.Types.Number:typeof u=="boolean"?s.Types.Boolean:u instanceof Date?s.Types.Date:u.text&&u.hyperlink?s.Types.Hyperlink:u.formula||u.sharedFormula?s.Types.Formula:u.richText?s.Types.RichText:u.sharedString?s.Types.SharedString:u.error?s.Types.Error:s.Types.JSON,types:[{t:s.Types.Null,f:class{constructor(u){this.model={address:u.address,type:s.Types.Null}}get value(){return null}set value(u){}get type(){return s.Types.Null}get effectiveType(){return s.Types.Null}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return""}release(){}toString(){return""}}},{t:s.Types.Number,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.Number,value:m}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return s.Types.Number}get effectiveType(){return s.Types.Number}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:s.Types.String,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.String,value:m}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return s.Types.String}get effectiveType(){return s.Types.String}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:s.Types.Date,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.Date,value:m}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return s.Types.Date}get effectiveType(){return s.Types.Date}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:s.Types.Hyperlink,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.Hyperlink,text:m?m.text:void 0,hyperlink:m?m.hyperlink:void 0},m&&m.tooltip&&(this.model.tooltip=m.tooltip)}get value(){const u={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(u.tooltip=this.model.tooltip),u}set value(u){this.model={text:u.text,hyperlink:u.hyperlink},u.tooltip&&(this.model.tooltip=u.tooltip)}get text(){return this.model.text}set text(u){this.model.text=u}get hyperlink(){return this.model.hyperlink}set hyperlink(u){this.model.hyperlink=u}get type(){return s.Types.Hyperlink}get effectiveType(){return s.Types.Hyperlink}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:s.Types.Formula,f:class{constructor(u,m){this.cell=u,this.model={address:u.address,type:s.Types.Formula,shareType:m?m.shareType:void 0,ref:m?m.ref:void 0,formula:m?m.formula:void 0,sharedFormula:m?m.sharedFormula:void 0,result:m?m.result:void 0}}_copyModel(u){const m={},x=b=>{const p=u[b];p&&(m[b]=p)};return x("formula"),x("result"),x("ref"),x("shareType"),x("sharedFormula"),m}get value(){return this._copyModel(this.model)}set value(u){this.model=this._copyModel(u)}validate(u){switch(c.getType(u)){case s.Types.Null:case s.Types.String:case s.Types.Number:case s.Types.Date:break;case s.Types.Hyperlink:case s.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(u){this.model.formula=u}get formulaType(){return this.model.formula?l.FormulaType.Master:this.model.sharedFormula?l.FormulaType.Shared:l.FormulaType.None}get result(){return this.model.result}set result(u){this.model.result=u}get type(){return s.Types.Formula}get effectiveType(){const u=this.model.result;return u==null?l.ValueType.Null:u instanceof String||typeof u=="string"?l.ValueType.String:typeof u=="number"?l.ValueType.Number:u instanceof Date?l.ValueType.Date:u.text&&u.hyperlink?l.ValueType.Hyperlink:u.formula?l.ValueType.Formula:l.ValueType.Null}get address(){return this.model.address}set address(u){this.model.address=u}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:u}=this.cell,m=u.findCell(this.model.sharedFormula);this._translatedFormula=m&&i(m.formula,m.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:s.Types.Merge,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.Merge,master:m?m.address:void 0},this._master=m,m&&m.addMergeRef()}get value(){return this._master.value}set value(u){u instanceof s?(this._master&&this._master.releaseMergeRef(),u.addMergeRef(),this._master=u):this._master.value=u}isMergedTo(u){return u===this._master}get master(){return this._master}get type(){return s.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:s.Types.JSON,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.String,value:JSON.stringify(m),rawValue:m}}get value(){return this.model.rawValue}set value(u){this.model.rawValue=u,this.model.value=JSON.stringify(u)}get type(){return s.Types.String}get effectiveType(){return s.Types.String}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:s.Types.SharedString,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.SharedString,value:m}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return s.Types.SharedString}get effectiveType(){return s.Types.SharedString}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:s.Types.RichText,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.String,value:m}}get value(){return this.model.value}set value(u){this.model.value=u}toString(){return this.model.value.richText.map(u=>u.text).join("")}get type(){return s.Types.RichText}get effectiveType(){return s.Types.RichText}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:s.Types.Boolean,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.Boolean,value:m}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return s.Types.Boolean}get effectiveType(){return s.Types.Boolean}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:s.Types.Error,f:class{constructor(u,m){this.model={address:u.address,type:s.Types.Error,value:m}}get value(){return this.model.value}set value(u){this.model.value=u}get type(){return s.Types.Error}get effectiveType(){return s.Types.Error}get address(){return this.model.address}set address(u){this.model.address=u}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((u,m)=>(u[m.t]=m.f,u),[]),create(u,m,x){const b=this.types[u];if(!b)throw new Error("Could not create Value of type "+u);return new b(m,x)}};f.exports=s},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(t,f,h){const d=t("../utils/under-dash"),n=t("./enums"),l=t("../utils/col-cache");class i{constructor(s,c,u){this._worksheet=s,this._number=c,u!==!1&&(this.defn=u)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return l.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(s){s?(this.key=s.key,this.width=s.width!==void 0?s.width:9,this.outlineLevel=s.outlineLevel,s.style?this.style=s.style:this.style={},this.header=s.header,this._hidden=!!s.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(s){s!==void 0?(this._header=s,this.headers.forEach((c,u)=>{this._worksheet.getCell(u+1,this.number).value=c})):this._header=void 0}get key(){return this._key}set key(s){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=s,s&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(s){this._hidden=s}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(s){this._outlineLevel=s}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(s){return this.width===s.width&&this.hidden===s.hidden&&this.outlineLevel===s.outlineLevel&&d.isEqual(this.style,s.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const s=this.style;return!s||!(s.font||s.numFmt||s.alignment||s.border||s.fill||s.protection)}get headerCount(){return this.headers.length}eachCell(s,c){const u=this.number;c||(c=s,s=null),this._worksheet.eachRow(s,(m,x)=>{c(m.getCell(u),x)})}get values(){const s=[];return this.eachCell((c,u)=>{c&&c.type!==n.ValueType.Null&&(s[u]=c.value)}),s}set values(s){if(!s)return;const c=this.number;let u=0;s.hasOwnProperty("0")&&(u=1),s.forEach((m,x)=>{this._worksheet.getCell(x+u,c).value=m})}_applyStyle(s,c){return this.style[s]=c,this.eachCell(u=>{u[s]=c}),c}get numFmt(){return this.style.numFmt}set numFmt(s){this._applyStyle("numFmt",s)}get font(){return this.style.font}set font(s){this._applyStyle("font",s)}get alignment(){return this.style.alignment}set alignment(s){this._applyStyle("alignment",s)}get protection(){return this.style.protection}set protection(s){this._applyStyle("protection",s)}get border(){return this.style.border}set border(s){this._applyStyle("border",s)}get fill(){return this.style.fill}set fill(s){this._applyStyle("fill",s)}static toModel(s){const c=[];let u=null;return s&&s.forEach((m,x)=>{m.isDefault?u&&(u=null):u&&m.equivalentTo(u)?u.max=x+1:(u={min:x+1,max:x+1,width:m.width!==void 0?m.width:9,style:m.style,isCustomWidth:m.isCustomWidth,hidden:m.hidden,outlineLevel:m.outlineLevel,collapsed:m.collapsed},c.push(u))}),c.length?c:void 0}static fromModel(s,c){const u=[];let m=1,x=0;for(c=(c=c||[]).sort((function(b,p){return b.min-p.min}));x<c.length;){const b=c[x++];for(;m<b.min;)u.push(new i(s,m++));for(;m<=b.max;)u.push(new i(s,m++,b))}return u.length?u:null}}f.exports=i},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(t,f,h){f.exports=class{constructor(d){this.model=d||{}}add(d,n){return this.model[d]=n}find(d){return this.model[d]}remove(d){this.model[d]=void 0}}},{}],6:[function(t,f,h){const d=t("../utils/under-dash"),n=t("../utils/col-cache"),l=t("../utils/cell-matrix"),i=t("./range"),r=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;f.exports=class{constructor(){this.matrixMap={}}getMatrix(s){return this.matrixMap[s]||(this.matrixMap[s]=new l)}add(s,c){const u=n.decodeEx(s);this.addEx(u,c)}addEx(s,c){const u=this.getMatrix(c);if(s.top)for(let m=s.left;m<=s.right;m++)for(let x=s.top;x<=s.bottom;x++){const b={sheetName:s.sheetName,address:n.n2l(m)+x,row:x,col:m};u.addCellEx(b)}else u.addCellEx(s)}remove(s,c){const u=n.decodeEx(s);this.removeEx(u,c)}removeEx(s,c){this.getMatrix(c).removeCellEx(s)}removeAllNames(s){d.each(this.matrixMap,c=>{c.removeCellEx(s)})}forEach(s){d.each(this.matrixMap,(c,u)=>{c.forEach(m=>{s(u,m)})})}getNames(s){return this.getNamesEx(n.decodeEx(s))}getNamesEx(s){return d.map(this.matrixMap,(c,u)=>c.findCellEx(s)&&u).filter(Boolean)}_explore(s,c){c.mark=!1;const{sheetName:u}=c,m=new i(c.row,c.col,c.row,c.col,u);let x,b;function p(y,N){const T=s.findCellAt(u,y,c.col);return!(!T||!T.mark)&&(m[N]=y,T.mark=!1,!0)}for(b=c.row-1;p(b,"top");b--);for(b=c.row+1;p(b,"bottom");b++);function v(y,N){const T=[];for(b=m.top;b<=m.bottom;b++){const _=s.findCellAt(u,b,y);if(!_||!_.mark)return!1;T.push(_)}m[N]=y;for(let _=0;_<T.length;_++)T[_].mark=!1;return!0}for(x=c.col-1;v(x,"left");x--);for(x=c.col+1;v(x,"right");x++);return m}getRanges(s,c){return(c=c||this.matrixMap[s])?(c.forEach(u=>{u.mark=!0}),{name:s,ranges:c.map(u=>u.mark&&this._explore(c,u)).filter(Boolean).map(u=>u.$shortRange)}):{name:s,ranges:[]}}normaliseMatrix(s,c){s.forEachInSheet(c,(u,m,x)=>{u&&(u.row===m&&u.col===x||(u.row=m,u.col=x,u.address=n.n2l(x)+m))})}spliceRows(s,c,u,m){d.each(this.matrixMap,x=>{x.spliceRows(s,c,u,m),this.normaliseMatrix(x,s)})}spliceColumns(s,c,u,m){d.each(this.matrixMap,x=>{x.spliceColumns(s,c,u,m),this.normaliseMatrix(x,s)})}get model(){return d.map(this.matrixMap,(s,c)=>this.getRanges(c,s)).filter(s=>s.ranges.length)}set model(s){const c=this.matrixMap={};s.forEach(u=>{const m=c[u.name]=new l;u.ranges.forEach(x=>{r.test(x.split("!").pop()||"")&&m.addCell(x)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(t,f,h){f.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(t,f,h){const d=t("../utils/col-cache"),n=t("./anchor");f.exports=class{constructor(l,i){this.worksheet=l,this.model=i}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(l){let{type:i,imageId:r,range:s,hyperlinks:c}=l;if(this.type=i,this.imageId=r,i==="image")if(typeof s=="string"){const u=d.decode(s);this.range={tl:new n(this.worksheet,{col:u.left,row:u.top},-1),br:new n(this.worksheet,{col:u.right,row:u.bottom},0),editAs:"oneCell"}}else this.range={tl:new n(this.worksheet,s.tl,0),br:s.br&&new n(this.worksheet,s.br,0),ext:s.ext,editAs:s.editAs,hyperlinks:c||s.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(t,f,h){const d=t("../utils/under-dash");class n{constructor(i){this.note=i}get model(){let i=null;switch(typeof this.note){case"string":i={type:"note",note:{texts:[{text:this.note}]}};break;default:i={type:"note",note:this.note}}return d.deepMerge({},n.DEFAULT_CONFIGS,i)}set model(i){const{note:r}=i,{texts:s}=r;s.length===1&&Object.keys(s[0]).length===1?this.note=s[0].text:this.note=r}static fromModel(i){const r=new n;return r.model=i,r}}n.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},f.exports=n},{"../utils/under-dash":26}],10:[function(t,f,h){const d=t("../utils/col-cache");class n{constructor(){this.decode(arguments)}setTLBR(i,r,s,c,u){if(arguments.length<4){const m=d.decodeAddress(i),x=d.decodeAddress(r);this.model={top:Math.min(m.row,x.row),left:Math.min(m.col,x.col),bottom:Math.max(m.row,x.row),right:Math.max(m.col,x.col),sheetName:s},this.setTLBR(m.row,m.col,x.row,x.col,u)}else this.model={top:Math.min(i,s),left:Math.min(r,c),bottom:Math.max(i,s),right:Math.max(r,c),sheetName:u}}decode(i){switch(i.length){case 5:this.setTLBR(i[0],i[1],i[2],i[3],i[4]);break;case 4:this.setTLBR(i[0],i[1],i[2],i[3]);break;case 3:this.setTLBR(i[0],i[1],i[2]);break;case 2:this.setTLBR(i[0],i[1]);break;case 1:{const r=i[0];if(r instanceof n)this.model={top:r.model.top,left:r.model.left,bottom:r.model.bottom,right:r.model.right,sheetName:r.sheetName};else if(r instanceof Array)this.decode(r);else if(r.top&&r.left&&r.bottom&&r.right)this.model={top:r.top,left:r.left,bottom:r.bottom,right:r.right,sheetName:r.sheetName};else{const s=d.decodeEx(r);s.top?this.model={top:s.top,left:s.left,bottom:s.bottom,right:s.right,sheetName:s.sheetName}:this.model={top:s.row,left:s.col,bottom:s.row,right:s.col,sheetName:s.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+i.length)}}get top(){return this.model.top||1}set top(i){this.model.top=i}get left(){return this.model.left||1}set left(i){this.model.left=i}get bottom(){return this.model.bottom||1}set bottom(i){this.model.bottom=i}get right(){return this.model.right||1}set right(i){this.model.right=i}get sheetName(){return this.model.sheetName}set sheetName(i){this.model.sheetName=i}get _serialisedSheetName(){const{sheetName:i}=this.model;return i?/^[a-zA-Z0-9]*$/.test(i)?i+"!":`'${i}'!`:""}expand(i,r,s,c){(!this.model.top||i<this.top)&&(this.top=i),(!this.model.left||r<this.left)&&(this.left=r),(!this.model.bottom||s>this.bottom)&&(this.bottom=s),(!this.model.right||c>this.right)&&(this.right=c)}expandRow(i){if(i){const{dimensions:r,number:s}=i;r&&this.expand(s,r.min,s,r.max)}}expandToAddress(i){const r=d.decodeEx(i);this.expand(r.row,r.col,r.row,r.col)}get tl(){return d.n2l(this.left)+this.top}get $t$l(){return`$${d.n2l(this.left)}$${this.top}`}get br(){return d.n2l(this.right)+this.bottom}get $b$r(){return`$${d.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(i){return(!i.sheetName||!this.sheetName||i.sheetName===this.sheetName)&&!(i.bottom<this.top)&&!(i.top>this.bottom)&&!(i.right<this.left)&&!(i.left>this.right)}contains(i){const r=d.decodeEx(i);return this.containsEx(r)}containsEx(i){return(!i.sheetName||!this.sheetName||i.sheetName===this.sheetName)&&i.row>=this.top&&i.row<=this.bottom&&i.col>=this.left&&i.col<=this.right}forEachAddress(i){for(let r=this.left;r<=this.right;r++)for(let s=this.top;s<=this.bottom;s++)i(d.encodeAddress(s,r),s,r)}}f.exports=n},{"../utils/col-cache":19}],11:[function(t,f,h){const d=t("../utils/under-dash"),n=t("./enums"),l=t("../utils/col-cache"),i=t("./cell");f.exports=class{constructor(r,s){this._worksheet=r,this._number=s,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(r){return this._cells[r-1]}getCellEx(r){let s=this._cells[r.col-1];if(!s){const c=this._worksheet.getColumn(r.col);s=new i(this,c,r.address),this._cells[r.col-1]=s}return s}getCell(r){if(typeof r=="string"){const s=this._worksheet.getColumnKey(r);r=s?s.number:l.l2n(r)}return this._cells[r-1]||this.getCellEx({address:l.encodeAddress(this._number,r),row:this._number,col:r})}splice(r,s){const c=r+s;for(var u=arguments.length,m=new Array(u>2?u-2:0),x=2;x<u;x++)m[x-2]=arguments[x];const b=m.length-s,p=this._cells.length;let v,y,N;if(b<0)for(v=r+m.length;v<=p;v++)N=this._cells[v-1],y=this._cells[v-b-1],y?(N=this.getCell(v),N.value=y.value,N.style=y.style,N._comment=y._comment):N&&(N.value=null,N.style={},N._comment=void 0);else if(b>0)for(v=p;v>=c;v--)y=this._cells[v-1],y?(N=this.getCell(v+b),N.value=y.value,N.style=y.style,N._comment=y._comment):this._cells[v+b-1]=void 0;for(v=0;v<m.length;v++)N=this.getCell(r+v),N.value=m[v],N.style={},N._comment=void 0}eachCell(r,s){if(s||(s=r,r=null),r&&r.includeEmpty){const c=this._cells.length;for(let u=1;u<=c;u++)s(this.getCell(u),u)}else this._cells.forEach((c,u)=>{c&&c.type!==n.ValueType.Null&&s(c,u+1)})}addPageBreak(r,s){const c=this._worksheet,u=Math.max(0,r-1)||0,m=Math.max(0,s-1)||16838,x={id:this._number,max:m,man:1};u&&(x.min=u),c.rowBreaks.push(x)}get values(){const r=[];return this._cells.forEach(s=>{s&&s.type!==n.ValueType.Null&&(r[s.col]=s.value)}),r}set values(r){if(this._cells=[],r)if(r instanceof Array){let s=0;r.hasOwnProperty("0")&&(s=1),r.forEach((c,u)=>{c!==void 0&&(this.getCellEx({address:l.encodeAddress(this._number,u+s),row:this._number,col:u+s}).value=c)})}else this._worksheet.eachColumnKey((s,c)=>{r[c]!==void 0&&(this.getCellEx({address:l.encodeAddress(this._number,s.number),row:this._number,col:s.number}).value=r[c])})}get hasValues(){return d.some(this._cells,r=>r&&r.type!==n.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let r=0;return this.eachCell(()=>{r++}),r}get dimensions(){let r=0,s=0;return this._cells.forEach(c=>{c&&c.type!==n.ValueType.Null&&((!r||r>c.col)&&(r=c.col),s<c.col&&(s=c.col))}),r>0?{min:r,max:s}:null}_applyStyle(r,s){return this.style[r]=s,this._cells.forEach(c=>{c&&(c[r]=s)}),s}get numFmt(){return this.style.numFmt}set numFmt(r){this._applyStyle("numFmt",r)}get font(){return this.style.font}set font(r){this._applyStyle("font",r)}get alignment(){return this.style.alignment}set alignment(r){this._applyStyle("alignment",r)}get protection(){return this.style.protection}set protection(r){this._applyStyle("protection",r)}get border(){return this.style.border}set border(r){this._applyStyle("border",r)}get fill(){return this.style.fill}set fill(r){this._applyStyle("fill",r)}get hidden(){return!!this._hidden}set hidden(r){this._hidden=r}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(r){this._outlineLevel=r}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const r=[];let s=0,c=0;return this._cells.forEach(u=>{if(u){const m=u.model;m&&((!s||s>u.col)&&(s=u.col),c<u.col&&(c=u.col),r.push(m))}}),this.height||r.length?{cells:r,number:this.number,min:s,max:c,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(r){if(r.number!==this._number)throw new Error("Invalid row number in model");let s;this._cells=[],r.cells.forEach(c=>{switch(c.type){case i.Types.Merge:break;default:{let u;if(c.address)u=l.decodeAddress(c.address);else if(s){const{row:m}=s,x=s.col+1;u={row:m,col:x,address:l.encodeAddress(m,x),$col$row:`$${l.n2l(x)}$${m}`}}s=u,this.getCellEx(u).model=c;break}}}),r.height?this.height=r.height:delete this.height,this.hidden=r.hidden,this.outlineLevel=r.outlineLevel||0,this.style=r.style&&JSON.parse(JSON.stringify(r.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(t,f,h){const d=t("../utils/col-cache");class n{constructor(i,r,s){this.table=i,this.column=r,this.index=s}_set(i,r){this.table.cacheState(),this.column[i]=r}get name(){return this.column.name}set name(i){this._set("name",i)}get filterButton(){return this.column.filterButton}set filterButton(i){this.column.filterButton=i}get style(){return this.column.style}set style(i){this.column.style=i}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(i){this._set("totalsRowLabel",i)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(i){this._set("totalsRowFunction",i)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(i){this._set("totalsRowResult",i)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(i){this._set("totalsRowFormula",i)}}f.exports=class{constructor(l,i){this.worksheet=l,i&&(this.table=i,this.validate(),this.store())}getFormula(l){switch(l.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${l.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${l.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${l.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${l.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${l.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${l.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${l.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${l.name}])`;case"custom":return l.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+l.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:l}=this,i=(b,p,v)=>{b[p]===void 0&&(b[p]=v)};i(l,"headerRow",!0),i(l,"totalsRow",!1),i(l,"style",{}),i(l.style,"theme","TableStyleMedium2"),i(l.style,"showFirstColumn",!1),i(l.style,"showLastColumn",!1),i(l.style,"showRowStripes",!1),i(l.style,"showColumnStripes",!1);const r=(b,p)=>{if(!b)throw new Error(p)};r(l.ref,"Table must have ref"),r(l.columns,"Table must have column definitions"),r(l.rows,"Table must have row definitions"),l.tl=d.decodeAddress(l.ref);const{row:s,col:c}=l.tl;r(s>0,"Table must be on valid row"),r(c>0,"Table must be on valid col");const{width:u,filterHeight:m,tableHeight:x}=this;l.autoFilterRef=d.encode(s,c,s+m-1,c+u-1),l.tableRef=d.encode(s,c,s+x-1,c+u-1),l.columns.forEach((b,p)=>{r(b.name,`Column ${p} must have a name`),p===0?i(b,"totalsRowLabel","Total"):(i(b,"totalsRowFunction","none"),b.totalsRowFormula=this.getFormula(b))})}store(){const l=(m,x)=>{x&&Object.keys(x).forEach(b=>{m[b]=x[b]})},{worksheet:i,table:r}=this,{row:s,col:c}=r.tl;let u=0;if(r.headerRow){const m=i.getRow(s+u++);r.columns.forEach((x,b)=>{const{style:p,name:v}=x,y=m.getCell(c+b);y.value=v,l(y,p)})}if(r.rows.forEach(m=>{const x=i.getRow(s+u++);m.forEach((b,p)=>{const v=x.getCell(c+p);v.value=b,l(v,r.columns[p].style)})}),r.totalsRow){const m=i.getRow(s+u++);r.columns.forEach((x,b)=>{const p=m.getCell(c+b);if(b===0)p.value=x.totalsRowLabel;else{const v=this.getFormula(x);p.value=v?{formula:x.totalsRowFormula,result:x.totalsRowResult}:null}l(p,x.style)})}}load(l){const{table:i}=this,{row:r,col:s}=i.tl;let c=0;if(i.headerRow){const u=l.getRow(r+c++);i.columns.forEach((m,x)=>{u.getCell(s+x).value=m.name})}if(i.rows.forEach(u=>{const m=l.getRow(r+c++);u.forEach((x,b)=>{m.getCell(s+b).value=x})}),i.totalsRow){const u=l.getRow(r+c++);i.columns.forEach((m,x)=>{const b=u.getCell(s+x);x===0?b.value=m.totalsRowLabel:this.getFormula(m)&&(b.value={formula:m.totalsRowFormula,result:m.totalsRowResult})})}}get model(){return this.table}set model(l){this.table=l}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const l=d.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let i=0;i<this._cache.tableHeight;i++){const r=this.worksheet.getRow(l.row+i);for(let s=0;s<this._cache.width;s++)r.getCell(l.col+s).value=null}else{for(let i=this.tableHeight;i<this._cache.tableHeight;i++){const r=this.worksheet.getRow(l.row+i);for(let s=0;s<this._cache.width;s++)r.getCell(l.col+s).value=null}for(let i=0;i<this.tableHeight;i++){const r=this.worksheet.getRow(l.row+i);for(let s=this.width;s<this._cache.width;s++)r.getCell(l.col+s).value=null}}this.store()}addRow(l,i){this.cacheState(),i===void 0?this.table.rows.push(l):this.table.rows.splice(i,0,l)}removeRows(l){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(l,i)}getColumn(l){const i=this.table.columns[l];return new n(this,i,l)}addColumn(l,i,r){this.cacheState(),r===void 0?(this.table.columns.push(l),this.table.rows.forEach((s,c)=>{s.push(i[c])})):(this.table.columns.splice(r,0,l),this.table.rows.forEach((s,c)=>{s.splice(r,0,i[c])}))}removeColumns(l){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(l,i),this.table.rows.forEach(r=>{r.splice(l,i)})}_assign(l,i,r){this.cacheState(),l[i]=r}get ref(){return this.table.ref}set ref(l){this._assign(this.table,"ref",l)}get name(){return this.table.name}set name(l){this.table.name=l}get displayName(){return this.table.displyName||this.table.name}set displayNamename(l){this.table.displayName=l}get headerRow(){return this.table.headerRow}set headerRow(l){this._assign(this.table,"headerRow",l)}get totalsRow(){return this.table.totalsRow}set totalsRow(l){this._assign(this.table,"totalsRow",l)}get theme(){return this.table.style.name}set theme(l){this.table.style.name=l}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(l){this.table.style.showFirstColumn=l}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(l){this.table.style.showLastColumn=l}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(l){this.table.style.showRowStripes=l}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(l){this.table.style.showColumnStripes=l}}},{"../utils/col-cache":19}],13:[function(t,f,h){const d=t("./worksheet"),n=t("./defined-names"),l=t("../xlsx/xlsx"),i=t("../csv/csv");f.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new n}get xlsx(){return this._xlsx||(this._xlsx=new l(this)),this._xlsx}get csv(){return this._csv||(this._csv=new i(this)),this._csv}get nextId(){for(let r=1;r<this._worksheets.length;r++)if(!this._worksheets[r])return r;return this._worksheets.length||1}addWorksheet(r,s){const c=this.nextId;s&&(typeof s=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),s={properties:{tabColor:{argb:s}}}):(s.argb||s.theme||s.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),s={properties:{tabColor:s}}));const u=this._worksheets.reduce((b,p)=>(p&&p.orderNo)>b?p.orderNo:b,0),m=Object.assign({},s,{id:c,name:r,orderNo:u+1,workbook:this}),x=new d(m);return this._worksheets[c]=x,x}removeWorksheetEx(r){delete this._worksheets[r.id]}removeWorksheet(r){const s=this.getWorksheet(r);s&&s.destroy()}getWorksheet(r){return r===void 0?this._worksheets.find(Boolean):typeof r=="number"?this._worksheets[r]:typeof r=="string"?this._worksheets.find(s=>s&&s.name===r):void 0}get worksheets(){return this._worksheets.slice(1).sort((r,s)=>r.orderNo-s.orderNo).filter(Boolean)}eachSheet(r){this.worksheets.forEach(s=>{r(s,s.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(r){const s=this.media.length;return this.media.push(Object.assign({},r,{type:"image"})),s}getImage(r){return this.media[r]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(r=>r.model),sheets:this.worksheets.map(r=>r.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(r){this.creator=r.creator,this.lastModifiedBy=r.lastModifiedBy,this.lastPrinted=r.lastPrinted,this.created=r.created,this.modified=r.modified,this.company=r.company,this.manager=r.manager,this.title=r.title,this.subject=r.subject,this.keywords=r.keywords,this.category=r.category,this.description=r.description,this.language=r.language,this.revision=r.revision,this.contentStatus=r.contentStatus,this.properties=r.properties,this.calcProperties=r.calcProperties,this._worksheets=[],r.worksheets.forEach(s=>{const{id:c,name:u,state:m}=s,x=r.sheets&&r.sheets.findIndex(b=>b.id===c);(this._worksheets[c]=new d({id:c,name:u,orderNo:x,state:m,workbook:this})).model=s}),this._definedNames.model=r.definedNames,this.views=r.views,this._themes=r.themes,this.media=r.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(t,f,h){const d=t("../utils/under-dash"),n=t("../utils/col-cache"),l=t("./range"),i=t("./row"),r=t("./column"),s=t("./enums"),c=t("./image"),u=t("./table"),m=t("./data-validations"),x=t("../utils/encryptor"),{copyStyle:b}=t("../utils/copy-style");f.exports=class{constructor(p){p=p||{},this._workbook=p.workbook,this.id=p.id,this.orderNo=p.orderNo,this.name=p.name,this.state=p.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},p.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!p.pageSetup||!p.pageSetup.fitToWidth&&!p.pageSetup.fitToHeight||p.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},p.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},p.headerFooter),this.dataValidations=new m,this.views=p.views||[],this.autoFilter=p.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(p){if(p===void 0&&(p="sheet"+this.id),this._name!==p){if(typeof p!="string")throw new Error("The name has to be a string.");if(p==="")throw new Error("The name can't be empty.");if(p==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(p))throw new Error(`Worksheet name ${p} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(p))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+p);if(p&&p.length>31&&(console.warn(`Worksheet name ${p} exceeds 31 chars. This will be truncated`),p=p.substring(0,31)),this._workbook._worksheets.find(v=>v&&v.name.toLowerCase()===p.toLowerCase()))throw new Error("Worksheet name already exists: "+p);this._name=p}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const p=new l;return this._rows.forEach(v=>{if(v){const y=v.dimensions;y&&p.expand(v.number,y.min,v.number,y.max)}}),p}get columns(){return this._columns}set columns(p){this._headerRowCount=p.reduce((N,T)=>{const _=(T.header?1:T.headers&&T.headers.length)||0;return Math.max(N,_)},0);let v=1;const y=this._columns=[];p.forEach(N=>{const T=new r(this,v++,!1);y.push(T),T.defn=N})}getColumnKey(p){return this._keys[p]}setColumnKey(p,v){this._keys[p]=v}deleteColumnKey(p){delete this._keys[p]}eachColumnKey(p){d.each(this._keys,p)}getColumn(p){if(typeof p=="string"){const v=this._keys[p];if(v)return v;p=n.l2n(p)}if(this._columns||(this._columns=[]),p>this._columns.length){let v=this._columns.length+1;for(;v<=p;)this._columns.push(new r(this,v++))}return this._columns[p-1]}spliceColumns(p,v){const y=this._rows.length;for(var N=arguments.length,T=new Array(N>2?N-2:0),_=2;_<N;_++)T[_-2]=arguments[_];if(T.length>0)for(let V=0;V<y;V++){const q=[p,v];T.forEach(B=>{q.push(B[V]||null)});const W=this.getRow(V+1);W.splice.apply(W,q)}else this._rows.forEach(V=>{V&&V.splice(p,v)});const O=T.length-v,H=p+v,F=this._columns.length;if(O<0)for(let V=p+T.length;V<=F;V++)this.getColumn(V).defn=this.getColumn(V-O).defn;else if(O>0)for(let V=F;V>=H;V--)this.getColumn(V+O).defn=this.getColumn(V).defn;for(let V=p;V<p+T.length;V++)this.getColumn(V).defn=null;this.workbook.definedNames.spliceColumns(this.name,p,v,T.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let p=0;return this.eachRow(v=>{p=Math.max(p,v.cellCount)}),p}get actualColumnCount(){const p=[];let v=0;return this.eachRow(y=>{y.eachCell(N=>{let{col:T}=N;p[T]||(p[T]=!0,v++)})}),v}_commitRow(){}get _lastRowNumber(){const p=this._rows;let v=p.length;for(;v>0&&p[v-1]===void 0;)v--;return v}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(p){return this._rows[p-1]}findRows(p,v){return this._rows.slice(p-1,p-1+v)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let p=0;return this.eachRow(()=>{p++}),p}getRow(p){let v=this._rows[p-1];return v||(v=this._rows[p-1]=new i(this,p)),v}getRows(p,v){if(v<1)return;const y=[];for(let N=p;N<p+v;N++)y.push(this.getRow(N));return y}addRow(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const y=this._nextRow,N=this.getRow(y);return N.values=p,this._setStyleOption(y,v[0]==="i"?v:"n"),N}addRows(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const y=[];return p.forEach(N=>{y.push(this.addRow(N,v))}),y}insertRow(p,v){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(p,0,v),this._setStyleOption(p,y),this.getRow(p)}insertRows(p,v){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(p,0,...v),y!=="n")for(let N=0;N<v.length;N++)y[0]==="o"&&this.findRow(v.length+p+N)!==void 0?this._copyStyle(v.length+p+N,p+N,y[1]==="+"):y[0]==="i"&&this.findRow(p-1)!==void 0&&this._copyStyle(p-1,p+N,y[1]==="+");return this.getRows(p,v.length)}_setStyleOption(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";v[0]==="o"&&this.findRow(p+1)!==void 0?this._copyStyle(p+1,p,v[1]==="+"):v[0]==="i"&&this.findRow(p-1)!==void 0&&this._copyStyle(p-1,p,v[1]==="+")}_copyStyle(p,v){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const N=this.getRow(p),T=this.getRow(v);T.style=b(N.style),N.eachCell({includeEmpty:y},(_,O)=>{T.getCell(O).style=b(_.style)}),T.height=N.height}duplicateRow(p,v){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const N=this._rows[p-1],T=new Array(v).fill(N.values);this.spliceRows(p+1,y?0:v,...T);for(let _=0;_<v;_++){const O=this._rows[p+_];O.style=N.style,O.height=N.height,N.eachCell({includeEmpty:!0},(H,F)=>{O.getCell(F).style=H.style})}}spliceRows(p,v){const y=p+v;for(var N=arguments.length,T=new Array(N>2?N-2:0),_=2;_<N;_++)T[_-2]=arguments[_];const O=T.length,H=O-v,F=this._rows.length;let V,q;if(H<0)for(p===F&&(this._rows[F-1]=void 0),V=y;V<=F;V++)if(q=this._rows[V-1],q){const W=this.getRow(V+H);W.values=q.values,W.style=q.style,W.height=q.height,q.eachCell({includeEmpty:!0},(B,E)=>{W.getCell(E).style=B.style}),this._rows[V-1]=void 0}else this._rows[V+H-1]=void 0;else if(H>0)for(V=F;V>=y;V--)if(q=this._rows[V-1],q){const W=this.getRow(V+H);W.values=q.values,W.style=q.style,W.height=q.height,q.eachCell({includeEmpty:!0},(B,E)=>{if(W.getCell(E).style=B.style,B._value.constructor.name==="MergeValue"){const P=this.getRow(B._row._number+O).getCell(E),A=B._value._master,k=this.getRow(A._row._number+O).getCell(A._column._number);P.merge(k)}})}else this._rows[V+H-1]=void 0;for(V=0;V<O;V++){const W=this.getRow(p+V);W.style={},W.values=T[V]}this.workbook.definedNames.spliceRows(this.name,p,v,O)}eachRow(p,v){if(v||(v=p,p=void 0),p&&p.includeEmpty){const y=this._rows.length;for(let N=1;N<=y;N++)v(this.getRow(N),N)}else this._rows.forEach(y=>{y&&y.hasValues&&v(y,y.number)})}getSheetValues(){const p=[];return this._rows.forEach(v=>{v&&(p[v.number]=v.values)}),p}findCell(p,v){const y=n.getAddress(p,v),N=this._rows[y.row-1];return N?N.findCell(y.col):void 0}getCell(p,v){const y=n.getAddress(p,v);return this.getRow(y.row).getCellEx(y)}mergeCells(){for(var p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];const N=new l(v);this._mergeCellsInternal(N)}mergeCellsWithoutStyle(){for(var p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];const N=new l(v);this._mergeCellsInternal(N,!0)}_mergeCellsInternal(p,v){d.each(this._merges,N=>{if(N.intersects(p))throw new Error("Cannot merge already merged cells")});const y=this.getCell(p.top,p.left);for(let N=p.top;N<=p.bottom;N++)for(let T=p.left;T<=p.right;T++)(N>p.top||T>p.left)&&this.getCell(N,T).merge(y,v);this._merges[y.address]=p}_unMergeMaster(p){const v=this._merges[p.address];if(v){for(let y=v.top;y<=v.bottom;y++)for(let N=v.left;N<=v.right;N++)this.getCell(y,N).unmerge();delete this._merges[p.address]}}get hasMerges(){return d.some(this._merges,Boolean)}unMergeCells(){for(var p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];const N=new l(v);for(let T=N.top;T<=N.bottom;T++)for(let _=N.left;_<=N.right;_++){const O=this.findCell(T,_);O&&(O.type===s.ValueType.Merge?this._unMergeMaster(O.master):this._merges[O.address]&&this._unMergeMaster(O))}}fillFormula(p,v,y){let N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const T=n.decode(p),{top:_,left:O,bottom:H,right:F}=T,V=F-O+1,q=n.encodeAddress(_,O),W=N==="shared";let B;B=typeof y=="function"?y:Array.isArray(y)?Array.isArray(y[0])?(P,A)=>y[P-_][A-O]:(P,A)=>y[(P-_)*V+(A-O)]:()=>{};let E=!0;for(let P=_;P<=H;P++)for(let A=O;A<=F;A++)E?(this.getCell(P,A).value={shareType:N,formula:v,ref:p,result:B(P,A)},E=!1):this.getCell(P,A).value=W?{sharedFormula:q,result:B(P,A)}:B(P,A)}addImage(p,v){const y={type:"image",imageId:p,range:v};this._media.push(new c(this,y))}getImages(){return this._media.filter(p=>p.type==="image")}addBackgroundImage(p){const v={type:"background",imageId:p};this._media.push(new c(this,v))}getBackgroundImageId(){const p=this._media.find(v=>v.type==="background");return p&&p.imageId}protect(p,v){return new Promise(y=>{this.sheetProtection={sheet:!0},v&&"spinCount"in v&&(v.spinCount=Number.isFinite(v.spinCount)?Math.round(Math.max(0,v.spinCount)):1e5),p&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=x.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=v&&"spinCount"in v?v.spinCount:1e5,this.sheetProtection.hashValue=x.convertPasswordToHash(p,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),v&&(this.sheetProtection=Object.assign(this.sheetProtection,v),!p&&"spinCount"in v&&delete this.sheetProtection.spinCount),y()})}unprotect(){this.sheetProtection=null}addTable(p){const v=new u(this,p);return this.tables[p.name]=v,v}getTable(p){return this.tables[p]}removeTable(p){delete this.tables[p]}getTables(){return Object.values(this.tables)}addConditionalFormatting(p){this.conditionalFormattings.push(p)}removeConditionalFormatting(p){typeof p=="number"?this.conditionalFormattings.splice(p,1):this.conditionalFormattings=p instanceof Function?this.conditionalFormattings.filter(p):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(p){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=p}get model(){const p={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(N=>N.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(N=>N.model),conditionalFormattings:this.conditionalFormattings};p.cols=r.toModel(this.columns);const v=p.rows=[],y=p.dimensions=new l;return this._rows.forEach(N=>{const T=N&&N.model;T&&(y.expand(T.number,T.min,T.number,T.max),v.push(T))}),p.merges=[],d.each(this._merges,N=>{p.merges.push(N.range)}),p}_parseRows(p){this._rows=[],p.rows.forEach(v=>{const y=new i(this,v.number);this._rows[y.number-1]=y,y.model=v})}_parseMergeCells(p){d.each(p.mergeCells,v=>{this.mergeCellsWithoutStyle(v)})}set model(p){this.name=p.name,this._columns=r.fromModel(this,p.cols),this._parseRows(p),this._parseMergeCells(p),this.dataValidations=new m(p.dataValidations),this.properties=p.properties,this.pageSetup=p.pageSetup,this.headerFooter=p.headerFooter,this.views=p.views,this.autoFilter=p.autoFilter,this._media=p.media.map(v=>new c(this,v)),this.sheetProtection=p.sheetProtection,this.tables=p.tables.reduce((v,y)=>{const N=new u;return N.model=y,v[y.name]=N,v},{}),this.conditionalFormattings=p.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(t,f,h){t("core-js/modules/es.promise"),t("core-js/modules/es.promise.finally"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.values"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.async-iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.find"),t("core-js/modules/es.string.from-code-point"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.number.is-nan"),t("regenerator-runtime/runtime");const d={Workbook:t("./doc/workbook")},n=t("./doc/enums");Object.keys(n).forEach(l=>{d[l]=n[l]}),f.exports=d},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(t,f,h){const d=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");h.bufferToString=function(n){return typeof n=="string"?n:d?d.decode(n):n.toString()}},{}],17:[function(t,f,h){const d=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:n}=t("buffer");h.stringToBuffer=function(l){return typeof l!="string"?l:d?n.from(d.encode(l).buffer):n.from(l)}},{buffer:220}],18:[function(t,f,h){const d=t("./under-dash"),n=t("./col-cache");f.exports=class{constructor(l){this.template=l,this.sheets={}}addCell(l){this.addCellEx(n.decodeEx(l))}getCell(l){return this.findCellEx(n.decodeEx(l),!0)}findCell(l){return this.findCellEx(n.decodeEx(l),!1)}findCellAt(l,i,r){const s=this.sheets[l],c=s&&s[i];return c&&c[r]}addCellEx(l){if(l.top)for(let i=l.top;i<=l.bottom;i++)for(let r=l.left;r<=l.right;r++)this.getCellAt(l.sheetName,i,r);else this.findCellEx(l,!0)}getCellEx(l){return this.findCellEx(l,!0)}findCellEx(l,i){const r=this.findSheet(l,i),s=this.findSheetRow(r,l,i);return this.findRowCell(s,l,i)}getCellAt(l,i,r){const s=this.sheets[l]||(this.sheets[l]=[]),c=s[i]||(s[i]=[]);return c[r]||(c[r]={sheetName:l,address:n.n2l(r)+i,row:i,col:r})}removeCellEx(l){const i=this.findSheet(l);if(!i)return;const r=this.findSheetRow(i,l);r&&delete r[l.col]}forEachInSheet(l,i){const r=this.sheets[l];r&&r.forEach((s,c)=>{s&&s.forEach((u,m)=>{u&&i(u,c,m)})})}forEach(l){d.each(this.sheets,(i,r)=>{this.forEachInSheet(r,l)})}map(l){const i=[];return this.forEach(r=>{i.push(l(r))}),i}findSheet(l,i){const r=l.sheetName;return this.sheets[r]?this.sheets[r]:i?this.sheets[r]=[]:void 0}findSheetRow(l,i,r){const{row:s}=i;return l&&l[s]?l[s]:r?l[s]=[]:void 0}findRowCell(l,i,r){const{col:s}=i;return l&&l[s]?l[s]:r?l[s]=this.template?Object.assign(i,JSON.parse(JSON.stringify(this.template))):i:void 0}spliceRows(l,i,r,s){const c=this.sheets[l];if(c){const u=[];for(let m=0;m<s;m++)u.push([]);c.splice(i,r,...u)}}spliceColumns(l,i,r,s){const c=this.sheets[l];if(c){const u=[];for(let m=0;m<s;m++)u.push(null);d.each(c,m=>{m.splice(i,r,...u)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(t,f,h){const d=/^[A-Z]+\d+$/,n={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:l=>l<=26?1:l<=676?2:3,_fill(l){let i,r,s,c,u,m=1;if(l>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&l>=1){for(;m<=26;)i=this._dictionary[m-1],this._n2l[m]=i,this._l2n[i]=m,m++;this._l2nFill=1}if(this._l2nFill<2&&l>=2){for(m=27;m<=702;)r=m-27,s=r%26,c=Math.floor(r/26),i=this._dictionary[c]+this._dictionary[s],this._n2l[m]=i,this._l2n[i]=m,m++;this._l2nFill=2}if(this._l2nFill<3&&l>=3){for(m=703;m<=16384;)r=m-703,s=r%26,c=Math.floor(r/26)%26,u=Math.floor(r/676),i=this._dictionary[u]+this._dictionary[c]+this._dictionary[s],this._n2l[m]=i,this._l2n[i]=m,m++;this._l2nFill=3}},l2n(l){if(this._l2n[l]||this._fill(l.length),!this._l2n[l])throw new Error("Out of bounds. Invalid column letter: "+l);return this._l2n[l]},n2l(l){if(l<1||l>16384)throw new Error(l+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[l]||this._fill(this._level(l)),this._n2l[l]},_hash:{},validateAddress(l){if(!d.test(l))throw new Error("Invalid Address: "+l);return!0},decodeAddress(l){const i=l.length<5&&this._hash[l];if(i)return i;let r=!1,s="",c=0,u=!1,m="",x=0;for(let p,v=0;v<l.length;v++)if(p=l.charCodeAt(v),!u&&p>=65&&p<=90)r=!0,s+=l[v],c=26*c+p-64;else if(p>=48&&p<=57)u=!0,m+=l[v],x=10*x+p-48;else if(u&&r&&p!==36)break;if(r){if(c>16384)throw new Error("Out of bounds. Invalid column letter: "+s)}else c=void 0;u||(x=void 0);const b={address:l=s+m,col:c,row:x,$col$row:`$${s}$${m}`};return c<=100&&x<=100&&(this._hash[l]=b,this._hash[b.$col$row]=b),b},getAddress(l,i){if(i){const r=this.n2l(i)+l;return this.decodeAddress(r)}return this.decodeAddress(l)},decode(l){const i=l.split(":");if(i.length===2){const r=this.decodeAddress(i[0]),s=this.decodeAddress(i[1]),c={top:Math.min(r.row,s.row),left:Math.min(r.col,s.col),bottom:Math.max(r.row,s.row),right:Math.max(r.col,s.col)};return c.tl=this.n2l(c.left)+c.top,c.br=this.n2l(c.right)+c.bottom,c.dimensions=`${c.tl}:${c.br}`,c}return this.decodeAddress(l)},decodeEx(l){const i=l.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),r=i[1]||i[2],s=i[3],c=s.split(":");if(c.length>1){let m=this.decodeAddress(c[0]),x=this.decodeAddress(c[1]);const b=Math.min(m.row,x.row),p=Math.min(m.col,x.col),v=Math.max(m.row,x.row),y=Math.max(m.col,x.col);return m=this.n2l(p)+b,x=this.n2l(y)+v,{top:b,left:p,bottom:v,right:y,sheetName:r,tl:{address:m,col:p,row:b,$col$row:`$${this.n2l(p)}$${b}`,sheetName:r},br:{address:x,col:y,row:v,$col$row:`$${this.n2l(y)}$${v}`,sheetName:r},dimensions:`${m}:${x}`}}if(s.startsWith("#"))return r?{sheetName:r,error:s}:{error:s};const u=this.decodeAddress(s);return r?{sheetName:r,...u}:u},encodeAddress:(l,i)=>n.n2l(i)+l,encode(){switch(arguments.length){case 2:return n.encodeAddress(arguments[0],arguments[1]);case 4:return`${n.encodeAddress(arguments[0],arguments[1])}:${n.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(l,i){const[r,s,,c,u]=l,[m,x]=i;return m>=r&&m<=c&&x>=s&&x<=u}};f.exports=n},{}],20:[function(t,f,h){const d=(l,i)=>({...l,...i.reduce((r,s)=>(l[s]&&(r[s]={...l[s]}),r),{})}),n=function(l,i,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];l[r]&&(i[r]=d(l[r],s))};h.copyStyle=l=>{if(!l)return l;if(i=l,Object.keys(i).length===0)return{};var i;const r={...l};return n(l,r,"font",["color"]),n(l,r,"alignment"),n(l,r,"protection"),l.border&&(n(l,r,"border"),n(l.border,r.border,"top",["color"]),n(l.border,r.border,"left",["color"]),n(l.border,r.border,"bottom",["color"]),n(l.border,r.border,"right",["color"]),n(l.border,r.border,"diagonal",["color"])),l.fill&&(n(l,r,"fill",["fgColor","bgColor","center"]),l.fill.stops&&(r.fill.stops=l.fill.stops.map(s=>d(s,["color"])))),r}},{}],21:[function(t,f,h){(function(d){(function(){const n=t("crypto"),l={hash(i){const r=n.createHash(i);for(var s=arguments.length,c=new Array(s>1?s-1:0),u=1;u<s;u++)c[u-1]=arguments[u];return r.update(d.concat(c)),r.digest()},convertPasswordToHash(i,r,s,c){if(r=r.toLowerCase(),n.getHashes().indexOf(r)<0)throw new Error(`Hash algorithm '${r}' not supported!`);const u=d.from(i,"utf16le");let m=this.hash(r,d.from(s,"base64"),u);for(let x=0;x<c;x++){const b=d.alloc(4);b.writeUInt32LE(x,0),m=this.hash(r,m,b)}return m.toString("base64")},randomBytes:i=>n.randomBytes(i)};f.exports=l}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(t,f,h){const{SaxesParser:d}=t("saxes"),{PassThrough:n}=t("readable-stream"),{bufferToString:l}=t("./browser-buffer-decode");f.exports=async function*(i){i.pipe&&!i[Symbol.asyncIterator]&&(i=i.pipe(new n));const r=new d;let s;r.on("error",u=>{s=u});let c=[];r.on("opentag",u=>c.push({eventType:"opentag",value:u})),r.on("text",u=>c.push({eventType:"text",value:u})),r.on("closetag",u=>c.push({eventType:"closetag",value:u}));for await(const u of i){if(r.write(l(u)),s)throw s;yield c,c=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(t,f,h){const d=t("./col-cache"),n=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,l=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;f.exports={slideFormula:function(i,r,s){const c=d.decode(r),u=d.decode(s);return i.replace(n,(m,x,b,p,v)=>{if(v)return m;const y=l.exec(p);if(y){const N=y[1],T=y[2].toUpperCase(),_=y[3],O=y[4];if(T.length>3||T.length===3&&T>"XFD")return m;let H=d.l2n(T),F=parseInt(O,10);return N||(H+=u.col-c.col),_||(F+=u.row-c.row),(x||"")+(N||"")+d.n2l(H)+(_||"")+F}return m})}}},{"./col-cache":19}],24:[function(t,f,h){(function(d,n){(function(){const l=t("readable-stream"),i=t("./utils"),r=t("./string-buf");class s{constructor(p,v){this._data=p,this._encoding=v}get length(){return this.toBuffer().length}copy(p,v,y,N){return this.toBuffer().copy(p,v,y,N)}toBuffer(){return this._buffer||(this._buffer=n.from(this._data,this._encoding)),this._buffer}}class c{constructor(p){this._data=p}get length(){return this._data.length}copy(p,v,y,N){return this._data._buf.copy(p,v,y,N)}toBuffer(){return this._data.toBuffer()}}class u{constructor(p){this._data=p}get length(){return this._data.length}copy(p,v,y,N){this._data.copy(p,v,y,N)}toBuffer(){return this._data}}class m{constructor(p){this.size=p,this.buffer=n.alloc(p),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const p=n.alloc(this.iWrite-this.iRead);return this.buffer.copy(p,0,this.iRead,this.iWrite),p}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(p){let v;return p===0?null:p===void 0||p>=this.length?(v=this.toBuffer(),this.iRead=this.iWrite,v):(v=n.alloc(p),this.buffer.copy(v,0,this.iRead,p),this.iRead+=p,v)}write(p,v,y){const N=Math.min(y,this.size-this.iWrite);return p.copy(this.buffer,this.iWrite,v,v+N),this.iWrite+=N,N}}const x=function(b){b=b||{},this.bufSize=b.bufSize||1048576,this.buffers=[],this.batch=b.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};i.inherits(x,l.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return n.concat(this.buffers.map(b=>b.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const p=this.buffers[this.buffers.length-1];if(!p.full)return p}const b=new m(this.bufSize);return this.buffers.push(b),b},async _pipe(b){await Promise.all(this.pipes.map((function(p){return new Promise(v=>{p.write(b.toBuffer(),()=>{v()})})})))},_writeToBuffers(b){let p=0;const v=b.length;for(;p<v;)p+=this._getWritableBuffer().write(b,p,v-p)},async write(b,p,v){let y;if(p instanceof Function&&(v=p,p="utf8"),v=v||i.nop,b instanceof r)y=new c(b);else if(b instanceof n)y=new u(b);else{if(!(typeof b=="string"||b instanceof String||b instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");y=new s(b,p)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(y);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(y),d.nextTick(v)):(await this._pipe(y),v());else this.paused||this.emit("data",y.toBuffer()),this._writeToBuffers(y),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(b,p,v){const y=N=>{N?v(N):(this._flush(),this.pipes.forEach(T=>{T.end()}),this.emit("finish"))};b?this.write(b,p,y):y()},read(b){let p;if(b){for(p=[];b&&this.buffers.length&&!this.buffers[0].eod;){const v=this.buffers[0],y=v.read(b);b-=y.length,p.push(y),v.eod&&v.full&&this.buffers.shift()}return n.concat(p)}return p=this.buffers.map(v=>v.toBuffer()).filter(Boolean),this.buffers=[],n.concat(p)},setEncoding(b){this.encoding=b},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(b){this.pipes.push(b),!this.paused&&this.buffers.length&&this.end()},unpipe(b){this.pipes=this.pipes.filter(p=>p!==b)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),f.exports=x}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(t,f,h){(function(d){(function(){f.exports=class{constructor(n){this._buf=d.alloc(n&&n.size||16384),this._encoding=n&&n.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=d.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(n){n=n||0,this._buffer=void 0,this._inPos=n}_grow(n){let l=2*this._buf.length;for(;l<n;)l*=2;const i=d.alloc(l);this._buf.copy(i,0),this._buf=i}addText(n){this._buffer=void 0;let l=this._inPos+this._buf.write(n,this._inPos,this._encoding);for(;l>=this._buf.length-4;)this._grow(this._inPos+n.length),l=this._inPos+this._buf.write(n,this._inPos,this._encoding);this._inPos=l}addStringBuf(n){n.length&&(this._buffer=void 0,this.length+n.length>this.capacity&&this._grow(this.length+n.length),n._buf.copy(this._buf,this._inPos,0,n.length),this._inPos+=n.length)}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],26:[function(t,f,h){const{toString:d}=Object.prototype,n=/["&<>]/,l={each:function(i,r){i&&(Array.isArray(i)?i.forEach(r):Object.keys(i).forEach(s=>{r(i[s],s)}))},some:function(i,r){return!!i&&(Array.isArray(i)?i.some(r):Object.keys(i).some(s=>r(i[s],s)))},every:function(i,r){return!i||(Array.isArray(i)?i.every(r):Object.keys(i).every(s=>r(i[s],s)))},map:function(i,r){return i?Array.isArray(i)?i.map(r):Object.keys(i).map(s=>r(i[s],s)):[]},keyBy:(i,r)=>i.reduce((s,c)=>(s[c[r]]=c,s),{}),isEqual:function(i,r){const s=typeof i,c=typeof r,u=Array.isArray(i),m=Array.isArray(r);let x;if(s!==c)return!1;switch(typeof i){case"object":if(u||m)return!(!u||!m)&&i.length===r.length&&i.every((b,p)=>{const v=r[p];return l.isEqual(b,v)});if(i===null||r===null)return i===r;if(x=Object.keys(i),Object.keys(r).length!==x.length)return!1;for(const b of x)if(!r.hasOwnProperty(b))return!1;return l.every(i,(b,p)=>{const v=r[p];return l.isEqual(b,v)});default:return i===r}},escapeHtml(i){const r=n.exec(i);if(!r)return i;let s="",c="",u=0,m=r.index;for(;m<i.length;m++){switch(i.charAt(m)){case'"':c="&quot;";break;case"&":c="&amp;";break;case"'":c="&apos;";break;case"<":c="&lt;";break;case">":c="&gt;";break;default:continue}u!==m&&(s+=i.substring(u,m)),u=m+1,s+=c}return u!==m?s+i.substring(u,m):s},strcmp:(i,r)=>i<r?-1:i>r?1:0,isUndefined:i=>d.call(i)==="[object Undefined]",isObject:i=>d.call(i)==="[object Object]",deepMerge(){const i=arguments[0]||{},{length:r}=arguments;let s,c,u;function m(x,b){s=i[b],u=Array.isArray(x),l.isObject(x)||u?(u?(u=!1,c=s&&Array.isArray(s)?s:[]):c=s&&l.isObject(s)?s:{},i[b]=l.deepMerge(c,x)):l.isUndefined(x)||(i[b]=x)}for(let x=0;x<r;x++)l.each(arguments[x],m);return i}};f.exports=l},{}],27:[function(t,f,h){(function(d,n){(function(){const l=t("fs"),i=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,r={nop(){},promiseImmediate:s=>new Promise(c=>{d.setImmediate?n(()=>{c(s)}):setTimeout(()=>{c(s)},1)}),inherits:function(s,c,u,m){s.super_=c,m||(m=u,u=null),u&&Object.keys(u).forEach(b=>{Object.defineProperty(s,b,Object.getOwnPropertyDescriptor(u,b))});const x={constructor:{value:s,enumerable:!1,writable:!1,configurable:!0}};m&&Object.keys(m).forEach(b=>{x[b]=Object.getOwnPropertyDescriptor(m,b)}),s.prototype=Object.create(c.prototype,x)},dateToExcel:(s,c)=>25569+s.getTime()/864e5-(c?1462:0),excelToDate(s,c){const u=Math.round(24*(s-25569+(c?1462:0))*3600*1e3);return new Date(u)},parsePath(s){const c=s.lastIndexOf("/");return{path:s.substring(0,c),name:s.substring(c+1)}},getRelsPath(s){const c=r.parsePath(s);return`${c.path}/_rels/${c.name}.rels`},xmlEncode(s){const c=i.exec(s);if(!c)return s;let u="",m="",x=0,b=c.index;for(;b<s.length;b++){const p=s.charCodeAt(b);switch(p){case 34:m="&quot;";break;case 38:m="&amp;";break;case 39:m="&apos;";break;case 60:m="&lt;";break;case 62:m="&gt;";break;case 127:m="";break;default:if(p<=31&&(p<=8||p>=11&&p!==13)){m="";break}continue}x!==b&&(u+=s.substring(x,b)),x=b+1,m&&(u+=m)}return x!==b?u+s.substring(x,b):u},xmlDecode:s=>s.replace(/&([a-z]*);/g,c=>{switch(c){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return c}}),validInt(s){const c=parseInt(s,10);return Number.isNaN(c)?0:c},isDateFmt(s){return s?(s=(s=s.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:s=>new Promise(c=>{l.access(s,l.constants.F_OK,u=>{c(!u)})})},toIsoDateString:s=>s.toIsoString().subsstr(0,10),parseBoolean:s=>s===!0||s==="true"||s===1||s==="1"};f.exports=r}).call(this)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{fs:216,timers:523}],28:[function(t,f,h){const d=t("./under-dash"),n=t("./utils");function l(s,c,u){s.push(` ${c}="${n.xmlEncode(u.toString())}"`)}function i(s,c){if(c){const u=[];d.each(c,(m,x)=>{m!==void 0&&l(u,x,m)}),s.push(u.join(""))}}class r{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(c){const u=this._xml;u.push("<?xml"),i(u,c),u.push(`?>
`)}openNode(c,u){const m=this.tos,x=this._xml;m&&this.open&&x.push(">"),this._stack.push(c),x.push("<"),x.push(c),i(x,u),this.leaf=!0,this.open=!0}addAttribute(c,u){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");u!==void 0&&l(this._xml,c,u)}addAttributes(c){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");i(this._xml,c)}writeText(c){const u=this._xml;this.open&&(u.push(">"),this.open=!1),this.leaf=!1,u.push(n.xmlEncode(c.toString()))}writeXml(c){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(c)}closeNode(){const c=this._stack.pop(),u=this._xml;this.leaf?u.push("/>"):(u.push("</"),u.push(c),u.push(">")),this.open=!1,this.leaf=!1}leafNode(c,u,m){this.openNode(c,u),m!==void 0&&this.writeText(m),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const c=this._rollbacks.pop();this._xml.length>c.xml&&this._xml.splice(c.xml,this._xml.length-c.xml),this._stack.length>c.stack&&this._stack.splice(c.stack,this._stack.length-c.stack),this.leaf=c.leaf,this.open=c.open}get xml(){return this.closeAll(),this._xml.join("")}}r.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},f.exports=r},{"./under-dash":26,"./utils":27}],29:[function(t,f,h){(function(d){(function(){const n=t("events"),l=t("jszip"),i=t("./stream-buf"),{stringToBuffer:r}=t("./browser-buffer-encode");class s extends n.EventEmitter{constructor(u){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},u),this.zip=new l,this.stream=new i}append(u,m){m.hasOwnProperty("base64")&&m.base64?this.zip.file(m.name,u,{base64:!0}):(d.browser&&typeof u=="string"&&(u=r(u)),this.zip.file(m.name,u))}async finalize(){const u=await this.zip.generateAsync(this.options);this.stream.end(u),this.emit("finish")}read(u){return this.stream.read(u)}setEncoding(u){return this.stream.setEncoding(u)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(u,m){return this.stream.pipe(u,m)}unpipe(u){return this.stream.unpipe(u)}unshift(u){return this.stream.unshift(u)}wrap(u){return this.stream.wrap(u)}}f.exports={ZipWriter:s}}).call(this)}).call(this,t("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(t,f,h){f.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(t,f,h){f.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(t,f,h){const d=t("../../utils/parse-sax"),n=t("../../utils/xml-stream");class l{prepare(){}render(){}parseOpen(r){}parseText(r){}parseClose(r){}reconcile(r,s){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(r=>{r instanceof l?r.reset():r.xform&&r.xform.reset()})}mergeModel(r){this.model=Object.assign(this.model||{},r)}async parse(r){for await(const s of r)for(const{eventType:c,value:u}of s)if(c==="opentag")this.parseOpen(u);else if(c==="text")this.parseText(u);else if(c==="closetag"&&!this.parseClose(u.name))return this.model;return this.model}async parseStream(r){return this.parse(d(r))}get xml(){return this.toXml(this.model)}toXml(r){const s=new n;return this.render(s,r),s.xml}static toAttribute(r,s){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(r===void 0){if(c)return s}else if(c||r!==s)return r.toString()}static toStringAttribute(r,s){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return l.toAttribute(r,s,c)}static toStringValue(r,s){return r===void 0?s:r}static toBoolAttribute(r,s){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(r===void 0){if(c)return s}else if(c||r!==s)return r?"1":"0"}static toBoolValue(r,s){return r===void 0?s:r==="1"}static toIntAttribute(r,s){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return l.toAttribute(r,s,c)}static toIntValue(r,s){return r===void 0?s:parseInt(r,10)}static toFloatAttribute(r,s){let c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return l.toAttribute(r,s,c)}static toFloatValue(r,s){return r===void 0?s:parseFloat(r)}}f.exports=l},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(t,f,h){const d=t("../base-xform"),n=t("../../../utils/col-cache");function l(r){try{return n.decodeEx(r),!0}catch{return!1}}function i(r){const s=[];let c=!1,u="";return r.split(",").forEach(m=>{if(!m)return;const x=(m.match(/'/g)||[]).length;if(!x)return void(c?u+=m+",":l(m)&&s.push(m));const b=x%2==0;!c&&b&&l(m)?s.push(m):c&&!b?(c=!1,l(u+m)&&s.push(u+m),u=""):(c=!0,u+=m+",")}),s}f.exports=class extends d{render(r,s){r.openNode("definedName",{name:s.name,localSheetId:s.localSheetId}),r.writeText(s.ranges.join(",")),r.closeNode()}parseOpen(r){switch(r.name){case"definedName":return this._parsedName=r.attributes.name,this._parsedLocalSheetId=r.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(r){this._parsedText.push(r)}parseClose(){return this.model={name:this._parsedName,ranges:i(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(t,f,h){const d=t("../../../utils/utils"),n=t("../base-xform");f.exports=class extends n{render(l,i){l.leafNode("sheet",{sheetId:i.id,name:i.name,state:i.state,"r:id":i.rId})}parseOpen(l){return l.name==="sheet"&&(this.model={name:d.xmlDecode(l.attributes.name),id:parseInt(l.attributes.sheetId,10),state:l.attributes.state,rId:l.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{render(n,l){n.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:l.fullCalcOnLoad?1:void 0})}parseOpen(n){return n.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{render(n,l){n.leafNode("workbookPr",{date1904:l.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(n){return n.name==="workbookPr"&&(this.model={date1904:n.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{render(n,l){const i={xWindow:l.x||0,yWindow:l.y||0,windowWidth:l.width||12e3,windowHeight:l.height||24e3,firstSheet:l.firstSheet,activeTab:l.activeTab};l.visibility&&l.visibility!=="visible"&&(i.visibility=l.visibility),n.leafNode("workbookView",i)}parseOpen(n){if(n.name==="workbookView"){const l=this.model={},i=function(s,c,u){const m=c!==void 0?l[s]=c:u;m!==void 0&&(l[s]=m)},r=function(s,c,u){const m=c!==void 0?l[s]=parseInt(c,10):u;m!==void 0&&(l[s]=m)};return r("x",n.attributes.xWindow,0),r("y",n.attributes.yWindow,0),r("width",n.attributes.windowWidth,25e3),r("height",n.attributes.windowHeight,1e4),i("visibility",n.attributes.visibility,"visible"),r("activeTab",n.attributes.activeTab,void 0),r("firstSheet",n.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../../../utils/col-cache"),l=t("../../../utils/xml-stream"),i=t("../base-xform"),r=t("../static-xform"),s=t("../list-xform"),c=t("./defined-name-xform"),u=t("./sheet-xform"),m=t("./workbook-view-xform"),x=t("./workbook-properties-xform"),b=t("./workbook-calc-properties-xform");class p extends i{constructor(){super(),this.map={fileVersion:p.STATIC_XFORMS.fileVersion,workbookPr:new x,bookViews:new s({tag:"bookViews",count:!1,childXform:new m}),sheets:new s({tag:"sheets",count:!1,childXform:new u}),definedNames:new s({tag:"definedNames",count:!1,childXform:new c}),calcPr:new b}}prepare(y){y.sheets=y.worksheets;const N=[];let T=0;y.sheets.forEach(_=>{if(_.pageSetup&&_.pageSetup.printArea&&_.pageSetup.printArea.split("&&").forEach(O=>{const H=O.split(":"),F={name:"_xlnm.Print_Area",ranges:[`'${_.name}'!$${H[0]}:$${H[1]}`],localSheetId:T};N.push(F)}),_.pageSetup&&(_.pageSetup.printTitlesRow||_.pageSetup.printTitlesColumn)){const O=[];if(_.pageSetup.printTitlesColumn){const F=_.pageSetup.printTitlesColumn.split(":");O.push(`'${_.name}'!$${F[0]}:$${F[1]}`)}if(_.pageSetup.printTitlesRow){const F=_.pageSetup.printTitlesRow.split(":");O.push(`'${_.name}'!$${F[0]}:$${F[1]}`)}const H={name:"_xlnm.Print_Titles",ranges:O,localSheetId:T};N.push(H)}T++}),N.length&&(y.definedNames=y.definedNames.concat(N)),(y.media||[]).forEach((_,O)=>{_.name=_.type+(O+1)})}render(y,N){y.openXml(l.StdDocAttributes),y.openNode("workbook",p.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(y),this.map.workbookPr.render(y,N.properties),this.map.bookViews.render(y,N.views),this.map.sheets.render(y,N.sheets),this.map.definedNames.render(y,N.definedNames),this.map.calcPr.render(y,N.calcProperties),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"workbook":return!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(y){const N=(y.workbookRels||[]).reduce((F,V)=>(F[V.Id]=V,F),{}),T=[];let _,O=0;(y.sheets||[]).forEach(F=>{const V=N[F.rId];V&&(_=y.worksheetHash["xl/"+V.Target.replace(/^(\s|\/xl\/)+/,"")],_&&(_.name=F.name,_.id=F.id,_.state=F.state,T[O++]=_))});const H=[];d.each(y.definedNames,F=>{if(F.name==="_xlnm.Print_Area"){if(_=T[F.localSheetId],_){_.pageSetup||(_.pageSetup={});const V=n.decodeEx(F.ranges[0]);_.pageSetup.printArea=_.pageSetup.printArea?`${_.pageSetup.printArea}&&${V.dimensions}`:V.dimensions}}else if(F.name==="_xlnm.Print_Titles"){if(_=T[F.localSheetId],_){_.pageSetup||(_.pageSetup={});const V=F.ranges.join(","),q=/\$/g,W=/\$\d+:\$\d+/,B=V.match(W);if(B&&B.length){const A=B[0];_.pageSetup.printTitlesRow=A.replace(q,"")}const E=/\$[A-Z]+:\$[A-Z]+/,P=V.match(E);if(P&&P.length){const A=P[0];_.pageSetup.printTitlesColumn=A.replace(q,"")}}}else H.push(F)}),y.definedNames=H,y.media.forEach((F,V)=>{F.index=V})}}p.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},p.STATIC_XFORMS={fileVersion:new r({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},f.exports=p},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(t,f,h){const d=t("../strings/rich-text-xform"),n=t("../../../utils/utils"),l=t("../base-xform"),i=f.exports=function(r){this.model=r};n.inherits(i,l,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new d),this._richTextXform},render(r,s){s=s||this.model,r.openNode("comment",{ref:s.ref,authorId:0}),r.openNode("text"),s&&s.note&&s.note.texts&&s.note.texts.forEach(c=>{this.richTextXform.render(r,c)}),r.closeNode(),r.closeNode()},parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case"comment":return this.model={type:"note",note:{texts:[]},...r.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(r),!0;default:return!1}},parseText(r){this.parser&&this.parser.parseText(r)},parseClose(r){switch(r){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(r),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(t,f,h){const d=t("../../../utils/xml-stream"),n=t("../../../utils/utils"),l=t("../base-xform"),i=t("./comment-xform"),r=f.exports=function(){this.map={comment:new i}};n.inherits(r,l,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(s,c){c=c||this.model,s.openXml(d.StdDocAttributes),s.openNode("comments",r.COMMENTS_ATTRIBUTES),s.openNode("authors"),s.leafNode("author",null,"Author"),s.closeNode(),s.openNode("commentList"),c.comments.forEach(u=>{this.map.comment.render(s,u)}),s.closeNode(),s.closeNode()},parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(s),!0;default:return!1}},parseText(s){this.parser&&this.parser.parseText(s)},parseClose(s){switch(s){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(s),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(t,f,h){const d=t("../../base-xform");f.exports=class extends d{constructor(n){super(),this._model=n}get tag(){return this._model&&this._model.tag}render(n,l,i){(l===i[2]||this.tag==="x:SizeWithCells"&&l===i[1])&&n.leafNode(this.tag)}parseOpen(n){switch(n.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(t,f,h){const d=t("../../base-xform");f.exports=class extends d{constructor(n){super(),this._model=n}get tag(){return this._model&&this._model.tag}render(n,l){n.leafNode(this.tag,null,l)}parseOpen(n){switch(n.name){case this.tag:return this.text="",!0;default:return!1}}parseText(n){this.text=n}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"x:Anchor"}getAnchorRect(n){const l=Math.floor(n.left),i=Math.floor(68*(n.left-l)),r=Math.floor(n.top),s=Math.floor(18*(n.top-r)),c=Math.floor(n.right),u=Math.floor(68*(n.right-c)),m=Math.floor(n.bottom);return[l,i,r,s,c,u,m,Math.floor(18*(n.bottom-m))]}getDefaultRect(n){const l=n.col,i=Math.max(n.row-2,0);return[l,6,i,14,l+2,2,i+4,16]}render(n,l){const i=l.anchor?this.getAnchorRect(l.anchor):this.getDefaultRect(l.refAddress);n.leafNode("x:Anchor",null,i.join(", "))}parseOpen(n){switch(n.name){case this.tag:return this.text="",!0;default:return!1}}parseText(n){this.text=n}parseClose(){return!1}}},{"../base-xform":32}],44:[function(t,f,h){const d=t("../base-xform"),n=t("./vml-anchor-xform"),l=t("./style/vml-protection-xform"),i=t("./style/vml-position-xform"),r=["twoCells","oneCells","absolute"];f.exports=class extends d{constructor(){super(),this.map={"x:Anchor":new n,"x:Locked":new l({tag:"x:Locked"}),"x:LockText":new l({tag:"x:LockText"}),"x:SizeWithCells":new i({tag:"x:SizeWithCells"}),"x:MoveWithCells":new i({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(s,c){const{protection:u,editAs:m}=c.note;s.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(s,m,r),this.map["x:SizeWithCells"].render(s,m,r),this.map["x:Anchor"].render(s,c),this.map["x:Locked"].render(s,u.locked),s.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(s,u.lockText),s.leafNode("x:Row",null,c.refAddress.row-1),s.leafNode("x:Column",null,c.refAddress.col-1),s.closeNode()}parseOpen(s){switch(s.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;switch(s){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const s=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),c=Object.keys(s).length;this.model.editAs=r[c],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(t,f,h){const d=t("../../../utils/xml-stream"),n=t("../base-xform"),l=t("./vml-shape-xform");class i extends n{constructor(){super(),this.map={"v:shape":new l}}get tag(){return"xml"}render(s,c){s.openXml(d.StdDocAttributes),s.openNode(this.tag,i.DRAWING_ATTRIBUTES),s.openNode("o:shapelayout",{"v:ext":"edit"}),s.leafNode("o:idmap",{"v:ext":"edit",data:1}),s.closeNode(),s.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),s.leafNode("v:stroke",{joinstyle:"miter"}),s.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),s.closeNode(),c.comments.forEach((u,m)=>{this.map["v:shape"].render(s,u,m)}),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(s){case this.tag:return!1;default:return!0}}reconcile(s,c){s.anchors.forEach(u=>{u.br?this.map["xdr:twoCellAnchor"].reconcile(u,c):this.map["xdr:oneCellAnchor"].reconcile(u,c)})}}i.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},f.exports=i},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(t,f,h){const d=t("../base-xform"),n=t("./vml-textbox-xform"),l=t("./vml-client-data-xform");class i extends d{constructor(){super(),this.map={"v:textbox":new n,"x:ClientData":new l}}get tag(){return"v:shape"}render(s,c,u){s.openNode("v:shape",i.V_SHAPE_ATTRIBUTES(c,u)),s.leafNode("v:fill",{color2:"infoBackground [80]"}),s.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),s.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(s,c),this.map["x:ClientData"].render(s,c),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset(),this.model={margins:{insetmode:s.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;switch(s){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}i.V_SHAPE_ATTRIBUTES=(r,s)=>({id:"_x0000_s"+(1025+s),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":r.note.margins&&r.note.margins.insetmode}),f.exports=i},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"v:textbox"}conversionUnit(n,l,i){return`${parseFloat(n)*l.toFixed(2)}${i}`}reverseConversionUnit(n){return(n||"").split(",").map(l=>Number(parseFloat(this.conversionUnit(parseFloat(l),.1,"")).toFixed(2)))}render(n,l){const i={style:"mso-direction-alt:auto"};if(l&&l.note){let{inset:r}=l.note&&l.note.margins;Array.isArray(r)&&(r=r.map(s=>this.conversionUnit(s,10,"mm")).join(",")),r&&(i.inset=r)}n.openNode("v:textbox",i),n.leafNode("div",{style:"text-align:left"}),n.closeNode()}parseOpen(n){switch(n.name){case this.tag:return this.model={inset:this.reverseConversionUnit(n.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(n){switch(n){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(t,f,h){const d=t("./base-xform");f.exports=class extends d{createNewModel(n){return{}}parseOpen(n){return this.parser=this.parser||this.map[n.name],this.parser?(this.parser.parseOpen(n),!0):n.name===this.tag&&(this.model=this.createNewModel(n),!0)}parseText(n){this.parser&&this.parser.parseText(n)}onParserClose(n,l){this.model[n]=l.model}parseClose(n){return this.parser?(this.parser.parseClose(n)||(this.onParserClose(n,this.parser),this.parser=void 0),!0):n!==this.tag}}},{"./base-xform":32}],49:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{render(n,l){n.openNode("HeadingPairs"),n.openNode("vt:vector",{size:2,baseType:"variant"}),n.openNode("vt:variant"),n.leafNode("vt:lpstr",void 0,"Worksheets"),n.closeNode(),n.openNode("vt:variant"),n.leafNode("vt:i4",void 0,l.length),n.closeNode(),n.closeNode(),n.closeNode()}parseOpen(n){return n.name==="HeadingPairs"}parseText(){}parseClose(n){return n!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{render(n,l){n.openNode("TitlesOfParts"),n.openNode("vt:vector",{size:l.length,baseType:"lpstr"}),l.forEach(i=>{n.leafNode("vt:lpstr",void 0,i.name)}),n.closeNode(),n.closeNode()}parseOpen(n){return n.name==="TitlesOfParts"}parseText(){}parseClose(n){return n!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(t,f,h){const d=t("../../../utils/xml-stream"),n=t("../base-xform"),l=t("../simple/string-xform"),i=t("./app-heading-pairs-xform"),r=t("./app-titles-of-parts-xform");class s extends n{constructor(){super(),this.map={Company:new l({tag:"Company"}),Manager:new l({tag:"Manager"}),HeadingPairs:new i,TitleOfParts:new r}}render(u,m){u.openXml(d.StdDocAttributes),u.openNode("Properties",s.PROPERTY_ATTRIBUTES),u.leafNode("Application",void 0,"Microsoft Excel"),u.leafNode("DocSecurity",void 0,"0"),u.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(u,m.worksheets),this.map.TitleOfParts.render(u,m.worksheets),this.map.Company.render(u,m.company||""),this.map.Manager.render(u,m.manager),u.leafNode("LinksUpToDate",void 0,"false"),u.leafNode("SharedDoc",void 0,"false"),u.leafNode("HyperlinksChanged",void 0,"false"),u.leafNode("AppVersion",void 0,"16.0300"),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"Properties":return!0;default:return this.parser=this.map[u.name],!!this.parser&&(this.parser.parseOpen(u),!0)}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}s.DateFormat=function(c){return c.toISOString().replace(/[.]\d{3,6}/,"")},s.DateAttrs={"xsi:type":"dcterms:W3CDTF"},s.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},f.exports=s},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(t,f,h){const d=t("../../../utils/xml-stream"),n=t("../base-xform");class l extends n{render(r,s){r.openXml(d.StdDocAttributes),r.openNode("Types",l.PROPERTY_ATTRIBUTES);const c={};(s.media||[]).forEach(u=>{if(u.type==="image"){const m=u.extension;c[m]||(c[m]=!0,r.leafNode("Default",{Extension:m,ContentType:"image/"+m}))}}),r.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),r.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),r.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),s.worksheets.forEach(u=>{const m=`/xl/worksheets/sheet${u.id}.xml`;r.leafNode("Override",{PartName:m,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),r.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),r.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),s.sharedStrings&&s.sharedStrings.count&&r.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),s.tables&&s.tables.forEach(u=>{r.leafNode("Override",{PartName:"/xl/tables/"+u.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),s.drawings&&s.drawings.forEach(u=>{r.leafNode("Override",{PartName:`/xl/drawings/${u.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),s.commentRefs&&(r.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),s.commentRefs.forEach(u=>{let{commentName:m}=u;r.leafNode("Override",{PartName:`/xl/${m}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),r.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),r.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),r.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}l.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},f.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(t,f,h){const d=t("../../../utils/xml-stream"),n=t("../base-xform"),l=t("../simple/date-xform"),i=t("../simple/string-xform"),r=t("../simple/integer-xform");class s extends n{constructor(){super(),this.map={"dc:creator":new i({tag:"dc:creator"}),"dc:title":new i({tag:"dc:title"}),"dc:subject":new i({tag:"dc:subject"}),"dc:description":new i({tag:"dc:description"}),"dc:identifier":new i({tag:"dc:identifier"}),"dc:language":new i({tag:"dc:language"}),"cp:keywords":new i({tag:"cp:keywords"}),"cp:category":new i({tag:"cp:category"}),"cp:lastModifiedBy":new i({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new l({tag:"cp:lastPrinted",format:s.DateFormat}),"cp:revision":new r({tag:"cp:revision"}),"cp:version":new i({tag:"cp:version"}),"cp:contentStatus":new i({tag:"cp:contentStatus"}),"cp:contentType":new i({tag:"cp:contentType"}),"dcterms:created":new l({tag:"dcterms:created",attrs:s.DateAttrs,format:s.DateFormat}),"dcterms:modified":new l({tag:"dcterms:modified",attrs:s.DateAttrs,format:s.DateFormat})}}render(u,m){u.openXml(d.StdDocAttributes),u.openNode("cp:coreProperties",s.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(u,m.creator),this.map["dc:title"].render(u,m.title),this.map["dc:subject"].render(u,m.subject),this.map["dc:description"].render(u,m.description),this.map["dc:identifier"].render(u,m.identifier),this.map["dc:language"].render(u,m.language),this.map["cp:keywords"].render(u,m.keywords),this.map["cp:category"].render(u,m.category),this.map["cp:lastModifiedBy"].render(u,m.lastModifiedBy),this.map["cp:lastPrinted"].render(u,m.lastPrinted),this.map["cp:revision"].render(u,m.revision),this.map["cp:version"].render(u,m.version),this.map["cp:contentStatus"].render(u,m.contentStatus),this.map["cp:contentType"].render(u,m.contentType),this.map["dcterms:created"].render(u,m.created),this.map["dcterms:modified"].render(u,m.modified),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[u.name],this.parser)return this.parser.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}s.DateFormat=function(c){return c.toISOString().replace(/[.]\d{3}/,"")},s.DateAttrs={"xsi:type":"dcterms:W3CDTF"},s.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},f.exports=s},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{render(n,l){n.leafNode("Relationship",l)}parseOpen(n){switch(n.name){case"Relationship":return this.model=n.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(t,f,h){const d=t("../../../utils/xml-stream"),n=t("../base-xform"),l=t("./relationship-xform");class i extends n{constructor(){super(),this.map={Relationship:new l}}render(s,c){c=c||this._values,s.openXml(d.StdDocAttributes),s.openNode("Relationships",i.RELATIONSHIPS_ATTRIBUTES),c.forEach(u=>{this.map.Relationship.render(s,u)}),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[s.name],this.parser)return this.parser.parseOpen(s),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(s))}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(s){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+s)}}}i.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},f.exports=i},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.tag:this.reset(),this.model={range:{editAs:n.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[n.name],this.parser&&this.parser.parseOpen(n)}return!0}parseText(n){this.parser&&this.parser.parseText(n)}reconcilePicture(n,l){if(n&&n.rId){const i=l.rels[n.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(i){const r=i[1],s=l.mediaIndex[r];return l.media[s]}}}}},{"../base-xform":32}],57:[function(t,f,h){const d=t("../base-xform"),n=t("./blip-xform");f.exports=class extends d{constructor(){super(),this.map={"a:blip":new n}}get tag(){return"xdr:blipFill"}render(l,i){l.openNode(this.tag),this.map["a:blip"].render(l,i),l.openNode("a:stretch"),l.leafNode("a:fillRect"),l.closeNode(),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"a:blip"}render(n,l){n.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":l.rId,cstate:"print"})}parseOpen(n){switch(n.name){case this.tag:return this.model={rId:n.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(n){switch(n){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"xdr:cNvPicPr"}render(n){n.openNode(this.tag),n.leafNode("a:picLocks",{noChangeAspect:"1"}),n.closeNode()}parseOpen(n){switch(n.name){case this.tag:default:return!0}}parseText(){}parseClose(n){switch(n){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(t,f,h){const d=t("../base-xform"),n=t("./hlink-click-xform"),l=t("./ext-lst-xform");f.exports=class extends d{constructor(){super(),this.map={"a:hlinkClick":new n,"a:extLst":new l}}get tag(){return"xdr:cNvPr"}render(i,r){i.openNode(this.tag,{id:r.index,name:"Picture "+r.index}),this.map["a:hlinkClick"].render(i,r),this.map["a:extLst"].render(i,r),i.closeNode()}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case this.tag:this.reset();break;default:this.parser=this.map[i.name],this.parser&&this.parser.parseOpen(i)}return!0}parseText(){}parseClose(i){if(this.parser)return this.parser.parseClose(i)||(this.parser=void 0),!0;switch(i){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(t,f,h){const d=t("../base-xform"),n=t("../simple/integer-xform");f.exports=class extends d{constructor(l){super(),this.tag=l.tag,this.map={"xdr:col":new n({tag:"xdr:col",zero:!0}),"xdr:colOff":new n({tag:"xdr:colOff",zero:!0}),"xdr:row":new n({tag:"xdr:row",zero:!0}),"xdr:rowOff":new n({tag:"xdr:rowOff",zero:!0})}}render(l,i){l.openNode(this.tag),this.map["xdr:col"].render(l,i.nativeCol),this.map["xdr:colOff"].render(l,i.nativeColOff),this.map["xdr:row"].render(l,i.nativeRow),this.map["xdr:rowOff"].render(l,i.nativeRowOff),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(t,f,h){const d=t("../../../utils/col-cache"),n=t("../../../utils/xml-stream"),l=t("../base-xform"),i=t("./two-cell-anchor-xform"),r=t("./one-cell-anchor-xform");class s extends l{constructor(){super(),this.map={"xdr:twoCellAnchor":new i,"xdr:oneCellAnchor":new r}}prepare(u){u.anchors.forEach((m,x)=>{m.anchorType=(function(b){return(typeof b.range=="string"?d.decode(b.range):b.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"})(m),this.map[m.anchorType].prepare(m,{index:x})})}get tag(){return"xdr:wsDr"}render(u,m){u.openXml(n.StdDocAttributes),u.openNode(this.tag,s.DRAWING_ATTRIBUTES),m.anchors.forEach(x=>{this.map[x.anchorType].render(u,x)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}reconcile(u,m){u.anchors.forEach(x=>{x.br?this.map["xdr:twoCellAnchor"].reconcile(x,m):this.map["xdr:oneCellAnchor"].reconcile(x,m)})}}s.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},f.exports=s},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"a:extLst"}render(n){n.openNode(this.tag),n.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),n.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),n.closeNode(),n.closeNode()}parseOpen(n){switch(n.name){case this.tag:default:return!0}}parseText(){}parseClose(n){switch(n){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{constructor(n){super(),this.tag=n.tag,this.map={}}render(n,l){n.openNode(this.tag);const i=Math.floor(9525*l.width),r=Math.floor(9525*l.height);n.addAttribute("cx",i),n.addAttribute("cy",r),n.closeNode()}parseOpen(n){return n.name===this.tag&&(this.model={width:parseInt(n.attributes.cx||"0",10)/9525,height:parseInt(n.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"a:hlinkClick"}render(n,l){l.hyperlinks&&l.hyperlinks.rId&&n.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":l.hyperlinks.rId,tooltip:l.hyperlinks.tooltip})}parseOpen(n){switch(n.name){case this.tag:return this.model={hyperlinks:{rId:n.attributes["r:id"],tooltip:n.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(t,f,h){const d=t("../base-xform"),n=t("./c-nv-pr-xform"),l=t("./c-nv-pic-pr-xform");f.exports=class extends d{constructor(){super(),this.map={"xdr:cNvPr":new n,"xdr:cNvPicPr":new l}}get tag(){return"xdr:nvPicPr"}render(i,r){i.openNode(this.tag),this.map["xdr:cNvPr"].render(i,r),this.map["xdr:cNvPicPr"].render(i,r),i.closeNode()}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case this.tag:this.reset();break;default:this.parser=this.map[i.name],this.parser&&this.parser.parseOpen(i)}return!0}parseText(){}parseClose(i){if(this.parser)return this.parser.parseClose(i)||(this.parser=void 0),!0;switch(i){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(t,f,h){const d=t("./base-cell-anchor-xform"),n=t("../static-xform"),l=t("./cell-position-xform"),i=t("./ext-xform"),r=t("./pic-xform");f.exports=class extends d{constructor(){super(),this.map={"xdr:from":new l({tag:"xdr:from"}),"xdr:ext":new i({tag:"xdr:ext"}),"xdr:pic":new r,"xdr:clientData":new n({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(s,c){this.map["xdr:pic"].prepare(s.picture,c)}render(s,c){s.openNode(this.tag,{editAs:c.range.editAs||"oneCell"}),this.map["xdr:from"].render(s,c.range.tl),this.map["xdr:ext"].render(s,c.range.ext),this.map["xdr:pic"].render(s,c.picture),this.map["xdr:clientData"].render(s,{}),s.closeNode()}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.parser=void 0),!0;switch(s){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(s,c){s.medium=this.reconcilePicture(s.picture,c)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(t,f,h){const d=t("../base-xform"),n=t("../static-xform"),l=t("./blip-fill-xform"),i=t("./nv-pic-pr-xform"),r=t("./sp-pr");f.exports=class extends d{constructor(){super(),this.map={"xdr:nvPicPr":new i,"xdr:blipFill":new l,"xdr:spPr":new n(r)}}get tag(){return"xdr:pic"}prepare(s,c){s.index=c.index+1}render(s,c){s.openNode(this.tag),this.map["xdr:nvPicPr"].render(s,c),this.map["xdr:blipFill"].render(s,c),this.map["xdr:spPr"].render(s,c),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.tag:this.reset();break;default:this.parser=this.map[s.name],this.parser&&this.parser.parseOpen(s)}return!0}parseText(){}parseClose(s){if(this.parser)return this.parser.parseClose(s)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(s){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(t,f,h){f.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(t,f,h){const d=t("./base-cell-anchor-xform"),n=t("../static-xform"),l=t("./cell-position-xform"),i=t("./pic-xform");f.exports=class extends d{constructor(){super(),this.map={"xdr:from":new l({tag:"xdr:from"}),"xdr:to":new l({tag:"xdr:to"}),"xdr:pic":new i,"xdr:clientData":new n({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(r,s){this.map["xdr:pic"].prepare(r.picture,s)}render(r,s){r.openNode(this.tag,{editAs:s.range.editAs||"oneCell"}),this.map["xdr:from"].render(r,s.range.tl),this.map["xdr:to"].render(r,s.range.br),this.map["xdr:pic"].render(r,s.picture),this.map["xdr:clientData"].render(r,{}),r.closeNode()}parseClose(r){if(this.parser)return this.parser.parseClose(r)||(this.parser=void 0),!0;switch(r){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(r,s){r.medium=this.reconcilePicture(r.picture,s)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(t,f,h){const d=t("./base-xform");f.exports=class extends d{constructor(n){super(),this.tag=n.tag,this.always=!!n.always,this.count=n.count,this.empty=n.empty,this.$count=n.$count||"count",this.$=n.$,this.childXform=n.childXform,this.maxItems=n.maxItems}prepare(n,l){const{childXform:i}=this;n&&n.forEach((r,s)=>{l.index=s,i.prepare(r,l)})}render(n,l){if(this.always||l&&l.length){n.openNode(this.tag,this.$),this.count&&n.addAttribute(this.$count,l&&l.length||0);const{childXform:i}=this;(l||[]).forEach((r,s)=>{i.render(n,r,s)}),n.closeNode()}else this.empty&&n.leafNode(this.tag)}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(n)&&(this.parser=this.childXform,!0)}}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser){if(!this.parser.parseClose(n)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(n,l){if(n){const{childXform:i}=this;n.forEach(r=>{i.reconcile(r,l)})}}}},{"./base-xform":32}],72:[function(t,f,h){const d=t("../../../utils/col-cache"),n=t("../base-xform");f.exports=class extends n{get tag(){return"autoFilter"}render(l,i){if(i)if(typeof i=="string")l.leafNode("autoFilter",{ref:i});else{const r=function(u){return typeof u=="string"?u:d.getAddress(u.row,u.column).address},s=r(i.from),c=r(i.to);s&&c&&l.leafNode("autoFilter",{ref:`${s}:${c}`})}}parseOpen(l){l.name==="autoFilter"&&(this.model=l.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(t,f,h){const d=t("../../../utils/utils"),n=t("../base-xform"),l=t("../../../doc/range"),i=t("../../../doc/enums"),r=t("../strings/rich-text-xform");function s(c){if(c==null)return i.ValueType.Null;if(c instanceof String||typeof c=="string")return i.ValueType.String;if(typeof c=="number")return i.ValueType.Number;if(typeof c=="boolean")return i.ValueType.Boolean;if(c instanceof Date)return i.ValueType.Date;if(c.text&&c.hyperlink)return i.ValueType.Hyperlink;if(c.formula)return i.ValueType.Formula;if(c.error)return i.ValueType.Error;throw new Error("I could not understand type of value")}f.exports=class extends n{constructor(){super(),this.richTextXForm=new r}get tag(){return"c"}prepare(c,u){const m=u.styles.addStyleModel(c.style||{},(function(x){switch(x.type){case i.ValueType.Formula:return s(x.result);default:return x.type}})(c));switch(m&&(c.styleId=m),c.comment&&u.comments.push({...c.comment,ref:c.address}),c.type){case i.ValueType.String:case i.ValueType.RichText:u.sharedStrings&&(c.ssId=u.sharedStrings.add(c.value));break;case i.ValueType.Date:u.date1904&&(c.date1904=!0);break;case i.ValueType.Hyperlink:u.sharedStrings&&c.text!==void 0&&c.text!==null&&(c.ssId=u.sharedStrings.add(c.text)),u.hyperlinks.push({address:c.address,target:c.hyperlink,tooltip:c.tooltip});break;case i.ValueType.Merge:u.merges.add(c);break;case i.ValueType.Formula:if(u.date1904&&(c.date1904=!0),c.shareType==="shared"&&(c.si=u.siFormulae++),c.formula)u.formulae[c.address]=c;else if(c.sharedFormula){const x=u.formulae[c.sharedFormula];if(!x)throw new Error("Shared Formula master must exist above and or left of clone for cell "+c.address);x.si===void 0?(x.shareType="shared",x.si=u.siFormulae++,x.range=new l(x.address,c.address)):x.range&&x.range.expandToAddress(c.address),c.si=x.si}}}renderFormula(c,u){let m=null;switch(u.shareType){case"shared":m={t:"shared",ref:u.ref||u.range.range,si:u.si};break;case"array":m={t:"array",ref:u.ref};break;default:u.si!==void 0&&(m={t:"shared",si:u.si})}switch(s(u.result)){case i.ValueType.Null:c.leafNode("f",m,u.formula);break;case i.ValueType.String:c.addAttribute("t","str"),c.leafNode("f",m,u.formula),c.leafNode("v",null,u.result);break;case i.ValueType.Number:c.leafNode("f",m,u.formula),c.leafNode("v",null,u.result);break;case i.ValueType.Boolean:c.addAttribute("t","b"),c.leafNode("f",m,u.formula),c.leafNode("v",null,u.result?1:0);break;case i.ValueType.Error:c.addAttribute("t","e"),c.leafNode("f",m,u.formula),c.leafNode("v",null,u.result.error);break;case i.ValueType.Date:c.leafNode("f",m,u.formula),c.leafNode("v",null,d.dateToExcel(u.result,u.date1904));break;default:throw new Error("I could not understand type of value")}}render(c,u){if(u.type!==i.ValueType.Null||u.styleId){switch(c.openNode("c"),c.addAttribute("r",u.address),u.styleId&&c.addAttribute("s",u.styleId),u.type){case i.ValueType.Null:break;case i.ValueType.Number:c.leafNode("v",null,u.value);break;case i.ValueType.Boolean:c.addAttribute("t","b"),c.leafNode("v",null,u.value?"1":"0");break;case i.ValueType.Error:c.addAttribute("t","e"),c.leafNode("v",null,u.value.error);break;case i.ValueType.String:case i.ValueType.RichText:u.ssId!==void 0?(c.addAttribute("t","s"),c.leafNode("v",null,u.ssId)):u.value&&u.value.richText?(c.addAttribute("t","inlineStr"),c.openNode("is"),u.value.richText.forEach(m=>{this.richTextXForm.render(c,m)}),c.closeNode("is")):(c.addAttribute("t","str"),c.leafNode("v",null,u.value));break;case i.ValueType.Date:c.leafNode("v",null,d.dateToExcel(u.value,u.date1904));break;case i.ValueType.Hyperlink:u.ssId!==void 0?(c.addAttribute("t","s"),c.leafNode("v",null,u.ssId)):(c.addAttribute("t","str"),c.leafNode("v",null,u.text));break;case i.ValueType.Formula:this.renderFormula(c,u);break;case i.ValueType.Merge:}c.closeNode()}}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"c":return this.model={address:c.attributes.r},this.t=c.attributes.t,c.attributes.s&&(this.model.styleId=parseInt(c.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=c.attributes.si,this.model.shareType=c.attributes.t,this.model.ref=c.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){if(this.parser)this.parser.parseText(c);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+c:c;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+c:c:this.model.value=this.model.value?this.model.value+c:c}}parseClose(c){switch(c){case"c":{const{model:u}=this;if(u.formula||u.shareType)u.type=i.ValueType.Formula,u.value&&(this.t==="str"?u.result=d.xmlDecode(u.value):this.t==="b"?u.result=parseInt(u.value,10)!==0:this.t==="e"?u.result={error:u.value}:u.result=parseFloat(u.value),u.value=void 0);else if(u.value!==void 0)switch(this.t){case"s":u.type=i.ValueType.String,u.value=parseInt(u.value,10);break;case"str":u.type=i.ValueType.String,u.value=d.xmlDecode(u.value);break;case"inlineStr":u.type=i.ValueType.String;break;case"b":u.type=i.ValueType.Boolean,u.value=parseInt(u.value,10)!==0;break;case"e":u.type=i.ValueType.Error,u.value={error:u.value};break;default:u.type=i.ValueType.Number,u.value=parseFloat(u.value)}else u.styleId?u.type=i.ValueType.Null:u.type=i.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(c),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(c),!0)}}reconcile(c,u){const m=c.styleId&&u.styles&&u.styles.getStyleModel(c.styleId);switch(m&&(c.style=m),c.styleId!==void 0&&(c.styleId=void 0),c.type){case i.ValueType.String:typeof c.value=="number"&&u.sharedStrings&&(c.value=u.sharedStrings.getString(c.value)),c.value.richText&&(c.type=i.ValueType.RichText);break;case i.ValueType.Number:m&&d.isDateFmt(m.numFmt)&&(c.type=i.ValueType.Date,c.value=d.excelToDate(c.value,u.date1904));break;case i.ValueType.Formula:c.result!==void 0&&m&&d.isDateFmt(m.numFmt)&&(c.result=d.excelToDate(c.result,u.date1904)),c.shareType==="shared"&&(c.ref?u.formulae[c.si]=c.address:(c.sharedFormula=u.formulae[c.si],delete c.shareType),delete c.si)}const x=u.hyperlinkMap[c.address];x&&(c.type===i.ValueType.Formula?(c.text=c.result,c.result=void 0):(c.text=c.value,c.value=void 0),c.type=i.ValueType.Hyperlink,c.hyperlink=x);const b=u.commentsMap&&u.commentsMap[c.address];b&&(c.comment=b)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(t,f,h){const d=t("../../base-xform");f.exports=class extends d{get tag(){return"x14:cfIcon"}render(n,l){n.leafNode(this.tag,{iconSet:l.iconSet,iconId:l.iconId})}parseOpen(n){let{attributes:l}=n;this.model={iconSet:l.iconSet,iconId:d.toIntValue(l.iconId)}}parseClose(n){return n!==this.tag}}},{"../../base-xform":32}],75:[function(t,f,h){const{v4:d}=t("uuid"),n=t("../../base-xform"),l=t("../../composite-xform"),i=t("./databar-ext-xform"),r=t("./icon-set-ext-xform"),s={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class c extends l{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new i,"x14:iconSet":this.iconSetXform=new r}}get tag(){return"x14:cfRule"}static isExt(m){return m.type==="dataBar"?i.isExt(m):!(m.type!=="iconSet"||!m.custom&&!s[m.iconSet])}prepare(m){c.isExt(m)&&(m.x14Id=`{${d()}}`.toUpperCase())}render(m,x){if(c.isExt(x))switch(x.type){case"dataBar":this.renderDataBar(m,x);break;case"iconSet":this.renderIconSet(m,x)}}renderDataBar(m,x){m.openNode(this.tag,{type:"dataBar",id:x.x14Id}),this.databarXform.render(m,x),m.closeNode()}renderIconSet(m,x){m.openNode(this.tag,{type:"iconSet",priority:x.priority,id:x.x14Id||`{${d()}}`}),this.iconSetXform.render(m,x),m.closeNode()}createNewModel(m){let{attributes:x}=m;return{type:x.type,x14Id:x.id,priority:n.toIntValue(x.priority)}}onParserClose(m,x){Object.assign(this.model,x.model)}}f.exports=c},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(t,f,h){const d=t("../../composite-xform"),n=t("./f-ext-xform");f.exports=class extends d{constructor(){super(),this.map={"xm:f":this.fExtXform=new n}}get tag(){return"x14:cfvo"}render(l,i){l.openNode(this.tag,{type:i.type}),i.value!==void 0&&this.fExtXform.render(l,i.value),l.closeNode()}createNewModel(l){return{type:l.attributes.type}}onParserClose(l,i){switch(l){case"xm:f":this.model.value=i.model?parseFloat(i.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(t,f,h){const d=t("../../composite-xform"),n=t("./sqref-ext-xform"),l=t("./cf-rule-ext-xform");f.exports=class extends d{constructor(){super(),this.map={"xm:sqref":this.sqRef=new n,"x14:cfRule":this.cfRule=new l}}get tag(){return"x14:conditionalFormatting"}prepare(i,r){i.rules.forEach(s=>{this.cfRule.prepare(s,r)})}render(i,r){r.rules.some(l.isExt)&&(i.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),r.rules.filter(l.isExt).forEach(s=>this.cfRule.render(i,s)),this.sqRef.render(i,r.ref),i.closeNode())}createNewModel(){return{rules:[]}}onParserClose(i,r){switch(i){case"xm:sqref":this.model.ref=r.model;break;case"x14:cfRule":this.model.rules.push(r.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(t,f,h){const d=t("../../composite-xform"),n=t("./cf-rule-ext-xform"),l=t("./conditional-formatting-ext-xform");f.exports=class extends d{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new l}}get tag(){return"x14:conditionalFormattings"}hasContent(i){return i.hasExtContent===void 0&&(i.hasExtContent=i.some(r=>r.rules.some(n.isExt))),i.hasExtContent}prepare(i,r){i.forEach(s=>{this.cfXform.prepare(s,r)})}render(i,r){this.hasContent(r)&&(i.openNode(this.tag),r.forEach(s=>this.cfXform.render(i,s)),i.closeNode())}createNewModel(){return[]}onParserClose(i,r){this.model.push(r.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(t,f,h){const d=t("../../base-xform"),n=t("../../composite-xform"),l=t("../../style/color-xform"),i=t("./cfvo-ext-xform");f.exports=class extends n{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new i,"x14:borderColor":this.borderColorXform=new l("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new l("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new l("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new l("x14:axisColor")}}static isExt(r){return!r.gradient}get tag(){return"x14:dataBar"}render(r,s){r.openNode(this.tag,{minLength:d.toIntAttribute(s.minLength,0,!0),maxLength:d.toIntAttribute(s.maxLength,100,!0),border:d.toBoolAttribute(s.border,!1),gradient:d.toBoolAttribute(s.gradient,!0),negativeBarColorSameAsPositive:d.toBoolAttribute(s.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:d.toBoolAttribute(s.negativeBarBorderColorSameAsPositive,!0),axisPosition:d.toAttribute(s.axisPosition,"auto"),direction:d.toAttribute(s.direction,"leftToRight")}),s.cfvo.forEach(c=>{this.cfvoXform.render(r,c)}),this.borderColorXform.render(r,s.borderColor),this.negativeBorderColorXform.render(r,s.negativeBorderColor),this.negativeFillColorXform.render(r,s.negativeFillColor),this.axisColorXform.render(r,s.axisColor),r.closeNode()}createNewModel(r){let{attributes:s}=r;return{cfvo:[],minLength:d.toIntValue(s.minLength,0),maxLength:d.toIntValue(s.maxLength,100),border:d.toBoolValue(s.border,!1),gradient:d.toBoolValue(s.gradient,!0),negativeBarColorSameAsPositive:d.toBoolValue(s.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:d.toBoolValue(s.negativeBarBorderColorSameAsPositive,!0),axisPosition:d.toStringValue(s.axisPosition,"auto"),direction:d.toStringValue(s.direction,"leftToRight")}}onParserClose(r,s){const[,c]=r.split(":");switch(c){case"cfvo":this.model.cfvo.push(s.model);break;default:this.model[c]=s.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(t,f,h){const d=t("../../base-xform");f.exports=class extends d{get tag(){return"xm:f"}render(n,l){n.leafNode(this.tag,null,l)}parseOpen(){this.model=""}parseText(n){this.model+=n}parseClose(n){return n!==this.tag}}},{"../../base-xform":32}],81:[function(t,f,h){const d=t("../../base-xform"),n=t("../../composite-xform"),l=t("./cfvo-ext-xform"),i=t("./cf-icon-ext-xform");f.exports=class extends n{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new l,"x14:cfIcon":this.cfIconXform=new i}}get tag(){return"x14:iconSet"}render(r,s){r.openNode(this.tag,{iconSet:d.toStringAttribute(s.iconSet),reverse:d.toBoolAttribute(s.reverse,!1),showValue:d.toBoolAttribute(s.showValue,!0),custom:d.toBoolAttribute(s.icons,!1)}),s.cfvo.forEach(c=>{this.cfvoXform.render(r,c)}),s.icons&&s.icons.forEach((c,u)=>{c.iconId=u,this.cfIconXform.render(r,c)}),r.closeNode()}createNewModel(r){let{attributes:s}=r;return{cfvo:[],iconSet:d.toStringValue(s.iconSet,"3TrafficLights"),reverse:d.toBoolValue(s.reverse,!1),showValue:d.toBoolValue(s.showValue,!0)}}onParserClose(r,s){const[,c]=r.split(":");switch(c){case"cfvo":this.model.cfvo.push(s.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(s.model);break;default:this.model[c]=s.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(t,f,h){const d=t("../../base-xform");f.exports=class extends d{get tag(){return"xm:sqref"}render(n,l){n.leafNode(this.tag,null,l)}parseOpen(){this.model=""}parseText(n){this.model+=n}parseClose(n){return n!==this.tag}}},{"../../base-xform":32}],83:[function(t,f,h){const d=t("../../base-xform"),n=t("../../composite-xform"),l=t("../../../../doc/range"),i=t("./databar-xform"),r=t("./ext-lst-ref-xform"),s=t("./formula-xform"),c=t("./color-scale-xform"),u=t("./icon-set-xform"),m={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},x=p=>{const{type:v,operator:y}=p;switch(v){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:v};default:return{type:v,operator:y}}};class b extends n{constructor(){super(),this.map={dataBar:this.databarXform=new i,extLst:this.extLstRefXform=new r,formula:this.formulaXform=new s,colorScale:this.colorScaleXform=new c,iconSet:this.iconSetXform=new u}}get tag(){return"cfRule"}static isPrimitive(v){return v.type!=="iconSet"||!v.custom&&!m[v.iconSet]}render(v,y){switch(y.type){case"expression":this.renderExpression(v,y);break;case"cellIs":this.renderCellIs(v,y);break;case"top10":this.renderTop10(v,y);break;case"aboveAverage":this.renderAboveAverage(v,y);break;case"dataBar":this.renderDataBar(v,y);break;case"colorScale":this.renderColorScale(v,y);break;case"iconSet":this.renderIconSet(v,y);break;case"containsText":this.renderText(v,y);break;case"timePeriod":this.renderTimePeriod(v,y)}}renderExpression(v,y){v.openNode(this.tag,{type:"expression",dxfId:y.dxfId,priority:y.priority}),this.formulaXform.render(v,y.formulae[0]),v.closeNode()}renderCellIs(v,y){v.openNode(this.tag,{type:"cellIs",dxfId:y.dxfId,priority:y.priority,operator:y.operator}),y.formulae.forEach(N=>{this.formulaXform.render(v,N)}),v.closeNode()}renderTop10(v,y){v.leafNode(this.tag,{type:"top10",dxfId:y.dxfId,priority:y.priority,percent:d.toBoolAttribute(y.percent,!1),bottom:d.toBoolAttribute(y.bottom,!1),rank:d.toIntValue(y.rank,10,!0)})}renderAboveAverage(v,y){v.leafNode(this.tag,{type:"aboveAverage",dxfId:y.dxfId,priority:y.priority,aboveAverage:d.toBoolAttribute(y.aboveAverage,!0)})}renderDataBar(v,y){v.openNode(this.tag,{type:"dataBar",priority:y.priority}),this.databarXform.render(v,y),this.extLstRefXform.render(v,y),v.closeNode()}renderColorScale(v,y){v.openNode(this.tag,{type:"colorScale",priority:y.priority}),this.colorScaleXform.render(v,y),v.closeNode()}renderIconSet(v,y){b.isPrimitive(y)&&(v.openNode(this.tag,{type:"iconSet",priority:y.priority}),this.iconSetXform.render(v,y),v.closeNode())}renderText(v,y){v.openNode(this.tag,{type:y.operator,dxfId:y.dxfId,priority:y.priority,operator:d.toStringAttribute(y.operator,"containsText")});const N=(T=>{if(T.formulae&&T.formulae[0])return T.formulae[0];const _=new l(T.ref),{tl:O}=_;switch(T.operator){case"containsText":return`NOT(ISERROR(SEARCH("${T.text}",${O})))`;case"containsBlanks":return`LEN(TRIM(${O}))=0`;case"notContainsBlanks":return`LEN(TRIM(${O}))>0`;case"containsErrors":return`ISERROR(${O})`;case"notContainsErrors":return`NOT(ISERROR(${O}))`;default:return}})(y);N&&this.formulaXform.render(v,N),v.closeNode()}renderTimePeriod(v,y){v.openNode(this.tag,{type:"timePeriod",dxfId:y.dxfId,priority:y.priority,timePeriod:y.timePeriod});const N=(T=>{if(T.formulae&&T.formulae[0])return T.formulae[0];const _=new l(T.ref),{tl:O}=_;switch(T.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${O},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${O},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${O},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${O},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${O},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${O},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${O},1)=TODAY()-1`;case"today":return`FLOOR(${O},1)=TODAY()`;case"tomorrow":return`FLOOR(${O},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${O},1)<=6,FLOOR(${O},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${O})=MONTH(EDATE(TODAY(),0-1)),YEAR(${O})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${O})=MONTH(TODAY()),YEAR(${O})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${O})=MONTH(EDATE(TODAY(),0+1)),YEAR(${O})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(y);N&&this.formulaXform.render(v,N),v.closeNode()}createNewModel(v){let{attributes:y}=v;return{...x(y),dxfId:d.toIntValue(y.dxfId),priority:d.toIntValue(y.priority),timePeriod:y.timePeriod,percent:d.toBoolValue(y.percent),bottom:d.toBoolValue(y.bottom),rank:d.toIntValue(y.rank),aboveAverage:d.toBoolValue(y.aboveAverage)}}onParserClose(v,y){switch(v){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,y.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(y.model)}}}f.exports=b},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(t,f,h){const d=t("../../base-xform");f.exports=class extends d{get tag(){return"cfvo"}render(n,l){n.leafNode(this.tag,{type:l.type,val:l.value})}parseOpen(n){this.model={type:n.attributes.type,value:d.toFloatValue(n.attributes.val)}}parseClose(n){return n!==this.tag}}},{"../../base-xform":32}],85:[function(t,f,h){const d=t("../../composite-xform"),n=t("../../style/color-xform"),l=t("./cfvo-xform");f.exports=class extends d{constructor(){super(),this.map={cfvo:this.cfvoXform=new l,color:this.colorXform=new n}}get tag(){return"colorScale"}render(i,r){i.openNode(this.tag),r.cfvo.forEach(s=>{this.cfvoXform.render(i,s)}),r.color.forEach(s=>{this.colorXform.render(i,s)}),i.closeNode()}createNewModel(i){return{cfvo:[],color:[]}}onParserClose(i,r){this.model[i].push(r.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(t,f,h){const d=t("../../composite-xform"),n=t("./cf-rule-xform");f.exports=class extends d{constructor(){super(),this.map={cfRule:new n}}get tag(){return"conditionalFormatting"}render(l,i){i.rules.some(n.isPrimitive)&&(l.openNode(this.tag,{sqref:i.ref}),i.rules.forEach(r=>{n.isPrimitive(r)&&(r.ref=i.ref,this.map.cfRule.render(l,r))}),l.closeNode())}createNewModel(l){let{attributes:i}=l;return{ref:i.sqref,rules:[]}}onParserClose(l,i){this.model.rules.push(i.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(t,f,h){const d=t("../../base-xform"),n=t("./conditional-formatting-xform");f.exports=class extends d{constructor(){super(),this.cfXform=new n}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(l,i){let r=l.reduce((s,c)=>Math.max(s,...c.rules.map(u=>u.priority||0)),1);l.forEach(s=>{s.rules.forEach(c=>{c.priority||(c.priority=r++),c.style&&(c.dxfId=i.styles.addDxfStyle(c.style))})})}render(l,i){i.forEach(r=>{this.cfXform.render(l,r)})}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return!!this.parser&&(!!this.parser.parseClose(l)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(l,i){l.forEach(r=>{r.rules.forEach(s=>{s.dxfId!==void 0&&(s.style=i.styles.getDxfStyle(s.dxfId),delete s.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(t,f,h){const d=t("../../composite-xform"),n=t("../../style/color-xform"),l=t("./cfvo-xform");f.exports=class extends d{constructor(){super(),this.map={cfvo:this.cfvoXform=new l,color:this.colorXform=new n}}get tag(){return"dataBar"}render(i,r){i.openNode(this.tag),r.cfvo.forEach(s=>{this.cfvoXform.render(i,s)}),this.colorXform.render(i,r.color),i.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(i,r){switch(i){case"cfvo":this.model.cfvo.push(r.model);break;case"color":this.model.color=r.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(t,f,h){const d=t("../../base-xform"),n=t("../../composite-xform");class l extends d{get tag(){return"x14:id"}render(s,c){s.leafNode(this.tag,null,c)}parseOpen(){this.model=""}parseText(s){this.model+=s}parseClose(s){return s!==this.tag}}class i extends n{constructor(){super(),this.map={"x14:id":this.idXform=new l}}get tag(){return"ext"}render(s,c){s.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(s,c.x14Id),s.closeNode()}createNewModel(){return{}}onParserClose(s,c){this.model.x14Id=c.model}}f.exports=class extends n{constructor(){super(),this.map={ext:new i}}get tag(){return"extLst"}render(r,s){r.openNode(this.tag),this.map.ext.render(r,s),r.closeNode()}createNewModel(){return{}}onParserClose(r,s){Object.assign(this.model,s.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(t,f,h){const d=t("../../base-xform");f.exports=class extends d{get tag(){return"formula"}render(n,l){n.leafNode(this.tag,null,l)}parseOpen(){this.model=""}parseText(n){this.model+=n}parseClose(n){return n!==this.tag}}},{"../../base-xform":32}],91:[function(t,f,h){const d=t("../../base-xform"),n=t("../../composite-xform"),l=t("./cfvo-xform");f.exports=class extends n{constructor(){super(),this.map={cfvo:this.cfvoXform=new l}}get tag(){return"iconSet"}render(i,r){i.openNode(this.tag,{iconSet:d.toStringAttribute(r.iconSet,"3TrafficLights"),reverse:d.toBoolAttribute(r.reverse,!1),showValue:d.toBoolAttribute(r.showValue,!0)}),r.cfvo.forEach(s=>{this.cfvoXform.render(i,s)}),i.closeNode()}createNewModel(i){let{attributes:r}=i;return{iconSet:d.toStringValue(r.iconSet,"3TrafficLights"),reverse:d.toBoolValue(r.reverse),showValue:d.toBoolValue(r.showValue),cfvo:[]}}onParserClose(i,r){this.model[i].push(r.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(t,f,h){const d=t("../../../utils/utils"),n=t("../base-xform");f.exports=class extends n{get tag(){return"col"}prepare(l,i){const r=i.styles.addStyleModel(l.style||{});r&&(l.styleId=r)}render(l,i){l.openNode("col"),l.addAttribute("min",i.min),l.addAttribute("max",i.max),i.width&&l.addAttribute("width",i.width),i.styleId&&l.addAttribute("style",i.styleId),i.hidden&&l.addAttribute("hidden","1"),i.bestFit&&l.addAttribute("bestFit","1"),i.outlineLevel&&l.addAttribute("outlineLevel",i.outlineLevel),i.collapsed&&l.addAttribute("collapsed","1"),l.addAttribute("customWidth","1"),l.closeNode()}parseOpen(l){if(l.name==="col"){const i=this.model={min:parseInt(l.attributes.min||"0",10),max:parseInt(l.attributes.max||"0",10),width:l.attributes.width===void 0?void 0:parseFloat(l.attributes.width||"0")};return l.attributes.style&&(i.styleId=parseInt(l.attributes.style,10)),d.parseBoolean(l.attributes.hidden)&&(i.hidden=!0),d.parseBoolean(l.attributes.bestFit)&&(i.bestFit=!0),l.attributes.outlineLevel&&(i.outlineLevel=parseInt(l.attributes.outlineLevel,10)),d.parseBoolean(l.attributes.collapsed)&&(i.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(l,i){l.styleId&&(l.style=i.styles.getStyleModel(l.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../../../utils/utils"),l=t("../../../utils/col-cache"),i=t("../base-xform"),r=t("../../../doc/range");function s(u,m,x,b){const p=m[x];p!==void 0?u[x]=p:b!==void 0&&(u[x]=b)}function c(u,m,x,b){const p=m[x];p!==void 0&&(u[x]=n.parseBoolean(p))}f.exports=class extends i{get tag(){return"dataValidations"}render(u,m){const x=(function(b){const p=d.map(b,(N,T)=>({address:T,dataValidation:N,marked:!1})).sort((N,T)=>d.strcmp(N.address,T.address)),v=d.keyBy(p,"address"),y=(N,T,_)=>{for(let O=0;O<T;O++){const H=l.encodeAddress(N.row+O,_);if(!b[H]||!d.isEqual(b[N.address],b[H]))return!1}return!0};return p.map(N=>{if(!N.marked){const T=l.decodeEx(N.address);if(T.dimensions)return v[T.dimensions].marked=!0,{...N.dataValidation,sqref:N.address};let _=1,O=l.encodeAddress(T.row+_,T.col);for(;b[O]&&d.isEqual(N.dataValidation,b[O]);)_++,O=l.encodeAddress(T.row+_,T.col);let H=1;for(;y(T,_,T.col+H);)H++;for(let F=0;F<_;F++)for(let V=0;V<H;V++)O=l.encodeAddress(T.row+F,T.col+V),v[O].marked=!0;if(_>1||H>1){const F=T.row+(_-1),V=T.col+(H-1);return{...N.dataValidation,sqref:`${N.address}:${l.encodeAddress(F,V)}`}}return{...N.dataValidation,sqref:N.address}}return null}).filter(Boolean)})(m);x.length&&(u.openNode("dataValidations",{count:x.length}),x.forEach(b=>{u.openNode("dataValidation"),b.type!=="any"&&(u.addAttribute("type",b.type),b.operator&&b.type!=="list"&&b.operator!=="between"&&u.addAttribute("operator",b.operator),b.allowBlank&&u.addAttribute("allowBlank","1")),b.showInputMessage&&u.addAttribute("showInputMessage","1"),b.promptTitle&&u.addAttribute("promptTitle",b.promptTitle),b.prompt&&u.addAttribute("prompt",b.prompt),b.showErrorMessage&&u.addAttribute("showErrorMessage","1"),b.errorStyle&&u.addAttribute("errorStyle",b.errorStyle),b.errorTitle&&u.addAttribute("errorTitle",b.errorTitle),b.error&&u.addAttribute("error",b.error),u.addAttribute("sqref",b.sqref),(b.formulae||[]).forEach((p,v)=>{u.openNode("formula"+(v+1)),b.type==="date"?u.writeText(n.dateToExcel(new Date(p))):u.writeText(p),u.closeNode()}),u.closeNode()}),u.closeNode())}parseOpen(u){switch(u.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=u.attributes.sqref;const m={type:u.attributes.type||"any",formulae:[]};switch(u.attributes.type&&c(m,u.attributes,"allowBlank"),c(m,u.attributes,"showInputMessage"),c(m,u.attributes,"showErrorMessage"),m.type){case"any":case"list":case"custom":break;default:s(m,u.attributes,"operator","between")}return s(m,u.attributes,"promptTitle"),s(m,u.attributes,"prompt"),s(m,u.attributes,"errorStyle"),s(m,u.attributes,"errorTitle"),s(m,u.attributes,"error"),this._dataValidation=m,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(u){this._formula&&this._formula.push(u)}parseClose(u){switch(u){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(m=>{m.includes(":")?new r(m).forEachAddress(x=>{this.model[x]=this._dataValidation}):this.model[m]=this._dataValidation}),!0;case"formula1":case"formula2":{let m=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":m=parseInt(m,10);break;case"decimal":m=parseFloat(m);break;case"date":m=n.excelToDate(parseFloat(m))}return this._dataValidation.formulae.push(m),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"dimension"}render(n,l){l&&n.leafNode("dimension",{ref:l})}parseOpen(n){return n.name==="dimension"&&(this.model=n.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"drawing"}render(n,l){l&&n.leafNode(this.tag,{"r:id":l.rId})}parseOpen(n){switch(n.name){case this.tag:return this.model={rId:n.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(t,f,h){const d=t("../composite-xform"),n=t("./cf-ext/conditional-formattings-ext-xform");class l extends d{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new n}}get tag(){return"ext"}hasContent(r){return this.conditionalFormattings.hasContent(r.conditionalFormattings)}prepare(r,s){this.conditionalFormattings.prepare(r.conditionalFormattings,s)}render(r,s){r.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(r,s.conditionalFormattings),r.closeNode()}createNewModel(){return{}}onParserClose(r,s){this.model[r]=s.model}}f.exports=class extends d{constructor(){super(),this.map={ext:this.ext=new l}}get tag(){return"extLst"}prepare(i,r){this.ext.prepare(i,r)}hasContent(i){return this.ext.hasContent(i)}render(i,r){this.hasContent(r)&&(i.openNode("extLst"),this.ext.render(i,r),i.closeNode())}createNewModel(){return{}}onParserClose(i,r){Object.assign(this.model,r.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"headerFooter"}render(n,l){if(l){n.addRollback();let i=!1;n.openNode("headerFooter"),l.differentFirst&&(n.addAttribute("differentFirst","1"),i=!0),l.differentOddEven&&(n.addAttribute("differentOddEven","1"),i=!0),l.oddHeader&&typeof l.oddHeader=="string"&&(n.leafNode("oddHeader",null,l.oddHeader),i=!0),l.oddFooter&&typeof l.oddFooter=="string"&&(n.leafNode("oddFooter",null,l.oddFooter),i=!0),l.evenHeader&&typeof l.evenHeader=="string"&&(n.leafNode("evenHeader",null,l.evenHeader),i=!0),l.evenFooter&&typeof l.evenFooter=="string"&&(n.leafNode("evenFooter",null,l.evenFooter),i=!0),l.firstHeader&&typeof l.firstHeader=="string"&&(n.leafNode("firstHeader",null,l.firstHeader),i=!0),l.firstFooter&&typeof l.firstFooter=="string"&&(n.leafNode("firstFooter",null,l.firstFooter),i=!0),i?(n.closeNode(),n.commit()):n.rollback()}}parseOpen(n){switch(n.name){case"headerFooter":return this.model={},n.attributes.differentFirst&&(this.model.differentFirst=parseInt(n.attributes.differentFirst,0)===1),n.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(n.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(n){switch(this.currentNode){case"oddHeader":this.model.oddHeader=n;break;case"oddFooter":this.model.oddFooter=n;break;case"evenHeader":this.model.evenHeader=n;break;case"evenFooter":this.model.evenFooter=n;break;case"firstHeader":this.model.firstHeader=n;break;case"firstFooter":this.model.firstFooter=n}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"hyperlink"}render(n,l){this.isInternalLink(l)?n.leafNode("hyperlink",{ref:l.address,"r:id":l.rId,tooltip:l.tooltip,location:l.target}):n.leafNode("hyperlink",{ref:l.address,"r:id":l.rId,tooltip:l.tooltip})}parseOpen(n){return n.name==="hyperlink"&&(this.model={address:n.attributes.ref,rId:n.attributes["r:id"],tooltip:n.attributes.tooltip},n.attributes.location&&(this.model.target=n.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(n){return n.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(n.target)}}},{"../base-xform":32}],99:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"mergeCell"}render(n,l){n.leafNode("mergeCell",{ref:l})}parseOpen(n){return n.name==="mergeCell"&&(this.model=n.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../../../doc/range"),l=t("../../../utils/col-cache"),i=t("../../../doc/enums");f.exports=class{constructor(){this.merges={}}add(r){if(this.merges[r.master])this.merges[r.master].expandToAddress(r.address);else{const s=`${r.master}:${r.address}`;this.merges[r.master]=new n(s)}}get mergeCells(){return d.map(this.merges,r=>r.range)}reconcile(r,s){d.each(r,c=>{const u=l.decode(c);for(let m=u.top;m<=u.bottom;m++){const x=s[m-1];for(let b=u.left;b<=u.right;b++){const p=x.cells[b-1];p?p.type===i.ValueType.Merge&&(p.master=u.tl):x.cells[b]={type:i.ValueType.Null,address:l.encodeAddress(m,b)}}}})}getMasterAddress(r){const s=this.hash[r];return s&&s.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(t,f,h){const d=t("../base-xform"),n=l=>l!==void 0;f.exports=class extends d{get tag(){return"outlinePr"}render(l,i){return!(!i||!n(i.summaryBelow)&&!n(i.summaryRight))&&(l.leafNode(this.tag,{summaryBelow:n(i.summaryBelow)?Number(i.summaryBelow):void 0,summaryRight:n(i.summaryRight)?Number(i.summaryRight):void 0}),!0)}parseOpen(l){return l.name===this.tag&&(this.model={summaryBelow:n(l.attributes.summaryBelow)?!!Number(l.attributes.summaryBelow):void 0,summaryRight:n(l.attributes.summaryRight)?!!Number(l.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"brk"}render(n,l){n.leafNode("brk",l)}parseOpen(n){return n.name==="brk"&&(this.model=n.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../base-xform");f.exports=class extends n{get tag(){return"pageMargins"}render(l,i){if(i){const r={left:i.left,right:i.right,top:i.top,bottom:i.bottom,header:i.header,footer:i.footer};d.some(r,s=>s!==void 0)&&l.leafNode(this.tag,r)}}parseOpen(l){switch(l.name){case this.tag:return this.model={left:parseFloat(l.attributes.left||.7),right:parseFloat(l.attributes.right||.7),top:parseFloat(l.attributes.top||.75),bottom:parseFloat(l.attributes.bottom||.75),header:parseFloat(l.attributes.header||.3),footer:parseFloat(l.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"pageSetUpPr"}render(n,l){return!(!l||!l.fitToPage)&&(n.leafNode(this.tag,{fitToPage:l.fitToPage?"1":void 0}),!0)}parseOpen(n){return n.name===this.tag&&(this.model={fitToPage:n.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../base-xform");function l(c){return c?"1":void 0}function i(c){switch(c){case"overThenDown":return c;default:return}}function r(c){switch(c){case"atEnd":case"asDisplyed":return c;default:return}}function s(c){switch(c){case"dash":case"blank":case"NA":return c;default:return}}f.exports=class extends n{get tag(){return"pageSetup"}render(c,u){if(u){const m={paperSize:u.paperSize,orientation:u.orientation,horizontalDpi:u.horizontalDpi,verticalDpi:u.verticalDpi,pageOrder:i(u.pageOrder),blackAndWhite:l(u.blackAndWhite),draft:l(u.draft),cellComments:r(u.cellComments),errors:s(u.errors),scale:u.scale,fitToWidth:u.fitToWidth,fitToHeight:u.fitToHeight,firstPageNumber:u.firstPageNumber,useFirstPageNumber:l(u.firstPageNumber),usePrinterDefaults:l(u.usePrinterDefaults),copies:u.copies};d.some(m,x=>x!==void 0)&&c.leafNode(this.tag,m)}}parseOpen(c){switch(c.name){case this.tag:return this.model={paperSize:(u=c.attributes.paperSize,u!==void 0?parseInt(u,10):void 0),orientation:c.attributes.orientation||"portrait",horizontalDpi:parseInt(c.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(c.attributes.verticalDpi||"4294967295",10),pageOrder:c.attributes.pageOrder||"downThenOver",blackAndWhite:c.attributes.blackAndWhite==="1",draft:c.attributes.draft==="1",cellComments:c.attributes.cellComments||"None",errors:c.attributes.errors||"displayed",scale:parseInt(c.attributes.scale||"100",10),fitToWidth:parseInt(c.attributes.fitToWidth||"1",10),fitToHeight:parseInt(c.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(c.attributes.firstPageNumber||"1",10),useFirstPageNumber:c.attributes.useFirstPageNumber==="1",usePrinterDefaults:c.attributes.usePrinterDefaults==="1",copies:parseInt(c.attributes.copies||"1",10)},!0;default:return!1}var u}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"picture"}render(n,l){l&&n.leafNode(this.tag,{"r:id":l.rId})}parseOpen(n){switch(n.name){case this.tag:return this.model={rId:n.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../base-xform");function l(i){return i?"1":void 0}f.exports=class extends n{get tag(){return"printOptions"}render(i,r){if(r){const s={headings:l(r.showRowColHeaders),gridLines:l(r.showGridLines),horizontalCentered:l(r.horizontalCentered),verticalCentered:l(r.verticalCentered)};d.some(s,c=>c!==void 0)&&i.leafNode(this.tag,s)}}parseOpen(i){switch(i.name){case this.tag:return this.model={showRowColHeaders:i.attributes.headings==="1",showGridLines:i.attributes.gridLines==="1",horizontalCentered:i.attributes.horizontalCentered==="1",verticalCentered:i.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(t,f,h){const d=t("./page-breaks-xform"),n=t("../list-xform");f.exports=class extends n{constructor(){super({tag:"rowBreaks",count:!0,childXform:new d})}render(l,i){if(i&&i.length){l.openNode(this.tag,this.$),this.count&&(l.addAttribute(this.$count,i.length),l.addAttribute("manualBreakCount",i.length));const{childXform:r}=this;i.forEach(s=>{r.render(l,s)}),l.closeNode()}else this.empty&&l.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(t,f,h){const d=t("../base-xform"),n=t("../../../utils/utils"),l=t("./cell-xform");f.exports=class extends d{constructor(i){super(),this.maxItems=i&&i.maxItems,this.map={c:new l}}get tag(){return"row"}prepare(i,r){const s=r.styles.addStyleModel(i.style);s&&(i.styleId=s);const c=this.map.c;i.cells.forEach(u=>{c.prepare(u,r)})}render(i,r,s){i.openNode("row"),i.addAttribute("r",r.number),r.height&&(i.addAttribute("ht",r.height),i.addAttribute("customHeight","1")),r.hidden&&i.addAttribute("hidden","1"),r.min>0&&r.max>0&&r.min<=r.max&&i.addAttribute("spans",`${r.min}:${r.max}`),r.styleId&&(i.addAttribute("s",r.styleId),i.addAttribute("customFormat","1")),i.addAttribute("x14ac:dyDescent","0.25"),r.outlineLevel&&i.addAttribute("outlineLevel",r.outlineLevel),r.collapsed&&i.addAttribute("collapsed","1");const c=this.map.c;r.cells.forEach(u=>{c.render(i,u,s)}),i.closeNode()}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;if(i.name==="row"){this.numRowsSeen+=1;const r=i.attributes.spans?i.attributes.spans.split(":").map(c=>parseInt(c,10)):[void 0,void 0],s=this.model={number:parseInt(i.attributes.r,10),min:r[0],max:r[1],cells:[]};return i.attributes.s&&(s.styleId=parseInt(i.attributes.s,10)),n.parseBoolean(i.attributes.hidden)&&(s.hidden=!0),n.parseBoolean(i.attributes.bestFit)&&(s.bestFit=!0),i.attributes.ht&&(s.height=parseFloat(i.attributes.ht)),i.attributes.outlineLevel&&(s.outlineLevel=parseInt(i.attributes.outlineLevel,10)),n.parseBoolean(i.attributes.collapsed)&&(s.collapsed=!0),!0}return this.parser=this.map[i.name],!!this.parser&&(this.parser.parseOpen(i),!0)}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){if(this.parser){if(!this.parser.parseClose(i)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(i,r){i.style=i.styleId?r.styles.getStyleModel(i.styleId):{},i.styleId!==void 0&&(i.styleId=void 0);const s=this.map.c;i.cells.forEach(c=>{s.reconcile(c,r)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../base-xform");f.exports=class extends n{get tag(){return"sheetFormatPr"}render(l,i){if(i){const r={defaultRowHeight:i.defaultRowHeight,outlineLevelRow:i.outlineLevelRow,outlineLevelCol:i.outlineLevelCol,"x14ac:dyDescent":i.dyDescent};i.defaultColWidth&&(r.defaultColWidth=i.defaultColWidth),i.defaultRowHeight&&i.defaultRowHeight===15||(r.customHeight="1"),d.some(r,s=>s!==void 0)&&l.leafNode("sheetFormatPr",r)}}parseOpen(l){return l.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(l.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(l.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(l.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(l.attributes.outlineLevelCol||"0",10)},l.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(l.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(t,f,h){const d=t("../base-xform"),n=t("../style/color-xform"),l=t("./page-setup-properties-xform"),i=t("./outline-properties-xform");f.exports=class extends d{constructor(){super(),this.map={tabColor:new n("tabColor"),pageSetUpPr:new l,outlinePr:new i}}get tag(){return"sheetPr"}render(r,s){if(s){r.addRollback(),r.openNode("sheetPr");let c=!1;c=this.map.tabColor.render(r,s.tabColor)||c,c=this.map.pageSetUpPr.render(r,s.pageSetup)||c,c=this.map.outlinePr.render(r,s.outlineProperties)||c,c?(r.closeNode(),r.commit()):r.rollback()}}parseOpen(r){return this.parser?(this.parser.parseOpen(r),!0):r.name===this.tag?(this.reset(),!0):!!this.map[r.name]&&(this.parser=this.map[r.name],this.parser.parseOpen(r),!0)}parseText(r){return!!this.parser&&(this.parser.parseText(r),!0)}parseClose(r){return this.parser?(this.parser.parseClose(r)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../base-xform");function l(r,s){return r?s:void 0}function i(r,s){return r===s||void 0}f.exports=class extends n{get tag(){return"sheetProtection"}render(r,s){if(s){const c={sheet:l(s.sheet,"1"),selectLockedCells:s.selectLockedCells===!1?"1":void 0,selectUnlockedCells:s.selectUnlockedCells===!1?"1":void 0,formatCells:l(s.formatCells,"0"),formatColumns:l(s.formatColumns,"0"),formatRows:l(s.formatRows,"0"),insertColumns:l(s.insertColumns,"0"),insertRows:l(s.insertRows,"0"),insertHyperlinks:l(s.insertHyperlinks,"0"),deleteColumns:l(s.deleteColumns,"0"),deleteRows:l(s.deleteRows,"0"),sort:l(s.sort,"0"),autoFilter:l(s.autoFilter,"0"),pivotTables:l(s.pivotTables,"0")};s.sheet&&(c.algorithmName=s.algorithmName,c.hashValue=s.hashValue,c.saltValue=s.saltValue,c.spinCount=s.spinCount,c.objects=l(s.objects===!1,"1"),c.scenarios=l(s.scenarios===!1,"1")),d.some(c,u=>u!==void 0)&&r.leafNode(this.tag,c)}}parseOpen(r){switch(r.name){case this.tag:return this.model={sheet:i(r.attributes.sheet,"1"),objects:r.attributes.objects!=="1"&&void 0,scenarios:r.attributes.scenarios!=="1"&&void 0,selectLockedCells:r.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:r.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:i(r.attributes.formatCells,"0"),formatColumns:i(r.attributes.formatColumns,"0"),formatRows:i(r.attributes.formatRows,"0"),insertColumns:i(r.attributes.insertColumns,"0"),insertRows:i(r.attributes.insertRows,"0"),insertHyperlinks:i(r.attributes.insertHyperlinks,"0"),deleteColumns:i(r.attributes.deleteColumns,"0"),deleteRows:i(r.attributes.deleteRows,"0"),sort:i(r.attributes.sort,"0"),autoFilter:i(r.attributes.autoFilter,"0"),pivotTables:i(r.attributes.pivotTables,"0")},r.attributes.algorithmName&&(this.model.algorithmName=r.attributes.algorithmName,this.model.hashValue=r.attributes.hashValue,this.model.saltValue=r.attributes.saltValue,this.model.spinCount=parseInt(r.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(t,f,h){const d=t("../../../utils/col-cache"),n=t("../base-xform"),l={frozen:"frozen",frozenSplit:"frozen",split:"split"};f.exports=class extends n{get tag(){return"sheetView"}prepare(i){switch(i.state){case"frozen":case"split":break;default:i.state="normal"}}render(i,r){i.openNode("sheetView",{workbookViewId:r.workbookViewId||0});const s=function(b,p,v){v&&i.addAttribute(b,p)};let c,u,m,x;switch(s("rightToLeft","1",r.rightToLeft===!0),s("tabSelected","1",r.tabSelected),s("showRuler","0",r.showRuler===!1),s("showRowColHeaders","0",r.showRowColHeaders===!1),s("showGridLines","0",r.showGridLines===!1),s("zoomScale",r.zoomScale,r.zoomScale),s("zoomScaleNormal",r.zoomScaleNormal,r.zoomScaleNormal),s("view",r.style,r.style),r.state){case"frozen":u=r.xSplit||0,m=r.ySplit||0,c=r.topLeftCell||d.getAddress(m+1,u+1).address,x=(r.xSplit&&r.ySplit?"bottomRight":r.xSplit&&"topRight")||"bottomLeft",i.leafNode("pane",{xSplit:r.xSplit||void 0,ySplit:r.ySplit||void 0,topLeftCell:c,activePane:x,state:"frozen"}),i.leafNode("selection",{pane:x,activeCell:r.activeCell,sqref:r.activeCell});break;case"split":r.activePane==="topLeft"&&(r.activePane=void 0),i.leafNode("pane",{xSplit:r.xSplit||void 0,ySplit:r.ySplit||void 0,topLeftCell:r.topLeftCell,activePane:r.activePane}),i.leafNode("selection",{pane:r.activePane,activeCell:r.activeCell,sqref:r.activeCell});break;case"normal":r.activeCell&&i.leafNode("selection",{activeCell:r.activeCell,sqref:r.activeCell})}i.closeNode()}parseOpen(i){switch(i.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(i.attributes.workbookViewId,10),rightToLeft:i.attributes.rightToLeft==="1",tabSelected:i.attributes.tabSelected==="1",showRuler:i.attributes.showRuler!=="0",showRowColHeaders:i.attributes.showRowColHeaders!=="0",showGridLines:i.attributes.showGridLines!=="0",zoomScale:parseInt(i.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(i.attributes.zoomScaleNormal||"100",10),style:i.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(i.attributes.xSplit||"0",10),ySplit:parseInt(i.attributes.ySplit||"0",10),topLeftCell:i.attributes.topLeftCell,activePane:i.attributes.activePane||"topLeft",state:i.attributes.state},!0;case"selection":{const r=i.attributes.pane||"topLeft";return this.selections[r]={pane:r,activeCell:i.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(i){let r,s;switch(i){case"sheetView":return this.sheetView&&this.pane?(r=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:l[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(r.activePane=this.pane.activePane),s=this.selections[this.pane.activePane],s&&s.activeCell&&(r.activeCell=s.activeCell),this.sheetView.style&&(r.style=this.sheetView.style)):(r=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},s=this.selections.topLeft,s&&s.activeCell&&(r.activeCell=s.activeCell),this.sheetView.style&&(r.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"tablePart"}render(n,l){l&&n.leafNode(this.tag,{"r:id":l.rId})}parseOpen(n){switch(n.name){case this.tag:return this.model={rId:n.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../../../utils/col-cache"),l=t("../../../utils/xml-stream"),i=t("../../rel-type"),r=t("./merges"),s=t("../base-xform"),c=t("../list-xform"),u=t("./row-xform"),m=t("./col-xform"),x=t("./dimension-xform"),b=t("./hyperlink-xform"),p=t("./merge-cell-xform"),v=t("./data-validations-xform"),y=t("./sheet-properties-xform"),N=t("./sheet-format-properties-xform"),T=t("./sheet-view-xform"),_=t("./sheet-protection-xform"),O=t("./page-margins-xform"),H=t("./page-setup-xform"),F=t("./print-options-xform"),V=t("./auto-filter-xform"),q=t("./picture-xform"),W=t("./drawing-xform"),B=t("./table-part-xform"),E=t("./row-breaks-xform"),P=t("./header-footer-xform"),A=t("./cf/conditional-formattings-xform"),k=t("./ext-lst-xform"),j=(C,D)=>{if(!D||!D.length)return C;if(!C||!C.length)return D;const R={},L={};return C.forEach(Y=>{R[Y.ref]=Y,Y.rules.forEach(X=>{const{x14Id:ae}=X;ae&&(L[ae]=X)})}),D.forEach(Y=>{Y.rules.forEach(X=>{const ae=L[X.x14Id];ae?(($,Q)=>{Object.keys(Q).forEach(z=>{const M=$[z],U=Q[z];M===void 0&&U!==void 0&&($[z]=U)})})(ae,X):R[Y.ref]?R[Y.ref].rules.push(X):C.push({ref:Y.ref,rules:[X]})})}),C};class S extends s{constructor(D){super();const{maxRows:R,maxCols:L,ignoreNodes:Y}=D||{};this.ignoreNodes=Y||[],this.map={sheetPr:new y,dimension:new x,sheetViews:new c({tag:"sheetViews",count:!1,childXform:new T}),sheetFormatPr:new N,cols:new c({tag:"cols",count:!1,childXform:new m}),sheetData:new c({tag:"sheetData",count:!1,empty:!0,childXform:new u({maxItems:L}),maxItems:R}),autoFilter:new V,mergeCells:new c({tag:"mergeCells",count:!0,childXform:new p}),rowBreaks:new E,hyperlinks:new c({tag:"hyperlinks",count:!1,childXform:new b}),pageMargins:new O,dataValidations:new v,pageSetup:new H,headerFooter:new P,printOptions:new F,picture:new q,drawing:new W,sheetProtection:new _,tableParts:new c({tag:"tableParts",count:!0,childXform:new B}),conditionalFormatting:new A,extLst:new k}}prepare(D,R){R.merges=new r,D.hyperlinks=R.hyperlinks=[],D.comments=R.comments=[],R.formulae={},R.siFormulae=0,this.map.cols.prepare(D.cols,R),this.map.sheetData.prepare(D.rows,R),this.map.conditionalFormatting.prepare(D.conditionalFormattings,R),D.mergeCells=R.merges.mergeCells;const L=D.rels=[];function Y($){return"rId"+($.length+1)}if(D.hyperlinks.forEach($=>{const Q=Y(L);$.rId=Q,L.push({Id:Q,Type:i.Hyperlink,Target:$.target,TargetMode:"External"})}),D.comments.length>0){const $={Id:Y(L),Type:i.Comments,Target:`../comments${D.id}.xml`};L.push($);const Q={Id:Y(L),Type:i.VmlDrawing,Target:`../drawings/vmlDrawing${D.id}.vml`};L.push(Q),D.comments.forEach(z=>{z.refAddress=n.decodeAddress(z.ref)}),R.commentRefs.push({commentName:"comments"+D.id,vmlDrawing:"vmlDrawing"+D.id})}const X=[];let ae;D.media.forEach($=>{if($.type==="background"){const Q=Y(L);ae=R.media[$.imageId],L.push({Id:Q,Type:i.Image,Target:`../media/${ae.name}.${ae.extension}`}),D.background={rId:Q},D.image=R.media[$.imageId]}else if($.type==="image"){let{drawing:Q}=D;ae=R.media[$.imageId],Q||(Q=D.drawing={rId:Y(L),name:"drawing"+ ++R.drawingsCount,anchors:[],rels:[]},R.drawings.push(Q),L.push({Id:Q.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${Q.name}.xml`}));let z=this.preImageId===$.imageId?X[$.imageId]:X[Q.rels.length];z||(z=Y(Q.rels),X[Q.rels.length]=z,Q.rels.push({Id:z,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${ae.name}.${ae.extension}`}));const M={picture:{rId:z},range:$.range};if($.hyperlinks&&$.hyperlinks.hyperlink){const U=Y(Q.rels);X[Q.rels.length]=U,M.picture.hyperlinks={tooltip:$.hyperlinks.tooltip,rId:U},Q.rels.push({Id:U,Type:i.Hyperlink,Target:$.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=$.imageId,Q.anchors.push(M)}}),D.tables.forEach($=>{const Q=Y(L);$.rId=Q,L.push({Id:Q,Type:i.Table,Target:"../tables/"+$.target}),$.columns.forEach(z=>{const{style:M}=z;M&&(z.dxfId=R.styles.addDxfStyle(M))})}),this.map.extLst.prepare(D,R)}render(D,R){D.openXml(l.StdDocAttributes),D.openNode("worksheet",S.WORKSHEET_ATTRIBUTES);const L=R.properties?{defaultRowHeight:R.properties.defaultRowHeight,dyDescent:R.properties.dyDescent,outlineLevelCol:R.properties.outlineLevelCol,outlineLevelRow:R.properties.outlineLevelRow}:void 0;R.properties&&R.properties.defaultColWidth&&(L.defaultColWidth=R.properties.defaultColWidth);const Y={outlineProperties:R.properties&&R.properties.outlineProperties,tabColor:R.properties&&R.properties.tabColor,pageSetup:R.pageSetup&&R.pageSetup.fitToPage?{fitToPage:R.pageSetup.fitToPage}:void 0},X=R.pageSetup&&R.pageSetup.margins,ae={showRowColHeaders:R.pageSetup&&R.pageSetup.showRowColHeaders,showGridLines:R.pageSetup&&R.pageSetup.showGridLines,horizontalCentered:R.pageSetup&&R.pageSetup.horizontalCentered,verticalCentered:R.pageSetup&&R.pageSetup.verticalCentered},$=R.sheetProtection;this.map.sheetPr.render(D,Y),this.map.dimension.render(D,R.dimensions),this.map.sheetViews.render(D,R.views),this.map.sheetFormatPr.render(D,L),this.map.cols.render(D,R.cols),this.map.sheetData.render(D,R.rows),this.map.sheetProtection.render(D,$),this.map.autoFilter.render(D,R.autoFilter),this.map.mergeCells.render(D,R.mergeCells),this.map.conditionalFormatting.render(D,R.conditionalFormattings),this.map.dataValidations.render(D,R.dataValidations),this.map.hyperlinks.render(D,R.hyperlinks),this.map.printOptions.render(D,ae),this.map.pageMargins.render(D,X),this.map.pageSetup.render(D,R.pageSetup),this.map.headerFooter.render(D,R.headerFooter),this.map.rowBreaks.render(D,R.rowBreaks),this.map.drawing.render(D,R.drawing),this.map.picture.render(D,R.background),this.map.tableParts.render(D,R.tables),this.map.extLst.render(D,R),R.rels&&R.rels.forEach(Q=>{Q.Type===i.VmlDrawing&&D.leafNode("legacyDrawing",{"r:id":Q.Id})}),D.closeNode()}parseOpen(D){return this.parser?(this.parser.parseOpen(D),!0):D.name==="worksheet"?(d.each(this.map,R=>{R.reset()}),!0):(this.map[D.name]&&!this.ignoreNodes.includes(D.name)&&(this.parser=this.map[D.name],this.parser.parseOpen(D)),!0)}parseText(D){this.parser&&this.parser.parseText(D)}parseClose(D){if(this.parser)return this.parser.parseClose(D)||(this.parser=void 0),!0;switch(D){case"worksheet":{const R=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(R.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(R.outlineProperties=this.map.sheetPr.model.outlineProperties);const L={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},Y=Object.assign(L,this.map.pageSetup.model,this.map.printOptions.model),X=j(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:R,views:this.map.sheetViews.model,pageSetup:Y,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:X},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(D,R){const L=(D.relationships||[]).reduce((X,ae)=>{if(X[ae.Id]=ae,ae.Type===i.Comments&&(D.comments=R.comments[ae.Target].comments),ae.Type===i.VmlDrawing&&D.comments&&D.comments.length){const $=R.vmlDrawings[ae.Target].comments;D.comments.forEach((Q,z)=>{Q.note=Object.assign({},Q.note,$[z])})}return X},{});if(R.commentsMap=(D.comments||[]).reduce((X,ae)=>(ae.ref&&(X[ae.ref]=ae),X),{}),R.hyperlinkMap=(D.hyperlinks||[]).reduce((X,ae)=>(ae.rId&&(X[ae.address]=L[ae.rId].Target),X),{}),R.formulae={},D.rows=D.rows&&D.rows.filter(Boolean)||[],D.rows.forEach(X=>{X.cells=X.cells&&X.cells.filter(Boolean)||[]}),this.map.cols.reconcile(D.cols,R),this.map.sheetData.reconcile(D.rows,R),this.map.conditionalFormatting.reconcile(D.conditionalFormattings,R),D.media=[],D.drawing){const X=L[D.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(X){const ae=X[1];R.drawings[ae].anchors.forEach($=>{if($.medium){const Q={type:"image",imageId:$.medium.index,range:$.range,hyperlinks:$.picture.hyperlinks};D.media.push(Q)}})}}const Y=D.background&&L[D.background.rId];if(Y){const X=Y.Target.split("/media/")[1],ae=R.mediaIndex&&R.mediaIndex[X];ae!==void 0&&D.media.push({type:"background",imageId:ae})}D.tables=(D.tables||[]).map(X=>{const ae=L[X.rId];return R.tables[ae.Target]}),delete D.relationships,delete D.hyperlinks,delete D.comments}}S.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},f.exports=S},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{constructor(n){super(),this.tag=n.tag,this.attr=n.attr}render(n,l){l&&(n.openNode(this.tag),n.closeNode())}parseOpen(n){n.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{constructor(n){super(),this.tag=n.tag,this.attr=n.attr,this.attrs=n.attrs,this._format=n.format||function(l){try{return Number.isNaN(l.getTime())?"":l.toISOString()}catch{return""}},this._parse=n.parse||function(l){return new Date(l)}}render(n,l){l&&(n.openNode(this.tag),this.attrs&&n.addAttributes(this.attrs),this.attr?n.addAttribute(this.attr,this._format(l)):n.writeText(this._format(l)),n.closeNode())}parseOpen(n){n.name===this.tag&&(this.attr?this.model=this._parse(n.attributes[this.attr]):this.text=[])}parseText(n){this.attr||this.text.push(n)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{constructor(n){super(),this.tag=n.tag,this.attr=n.attr,this.attrs=n.attrs,this.zero=n.zero}render(n,l){(l||this.zero)&&(n.openNode(this.tag),this.attrs&&n.addAttributes(this.attrs),this.attr?n.addAttribute(this.attr,l):n.writeText(l),n.closeNode())}parseOpen(n){return n.name===this.tag&&(this.attr?this.model=parseInt(n.attributes[this.attr],10):this.text=[],!0)}parseText(n){this.attr||this.text.push(n)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{constructor(n){super(),this.tag=n.tag,this.attr=n.attr,this.attrs=n.attrs}render(n,l){l!==void 0&&(n.openNode(this.tag),this.attrs&&n.addAttributes(this.attrs),this.attr?n.addAttribute(this.attr,l):n.writeText(l),n.closeNode())}parseOpen(n){n.name===this.tag&&(this.attr?this.model=n.attributes[this.attr]:this.text=[])}parseText(n){this.attr||this.text.push(n)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(t,f,h){const d=t("./base-xform"),n=t("../../utils/xml-stream");f.exports=class extends d{constructor(l){super(),this._model=l}render(l){if(!this._xml){const i=new n;(function r(s,c){s.openNode(c.tag,c.$),c.c&&c.c.forEach(u=>{r(s,u)}),c.t&&s.writeText(c.t),s.closeNode()})(i,this._model),this._xml=i.xml}l.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(l){switch(l){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(t,f,h){const d=t("./text-xform"),n=t("./rich-text-xform"),l=t("../base-xform");f.exports=class extends l{constructor(){super(),this.map={r:new n,t:new d}}get tag(){return"rPh"}render(i,r){if(i.openNode(this.tag,{sb:r.sb||0,eb:r.eb||0}),r&&r.hasOwnProperty("richText")&&r.richText){const{r:s}=this.map;r.richText.forEach(c=>{s.render(i,c)})}else r&&this.map.t.render(i,r.text);i.closeNode()}parseOpen(i){const{name:r}=i;return this.parser?(this.parser.parseOpen(i),!0):r===this.tag?(this.model={sb:parseInt(i.attributes.sb,10),eb:parseInt(i.attributes.eb,10)},!0):(this.parser=this.map[r],!!this.parser&&(this.parser.parseOpen(i),!0))}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){if(this.parser){if(!this.parser.parseClose(i)){switch(i){case"r":{let r=this.model.richText;r||(r=this.model.richText=[]),r.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(i){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(t,f,h){const d=t("./text-xform"),n=t("../style/font-xform"),l=t("../base-xform");class i extends l{constructor(s){super(),this.model=s}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new d)}get fontXform(){return this._fontXform||(this._fontXform=new n(i.FONT_OPTIONS))}render(s,c){c=c||this.model,s.openNode("r"),c.font&&this.fontXform.render(s,c.font),this.textXform.render(s,c.text),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(s),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(s),!0;default:return!1}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){switch(s){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(s),!0}}}i.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},f.exports=i},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(t,f,h){const d=t("./text-xform"),n=t("./rich-text-xform"),l=t("./phonetic-text-xform"),i=t("../base-xform");f.exports=class extends i{constructor(r){super(),this.model=r,this.map={r:new n,t:new d,rPh:new l}}get tag(){return"si"}render(r,s){r.openNode(this.tag),s&&s.hasOwnProperty("richText")&&s.richText?s.richText.length?s.richText.forEach(c=>{this.map.r.render(r,c)}):this.map.t.render(r,""):s!=null&&this.map.t.render(r,s),r.closeNode()}parseOpen(r){const{name:s}=r;return this.parser?(this.parser.parseOpen(r),!0):s===this.tag?(this.model={},!0):(this.parser=this.map[s],!!this.parser&&(this.parser.parseOpen(r),!0))}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser){if(!this.parser.parseClose(r)){switch(r){case"r":{let s=this.model.richText;s||(s=this.model.richText=[]),s.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(t,f,h){const d=t("../../../utils/xml-stream"),n=t("../base-xform"),l=t("./shared-string-xform");f.exports=class extends n{constructor(i){super(),this.model=i||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new l)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(i){return this.model.values[i]}add(i){return i.richText?this.addRichText(i):this.addText(i)}addText(i){let r=this.hash[i];return r===void 0&&(r=this.hash[i]=this.model.values.length,this.model.values.push(i)),this.model.count++,r}addRichText(i){const r=this.sharedStringXform.toXml(i);let s=this.rich[r];return s===void 0&&(s=this.rich[r]=this.model.values.length,this.model.values.push(i)),this.model.count++,s}render(i,r){r=r||this._values,i.openXml(d.StdDocAttributes),i.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:r.count,uniqueCount:r.values.length});const s=this.sharedStringXform;r.values.forEach(c=>{s.render(i,c)}),i.closeNode()}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(i),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(i))}}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){if(this.parser)return this.parser.parseClose(i)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(i){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+i)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"t"}render(n,l){n.openNode("t"),/^\s|\n|\s$/.test(l)&&n.addAttribute("xml:space","preserve"),n.writeText(l),n.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(n,l)=>String.fromCharCode(parseInt(l,16)))}parseOpen(n){switch(n.name){case"t":return this._text=[],!0;default:return!1}}parseText(n){this._text.push(n)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(t,f,h){const d=t("../../../doc/enums"),n=t("../../../utils/utils"),l=t("../base-xform"),i={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((s,c)=>(s[c]=!0,s),{}),horizontal(s){return this.horizontalValues[s]?s:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((s,c)=>(s[c]=!0,s),{}),vertical(s){return s==="middle"?"center":this.verticalValues[s]?s:void 0},wrapText:s=>!!s||void 0,shrinkToFit:s=>!!s||void 0,textRotation(s){switch(s){case"vertical":return s;default:return(s=n.validInt(s))>=-90&&s<=90?s:void 0}},indent:s=>(s=n.validInt(s),Math.max(0,s)),readingOrder(s){switch(s){case"ltr":return d.ReadingOrder.LeftToRight;case"rtl":return d.ReadingOrder.RightToLeft;default:return}}},r={toXml(s){if(s=i.textRotation(s)){if(s==="vertical")return 255;const c=Math.round(s);if(c>=0&&c<=90)return c;if(c<0&&c>=-90)return 90-c}},toModel(s){const c=n.validInt(s);if(c!==void 0){if(c===255)return"vertical";if(c>=0&&c<=90)return c;if(c>90&&c<=180)return 90-c}}};f.exports=class extends l{get tag(){return"alignment"}render(s,c){s.addRollback(),s.openNode("alignment");let u=!1;function m(x,b){b&&(s.addAttribute(x,b),u=!0)}m("horizontal",i.horizontal(c.horizontal)),m("vertical",i.vertical(c.vertical)),m("wrapText",!!i.wrapText(c.wrapText)&&"1"),m("shrinkToFit",!!i.shrinkToFit(c.shrinkToFit)&&"1"),m("indent",i.indent(c.indent)),m("textRotation",r.toXml(c.textRotation)),m("readingOrder",i.readingOrder(c.readingOrder)),s.closeNode(),u?s.commit():s.rollback()}parseOpen(s){const c={};let u=!1;function m(x,b,p){x&&(c[b]=p,u=!0)}m(s.attributes.horizontal,"horizontal",s.attributes.horizontal),m(s.attributes.vertical,"vertical",s.attributes.vertical==="center"?"middle":s.attributes.vertical),m(s.attributes.wrapText,"wrapText",n.parseBoolean(s.attributes.wrapText)),m(s.attributes.shrinkToFit,"shrinkToFit",n.parseBoolean(s.attributes.shrinkToFit)),m(s.attributes.indent,"indent",parseInt(s.attributes.indent,10)),m(s.attributes.textRotation,"textRotation",r.toModel(s.attributes.textRotation)),m(s.attributes.readingOrder,"readingOrder",s.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=u?c:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(t,f,h){const d=t("../base-xform"),n=t("../../../utils/utils"),l=t("./color-xform");class i extends d{constructor(s){super(),this.name=s,this.map={color:new l}}get tag(){return this.name}render(s,c,u){const m=c&&c.color||u||this.defaultColor;s.openNode(this.name),c&&c.style&&(s.addAttribute("style",c.style),m&&this.map.color.render(s,m)),s.closeNode()}parseOpen(s){if(this.parser)return this.parser.parseOpen(s),!0;switch(s.name){case this.name:{const{style:c}=s.attributes;return this.model=c?{style:c}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(s),!0;default:return!1}}parseText(s){this.parser&&this.parser.parseText(s)}parseClose(s){return this.parser?(this.parser.parseClose(s)||(this.parser=void 0),!0):(s===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(s){return i.validStyleValues[s]}}i.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((r,s)=>(r[s]=!0,r),{}),f.exports=class extends d{constructor(){super(),this.map={top:new i("top"),left:new i("left"),bottom:new i("bottom"),right:new i("right"),diagonal:new i("diagonal")}}render(r,s){const{color:c}=s;function u(m,x){m&&!m.color&&s.color&&(m={...m,color:s.color}),x.render(r,m,c)}r.openNode("border"),s.diagonal&&s.diagonal.style&&(s.diagonal.up&&r.addAttribute("diagonalUp","1"),s.diagonal.down&&r.addAttribute("diagonalDown","1")),u(s.left,this.map.left),u(s.right,this.map.right),u(s.top,this.map.top),u(s.bottom,this.map.bottom),u(s.diagonal,this.map.diagonal),r.closeNode()}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case"border":return this.reset(),this.diagonalUp=n.parseBoolean(r.attributes.diagonalUp),this.diagonalDown=n.parseBoolean(r.attributes.diagonalDown),!0;default:return this.parser=this.map[r.name],!!this.parser&&(this.parser.parseOpen(r),!0)}}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser)return this.parser.parseClose(r)||(this.parser=void 0),!0;if(r==="border"){const s=this.model={},c=function(u,m,x){m&&(x&&Object.assign(m,x),s[u]=m)};c("left",this.map.left.model),c("right",this.map.right.model),c("top",this.map.top.model),c("bottom",this.map.bottom.model),c("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{constructor(n){super(),this.name=n||"color"}get tag(){return this.name}render(n,l){return!!l&&(n.openNode(this.name),l.argb?n.addAttribute("rgb",l.argb):l.theme!==void 0?(n.addAttribute("theme",l.theme),l.tint!==void 0&&n.addAttribute("tint",l.tint)):l.indexed!==void 0?n.addAttribute("indexed",l.indexed):n.addAttribute("auto","1"),n.closeNode(),!0)}parseOpen(n){return n.name===this.name&&(n.attributes.rgb?this.model={argb:n.attributes.rgb}:n.attributes.theme?(this.model={theme:parseInt(n.attributes.theme,10)},n.attributes.tint&&(this.model.tint=parseFloat(n.attributes.tint))):n.attributes.indexed?this.model={indexed:parseInt(n.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(t,f,h){const d=t("../base-xform"),n=t("./alignment-xform"),l=t("./border-xform"),i=t("./fill-xform"),r=t("./font-xform"),s=t("./numfmt-xform"),c=t("./protection-xform");f.exports=class extends d{constructor(){super(),this.map={alignment:new n,border:new l,fill:new i,font:new r,numFmt:new s,protection:new c}}get tag(){return"dxf"}render(u,m){if(u.openNode(this.tag),m.font&&this.map.font.render(u,m.font),m.numFmt&&m.numFmtId){const x={id:m.numFmtId,formatCode:m.numFmt};this.map.numFmt.render(u,x)}m.fill&&this.map.fill.render(u,m.fill),m.alignment&&this.map.alignment.render(u,m.alignment),m.border&&this.map.border.render(u,m.border),m.protection&&this.map.protection.render(u,m.protection),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u),!0}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return this.parser?(this.parser.parseClose(u)||(this.parser=void 0),!0):u!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(t,f,h){const d=t("../base-xform"),n=t("./color-xform");class l extends d{constructor(){super(),this.map={color:new n}}get tag(){return"stop"}render(u,m){u.openNode("stop"),u.addAttribute("position",m.position),this.map.color.render(u,m.color),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"stop":return this.model={position:parseFloat(u.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(u),!0;default:return!1}}parseText(){}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class i extends d{constructor(){super(),this.map={fgColor:new n("fgColor"),bgColor:new n("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(u,m){u.openNode("patternFill"),u.addAttribute("patternType",m.pattern),m.fgColor&&this.map.fgColor.render(u,m.fgColor),m.bgColor&&this.map.bgColor.render(u,m.bgColor),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"patternFill":return this.model={type:"pattern",pattern:u.attributes.patternType},!0;default:return this.parser=this.map[u.name],!!this.parser&&(this.parser.parseOpen(u),!0)}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.parser.model&&(this.model[u]=this.parser.model),this.parser=void 0),!0)}}class r extends d{constructor(){super(),this.map={stop:new l}}get name(){return"gradient"}get tag(){return"gradientFill"}render(u,m){switch(u.openNode("gradientFill"),m.gradient){case"angle":u.addAttribute("degree",m.degree);break;case"path":u.addAttribute("type","path"),m.center.left&&(u.addAttribute("left",m.center.left),m.center.right===void 0&&u.addAttribute("right",m.center.left)),m.center.right&&u.addAttribute("right",m.center.right),m.center.top&&(u.addAttribute("top",m.center.top),m.center.bottom===void 0&&u.addAttribute("bottom",m.center.top)),m.center.bottom&&u.addAttribute("bottom",m.center.bottom)}const x=this.map.stop;m.stops.forEach(b=>{x.render(u,b)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"gradientFill":{const m=this.model={stops:[]};return u.attributes.degree?(m.gradient="angle",m.degree=parseInt(u.attributes.degree,10)):u.attributes.type==="path"&&(m.gradient="path",m.center={left:u.attributes.left?parseFloat(u.attributes.left):0,top:u.attributes.top?parseFloat(u.attributes.top):0},u.attributes.right!==u.attributes.left&&(m.center.right=u.attributes.right?parseFloat(u.attributes.right):0),u.attributes.bottom!==u.attributes.top&&(m.center.bottom=u.attributes.bottom?parseFloat(u.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class s extends d{constructor(){super(),this.map={patternFill:new i,gradientFill:new r}}get tag(){return"fill"}render(u,m){switch(u.addRollback(),u.openNode("fill"),m.type){case"pattern":this.map.patternFill.render(u,m);break;case"gradient":this.map.gradientFill.render(u,m);break;default:return void u.rollback()}u.closeNode(),u.commit()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"fill":return this.model={},!0;default:return this.parser=this.map[u.name],!!this.parser&&(this.parser.parseOpen(u),!0)}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return!!this.parser&&(this.parser.parseClose(u)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(u){return s.validPatternValues[u]}}s.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((c,u)=>(c[u]=!0,c),{}),s.StopXform=l,s.PatternFillXform=i,s.GradientFillXform=r,f.exports=s},{"../base-xform":32,"./color-xform":128}],131:[function(t,f,h){const d=t("./color-xform"),n=t("../simple/boolean-xform"),l=t("../simple/integer-xform"),i=t("../simple/string-xform"),r=t("./underline-xform"),s=t("../../../utils/under-dash"),c=t("../base-xform");class u extends c{constructor(x){super(),this.options=x||u.OPTIONS,this.map={b:{prop:"bold",xform:new n({tag:"b",attr:"val"})},i:{prop:"italic",xform:new n({tag:"i",attr:"val"})},u:{prop:"underline",xform:new r},charset:{prop:"charset",xform:new l({tag:"charset",attr:"val"})},color:{prop:"color",xform:new d},condense:{prop:"condense",xform:new n({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new n({tag:"extend",attr:"val"})},family:{prop:"family",xform:new l({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new n({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new i({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new i({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new n({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new n({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new l({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new i({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(x,b){const{map:p}=this;x.openNode(this.options.tagName),s.each(this.map,(v,y)=>{p[y].xform.render(x,b[v.prop])}),x.closeNode()}parseOpen(x){if(this.parser)return this.parser.parseOpen(x),!0;if(this.map[x.name])return this.parser=this.map[x.name].xform,this.parser.parseOpen(x);switch(x.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(x){this.parser&&this.parser.parseText(x)}parseClose(x){if(this.parser&&!this.parser.parseClose(x)){const b=this.map[x];return this.parser.model&&(this.model[b.prop]=this.parser.model),this.parser=void 0,!0}switch(x){case this.options.tagName:return!1;default:return!0}}}u.OPTIONS={tagName:"font",fontNameTag:"name"},f.exports=u},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(t,f,h){const d=t("../../../utils/under-dash"),n=t("../../defaultnumformats"),l=t("../base-xform"),i=(function(){const s={};return d.each(n,(c,u)=>{c.f&&(s[c.f]=parseInt(u,10))}),s})();class r extends l{constructor(c,u){super(),this.id=c,this.formatCode=u}get tag(){return"numFmt"}render(c,u){c.leafNode("numFmt",{numFmtId:u.id,formatCode:u.formatCode})}parseOpen(c){switch(c.name){case"numFmt":return this.model={id:parseInt(c.attributes.numFmtId,10),formatCode:c.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}r.getDefaultFmtId=function(s){return i[s]},r.getDefaultFmtCode=function(s){return n[s]&&n[s].f},f.exports=r},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(t,f,h){const d=t("../base-xform"),n={boolean:(l,i)=>l===void 0?i:l};f.exports=class extends d{get tag(){return"protection"}render(l,i){l.addRollback(),l.openNode("protection");let r=!1;function s(c,u){u!==void 0&&(l.addAttribute(c,u),r=!0)}s("locked",n.boolean(i.locked,!0)?void 0:"0"),s("hidden",n.boolean(i.hidden,!1)?"1":void 0),l.closeNode(),r?l.commit():l.rollback()}parseOpen(l){const i={locked:l.attributes.locked!=="0",hidden:l.attributes.hidden==="1"},r=!i.locked||i.hidden;this.model=r?i:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(t,f,h){const d=t("../base-xform"),n=t("./alignment-xform"),l=t("./protection-xform");f.exports=class extends d{constructor(i){super(),this.xfId=!(!i||!i.xfId),this.map={alignment:new n,protection:new l}}get tag(){return"xf"}render(i,r){i.openNode("xf",{numFmtId:r.numFmtId||0,fontId:r.fontId||0,fillId:r.fillId||0,borderId:r.borderId||0}),this.xfId&&i.addAttribute("xfId",r.xfId||0),r.numFmtId&&i.addAttribute("applyNumberFormat","1"),r.fontId&&i.addAttribute("applyFont","1"),r.fillId&&i.addAttribute("applyFill","1"),r.borderId&&i.addAttribute("applyBorder","1"),r.alignment&&i.addAttribute("applyAlignment","1"),r.protection&&i.addAttribute("applyProtection","1"),r.alignment&&this.map.alignment.render(i,r.alignment),r.protection&&this.map.protection.render(i,r.protection),i.closeNode()}parseOpen(i){if(this.parser)return this.parser.parseOpen(i),!0;switch(i.name){case"xf":return this.model={numFmtId:parseInt(i.attributes.numFmtId,10),fontId:parseInt(i.attributes.fontId,10),fillId:parseInt(i.attributes.fillId,10),borderId:parseInt(i.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(i.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(i),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(i),!0;default:return!1}}parseText(i){this.parser&&this.parser.parseText(i)}parseClose(i){return this.parser?(this.parser.parseClose(i)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):i!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(t,f,h){const d=t("../../../doc/enums"),n=t("../../../utils/xml-stream"),l=t("../base-xform"),i=t("../static-xform"),r=t("../list-xform"),s=t("./font-xform"),c=t("./fill-xform"),u=t("./border-xform"),m=t("./numfmt-xform"),x=t("./style-xform"),b=t("./dxf-xform");class p extends l{constructor(y){super(),this.map={numFmts:new r({tag:"numFmts",count:!0,childXform:new m}),fonts:new r({tag:"fonts",count:!0,childXform:new s,$:{"x14ac:knownFonts":1}}),fills:new r({tag:"fills",count:!0,childXform:new c}),borders:new r({tag:"borders",count:!0,childXform:new u}),cellStyleXfs:new r({tag:"cellStyleXfs",count:!0,childXform:new x}),cellXfs:new r({tag:"cellXfs",count:!0,childXform:new x({xfId:!0})}),dxfs:new r({tag:"dxfs",always:!0,count:!0,childXform:new b}),numFmt:new m,font:new s,fill:new c,border:new u,style:new x({xfId:!0}),cellStyles:p.STATIC_XFORMS.cellStyles,tableStyles:p.STATIC_XFORMS.tableStyles,extLst:p.STATIC_XFORMS.extLst},y&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(y,N){N=N||this.model,y.openXml(n.StdDocAttributes),y.openNode("styleSheet",p.STYLESHEET_ATTRIBUTES),this.index?(N.numFmts&&N.numFmts.length&&(y.openNode("numFmts",{count:N.numFmts.length}),N.numFmts.forEach(T=>{y.writeXml(T)}),y.closeNode()),N.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),y.openNode("fonts",{count:N.fonts.length,"x14ac:knownFonts":1}),N.fonts.forEach(T=>{y.writeXml(T)}),y.closeNode(),y.openNode("fills",{count:N.fills.length}),N.fills.forEach(T=>{y.writeXml(T)}),y.closeNode(),y.openNode("borders",{count:N.borders.length}),N.borders.forEach(T=>{y.writeXml(T)}),y.closeNode(),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),y.openNode("cellXfs",{count:N.styles.length}),N.styles.forEach(T=>{y.writeXml(T)}),y.closeNode()):(this.map.numFmts.render(y,N.numFmts),this.map.fonts.render(y,N.fonts),this.map.fills.render(y,N.fills),this.map.borders.render(y,N.borders),this.map.cellStyleXfs.render(y,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(y,N.styles)),p.STATIC_XFORMS.cellStyles.render(y),this.map.dxfs.render(y,N.dxfs),p.STATIC_XFORMS.tableStyles.render(y),p.STATIC_XFORMS.extLst.render(y),y.closeNode()}parseOpen(y){if(this.parser)return this.parser.parseOpen(y),!0;switch(y.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[y.name],this.parser&&this.parser.parseOpen(y),!0}}parseText(y){this.parser&&this.parser.parseText(y)}parseClose(y){if(this.parser)return this.parser.parseClose(y)||(this.parser=void 0),!0;switch(y){case"styleSheet":{this.model={};const N=(T,_)=>{_.model&&_.model.length&&(this.model[T]=_.model)};if(N("numFmts",this.map.numFmts),N("fonts",this.map.fonts),N("fills",this.map.fills),N("borders",this.map.borders),N("styles",this.map.cellXfs),N("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const T=this.index.numFmt;this.model.numFmts.forEach(_=>{T[_.id]=_.formatCode})}return!1}default:return!0}}addStyleModel(y,N){if(!y)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(y))return this.weakMap.get(y);const T={};if(N=N||d.ValueType.Number,y.numFmt)T.numFmtId=this._addNumFmtStr(y.numFmt);else switch(N){case d.ValueType.Number:T.numFmtId=this._addNumFmtStr("General");break;case d.ValueType.Date:T.numFmtId=this._addNumFmtStr("mm-dd-yy")}y.font&&(T.fontId=this._addFont(y.font)),y.border&&(T.borderId=this._addBorder(y.border)),y.fill&&(T.fillId=this._addFill(y.fill)),y.alignment&&(T.alignment=y.alignment),y.protection&&(T.protection=y.protection);const _=this._addStyle(T);return this.weakMap&&this.weakMap.set(y,_),_}getStyleModel(y){const N=this.model.styles[y];if(!N)return null;let T=this.index.model[y];if(T)return T;if(T=this.index.model[y]={},N.numFmtId){const O=this.index.numFmt[N.numFmtId]||m.getDefaultFmtCode(N.numFmtId);O&&(T.numFmt=O)}function _(O,H,F){if(F||F===0){const V=H[F];V&&(T[O]=V)}}return _("font",this.model.fonts,N.fontId),_("border",this.model.borders,N.borderId),_("fill",this.model.fills,N.fillId),N.alignment&&(T.alignment=N.alignment),N.protection&&(T.protection=N.protection),T}addDxfStyle(y){return y.numFmt&&(y.numFmtId=this._addNumFmtStr(y.numFmt)),this.model.dxfs.push(y),this.model.dxfs.length-1}getDxfStyle(y){return this.model.dxfs[y]}_addStyle(y){const N=this.map.style.toXml(y);let T=this.index.style[N];return T===void 0&&(T=this.index.style[N]=this.model.styles.length,this.model.styles.push(N)),T}_addNumFmtStr(y){let N=m.getDefaultFmtId(y);if(N!==void 0||(N=this.index.numFmt[y],N!==void 0))return N;N=this.index.numFmt[y]=164+this.model.numFmts.length;const T=this.map.numFmt.toXml({id:N,formatCode:y});return this.model.numFmts.push(T),N}_addFont(y){const N=this.map.font.toXml(y);let T=this.index.font[N];return T===void 0&&(T=this.index.font[N]=this.model.fonts.length,this.model.fonts.push(N)),T}_addBorder(y){const N=this.map.border.toXml(y);let T=this.index.border[N];return T===void 0&&(T=this.index.border[N]=this.model.borders.length,this.model.borders.push(N)),T}_addFill(y){const N=this.map.fill.toXml(y);let T=this.index.fill[N];return T===void 0&&(T=this.index.fill[N]=this.model.fills.length,this.model.fills.push(N)),T}}p.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},p.STATIC_XFORMS={cellStyles:new i({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new i({tag:"dxfs",$:{count:0}}),tableStyles:new i({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new i({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},p.Mock=class extends p{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(v){return v.autodrain(),Promise.resolve()}addStyleModel(v,y){switch(y){case d.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const v={numFmtId:m.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(v)}return this._dateStyleId}getStyleModel(){return{}}},f.exports=p},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(t,f,h){const d=t("../base-xform");class n extends d{constructor(i){super(),this.model=i}get tag(){return"u"}render(i,r){if((r=r||this.model)===!0)i.leafNode("u");else{const s=n.Attributes[r];s&&i.leafNode("u",s)}}parseOpen(i){i.name==="u"&&(this.model=i.attributes.val||!0)}parseText(){}parseClose(){return!1}}n.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},f.exports=n},{"../base-xform":32}],137:[function(t,f,h){const d=t("../base-xform"),n=t("./filter-column-xform");f.exports=class extends d{constructor(){super(),this.map={filterColumn:new n}}get tag(){return"autoFilter"}prepare(l){l.columns.forEach((i,r)=>{this.map.filterColumn.prepare(i,{index:r})})}render(l,i){return l.openNode(this.tag,{ref:i.autoFilterRef}),i.columns.forEach(r=>{this.map.filterColumn.render(l,r)}),l.closeNode(),!0}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:return this.model={autoFilterRef:l.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[l.name],this.parser)return this.parseOpen(l),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(l){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"customFilter"}render(n,l){n.leafNode(this.tag,{val:l.val,operator:l.operator})}parseOpen(n){return n.name===this.tag&&(this.model={val:n.attributes.val,operator:n.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(t,f,h){const d=t("../base-xform"),n=t("../list-xform"),l=t("./custom-filter-xform"),i=t("./filter-xform");f.exports=class extends d{constructor(){super(),this.map={customFilters:new n({tag:"customFilters",count:!1,empty:!0,childXform:new l}),filters:new n({tag:"filters",count:!1,empty:!0,childXform:new i})}}get tag(){return"filterColumn"}prepare(r,s){r.colId=s.index.toString()}render(r,s){return s.customFilters?(r.openNode(this.tag,{colId:s.colId,hiddenButton:s.filterButton?"0":"1"}),this.map.customFilters.render(r,s.customFilters),r.closeNode(),!0):(r.leafNode(this.tag,{colId:s.colId,hiddenButton:s.filterButton?"0":"1"}),!0)}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;const{attributes:s}=r;switch(r.name){case this.tag:return this.model={filterButton:s.hiddenButton==="0"},!0;default:if(this.parser=this.map[r.name],this.parser)return this.parseOpen(r),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(r))}}parseText(){}parseClose(r){if(this.parser)return this.parser.parseClose(r)||(this.parser=void 0),!0;switch(r){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"filter"}render(n,l){n.leafNode(this.tag,{val:l.val})}parseOpen(n){return n.name===this.tag&&(this.model={val:n.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"tableColumn"}prepare(n,l){n.id=l.index+1}render(n,l){return n.leafNode(this.tag,{id:l.id.toString(),name:l.name,totalsRowLabel:l.totalsRowLabel,totalsRowFunction:l.totalsRowFunction,dxfId:l.dxfId}),!0}parseOpen(n){if(n.name===this.tag){const{attributes:l}=n;return this.model={name:l.name,totalsRowLabel:l.totalsRowLabel,totalsRowFunction:l.totalsRowFunction,dxfId:l.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(t,f,h){const d=t("../base-xform");f.exports=class extends d{get tag(){return"tableStyleInfo"}render(n,l){return n.leafNode(this.tag,{name:l.theme?l.theme:void 0,showFirstColumn:l.showFirstColumn?"1":"0",showLastColumn:l.showLastColumn?"1":"0",showRowStripes:l.showRowStripes?"1":"0",showColumnStripes:l.showColumnStripes?"1":"0"}),!0}parseOpen(n){if(n.name===this.tag){const{attributes:l}=n;return this.model={theme:l.name?l.name:null,showFirstColumn:l.showFirstColumn==="1",showLastColumn:l.showLastColumn==="1",showRowStripes:l.showRowStripes==="1",showColumnStripes:l.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(t,f,h){const d=t("../../../utils/xml-stream"),n=t("../base-xform"),l=t("../list-xform"),i=t("./auto-filter-xform"),r=t("./table-column-xform"),s=t("./table-style-info-xform");class c extends n{constructor(){super(),this.map={autoFilter:new i,tableColumns:new l({tag:"tableColumns",count:!0,empty:!0,childXform:new r}),tableStyleInfo:new s}}prepare(m,x){this.map.autoFilter.prepare(m),this.map.tableColumns.prepare(m.columns,x)}get tag(){return"table"}render(m,x){m.openXml(d.StdDocAttributes),m.openNode(this.tag,{...c.TABLE_ATTRIBUTES,id:x.id,name:x.name,displayName:x.displayName||x.name,ref:x.tableRef,totalsRowCount:x.totalsRow?"1":void 0,totalsRowShown:x.totalsRow?void 0:"1",headerRowCount:x.headerRow?"1":"0"}),this.map.autoFilter.render(m,x),this.map.tableColumns.render(m,x.columns),this.map.tableStyleInfo.render(m,x.style),m.closeNode()}parseOpen(m){if(this.parser)return this.parser.parseOpen(m),!0;const{name:x,attributes:b}=m;switch(x){case this.tag:this.reset(),this.model={name:b.name,displayName:b.displayName||b.name,tableRef:b.ref,totalsRow:b.totalsRowCount==="1",headerRow:b.headerRowCount==="1"};break;default:this.parser=this.map[m.name],this.parser&&this.parser.parseOpen(m)}return!0}parseText(m){this.parser&&this.parser.parseText(m)}parseClose(m){if(this.parser)return this.parser.parseClose(m)||(this.parser=void 0),!0;switch(m){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((x,b)=>{this.model.columns[b].filterButton=x.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(m,x){m.columns.forEach(b=>{b.dxfId!==void 0&&(b.style=x.styles.getDxfStyle(b.dxfId))})}}c.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},f.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(t,f,h){(function(d,n){(function(){const l=t("fs"),i=t("jszip"),{PassThrough:r}=t("readable-stream"),s=t("../utils/zip-stream"),c=t("../utils/stream-buf"),u=t("../utils/utils"),m=t("../utils/xml-stream"),{bufferToString:x}=t("../utils/browser-buffer-decode"),b=t("./xform/style/styles-xform"),p=t("./xform/core/core-xform"),v=t("./xform/strings/shared-strings-xform"),y=t("./xform/core/relationships-xform"),N=t("./xform/core/content-types-xform"),T=t("./xform/core/app-xform"),_=t("./xform/book/workbook-xform"),O=t("./xform/sheet/worksheet-xform"),H=t("./xform/drawing/drawing-xform"),F=t("./xform/table/table-xform"),V=t("./xform/comment/comments-xform"),q=t("./xform/comment/vml-notes-xform"),W=t("./xml/theme1");class B{constructor(P){this.workbook=P}async readFile(P,A){if(!await u.fs.exists(P))throw new Error("File not found: "+P);const k=l.createReadStream(P);try{const j=await this.read(k,A);return k.close(),j}catch(j){throw k.close(),j}}parseRels(P){return new y().parseStream(P)}parseWorkbook(P){return new _().parseStream(P)}parseSharedStrings(P){return new v().parseStream(P)}reconcile(P,A){const k=new _,j=new O(A),S=new H,C=new F;k.reconcile(P);const D={media:P.media,mediaIndex:P.mediaIndex};Object.keys(P.drawings).forEach(Y=>{const X=P.drawings[Y],ae=P.drawingRels[Y];ae&&(D.rels=ae.reduce(($,Q)=>($[Q.Id]=Q,$),{}),(X.anchors||[]).forEach($=>{const Q=$.picture&&$.picture.hyperlinks;Q&&D.rels[Q.rId]&&(Q.hyperlink=D.rels[Q.rId].Target,delete Q.rId)}),S.reconcile(X,D))});const R={styles:P.styles};Object.values(P.tables).forEach(Y=>{C.reconcile(Y,R)});const L={styles:P.styles,sharedStrings:P.sharedStrings,media:P.media,mediaIndex:P.mediaIndex,date1904:P.properties&&P.properties.date1904,drawings:P.drawings,comments:P.comments,tables:P.tables,vmlDrawings:P.vmlDrawings};P.worksheets.forEach(Y=>{Y.relationships=P.worksheetRels[Y.sheetNo],j.reconcile(Y,L)}),delete P.worksheetHash,delete P.worksheetRels,delete P.globalRels,delete P.sharedStrings,delete P.workbookRels,delete P.sheetDefs,delete P.styles,delete P.mediaIndex,delete P.drawings,delete P.drawingRels,delete P.vmlDrawings}async _processWorksheetEntry(P,A,k,j,S){const C=new O(j),D=await C.parseStream(P);D.sheetNo=k,A.worksheetHash[S]=D,A.worksheets.push(D)}async _processCommentEntry(P,A,k){const j=new V,S=await j.parseStream(P);A.comments[`../${k}.xml`]=S}async _processTableEntry(P,A,k){const j=new F,S=await j.parseStream(P);A.tables[`../tables/${k}.xml`]=S}async _processWorksheetRelsEntry(P,A,k){const j=new y,S=await j.parseStream(P);A.worksheetRels[k]=S}async _processMediaEntry(P,A,k){const j=k.lastIndexOf(".");if(j>=1){const S=k.substr(j+1),C=k.substr(0,j);await new Promise((D,R)=>{const L=new c;L.on("finish",()=>{A.mediaIndex[k]=A.media.length,A.mediaIndex[C]=A.media.length;const Y={type:"image",name:C,extension:S,buffer:L.toBuffer()};A.media.push(Y),D()}),P.on("error",Y=>{R(Y)}),P.pipe(L)})}}async _processDrawingEntry(P,A,k){const j=new H,S=await j.parseStream(P);A.drawings[k]=S}async _processDrawingRelsEntry(P,A,k){const j=new y,S=await j.parseStream(P);A.drawingRels[k]=S}async _processVmlDrawingEntry(P,A,k){const j=new q,S=await j.parseStream(P);A.vmlDrawings[`../drawings/${k}.vml`]=S}async _processThemeEntry(P,A,k){await new Promise((j,S)=>{const C=new c;P.on("error",S),C.on("error",S),C.on("finish",()=>{A.themes[k]=C.read().toString(),j()}),P.pipe(C)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(P,A){!P[Symbol.asyncIterator]&&P.pipe&&(P=P.pipe(new r));const k=[];for await(const j of P)k.push(j);return this.load(n.concat(k),A)}async load(P,A){let k;k=A&&A.base64?n.from(P.toString(),"base64"):P;const j={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},S=await i.loadAsync(k);for(const C of Object.values(S.files))if(!C.dir){let D,R=C.name;if(R[0]==="/"&&(R=R.substr(1)),R.match(/xl\/media\//)||R.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))D=new r,D.write(await C.async("nodebuffer"));else{let L;D=new r({writableObjectMode:!0,readableObjectMode:!0}),L=d.browser?x(await C.async("nodebuffer")):await C.async("string");const Y=16384;for(let X=0;X<L.length;X+=Y)D.write(L.substring(X,X+Y))}switch(D.end(),R){case"_rels/.rels":j.globalRels=await this.parseRels(D);break;case"xl/workbook.xml":{const L=await this.parseWorkbook(D);j.sheets=L.sheets,j.definedNames=L.definedNames,j.views=L.views,j.properties=L.properties,j.calcProperties=L.calcProperties;break}case"xl/_rels/workbook.xml.rels":j.workbookRels=await this.parseRels(D);break;case"xl/sharedStrings.xml":j.sharedStrings=new v,await j.sharedStrings.parseStream(D);break;case"xl/styles.xml":j.styles=new b,await j.styles.parseStream(D);break;case"docProps/app.xml":{const L=new T,Y=await L.parseStream(D);j.company=Y.company,j.manager=Y.manager;break}case"docProps/core.xml":{const L=new p,Y=await L.parseStream(D);Object.assign(j,Y);break}default:{let L=R.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(L){await this._processWorksheetEntry(D,j,L[1],A,R);break}if(L=R.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),L){await this._processWorksheetRelsEntry(D,j,L[1]);break}if(L=R.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),L){await this._processThemeEntry(D,j,L[1]);break}if(L=R.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),L){await this._processMediaEntry(D,j,L[1]);break}if(L=R.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),L){await this._processDrawingEntry(D,j,L[1]);break}if(L=R.match(/xl\/(comments\d+)[.]xml/),L){await this._processCommentEntry(D,j,L[1]);break}if(L=R.match(/xl\/tables\/(table\d+)[.]xml/),L){await this._processTableEntry(D,j,L[1]);break}if(L=R.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),L){await this._processDrawingRelsEntry(D,j,L[1]);break}if(L=R.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),L){await this._processVmlDrawingEntry(D,j,L[1]);break}}}}return this.reconcile(j,A),this.workbook.model=j,this.workbook}async addMedia(P,A){await Promise.all(A.media.map(async k=>{if(k.type==="image"){const j=`xl/media/${k.name}.${k.extension}`;if(k.filename){const S=await(function(C,D){return new Promise((R,L)=>{l.readFile(C,D,(Y,X)=>{Y?L(Y):R(X)})})})(k.filename);return P.append(S,{name:j})}if(k.buffer)return P.append(k.buffer,{name:j});if(k.base64){const S=k.base64,C=S.substring(S.indexOf(",")+1);return P.append(C,{name:j,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(P,A){const k=new H,j=new y;A.worksheets.forEach(S=>{const{drawing:C}=S;if(C){k.prepare(C,{});let D=k.toXml(C);P.append(D,{name:`xl/drawings/${C.name}.xml`}),D=j.toXml(C.rels),P.append(D,{name:`xl/drawings/_rels/${C.name}.xml.rels`})}})}addTables(P,A){const k=new F;A.worksheets.forEach(j=>{const{tables:S}=j;S.forEach(C=>{k.prepare(C,{});const D=k.toXml(C);P.append(D,{name:"xl/tables/"+C.target})})})}async addContentTypes(P,A){const k=new N().toXml(A);P.append(k,{name:"[Content_Types].xml"})}async addApp(P,A){const k=new T().toXml(A);P.append(k,{name:"docProps/app.xml"})}async addCore(P,A){const k=new p;P.append(k.toXml(A),{name:"docProps/core.xml"})}async addThemes(P,A){const k=A.themes||{theme1:W};Object.keys(k).forEach(j=>{const S=k[j],C=`xl/theme/${j}.xml`;P.append(S,{name:C})})}async addOfficeRels(P){const A=new y().toXml([{Id:"rId1",Type:B.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:B.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:B.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);P.append(A,{name:"_rels/.rels"})}async addWorkbookRels(P,A){let k=1;const j=[{Id:"rId"+k++,Type:B.RelType.Styles,Target:"styles.xml"},{Id:"rId"+k++,Type:B.RelType.Theme,Target:"theme/theme1.xml"}];A.sharedStrings.count&&j.push({Id:"rId"+k++,Type:B.RelType.SharedStrings,Target:"sharedStrings.xml"}),A.worksheets.forEach(C=>{C.rId="rId"+k++,j.push({Id:C.rId,Type:B.RelType.Worksheet,Target:`worksheets/sheet${C.id}.xml`})});const S=new y().toXml(j);P.append(S,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(P,A){A.sharedStrings&&A.sharedStrings.count&&P.append(A.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(P,A){const{xml:k}=A.styles;k&&P.append(k,{name:"xl/styles.xml"})}async addWorkbook(P,A){const k=new _;P.append(k.toXml(A),{name:"xl/workbook.xml"})}async addWorksheets(P,A){const k=new O,j=new y,S=new V,C=new q;A.worksheets.forEach(D=>{let R=new m;k.render(R,D),P.append(R.xml,{name:`xl/worksheets/sheet${D.id}.xml`}),D.rels&&D.rels.length&&(R=new m,j.render(R,D.rels),P.append(R.xml,{name:`xl/worksheets/_rels/sheet${D.id}.xml.rels`})),D.comments.length>0&&(R=new m,S.render(R,D),P.append(R.xml,{name:`xl/comments${D.id}.xml`}),R=new m,C.render(R,D),P.append(R.xml,{name:`xl/drawings/vmlDrawing${D.id}.vml`}))})}_finalize(P){return new Promise((A,k)=>{P.on("finish",()=>{A(this)}),P.on("error",k),P.finalize()})}prepareModel(P,A){P.creator=P.creator||"ExcelJS",P.lastModifiedBy=P.lastModifiedBy||"ExcelJS",P.created=P.created||new Date,P.modified=P.modified||new Date,P.useSharedStrings=A.useSharedStrings===void 0||A.useSharedStrings,P.useStyles=A.useStyles===void 0||A.useStyles,P.sharedStrings=new v,P.styles=P.useStyles?new b(!0):new b.Mock;const k=new _,j=new O;k.prepare(P);const S={sharedStrings:P.sharedStrings,styles:P.styles,date1904:P.properties.date1904,drawingsCount:0,media:P.media};S.drawings=P.drawings=[],S.commentRefs=P.commentRefs=[];let C=0;P.tables=[],P.worksheets.forEach(D=>{D.tables.forEach(R=>{C++,R.target=`table${C}.xml`,R.id=C,P.tables.push(R)}),j.prepare(D,S)})}async write(P,A){A=A||{};const{model:k}=this.workbook,j=new s.ZipWriter(A.zip);return j.pipe(P),this.prepareModel(k,A),await this.addContentTypes(j,k),await this.addOfficeRels(j,k),await this.addWorkbookRels(j,k),await this.addWorksheets(j,k),await this.addSharedStrings(j,k),await this.addDrawings(j,k),await this.addTables(j,k),await Promise.all([this.addThemes(j,k),this.addStyles(j,k)]),await this.addMedia(j,k),await Promise.all([this.addApp(j,k),this.addCore(j,k)]),await this.addWorkbook(j,k),this._finalize(j)}writeFile(P,A){const k=l.createWriteStream(P);return new Promise((j,S)=>{k.on("finish",()=>{j()}),k.on("error",C=>{S(C)}),this.write(k,A).then(()=>{k.end()}).catch(C=>{S(C)})})}async writeBuffer(P){const A=new c;return await this.write(A,P),A.read()}}B.RelType=t("./rel-type"),f.exports=B}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(t,f,h){f.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(t,f,h){(function(d){(function(){Object.defineProperty(h,"__esModule",{value:!0}),h.CsvFormatterStream=void 0;const n=t("stream"),l=t("./formatter");class i extends n.Transform{constructor(s){super({writableObjectMode:s.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=s,this.rowFormatter=new l.RowFormatter(s),this.hasWrittenBOM=!s.writeBOM}transform(s){return this.rowFormatter.rowTransform=s,this}_transform(s,c,u){let m=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(s,(x,b)=>x?(m=!0,u(x)):(b&&b.forEach(p=>{this.push(d.from(p,"utf8"))}),m=!0,u()))}catch(x){if(m)throw x;u(x)}}_flush(s){this.rowFormatter.finish((c,u)=>c?s(c):(u&&u.forEach(m=>{this.push(d.from(m,"utf8"))}),s()))}}h.CsvFormatterStream=i}).call(this)}).call(this,t("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.FormatterOptions=void 0,h.FormatterOptions=class{constructor(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var n;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,d||{}),d?.quoteHeaders===void 0&&(this.quoteHeaders=this.quoteColumns),d?.quote===!0?this.quote='"':d?.quote===!1&&(this.quote=""),typeof d?.escape!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((n=d.writeHeaders)===null||n===void 0||n),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(t,f,h){var d=function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(h,"__esModule",{value:!0}),h.FieldFormatter=void 0;const n=d(t("lodash.isboolean")),l=d(t("lodash.isnil")),i=d(t("lodash.escaperegexp"));h.FieldFormatter=class{constructor(r){this._headers=null,this.formatterOptions=r,r.headers!==null&&(this.headers=r.headers),this.REPLACE_REGEXP=new RegExp(r.quote,"g");const s=`[${r.delimiter}${i.default(r.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(s)}set headers(r){this._headers=r}shouldQuote(r,s){const c=s?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return n.default(c)?c:Array.isArray(c)?c[r]:this._headers!==null&&c[this._headers[r]]}format(r,s,c){const u=(""+(l.default(r)?"":r)).replace(/\0/g,""),{formatterOptions:m}=this;return m.quote!==""&&u.indexOf(m.quote)!==-1?this.quoteField(u.replace(this.REPLACE_REGEXP,m.escapedQuote)):u.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(s,c)?this.quoteField(u):u}quoteField(r){const{quote:s}=this.formatterOptions;return`${s}${r}${s}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(t,f,h){var d=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(h,"__esModule",{value:!0}),h.RowFormatter=void 0;const n=d(t("lodash.isfunction")),l=d(t("lodash.isequal")),i=t("./FieldFormatter"),r=t("../types");class s{constructor(u){this.rowCount=0,this.formatterOptions=u,this.fieldFormatter=new i.FieldFormatter(u),this.headers=u.headers,this.shouldWriteHeaders=u.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),u.transform&&(this.rowTransform=u.transform)}static isRowHashArray(u){return!!Array.isArray(u)&&Array.isArray(u[0])&&u[0].length===2}static isRowArray(u){return Array.isArray(u)&&!this.isRowHashArray(u)}static gatherHeaders(u){return s.isRowHashArray(u)?u.map(m=>m[0]):Array.isArray(u)?u:Object.keys(u)}static createTransform(u){return r.isSyncTransform(u)?(m,x)=>{let b=null;try{b=u(m)}catch(p){return x(p)}return x(null,b)}:(m,x)=>{u(m,x)}}set rowTransform(u){if(!n.default(u))throw new TypeError("The transform should be a function");this._rowTransform=s.createTransform(u)}format(u,m){this.callTransformer(u,(x,b)=>{if(x)return m(x);if(!u)return m(null);const p=[];if(b){const{shouldFormatColumns:v,headers:y}=this.checkHeaders(b);if(this.shouldWriteHeaders&&y&&!this.hasWrittenHeaders&&(p.push(this.formatColumns(y,!0)),this.hasWrittenHeaders=!0),v){const N=this.gatherColumns(b);p.push(this.formatColumns(N,!1))}}return m(null,p)})}finish(u){const m=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return u(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));m.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&m.push(this.formatterOptions.rowDelimiter),u(null,m)}checkHeaders(u){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const m=s.gatherHeaders(u);return this.headers=m,this.fieldFormatter.headers=m,this.shouldWriteHeaders?{shouldFormatColumns:!l.default(m,u),headers:m}:{shouldFormatColumns:!0,headers:null}}gatherColumns(u){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(u)?s.isRowHashArray(u)?this.headers.map((m,x)=>{const b=u[x];return b?b[1]:""}):s.isRowArray(u)&&!this.shouldWriteHeaders?u:this.headers.map((m,x)=>u[x]):this.headers.map(m=>u[m])}callTransformer(u,m){return this._rowTransform?this._rowTransform(u,m):m(null,u)}formatColumns(u,m){const x=u.map((p,v)=>this.fieldFormatter.format(p,v,m)).join(this.formatterOptions.delimiter),{rowCount:b}=this;return this.rowCount+=1,b?[this.formatterOptions.rowDelimiter,x].join(""):x}}h.RowFormatter=s},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.FieldFormatter=h.RowFormatter=void 0;var d=t("./RowFormatter");Object.defineProperty(h,"RowFormatter",{enumerable:!0,get:function(){return d.RowFormatter}});var n=t("./FieldFormatter");Object.defineProperty(h,"FieldFormatter",{enumerable:!0,get:function(){return n.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(t,f,h){(function(d){(function(){var n=Object.create?function(v,y,N,T){T===void 0&&(T=N),Object.defineProperty(v,T,{enumerable:!0,get:function(){return y[N]}})}:function(v,y,N,T){T===void 0&&(T=N),v[T]=y[N]},l=Object.create?function(v,y){Object.defineProperty(v,"default",{enumerable:!0,value:y})}:function(v,y){v.default=y},i=function(v){if(v&&v.__esModule)return v;var y={};if(v!=null)for(var N in v)N!=="default"&&Object.prototype.hasOwnProperty.call(v,N)&&n(y,v,N);return l(y,v),y},r=function(v,y){for(var N in v)N==="default"||Object.prototype.hasOwnProperty.call(y,N)||n(y,v,N)};Object.defineProperty(h,"__esModule",{value:!0}),h.writeToPath=h.writeToString=h.writeToBuffer=h.writeToStream=h.write=h.format=h.FormatterOptions=h.CsvFormatterStream=void 0;const s=t("util"),c=t("stream"),u=i(t("fs")),m=t("./FormatterOptions"),x=t("./CsvFormatterStream");r(t("./types"),h);var b=t("./CsvFormatterStream");Object.defineProperty(h,"CsvFormatterStream",{enumerable:!0,get:function(){return b.CsvFormatterStream}});var p=t("./FormatterOptions");Object.defineProperty(h,"FormatterOptions",{enumerable:!0,get:function(){return p.FormatterOptions}}),h.format=v=>new x.CsvFormatterStream(new m.FormatterOptions(v)),h.write=(v,y)=>{const N=h.format(y),T=s.promisify((_,O)=>{N.write(_,void 0,O)});return v.reduce((_,O)=>_.then(()=>T(O)),Promise.resolve()).then(()=>N.end()).catch(_=>{N.emit("error",_)}),N},h.writeToStream=(v,y,N)=>h.write(y,N).pipe(v),h.writeToBuffer=function(v){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const N=[],T=new c.Writable({write(_,O,H){N.push(_),H()}});return new Promise((_,O)=>{T.on("error",O).on("finish",()=>_(d.concat(N))),h.write(v,y).pipe(T)})},h.writeToString=(v,y)=>h.writeToBuffer(v,y).then(N=>N.toString()),h.writeToPath=(v,y,N)=>{const T=u.createWriteStream(v,{encoding:"utf8"});return h.write(y,N).pipe(T)}}).call(this)}).call(this,t("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.isSyncTransform=void 0,h.isSyncTransform=d=>d.length===1},{}],153:[function(t,f,h){(function(d){(function(){Object.defineProperty(h,"__esModule",{value:!0}),h.CsvParserStream=void 0;const n=t("string_decoder"),l=t("stream"),i=t("./transforms"),r=t("./parser");class s extends l.Transform{constructor(u){super({objectMode:u.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=u,this.parser=new r.Parser(u),this.headerTransformer=new i.HeaderTransformer(u),this.decoder=new n.StringDecoder(u.encoding),this.rowTransformerValidator=new i.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(u){return this.rowTransformerValidator.rowTransform=u,this}validate(u){return this.rowTransformerValidator.rowValidator=u,this}emit(u){if(u==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var m=arguments.length,x=new Array(m>1?m-1:0),b=1;b<m;b++)x[b-1]=arguments[b];return super.emit(u,...x)}_transform(u,m,x){if(this.hasHitRowLimit)return x();const b=s.wrapDoneCallback(x);try{const{lines:p}=this,v=p+this.decoder.write(u),y=this.parse(v,!0);return this.processRows(y,b)}catch(p){return b(p)}}_flush(u){const m=s.wrapDoneCallback(u);if(this.hasHitRowLimit)return m();try{const x=this.lines+this.decoder.end(),b=this.parse(x,!1);return this.processRows(b,m)}catch(x){return m(x)}}parse(u,m){if(!u)return[];const{line:x,rows:b}=this.parser.parse(u,m);return this.lines=x,b}processRows(u,m){const x=u.length,b=p=>{const v=T=>T?m(T):p%100!=0?b(p+1):void d(()=>b(p+1));if(this.checkAndEmitHeaders(),p>=x||this.hasHitRowLimit)return m();if(this.parsedLineCount+=1,this.shouldSkipLine)return v();const y=u[p];this.rowCount+=1,this.parsedRowCount+=1;const N=this.rowCount;return this.transformRow(y,(T,_)=>{if(T)return this.rowCount-=1,v(T);if(!_)return v(new Error("expected transform result"));if(_.isValid){if(_.row)return this.pushRow(_.row,v)}else this.emit("data-invalid",_.row,N,_.reason);return v()})};b(0)}transformRow(u,m){try{this.headerTransformer.transform(u,(x,b)=>x?m(x):b?b.isValid?b.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(b.row,m):this.skipRow(m):(this.rowCount-=1,this.parsedRowCount-=1,m(null,{row:null,isValid:!0})):this.shouldEmitRows?m(null,{isValid:!1,row:u}):this.skipRow(m):m(new Error("Expected result from header transform")))}catch(x){m(x)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(u){return this.rowCount-=1,u(null,{row:null,isValid:!0})}pushRow(u,m){try{this.parserOptions.objectMode?this.push(u):this.push(JSON.stringify(u)),m()}catch(x){m(x)}}static wrapDoneCallback(u){let m=!1;return function(x){if(x){if(m)throw x;return m=!0,void u(x)}for(var b=arguments.length,p=new Array(b>1?b-1:0),v=1;v<b;v++)p[v-1]=arguments[v];u(...p)}}}h.CsvParserStream=s}).call(this)}).call(this,t("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(t,f,h){var d=function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(h,"__esModule",{value:!0}),h.ParserOptions=void 0;const n=d(t("lodash.escaperegexp")),l=d(t("lodash.isnil"));h.ParserOptions=class{constructor(i){var r;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,i||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=n.default(this.delimiter),this.escapeChar=(r=this.escape)!==null&&r!==void 0?r:this.quote,this.supportsComments=!l.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(t,f,h){var d=Object.create?function(b,p,v,y){y===void 0&&(y=v),Object.defineProperty(b,y,{enumerable:!0,get:function(){return p[v]}})}:function(b,p,v,y){y===void 0&&(y=v),b[y]=p[v]},n=Object.create?function(b,p){Object.defineProperty(b,"default",{enumerable:!0,value:p})}:function(b,p){b.default=p},l=function(b){if(b&&b.__esModule)return b;var p={};if(b!=null)for(var v in b)v!=="default"&&Object.prototype.hasOwnProperty.call(b,v)&&d(p,b,v);return n(p,b),p},i=function(b,p){for(var v in b)v==="default"||Object.prototype.hasOwnProperty.call(p,v)||d(p,b,v)};Object.defineProperty(h,"__esModule",{value:!0}),h.parseString=h.parseFile=h.parseStream=h.parse=h.ParserOptions=h.CsvParserStream=void 0;const r=l(t("fs")),s=t("stream"),c=t("./ParserOptions"),u=t("./CsvParserStream");i(t("./types"),h);var m=t("./CsvParserStream");Object.defineProperty(h,"CsvParserStream",{enumerable:!0,get:function(){return m.CsvParserStream}});var x=t("./ParserOptions");Object.defineProperty(h,"ParserOptions",{enumerable:!0,get:function(){return x.ParserOptions}}),h.parse=b=>new u.CsvParserStream(new c.ParserOptions(b)),h.parseStream=(b,p)=>b.pipe(new u.CsvParserStream(new c.ParserOptions(p))),h.parseFile=function(b){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r.createReadStream(b).pipe(new u.CsvParserStream(new c.ParserOptions(p)))},h.parseString=(b,p)=>{const v=new s.Readable;return v.push(b),v.push(null),v.pipe(new u.CsvParserStream(new c.ParserOptions(p)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.Parser=void 0;const d=t("./Scanner"),n=t("./RowParser"),l=t("./Token");class i{constructor(s){this.parserOptions=s,this.rowParser=new n.RowParser(this.parserOptions)}static removeBOM(s){return s&&s.charCodeAt(0)===65279?s.slice(1):s}parse(s,c){const u=new d.Scanner({line:i.removeBOM(s),parserOptions:this.parserOptions,hasMoreData:c});return this.parserOptions.supportsComments?this.parseWithComments(u):this.parseWithoutComments(u)}parseWithoutComments(s){const c=[];let u=!0;for(;u;)u=this.parseRow(s,c);return{line:s.line,rows:c}}parseWithComments(s){const{parserOptions:c}=this,u=[];for(let m=s.nextCharacterToken;m!==null;m=s.nextCharacterToken)if(l.Token.isTokenComment(m,c)){if(s.advancePastLine()===null)return{line:s.lineFromCursor,rows:u};if(!s.hasMoreCharacters)return{line:s.lineFromCursor,rows:u};s.truncateToCursor()}else if(!this.parseRow(s,u))break;return{line:s.line,rows:u}}parseRow(s,c){if(!s.nextNonSpaceToken)return!1;const u=this.rowParser.parse(s);return u!==null&&(this.parserOptions.ignoreEmpty&&n.RowParser.isEmptyRow(u)||c.push(u),!0)}}h.Parser=i},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.RowParser=void 0;const d=t("./column"),n=t("./Token");h.RowParser=class{constructor(l){this.parserOptions=l,this.columnParser=new d.ColumnParser(l)}static isEmptyRow(l){return l.join("").replace(/\s+/g,"")===""}parse(l){const{parserOptions:i}=this,{hasMoreData:r}=l,s=l,c=[];let u=this.getStartToken(s,c);for(;u;){if(n.Token.isTokenRowDelimiter(u))return s.advancePastToken(u),!s.hasMoreCharacters&&n.Token.isTokenCarriageReturn(u,i)&&r?null:(s.truncateToCursor(),c);if(!this.shouldSkipColumnParse(s,u,c)){const m=this.columnParser.parse(s);if(m===null)return null;c.push(m)}u=s.nextNonSpaceToken}return r?null:(s.truncateToCursor(),c)}getStartToken(l,i){const r=l.nextNonSpaceToken;return r!==null&&n.Token.isTokenDelimiter(r,this.parserOptions)?(i.push(""),l.nextNonSpaceToken):r}shouldSkipColumnParse(l,i,r){const{parserOptions:s}=this;if(n.Token.isTokenDelimiter(i,s)){l.advancePastToken(i);const c=l.nextCharacterToken;if(!l.hasMoreCharacters||c!==null&&n.Token.isTokenRowDelimiter(c)||c!==null&&n.Token.isTokenDelimiter(c,s))return r.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.Scanner=void 0;const d=t("./Token"),n=/((?:\r\n)|\n|\r)/;h.Scanner=class{constructor(l){this.cursor=0,this.line=l.line,this.lineLength=this.line.length,this.parserOptions=l.parserOptions,this.hasMoreData=l.hasMoreData,this.cursor=l.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:l}=this,i=this.parserOptions.NEXT_TOKEN_REGEXP;if(l.search(i)===-1)return null;const r=i.exec(l);if(r==null)return null;const s=r[1],c=this.cursor+(r.index||0);return new d.Token({token:s,startCursor:c,endCursor:c+s.length-1})}get nextCharacterToken(){const{cursor:l,lineLength:i}=this;return i<=l?null:new d.Token({token:this.line[l],startCursor:l,endCursor:l})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const l=n.exec(this.lineFromCursor);return l?(this.cursor+=(l.index||0)+l[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(l){return this.cursor=l,this}advanceToToken(l){return this.cursor=l.startCursor,this}advancePastToken(l){return this.cursor=l.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.Token=void 0,h.Token=class{constructor(d){this.token=d.token,this.startCursor=d.startCursor,this.endCursor=d.endCursor}static isTokenRowDelimiter(d){const n=d.token;return n==="\r"||n===`
`||n===`\r
`}static isTokenCarriageReturn(d,n){return d.token===n.carriageReturn}static isTokenComment(d,n){return n.supportsComments&&!!d&&d.token===n.comment}static isTokenEscapeCharacter(d,n){return d.token===n.escapeChar}static isTokenQuote(d,n){return d.token===n.quote}static isTokenDelimiter(d,n){return d.token===n.delimiter}}},{}],160:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.ColumnFormatter=void 0,h.ColumnFormatter=class{constructor(d){d.trim?this.format=n=>n.trim():d.ltrim?this.format=n=>n.trimLeft():d.rtrim?this.format=n=>n.trimRight():this.format=n=>n}}},{}],161:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.ColumnParser=void 0;const d=t("./NonQuotedColumnParser"),n=t("./QuotedColumnParser"),l=t("../Token");h.ColumnParser=class{constructor(i){this.parserOptions=i,this.quotedColumnParser=new n.QuotedColumnParser(i),this.nonQuotedColumnParser=new d.NonQuotedColumnParser(i)}parse(i){const{nextNonSpaceToken:r}=i;return r!==null&&l.Token.isTokenQuote(r,this.parserOptions)?(i.advanceToToken(r),this.quotedColumnParser.parse(i)):this.nonQuotedColumnParser.parse(i)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.NonQuotedColumnParser=void 0;const d=t("./ColumnFormatter"),n=t("../Token");h.NonQuotedColumnParser=class{constructor(l){this.parserOptions=l,this.columnFormatter=new d.ColumnFormatter(l)}parse(l){if(!l.hasMoreCharacters)return null;const{parserOptions:i}=this,r=[];let s=l.nextCharacterToken;for(;s&&!n.Token.isTokenDelimiter(s,i)&&!n.Token.isTokenRowDelimiter(s);s=l.nextCharacterToken)r.push(s.token),l.advancePastToken(s);return this.columnFormatter.format(r.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.QuotedColumnParser=void 0;const d=t("./ColumnFormatter"),n=t("../Token");h.QuotedColumnParser=class{constructor(l){this.parserOptions=l,this.columnFormatter=new d.ColumnFormatter(l)}parse(l){if(!l.hasMoreCharacters)return null;const i=l.cursor,{foundClosingQuote:r,col:s}=this.gatherDataBetweenQuotes(l);if(!r){if(l.advanceTo(i),!l.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${l.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(l),s}gatherDataBetweenQuotes(l){const{parserOptions:i}=this;let r=!1,s=!1;const c=[];let u=l.nextCharacterToken;for(;!s&&u!==null;u=l.nextCharacterToken){const m=n.Token.isTokenQuote(u,i);if(!r&&m)r=!0;else if(r)if(n.Token.isTokenEscapeCharacter(u,i)){l.advancePastToken(u);const x=l.nextCharacterToken;x!==null&&(n.Token.isTokenQuote(x,i)||n.Token.isTokenEscapeCharacter(x,i))?(c.push(x.token),u=x):m?s=!0:c.push(u.token)}else m?s=!0:c.push(u.token);l.advancePastToken(u)}return{col:this.columnFormatter.format(c.join("")),foundClosingQuote:s}}checkForMalformedColumn(l){const{parserOptions:i}=this,{nextNonSpaceToken:r}=l;if(r){const s=n.Token.isTokenDelimiter(r,i),c=n.Token.isTokenRowDelimiter(r);if(!s&&!c){const u=l.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${i.escapedDelimiter}' OR new line got: '${r.token}'. at '${u}`)}l.advanceToToken(r)}else l.hasMoreData||l.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.ColumnFormatter=h.QuotedColumnParser=h.NonQuotedColumnParser=h.ColumnParser=void 0;var d=t("./ColumnParser");Object.defineProperty(h,"ColumnParser",{enumerable:!0,get:function(){return d.ColumnParser}});var n=t("./NonQuotedColumnParser");Object.defineProperty(h,"NonQuotedColumnParser",{enumerable:!0,get:function(){return n.NonQuotedColumnParser}});var l=t("./QuotedColumnParser");Object.defineProperty(h,"QuotedColumnParser",{enumerable:!0,get:function(){return l.QuotedColumnParser}});var i=t("./ColumnFormatter");Object.defineProperty(h,"ColumnFormatter",{enumerable:!0,get:function(){return i.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.QuotedColumnParser=h.NonQuotedColumnParser=h.ColumnParser=h.Token=h.Scanner=h.RowParser=h.Parser=void 0;var d=t("./Parser");Object.defineProperty(h,"Parser",{enumerable:!0,get:function(){return d.Parser}});var n=t("./RowParser");Object.defineProperty(h,"RowParser",{enumerable:!0,get:function(){return n.RowParser}});var l=t("./Scanner");Object.defineProperty(h,"Scanner",{enumerable:!0,get:function(){return l.Scanner}});var i=t("./Token");Object.defineProperty(h,"Token",{enumerable:!0,get:function(){return i.Token}});var r=t("./column");Object.defineProperty(h,"ColumnParser",{enumerable:!0,get:function(){return r.ColumnParser}}),Object.defineProperty(h,"NonQuotedColumnParser",{enumerable:!0,get:function(){return r.NonQuotedColumnParser}}),Object.defineProperty(h,"QuotedColumnParser",{enumerable:!0,get:function(){return r.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(t,f,h){var d=function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(h,"__esModule",{value:!0}),h.HeaderTransformer=void 0;const n=d(t("lodash.isundefined")),l=d(t("lodash.isfunction")),i=d(t("lodash.uniq")),r=d(t("lodash.groupby"));h.HeaderTransformer=class{constructor(s){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=s,s.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(s.headers)?this.setHeaders(s.headers):l.default(s.headers)&&(this.headersTransform=s.headers)}transform(s,c){return this.shouldMapRow(s)?c(null,this.processRow(s)):c(null,{row:null,isValid:!0})}shouldMapRow(s){const{parserOptions:c}=this;if(!this.headersTransform&&c.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(s)){if(this.headersTransform)this.setHeaders(this.headersTransform(s));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(s)}return!1}return!0}processRow(s){if(!this.headers)return{row:s,isValid:!0};const{parserOptions:c}=this;if(!c.discardUnmappedColumns&&s.length>this.headersLength){if(!c.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${s.length}`);return{row:s,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${s.length}`}}return c.strictColumnHandling&&s.length<this.headersLength?{row:s,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${s.length}`}:{row:this.mapHeaders(s),isValid:!0}}mapHeaders(s){const c={},{headers:u,headersLength:m}=this;for(let x=0;x<m;x+=1){const b=u[x];if(!n.default(b)){const p=s[x];n.default(p)?c[b]="":c[b]=p}}return c}setHeaders(s){var c;const u=s.filter(m=>!!m);if(i.default(u).length!==u.length){const m=r.default(u),x=Object.keys(m).filter(b=>m[b].length>1);throw new Error("Duplicate headers found "+JSON.stringify(x))}this.headers=s,this.receivedHeaders=!0,this.headersLength=((c=this.headers)===null||c===void 0?void 0:c.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(t,f,h){var d=function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(h,"__esModule",{value:!0}),h.RowTransformerValidator=void 0;const n=d(t("lodash.isfunction")),l=t("../types");class i{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(s){return l.isSyncTransform(s)?(c,u)=>{let m=null;try{m=s(c)}catch(x){return u(x)}return u(null,m)}:s}static createValidator(s){return l.isSyncValidate(s)?(c,u)=>{u(null,{row:c,isValid:s(c)})}:(c,u)=>{s(c,(m,x,b)=>m?u(m):u(null,x?{row:c,isValid:x,reason:b}:{row:c,isValid:!1,reason:b}))}}set rowTransform(s){if(!n.default(s))throw new TypeError("The transform should be a function");this._rowTransform=i.createTransform(s)}set rowValidator(s){if(!n.default(s))throw new TypeError("The validate should be a function");this._rowValidator=i.createValidator(s)}transformAndValidate(s,c){return this.callTransformer(s,(u,m)=>u?c(u):m?this.callValidator(m,(x,b)=>x?c(x):b&&!b.isValid?c(null,{row:m,isValid:!1,reason:b.reason}):c(null,{row:m,isValid:!0})):c(null,{row:null,isValid:!0}))}callTransformer(s,c){return this._rowTransform?this._rowTransform(s,c):c(null,s)}callValidator(s,c){return this._rowValidator?this._rowValidator(s,c):c(null,{row:s,isValid:!0})}}h.RowTransformerValidator=i},{"../types":169,"lodash.isfunction":446}],168:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.HeaderTransformer=h.RowTransformerValidator=void 0;var d=t("./RowTransformerValidator");Object.defineProperty(h,"RowTransformerValidator",{enumerable:!0,get:function(){return d.RowTransformerValidator}});var n=t("./HeaderTransformer");Object.defineProperty(h,"HeaderTransformer",{enumerable:!0,get:function(){return n.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.isSyncValidate=h.isSyncTransform=void 0,h.isSyncTransform=d=>d.length===1,h.isSyncValidate=d=>d.length===1},{}],170:[function(t,f,h){const d=h;d.bignum=t("bn.js"),d.define=t("./asn1/api").define,d.base=t("./asn1/base"),d.constants=t("./asn1/constants"),d.decoders=t("./asn1/decoders"),d.encoders=t("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(t,f,h){const d=t("./encoders"),n=t("./decoders"),l=t("inherits");function i(r,s){this.name=r,this.body=s,this.decoders={},this.encoders={}}h.define=function(r,s){return new i(r,s)},i.prototype._createNamed=function(r){const s=this.name;function c(u){this._initNamed(u,s)}return l(c,r),c.prototype._initNamed=function(u,m){r.call(this,u,m)},new c(this)},i.prototype._getDecoder=function(r){return r=r||"der",this.decoders.hasOwnProperty(r)||(this.decoders[r]=this._createNamed(n[r])),this.decoders[r]},i.prototype.decode=function(r,s,c){return this._getDecoder(s).decode(r,c)},i.prototype._getEncoder=function(r){return r=r||"der",this.encoders.hasOwnProperty(r)||(this.encoders[r]=this._createNamed(d[r])),this.encoders[r]},i.prototype.encode=function(r,s,c){return this._getEncoder(s).encode(r,c)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(t,f,h){const d=t("inherits"),n=t("../base/reporter").Reporter,l=t("safer-buffer").Buffer;function i(s,c){n.call(this,c),l.isBuffer(s)?(this.base=s,this.offset=0,this.length=s.length):this.error("Input not Buffer")}function r(s,c){if(Array.isArray(s))this.length=0,this.value=s.map((function(u){return r.isEncoderBuffer(u)||(u=new r(u,c)),this.length+=u.length,u}),this);else if(typeof s=="number"){if(!(0<=s&&s<=255))return c.error("non-byte EncoderBuffer value");this.value=s,this.length=1}else if(typeof s=="string")this.value=s,this.length=l.byteLength(s);else{if(!l.isBuffer(s))return c.error("Unsupported type: "+typeof s);this.value=s,this.length=s.length}}d(i,n),h.DecoderBuffer=i,i.isDecoderBuffer=function(s){return s instanceof i?!0:typeof s=="object"&&l.isBuffer(s.base)&&s.constructor.name==="DecoderBuffer"&&typeof s.offset=="number"&&typeof s.length=="number"&&typeof s.save=="function"&&typeof s.restore=="function"&&typeof s.isEmpty=="function"&&typeof s.readUInt8=="function"&&typeof s.skip=="function"&&typeof s.raw=="function"},i.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},i.prototype.restore=function(s){const c=new i(this.base);return c.offset=s.offset,c.length=this.offset,this.offset=s.offset,n.prototype.restore.call(this,s.reporter),c},i.prototype.isEmpty=function(){return this.offset===this.length},i.prototype.readUInt8=function(s){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(s||"DecoderBuffer overrun")},i.prototype.skip=function(s,c){if(!(this.offset+s<=this.length))return this.error(c||"DecoderBuffer overrun");const u=new i(this.base);return u._reporterState=this._reporterState,u.offset=this.offset,u.length=this.offset+s,this.offset+=s,u},i.prototype.raw=function(s){return this.base.slice(s?s.offset:this.offset,this.length)},h.EncoderBuffer=r,r.isEncoderBuffer=function(s){return s instanceof r?!0:typeof s=="object"&&s.constructor.name==="EncoderBuffer"&&typeof s.length=="number"&&typeof s.join=="function"},r.prototype.join=function(s,c){return s||(s=l.alloc(this.length)),c||(c=0),this.length===0||(Array.isArray(this.value)?this.value.forEach((function(u){u.join(s,c),c+=u.length})):(typeof this.value=="number"?s[c]=this.value:typeof this.value=="string"?s.write(this.value,c):l.isBuffer(this.value)&&this.value.copy(s,c),c+=this.length)),s}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(t,f,h){const d=h;d.Reporter=t("./reporter").Reporter,d.DecoderBuffer=t("./buffer").DecoderBuffer,d.EncoderBuffer=t("./buffer").EncoderBuffer,d.Node=t("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(t,f,h){const d=t("../base/reporter").Reporter,n=t("../base/buffer").EncoderBuffer,l=t("../base/buffer").DecoderBuffer,i=t("minimalistic-assert"),r=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(r);function c(m,x,b){const p={};this._baseState=p,p.name=b,p.enc=m,p.parent=x||null,p.children=null,p.tag=null,p.args=null,p.reverseArgs=null,p.choice=null,p.optional=!1,p.any=!1,p.obj=!1,p.use=null,p.useDecoder=null,p.key=null,p.default=null,p.explicit=null,p.implicit=null,p.contains=null,p.parent||(p.children=[],this._wrap())}f.exports=c;const u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const m=this._baseState,x={};u.forEach((function(p){x[p]=m[p]}));const b=new this.constructor(x.parent);return b._baseState=x,b},c.prototype._wrap=function(){const m=this._baseState;s.forEach((function(x){this[x]=function(){const b=new this.constructor(this);return m.children.push(b),b[x].apply(b,arguments)}}),this)},c.prototype._init=function(m){const x=this._baseState;i(x.parent===null),m.call(this),x.children=x.children.filter((function(b){return b._baseState.parent===this}),this),i.equal(x.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(m){const x=this._baseState,b=m.filter((function(p){return p instanceof this.constructor}),this);m=m.filter((function(p){return!(p instanceof this.constructor)}),this),b.length!==0&&(i(x.children===null),x.children=b,b.forEach((function(p){p._baseState.parent=this}),this)),m.length!==0&&(i(x.args===null),x.args=m,x.reverseArgs=m.map((function(p){if(typeof p!="object"||p.constructor!==Object)return p;const v={};return Object.keys(p).forEach((function(y){y==(0|y)&&(y|=0);const N=p[y];v[N]=y})),v})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(m){c.prototype[m]=function(){const x=this._baseState;throw new Error(m+" not implemented for encoding: "+x.enc)}})),r.forEach((function(m){c.prototype[m]=function(){const x=this._baseState,b=Array.prototype.slice.call(arguments);return i(x.tag===null),x.tag=m,this._useArgs(b),this}})),c.prototype.use=function(m){i(m);const x=this._baseState;return i(x.use===null),x.use=m,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(m){const x=this._baseState;return i(x.default===null),x.default=m,x.optional=!0,this},c.prototype.explicit=function(m){const x=this._baseState;return i(x.explicit===null&&x.implicit===null),x.explicit=m,this},c.prototype.implicit=function(m){const x=this._baseState;return i(x.explicit===null&&x.implicit===null),x.implicit=m,this},c.prototype.obj=function(){const m=this._baseState,x=Array.prototype.slice.call(arguments);return m.obj=!0,x.length!==0&&this._useArgs(x),this},c.prototype.key=function(m){const x=this._baseState;return i(x.key===null),x.key=m,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(m){const x=this._baseState;return i(x.choice===null),x.choice=m,this._useArgs(Object.keys(m).map((function(b){return m[b]}))),this},c.prototype.contains=function(m){const x=this._baseState;return i(x.use===null),x.contains=m,this},c.prototype._decode=function(m,x){const b=this._baseState;if(b.parent===null)return m.wrapResult(b.children[0]._decode(m,x));let p,v=b.default,y=!0,N=null;if(b.key!==null&&(N=m.enterKey(b.key)),b.optional){let T=null;if(b.explicit!==null?T=b.explicit:b.implicit!==null?T=b.implicit:b.tag!==null&&(T=b.tag),T!==null||b.any){if(y=this._peekTag(m,T,b.any),m.isError(y))return y}else{const _=m.save();try{b.choice===null?this._decodeGeneric(b.tag,m,x):this._decodeChoice(m,x),y=!0}catch{y=!1}m.restore(_)}}if(b.obj&&y&&(p=m.enterObject()),y){if(b.explicit!==null){const _=this._decodeTag(m,b.explicit);if(m.isError(_))return _;m=_}const T=m.offset;if(b.use===null&&b.choice===null){let _;b.any&&(_=m.save());const O=this._decodeTag(m,b.implicit!==null?b.implicit:b.tag,b.any);if(m.isError(O))return O;b.any?v=m.raw(_):m=O}if(x&&x.track&&b.tag!==null&&x.track(m.path(),T,m.length,"tagged"),x&&x.track&&b.tag!==null&&x.track(m.path(),m.offset,m.length,"content"),b.any||(v=b.choice===null?this._decodeGeneric(b.tag,m,x):this._decodeChoice(m,x)),m.isError(v))return v;if(b.any||b.choice!==null||b.children===null||b.children.forEach((function(_){_._decode(m,x)})),b.contains&&(b.tag==="octstr"||b.tag==="bitstr")){const _=new l(v);v=this._getUse(b.contains,m._reporterState.obj)._decode(_,x)}}return b.obj&&y&&(v=m.leaveObject(p)),b.key===null||v===null&&y!==!0?N!==null&&m.exitKey(N):m.leaveKey(N,b.key,v),v},c.prototype._decodeGeneric=function(m,x,b){const p=this._baseState;return m==="seq"||m==="set"?null:m==="seqof"||m==="setof"?this._decodeList(x,m,p.args[0],b):/str$/.test(m)?this._decodeStr(x,m,b):m==="objid"&&p.args?this._decodeObjid(x,p.args[0],p.args[1],b):m==="objid"?this._decodeObjid(x,null,null,b):m==="gentime"||m==="utctime"?this._decodeTime(x,m,b):m==="null_"?this._decodeNull(x,b):m==="bool"?this._decodeBool(x,b):m==="objDesc"?this._decodeStr(x,m,b):m==="int"||m==="enum"?this._decodeInt(x,p.args&&p.args[0],b):p.use!==null?this._getUse(p.use,x._reporterState.obj)._decode(x,b):x.error("unknown tag: "+m)},c.prototype._getUse=function(m,x){const b=this._baseState;return b.useDecoder=this._use(m,x),i(b.useDecoder._baseState.parent===null),b.useDecoder=b.useDecoder._baseState.children[0],b.implicit!==b.useDecoder._baseState.implicit&&(b.useDecoder=b.useDecoder.clone(),b.useDecoder._baseState.implicit=b.implicit),b.useDecoder},c.prototype._decodeChoice=function(m,x){const b=this._baseState;let p=null,v=!1;return Object.keys(b.choice).some((function(y){const N=m.save(),T=b.choice[y];try{const _=T._decode(m,x);if(m.isError(_))return!1;p={type:y,value:_},v=!0}catch{return m.restore(N),!1}return!0}),this),v?p:m.error("Choice not matched")},c.prototype._createEncoderBuffer=function(m){return new n(m,this.reporter)},c.prototype._encode=function(m,x,b){const p=this._baseState;if(p.default!==null&&p.default===m)return;const v=this._encodeValue(m,x,b);return v===void 0||this._skipDefault(v,x,b)?void 0:v},c.prototype._encodeValue=function(m,x,b){const p=this._baseState;if(p.parent===null)return p.children[0]._encode(m,x||new d);let v=null;if(this.reporter=x,p.optional&&m===void 0){if(p.default===null)return;m=p.default}let y=null,N=!1;if(p.any)v=this._createEncoderBuffer(m);else if(p.choice)v=this._encodeChoice(m,x);else if(p.contains)y=this._getUse(p.contains,b)._encode(m,x),N=!0;else if(p.children)y=p.children.map((function(T){if(T._baseState.tag==="null_")return T._encode(null,x,m);if(T._baseState.key===null)return x.error("Child should have a key");const _=x.enterKey(T._baseState.key);if(typeof m!="object")return x.error("Child expected, but input is not object");const O=T._encode(m[T._baseState.key],x,m);return x.leaveKey(_),O}),this).filter((function(T){return T})),y=this._createEncoderBuffer(y);else if(p.tag==="seqof"||p.tag==="setof"){if(!p.args||p.args.length!==1)return x.error("Too many args for : "+p.tag);if(!Array.isArray(m))return x.error("seqof/setof, but data is not Array");const T=this.clone();T._baseState.implicit=null,y=this._createEncoderBuffer(m.map((function(_){const O=this._baseState;return this._getUse(O.args[0],m)._encode(_,x)}),T))}else p.use!==null?v=this._getUse(p.use,b)._encode(m,x):(y=this._encodePrimitive(p.tag,m),N=!0);if(!p.any&&p.choice===null){const T=p.implicit!==null?p.implicit:p.tag,_=p.implicit===null?"universal":"context";T===null?p.use===null&&x.error("Tag could be omitted only for .use()"):p.use===null&&(v=this._encodeComposite(T,N,_,y))}return p.explicit!==null&&(v=this._encodeComposite(p.explicit,!1,"context",v)),v},c.prototype._encodeChoice=function(m,x){const b=this._baseState,p=b.choice[m.type];return p||i(!1,m.type+" not found in "+JSON.stringify(Object.keys(b.choice))),p._encode(m.value,x)},c.prototype._encodePrimitive=function(m,x){const b=this._baseState;if(/str$/.test(m))return this._encodeStr(x,m);if(m==="objid"&&b.args)return this._encodeObjid(x,b.reverseArgs[0],b.args[1]);if(m==="objid")return this._encodeObjid(x,null,null);if(m==="gentime"||m==="utctime")return this._encodeTime(x,m);if(m==="null_")return this._encodeNull();if(m==="int"||m==="enum")return this._encodeInt(x,b.args&&b.reverseArgs[0]);if(m==="bool")return this._encodeBool(x);if(m==="objDesc")return this._encodeStr(x,m);throw new Error("Unsupported tag: "+m)},c.prototype._isNumstr=function(m){return/^[0-9 ]*$/.test(m)},c.prototype._isPrintstr=function(m){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(m)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(t,f,h){const d=t("inherits");function n(i){this._reporterState={obj:null,path:[],options:i||{},errors:[]}}function l(i,r){this.path=i,this.rethrow(r)}h.Reporter=n,n.prototype.isError=function(i){return i instanceof l},n.prototype.save=function(){const i=this._reporterState;return{obj:i.obj,pathLen:i.path.length}},n.prototype.restore=function(i){const r=this._reporterState;r.obj=i.obj,r.path=r.path.slice(0,i.pathLen)},n.prototype.enterKey=function(i){return this._reporterState.path.push(i)},n.prototype.exitKey=function(i){const r=this._reporterState;r.path=r.path.slice(0,i-1)},n.prototype.leaveKey=function(i,r,s){const c=this._reporterState;this.exitKey(i),c.obj!==null&&(c.obj[r]=s)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){const i=this._reporterState,r=i.obj;return i.obj={},r},n.prototype.leaveObject=function(i){const r=this._reporterState,s=r.obj;return r.obj=i,s},n.prototype.error=function(i){let r;const s=this._reporterState,c=i instanceof l;if(r=c?i:new l(s.path.map((function(u){return"["+JSON.stringify(u)+"]"})).join(""),i.message||i,i.stack),!s.options.partial)throw r;return c||s.errors.push(r),r},n.prototype.wrapResult=function(i){const r=this._reporterState;return r.options.partial?{result:this.isError(i)?null:i,errors:r.errors}:i},d(l,Error),l.prototype.rethrow=function(i){if(this.message=i+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,l),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this}},{inherits:440}],176:[function(t,f,h){function d(n){const l={};return Object.keys(n).forEach((function(i){(0|i)==i&&(i|=0);const r=n[i];l[r]=i})),l}h.tagClass={0:"universal",1:"application",2:"context",3:"private"},h.tagClassByName=d(h.tagClass),h.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},h.tagByName=d(h.tag)},{}],177:[function(t,f,h){const d=h;d._reverse=function(n){const l={};return Object.keys(n).forEach((function(i){(0|i)==i&&(i|=0);const r=n[i];l[r]=i})),l},d.der=t("./der")},{"./der":176}],178:[function(t,f,h){const d=t("inherits"),n=t("bn.js"),l=t("../base/buffer").DecoderBuffer,i=t("../base/node"),r=t("../constants/der");function s(x){this.enc="der",this.name=x.name,this.entity=x,this.tree=new c,this.tree._init(x.body)}function c(x){i.call(this,"der",x)}function u(x,b){let p=x.readUInt8(b);if(x.isError(p))return p;const v=r.tagClass[p>>6],y=(32&p)==0;if((31&p)==31){let N=p;for(p=0;(128&N)==128;){if(N=x.readUInt8(b),x.isError(N))return N;p<<=7,p|=127&N}}else p&=31;return{cls:v,primitive:y,tag:p,tagStr:r.tag[p]}}function m(x,b,p){let v=x.readUInt8(p);if(x.isError(v))return v;if(!b&&v===128)return null;if((128&v)==0)return v;const y=127&v;if(y>4)return x.error("length octect is too long");v=0;for(let N=0;N<y;N++){v<<=8;const T=x.readUInt8(p);if(x.isError(T))return T;v|=T}return v}f.exports=s,s.prototype.decode=function(x,b){return l.isDecoderBuffer(x)||(x=new l(x,b)),this.tree._decode(x,b)},d(c,i),c.prototype._peekTag=function(x,b,p){if(x.isEmpty())return!1;const v=x.save(),y=u(x,'Failed to peek tag: "'+b+'"');return x.isError(y)?y:(x.restore(v),y.tag===b||y.tagStr===b||y.tagStr+"of"===b||p)},c.prototype._decodeTag=function(x,b,p){const v=u(x,'Failed to decode tag of "'+b+'"');if(x.isError(v))return v;let y=m(x,v.primitive,'Failed to get length of "'+b+'"');if(x.isError(y))return y;if(!p&&v.tag!==b&&v.tagStr!==b&&v.tagStr+"of"!==b)return x.error('Failed to match tag: "'+b+'"');if(v.primitive||y!==null)return x.skip(y,'Failed to match body of: "'+b+'"');const N=x.save(),T=this._skipUntilEnd(x,'Failed to skip indefinite length body: "'+this.tag+'"');return x.isError(T)?T:(y=x.offset-N.offset,x.restore(N),x.skip(y,'Failed to match body of: "'+b+'"'))},c.prototype._skipUntilEnd=function(x,b){for(;;){const p=u(x,b);if(x.isError(p))return p;const v=m(x,p.primitive,b);if(x.isError(v))return v;let y;if(y=p.primitive||v!==null?x.skip(v):this._skipUntilEnd(x,b),x.isError(y))return y;if(p.tagStr==="end")break}},c.prototype._decodeList=function(x,b,p,v){const y=[];for(;!x.isEmpty();){const N=this._peekTag(x,"end");if(x.isError(N))return N;const T=p.decode(x,"der",v);if(x.isError(T)&&N)break;y.push(T)}return y},c.prototype._decodeStr=function(x,b){if(b==="bitstr"){const p=x.readUInt8();return x.isError(p)?p:{unused:p,data:x.raw()}}if(b==="bmpstr"){const p=x.raw();if(p.length%2==1)return x.error("Decoding of string type: bmpstr length mismatch");let v="";for(let y=0;y<p.length/2;y++)v+=String.fromCharCode(p.readUInt16BE(2*y));return v}if(b==="numstr"){const p=x.raw().toString("ascii");return this._isNumstr(p)?p:x.error("Decoding of string type: numstr unsupported characters")}if(b==="octstr"||b==="objDesc")return x.raw();if(b==="printstr"){const p=x.raw().toString("ascii");return this._isPrintstr(p)?p:x.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(b)?x.raw().toString():x.error("Decoding of string type: "+b+" unsupported")},c.prototype._decodeObjid=function(x,b,p){let v;const y=[];let N=0,T=0;for(;!x.isEmpty();)T=x.readUInt8(),N<<=7,N|=127&T,(128&T)==0&&(y.push(N),N=0);128&T&&y.push(N);const _=y[0]/40|0,O=y[0]%40;if(v=p?y:[_,O].concat(y.slice(1)),b){let H=b[v.join(" ")];H===void 0&&(H=b[v.join(".")]),H!==void 0&&(v=H)}return v},c.prototype._decodeTime=function(x,b){const p=x.raw().toString();let v,y,N,T,_,O;if(b==="gentime")v=0|p.slice(0,4),y=0|p.slice(4,6),N=0|p.slice(6,8),T=0|p.slice(8,10),_=0|p.slice(10,12),O=0|p.slice(12,14);else{if(b!=="utctime")return x.error("Decoding "+b+" time is not supported yet");v=0|p.slice(0,2),y=0|p.slice(2,4),N=0|p.slice(4,6),T=0|p.slice(6,8),_=0|p.slice(8,10),O=0|p.slice(10,12),v=v<70?2e3+v:1900+v}return Date.UTC(v,y-1,N,T,_,O,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(x){const b=x.readUInt8();return x.isError(b)?b:b!==0},c.prototype._decodeInt=function(x,b){const p=x.raw();let v=new n(p);return b&&(v=b[v.toString(10)]||v),v},c.prototype._use=function(x,b){return typeof x=="function"&&(x=x(b)),x._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(t,f,h){const d=h;d.der=t("./der"),d.pem=t("./pem")},{"./der":178,"./pem":180}],180:[function(t,f,h){const d=t("inherits"),n=t("safer-buffer").Buffer,l=t("./der");function i(r){l.call(this,r),this.enc="pem"}d(i,l),f.exports=i,i.prototype.decode=function(r,s){const c=r.toString().split(/[\r\n]+/g),u=s.label.toUpperCase(),m=/^-----(BEGIN|END) ([^-]+)-----$/;let x=-1,b=-1;for(let y=0;y<c.length;y++){const N=c[y].match(m);if(N!==null&&N[2]===u){if(x!==-1){if(N[1]!=="END")break;b=y;break}if(N[1]!=="BEGIN")break;x=y}}if(x===-1||b===-1)throw new Error("PEM section not found for: "+u);const p=c.slice(x+1,b).join("");p.replace(/[^a-z0-9+/=]+/gi,"");const v=n.from(p,"base64");return l.prototype.decode.call(this,v,s)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(t,f,h){const d=t("inherits"),n=t("safer-buffer").Buffer,l=t("../base/node"),i=t("../constants/der");function r(u){this.enc="der",this.name=u.name,this.entity=u,this.tree=new s,this.tree._init(u.body)}function s(u){l.call(this,"der",u)}function c(u){return u<10?"0"+u:u}f.exports=r,r.prototype.encode=function(u,m){return this.tree._encode(u,m).join()},d(s,l),s.prototype._encodeComposite=function(u,m,x,b){const p=(function(N,T,_,O){let H;if(N==="seqof"?N="seq":N==="setof"&&(N="set"),i.tagByName.hasOwnProperty(N))H=i.tagByName[N];else{if(typeof N!="number"||(0|N)!==N)return O.error("Unknown tag: "+N);H=N}return H>=31?O.error("Multi-octet tag encoding unsupported"):(T||(H|=32),H|=i.tagClassByName[_||"universal"]<<6,H)})(u,m,x,this.reporter);if(b.length<128){const N=n.alloc(2);return N[0]=p,N[1]=b.length,this._createEncoderBuffer([N,b])}let v=1;for(let N=b.length;N>=256;N>>=8)v++;const y=n.alloc(2+v);y[0]=p,y[1]=128|v;for(let N=1+v,T=b.length;T>0;N--,T>>=8)y[N]=255&T;return this._createEncoderBuffer([y,b])},s.prototype._encodeStr=function(u,m){if(m==="bitstr")return this._createEncoderBuffer([0|u.unused,u.data]);if(m==="bmpstr"){const x=n.alloc(2*u.length);for(let b=0;b<u.length;b++)x.writeUInt16BE(u.charCodeAt(b),2*b);return this._createEncoderBuffer(x)}return m==="numstr"?this._isNumstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: numstr supports only digits and space"):m==="printstr"?this._isPrintstr(u)?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(m)||m==="objDesc"?this._createEncoderBuffer(u):this.reporter.error("Encoding of string type: "+m+" unsupported")},s.prototype._encodeObjid=function(u,m,x){if(typeof u=="string"){if(!m)return this.reporter.error("string objid given, but no values map found");if(!m.hasOwnProperty(u))return this.reporter.error("objid not found in values map");u=m[u].split(/[\s.]+/g);for(let y=0;y<u.length;y++)u[y]|=0}else if(Array.isArray(u)){u=u.slice();for(let y=0;y<u.length;y++)u[y]|=0}if(!Array.isArray(u))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(u));if(!x){if(u[1]>=40)return this.reporter.error("Second objid identifier OOB");u.splice(0,2,40*u[0]+u[1])}let b=0;for(let y=0;y<u.length;y++){let N=u[y];for(b++;N>=128;N>>=7)b++}const p=n.alloc(b);let v=p.length-1;for(let y=u.length-1;y>=0;y--){let N=u[y];for(p[v--]=127&N;(N>>=7)>0;)p[v--]=128|127&N}return this._createEncoderBuffer(p)},s.prototype._encodeTime=function(u,m){let x;const b=new Date(u);return m==="gentime"?x=[c(b.getUTCFullYear()),c(b.getUTCMonth()+1),c(b.getUTCDate()),c(b.getUTCHours()),c(b.getUTCMinutes()),c(b.getUTCSeconds()),"Z"].join(""):m==="utctime"?x=[c(b.getUTCFullYear()%100),c(b.getUTCMonth()+1),c(b.getUTCDate()),c(b.getUTCHours()),c(b.getUTCMinutes()),c(b.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+m+" time is not supported yet"),this._encodeStr(x,"octstr")},s.prototype._encodeNull=function(){return this._createEncoderBuffer("")},s.prototype._encodeInt=function(u,m){if(typeof u=="string"){if(!m)return this.reporter.error("String int or enum given, but no values map");if(!m.hasOwnProperty(u))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(u));u=m[u]}if(typeof u!="number"&&!n.isBuffer(u)){const p=u.toArray();!u.sign&&128&p[0]&&p.unshift(0),u=n.from(p)}if(n.isBuffer(u)){let p=u.length;u.length===0&&p++;const v=n.alloc(p);return u.copy(v),u.length===0&&(v[0]=0),this._createEncoderBuffer(v)}if(u<128)return this._createEncoderBuffer(u);if(u<256)return this._createEncoderBuffer([0,u]);let x=1;for(let p=u;p>=256;p>>=8)x++;const b=new Array(x);for(let p=b.length-1;p>=0;p--)b[p]=255&u,u>>=8;return 128&b[0]&&b.unshift(0),this._createEncoderBuffer(n.from(b))},s.prototype._encodeBool=function(u){return this._createEncoderBuffer(u?255:0)},s.prototype._use=function(u,m){return typeof u=="function"&&(u=u(m)),u._getEncoder("der").tree},s.prototype._skipDefault=function(u,m,x){const b=this._baseState;let p;if(b.default===null)return!1;const v=u.join();if(b.defaultBuffer===void 0&&(b.defaultBuffer=this._encodeValue(b.default,m,x).join()),v.length!==b.defaultBuffer.length)return!1;for(p=0;p<v.length;p++)if(v[p]!==b.defaultBuffer[p])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(t,f,h){const d=h;d.der=t("./der"),d.pem=t("./pem")},{"./der":181,"./pem":183}],183:[function(t,f,h){const d=t("inherits"),n=t("./der");function l(i){n.call(this,i),this.enc="pem"}d(l,n),f.exports=l,l.prototype.encode=function(i,r){const s=n.prototype.encode.call(this,i).toString("base64"),c=["-----BEGIN "+r.label+"-----"];for(let u=0;u<s.length;u+=64)c.push(s.slice(u,u+64));return c.push("-----END "+r.label+"-----"),c.join(`
`)}},{"./der":181,inherits:440}],184:[function(t,f,h){(function(d,n){function l(E,P){if(!E)throw new Error(P||"Assertion failed")}function i(E,P){E.super_=P;var A=function(){};A.prototype=P.prototype,E.prototype=new A,E.prototype.constructor=E}function r(E,P,A){if(r.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&(P!=="le"&&P!=="be"||(A=P,P=10),this._init(E||0,P||10,A||"be"))}var s;typeof d=="object"?d.exports=r:(void 0).BN=r,r.BN=r,r.wordSize=26;try{s=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function c(E,P){var A=E.charCodeAt(P);return A>=65&&A<=70?A-55:A>=97&&A<=102?A-87:A-48&15}function u(E,P,A){var k=c(E,A);return A-1>=P&&(k|=c(E,A-1)<<4),k}function m(E,P,A,k){for(var j=0,S=Math.min(E.length,A),C=P;C<S;C++){var D=E.charCodeAt(C)-48;j*=k,j+=D>=49?D-49+10:D>=17?D-17+10:D}return j}r.isBN=function(E){return E instanceof r||E!==null&&typeof E=="object"&&E.constructor.wordSize===r.wordSize&&Array.isArray(E.words)},r.max=function(E,P){return E.cmp(P)>0?E:P},r.min=function(E,P){return E.cmp(P)<0?E:P},r.prototype._init=function(E,P,A){if(typeof E=="number")return this._initNumber(E,P,A);if(typeof E=="object")return this._initArray(E,P,A);P==="hex"&&(P=16),l(P===(0|P)&&P>=2&&P<=36);var k=0;(E=E.toString().replace(/\s+/g,""))[0]==="-"&&(k++,this.negative=1),k<E.length&&(P===16?this._parseHex(E,k,A):(this._parseBase(E,P,k),A==="le"&&this._initArray(this.toArray(),P,A)))},r.prototype._initNumber=function(E,P,A){E<0&&(this.negative=1,E=-E),E<67108864?(this.words=[67108863&E],this.length=1):E<4503599627370496?(this.words=[67108863&E,E/67108864&67108863],this.length=2):(l(E<9007199254740992),this.words=[67108863&E,E/67108864&67108863,1],this.length=3),A==="le"&&this._initArray(this.toArray(),P,A)},r.prototype._initArray=function(E,P,A){if(l(typeof E.length=="number"),E.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(E.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var j,S,C=0;if(A==="be")for(k=E.length-1,j=0;k>=0;k-=3)S=E[k]|E[k-1]<<8|E[k-2]<<16,this.words[j]|=S<<C&67108863,this.words[j+1]=S>>>26-C&67108863,(C+=24)>=26&&(C-=26,j++);else if(A==="le")for(k=0,j=0;k<E.length;k+=3)S=E[k]|E[k+1]<<8|E[k+2]<<16,this.words[j]|=S<<C&67108863,this.words[j+1]=S>>>26-C&67108863,(C+=24)>=26&&(C-=26,j++);return this.strip()},r.prototype._parseHex=function(E,P,A){this.length=Math.ceil((E.length-P)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var j,S=0,C=0;if(A==="be")for(k=E.length-1;k>=P;k-=2)j=u(E,P,k)<<S,this.words[C]|=67108863&j,S>=18?(S-=18,C+=1,this.words[C]|=j>>>26):S+=8;else for(k=(E.length-P)%2==0?P+1:P;k<E.length;k+=2)j=u(E,P,k)<<S,this.words[C]|=67108863&j,S>=18?(S-=18,C+=1,this.words[C]|=j>>>26):S+=8;this.strip()},r.prototype._parseBase=function(E,P,A){this.words=[0],this.length=1;for(var k=0,j=1;j<=67108863;j*=P)k++;k--,j=j/P|0;for(var S=E.length-A,C=S%k,D=Math.min(S,S-C)+A,R=0,L=A;L<D;L+=k)R=m(E,L,L+k,P),this.imuln(j),this.words[0]+R<67108864?this.words[0]+=R:this._iaddn(R);if(C!==0){var Y=1;for(R=m(E,L,E.length,P),L=0;L<C;L++)Y*=P;this.imuln(Y),this.words[0]+R<67108864?this.words[0]+=R:this._iaddn(R)}this.strip()},r.prototype.copy=function(E){E.words=new Array(this.length);for(var P=0;P<this.length;P++)E.words[P]=this.words[P];E.length=this.length,E.negative=this.negative,E.red=this.red},r.prototype.clone=function(){var E=new r(null);return this.copy(E),E},r.prototype._expand=function(E){for(;this.length<E;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function v(E,P,A){A.negative=P.negative^E.negative;var k=E.length+P.length|0;A.length=k,k=k-1|0;var j=0|E.words[0],S=0|P.words[0],C=j*S,D=67108863&C,R=C/67108864|0;A.words[0]=D;for(var L=1;L<k;L++){for(var Y=R>>>26,X=67108863&R,ae=Math.min(L,P.length-1),$=Math.max(0,L-E.length+1);$<=ae;$++){var Q=L-$|0;Y+=(C=(j=0|E.words[Q])*(S=0|P.words[$])+X)/67108864|0,X=67108863&C}A.words[L]=0|X,R=0|Y}return R!==0?A.words[L]=0|R:A.length--,A.strip()}r.prototype.toString=function(E,P){var A;if(P=0|P||1,(E=E||10)===16||E==="hex"){A="";for(var k=0,j=0,S=0;S<this.length;S++){var C=this.words[S],D=(16777215&(C<<k|j)).toString(16);A=(j=C>>>24-k&16777215)!==0||S!==this.length-1?x[6-D.length]+D+A:D+A,(k+=2)>=26&&(k-=26,S--)}for(j!==0&&(A=j.toString(16)+A);A.length%P!=0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}if(E===(0|E)&&E>=2&&E<=36){var R=b[E],L=p[E];A="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var X=Y.modn(L).toString(E);A=(Y=Y.idivn(L)).isZero()?X+A:x[R-X.length]+X+A}for(this.isZero()&&(A="0"+A);A.length%P!=0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}l(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var E=this.words[0];return this.length===2?E+=67108864*this.words[1]:this.length===3&&this.words[2]===1?E+=4503599627370496+67108864*this.words[1]:this.length>2&&l(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-E:E},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(E,P){return l(s!==void 0),this.toArrayLike(s,E,P)},r.prototype.toArray=function(E,P){return this.toArrayLike(Array,E,P)},r.prototype.toArrayLike=function(E,P,A){var k=this.byteLength(),j=A||Math.max(1,k);l(k<=j,"byte array longer than desired length"),l(j>0,"Requested array length <= 0"),this.strip();var S,C,D=P==="le",R=new E(j),L=this.clone();if(D){for(C=0;!L.isZero();C++)S=L.andln(255),L.iushrn(8),R[C]=S;for(;C<j;C++)R[C]=0}else{for(C=0;C<j-k;C++)R[C]=0;for(C=0;!L.isZero();C++)S=L.andln(255),L.iushrn(8),R[j-C-1]=S}return R},Math.clz32?r.prototype._countBits=function(E){return 32-Math.clz32(E)}:r.prototype._countBits=function(E){var P=E,A=0;return P>=4096&&(A+=13,P>>>=13),P>=64&&(A+=7,P>>>=7),P>=8&&(A+=4,P>>>=4),P>=2&&(A+=2,P>>>=2),A+P},r.prototype._zeroBits=function(E){if(E===0)return 26;var P=E,A=0;return(8191&P)==0&&(A+=13,P>>>=13),(127&P)==0&&(A+=7,P>>>=7),(15&P)==0&&(A+=4,P>>>=4),(3&P)==0&&(A+=2,P>>>=2),(1&P)==0&&A++,A},r.prototype.bitLength=function(){var E=this.words[this.length-1],P=this._countBits(E);return 26*(this.length-1)+P},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var E=0,P=0;P<this.length;P++){var A=this._zeroBits(this.words[P]);if(E+=A,A!==26)break}return E},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(E){return this.negative!==0?this.abs().inotn(E).iaddn(1):this.clone()},r.prototype.fromTwos=function(E){return this.testn(E-1)?this.notn(E).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(E){for(;this.length<E.length;)this.words[this.length++]=0;for(var P=0;P<E.length;P++)this.words[P]=this.words[P]|E.words[P];return this.strip()},r.prototype.ior=function(E){return l((this.negative|E.negative)==0),this.iuor(E)},r.prototype.or=function(E){return this.length>E.length?this.clone().ior(E):E.clone().ior(this)},r.prototype.uor=function(E){return this.length>E.length?this.clone().iuor(E):E.clone().iuor(this)},r.prototype.iuand=function(E){var P;P=this.length>E.length?E:this;for(var A=0;A<P.length;A++)this.words[A]=this.words[A]&E.words[A];return this.length=P.length,this.strip()},r.prototype.iand=function(E){return l((this.negative|E.negative)==0),this.iuand(E)},r.prototype.and=function(E){return this.length>E.length?this.clone().iand(E):E.clone().iand(this)},r.prototype.uand=function(E){return this.length>E.length?this.clone().iuand(E):E.clone().iuand(this)},r.prototype.iuxor=function(E){var P,A;this.length>E.length?(P=this,A=E):(P=E,A=this);for(var k=0;k<A.length;k++)this.words[k]=P.words[k]^A.words[k];if(this!==P)for(;k<P.length;k++)this.words[k]=P.words[k];return this.length=P.length,this.strip()},r.prototype.ixor=function(E){return l((this.negative|E.negative)==0),this.iuxor(E)},r.prototype.xor=function(E){return this.length>E.length?this.clone().ixor(E):E.clone().ixor(this)},r.prototype.uxor=function(E){return this.length>E.length?this.clone().iuxor(E):E.clone().iuxor(this)},r.prototype.inotn=function(E){l(typeof E=="number"&&E>=0);var P=0|Math.ceil(E/26),A=E%26;this._expand(P),A>0&&P--;for(var k=0;k<P;k++)this.words[k]=67108863&~this.words[k];return A>0&&(this.words[k]=~this.words[k]&67108863>>26-A),this.strip()},r.prototype.notn=function(E){return this.clone().inotn(E)},r.prototype.setn=function(E,P){l(typeof E=="number"&&E>=0);var A=E/26|0,k=E%26;return this._expand(A+1),this.words[A]=P?this.words[A]|1<<k:this.words[A]&~(1<<k),this.strip()},r.prototype.iadd=function(E){var P,A,k;if(this.negative!==0&&E.negative===0)return this.negative=0,P=this.isub(E),this.negative^=1,this._normSign();if(this.negative===0&&E.negative!==0)return E.negative=0,P=this.isub(E),E.negative=1,P._normSign();this.length>E.length?(A=this,k=E):(A=E,k=this);for(var j=0,S=0;S<k.length;S++)P=(0|A.words[S])+(0|k.words[S])+j,this.words[S]=67108863&P,j=P>>>26;for(;j!==0&&S<A.length;S++)P=(0|A.words[S])+j,this.words[S]=67108863&P,j=P>>>26;if(this.length=A.length,j!==0)this.words[this.length]=j,this.length++;else if(A!==this)for(;S<A.length;S++)this.words[S]=A.words[S];return this},r.prototype.add=function(E){var P;return E.negative!==0&&this.negative===0?(E.negative=0,P=this.sub(E),E.negative^=1,P):E.negative===0&&this.negative!==0?(this.negative=0,P=E.sub(this),this.negative=1,P):this.length>E.length?this.clone().iadd(E):E.clone().iadd(this)},r.prototype.isub=function(E){if(E.negative!==0){E.negative=0;var P=this.iadd(E);return E.negative=1,P._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(E),this.negative=1,this._normSign();var A,k,j=this.cmp(E);if(j===0)return this.negative=0,this.length=1,this.words[0]=0,this;j>0?(A=this,k=E):(A=E,k=this);for(var S=0,C=0;C<k.length;C++)S=(P=(0|A.words[C])-(0|k.words[C])+S)>>26,this.words[C]=67108863&P;for(;S!==0&&C<A.length;C++)S=(P=(0|A.words[C])+S)>>26,this.words[C]=67108863&P;if(S===0&&C<A.length&&A!==this)for(;C<A.length;C++)this.words[C]=A.words[C];return this.length=Math.max(this.length,C),A!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(E){return this.clone().isub(E)};var y=function(E,P,A){var k,j,S,C=E.words,D=P.words,R=A.words,L=0,Y=0|C[0],X=8191&Y,ae=Y>>>13,$=0|C[1],Q=8191&$,z=$>>>13,M=0|C[2],U=8191&M,te=M>>>13,ie=0|C[3],se=8191&ie,le=ie>>>13,Ne=0|C[4],ke=8191&Ne,Z=Ne>>>13,ce=0|C[5],ve=8191&ce,De=ce>>>13,Ae=0|C[6],Ie=8191&Ae,Ue=Ae>>>13,Ge=0|C[7],Le=8191&Ge,at=Ge>>>13,ut=0|C[8],Ce=8191&ut,it=ut>>>13,xt=0|C[9],jt=8191&xt,Ee=xt>>>13,xe=0|D[0],Be=8191&xe,$e=xe>>>13,ye=0|D[1],oe=8191&ye,me=ye>>>13,ue=0|D[2],ze=8191&ue,tt=ue>>>13,kt=0|D[3],we=8191&kt,st=kt>>>13,wt=0|D[4],pe=8191&wt,Qe=wt>>>13,fe=0|D[5],He=8191&fe,lt=fe>>>13,Pe=0|D[6],rt=8191&Pe,je=Pe>>>13,Me=0|D[7],Ye=8191&Me,dt=Me>>>13,mt=0|D[8],yt=8191&mt,Gt=mt>>>13,Lt=0|D[9],Oe=8191&Lt,ot=Lt>>>13;A.negative=E.negative^P.negative,A.length=19;var ht=(L+(k=Math.imul(X,Be))|0)+((8191&(j=(j=Math.imul(X,$e))+Math.imul(ae,Be)|0))<<13)|0;L=((S=Math.imul(ae,$e))+(j>>>13)|0)+(ht>>>26)|0,ht&=67108863,k=Math.imul(Q,Be),j=(j=Math.imul(Q,$e))+Math.imul(z,Be)|0,S=Math.imul(z,$e);var It=(L+(k=k+Math.imul(X,oe)|0)|0)+((8191&(j=(j=j+Math.imul(X,me)|0)+Math.imul(ae,oe)|0))<<13)|0;L=((S=S+Math.imul(ae,me)|0)+(j>>>13)|0)+(It>>>26)|0,It&=67108863,k=Math.imul(U,Be),j=(j=Math.imul(U,$e))+Math.imul(te,Be)|0,S=Math.imul(te,$e),k=k+Math.imul(Q,oe)|0,j=(j=j+Math.imul(Q,me)|0)+Math.imul(z,oe)|0,S=S+Math.imul(z,me)|0;var Tt=(L+(k=k+Math.imul(X,ze)|0)|0)+((8191&(j=(j=j+Math.imul(X,tt)|0)+Math.imul(ae,ze)|0))<<13)|0;L=((S=S+Math.imul(ae,tt)|0)+(j>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,k=Math.imul(se,Be),j=(j=Math.imul(se,$e))+Math.imul(le,Be)|0,S=Math.imul(le,$e),k=k+Math.imul(U,oe)|0,j=(j=j+Math.imul(U,me)|0)+Math.imul(te,oe)|0,S=S+Math.imul(te,me)|0,k=k+Math.imul(Q,ze)|0,j=(j=j+Math.imul(Q,tt)|0)+Math.imul(z,ze)|0,S=S+Math.imul(z,tt)|0;var Mt=(L+(k=k+Math.imul(X,we)|0)|0)+((8191&(j=(j=j+Math.imul(X,st)|0)+Math.imul(ae,we)|0))<<13)|0;L=((S=S+Math.imul(ae,st)|0)+(j>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,k=Math.imul(ke,Be),j=(j=Math.imul(ke,$e))+Math.imul(Z,Be)|0,S=Math.imul(Z,$e),k=k+Math.imul(se,oe)|0,j=(j=j+Math.imul(se,me)|0)+Math.imul(le,oe)|0,S=S+Math.imul(le,me)|0,k=k+Math.imul(U,ze)|0,j=(j=j+Math.imul(U,tt)|0)+Math.imul(te,ze)|0,S=S+Math.imul(te,tt)|0,k=k+Math.imul(Q,we)|0,j=(j=j+Math.imul(Q,st)|0)+Math.imul(z,we)|0,S=S+Math.imul(z,st)|0;var Re=(L+(k=k+Math.imul(X,pe)|0)|0)+((8191&(j=(j=j+Math.imul(X,Qe)|0)+Math.imul(ae,pe)|0))<<13)|0;L=((S=S+Math.imul(ae,Qe)|0)+(j>>>13)|0)+(Re>>>26)|0,Re&=67108863,k=Math.imul(ve,Be),j=(j=Math.imul(ve,$e))+Math.imul(De,Be)|0,S=Math.imul(De,$e),k=k+Math.imul(ke,oe)|0,j=(j=j+Math.imul(ke,me)|0)+Math.imul(Z,oe)|0,S=S+Math.imul(Z,me)|0,k=k+Math.imul(se,ze)|0,j=(j=j+Math.imul(se,tt)|0)+Math.imul(le,ze)|0,S=S+Math.imul(le,tt)|0,k=k+Math.imul(U,we)|0,j=(j=j+Math.imul(U,st)|0)+Math.imul(te,we)|0,S=S+Math.imul(te,st)|0,k=k+Math.imul(Q,pe)|0,j=(j=j+Math.imul(Q,Qe)|0)+Math.imul(z,pe)|0,S=S+Math.imul(z,Qe)|0;var pt=(L+(k=k+Math.imul(X,He)|0)|0)+((8191&(j=(j=j+Math.imul(X,lt)|0)+Math.imul(ae,He)|0))<<13)|0;L=((S=S+Math.imul(ae,lt)|0)+(j>>>13)|0)+(pt>>>26)|0,pt&=67108863,k=Math.imul(Ie,Be),j=(j=Math.imul(Ie,$e))+Math.imul(Ue,Be)|0,S=Math.imul(Ue,$e),k=k+Math.imul(ve,oe)|0,j=(j=j+Math.imul(ve,me)|0)+Math.imul(De,oe)|0,S=S+Math.imul(De,me)|0,k=k+Math.imul(ke,ze)|0,j=(j=j+Math.imul(ke,tt)|0)+Math.imul(Z,ze)|0,S=S+Math.imul(Z,tt)|0,k=k+Math.imul(se,we)|0,j=(j=j+Math.imul(se,st)|0)+Math.imul(le,we)|0,S=S+Math.imul(le,st)|0,k=k+Math.imul(U,pe)|0,j=(j=j+Math.imul(U,Qe)|0)+Math.imul(te,pe)|0,S=S+Math.imul(te,Qe)|0,k=k+Math.imul(Q,He)|0,j=(j=j+Math.imul(Q,lt)|0)+Math.imul(z,He)|0,S=S+Math.imul(z,lt)|0;var Ot=(L+(k=k+Math.imul(X,rt)|0)|0)+((8191&(j=(j=j+Math.imul(X,je)|0)+Math.imul(ae,rt)|0))<<13)|0;L=((S=S+Math.imul(ae,je)|0)+(j>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,k=Math.imul(Le,Be),j=(j=Math.imul(Le,$e))+Math.imul(at,Be)|0,S=Math.imul(at,$e),k=k+Math.imul(Ie,oe)|0,j=(j=j+Math.imul(Ie,me)|0)+Math.imul(Ue,oe)|0,S=S+Math.imul(Ue,me)|0,k=k+Math.imul(ve,ze)|0,j=(j=j+Math.imul(ve,tt)|0)+Math.imul(De,ze)|0,S=S+Math.imul(De,tt)|0,k=k+Math.imul(ke,we)|0,j=(j=j+Math.imul(ke,st)|0)+Math.imul(Z,we)|0,S=S+Math.imul(Z,st)|0,k=k+Math.imul(se,pe)|0,j=(j=j+Math.imul(se,Qe)|0)+Math.imul(le,pe)|0,S=S+Math.imul(le,Qe)|0,k=k+Math.imul(U,He)|0,j=(j=j+Math.imul(U,lt)|0)+Math.imul(te,He)|0,S=S+Math.imul(te,lt)|0,k=k+Math.imul(Q,rt)|0,j=(j=j+Math.imul(Q,je)|0)+Math.imul(z,rt)|0,S=S+Math.imul(z,je)|0;var Se=(L+(k=k+Math.imul(X,Ye)|0)|0)+((8191&(j=(j=j+Math.imul(X,dt)|0)+Math.imul(ae,Ye)|0))<<13)|0;L=((S=S+Math.imul(ae,dt)|0)+(j>>>13)|0)+(Se>>>26)|0,Se&=67108863,k=Math.imul(Ce,Be),j=(j=Math.imul(Ce,$e))+Math.imul(it,Be)|0,S=Math.imul(it,$e),k=k+Math.imul(Le,oe)|0,j=(j=j+Math.imul(Le,me)|0)+Math.imul(at,oe)|0,S=S+Math.imul(at,me)|0,k=k+Math.imul(Ie,ze)|0,j=(j=j+Math.imul(Ie,tt)|0)+Math.imul(Ue,ze)|0,S=S+Math.imul(Ue,tt)|0,k=k+Math.imul(ve,we)|0,j=(j=j+Math.imul(ve,st)|0)+Math.imul(De,we)|0,S=S+Math.imul(De,st)|0,k=k+Math.imul(ke,pe)|0,j=(j=j+Math.imul(ke,Qe)|0)+Math.imul(Z,pe)|0,S=S+Math.imul(Z,Qe)|0,k=k+Math.imul(se,He)|0,j=(j=j+Math.imul(se,lt)|0)+Math.imul(le,He)|0,S=S+Math.imul(le,lt)|0,k=k+Math.imul(U,rt)|0,j=(j=j+Math.imul(U,je)|0)+Math.imul(te,rt)|0,S=S+Math.imul(te,je)|0,k=k+Math.imul(Q,Ye)|0,j=(j=j+Math.imul(Q,dt)|0)+Math.imul(z,Ye)|0,S=S+Math.imul(z,dt)|0;var qe=(L+(k=k+Math.imul(X,yt)|0)|0)+((8191&(j=(j=j+Math.imul(X,Gt)|0)+Math.imul(ae,yt)|0))<<13)|0;L=((S=S+Math.imul(ae,Gt)|0)+(j>>>13)|0)+(qe>>>26)|0,qe&=67108863,k=Math.imul(jt,Be),j=(j=Math.imul(jt,$e))+Math.imul(Ee,Be)|0,S=Math.imul(Ee,$e),k=k+Math.imul(Ce,oe)|0,j=(j=j+Math.imul(Ce,me)|0)+Math.imul(it,oe)|0,S=S+Math.imul(it,me)|0,k=k+Math.imul(Le,ze)|0,j=(j=j+Math.imul(Le,tt)|0)+Math.imul(at,ze)|0,S=S+Math.imul(at,tt)|0,k=k+Math.imul(Ie,we)|0,j=(j=j+Math.imul(Ie,st)|0)+Math.imul(Ue,we)|0,S=S+Math.imul(Ue,st)|0,k=k+Math.imul(ve,pe)|0,j=(j=j+Math.imul(ve,Qe)|0)+Math.imul(De,pe)|0,S=S+Math.imul(De,Qe)|0,k=k+Math.imul(ke,He)|0,j=(j=j+Math.imul(ke,lt)|0)+Math.imul(Z,He)|0,S=S+Math.imul(Z,lt)|0,k=k+Math.imul(se,rt)|0,j=(j=j+Math.imul(se,je)|0)+Math.imul(le,rt)|0,S=S+Math.imul(le,je)|0,k=k+Math.imul(U,Ye)|0,j=(j=j+Math.imul(U,dt)|0)+Math.imul(te,Ye)|0,S=S+Math.imul(te,dt)|0,k=k+Math.imul(Q,yt)|0,j=(j=j+Math.imul(Q,Gt)|0)+Math.imul(z,yt)|0,S=S+Math.imul(z,Gt)|0;var ft=(L+(k=k+Math.imul(X,Oe)|0)|0)+((8191&(j=(j=j+Math.imul(X,ot)|0)+Math.imul(ae,Oe)|0))<<13)|0;L=((S=S+Math.imul(ae,ot)|0)+(j>>>13)|0)+(ft>>>26)|0,ft&=67108863,k=Math.imul(jt,oe),j=(j=Math.imul(jt,me))+Math.imul(Ee,oe)|0,S=Math.imul(Ee,me),k=k+Math.imul(Ce,ze)|0,j=(j=j+Math.imul(Ce,tt)|0)+Math.imul(it,ze)|0,S=S+Math.imul(it,tt)|0,k=k+Math.imul(Le,we)|0,j=(j=j+Math.imul(Le,st)|0)+Math.imul(at,we)|0,S=S+Math.imul(at,st)|0,k=k+Math.imul(Ie,pe)|0,j=(j=j+Math.imul(Ie,Qe)|0)+Math.imul(Ue,pe)|0,S=S+Math.imul(Ue,Qe)|0,k=k+Math.imul(ve,He)|0,j=(j=j+Math.imul(ve,lt)|0)+Math.imul(De,He)|0,S=S+Math.imul(De,lt)|0,k=k+Math.imul(ke,rt)|0,j=(j=j+Math.imul(ke,je)|0)+Math.imul(Z,rt)|0,S=S+Math.imul(Z,je)|0,k=k+Math.imul(se,Ye)|0,j=(j=j+Math.imul(se,dt)|0)+Math.imul(le,Ye)|0,S=S+Math.imul(le,dt)|0,k=k+Math.imul(U,yt)|0,j=(j=j+Math.imul(U,Gt)|0)+Math.imul(te,yt)|0,S=S+Math.imul(te,Gt)|0;var Ct=(L+(k=k+Math.imul(Q,Oe)|0)|0)+((8191&(j=(j=j+Math.imul(Q,ot)|0)+Math.imul(z,Oe)|0))<<13)|0;L=((S=S+Math.imul(z,ot)|0)+(j>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,k=Math.imul(jt,ze),j=(j=Math.imul(jt,tt))+Math.imul(Ee,ze)|0,S=Math.imul(Ee,tt),k=k+Math.imul(Ce,we)|0,j=(j=j+Math.imul(Ce,st)|0)+Math.imul(it,we)|0,S=S+Math.imul(it,st)|0,k=k+Math.imul(Le,pe)|0,j=(j=j+Math.imul(Le,Qe)|0)+Math.imul(at,pe)|0,S=S+Math.imul(at,Qe)|0,k=k+Math.imul(Ie,He)|0,j=(j=j+Math.imul(Ie,lt)|0)+Math.imul(Ue,He)|0,S=S+Math.imul(Ue,lt)|0,k=k+Math.imul(ve,rt)|0,j=(j=j+Math.imul(ve,je)|0)+Math.imul(De,rt)|0,S=S+Math.imul(De,je)|0,k=k+Math.imul(ke,Ye)|0,j=(j=j+Math.imul(ke,dt)|0)+Math.imul(Z,Ye)|0,S=S+Math.imul(Z,dt)|0,k=k+Math.imul(se,yt)|0,j=(j=j+Math.imul(se,Gt)|0)+Math.imul(le,yt)|0,S=S+Math.imul(le,Gt)|0;var er=(L+(k=k+Math.imul(U,Oe)|0)|0)+((8191&(j=(j=j+Math.imul(U,ot)|0)+Math.imul(te,Oe)|0))<<13)|0;L=((S=S+Math.imul(te,ot)|0)+(j>>>13)|0)+(er>>>26)|0,er&=67108863,k=Math.imul(jt,we),j=(j=Math.imul(jt,st))+Math.imul(Ee,we)|0,S=Math.imul(Ee,st),k=k+Math.imul(Ce,pe)|0,j=(j=j+Math.imul(Ce,Qe)|0)+Math.imul(it,pe)|0,S=S+Math.imul(it,Qe)|0,k=k+Math.imul(Le,He)|0,j=(j=j+Math.imul(Le,lt)|0)+Math.imul(at,He)|0,S=S+Math.imul(at,lt)|0,k=k+Math.imul(Ie,rt)|0,j=(j=j+Math.imul(Ie,je)|0)+Math.imul(Ue,rt)|0,S=S+Math.imul(Ue,je)|0,k=k+Math.imul(ve,Ye)|0,j=(j=j+Math.imul(ve,dt)|0)+Math.imul(De,Ye)|0,S=S+Math.imul(De,dt)|0,k=k+Math.imul(ke,yt)|0,j=(j=j+Math.imul(ke,Gt)|0)+Math.imul(Z,yt)|0,S=S+Math.imul(Z,Gt)|0;var Rt=(L+(k=k+Math.imul(se,Oe)|0)|0)+((8191&(j=(j=j+Math.imul(se,ot)|0)+Math.imul(le,Oe)|0))<<13)|0;L=((S=S+Math.imul(le,ot)|0)+(j>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,k=Math.imul(jt,pe),j=(j=Math.imul(jt,Qe))+Math.imul(Ee,pe)|0,S=Math.imul(Ee,Qe),k=k+Math.imul(Ce,He)|0,j=(j=j+Math.imul(Ce,lt)|0)+Math.imul(it,He)|0,S=S+Math.imul(it,lt)|0,k=k+Math.imul(Le,rt)|0,j=(j=j+Math.imul(Le,je)|0)+Math.imul(at,rt)|0,S=S+Math.imul(at,je)|0,k=k+Math.imul(Ie,Ye)|0,j=(j=j+Math.imul(Ie,dt)|0)+Math.imul(Ue,Ye)|0,S=S+Math.imul(Ue,dt)|0,k=k+Math.imul(ve,yt)|0,j=(j=j+Math.imul(ve,Gt)|0)+Math.imul(De,yt)|0,S=S+Math.imul(De,Gt)|0;var Ht=(L+(k=k+Math.imul(ke,Oe)|0)|0)+((8191&(j=(j=j+Math.imul(ke,ot)|0)+Math.imul(Z,Oe)|0))<<13)|0;L=((S=S+Math.imul(Z,ot)|0)+(j>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,k=Math.imul(jt,He),j=(j=Math.imul(jt,lt))+Math.imul(Ee,He)|0,S=Math.imul(Ee,lt),k=k+Math.imul(Ce,rt)|0,j=(j=j+Math.imul(Ce,je)|0)+Math.imul(it,rt)|0,S=S+Math.imul(it,je)|0,k=k+Math.imul(Le,Ye)|0,j=(j=j+Math.imul(Le,dt)|0)+Math.imul(at,Ye)|0,S=S+Math.imul(at,dt)|0,k=k+Math.imul(Ie,yt)|0,j=(j=j+Math.imul(Ie,Gt)|0)+Math.imul(Ue,yt)|0,S=S+Math.imul(Ue,Gt)|0;var ir=(L+(k=k+Math.imul(ve,Oe)|0)|0)+((8191&(j=(j=j+Math.imul(ve,ot)|0)+Math.imul(De,Oe)|0))<<13)|0;L=((S=S+Math.imul(De,ot)|0)+(j>>>13)|0)+(ir>>>26)|0,ir&=67108863,k=Math.imul(jt,rt),j=(j=Math.imul(jt,je))+Math.imul(Ee,rt)|0,S=Math.imul(Ee,je),k=k+Math.imul(Ce,Ye)|0,j=(j=j+Math.imul(Ce,dt)|0)+Math.imul(it,Ye)|0,S=S+Math.imul(it,dt)|0,k=k+Math.imul(Le,yt)|0,j=(j=j+Math.imul(Le,Gt)|0)+Math.imul(at,yt)|0,S=S+Math.imul(at,Gt)|0;var Zt=(L+(k=k+Math.imul(Ie,Oe)|0)|0)+((8191&(j=(j=j+Math.imul(Ie,ot)|0)+Math.imul(Ue,Oe)|0))<<13)|0;L=((S=S+Math.imul(Ue,ot)|0)+(j>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,k=Math.imul(jt,Ye),j=(j=Math.imul(jt,dt))+Math.imul(Ee,Ye)|0,S=Math.imul(Ee,dt),k=k+Math.imul(Ce,yt)|0,j=(j=j+Math.imul(Ce,Gt)|0)+Math.imul(it,yt)|0,S=S+Math.imul(it,Gt)|0;var qt=(L+(k=k+Math.imul(Le,Oe)|0)|0)+((8191&(j=(j=j+Math.imul(Le,ot)|0)+Math.imul(at,Oe)|0))<<13)|0;L=((S=S+Math.imul(at,ot)|0)+(j>>>13)|0)+(qt>>>26)|0,qt&=67108863,k=Math.imul(jt,yt),j=(j=Math.imul(jt,Gt))+Math.imul(Ee,yt)|0,S=Math.imul(Ee,Gt);var nr=(L+(k=k+Math.imul(Ce,Oe)|0)|0)+((8191&(j=(j=j+Math.imul(Ce,ot)|0)+Math.imul(it,Oe)|0))<<13)|0;L=((S=S+Math.imul(it,ot)|0)+(j>>>13)|0)+(nr>>>26)|0,nr&=67108863;var fr=(L+(k=Math.imul(jt,Oe))|0)+((8191&(j=(j=Math.imul(jt,ot))+Math.imul(Ee,Oe)|0))<<13)|0;return L=((S=Math.imul(Ee,ot))+(j>>>13)|0)+(fr>>>26)|0,fr&=67108863,R[0]=ht,R[1]=It,R[2]=Tt,R[3]=Mt,R[4]=Re,R[5]=pt,R[6]=Ot,R[7]=Se,R[8]=qe,R[9]=ft,R[10]=Ct,R[11]=er,R[12]=Rt,R[13]=Ht,R[14]=ir,R[15]=Zt,R[16]=qt,R[17]=nr,R[18]=fr,L!==0&&(R[19]=L,A.length++),A};function N(E,P,A){return new T().mulp(E,P,A)}function T(E,P){this.x=E,this.y=P}Math.imul||(y=v),r.prototype.mulTo=function(E,P){var A=this.length+E.length;return this.length===10&&E.length===10?y(this,E,P):A<63?v(this,E,P):A<1024?(function(k,j,S){S.negative=j.negative^k.negative,S.length=k.length+j.length;for(var C=0,D=0,R=0;R<S.length-1;R++){var L=D;D=0;for(var Y=67108863&C,X=Math.min(R,j.length-1),ae=Math.max(0,R-k.length+1);ae<=X;ae++){var $=R-ae,Q=(0|k.words[$])*(0|j.words[ae]),z=67108863&Q;Y=67108863&(z=z+Y|0),D+=(L=(L=L+(Q/67108864|0)|0)+(z>>>26)|0)>>>26,L&=67108863}S.words[R]=Y,C=L,L=D}return C!==0?S.words[R]=C:S.length--,S.strip()})(this,E,P):N(this,E,P)},T.prototype.makeRBT=function(E){for(var P=new Array(E),A=r.prototype._countBits(E)-1,k=0;k<E;k++)P[k]=this.revBin(k,A,E);return P},T.prototype.revBin=function(E,P,A){if(E===0||E===A-1)return E;for(var k=0,j=0;j<P;j++)k|=(1&E)<<P-j-1,E>>=1;return k},T.prototype.permute=function(E,P,A,k,j,S){for(var C=0;C<S;C++)k[C]=P[E[C]],j[C]=A[E[C]]},T.prototype.transform=function(E,P,A,k,j,S){this.permute(S,E,P,A,k,j);for(var C=1;C<j;C<<=1)for(var D=C<<1,R=Math.cos(2*Math.PI/D),L=Math.sin(2*Math.PI/D),Y=0;Y<j;Y+=D)for(var X=R,ae=L,$=0;$<C;$++){var Q=A[Y+$],z=k[Y+$],M=A[Y+$+C],U=k[Y+$+C],te=X*M-ae*U;U=X*U+ae*M,M=te,A[Y+$]=Q+M,k[Y+$]=z+U,A[Y+$+C]=Q-M,k[Y+$+C]=z-U,$!==D&&(te=R*X-L*ae,ae=R*ae+L*X,X=te)}},T.prototype.guessLen13b=function(E,P){var A=1|Math.max(P,E),k=1&A,j=0;for(A=A/2|0;A;A>>>=1)j++;return 1<<j+1+k},T.prototype.conjugate=function(E,P,A){if(!(A<=1))for(var k=0;k<A/2;k++){var j=E[k];E[k]=E[A-k-1],E[A-k-1]=j,j=P[k],P[k]=-P[A-k-1],P[A-k-1]=-j}},T.prototype.normalize13b=function(E,P){for(var A=0,k=0;k<P/2;k++){var j=8192*Math.round(E[2*k+1]/P)+Math.round(E[2*k]/P)+A;E[k]=67108863&j,A=j<67108864?0:j/67108864|0}return E},T.prototype.convert13b=function(E,P,A,k){for(var j=0,S=0;S<P;S++)j+=0|E[S],A[2*S]=8191&j,j>>>=13,A[2*S+1]=8191&j,j>>>=13;for(S=2*P;S<k;++S)A[S]=0;l(j===0),l((-8192&j)==0)},T.prototype.stub=function(E){for(var P=new Array(E),A=0;A<E;A++)P[A]=0;return P},T.prototype.mulp=function(E,P,A){var k=2*this.guessLen13b(E.length,P.length),j=this.makeRBT(k),S=this.stub(k),C=new Array(k),D=new Array(k),R=new Array(k),L=new Array(k),Y=new Array(k),X=new Array(k),ae=A.words;ae.length=k,this.convert13b(E.words,E.length,C,k),this.convert13b(P.words,P.length,L,k),this.transform(C,S,D,R,k,j),this.transform(L,S,Y,X,k,j);for(var $=0;$<k;$++){var Q=D[$]*Y[$]-R[$]*X[$];R[$]=D[$]*X[$]+R[$]*Y[$],D[$]=Q}return this.conjugate(D,R,k),this.transform(D,R,ae,S,k,j),this.conjugate(ae,S,k),this.normalize13b(ae,k),A.negative=E.negative^P.negative,A.length=E.length+P.length,A.strip()},r.prototype.mul=function(E){var P=new r(null);return P.words=new Array(this.length+E.length),this.mulTo(E,P)},r.prototype.mulf=function(E){var P=new r(null);return P.words=new Array(this.length+E.length),N(this,E,P)},r.prototype.imul=function(E){return this.clone().mulTo(E,this)},r.prototype.imuln=function(E){l(typeof E=="number"),l(E<67108864);for(var P=0,A=0;A<this.length;A++){var k=(0|this.words[A])*E,j=(67108863&k)+(67108863&P);P>>=26,P+=k/67108864|0,P+=j>>>26,this.words[A]=67108863&j}return P!==0&&(this.words[A]=P,this.length++),this},r.prototype.muln=function(E){return this.clone().imuln(E)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(E){var P=(function(S){for(var C=new Array(S.bitLength()),D=0;D<C.length;D++){var R=D/26|0,L=D%26;C[D]=(S.words[R]&1<<L)>>>L}return C})(E);if(P.length===0)return new r(1);for(var A=this,k=0;k<P.length&&P[k]===0;k++,A=A.sqr());if(++k<P.length)for(var j=A.sqr();k<P.length;k++,j=j.sqr())P[k]!==0&&(A=A.mul(j));return A},r.prototype.iushln=function(E){l(typeof E=="number"&&E>=0);var P,A=E%26,k=(E-A)/26,j=67108863>>>26-A<<26-A;if(A!==0){var S=0;for(P=0;P<this.length;P++){var C=this.words[P]&j,D=(0|this.words[P])-C<<A;this.words[P]=D|S,S=C>>>26-A}S&&(this.words[P]=S,this.length++)}if(k!==0){for(P=this.length-1;P>=0;P--)this.words[P+k]=this.words[P];for(P=0;P<k;P++)this.words[P]=0;this.length+=k}return this.strip()},r.prototype.ishln=function(E){return l(this.negative===0),this.iushln(E)},r.prototype.iushrn=function(E,P,A){var k;l(typeof E=="number"&&E>=0),k=P?(P-P%26)/26:0;var j=E%26,S=Math.min((E-j)/26,this.length),C=67108863^67108863>>>j<<j,D=A;if(k-=S,k=Math.max(0,k),D){for(var R=0;R<S;R++)D.words[R]=this.words[R];D.length=S}if(S!==0)if(this.length>S)for(this.length-=S,R=0;R<this.length;R++)this.words[R]=this.words[R+S];else this.words[0]=0,this.length=1;var L=0;for(R=this.length-1;R>=0&&(L!==0||R>=k);R--){var Y=0|this.words[R];this.words[R]=L<<26-j|Y>>>j,L=Y&C}return D&&L!==0&&(D.words[D.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(E,P,A){return l(this.negative===0),this.iushrn(E,P,A)},r.prototype.shln=function(E){return this.clone().ishln(E)},r.prototype.ushln=function(E){return this.clone().iushln(E)},r.prototype.shrn=function(E){return this.clone().ishrn(E)},r.prototype.ushrn=function(E){return this.clone().iushrn(E)},r.prototype.testn=function(E){l(typeof E=="number"&&E>=0);var P=E%26,A=(E-P)/26,k=1<<P;return!(this.length<=A)&&!!(this.words[A]&k)},r.prototype.imaskn=function(E){l(typeof E=="number"&&E>=0);var P=E%26,A=(E-P)/26;if(l(this.negative===0,"imaskn works only with positive numbers"),this.length<=A)return this;if(P!==0&&A++,this.length=Math.min(A,this.length),P!==0){var k=67108863^67108863>>>P<<P;this.words[this.length-1]&=k}return this.strip()},r.prototype.maskn=function(E){return this.clone().imaskn(E)},r.prototype.iaddn=function(E){return l(typeof E=="number"),l(E<67108864),E<0?this.isubn(-E):this.negative!==0?this.length===1&&(0|this.words[0])<E?(this.words[0]=E-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(E),this.negative=1,this):this._iaddn(E)},r.prototype._iaddn=function(E){this.words[0]+=E;for(var P=0;P<this.length&&this.words[P]>=67108864;P++)this.words[P]-=67108864,P===this.length-1?this.words[P+1]=1:this.words[P+1]++;return this.length=Math.max(this.length,P+1),this},r.prototype.isubn=function(E){if(l(typeof E=="number"),l(E<67108864),E<0)return this.iaddn(-E);if(this.negative!==0)return this.negative=0,this.iaddn(E),this.negative=1,this;if(this.words[0]-=E,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var P=0;P<this.length&&this.words[P]<0;P++)this.words[P]+=67108864,this.words[P+1]-=1;return this.strip()},r.prototype.addn=function(E){return this.clone().iaddn(E)},r.prototype.subn=function(E){return this.clone().isubn(E)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(E,P,A){var k,j,S=E.length+A;this._expand(S);var C=0;for(k=0;k<E.length;k++){j=(0|this.words[k+A])+C;var D=(0|E.words[k])*P;C=((j-=67108863&D)>>26)-(D/67108864|0),this.words[k+A]=67108863&j}for(;k<this.length-A;k++)C=(j=(0|this.words[k+A])+C)>>26,this.words[k+A]=67108863&j;if(C===0)return this.strip();for(l(C===-1),C=0,k=0;k<this.length;k++)C=(j=-(0|this.words[k])+C)>>26,this.words[k]=67108863&j;return this.negative=1,this.strip()},r.prototype._wordDiv=function(E,P){var A=(this.length,E.length),k=this.clone(),j=E,S=0|j.words[j.length-1];(A=26-this._countBits(S))!==0&&(j=j.ushln(A),k.iushln(A),S=0|j.words[j.length-1]);var C,D=k.length-j.length;if(P!=="mod"){(C=new r(null)).length=D+1,C.words=new Array(C.length);for(var R=0;R<C.length;R++)C.words[R]=0}var L=k.clone()._ishlnsubmul(j,1,D);L.negative===0&&(k=L,C&&(C.words[D]=1));for(var Y=D-1;Y>=0;Y--){var X=67108864*(0|k.words[j.length+Y])+(0|k.words[j.length+Y-1]);for(X=Math.min(X/S|0,67108863),k._ishlnsubmul(j,X,Y);k.negative!==0;)X--,k.negative=0,k._ishlnsubmul(j,1,Y),k.isZero()||(k.negative^=1);C&&(C.words[Y]=X)}return C&&C.strip(),k.strip(),P!=="div"&&A!==0&&k.iushrn(A),{div:C||null,mod:k}},r.prototype.divmod=function(E,P,A){return l(!E.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:this.negative!==0&&E.negative===0?(S=this.neg().divmod(E,P),P!=="mod"&&(k=S.div.neg()),P!=="div"&&(j=S.mod.neg(),A&&j.negative!==0&&j.iadd(E)),{div:k,mod:j}):this.negative===0&&E.negative!==0?(S=this.divmod(E.neg(),P),P!=="mod"&&(k=S.div.neg()),{div:k,mod:S.mod}):(this.negative&E.negative)!=0?(S=this.neg().divmod(E.neg(),P),P!=="div"&&(j=S.mod.neg(),A&&j.negative!==0&&j.isub(E)),{div:S.div,mod:j}):E.length>this.length||this.cmp(E)<0?{div:new r(0),mod:this}:E.length===1?P==="div"?{div:this.divn(E.words[0]),mod:null}:P==="mod"?{div:null,mod:new r(this.modn(E.words[0]))}:{div:this.divn(E.words[0]),mod:new r(this.modn(E.words[0]))}:this._wordDiv(E,P);var k,j,S},r.prototype.div=function(E){return this.divmod(E,"div",!1).div},r.prototype.mod=function(E){return this.divmod(E,"mod",!1).mod},r.prototype.umod=function(E){return this.divmod(E,"mod",!0).mod},r.prototype.divRound=function(E){var P=this.divmod(E);if(P.mod.isZero())return P.div;var A=P.div.negative!==0?P.mod.isub(E):P.mod,k=E.ushrn(1),j=E.andln(1),S=A.cmp(k);return S<0||j===1&&S===0?P.div:P.div.negative!==0?P.div.isubn(1):P.div.iaddn(1)},r.prototype.modn=function(E){l(E<=67108863);for(var P=(1<<26)%E,A=0,k=this.length-1;k>=0;k--)A=(P*A+(0|this.words[k]))%E;return A},r.prototype.idivn=function(E){l(E<=67108863);for(var P=0,A=this.length-1;A>=0;A--){var k=(0|this.words[A])+67108864*P;this.words[A]=k/E|0,P=k%E}return this.strip()},r.prototype.divn=function(E){return this.clone().idivn(E)},r.prototype.egcd=function(E){l(E.negative===0),l(!E.isZero());var P=this,A=E.clone();P=P.negative!==0?P.umod(E):P.clone();for(var k=new r(1),j=new r(0),S=new r(0),C=new r(1),D=0;P.isEven()&&A.isEven();)P.iushrn(1),A.iushrn(1),++D;for(var R=A.clone(),L=P.clone();!P.isZero();){for(var Y=0,X=1;(P.words[0]&X)==0&&Y<26;++Y,X<<=1);if(Y>0)for(P.iushrn(Y);Y-- >0;)(k.isOdd()||j.isOdd())&&(k.iadd(R),j.isub(L)),k.iushrn(1),j.iushrn(1);for(var ae=0,$=1;(A.words[0]&$)==0&&ae<26;++ae,$<<=1);if(ae>0)for(A.iushrn(ae);ae-- >0;)(S.isOdd()||C.isOdd())&&(S.iadd(R),C.isub(L)),S.iushrn(1),C.iushrn(1);P.cmp(A)>=0?(P.isub(A),k.isub(S),j.isub(C)):(A.isub(P),S.isub(k),C.isub(j))}return{a:S,b:C,gcd:A.iushln(D)}},r.prototype._invmp=function(E){l(E.negative===0),l(!E.isZero());var P=this,A=E.clone();P=P.negative!==0?P.umod(E):P.clone();for(var k,j=new r(1),S=new r(0),C=A.clone();P.cmpn(1)>0&&A.cmpn(1)>0;){for(var D=0,R=1;(P.words[0]&R)==0&&D<26;++D,R<<=1);if(D>0)for(P.iushrn(D);D-- >0;)j.isOdd()&&j.iadd(C),j.iushrn(1);for(var L=0,Y=1;(A.words[0]&Y)==0&&L<26;++L,Y<<=1);if(L>0)for(A.iushrn(L);L-- >0;)S.isOdd()&&S.iadd(C),S.iushrn(1);P.cmp(A)>=0?(P.isub(A),j.isub(S)):(A.isub(P),S.isub(j))}return(k=P.cmpn(1)===0?j:S).cmpn(0)<0&&k.iadd(E),k},r.prototype.gcd=function(E){if(this.isZero())return E.abs();if(E.isZero())return this.abs();var P=this.clone(),A=E.clone();P.negative=0,A.negative=0;for(var k=0;P.isEven()&&A.isEven();k++)P.iushrn(1),A.iushrn(1);for(;;){for(;P.isEven();)P.iushrn(1);for(;A.isEven();)A.iushrn(1);var j=P.cmp(A);if(j<0){var S=P;P=A,A=S}else if(j===0||A.cmpn(1)===0)break;P.isub(A)}return A.iushln(k)},r.prototype.invm=function(E){return this.egcd(E).a.umod(E)},r.prototype.isEven=function(){return(1&this.words[0])==0},r.prototype.isOdd=function(){return(1&this.words[0])==1},r.prototype.andln=function(E){return this.words[0]&E},r.prototype.bincn=function(E){l(typeof E=="number");var P=E%26,A=(E-P)/26,k=1<<P;if(this.length<=A)return this._expand(A+1),this.words[A]|=k,this;for(var j=k,S=A;j!==0&&S<this.length;S++){var C=0|this.words[S];j=(C+=j)>>>26,C&=67108863,this.words[S]=C}return j!==0&&(this.words[S]=j,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(E){var P,A=E<0;if(this.negative!==0&&!A)return-1;if(this.negative===0&&A)return 1;if(this.strip(),this.length>1)P=1;else{A&&(E=-E),l(E<=67108863,"Number is too big");var k=0|this.words[0];P=k===E?0:k<E?-1:1}return this.negative!==0?0|-P:P},r.prototype.cmp=function(E){if(this.negative!==0&&E.negative===0)return-1;if(this.negative===0&&E.negative!==0)return 1;var P=this.ucmp(E);return this.negative!==0?0|-P:P},r.prototype.ucmp=function(E){if(this.length>E.length)return 1;if(this.length<E.length)return-1;for(var P=0,A=this.length-1;A>=0;A--){var k=0|this.words[A],j=0|E.words[A];if(k!==j){k<j?P=-1:k>j&&(P=1);break}}return P},r.prototype.gtn=function(E){return this.cmpn(E)===1},r.prototype.gt=function(E){return this.cmp(E)===1},r.prototype.gten=function(E){return this.cmpn(E)>=0},r.prototype.gte=function(E){return this.cmp(E)>=0},r.prototype.ltn=function(E){return this.cmpn(E)===-1},r.prototype.lt=function(E){return this.cmp(E)===-1},r.prototype.lten=function(E){return this.cmpn(E)<=0},r.prototype.lte=function(E){return this.cmp(E)<=0},r.prototype.eqn=function(E){return this.cmpn(E)===0},r.prototype.eq=function(E){return this.cmp(E)===0},r.red=function(E){return new W(E)},r.prototype.toRed=function(E){return l(!this.red,"Already a number in reduction context"),l(this.negative===0,"red works only with positives"),E.convertTo(this)._forceRed(E)},r.prototype.fromRed=function(){return l(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(E){return this.red=E,this},r.prototype.forceRed=function(E){return l(!this.red,"Already a number in reduction context"),this._forceRed(E)},r.prototype.redAdd=function(E){return l(this.red,"redAdd works only with red numbers"),this.red.add(this,E)},r.prototype.redIAdd=function(E){return l(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,E)},r.prototype.redSub=function(E){return l(this.red,"redSub works only with red numbers"),this.red.sub(this,E)},r.prototype.redISub=function(E){return l(this.red,"redISub works only with red numbers"),this.red.isub(this,E)},r.prototype.redShl=function(E){return l(this.red,"redShl works only with red numbers"),this.red.shl(this,E)},r.prototype.redMul=function(E){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.mul(this,E)},r.prototype.redIMul=function(E){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.imul(this,E)},r.prototype.redSqr=function(){return l(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return l(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return l(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return l(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return l(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(E){return l(this.red&&!E.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,E)};var _={k256:null,p224:null,p192:null,p25519:null};function O(E,P){this.name=E,this.p=new r(P,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function H(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function F(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function V(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function q(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function W(E){if(typeof E=="string"){var P=r._prime(E);this.m=P.p,this.prime=P}else l(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}function B(E){W.call(this,E),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}O.prototype._tmp=function(){var E=new r(null);return E.words=new Array(Math.ceil(this.n/13)),E},O.prototype.ireduce=function(E){var P,A=E;do this.split(A,this.tmp),P=(A=(A=this.imulK(A)).iadd(this.tmp)).bitLength();while(P>this.n);var k=P<this.n?-1:A.ucmp(this.p);return k===0?(A.words[0]=0,A.length=1):k>0?A.isub(this.p):A.strip!==void 0?A.strip():A._strip(),A},O.prototype.split=function(E,P){E.iushrn(this.n,0,P)},O.prototype.imulK=function(E){return E.imul(this.k)},i(H,O),H.prototype.split=function(E,P){for(var A=Math.min(E.length,9),k=0;k<A;k++)P.words[k]=E.words[k];if(P.length=A,E.length<=9)return E.words[0]=0,void(E.length=1);var j=E.words[9];for(P.words[P.length++]=4194303&j,k=10;k<E.length;k++){var S=0|E.words[k];E.words[k-10]=(4194303&S)<<4|j>>>22,j=S}j>>>=22,E.words[k-10]=j,j===0&&E.length>10?E.length-=10:E.length-=9},H.prototype.imulK=function(E){E.words[E.length]=0,E.words[E.length+1]=0,E.length+=2;for(var P=0,A=0;A<E.length;A++){var k=0|E.words[A];P+=977*k,E.words[A]=67108863&P,P=64*k+(P/67108864|0)}return E.words[E.length-1]===0&&(E.length--,E.words[E.length-1]===0&&E.length--),E},i(F,O),i(V,O),i(q,O),q.prototype.imulK=function(E){for(var P=0,A=0;A<E.length;A++){var k=19*(0|E.words[A])+P,j=67108863&k;k>>>=26,E.words[A]=j,P=k}return P!==0&&(E.words[E.length++]=P),E},r._prime=function(E){if(_[E])return _[E];var P;if(E==="k256")P=new H;else if(E==="p224")P=new F;else if(E==="p192")P=new V;else{if(E!=="p25519")throw new Error("Unknown prime "+E);P=new q}return _[E]=P,P},W.prototype._verify1=function(E){l(E.negative===0,"red works only with positives"),l(E.red,"red works only with red numbers")},W.prototype._verify2=function(E,P){l((E.negative|P.negative)==0,"red works only with positives"),l(E.red&&E.red===P.red,"red works only with red numbers")},W.prototype.imod=function(E){return this.prime?this.prime.ireduce(E)._forceRed(this):E.umod(this.m)._forceRed(this)},W.prototype.neg=function(E){return E.isZero()?E.clone():this.m.sub(E)._forceRed(this)},W.prototype.add=function(E,P){this._verify2(E,P);var A=E.add(P);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},W.prototype.iadd=function(E,P){this._verify2(E,P);var A=E.iadd(P);return A.cmp(this.m)>=0&&A.isub(this.m),A},W.prototype.sub=function(E,P){this._verify2(E,P);var A=E.sub(P);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},W.prototype.isub=function(E,P){this._verify2(E,P);var A=E.isub(P);return A.cmpn(0)<0&&A.iadd(this.m),A},W.prototype.shl=function(E,P){return this._verify1(E),this.imod(E.ushln(P))},W.prototype.imul=function(E,P){return this._verify2(E,P),this.imod(E.imul(P))},W.prototype.mul=function(E,P){return this._verify2(E,P),this.imod(E.mul(P))},W.prototype.isqr=function(E){return this.imul(E,E.clone())},W.prototype.sqr=function(E){return this.mul(E,E)},W.prototype.sqrt=function(E){if(E.isZero())return E.clone();var P=this.m.andln(3);if(l(P%2==1),P===3){var A=this.m.add(new r(1)).iushrn(2);return this.pow(E,A)}for(var k=this.m.subn(1),j=0;!k.isZero()&&k.andln(1)===0;)j++,k.iushrn(1);l(!k.isZero());var S=new r(1).toRed(this),C=S.redNeg(),D=this.m.subn(1).iushrn(1),R=this.m.bitLength();for(R=new r(2*R*R).toRed(this);this.pow(R,D).cmp(C)!==0;)R.redIAdd(C);for(var L=this.pow(R,k),Y=this.pow(E,k.addn(1).iushrn(1)),X=this.pow(E,k),ae=j;X.cmp(S)!==0;){for(var $=X,Q=0;$.cmp(S)!==0;Q++)$=$.redSqr();l(Q<ae);var z=this.pow(L,new r(1).iushln(ae-Q-1));Y=Y.redMul(z),L=z.redSqr(),X=X.redMul(L),ae=Q}return Y},W.prototype.invm=function(E){var P=E._invmp(this.m);return P.negative!==0?(P.negative=0,this.imod(P).redNeg()):this.imod(P)},W.prototype.pow=function(E,P){if(P.isZero())return new r(1).toRed(this);if(P.cmpn(1)===0)return E.clone();var A=new Array(16);A[0]=new r(1).toRed(this),A[1]=E;for(var k=2;k<A.length;k++)A[k]=this.mul(A[k-1],E);var j=A[0],S=0,C=0,D=P.bitLength()%26;for(D===0&&(D=26),k=P.length-1;k>=0;k--){for(var R=P.words[k],L=D-1;L>=0;L--){var Y=R>>L&1;j!==A[0]&&(j=this.sqr(j)),Y!==0||S!==0?(S<<=1,S|=Y,(++C===4||k===0&&L===0)&&(j=this.mul(j,A[S]),C=0,S=0)):C=0}D=26}return j},W.prototype.convertTo=function(E){var P=E.umod(this.m);return P===E?P.clone():P},W.prototype.convertFrom=function(E){var P=E.clone();return P.red=null,P},r.mont=function(E){return new B(E)},i(B,W),B.prototype.convertTo=function(E){return this.imod(E.ushln(this.shift))},B.prototype.convertFrom=function(E){var P=this.imod(E.mul(this.rinv));return P.red=null,P},B.prototype.imul=function(E,P){if(E.isZero()||P.isZero())return E.words[0]=0,E.length=1,E;var A=E.imul(P),k=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=A.isub(k).iushrn(this.shift),S=j;return j.cmp(this.m)>=0?S=j.isub(this.m):j.cmpn(0)<0&&(S=j.iadd(this.m)),S._forceRed(this)},B.prototype.mul=function(E,P){if(E.isZero()||P.isZero())return new r(0)._forceRed(this);var A=E.mul(P),k=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=A.isub(k).iushrn(this.shift),S=j;return j.cmp(this.m)>=0?S=j.isub(this.m):j.cmpn(0)<0&&(S=j.iadd(this.m)),S._forceRed(this)},B.prototype.invm=function(E){return this.imod(E._invmp(this.m).mul(this.r2))._forceRed(this)}})(f===void 0||f)},{buffer:188}],185:[function(t,f,h){h.byteLength=function(m){var x=c(m),b=x[0],p=x[1];return 3*(b+p)/4-p},h.toByteArray=function(m){var x,b,p=c(m),v=p[0],y=p[1],N=new l((function(O,H,F){return 3*(H+F)/4-F})(0,v,y)),T=0,_=y>0?v-4:v;for(b=0;b<_;b+=4)x=n[m.charCodeAt(b)]<<18|n[m.charCodeAt(b+1)]<<12|n[m.charCodeAt(b+2)]<<6|n[m.charCodeAt(b+3)],N[T++]=x>>16&255,N[T++]=x>>8&255,N[T++]=255&x;return y===2&&(x=n[m.charCodeAt(b)]<<2|n[m.charCodeAt(b+1)]>>4,N[T++]=255&x),y===1&&(x=n[m.charCodeAt(b)]<<10|n[m.charCodeAt(b+1)]<<4|n[m.charCodeAt(b+2)]>>2,N[T++]=x>>8&255,N[T++]=255&x),N},h.fromByteArray=function(m){for(var x,b=m.length,p=b%3,v=[],y=0,N=b-p;y<N;y+=16383)v.push(u(m,y,y+16383>N?N:y+16383));return p===1?(x=m[b-1],v.push(d[x>>2]+d[x<<4&63]+"==")):p===2&&(x=(m[b-2]<<8)+m[b-1],v.push(d[x>>10]+d[x>>4&63]+d[x<<2&63]+"=")),v.join("")};for(var d=[],n=[],l=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,s=i.length;r<s;++r)d[r]=i[r],n[i.charCodeAt(r)]=r;function c(m){var x=m.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=m.indexOf("=");return b===-1&&(b=x),[b,b===x?0:4-b%4]}function u(m,x,b){for(var p,v,y=[],N=x;N<b;N+=3)p=(m[N]<<16&16711680)+(m[N+1]<<8&65280)+(255&m[N+2]),y.push(d[(v=p)>>18&63]+d[v>>12&63]+d[v>>6&63]+d[63&v]);return y.join("")}n[45]=62,n[95]=63},{}],186:[function(t,f,h){(function(d,n){function l(A,k){if(!A)throw new Error(k||"Assertion failed")}function i(A,k){A.super_=k;var j=function(){};j.prototype=k.prototype,A.prototype=new j,A.prototype.constructor=A}function r(A,k,j){if(r.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&(k!=="le"&&k!=="be"||(j=k,k=10),this._init(A||0,k||10,j||"be"))}var s;typeof d=="object"?d.exports=r:(void 0).BN=r,r.BN=r,r.wordSize=26;try{s=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function c(A,k){var j=A.charCodeAt(k);return j>=48&&j<=57?j-48:j>=65&&j<=70?j-55:j>=97&&j<=102?j-87:void l(!1,"Invalid character in "+A)}function u(A,k,j){var S=c(A,j);return j-1>=k&&(S|=c(A,j-1)<<4),S}function m(A,k,j,S){for(var C=0,D=0,R=Math.min(A.length,j),L=k;L<R;L++){var Y=A.charCodeAt(L)-48;C*=S,D=Y>=49?Y-49+10:Y>=17?Y-17+10:Y,l(Y>=0&&D<S,"Invalid character"),C+=D}return C}function x(A,k){A.words=k.words,A.length=k.length,A.negative=k.negative,A.red=k.red}if(r.isBN=function(A){return A instanceof r||A!==null&&typeof A=="object"&&A.constructor.wordSize===r.wordSize&&Array.isArray(A.words)},r.max=function(A,k){return A.cmp(k)>0?A:k},r.min=function(A,k){return A.cmp(k)<0?A:k},r.prototype._init=function(A,k,j){if(typeof A=="number")return this._initNumber(A,k,j);if(typeof A=="object")return this._initArray(A,k,j);k==="hex"&&(k=16),l(k===(0|k)&&k>=2&&k<=36);var S=0;(A=A.toString().replace(/\s+/g,""))[0]==="-"&&(S++,this.negative=1),S<A.length&&(k===16?this._parseHex(A,S,j):(this._parseBase(A,k,S),j==="le"&&this._initArray(this.toArray(),k,j)))},r.prototype._initNumber=function(A,k,j){A<0&&(this.negative=1,A=-A),A<67108864?(this.words=[67108863&A],this.length=1):A<4503599627370496?(this.words=[67108863&A,A/67108864&67108863],this.length=2):(l(A<9007199254740992),this.words=[67108863&A,A/67108864&67108863,1],this.length=3),j==="le"&&this._initArray(this.toArray(),k,j)},r.prototype._initArray=function(A,k,j){if(l(typeof A.length=="number"),A.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(A.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var C,D,R=0;if(j==="be")for(S=A.length-1,C=0;S>=0;S-=3)D=A[S]|A[S-1]<<8|A[S-2]<<16,this.words[C]|=D<<R&67108863,this.words[C+1]=D>>>26-R&67108863,(R+=24)>=26&&(R-=26,C++);else if(j==="le")for(S=0,C=0;S<A.length;S+=3)D=A[S]|A[S+1]<<8|A[S+2]<<16,this.words[C]|=D<<R&67108863,this.words[C+1]=D>>>26-R&67108863,(R+=24)>=26&&(R-=26,C++);return this._strip()},r.prototype._parseHex=function(A,k,j){this.length=Math.ceil((A.length-k)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var C,D=0,R=0;if(j==="be")for(S=A.length-1;S>=k;S-=2)C=u(A,k,S)<<D,this.words[R]|=67108863&C,D>=18?(D-=18,R+=1,this.words[R]|=C>>>26):D+=8;else for(S=(A.length-k)%2==0?k+1:k;S<A.length;S+=2)C=u(A,k,S)<<D,this.words[R]|=67108863&C,D>=18?(D-=18,R+=1,this.words[R]|=C>>>26):D+=8;this._strip()},r.prototype._parseBase=function(A,k,j){this.words=[0],this.length=1;for(var S=0,C=1;C<=67108863;C*=k)S++;S--,C=C/k|0;for(var D=A.length-j,R=D%S,L=Math.min(D,D-R)+j,Y=0,X=j;X<L;X+=S)Y=m(A,X,X+S,k),this.imuln(C),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y);if(R!==0){var ae=1;for(Y=m(A,X,A.length,k),X=0;X<R;X++)ae*=k;this.imuln(ae),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y)}this._strip()},r.prototype.copy=function(A){A.words=new Array(this.length);for(var k=0;k<this.length;k++)A.words[k]=this.words[k];A.length=this.length,A.negative=this.negative,A.red=this.red},r.prototype._move=function(A){x(A,this)},r.prototype.clone=function(){var A=new r(null);return this.copy(A),A},r.prototype._expand=function(A){for(;this.length<A;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{r.prototype.inspect=b}else r.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(A,k){var j;if(k=0|k||1,(A=A||10)===16||A==="hex"){j="";for(var S=0,C=0,D=0;D<this.length;D++){var R=this.words[D],L=(16777215&(R<<S|C)).toString(16);C=R>>>24-S&16777215,(S+=2)>=26&&(S-=26,D--),j=C!==0||D!==this.length-1?p[6-L.length]+L+j:L+j}for(C!==0&&(j=C.toString(16)+j);j.length%k!=0;)j="0"+j;return this.negative!==0&&(j="-"+j),j}if(A===(0|A)&&A>=2&&A<=36){var Y=v[A],X=y[A];j="";var ae=this.clone();for(ae.negative=0;!ae.isZero();){var $=ae.modrn(X).toString(A);j=(ae=ae.idivn(X)).isZero()?$+j:p[Y-$.length]+$+j}for(this.isZero()&&(j="0"+j);j.length%k!=0;)j="0"+j;return this.negative!==0&&(j="-"+j),j}l(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var A=this.words[0];return this.length===2?A+=67108864*this.words[1]:this.length===3&&this.words[2]===1?A+=4503599627370496+67108864*this.words[1]:this.length>2&&l(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-A:A},r.prototype.toJSON=function(){return this.toString(16,2)},s&&(r.prototype.toBuffer=function(A,k){return this.toArrayLike(s,A,k)}),r.prototype.toArray=function(A,k){return this.toArrayLike(Array,A,k)};function N(A,k,j){j.negative=k.negative^A.negative;var S=A.length+k.length|0;j.length=S,S=S-1|0;var C=0|A.words[0],D=0|k.words[0],R=C*D,L=67108863&R,Y=R/67108864|0;j.words[0]=L;for(var X=1;X<S;X++){for(var ae=Y>>>26,$=67108863&Y,Q=Math.min(X,k.length-1),z=Math.max(0,X-A.length+1);z<=Q;z++){var M=X-z|0;ae+=(R=(C=0|A.words[M])*(D=0|k.words[z])+$)/67108864|0,$=67108863&R}j.words[X]=0|$,Y=0|ae}return Y!==0?j.words[X]=0|Y:j.length--,j._strip()}r.prototype.toArrayLike=function(A,k,j){this._strip();var S=this.byteLength(),C=j||Math.max(1,S);l(S<=C,"byte array longer than desired length"),l(C>0,"Requested array length <= 0");var D=(function(R,L){return R.allocUnsafe?R.allocUnsafe(L):new R(L)})(A,C);return this["_toArrayLike"+(k==="le"?"LE":"BE")](D,S),D},r.prototype._toArrayLikeLE=function(A,k){for(var j=0,S=0,C=0,D=0;C<this.length;C++){var R=this.words[C]<<D|S;A[j++]=255&R,j<A.length&&(A[j++]=R>>8&255),j<A.length&&(A[j++]=R>>16&255),D===6?(j<A.length&&(A[j++]=R>>24&255),S=0,D=0):(S=R>>>24,D+=2)}if(j<A.length)for(A[j++]=S;j<A.length;)A[j++]=0},r.prototype._toArrayLikeBE=function(A,k){for(var j=A.length-1,S=0,C=0,D=0;C<this.length;C++){var R=this.words[C]<<D|S;A[j--]=255&R,j>=0&&(A[j--]=R>>8&255),j>=0&&(A[j--]=R>>16&255),D===6?(j>=0&&(A[j--]=R>>24&255),S=0,D=0):(S=R>>>24,D+=2)}if(j>=0)for(A[j--]=S;j>=0;)A[j--]=0},Math.clz32?r.prototype._countBits=function(A){return 32-Math.clz32(A)}:r.prototype._countBits=function(A){var k=A,j=0;return k>=4096&&(j+=13,k>>>=13),k>=64&&(j+=7,k>>>=7),k>=8&&(j+=4,k>>>=4),k>=2&&(j+=2,k>>>=2),j+k},r.prototype._zeroBits=function(A){if(A===0)return 26;var k=A,j=0;return(8191&k)==0&&(j+=13,k>>>=13),(127&k)==0&&(j+=7,k>>>=7),(15&k)==0&&(j+=4,k>>>=4),(3&k)==0&&(j+=2,k>>>=2),(1&k)==0&&j++,j},r.prototype.bitLength=function(){var A=this.words[this.length-1],k=this._countBits(A);return 26*(this.length-1)+k},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=0,k=0;k<this.length;k++){var j=this._zeroBits(this.words[k]);if(A+=j,j!==26)break}return A},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(A){return this.negative!==0?this.abs().inotn(A).iaddn(1):this.clone()},r.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(A){for(;this.length<A.length;)this.words[this.length++]=0;for(var k=0;k<A.length;k++)this.words[k]=this.words[k]|A.words[k];return this._strip()},r.prototype.ior=function(A){return l((this.negative|A.negative)==0),this.iuor(A)},r.prototype.or=function(A){return this.length>A.length?this.clone().ior(A):A.clone().ior(this)},r.prototype.uor=function(A){return this.length>A.length?this.clone().iuor(A):A.clone().iuor(this)},r.prototype.iuand=function(A){var k;k=this.length>A.length?A:this;for(var j=0;j<k.length;j++)this.words[j]=this.words[j]&A.words[j];return this.length=k.length,this._strip()},r.prototype.iand=function(A){return l((this.negative|A.negative)==0),this.iuand(A)},r.prototype.and=function(A){return this.length>A.length?this.clone().iand(A):A.clone().iand(this)},r.prototype.uand=function(A){return this.length>A.length?this.clone().iuand(A):A.clone().iuand(this)},r.prototype.iuxor=function(A){var k,j;this.length>A.length?(k=this,j=A):(k=A,j=this);for(var S=0;S<j.length;S++)this.words[S]=k.words[S]^j.words[S];if(this!==k)for(;S<k.length;S++)this.words[S]=k.words[S];return this.length=k.length,this._strip()},r.prototype.ixor=function(A){return l((this.negative|A.negative)==0),this.iuxor(A)},r.prototype.xor=function(A){return this.length>A.length?this.clone().ixor(A):A.clone().ixor(this)},r.prototype.uxor=function(A){return this.length>A.length?this.clone().iuxor(A):A.clone().iuxor(this)},r.prototype.inotn=function(A){l(typeof A=="number"&&A>=0);var k=0|Math.ceil(A/26),j=A%26;this._expand(k),j>0&&k--;for(var S=0;S<k;S++)this.words[S]=67108863&~this.words[S];return j>0&&(this.words[S]=~this.words[S]&67108863>>26-j),this._strip()},r.prototype.notn=function(A){return this.clone().inotn(A)},r.prototype.setn=function(A,k){l(typeof A=="number"&&A>=0);var j=A/26|0,S=A%26;return this._expand(j+1),this.words[j]=k?this.words[j]|1<<S:this.words[j]&~(1<<S),this._strip()},r.prototype.iadd=function(A){var k,j,S;if(this.negative!==0&&A.negative===0)return this.negative=0,k=this.isub(A),this.negative^=1,this._normSign();if(this.negative===0&&A.negative!==0)return A.negative=0,k=this.isub(A),A.negative=1,k._normSign();this.length>A.length?(j=this,S=A):(j=A,S=this);for(var C=0,D=0;D<S.length;D++)k=(0|j.words[D])+(0|S.words[D])+C,this.words[D]=67108863&k,C=k>>>26;for(;C!==0&&D<j.length;D++)k=(0|j.words[D])+C,this.words[D]=67108863&k,C=k>>>26;if(this.length=j.length,C!==0)this.words[this.length]=C,this.length++;else if(j!==this)for(;D<j.length;D++)this.words[D]=j.words[D];return this},r.prototype.add=function(A){var k;return A.negative!==0&&this.negative===0?(A.negative=0,k=this.sub(A),A.negative^=1,k):A.negative===0&&this.negative!==0?(this.negative=0,k=A.sub(this),this.negative=1,k):this.length>A.length?this.clone().iadd(A):A.clone().iadd(this)},r.prototype.isub=function(A){if(A.negative!==0){A.negative=0;var k=this.iadd(A);return A.negative=1,k._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(A),this.negative=1,this._normSign();var j,S,C=this.cmp(A);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;C>0?(j=this,S=A):(j=A,S=this);for(var D=0,R=0;R<S.length;R++)D=(k=(0|j.words[R])-(0|S.words[R])+D)>>26,this.words[R]=67108863&k;for(;D!==0&&R<j.length;R++)D=(k=(0|j.words[R])+D)>>26,this.words[R]=67108863&k;if(D===0&&R<j.length&&j!==this)for(;R<j.length;R++)this.words[R]=j.words[R];return this.length=Math.max(this.length,R),j!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(A){return this.clone().isub(A)};var T=function(A,k,j){var S,C,D,R=A.words,L=k.words,Y=j.words,X=0,ae=0|R[0],$=8191&ae,Q=ae>>>13,z=0|R[1],M=8191&z,U=z>>>13,te=0|R[2],ie=8191&te,se=te>>>13,le=0|R[3],Ne=8191&le,ke=le>>>13,Z=0|R[4],ce=8191&Z,ve=Z>>>13,De=0|R[5],Ae=8191&De,Ie=De>>>13,Ue=0|R[6],Ge=8191&Ue,Le=Ue>>>13,at=0|R[7],ut=8191&at,Ce=at>>>13,it=0|R[8],xt=8191&it,jt=it>>>13,Ee=0|R[9],xe=8191&Ee,Be=Ee>>>13,$e=0|L[0],ye=8191&$e,oe=$e>>>13,me=0|L[1],ue=8191&me,ze=me>>>13,tt=0|L[2],kt=8191&tt,we=tt>>>13,st=0|L[3],wt=8191&st,pe=st>>>13,Qe=0|L[4],fe=8191&Qe,He=Qe>>>13,lt=0|L[5],Pe=8191&lt,rt=lt>>>13,je=0|L[6],Me=8191&je,Ye=je>>>13,dt=0|L[7],mt=8191&dt,yt=dt>>>13,Gt=0|L[8],Lt=8191&Gt,Oe=Gt>>>13,ot=0|L[9],ht=8191&ot,It=ot>>>13;j.negative=A.negative^k.negative,j.length=19;var Tt=(X+(S=Math.imul($,ye))|0)+((8191&(C=(C=Math.imul($,oe))+Math.imul(Q,ye)|0))<<13)|0;X=((D=Math.imul(Q,oe))+(C>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,S=Math.imul(M,ye),C=(C=Math.imul(M,oe))+Math.imul(U,ye)|0,D=Math.imul(U,oe);var Mt=(X+(S=S+Math.imul($,ue)|0)|0)+((8191&(C=(C=C+Math.imul($,ze)|0)+Math.imul(Q,ue)|0))<<13)|0;X=((D=D+Math.imul(Q,ze)|0)+(C>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,S=Math.imul(ie,ye),C=(C=Math.imul(ie,oe))+Math.imul(se,ye)|0,D=Math.imul(se,oe),S=S+Math.imul(M,ue)|0,C=(C=C+Math.imul(M,ze)|0)+Math.imul(U,ue)|0,D=D+Math.imul(U,ze)|0;var Re=(X+(S=S+Math.imul($,kt)|0)|0)+((8191&(C=(C=C+Math.imul($,we)|0)+Math.imul(Q,kt)|0))<<13)|0;X=((D=D+Math.imul(Q,we)|0)+(C>>>13)|0)+(Re>>>26)|0,Re&=67108863,S=Math.imul(Ne,ye),C=(C=Math.imul(Ne,oe))+Math.imul(ke,ye)|0,D=Math.imul(ke,oe),S=S+Math.imul(ie,ue)|0,C=(C=C+Math.imul(ie,ze)|0)+Math.imul(se,ue)|0,D=D+Math.imul(se,ze)|0,S=S+Math.imul(M,kt)|0,C=(C=C+Math.imul(M,we)|0)+Math.imul(U,kt)|0,D=D+Math.imul(U,we)|0;var pt=(X+(S=S+Math.imul($,wt)|0)|0)+((8191&(C=(C=C+Math.imul($,pe)|0)+Math.imul(Q,wt)|0))<<13)|0;X=((D=D+Math.imul(Q,pe)|0)+(C>>>13)|0)+(pt>>>26)|0,pt&=67108863,S=Math.imul(ce,ye),C=(C=Math.imul(ce,oe))+Math.imul(ve,ye)|0,D=Math.imul(ve,oe),S=S+Math.imul(Ne,ue)|0,C=(C=C+Math.imul(Ne,ze)|0)+Math.imul(ke,ue)|0,D=D+Math.imul(ke,ze)|0,S=S+Math.imul(ie,kt)|0,C=(C=C+Math.imul(ie,we)|0)+Math.imul(se,kt)|0,D=D+Math.imul(se,we)|0,S=S+Math.imul(M,wt)|0,C=(C=C+Math.imul(M,pe)|0)+Math.imul(U,wt)|0,D=D+Math.imul(U,pe)|0;var Ot=(X+(S=S+Math.imul($,fe)|0)|0)+((8191&(C=(C=C+Math.imul($,He)|0)+Math.imul(Q,fe)|0))<<13)|0;X=((D=D+Math.imul(Q,He)|0)+(C>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,S=Math.imul(Ae,ye),C=(C=Math.imul(Ae,oe))+Math.imul(Ie,ye)|0,D=Math.imul(Ie,oe),S=S+Math.imul(ce,ue)|0,C=(C=C+Math.imul(ce,ze)|0)+Math.imul(ve,ue)|0,D=D+Math.imul(ve,ze)|0,S=S+Math.imul(Ne,kt)|0,C=(C=C+Math.imul(Ne,we)|0)+Math.imul(ke,kt)|0,D=D+Math.imul(ke,we)|0,S=S+Math.imul(ie,wt)|0,C=(C=C+Math.imul(ie,pe)|0)+Math.imul(se,wt)|0,D=D+Math.imul(se,pe)|0,S=S+Math.imul(M,fe)|0,C=(C=C+Math.imul(M,He)|0)+Math.imul(U,fe)|0,D=D+Math.imul(U,He)|0;var Se=(X+(S=S+Math.imul($,Pe)|0)|0)+((8191&(C=(C=C+Math.imul($,rt)|0)+Math.imul(Q,Pe)|0))<<13)|0;X=((D=D+Math.imul(Q,rt)|0)+(C>>>13)|0)+(Se>>>26)|0,Se&=67108863,S=Math.imul(Ge,ye),C=(C=Math.imul(Ge,oe))+Math.imul(Le,ye)|0,D=Math.imul(Le,oe),S=S+Math.imul(Ae,ue)|0,C=(C=C+Math.imul(Ae,ze)|0)+Math.imul(Ie,ue)|0,D=D+Math.imul(Ie,ze)|0,S=S+Math.imul(ce,kt)|0,C=(C=C+Math.imul(ce,we)|0)+Math.imul(ve,kt)|0,D=D+Math.imul(ve,we)|0,S=S+Math.imul(Ne,wt)|0,C=(C=C+Math.imul(Ne,pe)|0)+Math.imul(ke,wt)|0,D=D+Math.imul(ke,pe)|0,S=S+Math.imul(ie,fe)|0,C=(C=C+Math.imul(ie,He)|0)+Math.imul(se,fe)|0,D=D+Math.imul(se,He)|0,S=S+Math.imul(M,Pe)|0,C=(C=C+Math.imul(M,rt)|0)+Math.imul(U,Pe)|0,D=D+Math.imul(U,rt)|0;var qe=(X+(S=S+Math.imul($,Me)|0)|0)+((8191&(C=(C=C+Math.imul($,Ye)|0)+Math.imul(Q,Me)|0))<<13)|0;X=((D=D+Math.imul(Q,Ye)|0)+(C>>>13)|0)+(qe>>>26)|0,qe&=67108863,S=Math.imul(ut,ye),C=(C=Math.imul(ut,oe))+Math.imul(Ce,ye)|0,D=Math.imul(Ce,oe),S=S+Math.imul(Ge,ue)|0,C=(C=C+Math.imul(Ge,ze)|0)+Math.imul(Le,ue)|0,D=D+Math.imul(Le,ze)|0,S=S+Math.imul(Ae,kt)|0,C=(C=C+Math.imul(Ae,we)|0)+Math.imul(Ie,kt)|0,D=D+Math.imul(Ie,we)|0,S=S+Math.imul(ce,wt)|0,C=(C=C+Math.imul(ce,pe)|0)+Math.imul(ve,wt)|0,D=D+Math.imul(ve,pe)|0,S=S+Math.imul(Ne,fe)|0,C=(C=C+Math.imul(Ne,He)|0)+Math.imul(ke,fe)|0,D=D+Math.imul(ke,He)|0,S=S+Math.imul(ie,Pe)|0,C=(C=C+Math.imul(ie,rt)|0)+Math.imul(se,Pe)|0,D=D+Math.imul(se,rt)|0,S=S+Math.imul(M,Me)|0,C=(C=C+Math.imul(M,Ye)|0)+Math.imul(U,Me)|0,D=D+Math.imul(U,Ye)|0;var ft=(X+(S=S+Math.imul($,mt)|0)|0)+((8191&(C=(C=C+Math.imul($,yt)|0)+Math.imul(Q,mt)|0))<<13)|0;X=((D=D+Math.imul(Q,yt)|0)+(C>>>13)|0)+(ft>>>26)|0,ft&=67108863,S=Math.imul(xt,ye),C=(C=Math.imul(xt,oe))+Math.imul(jt,ye)|0,D=Math.imul(jt,oe),S=S+Math.imul(ut,ue)|0,C=(C=C+Math.imul(ut,ze)|0)+Math.imul(Ce,ue)|0,D=D+Math.imul(Ce,ze)|0,S=S+Math.imul(Ge,kt)|0,C=(C=C+Math.imul(Ge,we)|0)+Math.imul(Le,kt)|0,D=D+Math.imul(Le,we)|0,S=S+Math.imul(Ae,wt)|0,C=(C=C+Math.imul(Ae,pe)|0)+Math.imul(Ie,wt)|0,D=D+Math.imul(Ie,pe)|0,S=S+Math.imul(ce,fe)|0,C=(C=C+Math.imul(ce,He)|0)+Math.imul(ve,fe)|0,D=D+Math.imul(ve,He)|0,S=S+Math.imul(Ne,Pe)|0,C=(C=C+Math.imul(Ne,rt)|0)+Math.imul(ke,Pe)|0,D=D+Math.imul(ke,rt)|0,S=S+Math.imul(ie,Me)|0,C=(C=C+Math.imul(ie,Ye)|0)+Math.imul(se,Me)|0,D=D+Math.imul(se,Ye)|0,S=S+Math.imul(M,mt)|0,C=(C=C+Math.imul(M,yt)|0)+Math.imul(U,mt)|0,D=D+Math.imul(U,yt)|0;var Ct=(X+(S=S+Math.imul($,Lt)|0)|0)+((8191&(C=(C=C+Math.imul($,Oe)|0)+Math.imul(Q,Lt)|0))<<13)|0;X=((D=D+Math.imul(Q,Oe)|0)+(C>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,S=Math.imul(xe,ye),C=(C=Math.imul(xe,oe))+Math.imul(Be,ye)|0,D=Math.imul(Be,oe),S=S+Math.imul(xt,ue)|0,C=(C=C+Math.imul(xt,ze)|0)+Math.imul(jt,ue)|0,D=D+Math.imul(jt,ze)|0,S=S+Math.imul(ut,kt)|0,C=(C=C+Math.imul(ut,we)|0)+Math.imul(Ce,kt)|0,D=D+Math.imul(Ce,we)|0,S=S+Math.imul(Ge,wt)|0,C=(C=C+Math.imul(Ge,pe)|0)+Math.imul(Le,wt)|0,D=D+Math.imul(Le,pe)|0,S=S+Math.imul(Ae,fe)|0,C=(C=C+Math.imul(Ae,He)|0)+Math.imul(Ie,fe)|0,D=D+Math.imul(Ie,He)|0,S=S+Math.imul(ce,Pe)|0,C=(C=C+Math.imul(ce,rt)|0)+Math.imul(ve,Pe)|0,D=D+Math.imul(ve,rt)|0,S=S+Math.imul(Ne,Me)|0,C=(C=C+Math.imul(Ne,Ye)|0)+Math.imul(ke,Me)|0,D=D+Math.imul(ke,Ye)|0,S=S+Math.imul(ie,mt)|0,C=(C=C+Math.imul(ie,yt)|0)+Math.imul(se,mt)|0,D=D+Math.imul(se,yt)|0,S=S+Math.imul(M,Lt)|0,C=(C=C+Math.imul(M,Oe)|0)+Math.imul(U,Lt)|0,D=D+Math.imul(U,Oe)|0;var er=(X+(S=S+Math.imul($,ht)|0)|0)+((8191&(C=(C=C+Math.imul($,It)|0)+Math.imul(Q,ht)|0))<<13)|0;X=((D=D+Math.imul(Q,It)|0)+(C>>>13)|0)+(er>>>26)|0,er&=67108863,S=Math.imul(xe,ue),C=(C=Math.imul(xe,ze))+Math.imul(Be,ue)|0,D=Math.imul(Be,ze),S=S+Math.imul(xt,kt)|0,C=(C=C+Math.imul(xt,we)|0)+Math.imul(jt,kt)|0,D=D+Math.imul(jt,we)|0,S=S+Math.imul(ut,wt)|0,C=(C=C+Math.imul(ut,pe)|0)+Math.imul(Ce,wt)|0,D=D+Math.imul(Ce,pe)|0,S=S+Math.imul(Ge,fe)|0,C=(C=C+Math.imul(Ge,He)|0)+Math.imul(Le,fe)|0,D=D+Math.imul(Le,He)|0,S=S+Math.imul(Ae,Pe)|0,C=(C=C+Math.imul(Ae,rt)|0)+Math.imul(Ie,Pe)|0,D=D+Math.imul(Ie,rt)|0,S=S+Math.imul(ce,Me)|0,C=(C=C+Math.imul(ce,Ye)|0)+Math.imul(ve,Me)|0,D=D+Math.imul(ve,Ye)|0,S=S+Math.imul(Ne,mt)|0,C=(C=C+Math.imul(Ne,yt)|0)+Math.imul(ke,mt)|0,D=D+Math.imul(ke,yt)|0,S=S+Math.imul(ie,Lt)|0,C=(C=C+Math.imul(ie,Oe)|0)+Math.imul(se,Lt)|0,D=D+Math.imul(se,Oe)|0;var Rt=(X+(S=S+Math.imul(M,ht)|0)|0)+((8191&(C=(C=C+Math.imul(M,It)|0)+Math.imul(U,ht)|0))<<13)|0;X=((D=D+Math.imul(U,It)|0)+(C>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,S=Math.imul(xe,kt),C=(C=Math.imul(xe,we))+Math.imul(Be,kt)|0,D=Math.imul(Be,we),S=S+Math.imul(xt,wt)|0,C=(C=C+Math.imul(xt,pe)|0)+Math.imul(jt,wt)|0,D=D+Math.imul(jt,pe)|0,S=S+Math.imul(ut,fe)|0,C=(C=C+Math.imul(ut,He)|0)+Math.imul(Ce,fe)|0,D=D+Math.imul(Ce,He)|0,S=S+Math.imul(Ge,Pe)|0,C=(C=C+Math.imul(Ge,rt)|0)+Math.imul(Le,Pe)|0,D=D+Math.imul(Le,rt)|0,S=S+Math.imul(Ae,Me)|0,C=(C=C+Math.imul(Ae,Ye)|0)+Math.imul(Ie,Me)|0,D=D+Math.imul(Ie,Ye)|0,S=S+Math.imul(ce,mt)|0,C=(C=C+Math.imul(ce,yt)|0)+Math.imul(ve,mt)|0,D=D+Math.imul(ve,yt)|0,S=S+Math.imul(Ne,Lt)|0,C=(C=C+Math.imul(Ne,Oe)|0)+Math.imul(ke,Lt)|0,D=D+Math.imul(ke,Oe)|0;var Ht=(X+(S=S+Math.imul(ie,ht)|0)|0)+((8191&(C=(C=C+Math.imul(ie,It)|0)+Math.imul(se,ht)|0))<<13)|0;X=((D=D+Math.imul(se,It)|0)+(C>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,S=Math.imul(xe,wt),C=(C=Math.imul(xe,pe))+Math.imul(Be,wt)|0,D=Math.imul(Be,pe),S=S+Math.imul(xt,fe)|0,C=(C=C+Math.imul(xt,He)|0)+Math.imul(jt,fe)|0,D=D+Math.imul(jt,He)|0,S=S+Math.imul(ut,Pe)|0,C=(C=C+Math.imul(ut,rt)|0)+Math.imul(Ce,Pe)|0,D=D+Math.imul(Ce,rt)|0,S=S+Math.imul(Ge,Me)|0,C=(C=C+Math.imul(Ge,Ye)|0)+Math.imul(Le,Me)|0,D=D+Math.imul(Le,Ye)|0,S=S+Math.imul(Ae,mt)|0,C=(C=C+Math.imul(Ae,yt)|0)+Math.imul(Ie,mt)|0,D=D+Math.imul(Ie,yt)|0,S=S+Math.imul(ce,Lt)|0,C=(C=C+Math.imul(ce,Oe)|0)+Math.imul(ve,Lt)|0,D=D+Math.imul(ve,Oe)|0;var ir=(X+(S=S+Math.imul(Ne,ht)|0)|0)+((8191&(C=(C=C+Math.imul(Ne,It)|0)+Math.imul(ke,ht)|0))<<13)|0;X=((D=D+Math.imul(ke,It)|0)+(C>>>13)|0)+(ir>>>26)|0,ir&=67108863,S=Math.imul(xe,fe),C=(C=Math.imul(xe,He))+Math.imul(Be,fe)|0,D=Math.imul(Be,He),S=S+Math.imul(xt,Pe)|0,C=(C=C+Math.imul(xt,rt)|0)+Math.imul(jt,Pe)|0,D=D+Math.imul(jt,rt)|0,S=S+Math.imul(ut,Me)|0,C=(C=C+Math.imul(ut,Ye)|0)+Math.imul(Ce,Me)|0,D=D+Math.imul(Ce,Ye)|0,S=S+Math.imul(Ge,mt)|0,C=(C=C+Math.imul(Ge,yt)|0)+Math.imul(Le,mt)|0,D=D+Math.imul(Le,yt)|0,S=S+Math.imul(Ae,Lt)|0,C=(C=C+Math.imul(Ae,Oe)|0)+Math.imul(Ie,Lt)|0,D=D+Math.imul(Ie,Oe)|0;var Zt=(X+(S=S+Math.imul(ce,ht)|0)|0)+((8191&(C=(C=C+Math.imul(ce,It)|0)+Math.imul(ve,ht)|0))<<13)|0;X=((D=D+Math.imul(ve,It)|0)+(C>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,S=Math.imul(xe,Pe),C=(C=Math.imul(xe,rt))+Math.imul(Be,Pe)|0,D=Math.imul(Be,rt),S=S+Math.imul(xt,Me)|0,C=(C=C+Math.imul(xt,Ye)|0)+Math.imul(jt,Me)|0,D=D+Math.imul(jt,Ye)|0,S=S+Math.imul(ut,mt)|0,C=(C=C+Math.imul(ut,yt)|0)+Math.imul(Ce,mt)|0,D=D+Math.imul(Ce,yt)|0,S=S+Math.imul(Ge,Lt)|0,C=(C=C+Math.imul(Ge,Oe)|0)+Math.imul(Le,Lt)|0,D=D+Math.imul(Le,Oe)|0;var qt=(X+(S=S+Math.imul(Ae,ht)|0)|0)+((8191&(C=(C=C+Math.imul(Ae,It)|0)+Math.imul(Ie,ht)|0))<<13)|0;X=((D=D+Math.imul(Ie,It)|0)+(C>>>13)|0)+(qt>>>26)|0,qt&=67108863,S=Math.imul(xe,Me),C=(C=Math.imul(xe,Ye))+Math.imul(Be,Me)|0,D=Math.imul(Be,Ye),S=S+Math.imul(xt,mt)|0,C=(C=C+Math.imul(xt,yt)|0)+Math.imul(jt,mt)|0,D=D+Math.imul(jt,yt)|0,S=S+Math.imul(ut,Lt)|0,C=(C=C+Math.imul(ut,Oe)|0)+Math.imul(Ce,Lt)|0,D=D+Math.imul(Ce,Oe)|0;var nr=(X+(S=S+Math.imul(Ge,ht)|0)|0)+((8191&(C=(C=C+Math.imul(Ge,It)|0)+Math.imul(Le,ht)|0))<<13)|0;X=((D=D+Math.imul(Le,It)|0)+(C>>>13)|0)+(nr>>>26)|0,nr&=67108863,S=Math.imul(xe,mt),C=(C=Math.imul(xe,yt))+Math.imul(Be,mt)|0,D=Math.imul(Be,yt),S=S+Math.imul(xt,Lt)|0,C=(C=C+Math.imul(xt,Oe)|0)+Math.imul(jt,Lt)|0,D=D+Math.imul(jt,Oe)|0;var fr=(X+(S=S+Math.imul(ut,ht)|0)|0)+((8191&(C=(C=C+Math.imul(ut,It)|0)+Math.imul(Ce,ht)|0))<<13)|0;X=((D=D+Math.imul(Ce,It)|0)+(C>>>13)|0)+(fr>>>26)|0,fr&=67108863,S=Math.imul(xe,Lt),C=(C=Math.imul(xe,Oe))+Math.imul(Be,Lt)|0,D=Math.imul(Be,Oe);var rr=(X+(S=S+Math.imul(xt,ht)|0)|0)+((8191&(C=(C=C+Math.imul(xt,It)|0)+Math.imul(jt,ht)|0))<<13)|0;X=((D=D+Math.imul(jt,It)|0)+(C>>>13)|0)+(rr>>>26)|0,rr&=67108863;var yr=(X+(S=Math.imul(xe,ht))|0)+((8191&(C=(C=Math.imul(xe,It))+Math.imul(Be,ht)|0))<<13)|0;return X=((D=Math.imul(Be,It))+(C>>>13)|0)+(yr>>>26)|0,yr&=67108863,Y[0]=Tt,Y[1]=Mt,Y[2]=Re,Y[3]=pt,Y[4]=Ot,Y[5]=Se,Y[6]=qe,Y[7]=ft,Y[8]=Ct,Y[9]=er,Y[10]=Rt,Y[11]=Ht,Y[12]=ir,Y[13]=Zt,Y[14]=qt,Y[15]=nr,Y[16]=fr,Y[17]=rr,Y[18]=yr,X!==0&&(Y[19]=X,j.length++),j};function _(A,k,j){j.negative=k.negative^A.negative,j.length=A.length+k.length;for(var S=0,C=0,D=0;D<j.length-1;D++){var R=C;C=0;for(var L=67108863&S,Y=Math.min(D,k.length-1),X=Math.max(0,D-A.length+1);X<=Y;X++){var ae=D-X,$=(0|A.words[ae])*(0|k.words[X]),Q=67108863&$;L=67108863&(Q=Q+L|0),C+=(R=(R=R+($/67108864|0)|0)+(Q>>>26)|0)>>>26,R&=67108863}j.words[D]=L,S=R,R=C}return S!==0?j.words[D]=S:j.length--,j._strip()}function O(A,k,j){return _(A,k,j)}Math.imul||(T=N),r.prototype.mulTo=function(A,k){var j=this.length+A.length;return this.length===10&&A.length===10?T(this,A,k):j<63?N(this,A,k):j<1024?_(this,A,k):O(this,A,k)},r.prototype.mul=function(A){var k=new r(null);return k.words=new Array(this.length+A.length),this.mulTo(A,k)},r.prototype.mulf=function(A){var k=new r(null);return k.words=new Array(this.length+A.length),O(this,A,k)},r.prototype.imul=function(A){return this.clone().mulTo(A,this)},r.prototype.imuln=function(A){var k=A<0;k&&(A=-A),l(typeof A=="number"),l(A<67108864);for(var j=0,S=0;S<this.length;S++){var C=(0|this.words[S])*A,D=(67108863&C)+(67108863&j);j>>=26,j+=C/67108864|0,j+=D>>>26,this.words[S]=67108863&D}return j!==0&&(this.words[S]=j,this.length++),k?this.ineg():this},r.prototype.muln=function(A){return this.clone().imuln(A)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(A){var k=(function(D){for(var R=new Array(D.bitLength()),L=0;L<R.length;L++){var Y=L/26|0,X=L%26;R[L]=D.words[Y]>>>X&1}return R})(A);if(k.length===0)return new r(1);for(var j=this,S=0;S<k.length&&k[S]===0;S++,j=j.sqr());if(++S<k.length)for(var C=j.sqr();S<k.length;S++,C=C.sqr())k[S]!==0&&(j=j.mul(C));return j},r.prototype.iushln=function(A){l(typeof A=="number"&&A>=0);var k,j=A%26,S=(A-j)/26,C=67108863>>>26-j<<26-j;if(j!==0){var D=0;for(k=0;k<this.length;k++){var R=this.words[k]&C,L=(0|this.words[k])-R<<j;this.words[k]=L|D,D=R>>>26-j}D&&(this.words[k]=D,this.length++)}if(S!==0){for(k=this.length-1;k>=0;k--)this.words[k+S]=this.words[k];for(k=0;k<S;k++)this.words[k]=0;this.length+=S}return this._strip()},r.prototype.ishln=function(A){return l(this.negative===0),this.iushln(A)},r.prototype.iushrn=function(A,k,j){var S;l(typeof A=="number"&&A>=0),S=k?(k-k%26)/26:0;var C=A%26,D=Math.min((A-C)/26,this.length),R=67108863^67108863>>>C<<C,L=j;if(S-=D,S=Math.max(0,S),L){for(var Y=0;Y<D;Y++)L.words[Y]=this.words[Y];L.length=D}if(D!==0)if(this.length>D)for(this.length-=D,Y=0;Y<this.length;Y++)this.words[Y]=this.words[Y+D];else this.words[0]=0,this.length=1;var X=0;for(Y=this.length-1;Y>=0&&(X!==0||Y>=S);Y--){var ae=0|this.words[Y];this.words[Y]=X<<26-C|ae>>>C,X=ae&R}return L&&X!==0&&(L.words[L.length++]=X),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(A,k,j){return l(this.negative===0),this.iushrn(A,k,j)},r.prototype.shln=function(A){return this.clone().ishln(A)},r.prototype.ushln=function(A){return this.clone().iushln(A)},r.prototype.shrn=function(A){return this.clone().ishrn(A)},r.prototype.ushrn=function(A){return this.clone().iushrn(A)},r.prototype.testn=function(A){l(typeof A=="number"&&A>=0);var k=A%26,j=(A-k)/26,S=1<<k;return!(this.length<=j)&&!!(this.words[j]&S)},r.prototype.imaskn=function(A){l(typeof A=="number"&&A>=0);var k=A%26,j=(A-k)/26;if(l(this.negative===0,"imaskn works only with positive numbers"),this.length<=j)return this;if(k!==0&&j++,this.length=Math.min(j,this.length),k!==0){var S=67108863^67108863>>>k<<k;this.words[this.length-1]&=S}return this._strip()},r.prototype.maskn=function(A){return this.clone().imaskn(A)},r.prototype.iaddn=function(A){return l(typeof A=="number"),l(A<67108864),A<0?this.isubn(-A):this.negative!==0?this.length===1&&(0|this.words[0])<=A?(this.words[0]=A-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(A),this.negative=1,this):this._iaddn(A)},r.prototype._iaddn=function(A){this.words[0]+=A;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},r.prototype.isubn=function(A){if(l(typeof A=="number"),l(A<67108864),A<0)return this.iaddn(-A);if(this.negative!==0)return this.negative=0,this.iaddn(A),this.negative=1,this;if(this.words[0]-=A,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this._strip()},r.prototype.addn=function(A){return this.clone().iaddn(A)},r.prototype.subn=function(A){return this.clone().isubn(A)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(A,k,j){var S,C,D=A.length+j;this._expand(D);var R=0;for(S=0;S<A.length;S++){C=(0|this.words[S+j])+R;var L=(0|A.words[S])*k;R=((C-=67108863&L)>>26)-(L/67108864|0),this.words[S+j]=67108863&C}for(;S<this.length-j;S++)R=(C=(0|this.words[S+j])+R)>>26,this.words[S+j]=67108863&C;if(R===0)return this._strip();for(l(R===-1),R=0,S=0;S<this.length;S++)R=(C=-(0|this.words[S])+R)>>26,this.words[S]=67108863&C;return this.negative=1,this._strip()},r.prototype._wordDiv=function(A,k){var j=(this.length,A.length),S=this.clone(),C=A,D=0|C.words[C.length-1];(j=26-this._countBits(D))!==0&&(C=C.ushln(j),S.iushln(j),D=0|C.words[C.length-1]);var R,L=S.length-C.length;if(k!=="mod"){(R=new r(null)).length=L+1,R.words=new Array(R.length);for(var Y=0;Y<R.length;Y++)R.words[Y]=0}var X=S.clone()._ishlnsubmul(C,1,L);X.negative===0&&(S=X,R&&(R.words[L]=1));for(var ae=L-1;ae>=0;ae--){var $=67108864*(0|S.words[C.length+ae])+(0|S.words[C.length+ae-1]);for($=Math.min($/D|0,67108863),S._ishlnsubmul(C,$,ae);S.negative!==0;)$--,S.negative=0,S._ishlnsubmul(C,1,ae),S.isZero()||(S.negative^=1);R&&(R.words[ae]=$)}return R&&R._strip(),S._strip(),k!=="div"&&j!==0&&S.iushrn(j),{div:R||null,mod:S}},r.prototype.divmod=function(A,k,j){return l(!A.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:this.negative!==0&&A.negative===0?(D=this.neg().divmod(A,k),k!=="mod"&&(S=D.div.neg()),k!=="div"&&(C=D.mod.neg(),j&&C.negative!==0&&C.iadd(A)),{div:S,mod:C}):this.negative===0&&A.negative!==0?(D=this.divmod(A.neg(),k),k!=="mod"&&(S=D.div.neg()),{div:S,mod:D.mod}):(this.negative&A.negative)!=0?(D=this.neg().divmod(A.neg(),k),k!=="div"&&(C=D.mod.neg(),j&&C.negative!==0&&C.isub(A)),{div:D.div,mod:C}):A.length>this.length||this.cmp(A)<0?{div:new r(0),mod:this}:A.length===1?k==="div"?{div:this.divn(A.words[0]),mod:null}:k==="mod"?{div:null,mod:new r(this.modrn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new r(this.modrn(A.words[0]))}:this._wordDiv(A,k);var S,C,D},r.prototype.div=function(A){return this.divmod(A,"div",!1).div},r.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod},r.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod},r.prototype.divRound=function(A){var k=this.divmod(A);if(k.mod.isZero())return k.div;var j=k.div.negative!==0?k.mod.isub(A):k.mod,S=A.ushrn(1),C=A.andln(1),D=j.cmp(S);return D<0||C===1&&D===0?k.div:k.div.negative!==0?k.div.isubn(1):k.div.iaddn(1)},r.prototype.modrn=function(A){var k=A<0;k&&(A=-A),l(A<=67108863);for(var j=(1<<26)%A,S=0,C=this.length-1;C>=0;C--)S=(j*S+(0|this.words[C]))%A;return k?-S:S},r.prototype.modn=function(A){return this.modrn(A)},r.prototype.idivn=function(A){var k=A<0;k&&(A=-A),l(A<=67108863);for(var j=0,S=this.length-1;S>=0;S--){var C=(0|this.words[S])+67108864*j;this.words[S]=C/A|0,j=C%A}return this._strip(),k?this.ineg():this},r.prototype.divn=function(A){return this.clone().idivn(A)},r.prototype.egcd=function(A){l(A.negative===0),l(!A.isZero());var k=this,j=A.clone();k=k.negative!==0?k.umod(A):k.clone();for(var S=new r(1),C=new r(0),D=new r(0),R=new r(1),L=0;k.isEven()&&j.isEven();)k.iushrn(1),j.iushrn(1),++L;for(var Y=j.clone(),X=k.clone();!k.isZero();){for(var ae=0,$=1;(k.words[0]&$)==0&&ae<26;++ae,$<<=1);if(ae>0)for(k.iushrn(ae);ae-- >0;)(S.isOdd()||C.isOdd())&&(S.iadd(Y),C.isub(X)),S.iushrn(1),C.iushrn(1);for(var Q=0,z=1;(j.words[0]&z)==0&&Q<26;++Q,z<<=1);if(Q>0)for(j.iushrn(Q);Q-- >0;)(D.isOdd()||R.isOdd())&&(D.iadd(Y),R.isub(X)),D.iushrn(1),R.iushrn(1);k.cmp(j)>=0?(k.isub(j),S.isub(D),C.isub(R)):(j.isub(k),D.isub(S),R.isub(C))}return{a:D,b:R,gcd:j.iushln(L)}},r.prototype._invmp=function(A){l(A.negative===0),l(!A.isZero());var k=this,j=A.clone();k=k.negative!==0?k.umod(A):k.clone();for(var S,C=new r(1),D=new r(0),R=j.clone();k.cmpn(1)>0&&j.cmpn(1)>0;){for(var L=0,Y=1;(k.words[0]&Y)==0&&L<26;++L,Y<<=1);if(L>0)for(k.iushrn(L);L-- >0;)C.isOdd()&&C.iadd(R),C.iushrn(1);for(var X=0,ae=1;(j.words[0]&ae)==0&&X<26;++X,ae<<=1);if(X>0)for(j.iushrn(X);X-- >0;)D.isOdd()&&D.iadd(R),D.iushrn(1);k.cmp(j)>=0?(k.isub(j),C.isub(D)):(j.isub(k),D.isub(C))}return(S=k.cmpn(1)===0?C:D).cmpn(0)<0&&S.iadd(A),S},r.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var k=this.clone(),j=A.clone();k.negative=0,j.negative=0;for(var S=0;k.isEven()&&j.isEven();S++)k.iushrn(1),j.iushrn(1);for(;;){for(;k.isEven();)k.iushrn(1);for(;j.isEven();)j.iushrn(1);var C=k.cmp(j);if(C<0){var D=k;k=j,j=D}else if(C===0||j.cmpn(1)===0)break;k.isub(j)}return j.iushln(S)},r.prototype.invm=function(A){return this.egcd(A).a.umod(A)},r.prototype.isEven=function(){return(1&this.words[0])==0},r.prototype.isOdd=function(){return(1&this.words[0])==1},r.prototype.andln=function(A){return this.words[0]&A},r.prototype.bincn=function(A){l(typeof A=="number");var k=A%26,j=(A-k)/26,S=1<<k;if(this.length<=j)return this._expand(j+1),this.words[j]|=S,this;for(var C=S,D=j;C!==0&&D<this.length;D++){var R=0|this.words[D];C=(R+=C)>>>26,R&=67108863,this.words[D]=R}return C!==0&&(this.words[D]=C,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(A){var k,j=A<0;if(this.negative!==0&&!j)return-1;if(this.negative===0&&j)return 1;if(this._strip(),this.length>1)k=1;else{j&&(A=-A),l(A<=67108863,"Number is too big");var S=0|this.words[0];k=S===A?0:S<A?-1:1}return this.negative!==0?0|-k:k},r.prototype.cmp=function(A){if(this.negative!==0&&A.negative===0)return-1;if(this.negative===0&&A.negative!==0)return 1;var k=this.ucmp(A);return this.negative!==0?0|-k:k},r.prototype.ucmp=function(A){if(this.length>A.length)return 1;if(this.length<A.length)return-1;for(var k=0,j=this.length-1;j>=0;j--){var S=0|this.words[j],C=0|A.words[j];if(S!==C){S<C?k=-1:S>C&&(k=1);break}}return k},r.prototype.gtn=function(A){return this.cmpn(A)===1},r.prototype.gt=function(A){return this.cmp(A)===1},r.prototype.gten=function(A){return this.cmpn(A)>=0},r.prototype.gte=function(A){return this.cmp(A)>=0},r.prototype.ltn=function(A){return this.cmpn(A)===-1},r.prototype.lt=function(A){return this.cmp(A)===-1},r.prototype.lten=function(A){return this.cmpn(A)<=0},r.prototype.lte=function(A){return this.cmp(A)<=0},r.prototype.eqn=function(A){return this.cmpn(A)===0},r.prototype.eq=function(A){return this.cmp(A)===0},r.red=function(A){return new E(A)},r.prototype.toRed=function(A){return l(!this.red,"Already a number in reduction context"),l(this.negative===0,"red works only with positives"),A.convertTo(this)._forceRed(A)},r.prototype.fromRed=function(){return l(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(A){return this.red=A,this},r.prototype.forceRed=function(A){return l(!this.red,"Already a number in reduction context"),this._forceRed(A)},r.prototype.redAdd=function(A){return l(this.red,"redAdd works only with red numbers"),this.red.add(this,A)},r.prototype.redIAdd=function(A){return l(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,A)},r.prototype.redSub=function(A){return l(this.red,"redSub works only with red numbers"),this.red.sub(this,A)},r.prototype.redISub=function(A){return l(this.red,"redISub works only with red numbers"),this.red.isub(this,A)},r.prototype.redShl=function(A){return l(this.red,"redShl works only with red numbers"),this.red.shl(this,A)},r.prototype.redMul=function(A){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.mul(this,A)},r.prototype.redIMul=function(A){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.imul(this,A)},r.prototype.redSqr=function(){return l(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return l(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return l(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return l(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return l(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(A){return l(this.red&&!A.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,A)};var H={k256:null,p224:null,p192:null,p25519:null};function F(A,k){this.name=A,this.p=new r(k,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function V(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function q(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function B(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(A){if(typeof A=="string"){var k=r._prime(A);this.m=k.p,this.prime=k}else l(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}function P(A){E.call(this,A),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}F.prototype._tmp=function(){var A=new r(null);return A.words=new Array(Math.ceil(this.n/13)),A},F.prototype.ireduce=function(A){var k,j=A;do this.split(j,this.tmp),k=(j=(j=this.imulK(j)).iadd(this.tmp)).bitLength();while(k>this.n);var S=k<this.n?-1:j.ucmp(this.p);return S===0?(j.words[0]=0,j.length=1):S>0?j.isub(this.p):j.strip!==void 0?j.strip():j._strip(),j},F.prototype.split=function(A,k){A.iushrn(this.n,0,k)},F.prototype.imulK=function(A){return A.imul(this.k)},i(V,F),V.prototype.split=function(A,k){for(var j=Math.min(A.length,9),S=0;S<j;S++)k.words[S]=A.words[S];if(k.length=j,A.length<=9)return A.words[0]=0,void(A.length=1);var C=A.words[9];for(k.words[k.length++]=4194303&C,S=10;S<A.length;S++){var D=0|A.words[S];A.words[S-10]=(4194303&D)<<4|C>>>22,C=D}C>>>=22,A.words[S-10]=C,C===0&&A.length>10?A.length-=10:A.length-=9},V.prototype.imulK=function(A){A.words[A.length]=0,A.words[A.length+1]=0,A.length+=2;for(var k=0,j=0;j<A.length;j++){var S=0|A.words[j];k+=977*S,A.words[j]=67108863&k,k=64*S+(k/67108864|0)}return A.words[A.length-1]===0&&(A.length--,A.words[A.length-1]===0&&A.length--),A},i(q,F),i(W,F),i(B,F),B.prototype.imulK=function(A){for(var k=0,j=0;j<A.length;j++){var S=19*(0|A.words[j])+k,C=67108863&S;S>>>=26,A.words[j]=C,k=S}return k!==0&&(A.words[A.length++]=k),A},r._prime=function(A){if(H[A])return H[A];var k;if(A==="k256")k=new V;else if(A==="p224")k=new q;else if(A==="p192")k=new W;else{if(A!=="p25519")throw new Error("Unknown prime "+A);k=new B}return H[A]=k,k},E.prototype._verify1=function(A){l(A.negative===0,"red works only with positives"),l(A.red,"red works only with red numbers")},E.prototype._verify2=function(A,k){l((A.negative|k.negative)==0,"red works only with positives"),l(A.red&&A.red===k.red,"red works only with red numbers")},E.prototype.imod=function(A){return this.prime?this.prime.ireduce(A)._forceRed(this):(x(A,A.umod(this.m)._forceRed(this)),A)},E.prototype.neg=function(A){return A.isZero()?A.clone():this.m.sub(A)._forceRed(this)},E.prototype.add=function(A,k){this._verify2(A,k);var j=A.add(k);return j.cmp(this.m)>=0&&j.isub(this.m),j._forceRed(this)},E.prototype.iadd=function(A,k){this._verify2(A,k);var j=A.iadd(k);return j.cmp(this.m)>=0&&j.isub(this.m),j},E.prototype.sub=function(A,k){this._verify2(A,k);var j=A.sub(k);return j.cmpn(0)<0&&j.iadd(this.m),j._forceRed(this)},E.prototype.isub=function(A,k){this._verify2(A,k);var j=A.isub(k);return j.cmpn(0)<0&&j.iadd(this.m),j},E.prototype.shl=function(A,k){return this._verify1(A),this.imod(A.ushln(k))},E.prototype.imul=function(A,k){return this._verify2(A,k),this.imod(A.imul(k))},E.prototype.mul=function(A,k){return this._verify2(A,k),this.imod(A.mul(k))},E.prototype.isqr=function(A){return this.imul(A,A.clone())},E.prototype.sqr=function(A){return this.mul(A,A)},E.prototype.sqrt=function(A){if(A.isZero())return A.clone();var k=this.m.andln(3);if(l(k%2==1),k===3){var j=this.m.add(new r(1)).iushrn(2);return this.pow(A,j)}for(var S=this.m.subn(1),C=0;!S.isZero()&&S.andln(1)===0;)C++,S.iushrn(1);l(!S.isZero());var D=new r(1).toRed(this),R=D.redNeg(),L=this.m.subn(1).iushrn(1),Y=this.m.bitLength();for(Y=new r(2*Y*Y).toRed(this);this.pow(Y,L).cmp(R)!==0;)Y.redIAdd(R);for(var X=this.pow(Y,S),ae=this.pow(A,S.addn(1).iushrn(1)),$=this.pow(A,S),Q=C;$.cmp(D)!==0;){for(var z=$,M=0;z.cmp(D)!==0;M++)z=z.redSqr();l(M<Q);var U=this.pow(X,new r(1).iushln(Q-M-1));ae=ae.redMul(U),X=U.redSqr(),$=$.redMul(X),Q=M}return ae},E.prototype.invm=function(A){var k=A._invmp(this.m);return k.negative!==0?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},E.prototype.pow=function(A,k){if(k.isZero())return new r(1).toRed(this);if(k.cmpn(1)===0)return A.clone();var j=new Array(16);j[0]=new r(1).toRed(this),j[1]=A;for(var S=2;S<j.length;S++)j[S]=this.mul(j[S-1],A);var C=j[0],D=0,R=0,L=k.bitLength()%26;for(L===0&&(L=26),S=k.length-1;S>=0;S--){for(var Y=k.words[S],X=L-1;X>=0;X--){var ae=Y>>X&1;C!==j[0]&&(C=this.sqr(C)),ae!==0||D!==0?(D<<=1,D|=ae,(++R===4||S===0&&X===0)&&(C=this.mul(C,j[D]),R=0,D=0)):R=0}L=26}return C},E.prototype.convertTo=function(A){var k=A.umod(this.m);return k===A?k.clone():k},E.prototype.convertFrom=function(A){var k=A.clone();return k.red=null,k},r.mont=function(A){return new P(A)},i(P,E),P.prototype.convertTo=function(A){return this.imod(A.ushln(this.shift))},P.prototype.convertFrom=function(A){var k=this.imod(A.mul(this.rinv));return k.red=null,k},P.prototype.imul=function(A,k){if(A.isZero()||k.isZero())return A.words[0]=0,A.length=1,A;var j=A.imul(k),S=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=j.isub(S).iushrn(this.shift),D=C;return C.cmp(this.m)>=0?D=C.isub(this.m):C.cmpn(0)<0&&(D=C.iadd(this.m)),D._forceRed(this)},P.prototype.mul=function(A,k){if(A.isZero()||k.isZero())return new r(0)._forceRed(this);var j=A.mul(k),S=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=j.isub(S).iushrn(this.shift),D=C;return C.cmp(this.m)>=0?D=C.isub(this.m):C.cmpn(0)<0&&(D=C.iadd(this.m)),D._forceRed(this)},P.prototype.invm=function(A){return this.imod(A._invmp(this.m).mul(this.r2))._forceRed(this)}})(f===void 0||f)},{buffer:188}],187:[function(t,f,h){var d;function n(i){this.rand=i}if(f.exports=function(i){return d||(d=new n(null)),d.generate(i)},f.exports.Rand=n,n.prototype.generate=function(i){return this._rand(i)},n.prototype._rand=function(i){if(this.rand.getBytes)return this.rand.getBytes(i);for(var r=new Uint8Array(i),s=0;s<r.length;s++)r[s]=this.rand.getByte();return r},typeof self=="object")self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(i){var r=new Uint8Array(i);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(i){var r=new Uint8Array(i);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var l=t("crypto");if(typeof l.randomBytes!="function")throw new Error("Not supported");n.prototype._rand=function(i){return l.randomBytes(i)}}catch{}},{crypto:188}],188:[function(t,f,h){},{}],189:[function(t,f,h){var d=t("safe-buffer").Buffer;function n(u){d.isBuffer(u)||(u=d.from(u));for(var m=u.length/4|0,x=new Array(m),b=0;b<m;b++)x[b]=u.readUInt32BE(4*b);return x}function l(u){for(;0<u.length;u++)u[0]=0}function i(u,m,x,b,p){for(var v,y,N,T,_=x[0],O=x[1],H=x[2],F=x[3],V=u[0]^m[0],q=u[1]^m[1],W=u[2]^m[2],B=u[3]^m[3],E=4,P=1;P<p;P++)v=_[V>>>24]^O[q>>>16&255]^H[W>>>8&255]^F[255&B]^m[E++],y=_[q>>>24]^O[W>>>16&255]^H[B>>>8&255]^F[255&V]^m[E++],N=_[W>>>24]^O[B>>>16&255]^H[V>>>8&255]^F[255&q]^m[E++],T=_[B>>>24]^O[V>>>16&255]^H[q>>>8&255]^F[255&W]^m[E++],V=v,q=y,W=N,B=T;return v=(b[V>>>24]<<24|b[q>>>16&255]<<16|b[W>>>8&255]<<8|b[255&B])^m[E++],y=(b[q>>>24]<<24|b[W>>>16&255]<<16|b[B>>>8&255]<<8|b[255&V])^m[E++],N=(b[W>>>24]<<24|b[B>>>16&255]<<16|b[V>>>8&255]<<8|b[255&q])^m[E++],T=(b[B>>>24]<<24|b[V>>>16&255]<<16|b[q>>>8&255]<<8|b[255&W])^m[E++],[v>>>=0,y>>>=0,N>>>=0,T>>>=0]}var r=[0,1,2,4,8,16,32,64,128,27,54],s=(function(){for(var u=new Array(256),m=0;m<256;m++)u[m]=m<128?m<<1:m<<1^283;for(var x=[],b=[],p=[[],[],[],[]],v=[[],[],[],[]],y=0,N=0,T=0;T<256;++T){var _=N^N<<1^N<<2^N<<3^N<<4;_=_>>>8^255&_^99,x[y]=_,b[_]=y;var O=u[y],H=u[O],F=u[H],V=257*u[_]^16843008*_;p[0][y]=V<<24|V>>>8,p[1][y]=V<<16|V>>>16,p[2][y]=V<<8|V>>>24,p[3][y]=V,V=16843009*F^65537*H^257*O^16843008*y,v[0][_]=V<<24|V>>>8,v[1][_]=V<<16|V>>>16,v[2][_]=V<<8|V>>>24,v[3][_]=V,y===0?y=N=1:(y=O^u[u[u[F^O]]],N^=u[u[N]])}return{SBOX:x,INV_SBOX:b,SUB_MIX:p,INV_SUB_MIX:v}})();function c(u){this._key=n(u),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var u=this._key,m=u.length,x=m+6,b=4*(x+1),p=[],v=0;v<m;v++)p[v]=u[v];for(v=m;v<b;v++){var y=p[v-1];v%m==0?(y=y<<8|y>>>24,y=s.SBOX[y>>>24]<<24|s.SBOX[y>>>16&255]<<16|s.SBOX[y>>>8&255]<<8|s.SBOX[255&y],y^=r[v/m|0]<<24):m>6&&v%m==4&&(y=s.SBOX[y>>>24]<<24|s.SBOX[y>>>16&255]<<16|s.SBOX[y>>>8&255]<<8|s.SBOX[255&y]),p[v]=p[v-m]^y}for(var N=[],T=0;T<b;T++){var _=b-T,O=p[_-(T%4?0:4)];N[T]=T<4||_<=4?O:s.INV_SUB_MIX[0][s.SBOX[O>>>24]]^s.INV_SUB_MIX[1][s.SBOX[O>>>16&255]]^s.INV_SUB_MIX[2][s.SBOX[O>>>8&255]]^s.INV_SUB_MIX[3][s.SBOX[255&O]]}this._nRounds=x,this._keySchedule=p,this._invKeySchedule=N},c.prototype.encryptBlockRaw=function(u){return i(u=n(u),this._keySchedule,s.SUB_MIX,s.SBOX,this._nRounds)},c.prototype.encryptBlock=function(u){var m=this.encryptBlockRaw(u),x=d.allocUnsafe(16);return x.writeUInt32BE(m[0],0),x.writeUInt32BE(m[1],4),x.writeUInt32BE(m[2],8),x.writeUInt32BE(m[3],12),x},c.prototype.decryptBlock=function(u){var m=(u=n(u))[1];u[1]=u[3],u[3]=m;var x=i(u,this._invKeySchedule,s.INV_SUB_MIX,s.INV_SBOX,this._nRounds),b=d.allocUnsafe(16);return b.writeUInt32BE(x[0],0),b.writeUInt32BE(x[3],4),b.writeUInt32BE(x[2],8),b.writeUInt32BE(x[1],12),b},c.prototype.scrub=function(){l(this._keySchedule),l(this._invKeySchedule),l(this._key)},f.exports.AES=c},{"safe-buffer":494}],190:[function(t,f,h){var d=t("./aes"),n=t("safe-buffer").Buffer,l=t("cipher-base"),i=t("inherits"),r=t("./ghash"),s=t("buffer-xor"),c=t("./incr32");function u(m,x,b,p){l.call(this);var v=n.alloc(4,0);this._cipher=new d.AES(x);var y=this._cipher.encryptBlock(v);this._ghash=new r(y),b=(function(N,T,_){if(T.length===12)return N._finID=n.concat([T,n.from([0,0,0,1])]),n.concat([T,n.from([0,0,0,2])]);var O=new r(_),H=T.length,F=H%16;O.update(T),F&&(F=16-F,O.update(n.alloc(F,0))),O.update(n.alloc(8,0));var V=8*H,q=n.alloc(8);q.writeUIntBE(V,0,8),O.update(q),N._finID=O.state;var W=n.from(N._finID);return c(W),W})(this,b,y),this._prev=n.from(b),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=p,this._alen=0,this._len=0,this._mode=m,this._authTag=null,this._called=!1}i(u,l),u.prototype._update=function(m){if(!this._called&&this._alen){var x=16-this._alen%16;x<16&&(x=n.alloc(x,0),this._ghash.update(x))}this._called=!0;var b=this._mode.encrypt(this,m);return this._decrypt?this._ghash.update(m):this._ghash.update(b),this._len+=m.length,b},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var m=s(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&(function(x,b){var p=0;x.length!==b.length&&p++;for(var v=Math.min(x.length,b.length),y=0;y<v;++y)p+=x[y]^b[y];return p})(m,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=m,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!n.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(m){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=m},u.prototype.setAAD=function(m){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(m),this._alen+=m.length},f.exports=u},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(t,f,h){var d=t("./encrypter"),n=t("./decrypter"),l=t("./modes/list.json");h.createCipher=h.Cipher=d.createCipher,h.createCipheriv=h.Cipheriv=d.createCipheriv,h.createDecipher=h.Decipher=n.createDecipher,h.createDecipheriv=h.Decipheriv=n.createDecipheriv,h.listCiphers=h.getCiphers=function(){return Object.keys(l)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(t,f,h){var d=t("./authCipher"),n=t("safe-buffer").Buffer,l=t("./modes"),i=t("./streamCipher"),r=t("cipher-base"),s=t("./aes"),c=t("evp_bytestokey");function u(b,p,v){r.call(this),this._cache=new m,this._last=void 0,this._cipher=new s.AES(p),this._prev=n.from(v),this._mode=b,this._autopadding=!0}function m(){this.cache=n.allocUnsafe(0)}function x(b,p,v){var y=l[b.toLowerCase()];if(!y)throw new TypeError("invalid suite type");if(typeof v=="string"&&(v=n.from(v)),y.mode!=="GCM"&&v.length!==y.iv)throw new TypeError("invalid iv length "+v.length);if(typeof p=="string"&&(p=n.from(p)),p.length!==y.key/8)throw new TypeError("invalid key length "+p.length);return y.type==="stream"?new i(y.module,p,v,!0):y.type==="auth"?new d(y.module,p,v,!0):new u(y.module,p,v)}t("inherits")(u,r),u.prototype._update=function(b){var p,v;this._cache.add(b);for(var y=[];p=this._cache.get(this._autopadding);)v=this._mode.decrypt(this,p),y.push(v);return n.concat(y)},u.prototype._final=function(){var b=this._cache.flush();if(this._autopadding)return(function(p){var v=p[15];if(v<1||v>16)throw new Error("unable to decrypt data");for(var y=-1;++y<v;)if(p[y+(16-v)]!==v)throw new Error("unable to decrypt data");if(v!==16)return p.slice(0,16-v)})(this._mode.decrypt(this,b));if(b)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(b){return this._autopadding=!!b,this},m.prototype.add=function(b){this.cache=n.concat([this.cache,b])},m.prototype.get=function(b){var p;if(b){if(this.cache.length>16)return p=this.cache.slice(0,16),this.cache=this.cache.slice(16),p}else if(this.cache.length>=16)return p=this.cache.slice(0,16),this.cache=this.cache.slice(16),p;return null},m.prototype.flush=function(){if(this.cache.length)return this.cache},h.createDecipher=function(b,p){var v=l[b.toLowerCase()];if(!v)throw new TypeError("invalid suite type");var y=c(p,!1,v.key,v.iv);return x(b,y.key,y.iv)},h.createDecipheriv=x},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(t,f,h){var d=t("./modes"),n=t("./authCipher"),l=t("safe-buffer").Buffer,i=t("./streamCipher"),r=t("cipher-base"),s=t("./aes"),c=t("evp_bytestokey");function u(p,v,y){r.call(this),this._cache=new x,this._cipher=new s.AES(v),this._prev=l.from(y),this._mode=p,this._autopadding=!0}t("inherits")(u,r),u.prototype._update=function(p){var v,y;this._cache.add(p);for(var N=[];v=this._cache.get();)y=this._mode.encrypt(this,v),N.push(y);return l.concat(N)};var m=l.alloc(16,16);function x(){this.cache=l.allocUnsafe(0)}function b(p,v,y){var N=d[p.toLowerCase()];if(!N)throw new TypeError("invalid suite type");if(typeof v=="string"&&(v=l.from(v)),v.length!==N.key/8)throw new TypeError("invalid key length "+v.length);if(typeof y=="string"&&(y=l.from(y)),N.mode!=="GCM"&&y.length!==N.iv)throw new TypeError("invalid iv length "+y.length);return N.type==="stream"?new i(N.module,v,y):N.type==="auth"?new n(N.module,v,y):new u(N.module,v,y)}u.prototype._final=function(){var p=this._cache.flush();if(this._autopadding)return p=this._mode.encrypt(this,p),this._cipher.scrub(),p;if(!p.equals(m))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(p){return this._autopadding=!!p,this},x.prototype.add=function(p){this.cache=l.concat([this.cache,p])},x.prototype.get=function(){if(this.cache.length>15){var p=this.cache.slice(0,16);return this.cache=this.cache.slice(16),p}return null},x.prototype.flush=function(){for(var p=16-this.cache.length,v=l.allocUnsafe(p),y=-1;++y<p;)v.writeUInt8(p,y);return l.concat([this.cache,v])},h.createCipheriv=b,h.createCipher=function(p,v){var y=d[p.toLowerCase()];if(!y)throw new TypeError("invalid suite type");var N=c(v,!1,y.key,y.iv);return b(p,N.key,N.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(t,f,h){var d=t("safe-buffer").Buffer,n=d.alloc(16,0);function l(r){var s=d.allocUnsafe(16);return s.writeUInt32BE(r[0]>>>0,0),s.writeUInt32BE(r[1]>>>0,4),s.writeUInt32BE(r[2]>>>0,8),s.writeUInt32BE(r[3]>>>0,12),s}function i(r){this.h=r,this.state=d.alloc(16,0),this.cache=d.allocUnsafe(0)}i.prototype.ghash=function(r){for(var s=-1;++s<r.length;)this.state[s]^=r[s];this._multiply()},i.prototype._multiply=function(){for(var r,s,c,u=[(r=this.h).readUInt32BE(0),r.readUInt32BE(4),r.readUInt32BE(8),r.readUInt32BE(12)],m=[0,0,0,0],x=-1;++x<128;){for((this.state[~~(x/8)]&1<<7-x%8)!=0&&(m[0]^=u[0],m[1]^=u[1],m[2]^=u[2],m[3]^=u[3]),c=(1&u[3])!=0,s=3;s>0;s--)u[s]=u[s]>>>1|(1&u[s-1])<<31;u[0]=u[0]>>>1,c&&(u[0]=u[0]^225<<24)}this.state=l(m)},i.prototype.update=function(r){var s;for(this.cache=d.concat([this.cache,r]);this.cache.length>=16;)s=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(s)},i.prototype.final=function(r,s){return this.cache.length&&this.ghash(d.concat([this.cache,n],16)),this.ghash(l([0,r,0,s])),this.state},f.exports=i},{"safe-buffer":494}],195:[function(t,f,h){f.exports=function(d){for(var n,l=d.length;l--;){if((n=d.readUInt8(l))!==255){n++,d.writeUInt8(n,l);break}d.writeUInt8(0,l)}}},{}],196:[function(t,f,h){var d=t("buffer-xor");h.encrypt=function(n,l){var i=d(l,n._prev);return n._prev=n._cipher.encryptBlock(i),n._prev},h.decrypt=function(n,l){var i=n._prev;n._prev=l;var r=n._cipher.decryptBlock(l);return d(r,i)}},{"buffer-xor":219}],197:[function(t,f,h){var d=t("safe-buffer").Buffer,n=t("buffer-xor");function l(i,r,s){var c=r.length,u=n(r,i._cache);return i._cache=i._cache.slice(c),i._prev=d.concat([i._prev,s?r:u]),u}h.encrypt=function(i,r,s){for(var c,u=d.allocUnsafe(0);r.length;){if(i._cache.length===0&&(i._cache=i._cipher.encryptBlock(i._prev),i._prev=d.allocUnsafe(0)),!(i._cache.length<=r.length)){u=d.concat([u,l(i,r,s)]);break}c=i._cache.length,u=d.concat([u,l(i,r.slice(0,c),s)]),r=r.slice(c)}return u}},{"buffer-xor":219,"safe-buffer":494}],198:[function(t,f,h){var d=t("safe-buffer").Buffer;function n(i,r,s){for(var c,u,m=-1,x=0;++m<8;)c=r&1<<7-m?128:0,x+=(128&(u=i._cipher.encryptBlock(i._prev)[0]^c))>>m%8,i._prev=l(i._prev,s?c:u);return x}function l(i,r){var s=i.length,c=-1,u=d.allocUnsafe(i.length);for(i=d.concat([i,d.from([r])]);++c<s;)u[c]=i[c]<<1|i[c+1]>>7;return u}h.encrypt=function(i,r,s){for(var c=r.length,u=d.allocUnsafe(c),m=-1;++m<c;)u[m]=n(i,r[m],s);return u}},{"safe-buffer":494}],199:[function(t,f,h){var d=t("safe-buffer").Buffer;function n(l,i,r){var s=l._cipher.encryptBlock(l._prev)[0]^i;return l._prev=d.concat([l._prev.slice(1),d.from([r?i:s])]),s}h.encrypt=function(l,i,r){for(var s=i.length,c=d.allocUnsafe(s),u=-1;++u<s;)c[u]=n(l,i[u],r);return c}},{"safe-buffer":494}],200:[function(t,f,h){var d=t("buffer-xor"),n=t("safe-buffer").Buffer,l=t("../incr32");function i(r){var s=r._cipher.encryptBlockRaw(r._prev);return l(r._prev),s}h.encrypt=function(r,s){var c=Math.ceil(s.length/16),u=r._cache.length;r._cache=n.concat([r._cache,n.allocUnsafe(16*c)]);for(var m=0;m<c;m++){var x=i(r),b=u+16*m;r._cache.writeUInt32BE(x[0],b+0),r._cache.writeUInt32BE(x[1],b+4),r._cache.writeUInt32BE(x[2],b+8),r._cache.writeUInt32BE(x[3],b+12)}var p=r._cache.slice(0,s.length);return r._cache=r._cache.slice(s.length),d(s,p)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(t,f,h){h.encrypt=function(d,n){return d._cipher.encryptBlock(n)},h.decrypt=function(d,n){return d._cipher.decryptBlock(n)}},{}],202:[function(t,f,h){var d={ECB:t("./ecb"),CBC:t("./cbc"),CFB:t("./cfb"),CFB8:t("./cfb8"),CFB1:t("./cfb1"),OFB:t("./ofb"),CTR:t("./ctr"),GCM:t("./ctr")},n=t("./list.json");for(var l in n)n[l].module=d[n[l].mode];f.exports=n},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(t,f,h){f.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(t,f,h){(function(d){(function(){var n=t("buffer-xor");function l(i){return i._prev=i._cipher.encryptBlock(i._prev),i._prev}h.encrypt=function(i,r){for(;i._cache.length<r.length;)i._cache=d.concat([i._cache,l(i)]);var s=i._cache.slice(0,r.length);return i._cache=i._cache.slice(r.length),n(r,s)}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(t,f,h){var d=t("./aes"),n=t("safe-buffer").Buffer,l=t("cipher-base");function i(r,s,c,u){l.call(this),this._cipher=new d.AES(s),this._prev=n.from(c),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=u,this._mode=r}t("inherits")(i,l),i.prototype._update=function(r){return this._mode.encrypt(this,r,this._decrypt)},i.prototype._final=function(){this._cipher.scrub()},f.exports=i},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(t,f,h){var d=t("browserify-des"),n=t("browserify-aes/browser"),l=t("browserify-aes/modes"),i=t("browserify-des/modes"),r=t("evp_bytestokey");function s(u,m,x){if(u=u.toLowerCase(),l[u])return n.createCipheriv(u,m,x);if(i[u])return new d({key:m,iv:x,mode:u});throw new TypeError("invalid suite type")}function c(u,m,x){if(u=u.toLowerCase(),l[u])return n.createDecipheriv(u,m,x);if(i[u])return new d({key:m,iv:x,mode:u,decrypt:!0});throw new TypeError("invalid suite type")}h.createCipher=h.Cipher=function(u,m){var x,b;if(u=u.toLowerCase(),l[u])x=l[u].key,b=l[u].iv;else{if(!i[u])throw new TypeError("invalid suite type");x=8*i[u].key,b=i[u].iv}var p=r(m,!1,x,b);return s(u,p.key,p.iv)},h.createCipheriv=h.Cipheriv=s,h.createDecipher=h.Decipher=function(u,m){var x,b;if(u=u.toLowerCase(),l[u])x=l[u].key,b=l[u].iv;else{if(!i[u])throw new TypeError("invalid suite type");x=8*i[u].key,b=i[u].iv}var p=r(m,!1,x,b);return c(u,p.key,p.iv)},h.createDecipheriv=h.Decipheriv=c,h.listCiphers=h.getCiphers=function(){return Object.keys(i).concat(n.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(t,f,h){var d=t("cipher-base"),n=t("des.js"),l=t("inherits"),i=t("safe-buffer").Buffer,r={"des-ede3-cbc":n.CBC.instantiate(n.EDE),"des-ede3":n.EDE,"des-ede-cbc":n.CBC.instantiate(n.EDE),"des-ede":n.EDE,"des-cbc":n.CBC.instantiate(n.DES),"des-ecb":n.DES};function s(c){d.call(this);var u,m=c.mode.toLowerCase(),x=r[m];u=c.decrypt?"decrypt":"encrypt";var b=c.key;i.isBuffer(b)||(b=i.from(b)),m!=="des-ede"&&m!=="des-ede-cbc"||(b=i.concat([b,b.slice(0,8)]));var p=c.iv;i.isBuffer(p)||(p=i.from(p)),this._des=x.create({key:b,iv:p,type:u})}r.des=r["des-cbc"],r.des3=r["des-ede3-cbc"],f.exports=s,l(s,d),s.prototype._update=function(c){return i.from(this._des.update(c))},s.prototype._final=function(){return i.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(t,f,h){h["des-ecb"]={key:8,iv:0},h["des-cbc"]=h.des={key:8,iv:8},h["des-ede3-cbc"]=h.des3={key:24,iv:8},h["des-ede3"]={key:24,iv:0},h["des-ede-cbc"]={key:16,iv:8},h["des-ede"]={key:16,iv:0}},{}],209:[function(t,f,h){(function(d){(function(){var n=t("bn.js"),l=t("randombytes");function i(s){var c,u=s.modulus.byteLength();do c=new n(l(u));while(c.cmp(s.modulus)>=0||!c.umod(s.prime1)||!c.umod(s.prime2));return c}function r(s,c){var u=(function(H){var F=i(H);return{blinder:F.toRed(n.mont(H.modulus)).redPow(new n(H.publicExponent)).fromRed(),unblinder:F.invm(H.modulus)}})(c),m=c.modulus.byteLength(),x=new n(s).mul(u.blinder).umod(c.modulus),b=x.toRed(n.mont(c.prime1)),p=x.toRed(n.mont(c.prime2)),v=c.coefficient,y=c.prime1,N=c.prime2,T=b.redPow(c.exponent1).fromRed(),_=p.redPow(c.exponent2).fromRed(),O=T.isub(_).imul(v).umod(y).imul(N);return _.iadd(O).imul(u.unblinder).umod(c.modulus).toArrayLike(d,"be",m)}r.getr=i,f.exports=r}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(t,f,h){f.exports=t("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(t,f,h){f.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(t,f,h){f.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(t,f,h){var d=t("safe-buffer").Buffer,n=t("create-hash"),l=t("readable-stream"),i=t("inherits"),r=t("./sign"),s=t("./verify"),c=t("./algorithms.json");function u(p){l.Writable.call(this);var v=c[p];if(!v)throw new Error("Unknown message digest");this._hashType=v.hash,this._hash=n(v.hash),this._tag=v.id,this._signType=v.sign}function m(p){l.Writable.call(this);var v=c[p];if(!v)throw new Error("Unknown message digest");this._hash=n(v.hash),this._tag=v.id,this._signType=v.sign}function x(p){return new u(p)}function b(p){return new m(p)}Object.keys(c).forEach((function(p){c[p].id=d.from(c[p].id,"hex"),c[p.toLowerCase()]=c[p]})),i(u,l.Writable),u.prototype._write=function(p,v,y){this._hash.update(p),y()},u.prototype.update=function(p,v){return typeof p=="string"&&(p=d.from(p,v)),this._hash.update(p),this},u.prototype.sign=function(p,v){this.end();var y=this._hash.digest(),N=r(y,p,this._hashType,this._signType,this._tag);return v?N.toString(v):N},i(m,l.Writable),m.prototype._write=function(p,v,y){this._hash.update(p),y()},m.prototype.update=function(p,v){return typeof p=="string"&&(p=d.from(p,v)),this._hash.update(p),this},m.prototype.verify=function(p,v,y){typeof v=="string"&&(v=d.from(v,y)),this.end();var N=this._hash.digest();return s(v,N,p,this._signType,this._tag)},f.exports={Sign:x,Verify:b,createSign:x,createVerify:b}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(t,f,h){var d=t("safe-buffer").Buffer,n=t("create-hmac"),l=t("browserify-rsa"),i=t("elliptic").ec,r=t("bn.js"),s=t("parse-asn1"),c=t("./curves.json");function u(p,v,y,N){if((p=d.from(p.toArray())).length<v.byteLength()){var T=d.alloc(v.byteLength()-p.length);p=d.concat([T,p])}var _=y.length,O=(function(V,q){V=(V=m(V,q)).mod(q);var W=d.from(V.toArray());if(W.length<q.byteLength()){var B=d.alloc(q.byteLength()-W.length);W=d.concat([B,W])}return W})(y,v),H=d.alloc(_);H.fill(1);var F=d.alloc(_);return F=n(N,F).update(H).update(d.from([0])).update(p).update(O).digest(),H=n(N,F).update(H).digest(),{k:F=n(N,F).update(H).update(d.from([1])).update(p).update(O).digest(),v:H=n(N,F).update(H).digest()}}function m(p,v){var y=new r(p),N=(p.length<<3)-v.bitLength();return N>0&&y.ishrn(N),y}function x(p,v,y){var N,T;do{for(N=d.alloc(0);8*N.length<p.bitLength();)v.v=n(y,v.k).update(v.v).digest(),N=d.concat([N,v.v]);T=m(N,p),v.k=n(y,v.k).update(v.v).update(d.from([0])).digest(),v.v=n(y,v.k).update(v.v).digest()}while(T.cmp(p)!==-1);return T}function b(p,v,y,N){return p.toRed(r.mont(y)).redPow(v).fromRed().mod(N)}f.exports=function(p,v,y,N,T){var _=s(v);if(_.curve){if(N!=="ecdsa"&&N!=="ecdsa/rsa")throw new Error("wrong private key type");return(function(V,q){var W=c[q.curve.join(".")];if(!W)throw new Error("unknown curve "+q.curve.join("."));var B=new i(W).keyFromPrivate(q.privateKey).sign(V);return d.from(B.toDER())})(p,_)}if(_.type==="dsa"){if(N!=="dsa")throw new Error("wrong private key type");return(function(V,q,W){for(var B,E=q.params.priv_key,P=q.params.p,A=q.params.q,k=q.params.g,j=new r(0),S=m(V,A).mod(A),C=!1,D=u(E,A,V,W);C===!1;)B=x(A,D,W),j=b(k,B,P,A),(C=B.invm(A).imul(S.add(E.mul(j))).mod(A)).cmpn(0)===0&&(C=!1,j=new r(0));return(function(R,L){R=R.toArray(),L=L.toArray(),128&R[0]&&(R=[0].concat(R)),128&L[0]&&(L=[0].concat(L));var Y=[48,R.length+L.length+4,2,R.length];return Y=Y.concat(R,[2,L.length],L),d.from(Y)})(j,C)})(p,_,y)}if(N!=="rsa"&&N!=="ecdsa/rsa")throw new Error("wrong private key type");p=d.concat([T,p]);for(var O=_.modulus.byteLength(),H=[0,1];p.length+H.length+1<O;)H.push(255);H.push(0);for(var F=-1;++F<p.length;)H.push(p[F]);return l(H,_)},f.exports.getKey=u,f.exports.makeKey=x},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(t,f,h){var d=t("safe-buffer").Buffer,n=t("bn.js"),l=t("elliptic").ec,i=t("parse-asn1"),r=t("./curves.json");function s(c,u){if(c.cmpn(0)<=0)throw new Error("invalid sig");if(c.cmp(u)>=u)throw new Error("invalid sig")}f.exports=function(c,u,m,x,b){var p=i(m);if(p.type==="ec"){if(x!=="ecdsa"&&x!=="ecdsa/rsa")throw new Error("wrong public key type");return(function(H,F,V){var q=r[V.data.algorithm.curve.join(".")];if(!q)throw new Error("unknown curve "+V.data.algorithm.curve.join("."));var W=new l(q),B=V.data.subjectPrivateKey.data;return W.verify(F,H,B)})(c,u,p)}if(p.type==="dsa"){if(x!=="dsa")throw new Error("wrong public key type");return(function(H,F,V){var q=V.data.p,W=V.data.q,B=V.data.g,E=V.data.pub_key,P=i.signature.decode(H,"der"),A=P.s,k=P.r;s(A,W),s(k,W);var j=n.mont(q),S=A.invm(W);return B.toRed(j).redPow(new n(F).mul(S).mod(W)).fromRed().mul(E.toRed(j).redPow(k.mul(S).mod(W)).fromRed()).mod(q).mod(W).cmp(k)===0})(c,u,p)}if(x!=="rsa"&&x!=="ecdsa/rsa")throw new Error("wrong public key type");u=d.concat([b,u]);for(var v=p.modulus.byteLength(),y=[1],N=0;u.length+y.length+2<v;)y.push(255),N++;y.push(0);for(var T=-1;++T<u.length;)y.push(u[T]);y=d.from(y);var _=n.mont(p.modulus);c=(c=new n(c).toRed(_)).redPow(new n(p.publicExponent)),c=d.from(c.fromRed().toArray());var O=N<8?1:0;for(v=Math.min(c.length,y.length),c.length!==y.length&&(O=1),T=-1;++T<v;)O|=c[T]^y[T];return O===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(t,f,h){},{}],217:[function(t,f,h){var d=t("buffer"),n=d.Buffer;function l(r,s){for(var c in r)s[c]=r[c]}function i(r,s,c){return n(r,s,c)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?f.exports=d:(l(d,h),h.Buffer=i),l(n,i),i.from=function(r,s,c){if(typeof r=="number")throw new TypeError("Argument must not be a number");return n(r,s,c)},i.alloc=function(r,s,c){if(typeof r!="number")throw new TypeError("Argument must be a number");var u=n(r);return s!==void 0?typeof c=="string"?u.fill(s,c):u.fill(s):u.fill(0),u},i.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return n(r)},i.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return d.SlowBuffer(r)}},{buffer:220}],218:[function(t,f,h){var d=t("safe-buffer").Buffer,n=d.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(p){var v;switch(this.encoding=(function(y){var N=(function(T){if(!T)return"utf8";for(var _;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(_)return;T=(""+T).toLowerCase(),_=!0}})(y);if(typeof N!="string"&&(d.isEncoding===n||!n(y)))throw new Error("Unknown encoding: "+y);return N||y})(p),this.encoding){case"utf16le":this.text=s,this.end=c,v=4;break;case"utf8":this.fillLast=r,v=4;break;case"base64":this.text=u,this.end=m,v=3;break;default:return this.write=x,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(v)}function i(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function r(p){var v=this.lastTotal-this.lastNeed,y=(function(N,T,_){if((192&T[0])!=128)return N.lastNeed=0,"";if(N.lastNeed>1&&T.length>1){if((192&T[1])!=128)return N.lastNeed=1,"";if(N.lastNeed>2&&T.length>2&&(192&T[2])!=128)return N.lastNeed=2,""}})(this,p);return y!==void 0?y:this.lastNeed<=p.length?(p.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,v,0,p.length),void(this.lastNeed-=p.length))}function s(p,v){if((p.length-v)%2==0){var y=p.toString("utf16le",v);if(y){var N=y.charCodeAt(y.length-1);if(N>=55296&&N<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",v,p.length-1)}function c(p){var v=p&&p.length?this.write(p):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,y)}return v}function u(p,v){var y=(p.length-v)%3;return y===0?p.toString("base64",v):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",v,p.length-y))}function m(p){var v=p&&p.length?this.write(p):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function x(p){return p.toString(this.encoding)}function b(p){return p&&p.length?this.write(p):""}h.StringDecoder=l,l.prototype.write=function(p){if(p.length===0)return"";var v,y;if(this.lastNeed){if((v=this.fillLast(p))===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<p.length?v?v+this.text(p,y):this.text(p,y):v||""},l.prototype.end=function(p){var v=p&&p.length?this.write(p):"";return this.lastNeed?v+"":v},l.prototype.text=function(p,v){var y=(function(T,_,O){var H=_.length-1;if(H<O)return 0;var F=i(_[H]);return F>=0?(F>0&&(T.lastNeed=F-1),F):--H<O||F===-2?0:(F=i(_[H]))>=0?(F>0&&(T.lastNeed=F-2),F):--H<O||F===-2?0:(F=i(_[H]))>=0?(F>0&&(F===2?F=0:T.lastNeed=F-3),F):0})(this,p,v);if(!this.lastNeed)return p.toString("utf8",v);this.lastTotal=y;var N=p.length-(y-this.lastNeed);return p.copy(this.lastChar,0,N),p.toString("utf8",v,N)},l.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},{"safe-buffer":217}],219:[function(t,f,h){(function(d){(function(){f.exports=function(n,l){for(var i=Math.min(n.length,l.length),r=new d(i),s=0;s<i;++s)r[s]=n[s]^l[s];return r}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],220:[function(t,f,h){(function(d){(function(){var n=t("base64-js"),l=t("ieee754");h.Buffer=r,h.SlowBuffer=function(z){return+z!=z&&(z=0),r.alloc(+z)},h.INSPECT_MAX_BYTES=50;function i(z){if(z>2147483647)throw new RangeError('The value "'+z+'" is invalid for option "size"');var M=new Uint8Array(z);return M.__proto__=r.prototype,M}function r(z,M,U){if(typeof z=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(z)}return s(z,M,U)}function s(z,M,U){if(typeof z=="string")return(function(se,le){if(typeof le=="string"&&le!==""||(le="utf8"),!r.isEncoding(le))throw new TypeError("Unknown encoding: "+le);var Ne=0|b(se,le),ke=i(Ne),Z=ke.write(se,le);return Z!==Ne&&(ke=ke.slice(0,Z)),ke})(z,M);if(ArrayBuffer.isView(z))return m(z);if(z==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if($(z,ArrayBuffer)||z&&$(z.buffer,ArrayBuffer))return(function(se,le,Ne){if(le<0||se.byteLength<le)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<le+(Ne||0))throw new RangeError('"length" is outside of buffer bounds');var ke;return ke=le===void 0&&Ne===void 0?new Uint8Array(se):Ne===void 0?new Uint8Array(se,le):new Uint8Array(se,le,Ne),ke.__proto__=r.prototype,ke})(z,M,U);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var te=z.valueOf&&z.valueOf();if(te!=null&&te!==z)return r.from(te,M,U);var ie=(function(se){if(r.isBuffer(se)){var le=0|x(se.length),Ne=i(le);return Ne.length===0||se.copy(Ne,0,0,le),Ne}if(se.length!==void 0)return typeof se.length!="number"||Q(se.length)?i(0):m(se);if(se.type==="Buffer"&&Array.isArray(se.data))return m(se.data)})(z);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return r.from(z[Symbol.toPrimitive]("string"),M,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}function c(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function u(z){return c(z),i(z<0?0:0|x(z))}function m(z){for(var M=z.length<0?0:0|x(z.length),U=i(M),te=0;te<M;te+=1)U[te]=255&z[te];return U}function x(z){if(z>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|z}function b(z,M){if(r.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||$(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);var U=z.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&U===0)return 0;for(var ie=!1;;)switch(M){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return Y(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return X(z).length;default:if(ie)return te?-1:Y(z).length;M=(""+M).toLowerCase(),ie=!0}}function p(z,M,U){var te=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0)<=(M>>>=0))return"";for(z||(z="utf8");;)switch(z){case"hex":return P(this,M,U);case"utf8":case"utf-8":return W(this,M,U);case"ascii":return B(this,M,U);case"latin1":case"binary":return E(this,M,U);case"base64":return q(this,M,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,M,U);default:if(te)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),te=!0}}function v(z,M,U){var te=z[M];z[M]=z[U],z[U]=te}function y(z,M,U,te,ie){if(z.length===0)return-1;if(typeof U=="string"?(te=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),Q(U=+U)&&(U=ie?0:z.length-1),U<0&&(U=z.length+U),U>=z.length){if(ie)return-1;U=z.length-1}else if(U<0){if(!ie)return-1;U=0}if(typeof M=="string"&&(M=r.from(M,te)),r.isBuffer(M))return M.length===0?-1:N(z,M,U,te,ie);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(z,M,U):Uint8Array.prototype.lastIndexOf.call(z,M,U):N(z,[M],U,te,ie);throw new TypeError("val must be string, number or Buffer")}function N(z,M,U,te,ie){var se,le=1,Ne=z.length,ke=M.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(z.length<2||M.length<2)return-1;le=2,Ne/=2,ke/=2,U/=2}function Z(Ae,Ie){return le===1?Ae[Ie]:Ae.readUInt16BE(Ie*le)}if(ie){var ce=-1;for(se=U;se<Ne;se++)if(Z(z,se)===Z(M,ce===-1?0:se-ce)){if(ce===-1&&(ce=se),se-ce+1===ke)return ce*le}else ce!==-1&&(se-=se-ce),ce=-1}else for(U+ke>Ne&&(U=Ne-ke),se=U;se>=0;se--){for(var ve=!0,De=0;De<ke;De++)if(Z(z,se+De)!==Z(M,De)){ve=!1;break}if(ve)return se}return-1}function T(z,M,U,te){U=Number(U)||0;var ie=z.length-U;te?(te=Number(te))>ie&&(te=ie):te=ie;var se=M.length;te>se/2&&(te=se/2);for(var le=0;le<te;++le){var Ne=parseInt(M.substr(2*le,2),16);if(Q(Ne))return le;z[U+le]=Ne}return le}function _(z,M,U,te){return ae(Y(M,z.length-U),z,U,te)}function O(z,M,U,te){return ae((function(ie){for(var se=[],le=0;le<ie.length;++le)se.push(255&ie.charCodeAt(le));return se})(M),z,U,te)}function H(z,M,U,te){return O(z,M,U,te)}function F(z,M,U,te){return ae(X(M),z,U,te)}function V(z,M,U,te){return ae((function(ie,se){for(var le,Ne,ke,Z=[],ce=0;ce<ie.length&&!((se-=2)<0);++ce)le=ie.charCodeAt(ce),Ne=le>>8,ke=le%256,Z.push(ke),Z.push(Ne);return Z})(M,z.length-U),z,U,te)}function q(z,M,U){return M===0&&U===z.length?n.fromByteArray(z):n.fromByteArray(z.slice(M,U))}function W(z,M,U){U=Math.min(z.length,U);for(var te=[],ie=M;ie<U;){var se,le,Ne,ke,Z=z[ie],ce=null,ve=Z>239?4:Z>223?3:Z>191?2:1;if(ie+ve<=U)switch(ve){case 1:Z<128&&(ce=Z);break;case 2:(192&(se=z[ie+1]))==128&&(ke=(31&Z)<<6|63&se)>127&&(ce=ke);break;case 3:se=z[ie+1],le=z[ie+2],(192&se)==128&&(192&le)==128&&(ke=(15&Z)<<12|(63&se)<<6|63&le)>2047&&(ke<55296||ke>57343)&&(ce=ke);break;case 4:se=z[ie+1],le=z[ie+2],Ne=z[ie+3],(192&se)==128&&(192&le)==128&&(192&Ne)==128&&(ke=(15&Z)<<18|(63&se)<<12|(63&le)<<6|63&Ne)>65535&&ke<1114112&&(ce=ke)}ce===null?(ce=65533,ve=1):ce>65535&&(ce-=65536,te.push(ce>>>10&1023|55296),ce=56320|1023&ce),te.push(ce),ie+=ve}return(function(De){var Ae=De.length;if(Ae<=4096)return String.fromCharCode.apply(String,De);for(var Ie="",Ue=0;Ue<Ae;)Ie+=String.fromCharCode.apply(String,De.slice(Ue,Ue+=4096));return Ie})(te)}h.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=(function(){try{var z=new Uint8Array(1);return z.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},z.foo()===42}catch{return!1}})(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(z,M,U){return s(z,M,U)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(z,M,U){return(function(te,ie,se){return c(te),te<=0?i(te):ie!==void 0?typeof se=="string"?i(te).fill(ie,se):i(te).fill(ie):i(te)})(z,M,U)},r.allocUnsafe=function(z){return u(z)},r.allocUnsafeSlow=function(z){return u(z)},r.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==r.prototype},r.compare=function(z,M){if($(z,Uint8Array)&&(z=r.from(z,z.offset,z.byteLength)),$(M,Uint8Array)&&(M=r.from(M,M.offset,M.byteLength)),!r.isBuffer(z)||!r.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===M)return 0;for(var U=z.length,te=M.length,ie=0,se=Math.min(U,te);ie<se;++ie)if(z[ie]!==M[ie]){U=z[ie],te=M[ie];break}return U<te?-1:te<U?1:0},r.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(z,M){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return r.alloc(0);var U;if(M===void 0)for(M=0,U=0;U<z.length;++U)M+=z[U].length;var te=r.allocUnsafe(M),ie=0;for(U=0;U<z.length;++U){var se=z[U];if($(se,Uint8Array)&&(se=r.from(se)),!r.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(te,ie),ie+=se.length}return te},r.byteLength=b,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var z=this.length;if(z%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<z;M+=2)v(this,M,M+1);return this},r.prototype.swap32=function(){var z=this.length;if(z%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<z;M+=4)v(this,M,M+3),v(this,M+1,M+2);return this},r.prototype.swap64=function(){var z=this.length;if(z%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<z;M+=8)v(this,M,M+7),v(this,M+1,M+6),v(this,M+2,M+5),v(this,M+3,M+4);return this},r.prototype.toString=function(){var z=this.length;return z===0?"":arguments.length===0?W(this,0,z):p.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(z){if(!r.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z||r.compare(this,z)===0},r.prototype.inspect=function(){var z="",M=h.INSPECT_MAX_BYTES;return z=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(z+=" ... "),"<Buffer "+z+">"},r.prototype.compare=function(z,M,U,te,ie){if($(z,Uint8Array)&&(z=r.from(z,z.offset,z.byteLength)),!r.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(M===void 0&&(M=0),U===void 0&&(U=z?z.length:0),te===void 0&&(te=0),ie===void 0&&(ie=this.length),M<0||U>z.length||te<0||ie>this.length)throw new RangeError("out of range index");if(te>=ie&&M>=U)return 0;if(te>=ie)return-1;if(M>=U)return 1;if(this===z)return 0;for(var se=(ie>>>=0)-(te>>>=0),le=(U>>>=0)-(M>>>=0),Ne=Math.min(se,le),ke=this.slice(te,ie),Z=z.slice(M,U),ce=0;ce<Ne;++ce)if(ke[ce]!==Z[ce]){se=ke[ce],le=Z[ce];break}return se<le?-1:le<se?1:0},r.prototype.includes=function(z,M,U){return this.indexOf(z,M,U)!==-1},r.prototype.indexOf=function(z,M,U){return y(this,z,M,U,!0)},r.prototype.lastIndexOf=function(z,M,U){return y(this,z,M,U,!1)},r.prototype.write=function(z,M,U,te){if(M===void 0)te="utf8",U=this.length,M=0;else if(U===void 0&&typeof M=="string")te=M,U=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(U)?(U>>>=0,te===void 0&&(te="utf8")):(te=U,U=void 0)}var ie=this.length-M;if((U===void 0||U>ie)&&(U=ie),z.length>0&&(U<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var se=!1;;)switch(te){case"hex":return T(this,z,M,U);case"utf8":case"utf-8":return _(this,z,M,U);case"ascii":return O(this,z,M,U);case"latin1":case"binary":return H(this,z,M,U);case"base64":return F(this,z,M,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,z,M,U);default:if(se)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),se=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(z,M,U){var te="";U=Math.min(z.length,U);for(var ie=M;ie<U;++ie)te+=String.fromCharCode(127&z[ie]);return te}function E(z,M,U){var te="";U=Math.min(z.length,U);for(var ie=M;ie<U;++ie)te+=String.fromCharCode(z[ie]);return te}function P(z,M,U){var te=z.length;(!M||M<0)&&(M=0),(!U||U<0||U>te)&&(U=te);for(var ie="",se=M;se<U;++se)ie+=L(z[se]);return ie}function A(z,M,U){for(var te=z.slice(M,U),ie="",se=0;se<te.length;se+=2)ie+=String.fromCharCode(te[se]+256*te[se+1]);return ie}function k(z,M,U){if(z%1!=0||z<0)throw new RangeError("offset is not uint");if(z+M>U)throw new RangeError("Trying to access beyond buffer length")}function j(z,M,U,te,ie,se){if(!r.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>ie||M<se)throw new RangeError('"value" argument is out of bounds');if(U+te>z.length)throw new RangeError("Index out of range")}function S(z,M,U,te,ie,se){if(U+te>z.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function C(z,M,U,te,ie){return M=+M,U>>>=0,ie||S(z,0,U,4),l.write(z,M,U,te,23,4),U+4}function D(z,M,U,te,ie){return M=+M,U>>>=0,ie||S(z,0,U,8),l.write(z,M,U,te,52,8),U+8}r.prototype.slice=function(z,M){var U=this.length;(z=~~z)<0?(z+=U)<0&&(z=0):z>U&&(z=U),(M=M===void 0?U:~~M)<0?(M+=U)<0&&(M=0):M>U&&(M=U),M<z&&(M=z);var te=this.subarray(z,M);return te.__proto__=r.prototype,te},r.prototype.readUIntLE=function(z,M,U){z>>>=0,M>>>=0,U||k(z,M,this.length);for(var te=this[z],ie=1,se=0;++se<M&&(ie*=256);)te+=this[z+se]*ie;return te},r.prototype.readUIntBE=function(z,M,U){z>>>=0,M>>>=0,U||k(z,M,this.length);for(var te=this[z+--M],ie=1;M>0&&(ie*=256);)te+=this[z+--M]*ie;return te},r.prototype.readUInt8=function(z,M){return z>>>=0,M||k(z,1,this.length),this[z]},r.prototype.readUInt16LE=function(z,M){return z>>>=0,M||k(z,2,this.length),this[z]|this[z+1]<<8},r.prototype.readUInt16BE=function(z,M){return z>>>=0,M||k(z,2,this.length),this[z]<<8|this[z+1]},r.prototype.readUInt32LE=function(z,M){return z>>>=0,M||k(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+16777216*this[z+3]},r.prototype.readUInt32BE=function(z,M){return z>>>=0,M||k(z,4,this.length),16777216*this[z]+(this[z+1]<<16|this[z+2]<<8|this[z+3])},r.prototype.readIntLE=function(z,M,U){z>>>=0,M>>>=0,U||k(z,M,this.length);for(var te=this[z],ie=1,se=0;++se<M&&(ie*=256);)te+=this[z+se]*ie;return te>=(ie*=128)&&(te-=Math.pow(2,8*M)),te},r.prototype.readIntBE=function(z,M,U){z>>>=0,M>>>=0,U||k(z,M,this.length);for(var te=M,ie=1,se=this[z+--te];te>0&&(ie*=256);)se+=this[z+--te]*ie;return se>=(ie*=128)&&(se-=Math.pow(2,8*M)),se},r.prototype.readInt8=function(z,M){return z>>>=0,M||k(z,1,this.length),128&this[z]?-1*(255-this[z]+1):this[z]},r.prototype.readInt16LE=function(z,M){z>>>=0,M||k(z,2,this.length);var U=this[z]|this[z+1]<<8;return 32768&U?4294901760|U:U},r.prototype.readInt16BE=function(z,M){z>>>=0,M||k(z,2,this.length);var U=this[z+1]|this[z]<<8;return 32768&U?4294901760|U:U},r.prototype.readInt32LE=function(z,M){return z>>>=0,M||k(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},r.prototype.readInt32BE=function(z,M){return z>>>=0,M||k(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},r.prototype.readFloatLE=function(z,M){return z>>>=0,M||k(z,4,this.length),l.read(this,z,!0,23,4)},r.prototype.readFloatBE=function(z,M){return z>>>=0,M||k(z,4,this.length),l.read(this,z,!1,23,4)},r.prototype.readDoubleLE=function(z,M){return z>>>=0,M||k(z,8,this.length),l.read(this,z,!0,52,8)},r.prototype.readDoubleBE=function(z,M){return z>>>=0,M||k(z,8,this.length),l.read(this,z,!1,52,8)},r.prototype.writeUIntLE=function(z,M,U,te){z=+z,M>>>=0,U>>>=0,te||j(this,z,M,U,Math.pow(2,8*U)-1,0);var ie=1,se=0;for(this[M]=255&z;++se<U&&(ie*=256);)this[M+se]=z/ie&255;return M+U},r.prototype.writeUIntBE=function(z,M,U,te){z=+z,M>>>=0,U>>>=0,te||j(this,z,M,U,Math.pow(2,8*U)-1,0);var ie=U-1,se=1;for(this[M+ie]=255&z;--ie>=0&&(se*=256);)this[M+ie]=z/se&255;return M+U},r.prototype.writeUInt8=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,1,255,0),this[M]=255&z,M+1},r.prototype.writeUInt16LE=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,2,65535,0),this[M]=255&z,this[M+1]=z>>>8,M+2},r.prototype.writeUInt16BE=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,2,65535,0),this[M]=z>>>8,this[M+1]=255&z,M+2},r.prototype.writeUInt32LE=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,4,4294967295,0),this[M+3]=z>>>24,this[M+2]=z>>>16,this[M+1]=z>>>8,this[M]=255&z,M+4},r.prototype.writeUInt32BE=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,4,4294967295,0),this[M]=z>>>24,this[M+1]=z>>>16,this[M+2]=z>>>8,this[M+3]=255&z,M+4},r.prototype.writeIntLE=function(z,M,U,te){if(z=+z,M>>>=0,!te){var ie=Math.pow(2,8*U-1);j(this,z,M,U,ie-1,-ie)}var se=0,le=1,Ne=0;for(this[M]=255&z;++se<U&&(le*=256);)z<0&&Ne===0&&this[M+se-1]!==0&&(Ne=1),this[M+se]=(z/le>>0)-Ne&255;return M+U},r.prototype.writeIntBE=function(z,M,U,te){if(z=+z,M>>>=0,!te){var ie=Math.pow(2,8*U-1);j(this,z,M,U,ie-1,-ie)}var se=U-1,le=1,Ne=0;for(this[M+se]=255&z;--se>=0&&(le*=256);)z<0&&Ne===0&&this[M+se+1]!==0&&(Ne=1),this[M+se]=(z/le>>0)-Ne&255;return M+U},r.prototype.writeInt8=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,1,127,-128),z<0&&(z=255+z+1),this[M]=255&z,M+1},r.prototype.writeInt16LE=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,2,32767,-32768),this[M]=255&z,this[M+1]=z>>>8,M+2},r.prototype.writeInt16BE=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,2,32767,-32768),this[M]=z>>>8,this[M+1]=255&z,M+2},r.prototype.writeInt32LE=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,4,2147483647,-2147483648),this[M]=255&z,this[M+1]=z>>>8,this[M+2]=z>>>16,this[M+3]=z>>>24,M+4},r.prototype.writeInt32BE=function(z,M,U){return z=+z,M>>>=0,U||j(this,z,M,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[M]=z>>>24,this[M+1]=z>>>16,this[M+2]=z>>>8,this[M+3]=255&z,M+4},r.prototype.writeFloatLE=function(z,M,U){return C(this,z,M,!0,U)},r.prototype.writeFloatBE=function(z,M,U){return C(this,z,M,!1,U)},r.prototype.writeDoubleLE=function(z,M,U){return D(this,z,M,!0,U)},r.prototype.writeDoubleBE=function(z,M,U){return D(this,z,M,!1,U)},r.prototype.copy=function(z,M,U,te){if(!r.isBuffer(z))throw new TypeError("argument should be a Buffer");if(U||(U=0),te||te===0||(te=this.length),M>=z.length&&(M=z.length),M||(M=0),te>0&&te<U&&(te=U),te===U||z.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),z.length-M<te-U&&(te=z.length-M+U);var ie=te-U;if(this===z&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(M,U,te);else if(this===z&&U<M&&M<te)for(var se=ie-1;se>=0;--se)z[se+M]=this[se+U];else Uint8Array.prototype.set.call(z,this.subarray(U,te),M);return ie},r.prototype.fill=function(z,M,U,te){if(typeof z=="string"){if(typeof M=="string"?(te=M,M=0,U=this.length):typeof U=="string"&&(te=U,U=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!r.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(z.length===1){var ie=z.charCodeAt(0);(te==="utf8"&&ie<128||te==="latin1")&&(z=ie)}}else typeof z=="number"&&(z&=255);if(M<0||this.length<M||this.length<U)throw new RangeError("Out of range index");if(U<=M)return this;var se;if(M>>>=0,U=U===void 0?this.length:U>>>0,z||(z=0),typeof z=="number")for(se=M;se<U;++se)this[se]=z;else{var le=r.isBuffer(z)?z:r.from(z,te),Ne=le.length;if(Ne===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(se=0;se<U-M;++se)this[se+M]=le[se%Ne]}return this};var R=/[^+/0-9A-Za-z-_]/g;function L(z){return z<16?"0"+z.toString(16):z.toString(16)}function Y(z,M){var U;M=M||1/0;for(var te=z.length,ie=null,se=[],le=0;le<te;++le){if((U=z.charCodeAt(le))>55295&&U<57344){if(!ie){if(U>56319){(M-=3)>-1&&se.push(239,191,189);continue}if(le+1===te){(M-=3)>-1&&se.push(239,191,189);continue}ie=U;continue}if(U<56320){(M-=3)>-1&&se.push(239,191,189),ie=U;continue}U=65536+(ie-55296<<10|U-56320)}else ie&&(M-=3)>-1&&se.push(239,191,189);if(ie=null,U<128){if((M-=1)<0)break;se.push(U)}else if(U<2048){if((M-=2)<0)break;se.push(U>>6|192,63&U|128)}else if(U<65536){if((M-=3)<0)break;se.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;se.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return se}function X(z){return n.toByteArray((function(M){if((M=(M=M.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M})(z))}function ae(z,M,U,te){for(var ie=0;ie<te&&!(ie+U>=M.length||ie>=z.length);++ie)M[ie+U]=z[ie];return ie}function $(z,M){return z instanceof M||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===M.name}function Q(z){return z!=z}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(t,f,h){var d=t("safe-buffer").Buffer,n=t("stream").Transform,l=t("string_decoder").StringDecoder;function i(r){n.call(this),this.hashMode=typeof r=="string",this.hashMode?this[r]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}t("inherits")(i,n),i.prototype.update=function(r,s,c){typeof r=="string"&&(r=d.from(r,s));var u=this._update(r);return this.hashMode?this:(c&&(u=this._toString(u,c)),u)},i.prototype.setAutoPadding=function(){},i.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},i.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},i.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},i.prototype._transform=function(r,s,c){var u;try{this.hashMode?this._update(r):this.push(this._update(r))}catch(m){u=m}finally{c(u)}},i.prototype._flush=function(r){var s;try{this.push(this.__final())}catch(c){s=c}r(s)},i.prototype._finalOrDigest=function(r){var s=this.__final()||d.alloc(0);return r&&(s=this._toString(s,r,!0)),s},i.prototype._toString=function(r,s,c){if(this._decoder||(this._decoder=new l(s),this._encoding=s),this._encoding!==s)throw new Error("can't switch encodings");var u=this._decoder.write(r);return c&&(u+=this._decoder.end()),u},f.exports=i},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(t,f,h){var d=t("../internals/is-callable"),n=t("../internals/try-to-string"),l=TypeError;f.exports=function(i){if(d(i))return i;throw new l(n(i)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(t,f,h){var d=t("../internals/is-constructor"),n=t("../internals/try-to-string"),l=TypeError;f.exports=function(i){if(d(i))return i;throw new l(n(i)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(t,f,h){var d=t("../internals/is-callable"),n=String,l=TypeError;f.exports=function(i){if(typeof i=="object"||d(i))return i;throw new l("Can't set "+n(i)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(t,f,h){var d=t("../internals/well-known-symbol"),n=t("../internals/object-create"),l=t("../internals/object-define-property").f,i=d("unscopables"),r=Array.prototype;r[i]===void 0&&l(r,i,{configurable:!0,value:n(null)}),f.exports=function(s){r[i][s]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(t,f,h){var d=t("../internals/object-is-prototype-of"),n=TypeError;f.exports=function(l,i){if(d(i,l))return l;throw new n("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(t,f,h){var d=t("../internals/is-object"),n=String,l=TypeError;f.exports=function(i){if(d(i))return i;throw new l(n(i)+" is not an object")}},{"../internals/is-object":289}],228:[function(t,f,h){var d=t("../internals/to-indexed-object"),n=t("../internals/to-absolute-index"),l=t("../internals/length-of-array-like"),i=function(r){return function(s,c,u){var m,x=d(s),b=l(x),p=n(u,b);if(r&&c!=c){for(;b>p;)if((m=x[p++])!=m)return!0}else for(;b>p;p++)if((r||p in x)&&x[p]===c)return r||p||0;return!r&&-1}};f.exports={includes:i(!0),indexOf:i(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(t,f,h){var d=t("../internals/function-bind-context"),n=t("../internals/function-uncurry-this"),l=t("../internals/indexed-object"),i=t("../internals/to-object"),r=t("../internals/length-of-array-like"),s=t("../internals/array-species-create"),c=n([].push),u=function(m){var x=m===1,b=m===2,p=m===3,v=m===4,y=m===6,N=m===7,T=m===5||y;return function(_,O,H,F){for(var V,q,W=i(_),B=l(W),E=d(O,H),P=r(B),A=0,k=F||s,j=x?k(_,P):b||N?k(_,0):void 0;P>A;A++)if((T||A in B)&&(q=E(V=B[A],A,W),m))if(x)j[A]=q;else if(q)switch(m){case 3:return!0;case 5:return V;case 6:return A;case 2:c(j,V)}else switch(m){case 4:return!1;case 7:c(j,V)}return y?-1:p||v?v:j}};f.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(t,f,h){var d=t("../internals/to-absolute-index"),n=t("../internals/length-of-array-like"),l=t("../internals/create-property"),i=Array,r=Math.max;f.exports=function(s,c,u){for(var m=n(s),x=d(c,m),b=d(u===void 0?m:u,m),p=i(r(b-x,0)),v=0;x<b;x++,v++)l(p,v,s[x]);return p.length=v,p}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(t,f,h){var d=t("../internals/function-uncurry-this");f.exports=d([].slice)},{"../internals/function-uncurry-this":268}],232:[function(t,f,h){var d=t("../internals/is-array"),n=t("../internals/is-constructor"),l=t("../internals/is-object"),i=t("../internals/well-known-symbol")("species"),r=Array;f.exports=function(s){var c;return d(s)&&(c=s.constructor,(n(c)&&(c===r||d(c.prototype))||l(c)&&(c=c[i])===null)&&(c=void 0)),c===void 0?r:c}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(t,f,h){var d=t("../internals/array-species-constructor");f.exports=function(n,l){return new(d(n))(l===0?0:l)}},{"../internals/array-species-constructor":232}],234:[function(t,f,h){var d=t("../internals/well-known-symbol")("iterator"),n=!1;try{var l=0,i={next:function(){return{done:!!l++}},return:function(){n=!0}};i[d]=function(){return this},Array.from(i,(function(){throw 2}))}catch{}f.exports=function(r,s){try{if(!s&&!n)return!1}catch{return!1}var c=!1;try{var u={};u[d]=function(){return{next:function(){return{done:c=!0}}}},r(u)}catch{}return c}},{"../internals/well-known-symbol":357}],235:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=d({}.toString),l=d("".slice);f.exports=function(i){return l(n(i),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(t,f,h){var d=t("../internals/to-string-tag-support"),n=t("../internals/is-callable"),l=t("../internals/classof-raw"),i=t("../internals/well-known-symbol")("toStringTag"),r=Object,s=l((function(){return arguments})())==="Arguments";f.exports=d?l:function(c){var u,m,x;return c===void 0?"Undefined":c===null?"Null":typeof(m=(function(b,p){try{return b[p]}catch{}})(u=r(c),i))=="string"?m:s?l(u):(x=l(u))==="Object"&&n(u.callee)?"Arguments":x}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(t,f,h){var d=t("../internals/has-own-property"),n=t("../internals/own-keys"),l=t("../internals/object-get-own-property-descriptor"),i=t("../internals/object-define-property");f.exports=function(r,s,c){for(var u=n(s),m=i.f,x=l.f,b=0;b<u.length;b++){var p=u[b];d(r,p)||c&&d(c,p)||m(r,p,x(s,p))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(t,f,h){var d=t("../internals/well-known-symbol")("match");f.exports=function(n){var l=/./;try{"/./"[n](l)}catch{try{return l[d]=!1,"/./"[n](l)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(t,f,h){var d=t("../internals/fails");f.exports=!d((function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}))},{"../internals/fails":260}],240:[function(t,f,h){f.exports=function(d,n){return{value:d,done:n}}},{}],241:[function(t,f,h){var d=t("../internals/descriptors"),n=t("../internals/object-define-property"),l=t("../internals/create-property-descriptor");f.exports=d?function(i,r,s){return n.f(i,r,l(1,s))}:function(i,r,s){return i[r]=s,i}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(t,f,h){f.exports=function(d,n){return{enumerable:!(1&d),configurable:!(2&d),writable:!(4&d),value:n}}},{}],243:[function(t,f,h){var d=t("../internals/to-property-key"),n=t("../internals/object-define-property"),l=t("../internals/create-property-descriptor");f.exports=function(i,r,s){var c=d(r);c in i?n.f(i,c,l(0,s)):i[c]=s}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(t,f,h){var d=t("../internals/make-built-in"),n=t("../internals/object-define-property");f.exports=function(l,i,r){return r.get&&d(r.get,i,{getter:!0}),r.set&&d(r.set,i,{setter:!0}),n.f(l,i,r)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(t,f,h){var d=t("../internals/is-callable"),n=t("../internals/object-define-property"),l=t("../internals/make-built-in"),i=t("../internals/define-global-property");f.exports=function(r,s,c,u){u||(u={});var m=u.enumerable,x=u.name!==void 0?u.name:s;if(d(c)&&l(c,x,u),u.global)m?r[s]=c:i(s,c);else{try{u.unsafe?r[s]&&(m=!0):delete r[s]}catch{}m?r[s]=c:n.f(r,s,{value:c,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return r}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(t,f,h){var d=t("../internals/global"),n=Object.defineProperty;f.exports=function(l,i){try{n(d,l,{value:i,configurable:!0,writable:!0})}catch{d[l]=i}return i}},{"../internals/global":274}],247:[function(t,f,h){var d=t("../internals/fails");f.exports=!d((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}))},{"../internals/fails":260}],248:[function(t,f,h){var d=typeof document=="object"&&document.all,n=d===void 0&&d!==void 0;f.exports={all:d,IS_HTMLDDA:n}},{}],249:[function(t,f,h){var d=t("../internals/global"),n=t("../internals/is-object"),l=d.document,i=n(l)&&n(l.createElement);f.exports=function(r){return i?l.createElement(r):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(t,f,h){var d=t("../internals/engine-is-deno"),n=t("../internals/engine-is-node");f.exports=!d&&!n&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(t,f,h){f.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(t,f,h){var d=t("../internals/engine-user-agent");f.exports=/ipad|iphone|ipod/i.test(d)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(t,f,h){var d=t("../internals/engine-user-agent");f.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(d)},{"../internals/engine-user-agent":256}],254:[function(t,f,h){var d=t("../internals/global"),n=t("../internals/classof-raw");f.exports=n(d.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(t,f,h){var d=t("../internals/engine-user-agent");f.exports=/web0s(?!.*chrome)/i.test(d)},{"../internals/engine-user-agent":256}],256:[function(t,f,h){f.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(t,f,h){var d,n,l=t("../internals/global"),i=t("../internals/engine-user-agent"),r=l.process,s=l.Deno,c=r&&r.versions||s&&s.version,u=c&&c.v8;u&&(n=(d=u.split("."))[0]>0&&d[0]<4?1:+(d[0]+d[1])),!n&&i&&(!(d=i.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=i.match(/Chrome\/(\d+)/))&&(n=+d[1]),f.exports=n},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(t,f,h){f.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(t,f,h){var d=t("../internals/global"),n=t("../internals/object-get-own-property-descriptor").f,l=t("../internals/create-non-enumerable-property"),i=t("../internals/define-built-in"),r=t("../internals/define-global-property"),s=t("../internals/copy-constructor-properties"),c=t("../internals/is-forced");f.exports=function(u,m){var x,b,p,v,y,N=u.target,T=u.global,_=u.stat;if(x=T?d:_?d[N]||r(N,{}):(d[N]||{}).prototype)for(b in m){if(v=m[b],p=u.dontCallGetSet?(y=n(x,b))&&y.value:x[b],!c(T?b:N+(_?".":"#")+b,u.forced)&&p!==void 0){if(typeof v==typeof p)continue;s(v,p)}(u.sham||p&&p.sham)&&l(v,"sham",!0),i(x,b,v,u)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(t,f,h){f.exports=function(d){try{return!!d()}catch{return!0}}},{}],261:[function(t,f,h){var d=t("../internals/function-bind-native"),n=Function.prototype,l=n.apply,i=n.call;f.exports=typeof Reflect=="object"&&Reflect.apply||(d?i.bind(l):function(){return i.apply(l,arguments)})},{"../internals/function-bind-native":263}],262:[function(t,f,h){var d=t("../internals/function-uncurry-this-clause"),n=t("../internals/a-callable"),l=t("../internals/function-bind-native"),i=d(d.bind);f.exports=function(r,s){return n(r),s===void 0?r:l?i(r,s):function(){return r.apply(s,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(t,f,h){var d=t("../internals/fails");f.exports=!d((function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}))},{"../internals/fails":260}],264:[function(t,f,h){var d=t("../internals/function-bind-native"),n=Function.prototype.call;f.exports=d?n.bind(n):function(){return n.apply(n,arguments)}},{"../internals/function-bind-native":263}],265:[function(t,f,h){var d=t("../internals/descriptors"),n=t("../internals/has-own-property"),l=Function.prototype,i=d&&Object.getOwnPropertyDescriptor,r=n(l,"name"),s=r&&(function(){}).name==="something",c=r&&(!d||d&&i(l,"name").configurable);f.exports={EXISTS:r,PROPER:s,CONFIGURABLE:c}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=t("../internals/a-callable");f.exports=function(l,i,r){try{return d(n(Object.getOwnPropertyDescriptor(l,i)[r]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(t,f,h){var d=t("../internals/classof-raw"),n=t("../internals/function-uncurry-this");f.exports=function(l){if(d(l)==="Function")return n(l)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(t,f,h){var d=t("../internals/function-bind-native"),n=Function.prototype,l=n.call,i=d&&n.bind.bind(l,l);f.exports=d?i:function(r){return function(){return l.apply(r,arguments)}}},{"../internals/function-bind-native":263}],269:[function(t,f,h){var d=t("../internals/global"),n=t("../internals/is-callable"),l=function(i){return n(i)?i:void 0};f.exports=function(i,r){return arguments.length<2?l(d[i]):d[i]&&d[i][r]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(t,f,h){var d=t("../internals/classof"),n=t("../internals/get-method"),l=t("../internals/is-null-or-undefined"),i=t("../internals/iterators"),r=t("../internals/well-known-symbol")("iterator");f.exports=function(s){if(!l(s))return n(s,r)||n(s,"@@iterator")||i[d(s)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(t,f,h){var d=t("../internals/function-call"),n=t("../internals/a-callable"),l=t("../internals/an-object"),i=t("../internals/try-to-string"),r=t("../internals/get-iterator-method"),s=TypeError;f.exports=function(c,u){var m=arguments.length<2?r(c):u;if(n(m))return l(d(m,c));throw new s(i(c)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=t("../internals/is-array"),l=t("../internals/is-callable"),i=t("../internals/classof-raw"),r=t("../internals/to-string"),s=d([].push);f.exports=function(c){if(l(c))return c;if(n(c)){for(var u=c.length,m=[],x=0;x<u;x++){var b=c[x];typeof b=="string"?s(m,b):typeof b!="number"&&i(b)!=="Number"&&i(b)!=="String"||s(m,r(b))}var p=m.length,v=!0;return function(y,N){if(v)return v=!1,N;if(n(this))return N;for(var T=0;T<p;T++)if(m[T]===y)return N}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(t,f,h){var d=t("../internals/a-callable"),n=t("../internals/is-null-or-undefined");f.exports=function(l,i){var r=l[i];return n(r)?void 0:d(r)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(t,f,h){(function(d){(function(){var n=function(l){return l&&l.Math===Math&&l};f.exports=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof d=="object"&&d)||(function(){return this})()||this||Function("return this")()}).call(this)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=t("../internals/to-object"),l=d({}.hasOwnProperty);f.exports=Object.hasOwn||function(i,r){return l(n(i),r)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(t,f,h){f.exports={}},{}],277:[function(t,f,h){f.exports=function(d,n){try{arguments.length===1?console.error(d):console.error(d,n)}catch{}}},{}],278:[function(t,f,h){var d=t("../internals/get-built-in");f.exports=d("document","documentElement")},{"../internals/get-built-in":269}],279:[function(t,f,h){var d=t("../internals/descriptors"),n=t("../internals/fails"),l=t("../internals/document-create-element");f.exports=!d&&!n((function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!==7}))},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=t("../internals/fails"),l=t("../internals/classof-raw"),i=Object,r=d("".split);f.exports=n((function(){return!i("z").propertyIsEnumerable(0)}))?function(s){return l(s)==="String"?r(s,""):i(s)}:i},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=t("../internals/is-callable"),l=t("../internals/shared-store"),i=d(Function.toString);n(l.inspectSource)||(l.inspectSource=function(r){return i(r)}),f.exports=l.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(t,f,h){var d,n,l,i=t("../internals/weak-map-basic-detection"),r=t("../internals/global"),s=t("../internals/is-object"),c=t("../internals/create-non-enumerable-property"),u=t("../internals/has-own-property"),m=t("../internals/shared-store"),x=t("../internals/shared-key"),b=t("../internals/hidden-keys"),p=r.TypeError,v=r.WeakMap;if(i||m.state){var y=m.state||(m.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,d=function(T,_){if(y.has(T))throw new p("Object already initialized");return _.facade=T,y.set(T,_),_},n=function(T){return y.get(T)||{}},l=function(T){return y.has(T)}}else{var N=x("state");b[N]=!0,d=function(T,_){if(u(T,N))throw new p("Object already initialized");return _.facade=T,c(T,N,_),_},n=function(T){return u(T,N)?T[N]:{}},l=function(T){return u(T,N)}}f.exports={set:d,get:n,has:l,enforce:function(T){return l(T)?n(T):d(T,{})},getterFor:function(T){return function(_){var O;if(!s(_)||(O=n(_)).type!==T)throw new p("Incompatible receiver, "+T+" required");return O}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(t,f,h){var d=t("../internals/well-known-symbol"),n=t("../internals/iterators"),l=d("iterator"),i=Array.prototype;f.exports=function(r){return r!==void 0&&(n.Array===r||i[l]===r)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(t,f,h){var d=t("../internals/classof-raw");f.exports=Array.isArray||function(n){return d(n)==="Array"}},{"../internals/classof-raw":235}],285:[function(t,f,h){var d=t("../internals/document-all"),n=d.all;f.exports=d.IS_HTMLDDA?function(l){return typeof l=="function"||l===n}:function(l){return typeof l=="function"}},{"../internals/document-all":248}],286:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=t("../internals/fails"),l=t("../internals/is-callable"),i=t("../internals/classof"),r=t("../internals/get-built-in"),s=t("../internals/inspect-source"),c=function(){},u=[],m=r("Reflect","construct"),x=/^\s*(?:class|function)\b/,b=d(x.exec),p=!x.test(c),v=function(N){if(!l(N))return!1;try{return m(c,u,N),!0}catch{return!1}},y=function(N){if(!l(N))return!1;switch(i(N)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!b(x,s(N))}catch{return!0}};y.sham=!0,f.exports=!m||n((function(){var N;return v(v.call)||!v(Object)||!v((function(){N=!0}))||N}))?y:v},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(t,f,h){var d=t("../internals/fails"),n=t("../internals/is-callable"),l=/#|\.prototype\./,i=function(m,x){var b=s[r(m)];return b===u||b!==c&&(n(x)?d(x):!!x)},r=i.normalize=function(m){return String(m).replace(l,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";f.exports=i},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(t,f,h){f.exports=function(d){return d==null}},{}],289:[function(t,f,h){var d=t("../internals/is-callable"),n=t("../internals/document-all"),l=n.all;f.exports=n.IS_HTMLDDA?function(i){return typeof i=="object"?i!==null:d(i)||i===l}:function(i){return typeof i=="object"?i!==null:d(i)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(t,f,h){f.exports=!1},{}],291:[function(t,f,h){var d=t("../internals/is-object"),n=t("../internals/classof-raw"),l=t("../internals/well-known-symbol")("match");f.exports=function(i){var r;return d(i)&&((r=i[l])!==void 0?!!r:n(i)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(t,f,h){var d=t("../internals/get-built-in"),n=t("../internals/is-callable"),l=t("../internals/object-is-prototype-of"),i=t("../internals/use-symbol-as-uid"),r=Object;f.exports=i?function(s){return typeof s=="symbol"}:function(s){var c=d("Symbol");return n(c)&&l(c.prototype,r(s))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(t,f,h){var d=t("../internals/function-bind-context"),n=t("../internals/function-call"),l=t("../internals/an-object"),i=t("../internals/try-to-string"),r=t("../internals/is-array-iterator-method"),s=t("../internals/length-of-array-like"),c=t("../internals/object-is-prototype-of"),u=t("../internals/get-iterator"),m=t("../internals/get-iterator-method"),x=t("../internals/iterator-close"),b=TypeError,p=function(y,N){this.stopped=y,this.result=N},v=p.prototype;f.exports=function(y,N,T){var _,O,H,F,V,q,W,B=T&&T.that,E=!(!T||!T.AS_ENTRIES),P=!(!T||!T.IS_RECORD),A=!(!T||!T.IS_ITERATOR),k=!(!T||!T.INTERRUPTED),j=d(N,B),S=function(D){return _&&x(_,"normal",D),new p(!0,D)},C=function(D){return E?(l(D),k?j(D[0],D[1],S):j(D[0],D[1])):k?j(D,S):j(D)};if(P)_=y.iterator;else if(A)_=y;else{if(!(O=m(y)))throw new b(i(y)+" is not iterable");if(r(O)){for(H=0,F=s(y);F>H;H++)if((V=C(y[H]))&&c(v,V))return V;return new p(!1)}_=u(y,O)}for(q=P?y.next:_.next;!(W=n(q,_)).done;){try{V=C(W.value)}catch(D){x(_,"throw",D)}if(typeof V=="object"&&V&&c(v,V))return V}return new p(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(t,f,h){var d=t("../internals/function-call"),n=t("../internals/an-object"),l=t("../internals/get-method");f.exports=function(i,r,s){var c,u;n(i);try{if(!(c=l(i,"return"))){if(r==="throw")throw s;return s}c=d(c,i)}catch(m){u=!0,c=m}if(r==="throw")throw s;if(u)throw c;return n(c),s}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(t,f,h){var d=t("../internals/iterators-core").IteratorPrototype,n=t("../internals/object-create"),l=t("../internals/create-property-descriptor"),i=t("../internals/set-to-string-tag"),r=t("../internals/iterators"),s=function(){return this};f.exports=function(c,u,m,x){var b=u+" Iterator";return c.prototype=n(d,{next:l(+!x,m)}),i(c,b,!1,!0),r[b]=s,c}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/function-call"),l=t("../internals/is-pure"),i=t("../internals/function-name"),r=t("../internals/is-callable"),s=t("../internals/iterator-create-constructor"),c=t("../internals/object-get-prototype-of"),u=t("../internals/object-set-prototype-of"),m=t("../internals/set-to-string-tag"),x=t("../internals/create-non-enumerable-property"),b=t("../internals/define-built-in"),p=t("../internals/well-known-symbol"),v=t("../internals/iterators"),y=t("../internals/iterators-core"),N=i.PROPER,T=i.CONFIGURABLE,_=y.IteratorPrototype,O=y.BUGGY_SAFARI_ITERATORS,H=p("iterator"),F=function(){return this};f.exports=function(V,q,W,B,E,P,A){s(W,q,B);var k,j,S,C=function($){if($===E&&X)return X;if(!O&&$&&$ in L)return L[$];switch($){case"keys":case"values":case"entries":return function(){return new W(this,$)}}return function(){return new W(this)}},D=q+" Iterator",R=!1,L=V.prototype,Y=L[H]||L["@@iterator"]||E&&L[E],X=!O&&Y||C(E),ae=q==="Array"&&L.entries||Y;if(ae&&(k=c(ae.call(new V)))!==Object.prototype&&k.next&&(l||c(k)===_||(u?u(k,_):r(k[H])||b(k,H,F)),m(k,D,!0,!0),l&&(v[D]=F)),N&&E==="values"&&Y&&Y.name!=="values"&&(!l&&T?x(L,"name","values"):(R=!0,X=function(){return n(Y,this)})),E)if(j={values:C("values"),keys:P?X:C("keys"),entries:C("entries")},A)for(S in j)(O||R||!(S in L))&&b(L,S,j[S]);else d({target:q,proto:!0,forced:O||R},j);return l&&!A||L[H]===X||b(L,H,X,{name:E}),v[q]=X,j}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(t,f,h){var d,n,l,i=t("../internals/fails"),r=t("../internals/is-callable"),s=t("../internals/is-object"),c=t("../internals/object-create"),u=t("../internals/object-get-prototype-of"),m=t("../internals/define-built-in"),x=t("../internals/well-known-symbol"),b=t("../internals/is-pure"),p=x("iterator"),v=!1;[].keys&&("next"in(l=[].keys())?(n=u(u(l)))!==Object.prototype&&(d=n):v=!0),!s(d)||i((function(){var y={};return d[p].call(y)!==y}))?d={}:b&&(d=c(d)),r(d[p])||m(d,p,(function(){return this})),f.exports={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:v}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(t,f,h){arguments[4][276][0].apply(h,arguments)},{dup:276}],299:[function(t,f,h){var d=t("../internals/to-length");f.exports=function(n){return d(n.length)}},{"../internals/to-length":343}],300:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=t("../internals/fails"),l=t("../internals/is-callable"),i=t("../internals/has-own-property"),r=t("../internals/descriptors"),s=t("../internals/function-name").CONFIGURABLE,c=t("../internals/inspect-source"),u=t("../internals/internal-state"),m=u.enforce,x=u.get,b=String,p=Object.defineProperty,v=d("".slice),y=d("".replace),N=d([].join),T=r&&!n((function(){return p((function(){}),"length",{value:8}).length!==8})),_=String(String).split("String"),O=f.exports=function(H,F,V){v(b(F),0,7)==="Symbol("&&(F="["+y(b(F),/^Symbol\(([^)]*)\)/,"$1")+"]"),V&&V.getter&&(F="get "+F),V&&V.setter&&(F="set "+F),(!i(H,"name")||s&&H.name!==F)&&(r?p(H,"name",{value:F,configurable:!0}):H.name=F),T&&V&&i(V,"arity")&&H.length!==V.arity&&p(H,"length",{value:V.arity});try{V&&i(V,"constructor")&&V.constructor?r&&p(H,"prototype",{writable:!1}):H.prototype&&(H.prototype=void 0)}catch{}var q=m(H);return i(q,"source")||(q.source=N(_,typeof F=="string"?F:"")),H};Function.prototype.toString=O((function(){return l(this)&&x(this).source||c(this)}),"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(t,f,h){var d=Math.ceil,n=Math.floor;f.exports=Math.trunc||function(l){var i=+l;return(i>0?n:d)(i)}},{}],302:[function(t,f,h){var d,n,l,i,r,s=t("../internals/global"),c=t("../internals/function-bind-context"),u=t("../internals/object-get-own-property-descriptor").f,m=t("../internals/task").set,x=t("../internals/queue"),b=t("../internals/engine-is-ios"),p=t("../internals/engine-is-ios-pebble"),v=t("../internals/engine-is-webos-webkit"),y=t("../internals/engine-is-node"),N=s.MutationObserver||s.WebKitMutationObserver,T=s.document,_=s.process,O=s.Promise,H=u(s,"queueMicrotask"),F=H&&H.value;if(!F){var V=new x,q=function(){var W,B;for(y&&(W=_.domain)&&W.exit();B=V.get();)try{B()}catch(E){throw V.head&&d(),E}W&&W.enter()};b||y||v||!N||!T?!p&&O&&O.resolve?((i=O.resolve(void 0)).constructor=O,r=c(i.then,i),d=function(){r(q)}):y?d=function(){_.nextTick(q)}:(m=c(m,s),d=function(){m(q)}):(n=!0,l=T.createTextNode(""),new N(q).observe(l,{characterData:!0}),d=function(){l.data=n=!n}),F=function(W){V.head||d(),V.add(W)}}f.exports=F},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(t,f,h){var d=t("../internals/a-callable"),n=TypeError,l=function(i){var r,s;this.promise=new i((function(c,u){if(r!==void 0||s!==void 0)throw new n("Bad Promise constructor");r=c,s=u})),this.resolve=d(r),this.reject=d(s)};f.exports.f=function(i){return new l(i)}},{"../internals/a-callable":222}],304:[function(t,f,h){var d=t("../internals/is-regexp"),n=TypeError;f.exports=function(l){if(d(l))throw new n("The method doesn't accept regular expressions");return l}},{"../internals/is-regexp":291}],305:[function(t,f,h){var d=t("../internals/descriptors"),n=t("../internals/function-uncurry-this"),l=t("../internals/function-call"),i=t("../internals/fails"),r=t("../internals/object-keys"),s=t("../internals/object-get-own-property-symbols"),c=t("../internals/object-property-is-enumerable"),u=t("../internals/to-object"),m=t("../internals/indexed-object"),x=Object.assign,b=Object.defineProperty,p=n([].concat);f.exports=!x||i((function(){if(d&&x({b:1},x(b({},"a",{enumerable:!0,get:function(){b(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var v={},y={},N=Symbol("assign detection");return v[N]=7,"abcdefghijklmnopqrst".split("").forEach((function(T){y[T]=T})),x({},v)[N]!==7||r(x({},y)).join("")!=="abcdefghijklmnopqrst"}))?function(v,y){for(var N=u(v),T=arguments.length,_=1,O=s.f,H=c.f;T>_;)for(var F,V=m(arguments[_++]),q=O?p(r(V),O(V)):r(V),W=q.length,B=0;W>B;)F=q[B++],d&&!l(H,V,F)||(N[F]=V[F]);return N}:x},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(t,f,h){var d,n=t("../internals/an-object"),l=t("../internals/object-define-properties"),i=t("../internals/enum-bug-keys"),r=t("../internals/hidden-keys"),s=t("../internals/html"),c=t("../internals/document-create-element"),u=t("../internals/shared-key"),m=u("IE_PROTO"),x=function(){},b=function(y){return"<script>"+y+"<\/script>"},p=function(y){y.write(b("")),y.close();var N=y.parentWindow.Object;return y=null,N},v=function(){try{d=new ActiveXObject("htmlfile")}catch{}var y,N;v=typeof document<"u"?document.domain&&d?p(d):((N=c("iframe")).style.display="none",s.appendChild(N),N.src="javascript:",(y=N.contentWindow.document).open(),y.write(b("document.F=Object")),y.close(),y.F):p(d);for(var T=i.length;T--;)delete v.prototype[i[T]];return v()};r[m]=!0,f.exports=Object.create||function(y,N){var T;return y!==null?(x.prototype=n(y),T=new x,x.prototype=null,T[m]=y):T=v(),N===void 0?T:l.f(T,N)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(t,f,h){var d=t("../internals/descriptors"),n=t("../internals/v8-prototype-define-bug"),l=t("../internals/object-define-property"),i=t("../internals/an-object"),r=t("../internals/to-indexed-object"),s=t("../internals/object-keys");h.f=d&&!n?Object.defineProperties:function(c,u){i(c);for(var m,x=r(u),b=s(u),p=b.length,v=0;p>v;)l.f(c,m=b[v++],x[m]);return c}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(t,f,h){var d=t("../internals/descriptors"),n=t("../internals/ie8-dom-define"),l=t("../internals/v8-prototype-define-bug"),i=t("../internals/an-object"),r=t("../internals/to-property-key"),s=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor;h.f=d?l?function(m,x,b){if(i(m),x=r(x),i(b),typeof m=="function"&&x==="prototype"&&"value"in b&&"writable"in b&&!b.writable){var p=u(m,x);p&&p.writable&&(m[x]=b.value,b={configurable:"configurable"in b?b.configurable:p.configurable,enumerable:"enumerable"in b?b.enumerable:p.enumerable,writable:!1})}return c(m,x,b)}:c:function(m,x,b){if(i(m),x=r(x),i(b),n)try{return c(m,x,b)}catch{}if("get"in b||"set"in b)throw new s("Accessors not supported");return"value"in b&&(m[x]=b.value),m}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(t,f,h){var d=t("../internals/descriptors"),n=t("../internals/function-call"),l=t("../internals/object-property-is-enumerable"),i=t("../internals/create-property-descriptor"),r=t("../internals/to-indexed-object"),s=t("../internals/to-property-key"),c=t("../internals/has-own-property"),u=t("../internals/ie8-dom-define"),m=Object.getOwnPropertyDescriptor;h.f=d?m:function(x,b){if(x=r(x),b=s(b),u)try{return m(x,b)}catch{}if(c(x,b))return i(!n(l.f,x,b),x[b])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(t,f,h){var d=t("../internals/classof-raw"),n=t("../internals/to-indexed-object"),l=t("../internals/object-get-own-property-names").f,i=t("../internals/array-slice-simple"),r=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];f.exports.f=function(s){return r&&d(s)==="Window"?(function(c){try{return l(c)}catch{return i(r)}})(s):l(n(s))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(t,f,h){var d=t("../internals/object-keys-internal"),n=t("../internals/enum-bug-keys").concat("length","prototype");h.f=Object.getOwnPropertyNames||function(l){return d(l,n)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(t,f,h){h.f=Object.getOwnPropertySymbols},{}],313:[function(t,f,h){var d=t("../internals/has-own-property"),n=t("../internals/is-callable"),l=t("../internals/to-object"),i=t("../internals/shared-key"),r=t("../internals/correct-prototype-getter"),s=i("IE_PROTO"),c=Object,u=c.prototype;f.exports=r?c.getPrototypeOf:function(m){var x=l(m);if(d(x,s))return x[s];var b=x.constructor;return n(b)&&x instanceof b?b.prototype:x instanceof c?u:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(t,f,h){var d=t("../internals/function-uncurry-this");f.exports=d({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=t("../internals/has-own-property"),l=t("../internals/to-indexed-object"),i=t("../internals/array-includes").indexOf,r=t("../internals/hidden-keys"),s=d([].push);f.exports=function(c,u){var m,x=l(c),b=0,p=[];for(m in x)!n(r,m)&&n(x,m)&&s(p,m);for(;u.length>b;)n(x,m=u[b++])&&(~i(p,m)||s(p,m));return p}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(t,f,h){var d=t("../internals/object-keys-internal"),n=t("../internals/enum-bug-keys");f.exports=Object.keys||function(l){return d(l,n)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(t,f,h){var d={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,l=n&&!d.call({1:2},1);h.f=l?function(i){var r=n(this,i);return!!r&&r.enumerable}:d},{}],318:[function(t,f,h){var d=t("../internals/function-uncurry-this-accessor"),n=t("../internals/an-object"),l=t("../internals/a-possible-prototype");f.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var i,r=!1,s={};try{(i=d(Object.prototype,"__proto__","set"))(s,[]),r=s instanceof Array}catch{}return function(c,u){return n(c),l(u),r?i(c,u):c.__proto__=u,c}})():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(t,f,h){var d=t("../internals/descriptors"),n=t("../internals/fails"),l=t("../internals/function-uncurry-this"),i=t("../internals/object-get-prototype-of"),r=t("../internals/object-keys"),s=t("../internals/to-indexed-object"),c=l(t("../internals/object-property-is-enumerable").f),u=l([].push),m=d&&n((function(){var b=Object.create(null);return b[2]=2,!c(b,2)})),x=function(b){return function(p){for(var v,y=s(p),N=r(y),T=m&&i(y)===null,_=N.length,O=0,H=[];_>O;)v=N[O++],d&&!(T?v in y:c(y,v))||u(H,b?[v,y[v]]:y[v]);return H}};f.exports={entries:x(!0),values:x(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(t,f,h){var d=t("../internals/function-call"),n=t("../internals/is-callable"),l=t("../internals/is-object"),i=TypeError;f.exports=function(r,s){var c,u;if(s==="string"&&n(c=r.toString)&&!l(u=d(c,r))||n(c=r.valueOf)&&!l(u=d(c,r))||s!=="string"&&n(c=r.toString)&&!l(u=d(c,r)))return u;throw new i("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(t,f,h){var d=t("../internals/get-built-in"),n=t("../internals/function-uncurry-this"),l=t("../internals/object-get-own-property-names"),i=t("../internals/object-get-own-property-symbols"),r=t("../internals/an-object"),s=n([].concat);f.exports=d("Reflect","ownKeys")||function(c){var u=l.f(r(c)),m=i.f;return m?s(u,m(c)):u}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(t,f,h){var d=t("../internals/global");f.exports=d},{"../internals/global":274}],323:[function(t,f,h){f.exports=function(d){try{return{error:!1,value:d()}}catch(n){return{error:!0,value:n}}}},{}],324:[function(t,f,h){var d=t("../internals/global"),n=t("../internals/promise-native-constructor"),l=t("../internals/is-callable"),i=t("../internals/is-forced"),r=t("../internals/inspect-source"),s=t("../internals/well-known-symbol"),c=t("../internals/engine-is-browser"),u=t("../internals/engine-is-deno"),m=t("../internals/is-pure"),x=t("../internals/engine-v8-version"),b=n&&n.prototype,p=s("species"),v=!1,y=l(d.PromiseRejectionEvent),N=i("Promise",(function(){var T=r(n),_=T!==String(n);if(!_&&x===66||m&&(!b.catch||!b.finally))return!0;if(!x||x<51||!/native code/.test(T)){var O=new n((function(F){F(1)})),H=function(F){F((function(){}),(function(){}))};if((O.constructor={})[p]=H,!(v=O.then((function(){}))instanceof H))return!0}return!_&&(c||u)&&!y}));f.exports={CONSTRUCTOR:N,REJECTION_EVENT:y,SUBCLASSING:v}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(t,f,h){var d=t("../internals/global");f.exports=d.Promise},{"../internals/global":274}],326:[function(t,f,h){var d=t("../internals/an-object"),n=t("../internals/is-object"),l=t("../internals/new-promise-capability");f.exports=function(i,r){if(d(i),n(r)&&r.constructor===i)return r;var s=l.f(i);return(0,s.resolve)(r),s.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(t,f,h){var d=t("../internals/promise-native-constructor"),n=t("../internals/check-correctness-of-iteration"),l=t("../internals/promise-constructor-detection").CONSTRUCTOR;f.exports=l||!n((function(i){d.all(i).then(void 0,(function(){}))}))},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(t,f,h){var d=function(){this.head=null,this.tail=null};d.prototype={add:function(n){var l={item:n,next:null},i=this.tail;i?i.next=l:this.head=l,this.tail=l},get:function(){var n=this.head;if(n)return(this.head=n.next)===null&&(this.tail=null),n.item}},f.exports=d},{}],329:[function(t,f,h){var d=t("../internals/is-null-or-undefined"),n=TypeError;f.exports=function(l){if(d(l))throw new n("Can't call method on "+l);return l}},{"../internals/is-null-or-undefined":288}],330:[function(t,f,h){var d=t("../internals/get-built-in"),n=t("../internals/define-built-in-accessor"),l=t("../internals/well-known-symbol"),i=t("../internals/descriptors"),r=l("species");f.exports=function(s){var c=d(s);i&&c&&!c[r]&&n(c,r,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(t,f,h){var d=t("../internals/object-define-property").f,n=t("../internals/has-own-property"),l=t("../internals/well-known-symbol")("toStringTag");f.exports=function(i,r,s){i&&!s&&(i=i.prototype),i&&!n(i,l)&&d(i,l,{configurable:!0,value:r})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(t,f,h){var d=t("../internals/shared"),n=t("../internals/uid"),l=d("keys");f.exports=function(i){return l[i]||(l[i]=n(i))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(t,f,h){var d=t("../internals/global"),n=t("../internals/define-global-property"),l=d["__core-js_shared__"]||n("__core-js_shared__",{});f.exports=l},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(t,f,h){var d=t("../internals/is-pure"),n=t("../internals/shared-store");(f.exports=function(l,i){return n[l]||(n[l]=i!==void 0?i:{})})("versions",[]).push({version:"3.33.0",mode:d?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(t,f,h){var d=t("../internals/an-object"),n=t("../internals/a-constructor"),l=t("../internals/is-null-or-undefined"),i=t("../internals/well-known-symbol")("species");f.exports=function(r,s){var c,u=d(r).constructor;return u===void 0||l(c=d(u)[i])?s:n(c)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(t,f,h){var d=t("../internals/engine-v8-version"),n=t("../internals/fails"),l=t("../internals/global").String;f.exports=!!Object.getOwnPropertySymbols&&!n((function(){var i=Symbol("symbol detection");return!l(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&d&&d<41}))},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(t,f,h){var d=t("../internals/function-call"),n=t("../internals/get-built-in"),l=t("../internals/well-known-symbol"),i=t("../internals/define-built-in");f.exports=function(){var r=n("Symbol"),s=r&&r.prototype,c=s&&s.valueOf,u=l("toPrimitive");s&&!s[u]&&i(s,u,(function(m){return d(c,this)}),{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(t,f,h){var d=t("../internals/symbol-constructor-detection");f.exports=d&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(t,f,h){var d,n,l,i,r=t("../internals/global"),s=t("../internals/function-apply"),c=t("../internals/function-bind-context"),u=t("../internals/is-callable"),m=t("../internals/has-own-property"),x=t("../internals/fails"),b=t("../internals/html"),p=t("../internals/array-slice"),v=t("../internals/document-create-element"),y=t("../internals/validate-arguments-length"),N=t("../internals/engine-is-ios"),T=t("../internals/engine-is-node"),_=r.setImmediate,O=r.clearImmediate,H=r.process,F=r.Dispatch,V=r.Function,q=r.MessageChannel,W=r.String,B=0,E={};x((function(){d=r.location}));var P=function(S){if(m(E,S)){var C=E[S];delete E[S],C()}},A=function(S){return function(){P(S)}},k=function(S){P(S.data)},j=function(S){r.postMessage(W(S),d.protocol+"//"+d.host)};_&&O||(_=function(S){y(arguments.length,1);var C=u(S)?S:V(S),D=p(arguments,1);return E[++B]=function(){s(C,void 0,D)},n(B),B},O=function(S){delete E[S]},T?n=function(S){H.nextTick(A(S))}:F&&F.now?n=function(S){F.now(A(S))}:q&&!N?(i=(l=new q).port2,l.port1.onmessage=k,n=c(i.postMessage,i)):r.addEventListener&&u(r.postMessage)&&!r.importScripts&&d&&d.protocol!=="file:"&&!x(j)?(n=j,r.addEventListener("message",k,!1)):n="onreadystatechange"in v("script")?function(S){b.appendChild(v("script")).onreadystatechange=function(){b.removeChild(this),P(S)}}:function(S){setTimeout(A(S),0)}),f.exports={set:_,clear:O}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(t,f,h){var d=t("../internals/to-integer-or-infinity"),n=Math.max,l=Math.min;f.exports=function(i,r){var s=d(i);return s<0?n(s+r,0):l(s,r)}},{"../internals/to-integer-or-infinity":342}],341:[function(t,f,h){var d=t("../internals/indexed-object"),n=t("../internals/require-object-coercible");f.exports=function(l){return d(n(l))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(t,f,h){var d=t("../internals/math-trunc");f.exports=function(n){var l=+n;return l!=l||l===0?0:d(l)}},{"../internals/math-trunc":301}],343:[function(t,f,h){var d=t("../internals/to-integer-or-infinity"),n=Math.min;f.exports=function(l){return l>0?n(d(l),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(t,f,h){var d=t("../internals/require-object-coercible"),n=Object;f.exports=function(l){return n(d(l))}},{"../internals/require-object-coercible":329}],345:[function(t,f,h){var d=t("../internals/function-call"),n=t("../internals/is-object"),l=t("../internals/is-symbol"),i=t("../internals/get-method"),r=t("../internals/ordinary-to-primitive"),s=t("../internals/well-known-symbol"),c=TypeError,u=s("toPrimitive");f.exports=function(m,x){if(!n(m)||l(m))return m;var b,p=i(m,u);if(p){if(x===void 0&&(x="default"),b=d(p,m,x),!n(b)||l(b))return b;throw new c("Can't convert object to primitive value")}return x===void 0&&(x="number"),r(m,x)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(t,f,h){var d=t("../internals/to-primitive"),n=t("../internals/is-symbol");f.exports=function(l){var i=d(l,"string");return n(i)?i:i+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(t,f,h){var d={};d[t("../internals/well-known-symbol")("toStringTag")]="z",f.exports=String(d)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(t,f,h){var d=t("../internals/classof"),n=String;f.exports=function(l){if(d(l)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return n(l)}},{"../internals/classof":236}],349:[function(t,f,h){var d=String;f.exports=function(n){try{return d(n)}catch{return"Object"}}},{}],350:[function(t,f,h){var d=t("../internals/function-uncurry-this"),n=0,l=Math.random(),i=d(1 .toString);f.exports=function(r){return"Symbol("+(r===void 0?"":r)+")_"+i(++n+l,36)}},{"../internals/function-uncurry-this":268}],351:[function(t,f,h){var d=t("../internals/symbol-constructor-detection");f.exports=d&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(t,f,h){var d=t("../internals/descriptors"),n=t("../internals/fails");f.exports=d&&n((function(){return Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype!==42}))},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(t,f,h){var d=TypeError;f.exports=function(n,l){if(n<l)throw new d("Not enough arguments");return n}},{}],354:[function(t,f,h){var d=t("../internals/global"),n=t("../internals/is-callable"),l=d.WeakMap;f.exports=n(l)&&/native code/.test(String(l))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(t,f,h){var d=t("../internals/path"),n=t("../internals/has-own-property"),l=t("../internals/well-known-symbol-wrapped"),i=t("../internals/object-define-property").f;f.exports=function(r){var s=d.Symbol||(d.Symbol={});n(s,r)||i(s,r,{value:l.f(r)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(t,f,h){var d=t("../internals/well-known-symbol");h.f=d},{"../internals/well-known-symbol":357}],357:[function(t,f,h){var d=t("../internals/global"),n=t("../internals/shared"),l=t("../internals/has-own-property"),i=t("../internals/uid"),r=t("../internals/symbol-constructor-detection"),s=t("../internals/use-symbol-as-uid"),c=d.Symbol,u=n("wks"),m=s?c.for||c:c&&c.withoutSetter||i;f.exports=function(x){return l(u,x)||(u[x]=r&&l(c,x)?c[x]:m("Symbol."+x)),u[x]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/array-iteration").findIndex,l=t("../internals/add-to-unscopables"),i=!0;"findIndex"in[]&&Array(1).findIndex((function(){i=!1})),d({target:"Array",proto:!0,forced:i},{findIndex:function(r){return n(this,r,arguments.length>1?arguments[1]:void 0)}}),l("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/array-iteration").find,l=t("../internals/add-to-unscopables"),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),d({target:"Array",proto:!0,forced:i},{find:function(r){return n(this,r,arguments.length>1?arguments[1]:void 0)}}),l("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/array-includes").includes,l=t("../internals/fails"),i=t("../internals/add-to-unscopables");d({target:"Array",proto:!0,forced:l((function(){return!Array(1).includes()}))},{includes:function(r){return n(this,r,arguments.length>1?arguments[1]:void 0)}}),i("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(t,f,h){var d=t("../internals/to-indexed-object"),n=t("../internals/add-to-unscopables"),l=t("../internals/iterators"),i=t("../internals/internal-state"),r=t("../internals/object-define-property").f,s=t("../internals/iterator-define"),c=t("../internals/create-iter-result-object"),u=t("../internals/is-pure"),m=t("../internals/descriptors"),x=i.set,b=i.getterFor("Array Iterator");f.exports=s(Array,"Array",(function(v,y){x(this,{type:"Array Iterator",target:d(v),index:0,kind:y})}),(function(){var v=b(this),y=v.target,N=v.kind,T=v.index++;if(!y||T>=y.length)return v.target=void 0,c(void 0,!0);switch(N){case"keys":return c(T,!1);case"values":return c(y[T],!1)}return c([T,y[T]],!1)}),"values");var p=l.Arguments=l.Array;if(n("keys"),n("values"),n("entries"),!u&&m&&p.name!=="values")try{r(p,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/get-built-in"),l=t("../internals/function-apply"),i=t("../internals/function-call"),r=t("../internals/function-uncurry-this"),s=t("../internals/fails"),c=t("../internals/is-callable"),u=t("../internals/is-symbol"),m=t("../internals/array-slice"),x=t("../internals/get-json-replacer-function"),b=t("../internals/symbol-constructor-detection"),p=String,v=n("JSON","stringify"),y=r(/./.exec),N=r("".charAt),T=r("".charCodeAt),_=r("".replace),O=r(1 .toString),H=/[\uD800-\uDFFF]/g,F=/^[\uD800-\uDBFF]$/,V=/^[\uDC00-\uDFFF]$/,q=!b||s((function(){var P=n("Symbol")("stringify detection");return v([P])!=="[null]"||v({a:P})!=="{}"||v(Object(P))!=="{}"})),W=s((function(){return v("\uDF06\uD834")!=='"\\udf06\\ud834"'||v("\uDEAD")!=='"\\udead"'})),B=function(P,A){var k=m(arguments),j=x(A);if(c(j)||P!==void 0&&!u(P))return k[1]=function(S,C){if(c(j)&&(C=i(j,this,p(S),C)),!u(C))return C},l(v,null,k)},E=function(P,A,k){var j=N(k,A-1),S=N(k,A+1);return y(F,P)&&!y(V,S)||y(V,P)&&!y(F,j)?"\\u"+O(T(P,0),16):P};v&&d({target:"JSON",stat:!0,arity:3,forced:q||W},{stringify:function(P,A,k){var j=m(arguments),S=l(q?B:v,null,j);return W&&typeof S=="string"?_(S,H,E):S}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(t,f,h){t("../internals/export")({target:"Number",stat:!0},{isNaN:function(d){return d!=d}})},{"../internals/export":259}],364:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/object-assign");d({target:"Object",stat:!0,arity:2,forced:Object.assign!==n},{assign:n})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/symbol-constructor-detection"),l=t("../internals/fails"),i=t("../internals/object-get-own-property-symbols"),r=t("../internals/to-object");d({target:"Object",stat:!0,forced:!n||l((function(){i.f(1)}))},{getOwnPropertySymbols:function(s){var c=i.f;return c?c(r(s)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/to-object"),l=t("../internals/object-keys");d({target:"Object",stat:!0,forced:t("../internals/fails")((function(){l(1)}))},{keys:function(i){return l(n(i))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/object-to-array").values;d({target:"Object",stat:!0},{values:function(l){return n(l)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/function-call"),l=t("../internals/a-callable"),i=t("../internals/new-promise-capability"),r=t("../internals/perform"),s=t("../internals/iterate");d({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{all:function(c){var u=this,m=i.f(u),x=m.resolve,b=m.reject,p=r((function(){var v=l(u.resolve),y=[],N=0,T=1;s(c,(function(_){var O=N++,H=!1;T++,n(v,u,_).then((function(F){H||(H=!0,y[O]=F,--T||x(y))}),b)})),--T||x(y)}));return p.error&&b(p.value),m.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/is-pure"),l=t("../internals/promise-constructor-detection").CONSTRUCTOR,i=t("../internals/promise-native-constructor"),r=t("../internals/get-built-in"),s=t("../internals/is-callable"),c=t("../internals/define-built-in"),u=i&&i.prototype;if(d({target:"Promise",proto:!0,forced:l,real:!0},{catch:function(x){return this.then(void 0,x)}}),!n&&s(i)){var m=r("Promise").prototype.catch;u.catch!==m&&c(u,"catch",m,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(t,f,h){var d,n,l,i=t("../internals/export"),r=t("../internals/is-pure"),s=t("../internals/engine-is-node"),c=t("../internals/global"),u=t("../internals/function-call"),m=t("../internals/define-built-in"),x=t("../internals/object-set-prototype-of"),b=t("../internals/set-to-string-tag"),p=t("../internals/set-species"),v=t("../internals/a-callable"),y=t("../internals/is-callable"),N=t("../internals/is-object"),T=t("../internals/an-instance"),_=t("../internals/species-constructor"),O=t("../internals/task").set,H=t("../internals/microtask"),F=t("../internals/host-report-errors"),V=t("../internals/perform"),q=t("../internals/queue"),W=t("../internals/internal-state"),B=t("../internals/promise-native-constructor"),E=t("../internals/promise-constructor-detection"),P=t("../internals/new-promise-capability"),A=E.CONSTRUCTOR,k=E.REJECTION_EVENT,j=E.SUBCLASSING,S=W.getterFor("Promise"),C=W.set,D=B&&B.prototype,R=B,L=D,Y=c.TypeError,X=c.document,ae=c.process,$=P.f,Q=$,z=!!(X&&X.createEvent&&c.dispatchEvent),M=function(ve){var De;return!(!N(ve)||!y(De=ve.then))&&De},U=function(ve,De){var Ae,Ie,Ue,Ge=De.value,Le=De.state===1,at=Le?ve.ok:ve.fail,ut=ve.resolve,Ce=ve.reject,it=ve.domain;try{at?(Le||(De.rejection===2&&Ne(De),De.rejection=1),at===!0?Ae=Ge:(it&&it.enter(),Ae=at(Ge),it&&(it.exit(),Ue=!0)),Ae===ve.promise?Ce(new Y("Promise-chain cycle")):(Ie=M(Ae))?u(Ie,Ae,ut,Ce):ut(Ae)):Ce(Ge)}catch(xt){it&&!Ue&&it.exit(),Ce(xt)}},te=function(ve,De){ve.notified||(ve.notified=!0,H((function(){for(var Ae,Ie=ve.reactions;Ae=Ie.get();)U(Ae,ve);ve.notified=!1,De&&!ve.rejection&&se(ve)})))},ie=function(ve,De,Ae){var Ie,Ue;z?((Ie=X.createEvent("Event")).promise=De,Ie.reason=Ae,Ie.initEvent(ve,!1,!0),c.dispatchEvent(Ie)):Ie={promise:De,reason:Ae},!k&&(Ue=c["on"+ve])?Ue(Ie):ve==="unhandledrejection"&&F("Unhandled promise rejection",Ae)},se=function(ve){u(O,c,(function(){var De,Ae=ve.facade,Ie=ve.value;if(le(ve)&&(De=V((function(){s?ae.emit("unhandledRejection",Ie,Ae):ie("unhandledrejection",Ae,Ie)})),ve.rejection=s||le(ve)?2:1,De.error))throw De.value}))},le=function(ve){return ve.rejection!==1&&!ve.parent},Ne=function(ve){u(O,c,(function(){var De=ve.facade;s?ae.emit("rejectionHandled",De):ie("rejectionhandled",De,ve.value)}))},ke=function(ve,De,Ae){return function(Ie){ve(De,Ie,Ae)}},Z=function(ve,De,Ae){ve.done||(ve.done=!0,Ae&&(ve=Ae),ve.value=De,ve.state=2,te(ve,!0))},ce=function(ve,De,Ae){if(!ve.done){ve.done=!0,Ae&&(ve=Ae);try{if(ve.facade===De)throw new Y("Promise can't be resolved itself");var Ie=M(De);Ie?H((function(){var Ue={done:!1};try{u(Ie,De,ke(ce,Ue,ve),ke(Z,Ue,ve))}catch(Ge){Z(Ue,Ge,ve)}})):(ve.value=De,ve.state=1,te(ve,!1))}catch(Ue){Z({done:!1},Ue,ve)}}};if(A&&(L=(R=function(ve){T(this,L),v(ve),u(d,this);var De=S(this);try{ve(ke(ce,De),ke(Z,De))}catch(Ae){Z(De,Ae)}}).prototype,(d=function(ve){C(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new q,rejection:!1,state:0,value:void 0})}).prototype=m(L,"then",(function(ve,De){var Ae=S(this),Ie=$(_(this,R));return Ae.parent=!0,Ie.ok=!y(ve)||ve,Ie.fail=y(De)&&De,Ie.domain=s?ae.domain:void 0,Ae.state===0?Ae.reactions.add(Ie):H((function(){U(Ie,Ae)})),Ie.promise})),n=function(){var ve=new d,De=S(ve);this.promise=ve,this.resolve=ke(ce,De),this.reject=ke(Z,De)},P.f=$=function(ve){return ve===R||ve===void 0?new n(ve):Q(ve)},!r&&y(B)&&D!==Object.prototype)){l=D.then,j||m(D,"then",(function(ve,De){var Ae=this;return new R((function(Ie,Ue){u(l,Ae,Ie,Ue)})).then(ve,De)}),{unsafe:!0});try{delete D.constructor}catch{}x&&x(D,L)}i({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:R}),b(R,"Promise",!1,!0),p("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/is-pure"),l=t("../internals/promise-native-constructor"),i=t("../internals/fails"),r=t("../internals/get-built-in"),s=t("../internals/is-callable"),c=t("../internals/species-constructor"),u=t("../internals/promise-resolve"),m=t("../internals/define-built-in"),x=l&&l.prototype;if(d({target:"Promise",proto:!0,real:!0,forced:!!l&&i((function(){x.finally.call({then:function(){}},(function(){}))}))},{finally:function(p){var v=c(this,r("Promise")),y=s(p);return this.then(y?function(N){return u(v,p()).then((function(){return N}))}:p,y?function(N){return u(v,p()).then((function(){throw N}))}:p)}}),!n&&s(l)){var b=r("Promise").prototype.finally;x.finally!==b&&m(x,"finally",b,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(t,f,h){t("../modules/es.promise.constructor"),t("../modules/es.promise.all"),t("../modules/es.promise.catch"),t("../modules/es.promise.race"),t("../modules/es.promise.reject"),t("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/function-call"),l=t("../internals/a-callable"),i=t("../internals/new-promise-capability"),r=t("../internals/perform"),s=t("../internals/iterate");d({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{race:function(c){var u=this,m=i.f(u),x=m.reject,b=r((function(){var p=l(u.resolve);s(c,(function(v){n(p,u,v).then(m.resolve,x)}))}));return b.error&&x(b.value),m.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/function-call"),l=t("../internals/new-promise-capability");d({target:"Promise",stat:!0,forced:t("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(i){var r=l.f(this);return n(r.reject,void 0,i),r.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/get-built-in"),l=t("../internals/is-pure"),i=t("../internals/promise-native-constructor"),r=t("../internals/promise-constructor-detection").CONSTRUCTOR,s=t("../internals/promise-resolve"),c=n("Promise"),u=l&&!r;d({target:"Promise",stat:!0,forced:l||r},{resolve:function(m){return s(u&&this===c?i:this,m)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/function-uncurry-this"),l=t("../internals/to-absolute-index"),i=RangeError,r=String.fromCharCode,s=String.fromCodePoint,c=n([].join);d({target:"String",stat:!0,arity:1,forced:!!s&&s.length!==1},{fromCodePoint:function(u){for(var m,x=[],b=arguments.length,p=0;b>p;){if(m=+arguments[p++],l(m,1114111)!==m)throw new i(m+" is not a valid code point");x[p]=m<65536?r(m):r(55296+((m-=65536)>>10),m%1024+56320)}return c(x,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/function-uncurry-this"),l=t("../internals/not-a-regexp"),i=t("../internals/require-object-coercible"),r=t("../internals/to-string"),s=t("../internals/correct-is-regexp-logic"),c=n("".indexOf);d({target:"String",proto:!0,forced:!s("includes")},{includes:function(u){return!!~c(r(i(this)),r(l(u)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(t,f,h){t("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/global"),l=t("../internals/function-call"),i=t("../internals/function-uncurry-this"),r=t("../internals/is-pure"),s=t("../internals/descriptors"),c=t("../internals/symbol-constructor-detection"),u=t("../internals/fails"),m=t("../internals/has-own-property"),x=t("../internals/object-is-prototype-of"),b=t("../internals/an-object"),p=t("../internals/to-indexed-object"),v=t("../internals/to-property-key"),y=t("../internals/to-string"),N=t("../internals/create-property-descriptor"),T=t("../internals/object-create"),_=t("../internals/object-keys"),O=t("../internals/object-get-own-property-names"),H=t("../internals/object-get-own-property-names-external"),F=t("../internals/object-get-own-property-symbols"),V=t("../internals/object-get-own-property-descriptor"),q=t("../internals/object-define-property"),W=t("../internals/object-define-properties"),B=t("../internals/object-property-is-enumerable"),E=t("../internals/define-built-in"),P=t("../internals/define-built-in-accessor"),A=t("../internals/shared"),k=t("../internals/shared-key"),j=t("../internals/hidden-keys"),S=t("../internals/uid"),C=t("../internals/well-known-symbol"),D=t("../internals/well-known-symbol-wrapped"),R=t("../internals/well-known-symbol-define"),L=t("../internals/symbol-define-to-primitive"),Y=t("../internals/set-to-string-tag"),X=t("../internals/internal-state"),ae=t("../internals/array-iteration").forEach,$=k("hidden"),Q=X.set,z=X.getterFor("Symbol"),M=Object.prototype,U=n.Symbol,te=U&&U.prototype,ie=n.RangeError,se=n.TypeError,le=n.QObject,Ne=V.f,ke=q.f,Z=H.f,ce=B.f,ve=i([].push),De=A("symbols"),Ae=A("op-symbols"),Ie=A("wks"),Ue=!le||!le.prototype||!le.prototype.findChild,Ge=function(xe,Be,$e){var ye=Ne(M,Be);ye&&delete M[Be],ke(xe,Be,$e),ye&&xe!==M&&ke(M,Be,ye)},Le=s&&u((function(){return T(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a!==7}))?Ge:ke,at=function(xe,Be){var $e=De[xe]=T(te);return Q($e,{type:"Symbol",tag:xe,description:Be}),s||($e.description=Be),$e},ut=function(xe,Be,$e){xe===M&&ut(Ae,Be,$e),b(xe);var ye=v(Be);return b($e),m(De,ye)?($e.enumerable?(m(xe,$)&&xe[$][ye]&&(xe[$][ye]=!1),$e=T($e,{enumerable:N(0,!1)})):(m(xe,$)||ke(xe,$,N(1,{})),xe[$][ye]=!0),Le(xe,ye,$e)):ke(xe,ye,$e)},Ce=function(xe,Be){b(xe);var $e=p(Be),ye=_($e).concat(Ee($e));return ae(ye,(function(oe){s&&!l(it,$e,oe)||ut(xe,oe,$e[oe])})),xe},it=function(xe){var Be=v(xe),$e=l(ce,this,Be);return!(this===M&&m(De,Be)&&!m(Ae,Be))&&(!($e||!m(this,Be)||!m(De,Be)||m(this,$)&&this[$][Be])||$e)},xt=function(xe,Be){var $e=p(xe),ye=v(Be);if($e!==M||!m(De,ye)||m(Ae,ye)){var oe=Ne($e,ye);return!oe||!m(De,ye)||m($e,$)&&$e[$][ye]||(oe.enumerable=!0),oe}},jt=function(xe){var Be=Z(p(xe)),$e=[];return ae(Be,(function(ye){m(De,ye)||m(j,ye)||ve($e,ye)})),$e},Ee=function(xe){var Be=xe===M,$e=Z(Be?Ae:p(xe)),ye=[];return ae($e,(function(oe){!m(De,oe)||Be&&!m(M,oe)||ve(ye,De[oe])})),ye};c||(E(te=(U=function(){if(x(te,this))throw new se("Symbol is not a constructor");var xe=arguments.length&&arguments[0]!==void 0?y(arguments[0]):void 0,Be=S(xe),$e=function(ye){this===M&&l($e,Ae,ye),m(this,$)&&m(this[$],Be)&&(this[$][Be]=!1);var oe=N(1,ye);try{Le(this,Be,oe)}catch(me){if(!(me instanceof ie))throw me;Ge(this,Be,oe)}};return s&&Ue&&Le(M,Be,{configurable:!0,set:$e}),at(Be,xe)}).prototype,"toString",(function(){return z(this).tag})),E(U,"withoutSetter",(function(xe){return at(S(xe),xe)})),B.f=it,q.f=ut,W.f=Ce,V.f=xt,O.f=H.f=jt,F.f=Ee,D.f=function(xe){return at(C(xe),xe)},s&&(P(te,"description",{configurable:!0,get:function(){return z(this).description}}),r||E(M,"propertyIsEnumerable",it,{unsafe:!0}))),d({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:U}),ae(_(Ie),(function(xe){R(xe)})),d({target:"Symbol",stat:!0,forced:!c},{useSetter:function(){Ue=!0},useSimple:function(){Ue=!1}}),d({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(xe,Be){return Be===void 0?T(xe):Ce(T(xe),Be)},defineProperty:ut,defineProperties:Ce,getOwnPropertyDescriptor:xt}),d({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:jt}),L(),Y(U,"Symbol"),j[$]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/get-built-in"),l=t("../internals/has-own-property"),i=t("../internals/to-string"),r=t("../internals/shared"),s=t("../internals/symbol-registry-detection"),c=r("string-to-symbol-registry"),u=r("symbol-to-string-registry");d({target:"Symbol",stat:!0,forced:!s},{for:function(m){var x=i(m);if(l(c,x))return c[x];var b=n("Symbol")(x);return c[x]=b,u[b]=x,b}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(t,f,h){t("../modules/es.symbol.constructor"),t("../modules/es.symbol.for"),t("../modules/es.symbol.key-for"),t("../modules/es.json.stringify"),t("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(t,f,h){var d=t("../internals/export"),n=t("../internals/has-own-property"),l=t("../internals/is-symbol"),i=t("../internals/try-to-string"),r=t("../internals/shared"),s=t("../internals/symbol-registry-detection"),c=r("symbol-to-string-registry");d({target:"Symbol",stat:!0,forced:!s},{keyFor:function(u){if(!l(u))throw new TypeError(i(u)+" is not a symbol");if(n(c,u))return c[u]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(t,f,h){function d(n){return Object.prototype.toString.call(n)}h.isArray=function(n){return Array.isArray?Array.isArray(n):d(n)==="[object Array]"},h.isBoolean=function(n){return typeof n=="boolean"},h.isNull=function(n){return n===null},h.isNullOrUndefined=function(n){return n==null},h.isNumber=function(n){return typeof n=="number"},h.isString=function(n){return typeof n=="string"},h.isSymbol=function(n){return typeof n=="symbol"},h.isUndefined=function(n){return n===void 0},h.isRegExp=function(n){return d(n)==="[object RegExp]"},h.isObject=function(n){return typeof n=="object"&&n!==null},h.isDate=function(n){return d(n)==="[object Date]"},h.isError=function(n){return d(n)==="[object Error]"||n instanceof Error},h.isFunction=function(n){return typeof n=="function"},h.isPrimitive=function(n){return n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||typeof n=="symbol"||n===void 0},h.isBuffer=t("buffer").Buffer.isBuffer},{buffer:220}],384:[function(t,f,h){(function(d){(function(){var n=t("elliptic"),l=t("bn.js");f.exports=function(c){return new r(c)};var i={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function r(c){this.curveType=i[c],this.curveType||(this.curveType={name:c}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function s(c,u,m){Array.isArray(c)||(c=c.toArray());var x=new d(c);if(m&&x.length<m){var b=new d(m-x.length);b.fill(0),x=d.concat([b,x])}return u?x.toString(u):x}i.p224=i.secp224r1,i.p256=i.secp256r1=i.prime256v1,i.p192=i.secp192r1=i.prime192v1,i.p384=i.secp384r1,i.p521=i.secp521r1,r.prototype.generateKeys=function(c,u){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,u)},r.prototype.computeSecret=function(c,u,m){return u=u||"utf8",d.isBuffer(c)||(c=new d(c,u)),s(this.curve.keyFromPublic(c).getPublic().mul(this.keys.getPrivate()).getX(),m,this.curveType.byteLength)},r.prototype.getPublicKey=function(c,u){var m=this.keys.getPublic(u==="compressed",!0);return u==="hybrid"&&(m[m.length-1]%2?m[0]=7:m[0]=6),s(m,c)},r.prototype.getPrivateKey=function(c){return s(this.keys.getPrivate(),c)},r.prototype.setPublicKey=function(c,u){return u=u||"utf8",d.isBuffer(c)||(c=new d(c,u)),this.keys._importPublic(c),this},r.prototype.setPrivateKey=function(c,u){u=u||"utf8",d.isBuffer(c)||(c=new d(c,u));var m=new l(c);return m=m.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(m),this}}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(t,f,h){arguments[4][184][0].apply(h,arguments)},{buffer:188,dup:184}],386:[function(t,f,h){var d=t("inherits"),n=t("md5.js"),l=t("ripemd160"),i=t("sha.js"),r=t("cipher-base");function s(c){r.call(this,"digest"),this._hash=c}d(s,r),s.prototype._update=function(c){this._hash.update(c)},s.prototype._final=function(){return this._hash.digest()},f.exports=function(c){return(c=c.toLowerCase())==="md5"?new n:c==="rmd160"||c==="ripemd160"?new l:new s(i(c))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(t,f,h){var d=t("md5.js");f.exports=function(n){return new d().update(n).digest()}},{"md5.js":450}],388:[function(t,f,h){var d=t("inherits"),n=t("./legacy"),l=t("cipher-base"),i=t("safe-buffer").Buffer,r=t("create-hash/md5"),s=t("ripemd160"),c=t("sha.js"),u=i.alloc(128);function m(x,b){l.call(this,"digest"),typeof b=="string"&&(b=i.from(b));var p=x==="sha512"||x==="sha384"?128:64;this._alg=x,this._key=b,b.length>p?b=(x==="rmd160"?new s:c(x)).update(b).digest():b.length<p&&(b=i.concat([b,u],p));for(var v=this._ipad=i.allocUnsafe(p),y=this._opad=i.allocUnsafe(p),N=0;N<p;N++)v[N]=54^b[N],y[N]=92^b[N];this._hash=x==="rmd160"?new s:c(x),this._hash.update(v)}d(m,l),m.prototype._update=function(x){this._hash.update(x)},m.prototype._final=function(){var x=this._hash.digest();return(this._alg==="rmd160"?new s:c(this._alg)).update(this._opad).update(x).digest()},f.exports=function(x,b){return(x=x.toLowerCase())==="rmd160"||x==="ripemd160"?new m("rmd160",b):x==="md5"?new n(r,b):new m(x,b)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(t,f,h){var d=t("inherits"),n=t("safe-buffer").Buffer,l=t("cipher-base"),i=n.alloc(128);function r(s,c){l.call(this,"digest"),typeof c=="string"&&(c=n.from(c)),this._alg=s,this._key=c,c.length>64?c=s(c):c.length<64&&(c=n.concat([c,i],64));for(var u=this._ipad=n.allocUnsafe(64),m=this._opad=n.allocUnsafe(64),x=0;x<64;x++)u[x]=54^c[x],m[x]=92^c[x];this._hash=[u]}d(r,l),r.prototype._update=function(s){this._hash.push(s)},r.prototype._final=function(){var s=this._alg(n.concat(this._hash));return this._alg(n.concat([this._opad,s]))},f.exports=r},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(t,f,h){h.randomBytes=h.rng=h.pseudoRandomBytes=h.prng=t("randombytes"),h.createHash=h.Hash=t("create-hash"),h.createHmac=h.Hmac=t("create-hmac");var d=t("browserify-sign/algos"),n=Object.keys(d),l=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);h.getHashes=function(){return l};var i=t("pbkdf2");h.pbkdf2=i.pbkdf2,h.pbkdf2Sync=i.pbkdf2Sync;var r=t("browserify-cipher");h.Cipher=r.Cipher,h.createCipher=r.createCipher,h.Cipheriv=r.Cipheriv,h.createCipheriv=r.createCipheriv,h.Decipher=r.Decipher,h.createDecipher=r.createDecipher,h.Decipheriv=r.Decipheriv,h.createDecipheriv=r.createDecipheriv,h.getCiphers=r.getCiphers,h.listCiphers=r.listCiphers;var s=t("diffie-hellman");h.DiffieHellmanGroup=s.DiffieHellmanGroup,h.createDiffieHellmanGroup=s.createDiffieHellmanGroup,h.getDiffieHellman=s.getDiffieHellman,h.createDiffieHellman=s.createDiffieHellman,h.DiffieHellman=s.DiffieHellman;var c=t("browserify-sign");h.createSign=c.createSign,h.Sign=c.Sign,h.createVerify=c.createVerify,h.Verify=c.Verify,h.createECDH=t("create-ecdh");var u=t("public-encrypt");h.publicEncrypt=u.publicEncrypt,h.privateEncrypt=u.privateEncrypt,h.publicDecrypt=u.publicDecrypt,h.privateDecrypt=u.privateDecrypt;var m=t("randomfill");h.randomFill=m.randomFill,h.randomFillSync=m.randomFillSync,h.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},h.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(t,f,h){(function(d,n){typeof h=="object"&&f!==void 0?f.exports=n():(d=typeof globalThis<"u"?globalThis:d||self).dayjs=n()})(void 0,(function(){var d=6e4,n=36e5,l="millisecond",i="second",r="minute",s="hour",c="day",u="week",m="month",x="quarter",b="year",p="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var j=["th","st","nd","rd"],S=k%100;return"["+k+(j[(S-20)%10]||j[S]||j[0])+"]"}},_=function(k,j,S){var C=String(k);return!C||C.length>=j?k:""+Array(j+1-C.length).join(S)+k},O={s:_,z:function(k){var j=-k.utcOffset(),S=Math.abs(j),C=Math.floor(S/60),D=S%60;return(j<=0?"+":"-")+_(C,2,"0")+":"+_(D,2,"0")},m:function k(j,S){if(j.date()<S.date())return-k(S,j);var C=12*(S.year()-j.year())+(S.month()-j.month()),D=j.clone().add(C,m),R=S-D<0,L=j.clone().add(C+(R?-1:1),m);return+(-(C+(S-D)/(R?D-L:L-D))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:m,y:b,w:u,d:c,D:p,h:s,m:r,s:i,ms:l,Q:x}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},H="en",F={};F[H]=T;var V="$isDayjsObject",q=function(k){return k instanceof P||!(!k||!k[V])},W=function k(j,S,C){var D;if(!j)return H;if(typeof j=="string"){var R=j.toLowerCase();F[R]&&(D=R),S&&(F[R]=S,D=R);var L=j.split("-");if(!D&&L.length>1)return k(L[0])}else{var Y=j.name;F[Y]=j,D=Y}return!C&&D&&(H=D),D||!C&&H},B=function(k,j){if(q(k))return k.clone();var S=typeof j=="object"?j:{};return S.date=k,S.args=arguments,new P(S)},E=O;E.l=W,E.i=q,E.w=function(k,j){return B(k,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var P=(function(){function k(S){this.$L=W(S.locale,null,!0),this.parse(S),this.$x=this.$x||S.x||{},this[V]=!0}var j=k.prototype;return j.parse=function(S){this.$d=(function(C){var D=C.date,R=C.utc;if(D===null)return new Date(NaN);if(E.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var L=D.match(y);if(L){var Y=L[2]-1||0,X=(L[7]||"0").substring(0,3);return R?new Date(Date.UTC(L[1],Y,L[3]||1,L[4]||0,L[5]||0,L[6]||0,X)):new Date(L[1],Y,L[3]||1,L[4]||0,L[5]||0,L[6]||0,X)}}return new Date(D)})(S),this.init()},j.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},j.$utils=function(){return E},j.isValid=function(){return this.$d.toString()!==v},j.isSame=function(S,C){var D=B(S);return this.startOf(C)<=D&&D<=this.endOf(C)},j.isAfter=function(S,C){return B(S)<this.startOf(C)},j.isBefore=function(S,C){return this.endOf(C)<B(S)},j.$g=function(S,C,D){return E.u(S)?this[C]:this.set(D,S)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function(S,C){var D=this,R=!!E.u(C)||C,L=E.p(S),Y=function(te,ie){var se=E.w(D.$u?Date.UTC(D.$y,ie,te):new Date(D.$y,ie,te),D);return R?se:se.endOf(c)},X=function(te,ie){return E.w(D.toDate()[te].apply(D.toDate("s"),(R?[0,0,0,0]:[23,59,59,999]).slice(ie)),D)},ae=this.$W,$=this.$M,Q=this.$D,z="set"+(this.$u?"UTC":"");switch(L){case b:return R?Y(1,0):Y(31,11);case m:return R?Y(1,$):Y(0,$+1);case u:var M=this.$locale().weekStart||0,U=(ae<M?ae+7:ae)-M;return Y(R?Q-U:Q+(6-U),$);case c:case p:return X(z+"Hours",0);case s:return X(z+"Minutes",1);case r:return X(z+"Seconds",2);case i:return X(z+"Milliseconds",3);default:return this.clone()}},j.endOf=function(S){return this.startOf(S,!1)},j.$set=function(S,C){var D,R=E.p(S),L="set"+(this.$u?"UTC":""),Y=(D={},D[c]=L+"Date",D[p]=L+"Date",D[m]=L+"Month",D[b]=L+"FullYear",D[s]=L+"Hours",D[r]=L+"Minutes",D[i]=L+"Seconds",D[l]=L+"Milliseconds",D)[R],X=R===c?this.$D+(C-this.$W):C;if(R===m||R===b){var ae=this.clone().set(p,1);ae.$d[Y](X),ae.init(),this.$d=ae.set(p,Math.min(this.$D,ae.daysInMonth())).$d}else Y&&this.$d[Y](X);return this.init(),this},j.set=function(S,C){return this.clone().$set(S,C)},j.get=function(S){return this[E.p(S)]()},j.add=function(S,C){var D,R=this;S=Number(S);var L=E.p(C),Y=function($){var Q=B(R);return E.w(Q.date(Q.date()+Math.round($*S)),R)};if(L===m)return this.set(m,this.$M+S);if(L===b)return this.set(b,this.$y+S);if(L===c)return Y(1);if(L===u)return Y(7);var X=(D={},D[r]=d,D[s]=n,D[i]=1e3,D)[L]||1,ae=this.$d.getTime()+S*X;return E.w(ae,this)},j.subtract=function(S,C){return this.add(-1*S,C)},j.format=function(S){var C=this,D=this.$locale();if(!this.isValid())return D.invalidDate||v;var R=S||"YYYY-MM-DDTHH:mm:ssZ",L=E.z(this),Y=this.$H,X=this.$m,ae=this.$M,$=D.weekdays,Q=D.months,z=D.meridiem,M=function(ie,se,le,Ne){return ie&&(ie[se]||ie(C,R))||le[se].slice(0,Ne)},U=function(ie){return E.s(Y%12||12,ie,"0")},te=z||function(ie,se,le){var Ne=ie<12?"AM":"PM";return le?Ne.toLowerCase():Ne};return R.replace(N,(function(ie,se){return se||(function(le){switch(le){case"YY":return String(C.$y).slice(-2);case"YYYY":return E.s(C.$y,4,"0");case"M":return ae+1;case"MM":return E.s(ae+1,2,"0");case"MMM":return M(D.monthsShort,ae,Q,3);case"MMMM":return M(Q,ae);case"D":return C.$D;case"DD":return E.s(C.$D,2,"0");case"d":return String(C.$W);case"dd":return M(D.weekdaysMin,C.$W,$,2);case"ddd":return M(D.weekdaysShort,C.$W,$,3);case"dddd":return $[C.$W];case"H":return String(Y);case"HH":return E.s(Y,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return te(Y,X,!0);case"A":return te(Y,X,!1);case"m":return String(X);case"mm":return E.s(X,2,"0");case"s":return String(C.$s);case"ss":return E.s(C.$s,2,"0");case"SSS":return E.s(C.$ms,3,"0");case"Z":return L}return null})(ie)||L.replace(":","")}))},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function(S,C,D){var R,L=this,Y=E.p(C),X=B(S),ae=(X.utcOffset()-this.utcOffset())*d,$=this-X,Q=function(){return E.m(L,X)};switch(Y){case b:R=Q()/12;break;case m:R=Q();break;case x:R=Q()/3;break;case u:R=($-ae)/6048e5;break;case c:R=($-ae)/864e5;break;case s:R=$/n;break;case r:R=$/d;break;case i:R=$/1e3;break;default:R=$}return D?R:E.a(R)},j.daysInMonth=function(){return this.endOf(m).$D},j.$locale=function(){return F[this.$L]},j.locale=function(S,C){if(!S)return this.$L;var D=this.clone(),R=W(S,C,!0);return R&&(D.$L=R),D},j.clone=function(){return E.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},k})(),A=P.prototype;return B.prototype=A,[["$ms",l],["$s",i],["$m",r],["$H",s],["$W",c],["$M",m],["$y",b],["$D",p]].forEach((function(k){A[k[1]]=function(j){return this.$g(j,k[0],k[1])}})),B.extend=function(k,j){return k.$i||(k(j,P,B),k.$i=!0),B},B.locale=W,B.isDayjs=q,B.unix=function(k){return B(1e3*k)},B.en=F[H],B.Ls=F,B.p={},B}))},{}],392:[function(t,f,h){(function(d,n){typeof h=="object"&&f!==void 0?f.exports=n():(d=typeof globalThis<"u"?globalThis:d||self).dayjs_plugin_customParseFormat=n()})(void 0,(function(){var d={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,l=/\d\d/,i=/\d\d?/,r=/\d*[^-_:/,()\s\d]+/,s={},c=function(y){return(y=+y)+(y>68?1900:2e3)},u=function(y){return function(N){this[y]=+N}},m=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=(function(N){if(!N||N==="Z")return 0;var T=N.match(/([+-]|\d\d)/g),_=60*T[1]+(+T[2]||0);return _===0?0:T[0]==="+"?-_:_})(y)}],x=function(y){var N=s[y];return N&&(N.indexOf?N:N.s.concat(N.f))},b=function(y,N){var T,_=s.meridiem;if(_){for(var O=1;O<=24;O+=1)if(y.indexOf(_(O,0,N))>-1){T=O>12;break}}else T=y===(N?"pm":"PM");return T},p={A:[r,function(y){this.afternoon=b(y,!1)}],a:[r,function(y){this.afternoon=b(y,!0)}],S:[/\d/,function(y){this.milliseconds=100*+y}],SS:[l,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[i,u("seconds")],ss:[i,u("seconds")],m:[i,u("minutes")],mm:[i,u("minutes")],H:[i,u("hours")],h:[i,u("hours")],HH:[i,u("hours")],hh:[i,u("hours")],D:[i,u("day")],DD:[l,u("day")],Do:[r,function(y){var N=s.ordinal,T=y.match(/\d+/);if(this.day=T[0],N)for(var _=1;_<=31;_+=1)N(_).replace(/\[|\]/g,"")===y&&(this.day=_)}],M:[i,u("month")],MM:[l,u("month")],MMM:[r,function(y){var N=x("months"),T=(x("monthsShort")||N.map((function(_){return _.slice(0,3)}))).indexOf(y)+1;if(T<1)throw new Error;this.month=T%12||T}],MMMM:[r,function(y){var N=x("months").indexOf(y)+1;if(N<1)throw new Error;this.month=N%12||N}],Y:[/[+-]?\d+/,u("year")],YY:[l,function(y){this.year=c(y)}],YYYY:[/\d{4}/,u("year")],Z:m,ZZ:m};function v(y){var N,T;N=y,T=s&&s.formats;for(var _=(y=N.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(B,E,P){var A=P&&P.toUpperCase();return E||T[P]||d[P]||T[A].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(k,j,S){return j||S.slice(1)}))}))).match(n),O=_.length,H=0;H<O;H+=1){var F=_[H],V=p[F],q=V&&V[0],W=V&&V[1];_[H]=W?{regex:q,parser:W}:F.replace(/^\[|\]$/g,"")}return function(B){for(var E={},P=0,A=0;P<O;P+=1){var k=_[P];if(typeof k=="string")A+=k.length;else{var j=k.regex,S=k.parser,C=B.slice(A),D=j.exec(C)[0];S.call(E,D),B=B.replace(D,"")}}return(function(R){var L=R.afternoon;if(L!==void 0){var Y=R.hours;L?Y<12&&(R.hours+=12):Y===12&&(R.hours=0),delete R.afternoon}})(E),E}}return function(y,N,T){T.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(c=y.parseTwoDigitYear);var _=N.prototype,O=_.parse;_.parse=function(H){var F=H.date,V=H.utc,q=H.args;this.$u=V;var W=q[1];if(typeof W=="string"){var B=q[2]===!0,E=q[3]===!0,P=B||E,A=q[2];E&&(A=q[2]),s=this.$locale(),!B&&A&&(s=T.Ls[A]),this.$d=(function(C,D,R){try{if(["x","X"].indexOf(D)>-1)return new Date((D==="X"?1e3:1)*C);var L=v(D)(C),Y=L.year,X=L.month,ae=L.day,$=L.hours,Q=L.minutes,z=L.seconds,M=L.milliseconds,U=L.zone,te=new Date,ie=ae||(Y||X?1:te.getDate()),se=Y||te.getFullYear(),le=0;Y&&!X||(le=X>0?X-1:te.getMonth());var Ne=$||0,ke=Q||0,Z=z||0,ce=M||0;return U?new Date(Date.UTC(se,le,ie,Ne,ke,Z,ce+60*U.offset*1e3)):R?new Date(Date.UTC(se,le,ie,Ne,ke,Z,ce)):new Date(se,le,ie,Ne,ke,Z,ce)}catch{return new Date("")}})(F,W,V),this.init(),A&&A!==!0&&(this.$L=this.locale(A).$L),P&&F!=this.format(W)&&(this.$d=new Date("")),s={}}else if(W instanceof Array)for(var k=W.length,j=1;j<=k;j+=1){q[1]=W[j-1];var S=T.apply(this,q);if(S.isValid()){this.$d=S.$d,this.$L=S.$L,this.init();break}j===k&&(this.$d=new Date(""))}else O.call(this,H)}}}))},{}],393:[function(t,f,h){(function(d,n){typeof h=="object"&&f!==void 0?f.exports=n():(d=typeof globalThis<"u"?globalThis:d||self).dayjs_plugin_utc=n()})(void 0,(function(){var d="minute",n=/[+-]\d\d(?::?\d\d)?/g,l=/([+-]|\d\d)/g;return function(i,r,s){var c=r.prototype;s.utc=function(y){var N={date:y,utc:!0,args:arguments};return new r(N)},c.utc=function(y){var N=s(this.toDate(),{locale:this.$L,utc:!0});return y?N.add(this.utcOffset(),d):N},c.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),u.call(this,y)};var m=c.init;c.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else m.call(this)};var x=c.utcOffset;c.utcOffset=function(y,N){var T=this.$utils().u;if(T(y))return this.$u?0:T(this.$offset)?x.call(this):this.$offset;if(typeof y=="string"&&(y=(function(F){F===void 0&&(F="");var V=F.match(n);if(!V)return null;var q=(""+V[0]).match(l)||["-",0,0],W=q[0],B=60*+q[1]+ +q[2];return B===0?0:W==="+"?B:-B})(y))===null)return this;var _=Math.abs(y)<=16?60*y:y,O=this;if(N)return O.$offset=_,O.$u=y===0,O;if(y!==0){var H=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(O=this.local().add(_+H,d)).$offset=_,O.$x.$localOffset=H}else O=this.utc();return O};var b=c.format;c.format=function(y){var N=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return b.call(this,N)},c.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var p=c.toDate;c.toDate=function(y){return y==="s"&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var v=c.diff;c.diff=function(y,N,T){if(y&&this.$u===y.$u)return v.call(this,y,N,T);var _=this.local(),O=s(y).local();return v.call(_,O,N,T)}}}))},{}],394:[function(t,f,h){h.utils=t("./des/utils"),h.Cipher=t("./des/cipher"),h.DES=t("./des/des"),h.CBC=t("./des/cbc"),h.EDE=t("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(t,f,h){var d=t("minimalistic-assert"),n=t("inherits"),l={};function i(r){d.equal(r.length,8,"Invalid IV length"),this.iv=new Array(8);for(var s=0;s<this.iv.length;s++)this.iv[s]=r[s]}h.instantiate=function(r){function s(x){r.call(this,x),this._cbcInit()}n(s,r);for(var c=Object.keys(l),u=0;u<c.length;u++){var m=c[u];s.prototype[m]=l[m]}return s.create=function(x){return new s(x)},s},l._cbcInit=function(){var r=new i(this.options.iv);this._cbcState=r},l._update=function(r,s,c,u){var m=this._cbcState,x=this.constructor.super_.prototype,b=m.iv;if(this.type==="encrypt"){for(var p=0;p<this.blockSize;p++)b[p]^=r[s+p];for(x._update.call(this,b,0,c,u),p=0;p<this.blockSize;p++)b[p]=c[u+p]}else{for(x._update.call(this,r,s,c,u),p=0;p<this.blockSize;p++)c[u+p]^=b[p];for(p=0;p<this.blockSize;p++)b[p]=r[s+p]}}},{inherits:440,"minimalistic-assert":453}],396:[function(t,f,h){var d=t("minimalistic-assert");function n(l){this.options=l,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=l.padding!==!1}f.exports=n,n.prototype._init=function(){},n.prototype.update=function(l){return l.length===0?[]:this.type==="decrypt"?this._updateDecrypt(l):this._updateEncrypt(l)},n.prototype._buffer=function(l,i){for(var r=Math.min(this.buffer.length-this.bufferOff,l.length-i),s=0;s<r;s++)this.buffer[this.bufferOff+s]=l[i+s];return this.bufferOff+=r,r},n.prototype._flushBuffer=function(l,i){return this._update(this.buffer,0,l,i),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(l){var i=0,r=0,s=(this.bufferOff+l.length)/this.blockSize|0,c=new Array(s*this.blockSize);this.bufferOff!==0&&(i+=this._buffer(l,i),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(c,r)));for(var u=l.length-(l.length-i)%this.blockSize;i<u;i+=this.blockSize)this._update(l,i,c,r),r+=this.blockSize;for(;i<l.length;i++,this.bufferOff++)this.buffer[this.bufferOff]=l[i];return c},n.prototype._updateDecrypt=function(l){for(var i=0,r=0,s=Math.ceil((this.bufferOff+l.length)/this.blockSize)-1,c=new Array(s*this.blockSize);s>0;s--)i+=this._buffer(l,i),r+=this._flushBuffer(c,r);return i+=this._buffer(l,i),c},n.prototype.final=function(l){var i,r;return l&&(i=this.update(l)),r=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),i?i.concat(r):r},n.prototype._pad=function(l,i){if(i===0)return!1;for(;i<l.length;)l[i++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var l=new Array(this.blockSize);return this._update(this.buffer,0,l,0),l},n.prototype._unpad=function(l){return l},n.prototype._finalDecrypt=function(){d.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var l=new Array(this.blockSize);return this._flushBuffer(l,0),this._unpad(l)}},{"minimalistic-assert":453}],397:[function(t,f,h){var d=t("minimalistic-assert"),n=t("inherits"),l=t("./utils"),i=t("./cipher");function r(){this.tmp=new Array(2),this.keys=null}function s(u){i.call(this,u);var m=new r;this._desState=m,this.deriveKeys(m,u.key)}n(s,i),f.exports=s,s.create=function(u){return new s(u)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];s.prototype.deriveKeys=function(u,m){u.keys=new Array(32),d.equal(m.length,this.blockSize,"Invalid key length");var x=l.readUInt32BE(m,0),b=l.readUInt32BE(m,4);l.pc1(x,b,u.tmp,0),x=u.tmp[0],b=u.tmp[1];for(var p=0;p<u.keys.length;p+=2){var v=c[p>>>1];x=l.r28shl(x,v),b=l.r28shl(b,v),l.pc2(x,b,u.keys,p)}},s.prototype._update=function(u,m,x,b){var p=this._desState,v=l.readUInt32BE(u,m),y=l.readUInt32BE(u,m+4);l.ip(v,y,p.tmp,0),v=p.tmp[0],y=p.tmp[1],this.type==="encrypt"?this._encrypt(p,v,y,p.tmp,0):this._decrypt(p,v,y,p.tmp,0),v=p.tmp[0],y=p.tmp[1],l.writeUInt32BE(x,v,b),l.writeUInt32BE(x,y,b+4)},s.prototype._pad=function(u,m){if(this.padding===!1)return!1;for(var x=u.length-m,b=m;b<u.length;b++)u[b]=x;return!0},s.prototype._unpad=function(u){if(this.padding===!1)return u;for(var m=u[u.length-1],x=u.length-m;x<u.length;x++)d.equal(u[x],m);return u.slice(0,u.length-m)},s.prototype._encrypt=function(u,m,x,b,p){for(var v=m,y=x,N=0;N<u.keys.length;N+=2){var T=u.keys[N],_=u.keys[N+1];l.expand(y,u.tmp,0),T^=u.tmp[0],_^=u.tmp[1];var O=l.substitute(T,_),H=y;y=(v^l.permute(O))>>>0,v=H}l.rip(y,v,b,p)},s.prototype._decrypt=function(u,m,x,b,p){for(var v=x,y=m,N=u.keys.length-2;N>=0;N-=2){var T=u.keys[N],_=u.keys[N+1];l.expand(v,u.tmp,0),T^=u.tmp[0],_^=u.tmp[1];var O=l.substitute(T,_),H=v;v=(y^l.permute(O))>>>0,y=H}l.rip(v,y,b,p)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(t,f,h){var d=t("minimalistic-assert"),n=t("inherits"),l=t("./cipher"),i=t("./des");function r(c,u){d.equal(u.length,24,"Invalid key length");var m=u.slice(0,8),x=u.slice(8,16),b=u.slice(16,24);this.ciphers=c==="encrypt"?[i.create({type:"encrypt",key:m}),i.create({type:"decrypt",key:x}),i.create({type:"encrypt",key:b})]:[i.create({type:"decrypt",key:b}),i.create({type:"encrypt",key:x}),i.create({type:"decrypt",key:m})]}function s(c){l.call(this,c);var u=new r(this.type,this.options.key);this._edeState=u}n(s,l),f.exports=s,s.create=function(c){return new s(c)},s.prototype._update=function(c,u,m,x){var b=this._edeState;b.ciphers[0]._update(c,u,m,x),b.ciphers[1]._update(m,x,m,x),b.ciphers[2]._update(m,x,m,x)},s.prototype._pad=i.prototype._pad,s.prototype._unpad=i.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(t,f,h){h.readUInt32BE=function(i,r){return(i[0+r]<<24|i[1+r]<<16|i[2+r]<<8|i[3+r])>>>0},h.writeUInt32BE=function(i,r,s){i[0+s]=r>>>24,i[1+s]=r>>>16&255,i[2+s]=r>>>8&255,i[3+s]=255&r},h.ip=function(i,r,s,c){for(var u=0,m=0,x=6;x>=0;x-=2){for(var b=0;b<=24;b+=8)u<<=1,u|=r>>>b+x&1;for(b=0;b<=24;b+=8)u<<=1,u|=i>>>b+x&1}for(x=6;x>=0;x-=2){for(b=1;b<=25;b+=8)m<<=1,m|=r>>>b+x&1;for(b=1;b<=25;b+=8)m<<=1,m|=i>>>b+x&1}s[c+0]=u>>>0,s[c+1]=m>>>0},h.rip=function(i,r,s,c){for(var u=0,m=0,x=0;x<4;x++)for(var b=24;b>=0;b-=8)u<<=1,u|=r>>>b+x&1,u<<=1,u|=i>>>b+x&1;for(x=4;x<8;x++)for(b=24;b>=0;b-=8)m<<=1,m|=r>>>b+x&1,m<<=1,m|=i>>>b+x&1;s[c+0]=u>>>0,s[c+1]=m>>>0},h.pc1=function(i,r,s,c){for(var u=0,m=0,x=7;x>=5;x--){for(var b=0;b<=24;b+=8)u<<=1,u|=r>>b+x&1;for(b=0;b<=24;b+=8)u<<=1,u|=i>>b+x&1}for(b=0;b<=24;b+=8)u<<=1,u|=r>>b+x&1;for(x=1;x<=3;x++){for(b=0;b<=24;b+=8)m<<=1,m|=r>>b+x&1;for(b=0;b<=24;b+=8)m<<=1,m|=i>>b+x&1}for(b=0;b<=24;b+=8)m<<=1,m|=i>>b+x&1;s[c+0]=u>>>0,s[c+1]=m>>>0},h.r28shl=function(i,r){return i<<r&268435455|i>>>28-r};var d=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];h.pc2=function(i,r,s,c){for(var u=0,m=0,x=d.length>>>1,b=0;b<x;b++)u<<=1,u|=i>>>d[b]&1;for(b=x;b<d.length;b++)m<<=1,m|=r>>>d[b]&1;s[c+0]=u>>>0,s[c+1]=m>>>0},h.expand=function(i,r,s){var c=0,u=0;c=(1&i)<<5|i>>>27;for(var m=23;m>=15;m-=4)c<<=6,c|=i>>>m&63;for(m=11;m>=3;m-=4)u|=i>>>m&63,u<<=6;u|=(31&i)<<1|i>>>31,r[s+0]=c>>>0,r[s+1]=u>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];h.substitute=function(i,r){for(var s=0,c=0;c<4;c++)s<<=4,s|=n[64*c+(i>>>18-6*c&63)];for(c=0;c<4;c++)s<<=4,s|=n[256+64*c+(r>>>18-6*c&63)];return s>>>0};var l=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];h.permute=function(i){for(var r=0,s=0;s<l.length;s++)r<<=1,r|=i>>>l[s]&1;return r>>>0},h.padSplit=function(i,r,s){for(var c=i.toString(2);c.length<r;)c="0"+c;for(var u=[],m=0;m<r;m+=s)u.push(c.slice(m,m+s));return u.join(" ")}},{}],400:[function(t,f,h){(function(d){(function(){var n=t("./lib/generatePrime"),l=t("./lib/primes.json"),i=t("./lib/dh"),r={binary:!0,hex:!0,base64:!0};h.DiffieHellmanGroup=h.createDiffieHellmanGroup=h.getDiffieHellman=function(s){var c=new d(l[s].prime,"hex"),u=new d(l[s].gen,"hex");return new i(c,u)},h.createDiffieHellman=h.DiffieHellman=function s(c,u,m,x){return d.isBuffer(u)||r[u]===void 0?s(c,"binary",u,m):(u=u||"binary",x=x||"binary",m=m||new d([2]),d.isBuffer(m)||(m=new d(m,x)),typeof c=="number"?new i(n(c,m),m,!0):(d.isBuffer(c)||(c=new d(c,u)),new i(c,m,!0)))}}).call(this)}).call(this,t("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(t,f,h){(function(d){(function(){var n=t("bn.js"),l=new(t("miller-rabin")),i=new n(24),r=new n(11),s=new n(10),c=new n(3),u=new n(7),m=t("./generatePrime"),x=t("randombytes");function b(T,_){return _=_||"utf8",d.isBuffer(T)||(T=new d(T,_)),this._pub=new n(T),this}function p(T,_){return _=_||"utf8",d.isBuffer(T)||(T=new d(T,_)),this._priv=new n(T),this}f.exports=y;var v={};function y(T,_,O){this.setGenerator(_),this.__prime=new n(T),this._prime=n.mont(this.__prime),this._primeLen=T.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,O?(this.setPublicKey=b,this.setPrivateKey=p):this._primeCode=8}function N(T,_){var O=new d(T.toArray());return _?O.toString(_):O}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=(function(T,_){var O=_.toString("hex"),H=[O,T.toString(16)].join("_");if(H in v)return v[H];var F,V=0;if(T.isEven()||!m.simpleSieve||!m.fermatTest(T)||!l.test(T))return V+=1,V+=O==="02"||O==="05"?8:4,v[H]=V,V;switch(l.test(T.shrn(1))||(V+=2),O){case"02":T.mod(i).cmp(r)&&(V+=8);break;case"05":(F=T.mod(s)).cmp(c)&&F.cmp(u)&&(V+=8);break;default:V+=4}return v[H]=V,V})(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new n(x(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(T){var _=(T=(T=new n(T)).toRed(this._prime)).redPow(this._priv).fromRed(),O=new d(_.toArray()),H=this.getPrime();if(O.length<H.length){var F=new d(H.length-O.length);F.fill(0),O=d.concat([F,O])}return O},y.prototype.getPublicKey=function(T){return N(this._pub,T)},y.prototype.getPrivateKey=function(T){return N(this._priv,T)},y.prototype.getPrime=function(T){return N(this.__prime,T)},y.prototype.getGenerator=function(T){return N(this._gen,T)},y.prototype.setGenerator=function(T,_){return _=_||"utf8",d.isBuffer(T)||(T=new d(T,_)),this.__gen=T,this._gen=new n(T),this}}).call(this)}).call(this,t("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(t,f,h){var d=t("randombytes");f.exports=T,T.simpleSieve=y,T.fermatTest=N;var n=t("bn.js"),l=new n(24),i=new(t("miller-rabin")),r=new n(1),s=new n(2),c=new n(5),u=(new n(16),new n(8),new n(10)),m=new n(3),x=(new n(7),new n(11)),b=new n(4),p=(new n(12),null);function v(){if(p!==null)return p;var _=[];_[0]=2;for(var O=1,H=3;H<1048576;H+=2){for(var F=Math.ceil(Math.sqrt(H)),V=0;V<O&&_[V]<=F&&H%_[V]!=0;V++);O!==V&&_[V]<=F||(_[O++]=H)}return p=_,_}function y(_){for(var O=v(),H=0;H<O.length;H++)if(_.modn(O[H])===0)return _.cmpn(O[H])===0;return!0}function N(_){var O=n.mont(_);return s.toRed(O).redPow(_.subn(1)).fromRed().cmpn(1)===0}function T(_,O){if(_<16)return new n(O===2||O===5?[140,123]:[140,39]);var H,F;for(O=new n(O);;){for(H=new n(d(Math.ceil(_/8)));H.bitLength()>_;)H.ishrn(1);if(H.isEven()&&H.iadd(r),H.testn(1)||H.iadd(s),O.cmp(s)){if(!O.cmp(c))for(;H.mod(u).cmp(m);)H.iadd(b)}else for(;H.mod(l).cmp(x);)H.iadd(b);if(y(F=H.shrn(1))&&y(H)&&N(F)&&N(H)&&i.test(F)&&i.test(H))return H}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(t,f,h){f.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(t,f,h){arguments[4][184][0].apply(h,arguments)},{buffer:188,dup:184}],405:[function(t,f,h){var d=h;d.version=t("../package.json").version,d.utils=t("./elliptic/utils"),d.rand=t("brorand"),d.curve=t("./elliptic/curve"),d.curves=t("./elliptic/curves"),d.ec=t("./elliptic/ec"),d.eddsa=t("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(t,f,h){var d=t("bn.js"),n=t("../utils"),l=n.getNAF,i=n.getJSF,r=n.assert;function s(u,m){this.type=u,this.p=new d(m.p,16),this.red=m.prime?d.red(m.prime):d.mont(this.p),this.zero=new d(0).toRed(this.red),this.one=new d(1).toRed(this.red),this.two=new d(2).toRed(this.red),this.n=m.n&&new d(m.n,16),this.g=m.g&&this.pointFromJSON(m.g,m.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var x=this.n&&this.p.div(this.n);!x||x.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(u,m){this.curve=u,this.type=m,this.precomputed=null}f.exports=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(u,m){r(u.precomputed);var x=u._getDoubles(),b=l(m,1,this._bitLength),p=(1<<x.step+1)-(x.step%2==0?2:1);p/=3;var v,y,N=[];for(v=0;v<b.length;v+=x.step){y=0;for(var T=v+x.step-1;T>=v;T--)y=(y<<1)+b[T];N.push(y)}for(var _=this.jpoint(null,null,null),O=this.jpoint(null,null,null),H=p;H>0;H--){for(v=0;v<N.length;v++)(y=N[v])===H?O=O.mixedAdd(x.points[v]):y===-H&&(O=O.mixedAdd(x.points[v].neg()));_=_.add(O)}return _.toP()},s.prototype._wnafMul=function(u,m){var x=4,b=u._getNAFPoints(x);x=b.wnd;for(var p=b.points,v=l(m,x,this._bitLength),y=this.jpoint(null,null,null),N=v.length-1;N>=0;N--){for(var T=0;N>=0&&v[N]===0;N--)T++;if(N>=0&&T++,y=y.dblp(T),N<0)break;var _=v[N];r(_!==0),y=u.type==="affine"?_>0?y.mixedAdd(p[_-1>>1]):y.mixedAdd(p[-_-1>>1].neg()):_>0?y.add(p[_-1>>1]):y.add(p[-_-1>>1].neg())}return u.type==="affine"?y.toP():y},s.prototype._wnafMulAdd=function(u,m,x,b,p){var v,y,N,T=this._wnafT1,_=this._wnafT2,O=this._wnafT3,H=0;for(v=0;v<b;v++){var F=(N=m[v])._getNAFPoints(u);T[v]=F.wnd,_[v]=F.points}for(v=b-1;v>=1;v-=2){var V=v-1,q=v;if(T[V]===1&&T[q]===1){var W=[m[V],null,null,m[q]];m[V].y.cmp(m[q].y)===0?(W[1]=m[V].add(m[q]),W[2]=m[V].toJ().mixedAdd(m[q].neg())):m[V].y.cmp(m[q].y.redNeg())===0?(W[1]=m[V].toJ().mixedAdd(m[q]),W[2]=m[V].add(m[q].neg())):(W[1]=m[V].toJ().mixedAdd(m[q]),W[2]=m[V].toJ().mixedAdd(m[q].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],E=i(x[V],x[q]);for(H=Math.max(E[0].length,H),O[V]=new Array(H),O[q]=new Array(H),y=0;y<H;y++){var P=0|E[0][y],A=0|E[1][y];O[V][y]=B[3*(P+1)+(A+1)],O[q][y]=0,_[V]=W}}else O[V]=l(x[V],T[V],this._bitLength),O[q]=l(x[q],T[q],this._bitLength),H=Math.max(O[V].length,H),H=Math.max(O[q].length,H)}var k=this.jpoint(null,null,null),j=this._wnafT4;for(v=H;v>=0;v--){for(var S=0;v>=0;){var C=!0;for(y=0;y<b;y++)j[y]=0|O[y][v],j[y]!==0&&(C=!1);if(!C)break;S++,v--}if(v>=0&&S++,k=k.dblp(S),v<0)break;for(y=0;y<b;y++){var D=j[y];D!==0&&(D>0?N=_[y][D-1>>1]:D<0&&(N=_[y][-D-1>>1].neg()),k=N.type==="affine"?k.mixedAdd(N):k.add(N))}}for(v=0;v<b;v++)_[v]=null;return p?k:k.toP()},s.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(u,m){u=n.toArray(u,m);var x=this.p.byteLength();if((u[0]===4||u[0]===6||u[0]===7)&&u.length-1==2*x)return u[0]===6?r(u[u.length-1]%2==0):u[0]===7&&r(u[u.length-1]%2==1),this.point(u.slice(1,1+x),u.slice(1+x,1+2*x));if((u[0]===2||u[0]===3)&&u.length-1===x)return this.pointFromX(u.slice(1,1+x),u[0]===3);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(u){return this.encode(u,!0)},c.prototype._encode=function(u){var m=this.curve.p.byteLength(),x=this.getX().toArray("be",m);return u?[this.getY().isEven()?2:3].concat(x):[4].concat(x,this.getY().toArray("be",m))},c.prototype.encode=function(u,m){return n.encode(this._encode(m),u)},c.prototype.precompute=function(u){if(this.precomputed)return this;var m={doubles:null,naf:null,beta:null};return m.naf=this._getNAFPoints(8),m.doubles=this._getDoubles(4,u),m.beta=this._getBeta(),this.precomputed=m,this},c.prototype._hasDoubles=function(u){if(!this.precomputed)return!1;var m=this.precomputed.doubles;return!!m&&m.points.length>=Math.ceil((u.bitLength()+1)/m.step)},c.prototype._getDoubles=function(u,m){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var x=[this],b=this,p=0;p<m;p+=u){for(var v=0;v<u;v++)b=b.dbl();x.push(b)}return{step:u,points:x}},c.prototype._getNAFPoints=function(u){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var m=[this],x=(1<<u)-1,b=x===1?null:this.dbl(),p=1;p<x;p++)m[p]=m[p-1].add(b);return{wnd:u,points:m}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(u){for(var m=this,x=0;x<u;x++)m=m.dbl();return m}},{"../utils":419,"bn.js":420}],407:[function(t,f,h){var d=t("../utils"),n=t("bn.js"),l=t("inherits"),i=t("./base"),r=d.assert;function s(u){this.twisted=(0|u.a)!=1,this.mOneA=this.twisted&&(0|u.a)==-1,this.extended=this.mOneA,i.call(this,"edwards",u),this.a=new n(u.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(u.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(u.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),r(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|u.c)==1}function c(u,m,x,b,p){i.BasePoint.call(this,u,"projective"),m===null&&x===null&&b===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(m,16),this.y=new n(x,16),this.z=b?new n(b,16):this.curve.one,this.t=p&&new n(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}l(s,i),f.exports=s,s.prototype._mulA=function(u){return this.mOneA?u.redNeg():this.a.redMul(u)},s.prototype._mulC=function(u){return this.oneC?u:this.c.redMul(u)},s.prototype.jpoint=function(u,m,x,b){return this.point(u,m,x,b)},s.prototype.pointFromX=function(u,m){(u=new n(u,16)).red||(u=u.toRed(this.red));var x=u.redSqr(),b=this.c2.redSub(this.a.redMul(x)),p=this.one.redSub(this.c2.redMul(this.d).redMul(x)),v=b.redMul(p.redInvm()),y=v.redSqrt();if(y.redSqr().redSub(v).cmp(this.zero)!==0)throw new Error("invalid point");var N=y.fromRed().isOdd();return(m&&!N||!m&&N)&&(y=y.redNeg()),this.point(u,y)},s.prototype.pointFromY=function(u,m){(u=new n(u,16)).red||(u=u.toRed(this.red));var x=u.redSqr(),b=x.redSub(this.c2),p=x.redMul(this.d).redMul(this.c2).redSub(this.a),v=b.redMul(p.redInvm());if(v.cmp(this.zero)===0){if(m)throw new Error("invalid point");return this.point(this.zero,u)}var y=v.redSqrt();if(y.redSqr().redSub(v).cmp(this.zero)!==0)throw new Error("invalid point");return y.fromRed().isOdd()!==m&&(y=y.redNeg()),this.point(y,u)},s.prototype.validate=function(u){if(u.isInfinity())return!0;u.normalize();var m=u.x.redSqr(),x=u.y.redSqr(),b=m.redMul(this.a).redAdd(x),p=this.c2.redMul(this.one.redAdd(this.d.redMul(m).redMul(x)));return b.cmp(p)===0},l(c,i.BasePoint),s.prototype.pointFromJSON=function(u){return c.fromJSON(this,u)},s.prototype.point=function(u,m,x,b){return new c(this,u,m,x,b)},c.fromJSON=function(u,m){return new c(u,m[0],m[1],m[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},c.prototype._extDbl=function(){var u=this.x.redSqr(),m=this.y.redSqr(),x=this.z.redSqr();x=x.redIAdd(x);var b=this.curve._mulA(u),p=this.x.redAdd(this.y).redSqr().redISub(u).redISub(m),v=b.redAdd(m),y=v.redSub(x),N=b.redSub(m),T=p.redMul(y),_=v.redMul(N),O=p.redMul(N),H=y.redMul(v);return this.curve.point(T,_,H,O)},c.prototype._projDbl=function(){var u,m,x,b,p,v,y=this.x.redAdd(this.y).redSqr(),N=this.x.redSqr(),T=this.y.redSqr();if(this.curve.twisted){var _=(b=this.curve._mulA(N)).redAdd(T);this.zOne?(u=y.redSub(N).redSub(T).redMul(_.redSub(this.curve.two)),m=_.redMul(b.redSub(T)),x=_.redSqr().redSub(_).redSub(_)):(p=this.z.redSqr(),v=_.redSub(p).redISub(p),u=y.redSub(N).redISub(T).redMul(v),m=_.redMul(b.redSub(T)),x=_.redMul(v))}else b=N.redAdd(T),p=this.curve._mulC(this.z).redSqr(),v=b.redSub(p).redSub(p),u=this.curve._mulC(y.redISub(b)).redMul(v),m=this.curve._mulC(b).redMul(N.redISub(T)),x=b.redMul(v);return this.curve.point(u,m,x)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(u){var m=this.y.redSub(this.x).redMul(u.y.redSub(u.x)),x=this.y.redAdd(this.x).redMul(u.y.redAdd(u.x)),b=this.t.redMul(this.curve.dd).redMul(u.t),p=this.z.redMul(u.z.redAdd(u.z)),v=x.redSub(m),y=p.redSub(b),N=p.redAdd(b),T=x.redAdd(m),_=v.redMul(y),O=N.redMul(T),H=v.redMul(T),F=y.redMul(N);return this.curve.point(_,O,F,H)},c.prototype._projAdd=function(u){var m,x,b=this.z.redMul(u.z),p=b.redSqr(),v=this.x.redMul(u.x),y=this.y.redMul(u.y),N=this.curve.d.redMul(v).redMul(y),T=p.redSub(N),_=p.redAdd(N),O=this.x.redAdd(this.y).redMul(u.x.redAdd(u.y)).redISub(v).redISub(y),H=b.redMul(T).redMul(O);return this.curve.twisted?(m=b.redMul(_).redMul(y.redSub(this.curve._mulA(v))),x=T.redMul(_)):(m=b.redMul(_).redMul(y.redSub(v)),x=this.curve._mulC(T).redMul(_)),this.curve.point(H,m,x)},c.prototype.add=function(u){return this.isInfinity()?u:u.isInfinity()?this:this.curve.extended?this._extAdd(u):this._projAdd(u)},c.prototype.mul=function(u){return this._hasDoubles(u)?this.curve._fixedNafMul(this,u):this.curve._wnafMul(this,u)},c.prototype.mulAdd=function(u,m,x){return this.curve._wnafMulAdd(1,[this,m],[u,x],2,!1)},c.prototype.jmulAdd=function(u,m,x){return this.curve._wnafMulAdd(1,[this,m],[u,x],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var u=this.z.redInvm();return this.x=this.x.redMul(u),this.y=this.y.redMul(u),this.t&&(this.t=this.t.redMul(u)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(u){return this===u||this.getX().cmp(u.getX())===0&&this.getY().cmp(u.getY())===0},c.prototype.eqXToP=function(u){var m=u.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(m)===0)return!0;for(var x=u.clone(),b=this.curve.redN.redMul(this.z);;){if(x.iadd(this.curve.n),x.cmp(this.curve.p)>=0)return!1;if(m.redIAdd(b),this.x.cmp(m)===0)return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(t,f,h){var d=h;d.base=t("./base"),d.short=t("./short"),d.mont=t("./mont"),d.edwards=t("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(t,f,h){var d=t("bn.js"),n=t("inherits"),l=t("./base"),i=t("../utils");function r(c){l.call(this,"mont",c),this.a=new d(c.a,16).toRed(this.red),this.b=new d(c.b,16).toRed(this.red),this.i4=new d(4).toRed(this.red).redInvm(),this.two=new d(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function s(c,u,m){l.BasePoint.call(this,c,"projective"),u===null&&m===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new d(u,16),this.z=new d(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(r,l),f.exports=r,r.prototype.validate=function(c){var u=c.normalize().x,m=u.redSqr(),x=m.redMul(u).redAdd(m.redMul(this.a)).redAdd(u);return x.redSqrt().redSqr().cmp(x)===0},n(s,l.BasePoint),r.prototype.decodePoint=function(c,u){return this.point(i.toArray(c,u),1)},r.prototype.point=function(c,u){return new s(this,c,u)},r.prototype.pointFromJSON=function(c){return s.fromJSON(this,c)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(c,u){return new s(c,u[0],u[1]||c.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var c=this.x.redAdd(this.z).redSqr(),u=this.x.redSub(this.z).redSqr(),m=c.redSub(u),x=c.redMul(u),b=m.redMul(u.redAdd(this.curve.a24.redMul(m)));return this.curve.point(x,b)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(c,u){var m=this.x.redAdd(this.z),x=this.x.redSub(this.z),b=c.x.redAdd(c.z),p=c.x.redSub(c.z).redMul(m),v=b.redMul(x),y=u.z.redMul(p.redAdd(v).redSqr()),N=u.x.redMul(p.redISub(v).redSqr());return this.curve.point(y,N)},s.prototype.mul=function(c){for(var u=c.clone(),m=this,x=this.curve.point(null,null),b=[];u.cmpn(0)!==0;u.iushrn(1))b.push(u.andln(1));for(var p=b.length-1;p>=0;p--)b[p]===0?(m=m.diffAdd(x,this),x=x.dbl()):(x=m.diffAdd(x,this),m=m.dbl());return x},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(c){return this.getX().cmp(c.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(t,f,h){var d=t("../utils"),n=t("bn.js"),l=t("inherits"),i=t("./base"),r=d.assert;function s(m){i.call(this,"short",m),this.a=new n(m.a,16).toRed(this.red),this.b=new n(m.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(m),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(m,x,b,p){i.BasePoint.call(this,m,"affine"),x===null&&b===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(x,16),this.y=new n(b,16),p&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(m,x,b,p){i.BasePoint.call(this,m,"jacobian"),x===null&&b===null&&p===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(x,16),this.y=new n(b,16),this.z=new n(p,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}l(s,i),f.exports=s,s.prototype._getEndomorphism=function(m){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var x,b;if(m.beta)x=new n(m.beta,16).toRed(this.red);else{var p=this._getEndoRoots(this.p);x=(x=p[0].cmp(p[1])<0?p[0]:p[1]).toRed(this.red)}if(m.lambda)b=new n(m.lambda,16);else{var v=this._getEndoRoots(this.n);this.g.mul(v[0]).x.cmp(this.g.x.redMul(x))===0?b=v[0]:(b=v[1],r(this.g.mul(b).x.cmp(this.g.x.redMul(x))===0))}return{beta:x,lambda:b,basis:m.basis?m.basis.map((function(y){return{a:new n(y.a,16),b:new n(y.b,16)}})):this._getEndoBasis(b)}}},s.prototype._getEndoRoots=function(m){var x=m===this.p?this.red:n.mont(m),b=new n(2).toRed(x).redInvm(),p=b.redNeg(),v=new n(3).toRed(x).redNeg().redSqrt().redMul(b);return[p.redAdd(v).fromRed(),p.redSub(v).fromRed()]},s.prototype._getEndoBasis=function(m){for(var x,b,p,v,y,N,T,_,O,H=this.n.ushrn(Math.floor(this.n.bitLength()/2)),F=m,V=this.n.clone(),q=new n(1),W=new n(0),B=new n(0),E=new n(1),P=0;F.cmpn(0)!==0;){var A=V.div(F);_=V.sub(A.mul(F)),O=B.sub(A.mul(q));var k=E.sub(A.mul(W));if(!p&&_.cmp(H)<0)x=T.neg(),b=q,p=_.neg(),v=O;else if(p&&++P==2)break;T=_,V=F,F=_,B=q,q=O,E=W,W=k}y=_.neg(),N=O;var j=p.sqr().add(v.sqr());return y.sqr().add(N.sqr()).cmp(j)>=0&&(y=x,N=b),p.negative&&(p=p.neg(),v=v.neg()),y.negative&&(y=y.neg(),N=N.neg()),[{a:p,b:v},{a:y,b:N}]},s.prototype._endoSplit=function(m){var x=this.endo.basis,b=x[0],p=x[1],v=p.b.mul(m).divRound(this.n),y=b.b.neg().mul(m).divRound(this.n),N=v.mul(b.a),T=y.mul(p.a),_=v.mul(b.b),O=y.mul(p.b);return{k1:m.sub(N).sub(T),k2:_.add(O).neg()}},s.prototype.pointFromX=function(m,x){(m=new n(m,16)).red||(m=m.toRed(this.red));var b=m.redSqr().redMul(m).redIAdd(m.redMul(this.a)).redIAdd(this.b),p=b.redSqrt();if(p.redSqr().redSub(b).cmp(this.zero)!==0)throw new Error("invalid point");var v=p.fromRed().isOdd();return(x&&!v||!x&&v)&&(p=p.redNeg()),this.point(m,p)},s.prototype.validate=function(m){if(m.inf)return!0;var x=m.x,b=m.y,p=this.a.redMul(x),v=x.redSqr().redMul(x).redIAdd(p).redIAdd(this.b);return b.redSqr().redISub(v).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(m,x,b){for(var p=this._endoWnafT1,v=this._endoWnafT2,y=0;y<m.length;y++){var N=this._endoSplit(x[y]),T=m[y],_=T._getBeta();N.k1.negative&&(N.k1.ineg(),T=T.neg(!0)),N.k2.negative&&(N.k2.ineg(),_=_.neg(!0)),p[2*y]=T,p[2*y+1]=_,v[2*y]=N.k1,v[2*y+1]=N.k2}for(var O=this._wnafMulAdd(1,p,v,2*y,b),H=0;H<2*y;H++)p[H]=null,v[H]=null;return O},l(c,i.BasePoint),s.prototype.point=function(m,x,b){return new c(this,m,x,b)},s.prototype.pointFromJSON=function(m,x){return c.fromJSON(this,m,x)},c.prototype._getBeta=function(){if(this.curve.endo){var m=this.precomputed;if(m&&m.beta)return m.beta;var x=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(m){var b=this.curve,p=function(v){return b.point(v.x.redMul(b.endo.beta),v.y)};m.beta=x,x.precomputed={beta:null,naf:m.naf&&{wnd:m.naf.wnd,points:m.naf.points.map(p)},doubles:m.doubles&&{step:m.doubles.step,points:m.doubles.points.map(p)}}}return x}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(m,x,b){typeof x=="string"&&(x=JSON.parse(x));var p=m.point(x[0],x[1],b);if(!x[2])return p;function v(N){return m.point(N[0],N[1],b)}var y=x[2];return p.precomputed={beta:null,doubles:y.doubles&&{step:y.doubles.step,points:[p].concat(y.doubles.points.map(v))},naf:y.naf&&{wnd:y.naf.wnd,points:[p].concat(y.naf.points.map(v))}},p},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(m){if(this.inf)return m;if(m.inf)return this;if(this.eq(m))return this.dbl();if(this.neg().eq(m))return this.curve.point(null,null);if(this.x.cmp(m.x)===0)return this.curve.point(null,null);var x=this.y.redSub(m.y);x.cmpn(0)!==0&&(x=x.redMul(this.x.redSub(m.x).redInvm()));var b=x.redSqr().redISub(this.x).redISub(m.x),p=x.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,p)},c.prototype.dbl=function(){if(this.inf)return this;var m=this.y.redAdd(this.y);if(m.cmpn(0)===0)return this.curve.point(null,null);var x=this.curve.a,b=this.x.redSqr(),p=m.redInvm(),v=b.redAdd(b).redIAdd(b).redIAdd(x).redMul(p),y=v.redSqr().redISub(this.x.redAdd(this.x)),N=v.redMul(this.x.redSub(y)).redISub(this.y);return this.curve.point(y,N)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(m){return m=new n(m,16),this.isInfinity()?this:this._hasDoubles(m)?this.curve._fixedNafMul(this,m):this.curve.endo?this.curve._endoWnafMulAdd([this],[m]):this.curve._wnafMul(this,m)},c.prototype.mulAdd=function(m,x,b){var p=[this,x],v=[m,b];return this.curve.endo?this.curve._endoWnafMulAdd(p,v):this.curve._wnafMulAdd(1,p,v,2)},c.prototype.jmulAdd=function(m,x,b){var p=[this,x],v=[m,b];return this.curve.endo?this.curve._endoWnafMulAdd(p,v,!0):this.curve._wnafMulAdd(1,p,v,2,!0)},c.prototype.eq=function(m){return this===m||this.inf===m.inf&&(this.inf||this.x.cmp(m.x)===0&&this.y.cmp(m.y)===0)},c.prototype.neg=function(m){if(this.inf)return this;var x=this.curve.point(this.x,this.y.redNeg());if(m&&this.precomputed){var b=this.precomputed,p=function(v){return v.neg()};x.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(p)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(p)}}}return x},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},l(u,i.BasePoint),s.prototype.jpoint=function(m,x,b){return new u(this,m,x,b)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var m=this.z.redInvm(),x=m.redSqr(),b=this.x.redMul(x),p=this.y.redMul(x).redMul(m);return this.curve.point(b,p)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(m){if(this.isInfinity())return m;if(m.isInfinity())return this;var x=m.z.redSqr(),b=this.z.redSqr(),p=this.x.redMul(x),v=m.x.redMul(b),y=this.y.redMul(x.redMul(m.z)),N=m.y.redMul(b.redMul(this.z)),T=p.redSub(v),_=y.redSub(N);if(T.cmpn(0)===0)return _.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var O=T.redSqr(),H=O.redMul(T),F=p.redMul(O),V=_.redSqr().redIAdd(H).redISub(F).redISub(F),q=_.redMul(F.redISub(V)).redISub(y.redMul(H)),W=this.z.redMul(m.z).redMul(T);return this.curve.jpoint(V,q,W)},u.prototype.mixedAdd=function(m){if(this.isInfinity())return m.toJ();if(m.isInfinity())return this;var x=this.z.redSqr(),b=this.x,p=m.x.redMul(x),v=this.y,y=m.y.redMul(x).redMul(this.z),N=b.redSub(p),T=v.redSub(y);if(N.cmpn(0)===0)return T.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var _=N.redSqr(),O=_.redMul(N),H=b.redMul(_),F=T.redSqr().redIAdd(O).redISub(H).redISub(H),V=T.redMul(H.redISub(F)).redISub(v.redMul(O)),q=this.z.redMul(N);return this.curve.jpoint(F,V,q)},u.prototype.dblp=function(m){if(m===0)return this;if(this.isInfinity())return this;if(!m)return this.dbl();var x;if(this.curve.zeroA||this.curve.threeA){var b=this;for(x=0;x<m;x++)b=b.dbl();return b}var p=this.curve.a,v=this.curve.tinv,y=this.x,N=this.y,T=this.z,_=T.redSqr().redSqr(),O=N.redAdd(N);for(x=0;x<m;x++){var H=y.redSqr(),F=O.redSqr(),V=F.redSqr(),q=H.redAdd(H).redIAdd(H).redIAdd(p.redMul(_)),W=y.redMul(F),B=q.redSqr().redISub(W.redAdd(W)),E=W.redISub(B),P=q.redMul(E);P=P.redIAdd(P).redISub(V);var A=O.redMul(T);x+1<m&&(_=_.redMul(V)),y=B,T=A,O=P}return this.curve.jpoint(y,O.redMul(v),T)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var m,x,b;if(this.zOne){var p=this.x.redSqr(),v=this.y.redSqr(),y=v.redSqr(),N=this.x.redAdd(v).redSqr().redISub(p).redISub(y);N=N.redIAdd(N);var T=p.redAdd(p).redIAdd(p),_=T.redSqr().redISub(N).redISub(N),O=y.redIAdd(y);O=(O=O.redIAdd(O)).redIAdd(O),m=_,x=T.redMul(N.redISub(_)).redISub(O),b=this.y.redAdd(this.y)}else{var H=this.x.redSqr(),F=this.y.redSqr(),V=F.redSqr(),q=this.x.redAdd(F).redSqr().redISub(H).redISub(V);q=q.redIAdd(q);var W=H.redAdd(H).redIAdd(H),B=W.redSqr(),E=V.redIAdd(V);E=(E=E.redIAdd(E)).redIAdd(E),m=B.redISub(q).redISub(q),x=W.redMul(q.redISub(m)).redISub(E),b=(b=this.y.redMul(this.z)).redIAdd(b)}return this.curve.jpoint(m,x,b)},u.prototype._threeDbl=function(){var m,x,b;if(this.zOne){var p=this.x.redSqr(),v=this.y.redSqr(),y=v.redSqr(),N=this.x.redAdd(v).redSqr().redISub(p).redISub(y);N=N.redIAdd(N);var T=p.redAdd(p).redIAdd(p).redIAdd(this.curve.a),_=T.redSqr().redISub(N).redISub(N);m=_;var O=y.redIAdd(y);O=(O=O.redIAdd(O)).redIAdd(O),x=T.redMul(N.redISub(_)).redISub(O),b=this.y.redAdd(this.y)}else{var H=this.z.redSqr(),F=this.y.redSqr(),V=this.x.redMul(F),q=this.x.redSub(H).redMul(this.x.redAdd(H));q=q.redAdd(q).redIAdd(q);var W=V.redIAdd(V),B=(W=W.redIAdd(W)).redAdd(W);m=q.redSqr().redISub(B),b=this.y.redAdd(this.z).redSqr().redISub(F).redISub(H);var E=F.redSqr();E=(E=(E=E.redIAdd(E)).redIAdd(E)).redIAdd(E),x=q.redMul(W.redISub(m)).redISub(E)}return this.curve.jpoint(m,x,b)},u.prototype._dbl=function(){var m=this.curve.a,x=this.x,b=this.y,p=this.z,v=p.redSqr().redSqr(),y=x.redSqr(),N=b.redSqr(),T=y.redAdd(y).redIAdd(y).redIAdd(m.redMul(v)),_=x.redAdd(x),O=(_=_.redIAdd(_)).redMul(N),H=T.redSqr().redISub(O.redAdd(O)),F=O.redISub(H),V=N.redSqr();V=(V=(V=V.redIAdd(V)).redIAdd(V)).redIAdd(V);var q=T.redMul(F).redISub(V),W=b.redAdd(b).redMul(p);return this.curve.jpoint(H,q,W)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var m=this.x.redSqr(),x=this.y.redSqr(),b=this.z.redSqr(),p=x.redSqr(),v=m.redAdd(m).redIAdd(m),y=v.redSqr(),N=this.x.redAdd(x).redSqr().redISub(m).redISub(p),T=(N=(N=(N=N.redIAdd(N)).redAdd(N).redIAdd(N)).redISub(y)).redSqr(),_=p.redIAdd(p);_=(_=(_=_.redIAdd(_)).redIAdd(_)).redIAdd(_);var O=v.redIAdd(N).redSqr().redISub(y).redISub(T).redISub(_),H=x.redMul(O);H=(H=H.redIAdd(H)).redIAdd(H);var F=this.x.redMul(T).redISub(H);F=(F=F.redIAdd(F)).redIAdd(F);var V=this.y.redMul(O.redMul(_.redISub(O)).redISub(N.redMul(T)));V=(V=(V=V.redIAdd(V)).redIAdd(V)).redIAdd(V);var q=this.z.redAdd(N).redSqr().redISub(b).redISub(T);return this.curve.jpoint(F,V,q)},u.prototype.mul=function(m,x){return m=new n(m,x),this.curve._wnafMul(this,m)},u.prototype.eq=function(m){if(m.type==="affine")return this.eq(m.toJ());if(this===m)return!0;var x=this.z.redSqr(),b=m.z.redSqr();if(this.x.redMul(b).redISub(m.x.redMul(x)).cmpn(0)!==0)return!1;var p=x.redMul(this.z),v=b.redMul(m.z);return this.y.redMul(v).redISub(m.y.redMul(p)).cmpn(0)===0},u.prototype.eqXToP=function(m){var x=this.z.redSqr(),b=m.toRed(this.curve.red).redMul(x);if(this.x.cmp(b)===0)return!0;for(var p=m.clone(),v=this.curve.redN.redMul(x);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(b.redIAdd(v),this.x.cmp(b)===0)return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(t,f,h){var d,n=h,l=t("hash.js"),i=t("./curve"),r=t("./utils").assert;function s(u){u.type==="short"?this.curve=new i.short(u):u.type==="edwards"?this.curve=new i.edwards(u):this.curve=new i.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(u,m){Object.defineProperty(n,u,{configurable:!0,enumerable:!0,get:function(){var x=new s(m);return Object.defineProperty(n,u,{configurable:!0,enumerable:!0,value:x}),x}})}n.PresetCurve=s,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:l.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:l.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:l.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:l.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:l.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:l.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:l.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{d=t("./precomputed/secp256k1")}catch{d=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:l.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",d]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(t,f,h){var d=t("bn.js"),n=t("hmac-drbg"),l=t("../utils"),i=t("../curves"),r=t("brorand"),s=l.assert,c=t("./key"),u=t("./signature");function m(x){if(!(this instanceof m))return new m(x);typeof x=="string"&&(s(Object.prototype.hasOwnProperty.call(i,x),"Unknown curve "+x),x=i[x]),x instanceof i.PresetCurve&&(x={curve:x}),this.curve=x.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=x.curve.g,this.g.precompute(x.curve.n.bitLength()+1),this.hash=x.hash||x.curve.hash}f.exports=m,m.prototype.keyPair=function(x){return new c(this,x)},m.prototype.keyFromPrivate=function(x,b){return c.fromPrivate(this,x,b)},m.prototype.keyFromPublic=function(x,b){return c.fromPublic(this,x,b)},m.prototype.genKeyPair=function(x){x||(x={});for(var b=new n({hash:this.hash,pers:x.pers,persEnc:x.persEnc||"utf8",entropy:x.entropy||r(this.hash.hmacStrength),entropyEnc:x.entropy&&x.entropyEnc||"utf8",nonce:this.n.toArray()}),p=this.n.byteLength(),v=this.n.sub(new d(2));;){var y=new d(b.generate(p));if(!(y.cmp(v)>0))return y.iaddn(1),this.keyFromPrivate(y)}},m.prototype._truncateToN=function(x,b){var p=8*x.byteLength()-this.n.bitLength();return p>0&&(x=x.ushrn(p)),!b&&x.cmp(this.n)>=0?x.sub(this.n):x},m.prototype.sign=function(x,b,p,v){typeof p=="object"&&(v=p,p=null),v||(v={}),b=this.keyFromPrivate(b,p),x=this._truncateToN(new d(x,16));for(var y=this.n.byteLength(),N=b.getPrivate().toArray("be",y),T=x.toArray("be",y),_=new n({hash:this.hash,entropy:N,nonce:T,pers:v.pers,persEnc:v.persEnc||"utf8"}),O=this.n.sub(new d(1)),H=0;;H++){var F=v.k?v.k(H):new d(_.generate(this.n.byteLength()));if(!((F=this._truncateToN(F,!0)).cmpn(1)<=0||F.cmp(O)>=0)){var V=this.g.mul(F);if(!V.isInfinity()){var q=V.getX(),W=q.umod(this.n);if(W.cmpn(0)!==0){var B=F.invm(this.n).mul(W.mul(b.getPrivate()).iadd(x));if((B=B.umod(this.n)).cmpn(0)!==0){var E=(V.getY().isOdd()?1:0)|(q.cmp(W)!==0?2:0);return v.canonical&&B.cmp(this.nh)>0&&(B=this.n.sub(B),E^=1),new u({r:W,s:B,recoveryParam:E})}}}}}},m.prototype.verify=function(x,b,p,v){x=this._truncateToN(new d(x,16)),p=this.keyFromPublic(p,v);var y=(b=new u(b,"hex")).r,N=b.s;if(y.cmpn(1)<0||y.cmp(this.n)>=0||N.cmpn(1)<0||N.cmp(this.n)>=0)return!1;var T,_=N.invm(this.n),O=_.mul(x).umod(this.n),H=_.mul(y).umod(this.n);return this.curve._maxwellTrick?!(T=this.g.jmulAdd(O,p.getPublic(),H)).isInfinity()&&T.eqXToP(y):!(T=this.g.mulAdd(O,p.getPublic(),H)).isInfinity()&&T.getX().umod(this.n).cmp(y)===0},m.prototype.recoverPubKey=function(x,b,p,v){s((3&p)===p,"The recovery param is more than two bits"),b=new u(b,v);var y=this.n,N=new d(x),T=b.r,_=b.s,O=1&p,H=p>>1;if(T.cmp(this.curve.p.umod(this.curve.n))>=0&&H)throw new Error("Unable to find sencond key candinate");T=H?this.curve.pointFromX(T.add(this.curve.n),O):this.curve.pointFromX(T,O);var F=b.r.invm(y),V=y.sub(N).mul(F).umod(y),q=_.mul(F).umod(y);return this.g.mulAdd(V,T,q)},m.prototype.getKeyRecoveryParam=function(x,b,p,v){if((b=new u(b,v)).recoveryParam!==null)return b.recoveryParam;for(var y=0;y<4;y++){var N;try{N=this.recoverPubKey(x,b,y)}catch{continue}if(N.eq(p))return y}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(t,f,h){var d=t("bn.js"),n=t("../utils").assert;function l(i,r){this.ec=i,this.priv=null,this.pub=null,r.priv&&this._importPrivate(r.priv,r.privEnc),r.pub&&this._importPublic(r.pub,r.pubEnc)}f.exports=l,l.fromPublic=function(i,r,s){return r instanceof l?r:new l(i,{pub:r,pubEnc:s})},l.fromPrivate=function(i,r,s){return r instanceof l?r:new l(i,{priv:r,privEnc:s})},l.prototype.validate=function(){var i=this.getPublic();return i.isInfinity()?{result:!1,reason:"Invalid public key"}:i.validate()?i.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},l.prototype.getPublic=function(i,r){return typeof i=="string"&&(r=i,i=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,i):this.pub},l.prototype.getPrivate=function(i){return i==="hex"?this.priv.toString(16,2):this.priv},l.prototype._importPrivate=function(i,r){this.priv=new d(i,r||16),this.priv=this.priv.umod(this.ec.curve.n)},l.prototype._importPublic=function(i,r){if(i.x||i.y)return this.ec.curve.type==="mont"?n(i.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||n(i.x&&i.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(i.x,i.y));this.pub=this.ec.curve.decodePoint(i,r)},l.prototype.derive=function(i){return i.validate()||n(i.validate(),"public point not validated"),i.mul(this.priv).getX()},l.prototype.sign=function(i,r,s){return this.ec.sign(i,this,r,s)},l.prototype.verify=function(i,r){return this.ec.verify(i,r,this)},l.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(t,f,h){var d=t("bn.js"),n=t("../utils"),l=n.assert;function i(m,x){if(m instanceof i)return m;this._importDER(m,x)||(l(m.r&&m.s,"Signature without r or s"),this.r=new d(m.r,16),this.s=new d(m.s,16),m.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=m.recoveryParam)}function r(){this.place=0}function s(m,x){var b=m[x.place++];if(!(128&b))return b;var p=15&b;if(p===0||p>4)return!1;for(var v=0,y=0,N=x.place;y<p;y++,N++)v<<=8,v|=m[N],v>>>=0;return!(v<=127)&&(x.place=N,v)}function c(m){for(var x=0,b=m.length-1;!m[x]&&!(128&m[x+1])&&x<b;)x++;return x===0?m:m.slice(x)}function u(m,x){if(x<128)m.push(x);else{var b=1+(Math.log(x)/Math.LN2>>>3);for(m.push(128|b);--b;)m.push(x>>>(b<<3)&255);m.push(x)}}f.exports=i,i.prototype._importDER=function(m,x){m=n.toArray(m,x);var b=new r;if(m[b.place++]!==48)return!1;var p=s(m,b);if(p===!1||p+b.place!==m.length||m[b.place++]!==2)return!1;var v=s(m,b);if(v===!1)return!1;var y=m.slice(b.place,v+b.place);if(b.place+=v,m[b.place++]!==2)return!1;var N=s(m,b);if(N===!1||m.length!==N+b.place)return!1;var T=m.slice(b.place,N+b.place);if(y[0]===0){if(!(128&y[1]))return!1;y=y.slice(1)}if(T[0]===0){if(!(128&T[1]))return!1;T=T.slice(1)}return this.r=new d(y),this.s=new d(T),this.recoveryParam=null,!0},i.prototype.toDER=function(m){var x=this.r.toArray(),b=this.s.toArray();for(128&x[0]&&(x=[0].concat(x)),128&b[0]&&(b=[0].concat(b)),x=c(x),b=c(b);!(b[0]||128&b[1]);)b=b.slice(1);var p=[2];u(p,x.length),(p=p.concat(x)).push(2),u(p,b.length);var v=p.concat(b),y=[48];return u(y,v.length),y=y.concat(v),n.encode(y,m)}},{"../utils":419,"bn.js":420}],415:[function(t,f,h){var d=t("hash.js"),n=t("../curves"),l=t("../utils"),i=l.assert,r=l.parseBytes,s=t("./key"),c=t("./signature");function u(m){if(i(m==="ed25519","only tested with ed25519 so far"),!(this instanceof u))return new u(m);m=n[m].curve,this.curve=m,this.g=m.g,this.g.precompute(m.n.bitLength()+1),this.pointClass=m.point().constructor,this.encodingLength=Math.ceil(m.n.bitLength()/8),this.hash=d.sha512}f.exports=u,u.prototype.sign=function(m,x){m=r(m);var b=this.keyFromSecret(x),p=this.hashInt(b.messagePrefix(),m),v=this.g.mul(p),y=this.encodePoint(v),N=this.hashInt(y,b.pubBytes(),m).mul(b.priv()),T=p.add(N).umod(this.curve.n);return this.makeSignature({R:v,S:T,Rencoded:y})},u.prototype.verify=function(m,x,b){m=r(m),x=this.makeSignature(x);var p=this.keyFromPublic(b),v=this.hashInt(x.Rencoded(),p.pubBytes(),m),y=this.g.mul(x.S());return x.R().add(p.pub().mul(v)).eq(y)},u.prototype.hashInt=function(){for(var m=this.hash(),x=0;x<arguments.length;x++)m.update(arguments[x]);return l.intFromLE(m.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(m){return s.fromPublic(this,m)},u.prototype.keyFromSecret=function(m){return s.fromSecret(this,m)},u.prototype.makeSignature=function(m){return m instanceof c?m:new c(this,m)},u.prototype.encodePoint=function(m){var x=m.getY().toArray("le",this.encodingLength);return x[this.encodingLength-1]|=m.getX().isOdd()?128:0,x},u.prototype.decodePoint=function(m){var x=(m=l.parseBytes(m)).length-1,b=m.slice(0,x).concat(-129&m[x]),p=(128&m[x])!=0,v=l.intFromLE(b);return this.curve.pointFromY(v,p)},u.prototype.encodeInt=function(m){return m.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(m){return l.intFromLE(m)},u.prototype.isPoint=function(m){return m instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(t,f,h){var d=t("../utils"),n=d.assert,l=d.parseBytes,i=d.cachedProperty;function r(s,c){this.eddsa=s,this._secret=l(c.secret),s.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=l(c.pub)}r.fromPublic=function(s,c){return c instanceof r?c:new r(s,{pub:c})},r.fromSecret=function(s,c){return c instanceof r?c:new r(s,{secret:c})},r.prototype.secret=function(){return this._secret},i(r,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),i(r,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),i(r,"privBytes",(function(){var s=this.eddsa,c=this.hash(),u=s.encodingLength-1,m=c.slice(0,s.encodingLength);return m[0]&=248,m[u]&=127,m[u]|=64,m})),i(r,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),i(r,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),i(r,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),r.prototype.sign=function(s){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(s,this)},r.prototype.verify=function(s,c){return this.eddsa.verify(s,c,this)},r.prototype.getSecret=function(s){return n(this._secret,"KeyPair is public only"),d.encode(this.secret(),s)},r.prototype.getPublic=function(s){return d.encode(this.pubBytes(),s)},f.exports=r},{"../utils":419}],417:[function(t,f,h){var d=t("bn.js"),n=t("../utils"),l=n.assert,i=n.cachedProperty,r=n.parseBytes;function s(c,u){this.eddsa=c,typeof u!="object"&&(u=r(u)),Array.isArray(u)&&(u={R:u.slice(0,c.encodingLength),S:u.slice(c.encodingLength)}),l(u.R&&u.S,"Signature without R or S"),c.isPoint(u.R)&&(this._R=u.R),u.S instanceof d&&(this._S=u.S),this._Rencoded=Array.isArray(u.R)?u.R:u.Rencoded,this._Sencoded=Array.isArray(u.S)?u.S:u.Sencoded}i(s,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),i(s,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),i(s,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),i(s,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},f.exports=s},{"../utils":419,"bn.js":420}],418:[function(t,f,h){f.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(t,f,h){var d=h,n=t("bn.js"),l=t("minimalistic-assert"),i=t("minimalistic-crypto-utils");d.assert=l,d.toArray=i.toArray,d.zero2=i.zero2,d.toHex=i.toHex,d.encode=i.encode,d.getNAF=function(r,s,c){var u=new Array(Math.max(r.bitLength(),c)+1);u.fill(0);for(var m=1<<s+1,x=r.clone(),b=0;b<u.length;b++){var p,v=x.andln(m-1);x.isOdd()?(p=v>(m>>1)-1?(m>>1)-v:v,x.isubn(p)):p=0,u[b]=p,x.iushrn(1)}return u},d.getJSF=function(r,s){var c=[[],[]];r=r.clone(),s=s.clone();for(var u,m=0,x=0;r.cmpn(-m)>0||s.cmpn(-x)>0;){var b,p,v=r.andln(3)+m&3,y=s.andln(3)+x&3;v===3&&(v=-1),y===3&&(y=-1),b=(1&v)==0?0:(u=r.andln(7)+m&7)!==3&&u!==5||y!==2?v:-v,c[0].push(b),p=(1&y)==0?0:(u=s.andln(7)+x&7)!==3&&u!==5||v!==2?y:-y,c[1].push(p),2*m===b+1&&(m=1-m),2*x===p+1&&(x=1-x),r.iushrn(1),s.iushrn(1)}return c},d.cachedProperty=function(r,s,c){var u="_"+s;r.prototype[s]=function(){return this[u]!==void 0?this[u]:this[u]=c.call(this)}},d.parseBytes=function(r){return typeof r=="string"?d.toArray(r,"hex"):r},d.intFromLE=function(r){return new n(r,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(t,f,h){arguments[4][184][0].apply(h,arguments)},{buffer:188,dup:184}],421:[function(t,f,h){f.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(t,f,h){var d=Object.create||function(F){var V=function(){};return V.prototype=F,new V},n=Object.keys||function(F){var V=[];for(var q in F)Object.prototype.hasOwnProperty.call(F,q)&&V.push(q);return q},l=Function.prototype.bind||function(F){var V=this;return function(){return V.apply(F,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=d(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}f.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0;var r,s=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),r=c.x===0}catch{r=!1}function u(F){return F._maxListeners===void 0?i.defaultMaxListeners:F._maxListeners}function m(F,V,q){if(V)F.call(q);else for(var W=F.length,B=H(F,W),E=0;E<W;++E)B[E].call(q)}function x(F,V,q,W){if(V)F.call(q,W);else for(var B=F.length,E=H(F,B),P=0;P<B;++P)E[P].call(q,W)}function b(F,V,q,W,B){if(V)F.call(q,W,B);else for(var E=F.length,P=H(F,E),A=0;A<E;++A)P[A].call(q,W,B)}function p(F,V,q,W,B,E){if(V)F.call(q,W,B,E);else for(var P=F.length,A=H(F,P),k=0;k<P;++k)A[k].call(q,W,B,E)}function v(F,V,q,W){if(V)F.apply(q,W);else for(var B=F.length,E=H(F,B),P=0;P<B;++P)E[P].apply(q,W)}function y(F,V,q,W){var B,E,P;if(typeof q!="function")throw new TypeError('"listener" argument must be a function');if((E=F._events)?(E.newListener&&(F.emit("newListener",V,q.listener?q.listener:q),E=F._events),P=E[V]):(E=F._events=d(null),F._eventsCount=0),P){if(typeof P=="function"?P=E[V]=W?[q,P]:[P,q]:W?P.unshift(q):P.push(q),!P.warned&&(B=u(F))&&B>0&&P.length>B){P.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+P.length+' "'+String(V)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');A.name="MaxListenersExceededWarning",A.emitter=F,A.type=V,A.count=P.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",A.name,A.message)}}else P=E[V]=q,++F._eventsCount;return F}function N(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var F=new Array(arguments.length),V=0;V<F.length;++V)F[V]=arguments[V];this.listener.apply(this.target,F)}}function T(F,V,q){var W={fired:!1,wrapFn:void 0,target:F,type:V,listener:q},B=l.call(N,W);return B.listener=q,W.wrapFn=B,B}function _(F,V,q){var W=F._events;if(!W)return[];var B=W[V];return B?typeof B=="function"?q?[B.listener||B]:[B]:q?(function(E){for(var P=new Array(E.length),A=0;A<P.length;++A)P[A]=E[A].listener||E[A];return P})(B):H(B,B.length):[]}function O(F){var V=this._events;if(V){var q=V[F];if(typeof q=="function")return 1;if(q)return q.length}return 0}function H(F,V){for(var q=new Array(V),W=0;W<V;++W)q[W]=F[W];return q}r?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(F){if(typeof F!="number"||F<0||F!=F)throw new TypeError('"defaultMaxListeners" must be a positive number');s=F}}):i.defaultMaxListeners=s,i.prototype.setMaxListeners=function(F){if(typeof F!="number"||F<0||isNaN(F))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=F,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(F){var V,q,W,B,E,P,A=F==="error";if(P=this._events)A=A&&P.error==null;else if(!A)return!1;if(A){if(arguments.length>1&&(V=arguments[1]),V instanceof Error)throw V;var k=new Error('Unhandled "error" event. ('+V+")");throw k.context=V,k}if(!(q=P[F]))return!1;var j=typeof q=="function";switch(W=arguments.length){case 1:m(q,j,this);break;case 2:x(q,j,this,arguments[1]);break;case 3:b(q,j,this,arguments[1],arguments[2]);break;case 4:p(q,j,this,arguments[1],arguments[2],arguments[3]);break;default:for(B=new Array(W-1),E=1;E<W;E++)B[E-1]=arguments[E];v(q,j,this,B)}return!0},i.prototype.addListener=function(F,V){return y(this,F,V,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(F,V){return y(this,F,V,!0)},i.prototype.once=function(F,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.on(F,T(this,F,V)),this},i.prototype.prependOnceListener=function(F,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(F,T(this,F,V)),this},i.prototype.removeListener=function(F,V){var q,W,B,E,P;if(typeof V!="function")throw new TypeError('"listener" argument must be a function');if(!(W=this._events))return this;if(!(q=W[F]))return this;if(q===V||q.listener===V)--this._eventsCount==0?this._events=d(null):(delete W[F],W.removeListener&&this.emit("removeListener",F,q.listener||V));else if(typeof q!="function"){for(B=-1,E=q.length-1;E>=0;E--)if(q[E]===V||q[E].listener===V){P=q[E].listener,B=E;break}if(B<0)return this;B===0?q.shift():(function(A,k){for(var j=k,S=j+1,C=A.length;S<C;j+=1,S+=1)A[j]=A[S];A.pop()})(q,B),q.length===1&&(W[F]=q[0]),W.removeListener&&this.emit("removeListener",F,P||V)}return this},i.prototype.removeAllListeners=function(F){var V,q,W;if(!(q=this._events))return this;if(!q.removeListener)return arguments.length===0?(this._events=d(null),this._eventsCount=0):q[F]&&(--this._eventsCount==0?this._events=d(null):delete q[F]),this;if(arguments.length===0){var B,E=n(q);for(W=0;W<E.length;++W)(B=E[W])!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=d(null),this._eventsCount=0,this}if(typeof(V=q[F])=="function")this.removeListener(F,V);else if(V)for(W=V.length-1;W>=0;W--)this.removeListener(F,V[W]);return this},i.prototype.listeners=function(F){return _(this,F,!0)},i.prototype.rawListeners=function(F){return _(this,F,!1)},i.listenerCount=function(F,V){return typeof F.listenerCount=="function"?F.listenerCount(V):O.call(F,V)},i.prototype.listenerCount=O,i.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(t,f,h){var d=t("safe-buffer").Buffer,n=t("md5.js");f.exports=function(l,i,r,s){if(d.isBuffer(l)||(l=d.from(l,"binary")),i&&(d.isBuffer(i)||(i=d.from(i,"binary")),i.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var c=r/8,u=d.alloc(c),m=d.alloc(s||0),x=d.alloc(0);c>0||s>0;){var b=new n;b.update(x),b.update(l),i&&b.update(i),x=b.digest();var p=0;if(c>0){var v=u.length-c;p=Math.min(c,x.length),x.copy(u,v,0,p),c-=p}if(p<x.length&&s>0){var y=m.length-s,N=Math.min(s,x.length-p);x.copy(m,y,p,p+N),s-=N}}return x.fill(0),{key:u,iv:m}}},{"md5.js":450,"safe-buffer":494}],424:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.CsvParserStream=h.ParserOptions=h.parseFile=h.parseStream=h.parseString=h.parse=h.FormatterOptions=h.CsvFormatterStream=h.writeToPath=h.writeToString=h.writeToBuffer=h.writeToStream=h.write=h.format=void 0;var d=t("@fast-csv/format");Object.defineProperty(h,"format",{enumerable:!0,get:function(){return d.format}}),Object.defineProperty(h,"write",{enumerable:!0,get:function(){return d.write}}),Object.defineProperty(h,"writeToStream",{enumerable:!0,get:function(){return d.writeToStream}}),Object.defineProperty(h,"writeToBuffer",{enumerable:!0,get:function(){return d.writeToBuffer}}),Object.defineProperty(h,"writeToString",{enumerable:!0,get:function(){return d.writeToString}}),Object.defineProperty(h,"writeToPath",{enumerable:!0,get:function(){return d.writeToPath}}),Object.defineProperty(h,"CsvFormatterStream",{enumerable:!0,get:function(){return d.CsvFormatterStream}}),Object.defineProperty(h,"FormatterOptions",{enumerable:!0,get:function(){return d.FormatterOptions}});var n=t("@fast-csv/parse");Object.defineProperty(h,"parse",{enumerable:!0,get:function(){return n.parse}}),Object.defineProperty(h,"parseString",{enumerable:!0,get:function(){return n.parseString}}),Object.defineProperty(h,"parseStream",{enumerable:!0,get:function(){return n.parseStream}}),Object.defineProperty(h,"parseFile",{enumerable:!0,get:function(){return n.parseFile}}),Object.defineProperty(h,"ParserOptions",{enumerable:!0,get:function(){return n.ParserOptions}}),Object.defineProperty(h,"CsvParserStream",{enumerable:!0,get:function(){return n.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(t,f,h){var d=t("safe-buffer").Buffer,n=t("readable-stream").Transform;function l(i){n.call(this),this._block=d.allocUnsafe(i),this._blockSize=i,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t("inherits")(l,n),l.prototype._transform=function(i,r,s){var c=null;try{this.update(i,r)}catch(u){c=u}s(c)},l.prototype._flush=function(i){var r=null;try{this.push(this.digest())}catch(s){r=s}i(r)},l.prototype.update=function(i,r){if((function(b,p){if(!d.isBuffer(b)&&typeof b!="string")throw new TypeError(p+" must be a string or a buffer")})(i,"Data"),this._finalized)throw new Error("Digest already called");d.isBuffer(i)||(i=d.from(i,r));for(var s=this._block,c=0;this._blockOffset+i.length-c>=this._blockSize;){for(var u=this._blockOffset;u<this._blockSize;)s[u++]=i[c++];this._update(),this._blockOffset=0}for(;c<i.length;)s[this._blockOffset++]=i[c++];for(var m=0,x=8*i.length;x>0;++m)this._length[m]+=x,(x=this._length[m]/4294967296|0)>0&&(this._length[m]-=4294967296*x);return this},l.prototype._update=function(){throw new Error("_update is not implemented")},l.prototype.digest=function(i){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var r=this._digest();i!==void 0&&(r=r.toString(i)),this._block.fill(0),this._blockOffset=0;for(var s=0;s<4;++s)this._length[s]=0;return r},l.prototype._digest=function(){throw new Error("_digest is not implemented")},f.exports=l},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(t,f,h){var d=h;d.utils=t("./hash/utils"),d.common=t("./hash/common"),d.sha=t("./hash/sha"),d.ripemd=t("./hash/ripemd"),d.hmac=t("./hash/hmac"),d.sha1=d.sha.sha1,d.sha256=d.sha.sha256,d.sha224=d.sha.sha224,d.sha384=d.sha.sha384,d.sha512=d.sha.sha512,d.ripemd160=d.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(t,f,h){var d=t("./utils"),n=t("minimalistic-assert");function l(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}h.BlockHash=l,l.prototype.update=function(i,r){if(i=d.toArray(i,r),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){var s=(i=this.pending).length%this._delta8;this.pending=i.slice(i.length-s,i.length),this.pending.length===0&&(this.pending=null),i=d.join32(i,0,i.length-s,this.endian);for(var c=0;c<i.length;c+=this._delta32)this._update(i,c,c+this._delta32)}return this},l.prototype.digest=function(i){return this.update(this._pad()),n(this.pending===null),this._digest(i)},l.prototype._pad=function(){var i=this.pendingTotal,r=this._delta8,s=r-(i+this.padLength)%r,c=new Array(s+this.padLength);c[0]=128;for(var u=1;u<s;u++)c[u]=0;if(i<<=3,this.endian==="big"){for(var m=8;m<this.padLength;m++)c[u++]=0;c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=i>>>24&255,c[u++]=i>>>16&255,c[u++]=i>>>8&255,c[u++]=255&i}else for(c[u++]=255&i,c[u++]=i>>>8&255,c[u++]=i>>>16&255,c[u++]=i>>>24&255,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,m=8;m<this.padLength;m++)c[u++]=0;return c}},{"./utils":437,"minimalistic-assert":453}],428:[function(t,f,h){var d=t("./utils"),n=t("minimalistic-assert");function l(i,r,s){if(!(this instanceof l))return new l(i,r,s);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(d.toArray(r,s))}f.exports=l,l.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),n(i.length<=this.blockSize);for(var r=i.length;r<this.blockSize;r++)i.push(0);for(r=0;r<i.length;r++)i[r]^=54;for(this.inner=new this.Hash().update(i),r=0;r<i.length;r++)i[r]^=106;this.outer=new this.Hash().update(i)},l.prototype.update=function(i,r){return this.inner.update(i,r),this},l.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)}},{"./utils":437,"minimalistic-assert":453}],429:[function(t,f,h){var d=t("./utils"),n=t("./common"),l=d.rotl32,i=d.sum32,r=d.sum32_3,s=d.sum32_4,c=n.BlockHash;function u(){if(!(this instanceof u))return new u;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function m(T,_,O,H){return T<=15?_^O^H:T<=31?_&O|~_&H:T<=47?(_|~O)^H:T<=63?_&H|O&~H:_^(O|~H)}function x(T){return T<=15?0:T<=31?1518500249:T<=47?1859775393:T<=63?2400959708:2840853838}function b(T){return T<=15?1352829926:T<=31?1548603684:T<=47?1836072691:T<=63?2053994217:0}d.inherits(u,c),h.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(T,_){for(var O=this.h[0],H=this.h[1],F=this.h[2],V=this.h[3],q=this.h[4],W=O,B=H,E=F,P=V,A=q,k=0;k<80;k++){var j=i(l(s(O,m(k,H,F,V),T[p[k]+_],x(k)),y[k]),q);O=q,q=V,V=l(F,10),F=H,H=j,j=i(l(s(W,m(79-k,B,E,P),T[v[k]+_],b(k)),N[k]),A),W=A,A=P,P=l(E,10),E=B,B=j}j=r(this.h[1],F,P),this.h[1]=r(this.h[2],V,A),this.h[2]=r(this.h[3],q,W),this.h[3]=r(this.h[4],O,B),this.h[4]=r(this.h[0],H,E),this.h[0]=j},u.prototype._digest=function(T){return T==="hex"?d.toHex32(this.h,"little"):d.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],N=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(t,f,h){h.sha1=t("./sha/1"),h.sha224=t("./sha/224"),h.sha256=t("./sha/256"),h.sha384=t("./sha/384"),h.sha512=t("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(t,f,h){var d=t("../utils"),n=t("../common"),l=t("./common"),i=d.rotl32,r=d.sum32,s=d.sum32_5,c=l.ft_1,u=n.BlockHash,m=[1518500249,1859775393,2400959708,3395469782];function x(){if(!(this instanceof x))return new x;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}d.inherits(x,u),f.exports=x,x.blockSize=512,x.outSize=160,x.hmacStrength=80,x.padLength=64,x.prototype._update=function(b,p){for(var v=this.W,y=0;y<16;y++)v[y]=b[p+y];for(;y<v.length;y++)v[y]=i(v[y-3]^v[y-8]^v[y-14]^v[y-16],1);var N=this.h[0],T=this.h[1],_=this.h[2],O=this.h[3],H=this.h[4];for(y=0;y<v.length;y++){var F=~~(y/20),V=s(i(N,5),c(F,T,_,O),H,v[y],m[F]);H=O,O=_,_=i(T,30),T=N,N=V}this.h[0]=r(this.h[0],N),this.h[1]=r(this.h[1],T),this.h[2]=r(this.h[2],_),this.h[3]=r(this.h[3],O),this.h[4]=r(this.h[4],H)},x.prototype._digest=function(b){return b==="hex"?d.toHex32(this.h,"big"):d.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(t,f,h){var d=t("../utils"),n=t("./256");function l(){if(!(this instanceof l))return new l;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}d.inherits(l,n),f.exports=l,l.blockSize=512,l.outSize=224,l.hmacStrength=192,l.padLength=64,l.prototype._digest=function(i){return i==="hex"?d.toHex32(this.h.slice(0,7),"big"):d.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(t,f,h){var d=t("../utils"),n=t("../common"),l=t("./common"),i=t("minimalistic-assert"),r=d.sum32,s=d.sum32_4,c=d.sum32_5,u=l.ch32,m=l.maj32,x=l.s0_256,b=l.s1_256,p=l.g0_256,v=l.g1_256,y=n.BlockHash,N=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function T(){if(!(this instanceof T))return new T;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=N,this.W=new Array(64)}d.inherits(T,y),f.exports=T,T.blockSize=512,T.outSize=256,T.hmacStrength=192,T.padLength=64,T.prototype._update=function(_,O){for(var H=this.W,F=0;F<16;F++)H[F]=_[O+F];for(;F<H.length;F++)H[F]=s(v(H[F-2]),H[F-7],p(H[F-15]),H[F-16]);var V=this.h[0],q=this.h[1],W=this.h[2],B=this.h[3],E=this.h[4],P=this.h[5],A=this.h[6],k=this.h[7];for(i(this.k.length===H.length),F=0;F<H.length;F++){var j=c(k,b(E),u(E,P,A),this.k[F],H[F]),S=r(x(V),m(V,q,W));k=A,A=P,P=E,E=r(B,j),B=W,W=q,q=V,V=r(j,S)}this.h[0]=r(this.h[0],V),this.h[1]=r(this.h[1],q),this.h[2]=r(this.h[2],W),this.h[3]=r(this.h[3],B),this.h[4]=r(this.h[4],E),this.h[5]=r(this.h[5],P),this.h[6]=r(this.h[6],A),this.h[7]=r(this.h[7],k)},T.prototype._digest=function(_){return _==="hex"?d.toHex32(this.h,"big"):d.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(t,f,h){var d=t("../utils"),n=t("./512");function l(){if(!(this instanceof l))return new l;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}d.inherits(l,n),f.exports=l,l.blockSize=1024,l.outSize=384,l.hmacStrength=192,l.padLength=128,l.prototype._digest=function(i){return i==="hex"?d.toHex32(this.h.slice(0,12),"big"):d.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(t,f,h){var d=t("../utils"),n=t("../common"),l=t("minimalistic-assert"),i=d.rotr64_hi,r=d.rotr64_lo,s=d.shr64_hi,c=d.shr64_lo,u=d.sum64,m=d.sum64_hi,x=d.sum64_lo,b=d.sum64_4_hi,p=d.sum64_4_lo,v=d.sum64_5_hi,y=d.sum64_5_lo,N=n.BlockHash,T=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;N.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=T,this.W=new Array(160)}function O(S,C,D,R,L){var Y=S&D^~S&L;return Y<0&&(Y+=4294967296),Y}function H(S,C,D,R,L,Y){var X=C&R^~C&Y;return X<0&&(X+=4294967296),X}function F(S,C,D,R,L){var Y=S&D^S&L^D&L;return Y<0&&(Y+=4294967296),Y}function V(S,C,D,R,L,Y){var X=C&R^C&Y^R&Y;return X<0&&(X+=4294967296),X}function q(S,C){var D=i(S,C,28)^i(C,S,2)^i(C,S,7);return D<0&&(D+=4294967296),D}function W(S,C){var D=r(S,C,28)^r(C,S,2)^r(C,S,7);return D<0&&(D+=4294967296),D}function B(S,C){var D=i(S,C,14)^i(S,C,18)^i(C,S,9);return D<0&&(D+=4294967296),D}function E(S,C){var D=r(S,C,14)^r(S,C,18)^r(C,S,9);return D<0&&(D+=4294967296),D}function P(S,C){var D=i(S,C,1)^i(S,C,8)^s(S,C,7);return D<0&&(D+=4294967296),D}function A(S,C){var D=r(S,C,1)^r(S,C,8)^c(S,C,7);return D<0&&(D+=4294967296),D}function k(S,C){var D=i(S,C,19)^i(C,S,29)^s(S,C,6);return D<0&&(D+=4294967296),D}function j(S,C){var D=r(S,C,19)^r(C,S,29)^c(S,C,6);return D<0&&(D+=4294967296),D}d.inherits(_,N),f.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(S,C){for(var D=this.W,R=0;R<32;R++)D[R]=S[C+R];for(;R<D.length;R+=2){var L=k(D[R-4],D[R-3]),Y=j(D[R-4],D[R-3]),X=D[R-14],ae=D[R-13],$=P(D[R-30],D[R-29]),Q=A(D[R-30],D[R-29]),z=D[R-32],M=D[R-31];D[R]=b(L,Y,X,ae,$,Q,z,M),D[R+1]=p(L,Y,X,ae,$,Q,z,M)}},_.prototype._update=function(S,C){this._prepareBlock(S,C);var D=this.W,R=this.h[0],L=this.h[1],Y=this.h[2],X=this.h[3],ae=this.h[4],$=this.h[5],Q=this.h[6],z=this.h[7],M=this.h[8],U=this.h[9],te=this.h[10],ie=this.h[11],se=this.h[12],le=this.h[13],Ne=this.h[14],ke=this.h[15];l(this.k.length===D.length);for(var Z=0;Z<D.length;Z+=2){var ce=Ne,ve=ke,De=B(M,U),Ae=E(M,U),Ie=O(M,U,te,ie,se),Ue=H(M,U,te,ie,se,le),Ge=this.k[Z],Le=this.k[Z+1],at=D[Z],ut=D[Z+1],Ce=v(ce,ve,De,Ae,Ie,Ue,Ge,Le,at,ut),it=y(ce,ve,De,Ae,Ie,Ue,Ge,Le,at,ut);ce=q(R,L),ve=W(R,L),De=F(R,L,Y,X,ae),Ae=V(R,L,Y,X,ae,$);var xt=m(ce,ve,De,Ae),jt=x(ce,ve,De,Ae);Ne=se,ke=le,se=te,le=ie,te=M,ie=U,M=m(Q,z,Ce,it),U=x(z,z,Ce,it),Q=ae,z=$,ae=Y,$=X,Y=R,X=L,R=m(Ce,it,xt,jt),L=x(Ce,it,xt,jt)}u(this.h,0,R,L),u(this.h,2,Y,X),u(this.h,4,ae,$),u(this.h,6,Q,z),u(this.h,8,M,U),u(this.h,10,te,ie),u(this.h,12,se,le),u(this.h,14,Ne,ke)},_.prototype._digest=function(S){return S==="hex"?d.toHex32(this.h,"big"):d.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(t,f,h){var d=t("../utils").rotr32;function n(r,s,c){return r&s^~r&c}function l(r,s,c){return r&s^r&c^s&c}function i(r,s,c){return r^s^c}h.ft_1=function(r,s,c,u){return r===0?n(s,c,u):r===1||r===3?i(s,c,u):r===2?l(s,c,u):void 0},h.ch32=n,h.maj32=l,h.p32=i,h.s0_256=function(r){return d(r,2)^d(r,13)^d(r,22)},h.s1_256=function(r){return d(r,6)^d(r,11)^d(r,25)},h.g0_256=function(r){return d(r,7)^d(r,18)^r>>>3},h.g1_256=function(r){return d(r,17)^d(r,19)^r>>>10}},{"../utils":437}],437:[function(t,f,h){var d=t("minimalistic-assert"),n=t("inherits");function l(c,u){return(64512&c.charCodeAt(u))==55296&&!(u<0||u+1>=c.length)&&(64512&c.charCodeAt(u+1))==56320}function i(c){return(c>>>24|c>>>8&65280|c<<8&16711680|(255&c)<<24)>>>0}function r(c){return c.length===1?"0"+c:c}function s(c){return c.length===7?"0"+c:c.length===6?"00"+c:c.length===5?"000"+c:c.length===4?"0000"+c:c.length===3?"00000"+c:c.length===2?"000000"+c:c.length===1?"0000000"+c:c}h.inherits=n,h.toArray=function(c,u){if(Array.isArray(c))return c.slice();if(!c)return[];var m=[];if(typeof c=="string")if(u){if(u==="hex")for((c=c.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(c="0"+c),b=0;b<c.length;b+=2)m.push(parseInt(c[b]+c[b+1],16))}else for(var x=0,b=0;b<c.length;b++){var p=c.charCodeAt(b);p<128?m[x++]=p:p<2048?(m[x++]=p>>6|192,m[x++]=63&p|128):l(c,b)?(p=65536+((1023&p)<<10)+(1023&c.charCodeAt(++b)),m[x++]=p>>18|240,m[x++]=p>>12&63|128,m[x++]=p>>6&63|128,m[x++]=63&p|128):(m[x++]=p>>12|224,m[x++]=p>>6&63|128,m[x++]=63&p|128)}else for(b=0;b<c.length;b++)m[b]=0|c[b];return m},h.toHex=function(c){for(var u="",m=0;m<c.length;m++)u+=r(c[m].toString(16));return u},h.htonl=i,h.toHex32=function(c,u){for(var m="",x=0;x<c.length;x++){var b=c[x];u==="little"&&(b=i(b)),m+=s(b.toString(16))}return m},h.zero2=r,h.zero8=s,h.join32=function(c,u,m,x){var b=m-u;d(b%4==0);for(var p=new Array(b/4),v=0,y=u;v<p.length;v++,y+=4){var N;N=x==="big"?c[y]<<24|c[y+1]<<16|c[y+2]<<8|c[y+3]:c[y+3]<<24|c[y+2]<<16|c[y+1]<<8|c[y],p[v]=N>>>0}return p},h.split32=function(c,u){for(var m=new Array(4*c.length),x=0,b=0;x<c.length;x++,b+=4){var p=c[x];u==="big"?(m[b]=p>>>24,m[b+1]=p>>>16&255,m[b+2]=p>>>8&255,m[b+3]=255&p):(m[b+3]=p>>>24,m[b+2]=p>>>16&255,m[b+1]=p>>>8&255,m[b]=255&p)}return m},h.rotr32=function(c,u){return c>>>u|c<<32-u},h.rotl32=function(c,u){return c<<u|c>>>32-u},h.sum32=function(c,u){return c+u>>>0},h.sum32_3=function(c,u,m){return c+u+m>>>0},h.sum32_4=function(c,u,m,x){return c+u+m+x>>>0},h.sum32_5=function(c,u,m,x,b){return c+u+m+x+b>>>0},h.sum64=function(c,u,m,x){var b=c[u],p=x+c[u+1]>>>0,v=(p<x?1:0)+m+b;c[u]=v>>>0,c[u+1]=p},h.sum64_hi=function(c,u,m,x){return(u+x>>>0<u?1:0)+c+m>>>0},h.sum64_lo=function(c,u,m,x){return u+x>>>0},h.sum64_4_hi=function(c,u,m,x,b,p,v,y){var N=0,T=u;return N+=(T=T+x>>>0)<u?1:0,N+=(T=T+p>>>0)<p?1:0,c+m+b+v+(N+=(T=T+y>>>0)<y?1:0)>>>0},h.sum64_4_lo=function(c,u,m,x,b,p,v,y){return u+x+p+y>>>0},h.sum64_5_hi=function(c,u,m,x,b,p,v,y,N,T){var _=0,O=u;return _+=(O=O+x>>>0)<u?1:0,_+=(O=O+p>>>0)<p?1:0,_+=(O=O+y>>>0)<y?1:0,c+m+b+v+N+(_+=(O=O+T>>>0)<T?1:0)>>>0},h.sum64_5_lo=function(c,u,m,x,b,p,v,y,N,T){return u+x+p+y+T>>>0},h.rotr64_hi=function(c,u,m){return(u<<32-m|c>>>m)>>>0},h.rotr64_lo=function(c,u,m){return(c<<32-m|u>>>m)>>>0},h.shr64_hi=function(c,u,m){return c>>>m},h.shr64_lo=function(c,u,m){return(c<<32-m|u>>>m)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(t,f,h){var d=t("hash.js"),n=t("minimalistic-crypto-utils"),l=t("minimalistic-assert");function i(r){if(!(this instanceof i))return new i(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=n.toArray(r.entropy,r.entropyEnc||"hex"),c=n.toArray(r.nonce,r.nonceEnc||"hex"),u=n.toArray(r.pers,r.persEnc||"hex");l(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,c,u)}f.exports=i,i.prototype._init=function(r,s,c){var u=r.concat(s).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var m=0;m<this.V.length;m++)this.K[m]=0,this.V[m]=1;this._update(u),this._reseed=1,this.reseedInterval=281474976710656},i.prototype._hmac=function(){return new d.hmac(this.hash,this.K)},i.prototype._update=function(r){var s=this._hmac().update(this.V).update([0]);r&&(s=s.update(r)),this.K=s.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},i.prototype.reseed=function(r,s,c,u){typeof s!="string"&&(u=c,c=s,s=null),r=n.toArray(r,s),c=n.toArray(c,u),l(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(c||[])),this._reseed=1},i.prototype.generate=function(r,s,c,u){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof s!="string"&&(u=c,c=s,s=null),c&&(c=n.toArray(c,u||"hex"),this._update(c));for(var m=[];m.length<r;)this.V=this._hmac().update(this.V).digest(),m=m.concat(this.V);var x=m.slice(0,r);return this._update(c),this._reseed++,n.encode(x,s)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(t,f,h){h.read=function(d,n,l,i,r){var s,c,u=8*r-i-1,m=(1<<u)-1,x=m>>1,b=-7,p=l?r-1:0,v=l?-1:1,y=d[n+p];for(p+=v,s=y&(1<<-b)-1,y>>=-b,b+=u;b>0;s=256*s+d[n+p],p+=v,b-=8);for(c=s&(1<<-b)-1,s>>=-b,b+=i;b>0;c=256*c+d[n+p],p+=v,b-=8);if(s===0)s=1-x;else{if(s===m)return c?NaN:1/0*(y?-1:1);c+=Math.pow(2,i),s-=x}return(y?-1:1)*c*Math.pow(2,s-i)},h.write=function(d,n,l,i,r,s){var c,u,m,x=8*s-r-1,b=(1<<x)-1,p=b>>1,v=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=i?0:s-1,N=i?1:-1,T=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,c=b):(c=Math.floor(Math.log(n)/Math.LN2),n*(m=Math.pow(2,-c))<1&&(c--,m*=2),(n+=c+p>=1?v/m:v*Math.pow(2,1-p))*m>=2&&(c++,m/=2),c+p>=b?(u=0,c=b):c+p>=1?(u=(n*m-1)*Math.pow(2,r),c+=p):(u=n*Math.pow(2,p-1)*Math.pow(2,r),c=0));r>=8;d[l+y]=255&u,y+=N,u/=256,r-=8);for(c=c<<r|u,x+=r;x>0;d[l+y]=255&c,y+=N,c/=256,x-=8);d[l+y-N]|=128*T}},{}],440:[function(t,f,h){typeof Object.create=="function"?f.exports=function(d,n){n&&(d.super_=n,d.prototype=Object.create(n.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:f.exports=function(d,n){if(n){d.super_=n;var l=function(){};l.prototype=n.prototype,d.prototype=new l,d.prototype.constructor=d}}},{}],441:[function(t,f,h){(function(d,n,l,i,r,s,c,u){(function(){(function(m){typeof h=="object"&&f!==void 0?f.exports=m():(typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:this).JSZip=m()})((function(){return(function m(x,b,p){function v(T,_){if(!b[T]){if(!x[T]){var O=typeof t=="function"&&t;if(!_&&O)return O(T,!0);if(y)return y(T,!0);var H=new Error("Cannot find module '"+T+"'");throw H.code="MODULE_NOT_FOUND",H}var F=b[T]={exports:{}};x[T][0].call(F.exports,(function(V){return v(x[T][1][V]||V)}),F,F.exports,m,x,b,p)}return b[T].exports}for(var y=typeof t=="function"&&t,N=0;N<p.length;N++)v(p[N]);return v})({1:[function(m,x,b){var p=m("./utils"),v=m("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";b.encode=function(N){for(var T,_,O,H,F,V,q,W=[],B=0,E=N.length,P=E,A=p.getTypeOf(N)!=="string";B<N.length;)P=E-B,O=A?(T=N[B++],_=B<E?N[B++]:0,B<E?N[B++]:0):(T=N.charCodeAt(B++),_=B<E?N.charCodeAt(B++):0,B<E?N.charCodeAt(B++):0),H=T>>2,F=(3&T)<<4|_>>4,V=1<P?(15&_)<<2|O>>6:64,q=2<P?63&O:64,W.push(y.charAt(H)+y.charAt(F)+y.charAt(V)+y.charAt(q));return W.join("")},b.decode=function(N){var T,_,O,H,F,V,q=0,W=0,B="data:";if(N.substr(0,B.length)===B)throw new Error("Invalid base64 input, it looks like a data url.");var E,P=3*(N=N.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(N.charAt(N.length-1)===y.charAt(64)&&P--,N.charAt(N.length-2)===y.charAt(64)&&P--,P%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=v.uint8array?new Uint8Array(0|P):new Array(0|P);q<N.length;)T=y.indexOf(N.charAt(q++))<<2|(H=y.indexOf(N.charAt(q++)))>>4,_=(15&H)<<4|(F=y.indexOf(N.charAt(q++)))>>2,O=(3&F)<<6|(V=y.indexOf(N.charAt(q++))),E[W++]=T,F!==64&&(E[W++]=_),V!==64&&(E[W++]=O);return E}},{"./support":30,"./utils":32}],2:[function(m,x,b){var p=m("./external"),v=m("./stream/DataWorker"),y=m("./stream/Crc32Probe"),N=m("./stream/DataLengthProbe");function T(_,O,H,F,V){this.compressedSize=_,this.uncompressedSize=O,this.crc32=H,this.compression=F,this.compressedContent=V}T.prototype={getContentWorker:function(){var _=new v(p.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new N("data_length")),O=this;return _.on("end",(function(){if(this.streamInfo.data_length!==O.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),_},getCompressedWorker:function(){return new v(p.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},T.createWorkerFrom=function(_,O,H){return _.pipe(new y).pipe(new N("uncompressedSize")).pipe(O.compressWorker(H)).pipe(new N("compressedSize")).withStreamInfo("compression",O)},x.exports=T},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(m,x,b){var p=m("./stream/GenericWorker");b.STORE={magic:"\0\0",compressWorker:function(){return new p("STORE compression")},uncompressWorker:function(){return new p("STORE decompression")}},b.DEFLATE=m("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(m,x,b){var p=m("./utils"),v=(function(){for(var y,N=[],T=0;T<256;T++){y=T;for(var _=0;_<8;_++)y=1&y?3988292384^y>>>1:y>>>1;N[T]=y}return N})();x.exports=function(y,N){return y!==void 0&&y.length?p.getTypeOf(y)!=="string"?(function(T,_,O,H){var F=v,V=0+O;T^=-1;for(var q=0;q<V;q++)T=T>>>8^F[255&(T^_[q])];return-1^T})(0|N,y,y.length):(function(T,_,O,H){var F=v,V=0+O;T^=-1;for(var q=0;q<V;q++)T=T>>>8^F[255&(T^_.charCodeAt(q))];return-1^T})(0|N,y,y.length):0}},{"./utils":32}],5:[function(m,x,b){b.base64=!1,b.binary=!1,b.dir=!1,b.createFolders=!0,b.date=null,b.compression=null,b.compressionOptions=null,b.comment=null,b.unixPermissions=null,b.dosPermissions=null},{}],6:[function(m,x,b){var p;p=typeof Promise<"u"?Promise:m("lie"),x.exports={Promise:p}},{lie:37}],7:[function(m,x,b){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",v=m("pako"),y=m("./utils"),N=m("./stream/GenericWorker"),T=p?"uint8array":"array";function _(O,H){N.call(this,"FlateWorker/"+O),this._pako=null,this._pakoAction=O,this._pakoOptions=H,this.meta={}}b.magic="\b\0",y.inherits(_,N),_.prototype.processChunk=function(O){this.meta=O.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(T,O.data),!1)},_.prototype.flush=function(){N.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){N.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new v[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var O=this;this._pako.onData=function(H){O.push({data:H,meta:O.meta})}},b.compressWorker=function(O){return new _("Deflate",O)},b.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(m,x,b){function p(F,V){var q,W="";for(q=0;q<V;q++)W+=String.fromCharCode(255&F),F>>>=8;return W}function v(F,V,q,W,B,E){var P,A,k=F.file,j=F.compression,S=E!==T.utf8encode,C=y.transformTo("string",E(k.name)),D=y.transformTo("string",T.utf8encode(k.name)),R=k.comment,L=y.transformTo("string",E(R)),Y=y.transformTo("string",T.utf8encode(R)),X=D.length!==k.name.length,ae=Y.length!==R.length,$="",Q="",z="",M=k.dir,U=k.date,te={crc32:0,compressedSize:0,uncompressedSize:0};V&&!q||(te.crc32=F.crc32,te.compressedSize=F.compressedSize,te.uncompressedSize=F.uncompressedSize);var ie=0;V&&(ie|=8),S||!X&&!ae||(ie|=2048);var se=0,le=0;M&&(se|=16),B==="UNIX"?(le=798,se|=(function(ke,Z){var ce=ke;return ke||(ce=Z?16893:33204),(65535&ce)<<16})(k.unixPermissions,M)):(le=20,se|=(function(ke){return 63&(ke||0)})(k.dosPermissions)),P=U.getUTCHours(),P<<=6,P|=U.getUTCMinutes(),P<<=5,P|=U.getUTCSeconds()/2,A=U.getUTCFullYear()-1980,A<<=4,A|=U.getUTCMonth()+1,A<<=5,A|=U.getUTCDate(),X&&(Q=p(1,1)+p(_(C),4)+D,$+="up"+p(Q.length,2)+Q),ae&&(z=p(1,1)+p(_(L),4)+Y,$+="uc"+p(z.length,2)+z);var Ne="";return Ne+=`
\0`,Ne+=p(ie,2),Ne+=j.magic,Ne+=p(P,2),Ne+=p(A,2),Ne+=p(te.crc32,4),Ne+=p(te.compressedSize,4),Ne+=p(te.uncompressedSize,4),Ne+=p(C.length,2),Ne+=p($.length,2),{fileRecord:O.LOCAL_FILE_HEADER+Ne+C+$,dirRecord:O.CENTRAL_FILE_HEADER+p(le,2)+Ne+p(L.length,2)+"\0\0\0\0"+p(se,4)+p(W,4)+C+$+L}}var y=m("../utils"),N=m("../stream/GenericWorker"),T=m("../utf8"),_=m("../crc32"),O=m("../signature");function H(F,V,q,W){N.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=V,this.zipPlatform=q,this.encodeFileName=W,this.streamFiles=F,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(H,N),H.prototype.push=function(F){var V=F.meta.percent||0,q=this.entriesCount,W=this._sources.length;this.accumulate?this.contentBuffer.push(F):(this.bytesWritten+=F.data.length,N.prototype.push.call(this,{data:F.data,meta:{currentFile:this.currentFile,percent:q?(V+100*(q-W-1))/q:100}}))},H.prototype.openedSource=function(F){this.currentSourceOffset=this.bytesWritten,this.currentFile=F.file.name;var V=this.streamFiles&&!F.file.dir;if(V){var q=v(F,V,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:q.fileRecord,meta:{percent:0}})}else this.accumulate=!0},H.prototype.closedSource=function(F){this.accumulate=!1;var V=this.streamFiles&&!F.file.dir,q=v(F,V,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(q.dirRecord),V)this.push({data:(function(W){return O.DATA_DESCRIPTOR+p(W.crc32,4)+p(W.compressedSize,4)+p(W.uncompressedSize,4)})(F),meta:{percent:100}});else for(this.push({data:q.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},H.prototype.flush=function(){for(var F=this.bytesWritten,V=0;V<this.dirRecords.length;V++)this.push({data:this.dirRecords[V],meta:{percent:100}});var q=this.bytesWritten-F,W=(function(B,E,P,A,k){var j=y.transformTo("string",k(A));return O.CENTRAL_DIRECTORY_END+"\0\0\0\0"+p(B,2)+p(B,2)+p(E,4)+p(P,4)+p(j.length,2)+j})(this.dirRecords.length,q,F,this.zipComment,this.encodeFileName);this.push({data:W,meta:{percent:100}})},H.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},H.prototype.registerPrevious=function(F){this._sources.push(F);var V=this;return F.on("data",(function(q){V.processChunk(q)})),F.on("end",(function(){V.closedSource(V.previous.streamInfo),V._sources.length?V.prepareNextSource():V.end()})),F.on("error",(function(q){V.error(q)})),this},H.prototype.resume=function(){return!!N.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},H.prototype.error=function(F){var V=this._sources;if(!N.prototype.error.call(this,F))return!1;for(var q=0;q<V.length;q++)try{V[q].error(F)}catch{}return!0},H.prototype.lock=function(){N.prototype.lock.call(this);for(var F=this._sources,V=0;V<F.length;V++)F[V].lock()},x.exports=H},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(m,x,b){var p=m("../compressions"),v=m("./ZipFileWorker");b.generateWorker=function(y,N,T){var _=new v(N.streamFiles,T,N.platform,N.encodeFileName),O=0;try{y.forEach((function(H,F){O++;var V=(function(E,P){var A=E||P,k=p[A];if(!k)throw new Error(A+" is not a valid compression method !");return k})(F.options.compression,N.compression),q=F.options.compressionOptions||N.compressionOptions||{},W=F.dir,B=F.date;F._compressWorker(V,q).withStreamInfo("file",{name:H,dir:W,date:B,comment:F.comment||"",unixPermissions:F.unixPermissions,dosPermissions:F.dosPermissions}).pipe(_)})),_.entriesCount=O}catch(H){_.error(H)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(m,x,b){function p(){if(!(this instanceof p))return new p;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var v=new p;for(var y in this)typeof this[y]!="function"&&(v[y]=this[y]);return v}}(p.prototype=m("./object")).loadAsync=m("./load"),p.support=m("./support"),p.defaults=m("./defaults"),p.version="3.10.1",p.loadAsync=function(v,y){return new p().loadAsync(v,y)},p.external=m("./external"),x.exports=p},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(m,x,b){var p=m("./utils"),v=m("./external"),y=m("./utf8"),N=m("./zipEntries"),T=m("./stream/Crc32Probe"),_=m("./nodejsUtils");function O(H){return new v.Promise((function(F,V){var q=H.decompressed.getContentWorker().pipe(new T);q.on("error",(function(W){V(W)})).on("end",(function(){q.streamInfo.crc32!==H.decompressed.crc32?V(new Error("Corrupted zip : CRC32 mismatch")):F()})).resume()}))}x.exports=function(H,F){var V=this;return F=p.extend(F||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),_.isNode&&_.isStream(H)?v.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):p.prepareContent("the loaded zip file",H,!0,F.optimizedBinaryString,F.base64).then((function(q){var W=new N(F);return W.load(q),W})).then((function(q){var W=[v.Promise.resolve(q)],B=q.files;if(F.checkCRC32)for(var E=0;E<B.length;E++)W.push(O(B[E]));return v.Promise.all(W)})).then((function(q){for(var W=q.shift(),B=W.files,E=0;E<B.length;E++){var P=B[E],A=P.fileNameStr,k=p.resolve(P.fileNameStr);V.file(k,P.decompressed,{binary:!0,optimizedBinaryString:!0,date:P.date,dir:P.dir,comment:P.fileCommentStr.length?P.fileCommentStr:null,unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions,createFolders:F.createFolders}),P.dir||(V.file(k).unsafeOriginalName=A)}return W.zipComment.length&&(V.comment=W.zipComment),V}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(m,x,b){var p=m("../utils"),v=m("../stream/GenericWorker");function y(N,T){v.call(this,"Nodejs stream input adapter for "+N),this._upstreamEnded=!1,this._bindStream(T)}p.inherits(y,v),y.prototype._bindStream=function(N){var T=this;(this._stream=N).pause(),N.on("data",(function(_){T.push({data:_,meta:{percent:0}})})).on("error",(function(_){T.isPaused?this.generatedError=_:T.error(_)})).on("end",(function(){T.isPaused?T._upstreamEnded=!0:T.end()}))},y.prototype.pause=function(){return!!v.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},x.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(m,x,b){var p=m("readable-stream").Readable;function v(y,N,T){p.call(this,N),this._helper=y;var _=this;y.on("data",(function(O,H){_.push(O)||_._helper.pause(),T&&T(H)})).on("error",(function(O){_.emit("error",O)})).on("end",(function(){_.push(null)}))}m("../utils").inherits(v,p),v.prototype._read=function(){this._helper.resume()},x.exports=v},{"../utils":32,"readable-stream":16}],14:[function(m,x,b){x.exports={isNode:l!==void 0,newBufferFrom:function(p,v){if(l.from&&l.from!==Uint8Array.from)return l.from(p,v);if(typeof p=="number")throw new Error('The "data" argument must not be a number');return new l(p,v)},allocBuffer:function(p){if(l.alloc)return l.alloc(p);var v=new l(p);return v.fill(0),v},isBuffer:function(p){return l.isBuffer(p)},isStream:function(p){return p&&typeof p.on=="function"&&typeof p.pause=="function"&&typeof p.resume=="function"}}},{}],15:[function(m,x,b){function p(k,j,S){var C,D=y.getTypeOf(j),R=y.extend(S||{},_);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&16384&R.unixPermissions&&(R.dir=!0),R.dosPermissions&&16&R.dosPermissions&&(R.dir=!0),R.dir&&(k=B(k)),R.createFolders&&(C=W(k))&&E.call(this,C,!0);var L=D==="string"&&R.binary===!1&&R.base64===!1;S&&S.binary!==void 0||(R.binary=!L),(j instanceof O&&j.uncompressedSize===0||R.dir||!j||j.length===0)&&(R.base64=!1,R.binary=!0,j="",R.compression="STORE",D="string");var Y;Y=j instanceof O||j instanceof N?j:V.isNode&&V.isStream(j)?new q(k,j):y.prepareContent(k,j,R.binary,R.optimizedBinaryString,R.base64);var X=new H(k,Y,R);this.files[k]=X}var v=m("./utf8"),y=m("./utils"),N=m("./stream/GenericWorker"),T=m("./stream/StreamHelper"),_=m("./defaults"),O=m("./compressedObject"),H=m("./zipObject"),F=m("./generate"),V=m("./nodejsUtils"),q=m("./nodejs/NodejsStreamInputAdapter"),W=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var j=k.lastIndexOf("/");return 0<j?k.substring(0,j):""},B=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},E=function(k,j){return j=j!==void 0?j:_.createFolders,k=B(k),this.files[k]||p.call(this,k,null,{dir:!0,createFolders:j}),this.files[k]};function P(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var j,S,C;for(j in this.files)C=this.files[j],(S=j.slice(this.root.length,j.length))&&j.slice(0,this.root.length)===this.root&&k(S,C)},filter:function(k){var j=[];return this.forEach((function(S,C){k(S,C)&&j.push(C)})),j},file:function(k,j,S){if(arguments.length!==1)return k=this.root+k,p.call(this,k,j,S),this;if(P(k)){var C=k;return this.filter((function(R,L){return!L.dir&&C.test(R)}))}var D=this.files[this.root+k];return D&&!D.dir?D:null},folder:function(k){if(!k)return this;if(P(k))return this.filter((function(D,R){return R.dir&&k.test(D)}));var j=this.root+k,S=E.call(this,j),C=this.clone();return C.root=S.name,C},remove:function(k){k=this.root+k;var j=this.files[k];if(j||(k.slice(-1)!=="/"&&(k+="/"),j=this.files[k]),j&&!j.dir)delete this.files[k];else for(var S=this.filter((function(D,R){return R.name.slice(0,k.length)===k})),C=0;C<S.length;C++)delete this.files[S[C].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var j,S={};try{if((S=y.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:v.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");y.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var C=S.comment||this.comment||"";j=F.generateWorker(this,S,C)}catch(D){(j=new N("error")).error(D)}return new T(j,S.type||"string",S.mimeType)},generateAsync:function(k,j){return this.generateInternalStream(k).accumulate(j)},generateNodeStream:function(k,j){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(j)}};x.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(m,x,b){x.exports=m("stream")},{stream:void 0}],17:[function(m,x,b){var p=m("./DataReader");function v(y){p.call(this,y);for(var N=0;N<this.data.length;N++)y[N]=255&y[N]}m("../utils").inherits(v,p),v.prototype.byteAt=function(y){return this.data[this.zero+y]},v.prototype.lastIndexOfSignature=function(y){for(var N=y.charCodeAt(0),T=y.charCodeAt(1),_=y.charCodeAt(2),O=y.charCodeAt(3),H=this.length-4;0<=H;--H)if(this.data[H]===N&&this.data[H+1]===T&&this.data[H+2]===_&&this.data[H+3]===O)return H-this.zero;return-1},v.prototype.readAndCheckSignature=function(y){var N=y.charCodeAt(0),T=y.charCodeAt(1),_=y.charCodeAt(2),O=y.charCodeAt(3),H=this.readData(4);return N===H[0]&&T===H[1]&&_===H[2]&&O===H[3]},v.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var N=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,N},x.exports=v},{"../utils":32,"./DataReader":18}],18:[function(m,x,b){var p=m("../utils");function v(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}v.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var N,T=0;for(this.checkOffset(y),N=this.index+y-1;N>=this.index;N--)T=(T<<8)+this.byteAt(N);return this.index+=y,T},readString:function(y){return p.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},x.exports=v},{"../utils":32}],19:[function(m,x,b){var p=m("./Uint8ArrayReader");function v(y){p.call(this,y)}m("../utils").inherits(v,p),v.prototype.readData=function(y){this.checkOffset(y);var N=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,N},x.exports=v},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(m,x,b){var p=m("./DataReader");function v(y){p.call(this,y)}m("../utils").inherits(v,p),v.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},v.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},v.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},v.prototype.readData=function(y){this.checkOffset(y);var N=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,N},x.exports=v},{"../utils":32,"./DataReader":18}],21:[function(m,x,b){var p=m("./ArrayReader");function v(y){p.call(this,y)}m("../utils").inherits(v,p),v.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var N=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,N},x.exports=v},{"../utils":32,"./ArrayReader":17}],22:[function(m,x,b){var p=m("../utils"),v=m("../support"),y=m("./ArrayReader"),N=m("./StringReader"),T=m("./NodeBufferReader"),_=m("./Uint8ArrayReader");x.exports=function(O){var H=p.getTypeOf(O);return p.checkSupport(H),H!=="string"||v.uint8array?H==="nodebuffer"?new T(O):v.uint8array?new _(p.transformTo("uint8array",O)):new y(p.transformTo("array",O)):new N(O)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(m,x,b){b.LOCAL_FILE_HEADER="PK",b.CENTRAL_FILE_HEADER="PK",b.CENTRAL_DIRECTORY_END="PK",b.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",b.ZIP64_CENTRAL_DIRECTORY_END="PK",b.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(m,x,b){var p=m("./GenericWorker"),v=m("../utils");function y(N){p.call(this,"ConvertWorker to "+N),this.destType=N}v.inherits(y,p),y.prototype.processChunk=function(N){this.push({data:v.transformTo(this.destType,N.data),meta:N.meta})},x.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(m,x,b){var p=m("./GenericWorker"),v=m("../crc32");function y(){p.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}m("../utils").inherits(y,p),y.prototype.processChunk=function(N){this.streamInfo.crc32=v(N.data,this.streamInfo.crc32||0),this.push(N)},x.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(m,x,b){var p=m("../utils"),v=m("./GenericWorker");function y(N){v.call(this,"DataLengthProbe for "+N),this.propName=N,this.withStreamInfo(N,0)}p.inherits(y,v),y.prototype.processChunk=function(N){if(N){var T=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=T+N.data.length}v.prototype.processChunk.call(this,N)},x.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(m,x,b){var p=m("../utils"),v=m("./GenericWorker");function y(N){v.call(this,"DataWorker");var T=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,N.then((function(_){T.dataIsReady=!0,T.data=_,T.max=_&&_.length||0,T.type=p.getTypeOf(_),T.isPaused||T._tickAndRepeat()}),(function(_){T.error(_)}))}p.inherits(y,v),y.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,p.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(p.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var N=null,T=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":N=this.data.substring(this.index,T);break;case"uint8array":N=this.data.subarray(this.index,T);break;case"array":case"nodebuffer":N=this.data.slice(this.index,T)}return this.index=T,this.push({data:N,meta:{percent:this.max?this.index/this.max*100:0}})},x.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(m,x,b){function p(v){this.name=v||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}p.prototype={push:function(v){this.emit("data",v)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(v){this.emit("error",v)}return!0},error:function(v){return!this.isFinished&&(this.isPaused?this.generatedError=v:(this.isFinished=!0,this.emit("error",v),this.previous&&this.previous.error(v),this.cleanUp()),!0)},on:function(v,y){return this._listeners[v].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(v,y){if(this._listeners[v])for(var N=0;N<this._listeners[v].length;N++)this._listeners[v][N].call(this,y)},pipe:function(v){return v.registerPrevious(this)},registerPrevious:function(v){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=v.streamInfo,this.mergeStreamInfo(),this.previous=v;var y=this;return v.on("data",(function(N){y.processChunk(N)})),v.on("end",(function(){y.end()})),v.on("error",(function(N){y.error(N)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var v=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),v=!0),this.previous&&this.previous.resume(),!v},flush:function(){},processChunk:function(v){this.push(v)},withStreamInfo:function(v,y){return this.extraStreamInfo[v]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var v in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,v)&&(this.streamInfo[v]=this.extraStreamInfo[v])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var v="Worker "+this.name;return this.previous?this.previous+" -> "+v:v}},x.exports=p},{}],29:[function(m,x,b){var p=m("../utils"),v=m("./ConvertWorker"),y=m("./GenericWorker"),N=m("../base64"),T=m("../support"),_=m("../external"),O=null;if(T.nodestream)try{O=m("../nodejs/NodejsStreamOutputAdapter")}catch{}function H(F,V,q){var W=V;switch(V){case"blob":case"arraybuffer":W="uint8array";break;case"base64":W="string"}try{this._internalType=W,this._outputType=V,this._mimeType=q,p.checkSupport(W),this._worker=F.pipe(new v(W)),F.lock()}catch(B){this._worker=new y("error"),this._worker.error(B)}}H.prototype={accumulate:function(F){return(function(V,q){return new _.Promise((function(W,B){var E=[],P=V._internalType,A=V._outputType,k=V._mimeType;V.on("data",(function(j,S){E.push(j),q&&q(S)})).on("error",(function(j){E=[],B(j)})).on("end",(function(){try{var j=(function(S,C,D){switch(S){case"blob":return p.newBlob(p.transformTo("arraybuffer",C),D);case"base64":return N.encode(C);default:return p.transformTo(S,C)}})(A,(function(S,C){var D,R=0,L=null,Y=0;for(D=0;D<C.length;D++)Y+=C[D].length;switch(S){case"string":return C.join("");case"array":return Array.prototype.concat.apply([],C);case"uint8array":for(L=new Uint8Array(Y),D=0;D<C.length;D++)L.set(C[D],R),R+=C[D].length;return L;case"nodebuffer":return l.concat(C);default:throw new Error("concat : unsupported type '"+S+"'")}})(P,E),k);W(j)}catch(S){B(S)}E=[]})).resume()}))})(this,F)},on:function(F,V){var q=this;return F==="data"?this._worker.on(F,(function(W){V.call(q,W.data,W.meta)})):this._worker.on(F,(function(){p.delay(V,arguments,q)})),this},resume:function(){return p.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(F){if(p.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new O(this,{objectMode:this._outputType!=="nodebuffer"},F)}},x.exports=H},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(m,x,b){if(b.base64=!0,b.array=!0,b.string=!0,b.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",b.nodebuffer=l!==void 0,b.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")b.blob=!1;else{var p=new ArrayBuffer(0);try{b.blob=new Blob([p],{type:"application/zip"}).size===0}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);v.append(p),b.blob=v.getBlob("application/zip").size===0}catch{b.blob=!1}}}try{b.nodestream=!!m("readable-stream").Readable}catch{b.nodestream=!1}},{"readable-stream":16}],31:[function(m,x,b){for(var p=m("./utils"),v=m("./support"),y=m("./nodejsUtils"),N=m("./stream/GenericWorker"),T=new Array(256),_=0;_<256;_++)T[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function O(){N.call(this,"utf-8 decode"),this.leftOver=null}function H(){N.call(this,"utf-8 encode")}T[254]=T[254]=1,b.utf8encode=function(F){return v.nodebuffer?y.newBufferFrom(F,"utf-8"):(function(V){var q,W,B,E,P,A=V.length,k=0;for(E=0;E<A;E++)(64512&(W=V.charCodeAt(E)))==55296&&E+1<A&&(64512&(B=V.charCodeAt(E+1)))==56320&&(W=65536+(W-55296<<10)+(B-56320),E++),k+=W<128?1:W<2048?2:W<65536?3:4;for(q=v.uint8array?new Uint8Array(k):new Array(k),E=P=0;P<k;E++)(64512&(W=V.charCodeAt(E)))==55296&&E+1<A&&(64512&(B=V.charCodeAt(E+1)))==56320&&(W=65536+(W-55296<<10)+(B-56320),E++),W<128?q[P++]=W:(W<2048?q[P++]=192|W>>>6:(W<65536?q[P++]=224|W>>>12:(q[P++]=240|W>>>18,q[P++]=128|W>>>12&63),q[P++]=128|W>>>6&63),q[P++]=128|63&W);return q})(F)},b.utf8decode=function(F){return v.nodebuffer?p.transformTo("nodebuffer",F).toString("utf-8"):(function(V){var q,W,B,E,P=V.length,A=new Array(2*P);for(q=W=0;q<P;)if((B=V[q++])<128)A[W++]=B;else if(4<(E=T[B]))A[W++]=65533,q+=E-1;else{for(B&=E===2?31:E===3?15:7;1<E&&q<P;)B=B<<6|63&V[q++],E--;1<E?A[W++]=65533:B<65536?A[W++]=B:(B-=65536,A[W++]=55296|B>>10&1023,A[W++]=56320|1023&B)}return A.length!==W&&(A.subarray?A=A.subarray(0,W):A.length=W),p.applyFromCharCode(A)})(F=p.transformTo(v.uint8array?"uint8array":"array",F))},p.inherits(O,N),O.prototype.processChunk=function(F){var V=p.transformTo(v.uint8array?"uint8array":"array",F.data);if(this.leftOver&&this.leftOver.length){if(v.uint8array){var q=V;(V=new Uint8Array(q.length+this.leftOver.length)).set(this.leftOver,0),V.set(q,this.leftOver.length)}else V=this.leftOver.concat(V);this.leftOver=null}var W=(function(E,P){var A;for((P=P||E.length)>E.length&&(P=E.length),A=P-1;0<=A&&(192&E[A])==128;)A--;return A<0||A===0?P:A+T[E[A]]>P?A:P})(V),B=V;W!==V.length&&(v.uint8array?(B=V.subarray(0,W),this.leftOver=V.subarray(W,V.length)):(B=V.slice(0,W),this.leftOver=V.slice(W,V.length))),this.push({data:b.utf8decode(B),meta:F.meta})},O.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:b.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},b.Utf8DecodeWorker=O,p.inherits(H,N),H.prototype.processChunk=function(F){this.push({data:b.utf8encode(F.data),meta:F.meta})},b.Utf8EncodeWorker=H},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(m,x,b){var p=m("./support"),v=m("./base64"),y=m("./nodejsUtils"),N=m("./external");function T(q){return q}function _(q,W){for(var B=0;B<q.length;++B)W[B]=255&q.charCodeAt(B);return W}m("setimmediate"),b.newBlob=function(q,W){b.checkSupport("blob");try{return new Blob([q],{type:W})}catch{try{var B=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return B.append(q),B.getBlob(W)}catch{throw new Error("Bug : can't construct the Blob.")}}};var O={stringifyByChunk:function(q,W,B){var E=[],P=0,A=q.length;if(A<=B)return String.fromCharCode.apply(null,q);for(;P<A;)W==="array"||W==="nodebuffer"?E.push(String.fromCharCode.apply(null,q.slice(P,Math.min(P+B,A)))):E.push(String.fromCharCode.apply(null,q.subarray(P,Math.min(P+B,A)))),P+=B;return E.join("")},stringifyByChar:function(q){for(var W="",B=0;B<q.length;B++)W+=String.fromCharCode(q[B]);return W},applyCanBeUsed:{uint8array:(function(){try{return p.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return p.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}})()}};function H(q){var W=65536,B=b.getTypeOf(q),E=!0;if(B==="uint8array"?E=O.applyCanBeUsed.uint8array:B==="nodebuffer"&&(E=O.applyCanBeUsed.nodebuffer),E)for(;1<W;)try{return O.stringifyByChunk(q,B,W)}catch{W=Math.floor(W/2)}return O.stringifyByChar(q)}function F(q,W){for(var B=0;B<q.length;B++)W[B]=q[B];return W}b.applyFromCharCode=H;var V={};V.string={string:T,array:function(q){return _(q,new Array(q.length))},arraybuffer:function(q){return V.string.uint8array(q).buffer},uint8array:function(q){return _(q,new Uint8Array(q.length))},nodebuffer:function(q){return _(q,y.allocBuffer(q.length))}},V.array={string:H,array:T,arraybuffer:function(q){return new Uint8Array(q).buffer},uint8array:function(q){return new Uint8Array(q)},nodebuffer:function(q){return y.newBufferFrom(q)}},V.arraybuffer={string:function(q){return H(new Uint8Array(q))},array:function(q){return F(new Uint8Array(q),new Array(q.byteLength))},arraybuffer:T,uint8array:function(q){return new Uint8Array(q)},nodebuffer:function(q){return y.newBufferFrom(new Uint8Array(q))}},V.uint8array={string:H,array:function(q){return F(q,new Array(q.length))},arraybuffer:function(q){return q.buffer},uint8array:T,nodebuffer:function(q){return y.newBufferFrom(q)}},V.nodebuffer={string:H,array:function(q){return F(q,new Array(q.length))},arraybuffer:function(q){return V.nodebuffer.uint8array(q).buffer},uint8array:function(q){return F(q,new Uint8Array(q.length))},nodebuffer:T},b.transformTo=function(q,W){if(W=W||"",!q)return W;b.checkSupport(q);var B=b.getTypeOf(W);return V[B][q](W)},b.resolve=function(q){for(var W=q.split("/"),B=[],E=0;E<W.length;E++){var P=W[E];P==="."||P===""&&E!==0&&E!==W.length-1||(P===".."?B.pop():B.push(P))}return B.join("/")},b.getTypeOf=function(q){return typeof q=="string"?"string":Object.prototype.toString.call(q)==="[object Array]"?"array":p.nodebuffer&&y.isBuffer(q)?"nodebuffer":p.uint8array&&q instanceof Uint8Array?"uint8array":p.arraybuffer&&q instanceof ArrayBuffer?"arraybuffer":void 0},b.checkSupport=function(q){if(!p[q.toLowerCase()])throw new Error(q+" is not supported by this platform")},b.MAX_VALUE_16BITS=65535,b.MAX_VALUE_32BITS=-1,b.pretty=function(q){var W,B,E="";for(B=0;B<(q||"").length;B++)E+="\\x"+((W=q.charCodeAt(B))<16?"0":"")+W.toString(16).toUpperCase();return E},b.delay=function(q,W,B){u((function(){q.apply(B||null,W||[])}))},b.inherits=function(q,W){function B(){}B.prototype=W.prototype,q.prototype=new B},b.extend=function(){var q,W,B={};for(q=0;q<arguments.length;q++)for(W in arguments[q])Object.prototype.hasOwnProperty.call(arguments[q],W)&&B[W]===void 0&&(B[W]=arguments[q][W]);return B},b.prepareContent=function(q,W,B,E,P){return N.Promise.resolve(W).then((function(A){return p.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new N.Promise((function(k,j){var S=new FileReader;S.onload=function(C){k(C.target.result)},S.onerror=function(C){j(C.target.error)},S.readAsArrayBuffer(A)})):A})).then((function(A){var k=b.getTypeOf(A);return k?(k==="arraybuffer"?A=b.transformTo("uint8array",A):k==="string"&&(P?A=v.decode(A):B&&E!==!0&&(A=(function(j){return _(j,p.uint8array?new Uint8Array(j.length):new Array(j.length))})(A))),A):N.Promise.reject(new Error("Can't read the data of '"+q+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(m,x,b){var p=m("./reader/readerFor"),v=m("./utils"),y=m("./signature"),N=m("./zipEntry"),T=m("./support");function _(O){this.files=[],this.loadOptions=O}_.prototype={checkSignature:function(O){if(!this.reader.readAndCheckSignature(O)){this.reader.index-=4;var H=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+v.pretty(H)+", expected "+v.pretty(O)+")")}},isSignature:function(O,H){var F=this.reader.index;this.reader.setIndex(O);var V=this.reader.readString(4)===H;return this.reader.setIndex(F),V},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var O=this.reader.readData(this.zipCommentLength),H=T.uint8array?"uint8array":"array",F=v.transformTo(H,O);this.zipComment=this.loadOptions.decodeFileName(F)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var O,H,F,V=this.zip64EndOfCentralSize-44;0<V;)O=this.reader.readInt(2),H=this.reader.readInt(4),F=this.reader.readData(H),this.zip64ExtensibleData[O]={id:O,length:H,value:F}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var O,H;for(O=0;O<this.files.length;O++)H=this.files[O],this.reader.setIndex(H.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),H.readLocalPart(this.reader),H.handleUTF8(),H.processAttributes()},readCentralDir:function(){var O;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(O=new N({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(O);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var O=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(O<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(O);var H=O;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===v.MAX_VALUE_16BITS||this.diskWithCentralDirStart===v.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===v.MAX_VALUE_16BITS||this.centralDirRecords===v.MAX_VALUE_16BITS||this.centralDirSize===v.MAX_VALUE_32BITS||this.centralDirOffset===v.MAX_VALUE_32BITS){if(this.zip64=!0,(O=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(O),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var F=this.centralDirOffset+this.centralDirSize;this.zip64&&(F+=20,F+=12+this.zip64EndOfCentralSize);var V=H-F;if(0<V)this.isSignature(H,y.CENTRAL_FILE_HEADER)||(this.reader.zero=V);else if(V<0)throw new Error("Corrupted zip: missing "+Math.abs(V)+" bytes.")},prepareReader:function(O){this.reader=p(O)},load:function(O){this.prepareReader(O),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},x.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(m,x,b){var p=m("./reader/readerFor"),v=m("./utils"),y=m("./compressedObject"),N=m("./crc32"),T=m("./utf8"),_=m("./compressions"),O=m("./support");function H(F,V){this.options=F,this.loadOptions=V}H.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(F){var V,q;if(F.skip(22),this.fileNameLength=F.readInt(2),q=F.readInt(2),this.fileName=F.readData(this.fileNameLength),F.skip(q),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((V=(function(W){for(var B in _)if(Object.prototype.hasOwnProperty.call(_,B)&&_[B].magic===W)return _[B];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+v.pretty(this.compressionMethod)+" unknown (inner file : "+v.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,V,F.readData(this.compressedSize))},readCentralPart:function(F){this.versionMadeBy=F.readInt(2),F.skip(2),this.bitFlag=F.readInt(2),this.compressionMethod=F.readString(2),this.date=F.readDate(),this.crc32=F.readInt(4),this.compressedSize=F.readInt(4),this.uncompressedSize=F.readInt(4);var V=F.readInt(2);if(this.extraFieldsLength=F.readInt(2),this.fileCommentLength=F.readInt(2),this.diskNumberStart=F.readInt(2),this.internalFileAttributes=F.readInt(2),this.externalFileAttributes=F.readInt(4),this.localHeaderOffset=F.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");F.skip(V),this.readExtraFields(F),this.parseZIP64ExtraField(F),this.fileComment=F.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var F=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),F==0&&(this.dosPermissions=63&this.externalFileAttributes),F==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var F=p(this.extraFields[1].value);this.uncompressedSize===v.MAX_VALUE_32BITS&&(this.uncompressedSize=F.readInt(8)),this.compressedSize===v.MAX_VALUE_32BITS&&(this.compressedSize=F.readInt(8)),this.localHeaderOffset===v.MAX_VALUE_32BITS&&(this.localHeaderOffset=F.readInt(8)),this.diskNumberStart===v.MAX_VALUE_32BITS&&(this.diskNumberStart=F.readInt(4))}},readExtraFields:function(F){var V,q,W,B=F.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});F.index+4<B;)V=F.readInt(2),q=F.readInt(2),W=F.readData(q),this.extraFields[V]={id:V,length:q,value:W};F.setIndex(B)},handleUTF8:function(){var F=O.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=T.utf8decode(this.fileName),this.fileCommentStr=T.utf8decode(this.fileComment);else{var V=this.findExtraFieldUnicodePath();if(V!==null)this.fileNameStr=V;else{var q=v.transformTo(F,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(q)}var W=this.findExtraFieldUnicodeComment();if(W!==null)this.fileCommentStr=W;else{var B=v.transformTo(F,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(B)}}},findExtraFieldUnicodePath:function(){var F=this.extraFields[28789];if(F){var V=p(F.value);return V.readInt(1)!==1||N(this.fileName)!==V.readInt(4)?null:T.utf8decode(V.readData(F.length-5))}return null},findExtraFieldUnicodeComment:function(){var F=this.extraFields[25461];if(F){var V=p(F.value);return V.readInt(1)!==1||N(this.fileComment)!==V.readInt(4)?null:T.utf8decode(V.readData(F.length-5))}return null}},x.exports=H},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(m,x,b){function p(V,q,W){this.name=V,this.dir=W.dir,this.date=W.date,this.comment=W.comment,this.unixPermissions=W.unixPermissions,this.dosPermissions=W.dosPermissions,this._data=q,this._dataBinary=W.binary,this.options={compression:W.compression,compressionOptions:W.compressionOptions}}var v=m("./stream/StreamHelper"),y=m("./stream/DataWorker"),N=m("./utf8"),T=m("./compressedObject"),_=m("./stream/GenericWorker");p.prototype={internalStream:function(V){var q=null,W="string";try{if(!V)throw new Error("No output type specified.");var B=(W=V.toLowerCase())==="string"||W==="text";W!=="binarystring"&&W!=="text"||(W="string"),q=this._decompressWorker();var E=!this._dataBinary;E&&!B&&(q=q.pipe(new N.Utf8EncodeWorker)),!E&&B&&(q=q.pipe(new N.Utf8DecodeWorker))}catch(P){(q=new _("error")).error(P)}return new v(q,W,"")},async:function(V,q){return this.internalStream(V).accumulate(q)},nodeStream:function(V,q){return this.internalStream(V||"nodebuffer").toNodejsStream(q)},_compressWorker:function(V,q){if(this._data instanceof T&&this._data.compression.magic===V.magic)return this._data.getCompressedWorker();var W=this._decompressWorker();return this._dataBinary||(W=W.pipe(new N.Utf8EncodeWorker)),T.createWorkerFrom(W,V,q)},_decompressWorker:function(){return this._data instanceof T?this._data.getContentWorker():this._data instanceof _?this._data:new y(this._data)}};for(var O=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],H=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},F=0;F<O.length;F++)p.prototype[O[F]]=H;x.exports=p},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(m,x,b){(function(p){var v,y,N=p.MutationObserver||p.WebKitMutationObserver;if(N){var T=0,_=new N(V),O=p.document.createTextNode("");_.observe(O,{characterData:!0}),v=function(){O.data=T=++T%2}}else if(p.setImmediate||p.MessageChannel===void 0)v="document"in p&&"onreadystatechange"in p.document.createElement("script")?function(){var q=p.document.createElement("script");q.onreadystatechange=function(){V(),q.onreadystatechange=null,q.parentNode.removeChild(q),q=null},p.document.documentElement.appendChild(q)}:function(){setTimeout(V,0)};else{var H=new p.MessageChannel;H.port1.onmessage=V,v=function(){H.port2.postMessage(0)}}var F=[];function V(){var q,W;y=!0;for(var B=F.length;B;){for(W=F,F=[],q=-1;++q<B;)W[q]();B=F.length}y=!1}x.exports=function(q){F.push(q)!==1||y||v()}}).call(this,n!==void 0?n:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(m,x,b){var p=m("immediate");function v(){}var y={},N=["REJECTED"],T=["FULFILLED"],_=["PENDING"];function O(B){if(typeof B!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,B!==v&&q(this,B)}function H(B,E,P){this.promise=B,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof P=="function"&&(this.onRejected=P,this.callRejected=this.otherCallRejected)}function F(B,E,P){p((function(){var A;try{A=E(P)}catch(k){return y.reject(B,k)}A===B?y.reject(B,new TypeError("Cannot resolve promise with itself")):y.resolve(B,A)}))}function V(B){var E=B&&B.then;if(B&&(typeof B=="object"||typeof B=="function")&&typeof E=="function")return function(){E.apply(B,arguments)}}function q(B,E){var P=!1;function A(S){P||(P=!0,y.reject(B,S))}function k(S){P||(P=!0,y.resolve(B,S))}var j=W((function(){E(k,A)}));j.status==="error"&&A(j.value)}function W(B,E){var P={};try{P.value=B(E),P.status="success"}catch(A){P.status="error",P.value=A}return P}(x.exports=O).prototype.finally=function(B){if(typeof B!="function")return this;var E=this.constructor;return this.then((function(P){return E.resolve(B()).then((function(){return P}))}),(function(P){return E.resolve(B()).then((function(){throw P}))}))},O.prototype.catch=function(B){return this.then(null,B)},O.prototype.then=function(B,E){if(typeof B!="function"&&this.state===T||typeof E!="function"&&this.state===N)return this;var P=new this.constructor(v);return this.state!==_?F(P,this.state===T?B:E,this.outcome):this.queue.push(new H(P,B,E)),P},H.prototype.callFulfilled=function(B){y.resolve(this.promise,B)},H.prototype.otherCallFulfilled=function(B){F(this.promise,this.onFulfilled,B)},H.prototype.callRejected=function(B){y.reject(this.promise,B)},H.prototype.otherCallRejected=function(B){F(this.promise,this.onRejected,B)},y.resolve=function(B,E){var P=W(V,E);if(P.status==="error")return y.reject(B,P.value);var A=P.value;if(A)q(B,A);else{B.state=T,B.outcome=E;for(var k=-1,j=B.queue.length;++k<j;)B.queue[k].callFulfilled(E)}return B},y.reject=function(B,E){B.state=N,B.outcome=E;for(var P=-1,A=B.queue.length;++P<A;)B.queue[P].callRejected(E);return B},O.resolve=function(B){return B instanceof this?B:y.resolve(new this(v),B)},O.reject=function(B){var E=new this(v);return y.reject(E,B)},O.all=function(B){var E=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=B.length,A=!1;if(!P)return this.resolve([]);for(var k=new Array(P),j=0,S=-1,C=new this(v);++S<P;)D(B[S],S);return C;function D(R,L){E.resolve(R).then((function(Y){k[L]=Y,++j!==P||A||(A=!0,y.resolve(C,k))}),(function(Y){A||(A=!0,y.reject(C,Y))}))}},O.race=function(B){if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=B.length,P=!1;if(!E)return this.resolve([]);for(var A,k=-1,j=new this(v);++k<E;)A=B[k],this.resolve(A).then((function(S){P||(P=!0,y.resolve(j,S))}),(function(S){P||(P=!0,y.reject(j,S))}));return j}},{immediate:36}],38:[function(m,x,b){var p={};(0,m("./lib/utils/common").assign)(p,m("./lib/deflate"),m("./lib/inflate"),m("./lib/zlib/constants")),x.exports=p},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(m,x,b){var p=m("./zlib/deflate"),v=m("./utils/common"),y=m("./utils/strings"),N=m("./zlib/messages"),T=m("./zlib/zstream"),_=Object.prototype.toString;function O(F){if(!(this instanceof O))return new O(F);this.options=v.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},F||{});var V=this.options;V.raw&&0<V.windowBits?V.windowBits=-V.windowBits:V.gzip&&0<V.windowBits&&V.windowBits<16&&(V.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var q=p.deflateInit2(this.strm,V.level,V.method,V.windowBits,V.memLevel,V.strategy);if(q!==0)throw new Error(N[q]);if(V.header&&p.deflateSetHeader(this.strm,V.header),V.dictionary){var W;if(W=typeof V.dictionary=="string"?y.string2buf(V.dictionary):_.call(V.dictionary)==="[object ArrayBuffer]"?new Uint8Array(V.dictionary):V.dictionary,(q=p.deflateSetDictionary(this.strm,W))!==0)throw new Error(N[q]);this._dict_set=!0}}function H(F,V){var q=new O(V);if(q.push(F,!0),q.err)throw q.msg||N[q.err];return q.result}O.prototype.push=function(F,V){var q,W,B=this.strm,E=this.options.chunkSize;if(this.ended)return!1;W=V===~~V?V:V===!0?4:0,typeof F=="string"?B.input=y.string2buf(F):_.call(F)==="[object ArrayBuffer]"?B.input=new Uint8Array(F):B.input=F,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new v.Buf8(E),B.next_out=0,B.avail_out=E),(q=p.deflate(B,W))!==1&&q!==0)return this.onEnd(q),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||W!==4&&W!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(v.shrinkBuf(B.output,B.next_out))):this.onData(v.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&q!==1);return W===4?(q=p.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===0):W!==2||(this.onEnd(0),!(B.avail_out=0))},O.prototype.onData=function(F){this.chunks.push(F)},O.prototype.onEnd=function(F){F===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=v.flattenChunks(this.chunks)),this.chunks=[],this.err=F,this.msg=this.strm.msg},b.Deflate=O,b.deflate=H,b.deflateRaw=function(F,V){return(V=V||{}).raw=!0,H(F,V)},b.gzip=function(F,V){return(V=V||{}).gzip=!0,H(F,V)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(m,x,b){var p=m("./zlib/inflate"),v=m("./utils/common"),y=m("./utils/strings"),N=m("./zlib/constants"),T=m("./zlib/messages"),_=m("./zlib/zstream"),O=m("./zlib/gzheader"),H=Object.prototype.toString;function F(q){if(!(this instanceof F))return new F(q);this.options=v.assign({chunkSize:16384,windowBits:0,to:""},q||{});var W=this.options;W.raw&&0<=W.windowBits&&W.windowBits<16&&(W.windowBits=-W.windowBits,W.windowBits===0&&(W.windowBits=-15)),!(0<=W.windowBits&&W.windowBits<16)||q&&q.windowBits||(W.windowBits+=32),15<W.windowBits&&W.windowBits<48&&(15&W.windowBits)==0&&(W.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var B=p.inflateInit2(this.strm,W.windowBits);if(B!==N.Z_OK)throw new Error(T[B]);this.header=new O,p.inflateGetHeader(this.strm,this.header)}function V(q,W){var B=new F(W);if(B.push(q,!0),B.err)throw B.msg||T[B.err];return B.result}F.prototype.push=function(q,W){var B,E,P,A,k,j,S=this.strm,C=this.options.chunkSize,D=this.options.dictionary,R=!1;if(this.ended)return!1;E=W===~~W?W:W===!0?N.Z_FINISH:N.Z_NO_FLUSH,typeof q=="string"?S.input=y.binstring2buf(q):H.call(q)==="[object ArrayBuffer]"?S.input=new Uint8Array(q):S.input=q,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new v.Buf8(C),S.next_out=0,S.avail_out=C),(B=p.inflate(S,N.Z_NO_FLUSH))===N.Z_NEED_DICT&&D&&(j=typeof D=="string"?y.string2buf(D):H.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,B=p.inflateSetDictionary(this.strm,j)),B===N.Z_BUF_ERROR&&R===!0&&(B=N.Z_OK,R=!1),B!==N.Z_STREAM_END&&B!==N.Z_OK)return this.onEnd(B),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&B!==N.Z_STREAM_END&&(S.avail_in!==0||E!==N.Z_FINISH&&E!==N.Z_SYNC_FLUSH)||(this.options.to==="string"?(P=y.utf8border(S.output,S.next_out),A=S.next_out-P,k=y.buf2string(S.output,P),S.next_out=A,S.avail_out=C-A,A&&v.arraySet(S.output,S.output,P,A,0),this.onData(k)):this.onData(v.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(R=!0)}while((0<S.avail_in||S.avail_out===0)&&B!==N.Z_STREAM_END);return B===N.Z_STREAM_END&&(E=N.Z_FINISH),E===N.Z_FINISH?(B=p.inflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===N.Z_OK):E!==N.Z_SYNC_FLUSH||(this.onEnd(N.Z_OK),!(S.avail_out=0))},F.prototype.onData=function(q){this.chunks.push(q)},F.prototype.onEnd=function(q){q===N.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=v.flattenChunks(this.chunks)),this.chunks=[],this.err=q,this.msg=this.strm.msg},b.Inflate=F,b.inflate=V,b.inflateRaw=function(q,W){return(W=W||{}).raw=!0,V(q,W)},b.ungzip=V},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(m,x,b){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";b.assign=function(N){for(var T=Array.prototype.slice.call(arguments,1);T.length;){var _=T.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var O in _)_.hasOwnProperty(O)&&(N[O]=_[O])}}return N},b.shrinkBuf=function(N,T){return N.length===T?N:N.subarray?N.subarray(0,T):(N.length=T,N)};var v={arraySet:function(N,T,_,O,H){if(T.subarray&&N.subarray)N.set(T.subarray(_,_+O),H);else for(var F=0;F<O;F++)N[H+F]=T[_+F]},flattenChunks:function(N){var T,_,O,H,F,V;for(T=O=0,_=N.length;T<_;T++)O+=N[T].length;for(V=new Uint8Array(O),T=H=0,_=N.length;T<_;T++)F=N[T],V.set(F,H),H+=F.length;return V}},y={arraySet:function(N,T,_,O,H){for(var F=0;F<O;F++)N[H+F]=T[_+F]},flattenChunks:function(N){return[].concat.apply([],N)}};b.setTyped=function(N){N?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,b.assign(b,v)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,y))},b.setTyped(p)},{}],42:[function(m,x,b){var p=m("./common"),v=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{v=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var N=new p.Buf8(256),T=0;T<256;T++)N[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;function _(O,H){if(H<65537&&(O.subarray&&y||!O.subarray&&v))return String.fromCharCode.apply(null,p.shrinkBuf(O,H));for(var F="",V=0;V<H;V++)F+=String.fromCharCode(O[V]);return F}N[254]=N[254]=1,b.string2buf=function(O){var H,F,V,q,W,B=O.length,E=0;for(q=0;q<B;q++)(64512&(F=O.charCodeAt(q)))==55296&&q+1<B&&(64512&(V=O.charCodeAt(q+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),q++),E+=F<128?1:F<2048?2:F<65536?3:4;for(H=new p.Buf8(E),q=W=0;W<E;q++)(64512&(F=O.charCodeAt(q)))==55296&&q+1<B&&(64512&(V=O.charCodeAt(q+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),q++),F<128?H[W++]=F:(F<2048?H[W++]=192|F>>>6:(F<65536?H[W++]=224|F>>>12:(H[W++]=240|F>>>18,H[W++]=128|F>>>12&63),H[W++]=128|F>>>6&63),H[W++]=128|63&F);return H},b.buf2binstring=function(O){return _(O,O.length)},b.binstring2buf=function(O){for(var H=new p.Buf8(O.length),F=0,V=H.length;F<V;F++)H[F]=O.charCodeAt(F);return H},b.buf2string=function(O,H){var F,V,q,W,B=H||O.length,E=new Array(2*B);for(F=V=0;F<B;)if((q=O[F++])<128)E[V++]=q;else if(4<(W=N[q]))E[V++]=65533,F+=W-1;else{for(q&=W===2?31:W===3?15:7;1<W&&F<B;)q=q<<6|63&O[F++],W--;1<W?E[V++]=65533:q<65536?E[V++]=q:(q-=65536,E[V++]=55296|q>>10&1023,E[V++]=56320|1023&q)}return _(E,V)},b.utf8border=function(O,H){var F;for((H=H||O.length)>O.length&&(H=O.length),F=H-1;0<=F&&(192&O[F])==128;)F--;return F<0||F===0?H:F+N[O[F]]>H?F:H}},{"./common":41}],43:[function(m,x,b){x.exports=function(p,v,y,N){for(var T=65535&p|0,_=p>>>16&65535|0,O=0;y!==0;){for(y-=O=2e3<y?2e3:y;_=_+(T=T+v[N++]|0)|0,--O;);T%=65521,_%=65521}return T|_<<16|0}},{}],44:[function(m,x,b){x.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(m,x,b){var p=(function(){for(var v,y=[],N=0;N<256;N++){v=N;for(var T=0;T<8;T++)v=1&v?3988292384^v>>>1:v>>>1;y[N]=v}return y})();x.exports=function(v,y,N,T){var _=p,O=T+N;v^=-1;for(var H=T;H<O;H++)v=v>>>8^_[255&(v^y[H])];return-1^v}},{}],46:[function(m,x,b){var p,v=m("../utils/common"),y=m("./trees"),N=m("./adler32"),T=m("./crc32"),_=m("./messages"),O=-2,H=258,F=262,V=113;function q($,Q){return $.msg=_[Q],Q}function W($){return($<<1)-(4<$?9:0)}function B($){for(var Q=$.length;0<=--Q;)$[Q]=0}function E($){var Q=$.state,z=Q.pending;z>$.avail_out&&(z=$.avail_out),z!==0&&(v.arraySet($.output,Q.pending_buf,Q.pending_out,z,$.next_out),$.next_out+=z,Q.pending_out+=z,$.total_out+=z,$.avail_out-=z,Q.pending-=z,Q.pending===0&&(Q.pending_out=0))}function P($,Q){y._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,Q),$.block_start=$.strstart,E($.strm)}function A($,Q){$.pending_buf[$.pending++]=Q}function k($,Q){$.pending_buf[$.pending++]=Q>>>8&255,$.pending_buf[$.pending++]=255&Q}function j($,Q){var z,M,U=$.max_chain_length,te=$.strstart,ie=$.prev_length,se=$.nice_match,le=$.strstart>$.w_size-F?$.strstart-($.w_size-F):0,Ne=$.window,ke=$.w_mask,Z=$.prev,ce=$.strstart+H,ve=Ne[te+ie-1],De=Ne[te+ie];$.prev_length>=$.good_match&&(U>>=2),se>$.lookahead&&(se=$.lookahead);do if(Ne[(z=Q)+ie]===De&&Ne[z+ie-1]===ve&&Ne[z]===Ne[te]&&Ne[++z]===Ne[te+1]){te+=2,z++;do;while(Ne[++te]===Ne[++z]&&Ne[++te]===Ne[++z]&&Ne[++te]===Ne[++z]&&Ne[++te]===Ne[++z]&&Ne[++te]===Ne[++z]&&Ne[++te]===Ne[++z]&&Ne[++te]===Ne[++z]&&Ne[++te]===Ne[++z]&&te<ce);if(M=H-(ce-te),te=ce-H,ie<M){if($.match_start=Q,se<=(ie=M))break;ve=Ne[te+ie-1],De=Ne[te+ie]}}while((Q=Z[Q&ke])>le&&--U!=0);return ie<=$.lookahead?ie:$.lookahead}function S($){var Q,z,M,U,te,ie,se,le,Ne,ke,Z=$.w_size;do{if(U=$.window_size-$.lookahead-$.strstart,$.strstart>=Z+(Z-F)){for(v.arraySet($.window,$.window,Z,Z,0),$.match_start-=Z,$.strstart-=Z,$.block_start-=Z,Q=z=$.hash_size;M=$.head[--Q],$.head[Q]=Z<=M?M-Z:0,--z;);for(Q=z=Z;M=$.prev[--Q],$.prev[Q]=Z<=M?M-Z:0,--z;);U+=Z}if($.strm.avail_in===0)break;if(ie=$.strm,se=$.window,le=$.strstart+$.lookahead,ke=void 0,(Ne=U)<(ke=ie.avail_in)&&(ke=Ne),z=ke===0?0:(ie.avail_in-=ke,v.arraySet(se,ie.input,ie.next_in,ke,le),ie.state.wrap===1?ie.adler=N(ie.adler,se,ke,le):ie.state.wrap===2&&(ie.adler=T(ie.adler,se,ke,le)),ie.next_in+=ke,ie.total_in+=ke,ke),$.lookahead+=z,$.lookahead+$.insert>=3)for(te=$.strstart-$.insert,$.ins_h=$.window[te],$.ins_h=($.ins_h<<$.hash_shift^$.window[te+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[te+3-1])&$.hash_mask,$.prev[te&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=te,te++,$.insert--,!($.lookahead+$.insert<3)););}while($.lookahead<F&&$.strm.avail_in!==0)}function C($,Q){for(var z,M;;){if($.lookahead<F){if(S($),$.lookahead<F&&Q===0)return 1;if($.lookahead===0)break}if(z=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,z=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),z!==0&&$.strstart-z<=$.w_size-F&&($.match_length=j($,z)),$.match_length>=3)if(M=y._tr_tally($,$.strstart-$.match_start,$.match_length-3),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=3){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,z=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else M=y._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(M&&(P($,!1),$.strm.avail_out===0))return 1}return $.insert=$.strstart<2?$.strstart:2,Q===4?(P($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(P($,!1),$.strm.avail_out===0)?1:2}function D($,Q){for(var z,M,U;;){if($.lookahead<F){if(S($),$.lookahead<F&&Q===0)return 1;if($.lookahead===0)break}if(z=0,$.lookahead>=3&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,z=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=2,z!==0&&$.prev_length<$.max_lazy_match&&$.strstart-z<=$.w_size-F&&($.match_length=j($,z),$.match_length<=5&&($.strategy===1||$.match_length===3&&4096<$.strstart-$.match_start)&&($.match_length=2)),$.prev_length>=3&&$.match_length<=$.prev_length){for(U=$.strstart+$.lookahead-3,M=y._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-3),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=U&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+3-1])&$.hash_mask,z=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=2,$.strstart++,M&&(P($,!1),$.strm.avail_out===0))return 1}else if($.match_available){if((M=y._tr_tally($,0,$.window[$.strstart-1]))&&P($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return 1}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(M=y._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<2?$.strstart:2,Q===4?(P($,!0),$.strm.avail_out===0?3:4):$.last_lit&&(P($,!1),$.strm.avail_out===0)?1:2}function R($,Q,z,M,U){this.good_length=$,this.max_lazy=Q,this.nice_length=z,this.max_chain=M,this.func=U}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new v.Buf16(1146),this.dyn_dtree=new v.Buf16(122),this.bl_tree=new v.Buf16(78),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new v.Buf16(16),this.heap=new v.Buf16(573),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new v.Buf16(573),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y($){var Q;return $&&$.state?($.total_in=$.total_out=0,$.data_type=2,(Q=$.state).pending=0,Q.pending_out=0,Q.wrap<0&&(Q.wrap=-Q.wrap),Q.status=Q.wrap?42:V,$.adler=Q.wrap===2?0:1,Q.last_flush=0,y._tr_init(Q),0):q($,O)}function X($){var Q=Y($);return Q===0&&(function(z){z.window_size=2*z.w_size,B(z.head),z.max_lazy_match=p[z.level].max_lazy,z.good_match=p[z.level].good_length,z.nice_match=p[z.level].nice_length,z.max_chain_length=p[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=2,z.match_available=0,z.ins_h=0})($.state),Q}function ae($,Q,z,M,U,te){if(!$)return O;var ie=1;if(Q===-1&&(Q=6),M<0?(ie=0,M=-M):15<M&&(ie=2,M-=16),U<1||9<U||z!==8||M<8||15<M||Q<0||9<Q||te<0||4<te)return q($,O);M===8&&(M=9);var se=new L;return($.state=se).strm=$,se.wrap=ie,se.gzhead=null,se.w_bits=M,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=U+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+3-1)/3),se.window=new v.Buf8(2*se.w_size),se.head=new v.Buf16(se.hash_size),se.prev=new v.Buf16(se.w_size),se.lit_bufsize=1<<U+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new v.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=Q,se.strategy=te,se.method=z,X($)}p=[new R(0,0,0,0,(function($,Q){var z=65535;for(z>$.pending_buf_size-5&&(z=$.pending_buf_size-5);;){if($.lookahead<=1){if(S($),$.lookahead===0&&Q===0)return 1;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var M=$.block_start+z;if(($.strstart===0||$.strstart>=M)&&($.lookahead=$.strstart-M,$.strstart=M,P($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-F&&(P($,!1),$.strm.avail_out===0))return 1}return $.insert=0,Q===4?(P($,!0),$.strm.avail_out===0?3:4):($.strstart>$.block_start&&(P($,!1),$.strm.avail_out),1)})),new R(4,4,8,4,C),new R(4,5,16,8,C),new R(4,6,32,32,C),new R(4,4,16,16,D),new R(8,16,32,32,D),new R(8,16,128,128,D),new R(8,32,128,256,D),new R(32,128,258,1024,D),new R(32,258,258,4096,D)],b.deflateInit=function($,Q){return ae($,Q,8,15,8,0)},b.deflateInit2=ae,b.deflateReset=X,b.deflateResetKeep=Y,b.deflateSetHeader=function($,Q){return $&&$.state?$.state.wrap!==2?O:($.state.gzhead=Q,0):O},b.deflate=function($,Q){var z,M,U,te;if(!$||!$.state||5<Q||Q<0)return $?q($,O):O;if(M=$.state,!$.output||!$.input&&$.avail_in!==0||M.status===666&&Q!==4)return q($,$.avail_out===0?-5:O);if(M.strm=$,z=M.last_flush,M.last_flush=Q,M.status===42)if(M.wrap===2)$.adler=0,A(M,31),A(M,139),A(M,8),M.gzhead?(A(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),A(M,255&M.gzhead.time),A(M,M.gzhead.time>>8&255),A(M,M.gzhead.time>>16&255),A(M,M.gzhead.time>>24&255),A(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),A(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(A(M,255&M.gzhead.extra.length),A(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&($.adler=T($.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(A(M,0),A(M,0),A(M,0),A(M,0),A(M,0),A(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),A(M,3),M.status=V);else{var ie=8+(M.w_bits-8<<4)<<8;ie|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(ie|=32),ie+=31-ie%31,M.status=V,k(M,ie),M.strstart!==0&&(k(M,$.adler>>>16),k(M,65535&$.adler)),$.adler=1}if(M.status===69)if(M.gzhead.extra){for(U=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>U&&($.adler=T($.adler,M.pending_buf,M.pending-U,U)),E($),U=M.pending,M.pending!==M.pending_buf_size));)A(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>U&&($.adler=T($.adler,M.pending_buf,M.pending-U,U)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){U=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>U&&($.adler=T($.adler,M.pending_buf,M.pending-U,U)),E($),U=M.pending,M.pending===M.pending_buf_size)){te=1;break}te=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,A(M,te)}while(te!==0);M.gzhead.hcrc&&M.pending>U&&($.adler=T($.adler,M.pending_buf,M.pending-U,U)),te===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){U=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>U&&($.adler=T($.adler,M.pending_buf,M.pending-U,U)),E($),U=M.pending,M.pending===M.pending_buf_size)){te=1;break}te=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,A(M,te)}while(te!==0);M.gzhead.hcrc&&M.pending>U&&($.adler=T($.adler,M.pending_buf,M.pending-U,U)),te===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&E($),M.pending+2<=M.pending_buf_size&&(A(M,255&$.adler),A(M,$.adler>>8&255),$.adler=0,M.status=V)):M.status=V),M.pending!==0){if(E($),$.avail_out===0)return M.last_flush=-1,0}else if($.avail_in===0&&W(Q)<=W(z)&&Q!==4)return q($,-5);if(M.status===666&&$.avail_in!==0)return q($,-5);if($.avail_in!==0||M.lookahead!==0||Q!==0&&M.status!==666){var se=M.strategy===2?(function(le,Ne){for(var ke;;){if(le.lookahead===0&&(S(le),le.lookahead===0)){if(Ne===0)return 1;break}if(le.match_length=0,ke=y._tr_tally(le,0,le.window[le.strstart]),le.lookahead--,le.strstart++,ke&&(P(le,!1),le.strm.avail_out===0))return 1}return le.insert=0,Ne===4?(P(le,!0),le.strm.avail_out===0?3:4):le.last_lit&&(P(le,!1),le.strm.avail_out===0)?1:2})(M,Q):M.strategy===3?(function(le,Ne){for(var ke,Z,ce,ve,De=le.window;;){if(le.lookahead<=H){if(S(le),le.lookahead<=H&&Ne===0)return 1;if(le.lookahead===0)break}if(le.match_length=0,le.lookahead>=3&&0<le.strstart&&(Z=De[ce=le.strstart-1])===De[++ce]&&Z===De[++ce]&&Z===De[++ce]){ve=le.strstart+H;do;while(Z===De[++ce]&&Z===De[++ce]&&Z===De[++ce]&&Z===De[++ce]&&Z===De[++ce]&&Z===De[++ce]&&Z===De[++ce]&&Z===De[++ce]&&ce<ve);le.match_length=H-(ve-ce),le.match_length>le.lookahead&&(le.match_length=le.lookahead)}if(le.match_length>=3?(ke=y._tr_tally(le,1,le.match_length-3),le.lookahead-=le.match_length,le.strstart+=le.match_length,le.match_length=0):(ke=y._tr_tally(le,0,le.window[le.strstart]),le.lookahead--,le.strstart++),ke&&(P(le,!1),le.strm.avail_out===0))return 1}return le.insert=0,Ne===4?(P(le,!0),le.strm.avail_out===0?3:4):le.last_lit&&(P(le,!1),le.strm.avail_out===0)?1:2})(M,Q):p[M.level].func(M,Q);if(se!==3&&se!==4||(M.status=666),se===1||se===3)return $.avail_out===0&&(M.last_flush=-1),0;if(se===2&&(Q===1?y._tr_align(M):Q!==5&&(y._tr_stored_block(M,0,0,!1),Q===3&&(B(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),E($),$.avail_out===0))return M.last_flush=-1,0}return Q!==4?0:M.wrap<=0?1:(M.wrap===2?(A(M,255&$.adler),A(M,$.adler>>8&255),A(M,$.adler>>16&255),A(M,$.adler>>24&255),A(M,255&$.total_in),A(M,$.total_in>>8&255),A(M,$.total_in>>16&255),A(M,$.total_in>>24&255)):(k(M,$.adler>>>16),k(M,65535&$.adler)),E($),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?0:1)},b.deflateEnd=function($){var Q;return $&&$.state?(Q=$.state.status)!==42&&Q!==69&&Q!==73&&Q!==91&&Q!==103&&Q!==V&&Q!==666?q($,O):($.state=null,Q===V?q($,-3):0):O},b.deflateSetDictionary=function($,Q){var z,M,U,te,ie,se,le,Ne,ke=Q.length;if(!$||!$.state||(te=(z=$.state).wrap)===2||te===1&&z.status!==42||z.lookahead)return O;for(te===1&&($.adler=N($.adler,Q,ke,0)),z.wrap=0,ke>=z.w_size&&(te===0&&(B(z.head),z.strstart=0,z.block_start=0,z.insert=0),Ne=new v.Buf8(z.w_size),v.arraySet(Ne,Q,ke-z.w_size,z.w_size,0),Q=Ne,ke=z.w_size),ie=$.avail_in,se=$.next_in,le=$.input,$.avail_in=ke,$.next_in=0,$.input=Q,S(z);z.lookahead>=3;){for(M=z.strstart,U=z.lookahead-2;z.ins_h=(z.ins_h<<z.hash_shift^z.window[M+3-1])&z.hash_mask,z.prev[M&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=M,M++,--U;);z.strstart=M,z.lookahead=2,S(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=2,z.match_available=0,$.next_in=se,$.input=le,$.avail_in=ie,z.wrap=te,0},b.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(m,x,b){x.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(m,x,b){x.exports=function(p,v){var y,N,T,_,O,H,F,V,q,W,B,E,P,A,k,j,S,C,D,R,L,Y,X,ae,$;y=p.state,N=p.next_in,ae=p.input,T=N+(p.avail_in-5),_=p.next_out,$=p.output,O=_-(v-p.avail_out),H=_+(p.avail_out-257),F=y.dmax,V=y.wsize,q=y.whave,W=y.wnext,B=y.window,E=y.hold,P=y.bits,A=y.lencode,k=y.distcode,j=(1<<y.lenbits)-1,S=(1<<y.distbits)-1;e:do{P<15&&(E+=ae[N++]<<P,P+=8,E+=ae[N++]<<P,P+=8),C=A[E&j];t:for(;;){if(E>>>=D=C>>>24,P-=D,(D=C>>>16&255)==0)$[_++]=65535&C;else{if(!(16&D)){if((64&D)==0){C=A[(65535&C)+(E&(1<<D)-1)];continue t}if(32&D){y.mode=12;break e}p.msg="invalid literal/length code",y.mode=30;break e}R=65535&C,(D&=15)&&(P<D&&(E+=ae[N++]<<P,P+=8),R+=E&(1<<D)-1,E>>>=D,P-=D),P<15&&(E+=ae[N++]<<P,P+=8,E+=ae[N++]<<P,P+=8),C=k[E&S];r:for(;;){if(E>>>=D=C>>>24,P-=D,!(16&(D=C>>>16&255))){if((64&D)==0){C=k[(65535&C)+(E&(1<<D)-1)];continue r}p.msg="invalid distance code",y.mode=30;break e}if(L=65535&C,P<(D&=15)&&(E+=ae[N++]<<P,(P+=8)<D&&(E+=ae[N++]<<P,P+=8)),F<(L+=E&(1<<D)-1)){p.msg="invalid distance too far back",y.mode=30;break e}if(E>>>=D,P-=D,(D=_-O)<L){if(q<(D=L-D)&&y.sane){p.msg="invalid distance too far back",y.mode=30;break e}if(X=B,(Y=0)===W){if(Y+=V-D,D<R){for(R-=D;$[_++]=B[Y++],--D;);Y=_-L,X=$}}else if(W<D){if(Y+=V+W-D,(D-=W)<R){for(R-=D;$[_++]=B[Y++],--D;);if(Y=0,W<R){for(R-=D=W;$[_++]=B[Y++],--D;);Y=_-L,X=$}}}else if(Y+=W-D,D<R){for(R-=D;$[_++]=B[Y++],--D;);Y=_-L,X=$}for(;2<R;)$[_++]=X[Y++],$[_++]=X[Y++],$[_++]=X[Y++],R-=3;R&&($[_++]=X[Y++],1<R&&($[_++]=X[Y++]))}else{for(Y=_-L;$[_++]=$[Y++],$[_++]=$[Y++],$[_++]=$[Y++],2<(R-=3););R&&($[_++]=$[Y++],1<R&&($[_++]=$[Y++]))}break}}break}}while(N<T&&_<H);N-=R=P>>3,E&=(1<<(P-=R<<3))-1,p.next_in=N,p.next_out=_,p.avail_in=N<T?T-N+5:5-(N-T),p.avail_out=_<H?H-_+257:257-(_-H),y.hold=E,y.bits=P}},{}],49:[function(m,x,b){var p=m("../utils/common"),v=m("./adler32"),y=m("./crc32"),N=m("./inffast"),T=m("./inftrees"),_=-2;function O(j){return(j>>>24&255)+(j>>>8&65280)+((65280&j)<<8)+((255&j)<<24)}function H(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function F(j){var S;return j&&j.state?(S=j.state,j.total_in=j.total_out=S.total=0,j.msg="",S.wrap&&(j.adler=1&S.wrap),S.mode=1,S.last=0,S.havedict=0,S.dmax=32768,S.head=null,S.hold=0,S.bits=0,S.lencode=S.lendyn=new p.Buf32(852),S.distcode=S.distdyn=new p.Buf32(592),S.sane=1,S.back=-1,0):_}function V(j){var S;return j&&j.state?((S=j.state).wsize=0,S.whave=0,S.wnext=0,F(j)):_}function q(j,S){var C,D;return j&&j.state?(D=j.state,S<0?(C=0,S=-S):(C=1+(S>>4),S<48&&(S&=15)),S&&(S<8||15<S)?_:(D.window!==null&&D.wbits!==S&&(D.window=null),D.wrap=C,D.wbits=S,V(j))):_}function W(j,S){var C,D;return j?(D=new H,(j.state=D).window=null,(C=q(j,S))!==0&&(j.state=null),C):_}var B,E,P=!0;function A(j){if(P){var S;for(B=new p.Buf32(512),E=new p.Buf32(32),S=0;S<144;)j.lens[S++]=8;for(;S<256;)j.lens[S++]=9;for(;S<280;)j.lens[S++]=7;for(;S<288;)j.lens[S++]=8;for(T(1,j.lens,0,288,B,0,j.work,{bits:9}),S=0;S<32;)j.lens[S++]=5;T(2,j.lens,0,32,E,0,j.work,{bits:5}),P=!1}j.lencode=B,j.lenbits=9,j.distcode=E,j.distbits=5}function k(j,S,C,D){var R,L=j.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new p.Buf8(L.wsize)),D>=L.wsize?(p.arraySet(L.window,S,C-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(D<(R=L.wsize-L.wnext)&&(R=D),p.arraySet(L.window,S,C-D,R,L.wnext),(D-=R)?(p.arraySet(L.window,S,C-D,D,0),L.wnext=D,L.whave=L.wsize):(L.wnext+=R,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=R))),0}b.inflateReset=V,b.inflateReset2=q,b.inflateResetKeep=F,b.inflateInit=function(j){return W(j,15)},b.inflateInit2=W,b.inflate=function(j,S){var C,D,R,L,Y,X,ae,$,Q,z,M,U,te,ie,se,le,Ne,ke,Z,ce,ve,De,Ae,Ie,Ue=0,Ge=new p.Buf8(4),Le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return _;(C=j.state).mode===12&&(C.mode=13),Y=j.next_out,R=j.output,ae=j.avail_out,L=j.next_in,D=j.input,X=j.avail_in,$=C.hold,Q=C.bits,z=X,M=ae,De=0;e:for(;;)switch(C.mode){case 1:if(C.wrap===0){C.mode=13;break}for(;Q<16;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if(2&C.wrap&&$===35615){Ge[C.check=0]=255&$,Ge[1]=$>>>8&255,C.check=y(C.check,Ge,2,0),Q=$=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&$)<<8)+($>>8))%31){j.msg="incorrect header check",C.mode=30;break}if((15&$)!=8){j.msg="unknown compression method",C.mode=30;break}if(Q-=4,ve=8+(15&($>>>=4)),C.wbits===0)C.wbits=ve;else if(ve>C.wbits){j.msg="invalid window size",C.mode=30;break}C.dmax=1<<ve,j.adler=C.check=1,C.mode=512&$?10:12,Q=$=0;break;case 2:for(;Q<16;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if(C.flags=$,(255&C.flags)!=8){j.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){j.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=$>>8&1),512&C.flags&&(Ge[0]=255&$,Ge[1]=$>>>8&255,C.check=y(C.check,Ge,2,0)),Q=$=0,C.mode=3;case 3:for(;Q<32;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}C.head&&(C.head.time=$),512&C.flags&&(Ge[0]=255&$,Ge[1]=$>>>8&255,Ge[2]=$>>>16&255,Ge[3]=$>>>24&255,C.check=y(C.check,Ge,4,0)),Q=$=0,C.mode=4;case 4:for(;Q<16;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}C.head&&(C.head.xflags=255&$,C.head.os=$>>8),512&C.flags&&(Ge[0]=255&$,Ge[1]=$>>>8&255,C.check=y(C.check,Ge,2,0)),Q=$=0,C.mode=5;case 5:if(1024&C.flags){for(;Q<16;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}C.length=$,C.head&&(C.head.extra_len=$),512&C.flags&&(Ge[0]=255&$,Ge[1]=$>>>8&255,C.check=y(C.check,Ge,2,0)),Q=$=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(X<(U=C.length)&&(U=X),U&&(C.head&&(ve=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),p.arraySet(C.head.extra,D,L,U,ve)),512&C.flags&&(C.check=y(C.check,D,U,L)),X-=U,L+=U,C.length-=U),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(X===0)break e;for(U=0;ve=D[L+U++],C.head&&ve&&C.length<65536&&(C.head.name+=String.fromCharCode(ve)),ve&&U<X;);if(512&C.flags&&(C.check=y(C.check,D,U,L)),X-=U,L+=U,ve)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(X===0)break e;for(U=0;ve=D[L+U++],C.head&&ve&&C.length<65536&&(C.head.comment+=String.fromCharCode(ve)),ve&&U<X;);if(512&C.flags&&(C.check=y(C.check,D,U,L)),X-=U,L+=U,ve)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;Q<16;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if($!==(65535&C.check)){j.msg="header crc mismatch",C.mode=30;break}Q=$=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),j.adler=C.check=0,C.mode=12;break;case 10:for(;Q<32;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}j.adler=C.check=O($),Q=$=0,C.mode=11;case 11:if(C.havedict===0)return j.next_out=Y,j.avail_out=ae,j.next_in=L,j.avail_in=X,C.hold=$,C.bits=Q,2;j.adler=C.check=1,C.mode=12;case 12:if(S===5||S===6)break e;case 13:if(C.last){$>>>=7&Q,Q-=7&Q,C.mode=27;break}for(;Q<3;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}switch(C.last=1&$,Q-=1,3&($>>>=1)){case 0:C.mode=14;break;case 1:if(A(C),C.mode=20,S!==6)break;$>>>=2,Q-=2;break e;case 2:C.mode=17;break;case 3:j.msg="invalid block type",C.mode=30}$>>>=2,Q-=2;break;case 14:for($>>>=7&Q,Q-=7&Q;Q<32;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if((65535&$)!=($>>>16^65535)){j.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&$,Q=$=0,C.mode=15,S===6)break e;case 15:C.mode=16;case 16:if(U=C.length){if(X<U&&(U=X),ae<U&&(U=ae),U===0)break e;p.arraySet(R,D,L,U,Y),X-=U,L+=U,ae-=U,Y+=U,C.length-=U;break}C.mode=12;break;case 17:for(;Q<14;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if(C.nlen=257+(31&$),$>>>=5,Q-=5,C.ndist=1+(31&$),$>>>=5,Q-=5,C.ncode=4+(15&$),$>>>=4,Q-=4,286<C.nlen||30<C.ndist){j.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;Q<3;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}C.lens[Le[C.have++]]=7&$,$>>>=3,Q-=3}for(;C.have<19;)C.lens[Le[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,Ae={bits:C.lenbits},De=T(0,C.lens,0,19,C.lencode,0,C.work,Ae),C.lenbits=Ae.bits,De){j.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;le=(Ue=C.lencode[$&(1<<C.lenbits)-1])>>>16&255,Ne=65535&Ue,!((se=Ue>>>24)<=Q);){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if(Ne<16)$>>>=se,Q-=se,C.lens[C.have++]=Ne;else{if(Ne===16){for(Ie=se+2;Q<Ie;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if($>>>=se,Q-=se,C.have===0){j.msg="invalid bit length repeat",C.mode=30;break}ve=C.lens[C.have-1],U=3+(3&$),$>>>=2,Q-=2}else if(Ne===17){for(Ie=se+3;Q<Ie;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}Q-=se,ve=0,U=3+(7&($>>>=se)),$>>>=3,Q-=3}else{for(Ie=se+7;Q<Ie;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}Q-=se,ve=0,U=11+(127&($>>>=se)),$>>>=7,Q-=7}if(C.have+U>C.nlen+C.ndist){j.msg="invalid bit length repeat",C.mode=30;break}for(;U--;)C.lens[C.have++]=ve}}if(C.mode===30)break;if(C.lens[256]===0){j.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,Ae={bits:C.lenbits},De=T(1,C.lens,0,C.nlen,C.lencode,0,C.work,Ae),C.lenbits=Ae.bits,De){j.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,Ae={bits:C.distbits},De=T(2,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,Ae),C.distbits=Ae.bits,De){j.msg="invalid distances set",C.mode=30;break}if(C.mode=20,S===6)break e;case 20:C.mode=21;case 21:if(6<=X&&258<=ae){j.next_out=Y,j.avail_out=ae,j.next_in=L,j.avail_in=X,C.hold=$,C.bits=Q,N(j,M),Y=j.next_out,R=j.output,ae=j.avail_out,L=j.next_in,D=j.input,X=j.avail_in,$=C.hold,Q=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;le=(Ue=C.lencode[$&(1<<C.lenbits)-1])>>>16&255,Ne=65535&Ue,!((se=Ue>>>24)<=Q);){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if(le&&(240&le)==0){for(ke=se,Z=le,ce=Ne;le=(Ue=C.lencode[ce+(($&(1<<ke+Z)-1)>>ke)])>>>16&255,Ne=65535&Ue,!(ke+(se=Ue>>>24)<=Q);){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}$>>>=ke,Q-=ke,C.back+=ke}if($>>>=se,Q-=se,C.back+=se,C.length=Ne,le===0){C.mode=26;break}if(32&le){C.back=-1,C.mode=12;break}if(64&le){j.msg="invalid literal/length code",C.mode=30;break}C.extra=15&le,C.mode=22;case 22:if(C.extra){for(Ie=C.extra;Q<Ie;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}C.length+=$&(1<<C.extra)-1,$>>>=C.extra,Q-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;le=(Ue=C.distcode[$&(1<<C.distbits)-1])>>>16&255,Ne=65535&Ue,!((se=Ue>>>24)<=Q);){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if((240&le)==0){for(ke=se,Z=le,ce=Ne;le=(Ue=C.distcode[ce+(($&(1<<ke+Z)-1)>>ke)])>>>16&255,Ne=65535&Ue,!(ke+(se=Ue>>>24)<=Q);){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}$>>>=ke,Q-=ke,C.back+=ke}if($>>>=se,Q-=se,C.back+=se,64&le){j.msg="invalid distance code",C.mode=30;break}C.offset=Ne,C.extra=15&le,C.mode=24;case 24:if(C.extra){for(Ie=C.extra;Q<Ie;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}C.offset+=$&(1<<C.extra)-1,$>>>=C.extra,Q-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){j.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(ae===0)break e;if(U=M-ae,C.offset>U){if((U=C.offset-U)>C.whave&&C.sane){j.msg="invalid distance too far back",C.mode=30;break}te=U>C.wnext?(U-=C.wnext,C.wsize-U):C.wnext-U,U>C.length&&(U=C.length),ie=C.window}else ie=R,te=Y-C.offset,U=C.length;for(ae<U&&(U=ae),ae-=U,C.length-=U;R[Y++]=ie[te++],--U;);C.length===0&&(C.mode=21);break;case 26:if(ae===0)break e;R[Y++]=C.length,ae--,C.mode=21;break;case 27:if(C.wrap){for(;Q<32;){if(X===0)break e;X--,$|=D[L++]<<Q,Q+=8}if(M-=ae,j.total_out+=M,C.total+=M,M&&(j.adler=C.check=C.flags?y(C.check,R,M,Y-M):v(C.check,R,M,Y-M)),M=ae,(C.flags?$:O($))!==C.check){j.msg="incorrect data check",C.mode=30;break}Q=$=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;Q<32;){if(X===0)break e;X--,$+=D[L++]<<Q,Q+=8}if($!==(4294967295&C.total)){j.msg="incorrect length check",C.mode=30;break}Q=$=0}C.mode=29;case 29:De=1;break e;case 30:De=-3;break e;case 31:return-4;case 32:default:return _}return j.next_out=Y,j.avail_out=ae,j.next_in=L,j.avail_in=X,C.hold=$,C.bits=Q,(C.wsize||M!==j.avail_out&&C.mode<30&&(C.mode<27||S!==4))&&k(j,j.output,j.next_out,M-j.avail_out)?(C.mode=31,-4):(z-=j.avail_in,M-=j.avail_out,j.total_in+=z,j.total_out+=M,C.total+=M,C.wrap&&M&&(j.adler=C.check=C.flags?y(C.check,R,M,j.next_out-M):v(C.check,R,M,j.next_out-M)),j.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(z==0&&M===0||S===4)&&De===0&&(De=-5),De)},b.inflateEnd=function(j){if(!j||!j.state)return _;var S=j.state;return S.window&&(S.window=null),j.state=null,0},b.inflateGetHeader=function(j,S){var C;return j&&j.state?(2&(C=j.state).wrap)==0?_:((C.head=S).done=!1,0):_},b.inflateSetDictionary=function(j,S){var C,D=S.length;return j&&j.state?(C=j.state).wrap!==0&&C.mode!==11?_:C.mode===11&&v(1,S,D,0)!==C.check?-3:k(j,S,D,D)?(C.mode=31,-4):(C.havedict=1,0):_},b.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(m,x,b){var p=m("../utils/common"),v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],T=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];x.exports=function(_,O,H,F,V,q,W,B){var E,P,A,k,j,S,C,D,R,L=B.bits,Y=0,X=0,ae=0,$=0,Q=0,z=0,M=0,U=0,te=0,ie=0,se=null,le=0,Ne=new p.Buf16(16),ke=new p.Buf16(16),Z=null,ce=0;for(Y=0;Y<=15;Y++)Ne[Y]=0;for(X=0;X<F;X++)Ne[O[H+X]]++;for(Q=L,$=15;1<=$&&Ne[$]===0;$--);if($<Q&&(Q=$),$===0)return V[q++]=20971520,V[q++]=20971520,B.bits=1,0;for(ae=1;ae<$&&Ne[ae]===0;ae++);for(Q<ae&&(Q=ae),Y=U=1;Y<=15;Y++)if(U<<=1,(U-=Ne[Y])<0)return-1;if(0<U&&(_===0||$!==1))return-1;for(ke[1]=0,Y=1;Y<15;Y++)ke[Y+1]=ke[Y]+Ne[Y];for(X=0;X<F;X++)O[H+X]!==0&&(W[ke[O[H+X]]++]=X);if(S=_===0?(se=Z=W,19):_===1?(se=v,le-=257,Z=y,ce-=257,256):(se=N,Z=T,-1),Y=ae,j=q,M=X=ie=0,A=-1,k=(te=1<<(z=Q))-1,_===1&&852<te||_===2&&592<te)return 1;for(;;){for(C=Y-M,R=W[X]<S?(D=0,W[X]):W[X]>S?(D=Z[ce+W[X]],se[le+W[X]]):(D=96,0),E=1<<Y-M,ae=P=1<<z;V[j+(ie>>M)+(P-=E)]=C<<24|D<<16|R|0,P!==0;);for(E=1<<Y-1;ie&E;)E>>=1;if(E!==0?(ie&=E-1,ie+=E):ie=0,X++,--Ne[Y]==0){if(Y===$)break;Y=O[H+W[X]]}if(Q<Y&&(ie&k)!==A){for(M===0&&(M=Q),j+=ae,U=1<<(z=Y-M);z+M<$&&!((U-=Ne[z+M])<=0);)z++,U<<=1;if(te+=1<<z,_===1&&852<te||_===2&&592<te)return 1;V[A=ie&k]=Q<<24|z<<16|j-q|0}}return ie!==0&&(V[j+ie]=Y-M<<24|64<<16|0),B.bits=Q,0}},{"../utils/common":41}],51:[function(m,x,b){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(m,x,b){var p=m("../utils/common");function v(Z){for(var ce=Z.length;0<=--ce;)Z[ce]=0}var y=256,N=286,T=30,_=15,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(576);v(q);var W=new Array(60);v(W);var B=new Array(512);v(B);var E=new Array(256);v(E);var P=new Array(29);v(P);var A,k,j,S=new Array(T);function C(Z,ce,ve,De,Ae){this.static_tree=Z,this.extra_bits=ce,this.extra_base=ve,this.elems=De,this.max_length=Ae,this.has_stree=Z&&Z.length}function D(Z,ce){this.dyn_tree=Z,this.max_code=0,this.stat_desc=ce}function R(Z){return Z<256?B[Z]:B[256+(Z>>>7)]}function L(Z,ce){Z.pending_buf[Z.pending++]=255&ce,Z.pending_buf[Z.pending++]=ce>>>8&255}function Y(Z,ce,ve){Z.bi_valid>16-ve?(Z.bi_buf|=ce<<Z.bi_valid&65535,L(Z,Z.bi_buf),Z.bi_buf=ce>>16-Z.bi_valid,Z.bi_valid+=ve-16):(Z.bi_buf|=ce<<Z.bi_valid&65535,Z.bi_valid+=ve)}function X(Z,ce,ve){Y(Z,ve[2*ce],ve[2*ce+1])}function ae(Z,ce){for(var ve=0;ve|=1&Z,Z>>>=1,ve<<=1,0<--ce;);return ve>>>1}function $(Z,ce,ve){var De,Ae,Ie=new Array(16),Ue=0;for(De=1;De<=_;De++)Ie[De]=Ue=Ue+ve[De-1]<<1;for(Ae=0;Ae<=ce;Ae++){var Ge=Z[2*Ae+1];Ge!==0&&(Z[2*Ae]=ae(Ie[Ge]++,Ge))}}function Q(Z){var ce;for(ce=0;ce<N;ce++)Z.dyn_ltree[2*ce]=0;for(ce=0;ce<T;ce++)Z.dyn_dtree[2*ce]=0;for(ce=0;ce<19;ce++)Z.bl_tree[2*ce]=0;Z.dyn_ltree[512]=1,Z.opt_len=Z.static_len=0,Z.last_lit=Z.matches=0}function z(Z){8<Z.bi_valid?L(Z,Z.bi_buf):0<Z.bi_valid&&(Z.pending_buf[Z.pending++]=Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0}function M(Z,ce,ve,De){var Ae=2*ce,Ie=2*ve;return Z[Ae]<Z[Ie]||Z[Ae]===Z[Ie]&&De[ce]<=De[ve]}function U(Z,ce,ve){for(var De=Z.heap[ve],Ae=ve<<1;Ae<=Z.heap_len&&(Ae<Z.heap_len&&M(ce,Z.heap[Ae+1],Z.heap[Ae],Z.depth)&&Ae++,!M(ce,De,Z.heap[Ae],Z.depth));)Z.heap[ve]=Z.heap[Ae],ve=Ae,Ae<<=1;Z.heap[ve]=De}function te(Z,ce,ve){var De,Ae,Ie,Ue,Ge=0;if(Z.last_lit!==0)for(;De=Z.pending_buf[Z.d_buf+2*Ge]<<8|Z.pending_buf[Z.d_buf+2*Ge+1],Ae=Z.pending_buf[Z.l_buf+Ge],Ge++,De===0?X(Z,Ae,ce):(X(Z,(Ie=E[Ae])+y+1,ce),(Ue=O[Ie])!==0&&Y(Z,Ae-=P[Ie],Ue),X(Z,Ie=R(--De),ve),(Ue=H[Ie])!==0&&Y(Z,De-=S[Ie],Ue)),Ge<Z.last_lit;);X(Z,256,ce)}function ie(Z,ce){var ve,De,Ae,Ie=ce.dyn_tree,Ue=ce.stat_desc.static_tree,Ge=ce.stat_desc.has_stree,Le=ce.stat_desc.elems,at=-1;for(Z.heap_len=0,Z.heap_max=573,ve=0;ve<Le;ve++)Ie[2*ve]!==0?(Z.heap[++Z.heap_len]=at=ve,Z.depth[ve]=0):Ie[2*ve+1]=0;for(;Z.heap_len<2;)Ie[2*(Ae=Z.heap[++Z.heap_len]=at<2?++at:0)]=1,Z.depth[Ae]=0,Z.opt_len--,Ge&&(Z.static_len-=Ue[2*Ae+1]);for(ce.max_code=at,ve=Z.heap_len>>1;1<=ve;ve--)U(Z,Ie,ve);for(Ae=Le;ve=Z.heap[1],Z.heap[1]=Z.heap[Z.heap_len--],U(Z,Ie,1),De=Z.heap[1],Z.heap[--Z.heap_max]=ve,Z.heap[--Z.heap_max]=De,Ie[2*Ae]=Ie[2*ve]+Ie[2*De],Z.depth[Ae]=(Z.depth[ve]>=Z.depth[De]?Z.depth[ve]:Z.depth[De])+1,Ie[2*ve+1]=Ie[2*De+1]=Ae,Z.heap[1]=Ae++,U(Z,Ie,1),2<=Z.heap_len;);Z.heap[--Z.heap_max]=Z.heap[1],(function(ut,Ce){var it,xt,jt,Ee,xe,Be,$e=Ce.dyn_tree,ye=Ce.max_code,oe=Ce.stat_desc.static_tree,me=Ce.stat_desc.has_stree,ue=Ce.stat_desc.extra_bits,ze=Ce.stat_desc.extra_base,tt=Ce.stat_desc.max_length,kt=0;for(Ee=0;Ee<=_;Ee++)ut.bl_count[Ee]=0;for($e[2*ut.heap[ut.heap_max]+1]=0,it=ut.heap_max+1;it<573;it++)tt<(Ee=$e[2*$e[2*(xt=ut.heap[it])+1]+1]+1)&&(Ee=tt,kt++),$e[2*xt+1]=Ee,ye<xt||(ut.bl_count[Ee]++,xe=0,ze<=xt&&(xe=ue[xt-ze]),Be=$e[2*xt],ut.opt_len+=Be*(Ee+xe),me&&(ut.static_len+=Be*(oe[2*xt+1]+xe)));if(kt!==0){do{for(Ee=tt-1;ut.bl_count[Ee]===0;)Ee--;ut.bl_count[Ee]--,ut.bl_count[Ee+1]+=2,ut.bl_count[tt]--,kt-=2}while(0<kt);for(Ee=tt;Ee!==0;Ee--)for(xt=ut.bl_count[Ee];xt!==0;)ye<(jt=ut.heap[--it])||($e[2*jt+1]!==Ee&&(ut.opt_len+=(Ee-$e[2*jt+1])*$e[2*jt],$e[2*jt+1]=Ee),xt--)}})(Z,ce),$(Ie,at,Z.bl_count)}function se(Z,ce,ve){var De,Ae,Ie=-1,Ue=ce[1],Ge=0,Le=7,at=4;for(Ue===0&&(Le=138,at=3),ce[2*(ve+1)+1]=65535,De=0;De<=ve;De++)Ae=Ue,Ue=ce[2*(De+1)+1],++Ge<Le&&Ae===Ue||(Ge<at?Z.bl_tree[2*Ae]+=Ge:Ae!==0?(Ae!==Ie&&Z.bl_tree[2*Ae]++,Z.bl_tree[32]++):Ge<=10?Z.bl_tree[34]++:Z.bl_tree[36]++,Ie=Ae,at=(Ge=0)===Ue?(Le=138,3):Ae===Ue?(Le=6,3):(Le=7,4))}function le(Z,ce,ve){var De,Ae,Ie=-1,Ue=ce[1],Ge=0,Le=7,at=4;for(Ue===0&&(Le=138,at=3),De=0;De<=ve;De++)if(Ae=Ue,Ue=ce[2*(De+1)+1],!(++Ge<Le&&Ae===Ue)){if(Ge<at)for(;X(Z,Ae,Z.bl_tree),--Ge!=0;);else Ae!==0?(Ae!==Ie&&(X(Z,Ae,Z.bl_tree),Ge--),X(Z,16,Z.bl_tree),Y(Z,Ge-3,2)):Ge<=10?(X(Z,17,Z.bl_tree),Y(Z,Ge-3,3)):(X(Z,18,Z.bl_tree),Y(Z,Ge-11,7));Ie=Ae,at=(Ge=0)===Ue?(Le=138,3):Ae===Ue?(Le=6,3):(Le=7,4)}}v(S);var Ne=!1;function ke(Z,ce,ve,De){Y(Z,0+(De?1:0),3),(function(Ae,Ie,Ue,Ge){z(Ae),L(Ae,Ue),L(Ae,~Ue),p.arraySet(Ae.pending_buf,Ae.window,Ie,Ue,Ae.pending),Ae.pending+=Ue})(Z,ce,ve)}b._tr_init=function(Z){Ne||((function(){var ce,ve,De,Ae,Ie,Ue=new Array(16);for(Ae=De=0;Ae<28;Ae++)for(P[Ae]=De,ce=0;ce<1<<O[Ae];ce++)E[De++]=Ae;for(E[De-1]=Ae,Ae=Ie=0;Ae<16;Ae++)for(S[Ae]=Ie,ce=0;ce<1<<H[Ae];ce++)B[Ie++]=Ae;for(Ie>>=7;Ae<T;Ae++)for(S[Ae]=Ie<<7,ce=0;ce<1<<H[Ae]-7;ce++)B[256+Ie++]=Ae;for(ve=0;ve<=_;ve++)Ue[ve]=0;for(ce=0;ce<=143;)q[2*ce+1]=8,ce++,Ue[8]++;for(;ce<=255;)q[2*ce+1]=9,ce++,Ue[9]++;for(;ce<=279;)q[2*ce+1]=7,ce++,Ue[7]++;for(;ce<=287;)q[2*ce+1]=8,ce++,Ue[8]++;for($(q,287,Ue),ce=0;ce<T;ce++)W[2*ce+1]=5,W[2*ce]=ae(ce,5);A=new C(q,O,257,N,_),k=new C(W,H,0,T,_),j=new C(new Array(0),F,0,19,7)})(),Ne=!0),Z.l_desc=new D(Z.dyn_ltree,A),Z.d_desc=new D(Z.dyn_dtree,k),Z.bl_desc=new D(Z.bl_tree,j),Z.bi_buf=0,Z.bi_valid=0,Q(Z)},b._tr_stored_block=ke,b._tr_flush_block=function(Z,ce,ve,De){var Ae,Ie,Ue=0;0<Z.level?(Z.strm.data_type===2&&(Z.strm.data_type=(function(Ge){var Le,at=4093624447;for(Le=0;Le<=31;Le++,at>>>=1)if(1&at&&Ge.dyn_ltree[2*Le]!==0)return 0;if(Ge.dyn_ltree[18]!==0||Ge.dyn_ltree[20]!==0||Ge.dyn_ltree[26]!==0)return 1;for(Le=32;Le<y;Le++)if(Ge.dyn_ltree[2*Le]!==0)return 1;return 0})(Z)),ie(Z,Z.l_desc),ie(Z,Z.d_desc),Ue=(function(Ge){var Le;for(se(Ge,Ge.dyn_ltree,Ge.l_desc.max_code),se(Ge,Ge.dyn_dtree,Ge.d_desc.max_code),ie(Ge,Ge.bl_desc),Le=18;3<=Le&&Ge.bl_tree[2*V[Le]+1]===0;Le--);return Ge.opt_len+=3*(Le+1)+5+5+4,Le})(Z),Ae=Z.opt_len+3+7>>>3,(Ie=Z.static_len+3+7>>>3)<=Ae&&(Ae=Ie)):Ae=Ie=ve+5,ve+4<=Ae&&ce!==-1?ke(Z,ce,ve,De):Z.strategy===4||Ie===Ae?(Y(Z,2+(De?1:0),3),te(Z,q,W)):(Y(Z,4+(De?1:0),3),(function(Ge,Le,at,ut){var Ce;for(Y(Ge,Le-257,5),Y(Ge,at-1,5),Y(Ge,ut-4,4),Ce=0;Ce<ut;Ce++)Y(Ge,Ge.bl_tree[2*V[Ce]+1],3);le(Ge,Ge.dyn_ltree,Le-1),le(Ge,Ge.dyn_dtree,at-1)})(Z,Z.l_desc.max_code+1,Z.d_desc.max_code+1,Ue+1),te(Z,Z.dyn_ltree,Z.dyn_dtree)),Q(Z),De&&z(Z)},b._tr_tally=function(Z,ce,ve){return Z.pending_buf[Z.d_buf+2*Z.last_lit]=ce>>>8&255,Z.pending_buf[Z.d_buf+2*Z.last_lit+1]=255&ce,Z.pending_buf[Z.l_buf+Z.last_lit]=255&ve,Z.last_lit++,ce===0?Z.dyn_ltree[2*ve]++:(Z.matches++,ce--,Z.dyn_ltree[2*(E[ve]+y+1)]++,Z.dyn_dtree[2*R(ce)]++),Z.last_lit===Z.lit_bufsize-1},b._tr_align=function(Z){Y(Z,2,3),X(Z,256,q),(function(ce){ce.bi_valid===16?(L(ce,ce.bi_buf),ce.bi_buf=0,ce.bi_valid=0):8<=ce.bi_valid&&(ce.pending_buf[ce.pending++]=255&ce.bi_buf,ce.bi_buf>>=8,ce.bi_valid-=8)})(Z)}},{"../utils/common":41}],53:[function(m,x,b){x.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(m,x,b){(function(p){(function(v,y){if(!v.setImmediate){var N,T,_,O,H=1,F={},V=!1,q=v.document,W=Object.getPrototypeOf&&Object.getPrototypeOf(v);W=W&&W.setTimeout?W:v,N={}.toString.call(v.process)==="[object process]"?function(A){d.nextTick((function(){E(A)}))}:(function(){if(v.postMessage&&!v.importScripts){var A=!0,k=v.onmessage;return v.onmessage=function(){A=!1},v.postMessage("","*"),v.onmessage=k,A}})()?(O="setImmediate$"+Math.random()+"$",v.addEventListener?v.addEventListener("message",P,!1):v.attachEvent("onmessage",P),function(A){v.postMessage(O+A,"*")}):v.MessageChannel?((_=new MessageChannel).port1.onmessage=function(A){E(A.data)},function(A){_.port2.postMessage(A)}):q&&"onreadystatechange"in q.createElement("script")?(T=q.documentElement,function(A){var k=q.createElement("script");k.onreadystatechange=function(){E(A),k.onreadystatechange=null,T.removeChild(k),k=null},T.appendChild(k)}):function(A){setTimeout(E,0,A)},W.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var k=new Array(arguments.length-1),j=0;j<k.length;j++)k[j]=arguments[j+1];var S={callback:A,args:k};return F[H]=S,N(H),H++},W.clearImmediate=B}function B(A){delete F[A]}function E(A){if(V)setTimeout(E,0,A);else{var k=F[A];if(k){V=!0;try{(function(j){var S=j.callback,C=j.args;switch(C.length){case 0:S();break;case 1:S(C[0]);break;case 2:S(C[0],C[1]);break;case 3:S(C[0],C[1],C[2]);break;default:S.apply(void 0,C)}})(k)}finally{B(A),V=!1}}}}function P(A){A.source===v&&typeof A.data=="string"&&A.data.indexOf(O)===0&&E(+A.data.slice(O.length))}})(typeof self>"u"?p===void 0?this:p:self)}).call(this,n!==void 0?n:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}))}).call(this)}).call(this,t("_process"),typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],t("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(t,f,h){(function(d){(function(){var n=/[\\^$.*+?()[\]{}|]/g,l=RegExp(n.source),i=typeof d=="object"&&d&&d.Object===Object&&d,r=typeof self=="object"&&self&&self.Object===Object&&self,s=i||r||Function("return this")(),c=Object.prototype.toString,u=s.Symbol,m=u?u.prototype:void 0,x=m?m.toString:void 0;function b(p){if(typeof p=="string")return p;if((function(y){return typeof y=="symbol"||(function(N){return!!N&&typeof N=="object"})(y)&&c.call(y)=="[object Symbol]"})(p))return x?x.call(p):"";var v=p+"";return v=="0"&&1/p==-1/0?"-0":v}f.exports=function(p){var v;return(p=(v=p)==null?"":b(v))&&l.test(p)?p.replace(n,"\\$&"):p}}).call(this)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(t,f,h){(function(d){(function(){var n="[object Arguments]",l="[object Map]",i="[object Object]",r="[object Set]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/^\./,m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,x=/\\(\\)?/g,b=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[n]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v["[object Function]"]=v[l]=v["[object Number]"]=v[i]=v["[object RegExp]"]=v[r]=v["[object String]"]=v["[object WeakMap]"]=!1;var y=typeof d=="object"&&d&&d.Object===Object&&d,N=typeof self=="object"&&self&&self.Object===Object&&self,T=y||N||Function("return this")(),_=typeof h=="object"&&h&&!h.nodeType&&h,O=_&&typeof f=="object"&&f&&!f.nodeType&&f,H=O&&O.exports===_&&y.process,F=(function(){try{return H&&H.binding("util")}catch{}})(),V=F&&F.isTypedArray;function q(Se,qe,ft,Ct){for(var er=-1,Rt=Se?Se.length:0;++er<Rt;){var Ht=Se[er];qe(Ct,Ht,ft(Ht),Se)}return Ct}function W(Se,qe){for(var ft=-1,Ct=Se?Se.length:0;++ft<Ct;)if(qe(Se[ft],ft,Se))return!0;return!1}function B(Se){var qe=!1;if(Se!=null&&typeof Se.toString!="function")try{qe=!!(Se+"")}catch{}return qe}function E(Se){var qe=-1,ft=Array(Se.size);return Se.forEach((function(Ct,er){ft[++qe]=[er,Ct]})),ft}function P(Se){var qe=-1,ft=Array(Se.size);return Se.forEach((function(Ct){ft[++qe]=Ct})),ft}var A,k,j,S=Array.prototype,C=Function.prototype,D=Object.prototype,R=T["__core-js_shared__"],L=(A=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",Y=C.toString,X=D.hasOwnProperty,ae=D.toString,$=RegExp("^"+Y.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=T.Symbol,z=T.Uint8Array,M=D.propertyIsEnumerable,U=S.splice,te=(k=Object.keys,j=Object,function(Se){return k(j(Se))}),ie=pe(T,"DataView"),se=pe(T,"Map"),le=pe(T,"Promise"),Ne=pe(T,"Set"),ke=pe(T,"WeakMap"),Z=pe(Object,"create"),ce=Me(ie),ve=Me(se),De=Me(le),Ae=Me(Ne),Ie=Me(ke),Ue=Q?Q.prototype:void 0,Ge=Ue?Ue.valueOf:void 0,Le=Ue?Ue.toString:void 0;function at(Se){var qe=-1,ft=Se?Se.length:0;for(this.clear();++qe<ft;){var Ct=Se[qe];this.set(Ct[0],Ct[1])}}function ut(Se){var qe=-1,ft=Se?Se.length:0;for(this.clear();++qe<ft;){var Ct=Se[qe];this.set(Ct[0],Ct[1])}}function Ce(Se){var qe=-1,ft=Se?Se.length:0;for(this.clear();++qe<ft;){var Ct=Se[qe];this.set(Ct[0],Ct[1])}}function it(Se){var qe=-1,ft=Se?Se.length:0;for(this.__data__=new Ce;++qe<ft;)this.add(Se[qe])}function xt(Se){this.__data__=new ut(Se)}function jt(Se,qe){var ft=Lt(Se)||Gt(Se)?(function(Ht,ir){for(var Zt=-1,qt=Array(Ht);++Zt<Ht;)qt[Zt]=ir(Zt);return qt})(Se.length,String):[],Ct=ft.length,er=!!Ct;for(var Rt in Se)!X.call(Se,Rt)||er&&(Rt=="length"||fe(Rt,Ct))||ft.push(Rt);return ft}function Ee(Se,qe){for(var ft=Se.length;ft--;)if(yt(Se[ft][0],qe))return ft;return-1}function xe(Se,qe,ft,Ct){return $e(Se,(function(er,Rt,Ht){qe(Ct,er,ft(er),Ht)})),Ct}at.prototype.clear=function(){this.__data__=Z?Z(null):{}},at.prototype.delete=function(Se){return this.has(Se)&&delete this.__data__[Se]},at.prototype.get=function(Se){var qe=this.__data__;if(Z){var ft=qe[Se];return ft==="__lodash_hash_undefined__"?void 0:ft}return X.call(qe,Se)?qe[Se]:void 0},at.prototype.has=function(Se){var qe=this.__data__;return Z?qe[Se]!==void 0:X.call(qe,Se)},at.prototype.set=function(Se,qe){return this.__data__[Se]=Z&&qe===void 0?"__lodash_hash_undefined__":qe,this},ut.prototype.clear=function(){this.__data__=[]},ut.prototype.delete=function(Se){var qe=this.__data__,ft=Ee(qe,Se);return!(ft<0)&&(ft==qe.length-1?qe.pop():U.call(qe,ft,1),!0)},ut.prototype.get=function(Se){var qe=this.__data__,ft=Ee(qe,Se);return ft<0?void 0:qe[ft][1]},ut.prototype.has=function(Se){return Ee(this.__data__,Se)>-1},ut.prototype.set=function(Se,qe){var ft=this.__data__,Ct=Ee(ft,Se);return Ct<0?ft.push([Se,qe]):ft[Ct][1]=qe,this},Ce.prototype.clear=function(){this.__data__={hash:new at,map:new(se||ut),string:new at}},Ce.prototype.delete=function(Se){return wt(this,Se).delete(Se)},Ce.prototype.get=function(Se){return wt(this,Se).get(Se)},Ce.prototype.has=function(Se){return wt(this,Se).has(Se)},Ce.prototype.set=function(Se,qe){return wt(this,Se).set(Se,qe),this},it.prototype.add=it.prototype.push=function(Se){return this.__data__.set(Se,"__lodash_hash_undefined__"),this},it.prototype.has=function(Se){return this.__data__.has(Se)},xt.prototype.clear=function(){this.__data__=new ut},xt.prototype.delete=function(Se){return this.__data__.delete(Se)},xt.prototype.get=function(Se){return this.__data__.get(Se)},xt.prototype.has=function(Se){return this.__data__.has(Se)},xt.prototype.set=function(Se,qe){var ft=this.__data__;if(ft instanceof ut){var Ct=ft.__data__;if(!se||Ct.length<199)return Ct.push([Se,qe]),this;ft=this.__data__=new Ce(Ct)}return ft.set(Se,qe),this};var Be,$e=(Be=function(Se,qe){return Se&&ye(Se,qe,pt)},function(Se,qe){if(Se==null)return Se;if(!Oe(Se))return Be(Se,qe);for(var ft=Se.length,Ct=-1,er=Object(Se);++Ct<ft&&qe(er[Ct],Ct,er)!==!1;);return Se}),ye=(function(Se){return function(qe,ft,Ct){for(var er=-1,Rt=Object(qe),Ht=Ct(qe),ir=Ht.length;ir--;){var Zt=Ht[++er];if(ft(Rt[Zt],Zt,Rt)===!1)break}return qe}})();function oe(Se,qe){for(var ft=0,Ct=(qe=He(qe,Se)?[qe]:we(qe)).length;Se!=null&&ft<Ct;)Se=Se[je(qe[ft++])];return ft&&ft==Ct?Se:void 0}function me(Se,qe){return Se!=null&&qe in Object(Se)}function ue(Se,qe,ft,Ct,er){return Se===qe||(Se==null||qe==null||!It(Se)&&!Tt(qe)?Se!=Se&&qe!=qe:(function(Rt,Ht,ir,Zt,qt,nr){var fr=Lt(Rt),rr=Lt(Ht),yr="[object Array]",xr="[object Array]";fr||(yr=(yr=Qe(Rt))==n?i:yr),rr||(xr=(xr=Qe(Ht))==n?i:xr);var Rr=yr==i&&!B(Rt),jr=xr==i&&!B(Ht),Ds=yr==xr;if(Ds&&!Rr)return nr||(nr=new xt),fr||Re(Rt)?st(Rt,Ht,ir,Zt,qt,nr):(function(Pr,Cr,es,Fs,da,kr,mn){switch(es){case"[object DataView]":if(Pr.byteLength!=Cr.byteLength||Pr.byteOffset!=Cr.byteOffset)return!1;Pr=Pr.buffer,Cr=Cr.buffer;case"[object ArrayBuffer]":return!(Pr.byteLength!=Cr.byteLength||!Fs(new z(Pr),new z(Cr)));case"[object Boolean]":case"[object Date]":case"[object Number]":return yt(+Pr,+Cr);case"[object Error]":return Pr.name==Cr.name&&Pr.message==Cr.message;case"[object RegExp]":case"[object String]":return Pr==Cr+"";case l:var kn=E;case r:var Ca=2&kr;if(kn||(kn=P),Pr.size!=Cr.size&&!Ca)return!1;var Un=mn.get(Pr);if(Un)return Un==Cr;kr|=1,mn.set(Pr,Cr);var Ts=st(kn(Pr),kn(Cr),Fs,da,kr,mn);return mn.delete(Pr),Ts;case"[object Symbol]":if(Ge)return Ge.call(Pr)==Ge.call(Cr)}return!1})(Rt,Ht,yr,ir,Zt,qt,nr);if(!(2&qt)){var Sr=Rr&&X.call(Rt,"__wrapped__"),Wr=jr&&X.call(Ht,"__wrapped__");if(Sr||Wr){var Qn=Sr?Rt.value():Rt,Ws=Wr?Ht.value():Ht;return nr||(nr=new xt),ir(Qn,Ws,Zt,qt,nr)}}return Ds?(nr||(nr=new xt),(function(Pr,Cr,es,Fs,da,kr){var mn=2&da,kn=pt(Pr),Ca=kn.length,Un=pt(Cr).length;if(Ca!=Un&&!mn)return!1;for(var Ts=Ca;Ts--;){var zr=kn[Ts];if(!(mn?zr in Cr:X.call(Cr,zr)))return!1}var Ua=kr.get(Pr);if(Ua&&kr.get(Cr))return Ua==Cr;var ua=!0;kr.set(Pr,Cr),kr.set(Cr,Pr);for(var tn=mn;++Ts<Ca;){zr=kn[Ts];var ps=Pr[zr],Ys=Cr[zr];if(Fs)var Xt=mn?Fs(Ys,ps,zr,Cr,Pr,kr):Fs(ps,Ys,zr,Pr,Cr,kr);if(!(Xt===void 0?ps===Ys||es(ps,Ys,Fs,da,kr):Xt)){ua=!1;break}tn||(tn=zr=="constructor")}if(ua&&!tn){var hn=Pr.constructor,_s=Cr.constructor;hn==_s||!("constructor"in Pr)||!("constructor"in Cr)||typeof hn=="function"&&hn instanceof hn&&typeof _s=="function"&&_s instanceof _s||(ua=!1)}return kr.delete(Pr),kr.delete(Cr),ua})(Rt,Ht,ir,Zt,qt,nr)):!1})(Se,qe,ue,ft,Ct,er))}function ze(Se){return!(!It(Se)||(function(qe){return!!L&&L in qe})(Se))&&(ot(Se)||B(Se)?$:b).test(Me(Se))}function tt(Se){return typeof Se=="function"?Se:Se==null?Ot:typeof Se=="object"?Lt(Se)?(function(Ct,er){return He(Ct)&&lt(er)?Pe(je(Ct),er):function(Rt){var Ht=(function(ir,Zt,qt){var nr=ir==null?void 0:oe(ir,Zt);return nr===void 0?qt:nr})(Rt,Ct);return Ht===void 0&&Ht===er?(function(ir,Zt){return ir!=null&&(function(qt,nr,fr){nr=He(nr,qt)?[nr]:we(nr);for(var rr,yr=-1,xr=nr.length;++yr<xr;){var Rr=je(nr[yr]);if(!(rr=qt!=null&&fr(qt,Rr)))break;qt=qt[Rr]}return rr||!!(xr=qt?qt.length:0)&&ht(xr)&&fe(Rr,xr)&&(Lt(qt)||Gt(qt))})(ir,Zt,me)})(Rt,Ct):ue(er,Ht,void 0,3)}})(Se[0],Se[1]):(function(Ct){var er=(function(Rt){for(var Ht=pt(Rt),ir=Ht.length;ir--;){var Zt=Ht[ir],qt=Rt[Zt];Ht[ir]=[Zt,qt,lt(qt)]}return Ht})(Ct);return er.length==1&&er[0][2]?Pe(er[0][0],er[0][1]):function(Rt){return Rt===Ct||(function(Ht,ir,Zt,qt){var nr=Zt.length,fr=nr;if(Ht==null)return!fr;for(Ht=Object(Ht);nr--;){var rr=Zt[nr];if(rr[2]?rr[1]!==Ht[rr[0]]:!(rr[0]in Ht))return!1}for(;++nr<fr;){var yr=(rr=Zt[nr])[0],xr=Ht[yr],Rr=rr[1];if(rr[2]){if(xr===void 0&&!(yr in Ht))return!1}else{var jr=new xt,Ds;if(!(Ds===void 0?ue(Rr,xr,qt,3,jr):Ds))return!1}}return!0})(Rt,Ct,er)}})(Se):He(qe=Se)?(ft=je(qe),function(Ct){return Ct?.[ft]}):(function(Ct){return function(er){return oe(er,Ct)}})(qe);var qe,ft}function kt(Se){if(ft=(qe=Se)&&qe.constructor,Ct=typeof ft=="function"&&ft.prototype||D,qe!==Ct)return te(Se);var qe,ft,Ct,er=[];for(var Rt in Object(Se))X.call(Se,Rt)&&Rt!="constructor"&&er.push(Rt);return er}function we(Se){return Lt(Se)?Se:rt(Se)}function st(Se,qe,ft,Ct,er,Rt){var Ht=2&er,ir=Se.length,Zt=qe.length;if(ir!=Zt&&!(Ht&&Zt>ir))return!1;var qt=Rt.get(Se);if(qt&&Rt.get(qe))return qt==qe;var nr=-1,fr=!0,rr=1&er?new it:void 0;for(Rt.set(Se,qe),Rt.set(qe,Se);++nr<ir;){var yr=Se[nr],xr=qe[nr];if(Ct)var Rr=Ht?Ct(xr,yr,nr,qe,Se,Rt):Ct(yr,xr,nr,Se,qe,Rt);if(Rr!==void 0){if(Rr)continue;fr=!1;break}if(rr){if(!W(qe,(function(jr,Ds){if(!rr.has(Ds)&&(yr===jr||ft(yr,jr,Ct,er,Rt)))return rr.add(Ds)}))){fr=!1;break}}else if(yr!==xr&&!ft(yr,xr,Ct,er,Rt)){fr=!1;break}}return Rt.delete(Se),Rt.delete(qe),fr}function wt(Se,qe){var ft,Ct,er=Se.__data__;return((Ct=typeof(ft=qe))=="string"||Ct=="number"||Ct=="symbol"||Ct=="boolean"?ft!=="__proto__":ft===null)?er[typeof qe=="string"?"string":"hash"]:er.map}function pe(Se,qe){var ft=(function(Ct,er){return Ct?.[er]})(Se,qe);return ze(ft)?ft:void 0}var Qe=function(Se){return ae.call(Se)};function fe(Se,qe){return!!(qe=qe??9007199254740991)&&(typeof Se=="number"||p.test(Se))&&Se>-1&&Se%1==0&&Se<qe}function He(Se,qe){if(Lt(Se))return!1;var ft=typeof Se;return!(ft!="number"&&ft!="symbol"&&ft!="boolean"&&Se!=null&&!Mt(Se))||c.test(Se)||!s.test(Se)||qe!=null&&Se in Object(qe)}function lt(Se){return Se==Se&&!It(Se)}function Pe(Se,qe){return function(ft){return ft!=null&&ft[Se]===qe&&(qe!==void 0||Se in Object(ft))}}(ie&&Qe(new ie(new ArrayBuffer(1)))!="[object DataView]"||se&&Qe(new se)!=l||le&&Qe(le.resolve())!="[object Promise]"||Ne&&Qe(new Ne)!=r||ke&&Qe(new ke)!="[object WeakMap]")&&(Qe=function(Se){var qe=ae.call(Se),ft=qe==i?Se.constructor:void 0,Ct=ft?Me(ft):void 0;if(Ct)switch(Ct){case ce:return"[object DataView]";case ve:return l;case De:return"[object Promise]";case Ae:return r;case Ie:return"[object WeakMap]"}return qe});var rt=mt((function(Se){var qe;Se=(qe=Se)==null?"":(function(Ct){if(typeof Ct=="string")return Ct;if(Mt(Ct))return Le?Le.call(Ct):"";var er=Ct+"";return er=="0"&&1/Ct==-1/0?"-0":er})(qe);var ft=[];return u.test(Se)&&ft.push(""),Se.replace(m,(function(Ct,er,Rt,Ht){ft.push(Rt?Ht.replace(x,"$1"):er||Ct)})),ft}));function je(Se){if(typeof Se=="string"||Mt(Se))return Se;var qe=Se+"";return qe=="0"&&1/Se==-1/0?"-0":qe}function Me(Se){if(Se!=null){try{return Y.call(Se)}catch{}try{return Se+""}catch{}}return""}var Ye,dt=(Ye=function(Se,qe,ft){X.call(Se,ft)?Se[ft].push(qe):Se[ft]=[qe]},function(Se,qe){var ft=Lt(Se)?q:xe,Ct={};return ft(Se,Ye,tt(qe),Ct)});function mt(Se,qe){if(typeof Se!="function"||qe&&typeof qe!="function")throw new TypeError("Expected a function");var ft=function(){var Ct=arguments,er=qe?qe.apply(this,Ct):Ct[0],Rt=ft.cache;if(Rt.has(er))return Rt.get(er);var Ht=Se.apply(this,Ct);return ft.cache=Rt.set(er,Ht),Ht};return ft.cache=new(mt.Cache||Ce),ft}function yt(Se,qe){return Se===qe||Se!=Se&&qe!=qe}function Gt(Se){return(function(qe){return Tt(qe)&&Oe(qe)})(Se)&&X.call(Se,"callee")&&(!M.call(Se,"callee")||ae.call(Se)==n)}mt.Cache=Ce;var Lt=Array.isArray;function Oe(Se){return Se!=null&&ht(Se.length)&&!ot(Se)}function ot(Se){var qe=It(Se)?ae.call(Se):"";return qe=="[object Function]"||qe=="[object GeneratorFunction]"}function ht(Se){return typeof Se=="number"&&Se>-1&&Se%1==0&&Se<=9007199254740991}function It(Se){var qe=typeof Se;return!!Se&&(qe=="object"||qe=="function")}function Tt(Se){return!!Se&&typeof Se=="object"}function Mt(Se){return typeof Se=="symbol"||Tt(Se)&&ae.call(Se)=="[object Symbol]"}var Re=V?(function(Se){return function(qe){return Se(qe)}})(V):function(Se){return Tt(Se)&&ht(Se.length)&&!!v[ae.call(Se)]};function pt(Se){return Oe(Se)?jt(Se):kt(Se)}function Ot(Se){return Se}f.exports=dt}).call(this)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(t,f,h){var d=Object.prototype.toString;f.exports=function(n){return n===!0||n===!1||(function(l){return!!l&&typeof l=="object"})(n)&&d.call(n)=="[object Boolean]"}},{}],445:[function(t,f,h){(function(d){(function(){var n="[object Arguments]",l="[object Map]",i="[object Object]",r="[object Set]",s=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[n]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u[l]=u["[object Number]"]=u[i]=u["[object RegExp]"]=u[r]=u["[object String]"]=u["[object WeakMap]"]=!1;var m=typeof d=="object"&&d&&d.Object===Object&&d,x=typeof self=="object"&&self&&self.Object===Object&&self,b=m||x||Function("return this")(),p=typeof h=="object"&&h&&!h.nodeType&&h,v=p&&typeof f=="object"&&f&&!f.nodeType&&f,y=v&&v.exports===p,N=y&&m.process,T=(function(){try{return N&&N.binding&&N.binding("util")}catch{}})(),_=T&&T.isTypedArray;function O(je,Me){for(var Ye=-1,dt=je==null?0:je.length;++Ye<dt;)if(Me(je[Ye],Ye,je))return!0;return!1}function H(je){var Me=-1,Ye=Array(je.size);return je.forEach((function(dt,mt){Ye[++Me]=[mt,dt]})),Ye}function F(je){var Me=-1,Ye=Array(je.size);return je.forEach((function(dt){Ye[++Me]=dt})),Ye}var V,q,W,B=Array.prototype,E=Function.prototype,P=Object.prototype,A=b["__core-js_shared__"],k=E.toString,j=P.hasOwnProperty,S=(V=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"",C=P.toString,D=RegExp("^"+k.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=y?b.Buffer:void 0,L=b.Symbol,Y=b.Uint8Array,X=P.propertyIsEnumerable,ae=B.splice,$=L?L.toStringTag:void 0,Q=Object.getOwnPropertySymbols,z=R?R.isBuffer:void 0,M=(q=Object.keys,W=Object,function(je){return q(W(je))}),U=me(b,"DataView"),te=me(b,"Map"),ie=me(b,"Promise"),se=me(b,"Set"),le=me(b,"WeakMap"),Ne=me(Object,"create"),ke=kt(U),Z=kt(te),ce=kt(ie),ve=kt(se),De=kt(le),Ae=L?L.prototype:void 0,Ie=Ae?Ae.valueOf:void 0;function Ue(je){var Me=-1,Ye=je==null?0:je.length;for(this.clear();++Me<Ye;){var dt=je[Me];this.set(dt[0],dt[1])}}function Ge(je){var Me=-1,Ye=je==null?0:je.length;for(this.clear();++Me<Ye;){var dt=je[Me];this.set(dt[0],dt[1])}}function Le(je){var Me=-1,Ye=je==null?0:je.length;for(this.clear();++Me<Ye;){var dt=je[Me];this.set(dt[0],dt[1])}}function at(je){var Me=-1,Ye=je==null?0:je.length;for(this.__data__=new Le;++Me<Ye;)this.add(je[Me])}function ut(je){var Me=this.__data__=new Ge(je);this.size=Me.size}function Ce(je,Me){var Ye=wt(je),dt=!Ye&&st(je),mt=!Ye&&!dt&&pe(je),yt=!Ye&&!dt&&!mt&&Pe(je),Gt=Ye||dt||mt||yt,Lt=Gt?(function(ht,It){for(var Tt=-1,Mt=Array(ht);++Tt<ht;)Mt[Tt]=It(Tt);return Mt})(je.length,String):[],Oe=Lt.length;for(var ot in je)!j.call(je,ot)||Gt&&(ot=="length"||mt&&(ot=="offset"||ot=="parent")||yt&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||tt(ot,Oe))||Lt.push(ot);return Lt}function it(je,Me){for(var Ye=je.length;Ye--;)if(we(je[Ye][0],Me))return Ye;return-1}function xt(je){return je==null?je===void 0?"[object Undefined]":"[object Null]":$&&$ in Object(je)?(function(Me){var Ye=j.call(Me,$),dt=Me[$];try{Me[$]=void 0;var mt=!0}catch{}var yt=C.call(Me);return mt&&(Ye?Me[$]=dt:delete Me[$]),yt})(je):(function(Me){return C.call(Me)})(je)}function jt(je){return lt(je)&&xt(je)==n}function Ee(je,Me,Ye,dt,mt){return je===Me||(je==null||Me==null||!lt(je)&&!lt(Me)?je!=je&&Me!=Me:(function(yt,Gt,Lt,Oe,ot,ht){var It=wt(yt),Tt=wt(Gt),Mt=It?"[object Array]":ze(yt),Re=Tt?"[object Array]":ze(Gt),pt=(Mt=Mt==n?i:Mt)==i,Ot=(Re=Re==n?i:Re)==i,Se=Mt==Re;if(Se&&pe(yt)){if(!pe(Gt))return!1;It=!0,pt=!1}if(Se&&!pt)return ht||(ht=new ut),It||Pe(yt)?$e(yt,Gt,Lt,Oe,ot,ht):(function(Rt,Ht,ir,Zt,qt,nr,fr){switch(ir){case"[object DataView]":if(Rt.byteLength!=Ht.byteLength||Rt.byteOffset!=Ht.byteOffset)return!1;Rt=Rt.buffer,Ht=Ht.buffer;case"[object ArrayBuffer]":return!(Rt.byteLength!=Ht.byteLength||!nr(new Y(Rt),new Y(Ht)));case"[object Boolean]":case"[object Date]":case"[object Number]":return we(+Rt,+Ht);case"[object Error]":return Rt.name==Ht.name&&Rt.message==Ht.message;case"[object RegExp]":case"[object String]":return Rt==Ht+"";case l:var rr=H;case r:var yr=1&Zt;if(rr||(rr=F),Rt.size!=Ht.size&&!yr)return!1;var xr=fr.get(Rt);if(xr)return xr==Ht;Zt|=2,fr.set(Rt,Ht);var Rr=$e(rr(Rt),rr(Ht),Zt,qt,nr,fr);return fr.delete(Rt),Rr;case"[object Symbol]":if(Ie)return Ie.call(Rt)==Ie.call(Ht)}return!1})(yt,Gt,Mt,Lt,Oe,ot,ht);if(!(1&Lt)){var qe=pt&&j.call(yt,"__wrapped__"),ft=Ot&&j.call(Gt,"__wrapped__");if(qe||ft){var Ct=qe?yt.value():yt,er=ft?Gt.value():Gt;return ht||(ht=new ut),ot(Ct,er,Lt,Oe,ht)}}return Se?(ht||(ht=new ut),(function(Rt,Ht,ir,Zt,qt,nr){var fr=1&ir,rr=ye(Rt),yr=rr.length,xr=ye(Ht).length;if(yr!=xr&&!fr)return!1;for(var Rr=yr;Rr--;){var jr=rr[Rr];if(!(fr?jr in Ht:j.call(Ht,jr)))return!1}var Ds=nr.get(Rt);if(Ds&&nr.get(Ht))return Ds==Ht;var Sr=!0;nr.set(Rt,Ht),nr.set(Ht,Rt);for(var Wr=fr;++Rr<yr;){jr=rr[Rr];var Qn=Rt[jr],Ws=Ht[jr];if(Zt)var Pr=fr?Zt(Ws,Qn,jr,Ht,Rt,nr):Zt(Qn,Ws,jr,Rt,Ht,nr);if(!(Pr===void 0?Qn===Ws||qt(Qn,Ws,ir,Zt,nr):Pr)){Sr=!1;break}Wr||(Wr=jr=="constructor")}if(Sr&&!Wr){var Cr=Rt.constructor,es=Ht.constructor;Cr==es||!("constructor"in Rt)||!("constructor"in Ht)||typeof Cr=="function"&&Cr instanceof Cr&&typeof es=="function"&&es instanceof es||(Sr=!1)}return nr.delete(Rt),nr.delete(Ht),Sr})(yt,Gt,Lt,Oe,ot,ht)):!1})(je,Me,Ye,dt,Ee,mt))}function xe(je){return!(!He(je)||(function(Me){return!!S&&S in Me})(je))&&(Qe(je)?D:s).test(kt(je))}function Be(je){if(Ye=(Me=je)&&Me.constructor,dt=typeof Ye=="function"&&Ye.prototype||P,Me!==dt)return M(je);var Me,Ye,dt,mt=[];for(var yt in Object(je))j.call(je,yt)&&yt!="constructor"&&mt.push(yt);return mt}function $e(je,Me,Ye,dt,mt,yt){var Gt=1&Ye,Lt=je.length,Oe=Me.length;if(Lt!=Oe&&!(Gt&&Oe>Lt))return!1;var ot=yt.get(je);if(ot&&yt.get(Me))return ot==Me;var ht=-1,It=!0,Tt=2&Ye?new at:void 0;for(yt.set(je,Me),yt.set(Me,je);++ht<Lt;){var Mt=je[ht],Re=Me[ht];if(dt)var pt=Gt?dt(Re,Mt,ht,Me,je,yt):dt(Mt,Re,ht,je,Me,yt);if(pt!==void 0){if(pt)continue;It=!1;break}if(Tt){if(!O(Me,(function(Ot,Se){if(qe=Se,!Tt.has(qe)&&(Mt===Ot||mt(Mt,Ot,Ye,dt,yt)))return Tt.push(Se);var qe}))){It=!1;break}}else if(Mt!==Re&&!mt(Mt,Re,Ye,dt,yt)){It=!1;break}}return yt.delete(je),yt.delete(Me),It}function ye(je){return(function(Me,Ye,dt){var mt=Ye(Me);return wt(Me)?mt:(function(yt,Gt){for(var Lt=-1,Oe=Gt.length,ot=yt.length;++Lt<Oe;)yt[ot+Lt]=Gt[Lt];return yt})(mt,dt(Me))})(je,rt,ue)}function oe(je,Me){var Ye,dt,mt=je.__data__;return((dt=typeof(Ye=Me))=="string"||dt=="number"||dt=="symbol"||dt=="boolean"?Ye!=="__proto__":Ye===null)?mt[typeof Me=="string"?"string":"hash"]:mt.map}function me(je,Me){var Ye=(function(dt,mt){return dt?.[mt]})(je,Me);return xe(Ye)?Ye:void 0}Ue.prototype.clear=function(){this.__data__=Ne?Ne(null):{},this.size=0},Ue.prototype.delete=function(je){var Me=this.has(je)&&delete this.__data__[je];return this.size-=Me?1:0,Me},Ue.prototype.get=function(je){var Me=this.__data__;if(Ne){var Ye=Me[je];return Ye==="__lodash_hash_undefined__"?void 0:Ye}return j.call(Me,je)?Me[je]:void 0},Ue.prototype.has=function(je){var Me=this.__data__;return Ne?Me[je]!==void 0:j.call(Me,je)},Ue.prototype.set=function(je,Me){var Ye=this.__data__;return this.size+=this.has(je)?0:1,Ye[je]=Ne&&Me===void 0?"__lodash_hash_undefined__":Me,this},Ge.prototype.clear=function(){this.__data__=[],this.size=0},Ge.prototype.delete=function(je){var Me=this.__data__,Ye=it(Me,je);return!(Ye<0)&&(Ye==Me.length-1?Me.pop():ae.call(Me,Ye,1),--this.size,!0)},Ge.prototype.get=function(je){var Me=this.__data__,Ye=it(Me,je);return Ye<0?void 0:Me[Ye][1]},Ge.prototype.has=function(je){return it(this.__data__,je)>-1},Ge.prototype.set=function(je,Me){var Ye=this.__data__,dt=it(Ye,je);return dt<0?(++this.size,Ye.push([je,Me])):Ye[dt][1]=Me,this},Le.prototype.clear=function(){this.size=0,this.__data__={hash:new Ue,map:new(te||Ge),string:new Ue}},Le.prototype.delete=function(je){var Me=oe(this,je).delete(je);return this.size-=Me?1:0,Me},Le.prototype.get=function(je){return oe(this,je).get(je)},Le.prototype.has=function(je){return oe(this,je).has(je)},Le.prototype.set=function(je,Me){var Ye=oe(this,je),dt=Ye.size;return Ye.set(je,Me),this.size+=Ye.size==dt?0:1,this},at.prototype.add=at.prototype.push=function(je){return this.__data__.set(je,"__lodash_hash_undefined__"),this},at.prototype.has=function(je){return this.__data__.has(je)},ut.prototype.clear=function(){this.__data__=new Ge,this.size=0},ut.prototype.delete=function(je){var Me=this.__data__,Ye=Me.delete(je);return this.size=Me.size,Ye},ut.prototype.get=function(je){return this.__data__.get(je)},ut.prototype.has=function(je){return this.__data__.has(je)},ut.prototype.set=function(je,Me){var Ye=this.__data__;if(Ye instanceof Ge){var dt=Ye.__data__;if(!te||dt.length<199)return dt.push([je,Me]),this.size=++Ye.size,this;Ye=this.__data__=new Le(dt)}return Ye.set(je,Me),this.size=Ye.size,this};var ue=Q?function(je){return je==null?[]:(je=Object(je),(function(Me,Ye){for(var dt=-1,mt=Me==null?0:Me.length,yt=0,Gt=[];++dt<mt;){var Lt=Me[dt];Ye(Lt,dt,Me)&&(Gt[yt++]=Lt)}return Gt})(Q(je),(function(Me){return X.call(je,Me)})))}:function(){return[]},ze=xt;function tt(je,Me){return!!(Me=Me??9007199254740991)&&(typeof je=="number"||c.test(je))&&je>-1&&je%1==0&&je<Me}function kt(je){if(je!=null){try{return k.call(je)}catch{}try{return je+""}catch{}}return""}function we(je,Me){return je===Me||je!=je&&Me!=Me}(U&&ze(new U(new ArrayBuffer(1)))!="[object DataView]"||te&&ze(new te)!=l||ie&&ze(ie.resolve())!="[object Promise]"||se&&ze(new se)!=r||le&&ze(new le)!="[object WeakMap]")&&(ze=function(je){var Me=xt(je),Ye=Me==i?je.constructor:void 0,dt=Ye?kt(Ye):"";if(dt)switch(dt){case ke:return"[object DataView]";case Z:return l;case ce:return"[object Promise]";case ve:return r;case De:return"[object WeakMap]"}return Me});var st=jt((function(){return arguments})())?jt:function(je){return lt(je)&&j.call(je,"callee")&&!X.call(je,"callee")},wt=Array.isArray,pe=z||function(){return!1};function Qe(je){if(!He(je))return!1;var Me=xt(je);return Me=="[object Function]"||Me=="[object GeneratorFunction]"||Me=="[object AsyncFunction]"||Me=="[object Proxy]"}function fe(je){return typeof je=="number"&&je>-1&&je%1==0&&je<=9007199254740991}function He(je){var Me=typeof je;return je!=null&&(Me=="object"||Me=="function")}function lt(je){return je!=null&&typeof je=="object"}var Pe=_?(function(je){return function(Me){return je(Me)}})(_):function(je){return lt(je)&&fe(je.length)&&!!u[xt(je)]};function rt(je){return(Me=je)!=null&&fe(Me.length)&&!Qe(Me)?Ce(je):Be(je);var Me}f.exports=function(je,Me){return Ee(je,Me)}}).call(this)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(t,f,h){(function(d){(function(){var n=typeof d=="object"&&d&&d.Object===Object&&d,l=typeof self=="object"&&self&&self.Object===Object&&self,i=n||l||Function("return this")(),r=Object.prototype,s=r.hasOwnProperty,c=r.toString,u=i.Symbol,m=u?u.toStringTag:void 0;function x(b){return b==null?b===void 0?"[object Undefined]":"[object Null]":m&&m in Object(b)?(function(p){var v=s.call(p,m),y=p[m];try{p[m]=void 0;var N=!0}catch{}var T=c.call(p);return N&&(v?p[m]=y:delete p[m]),T})(b):(function(p){return c.call(p)})(b)}f.exports=function(b){if(!(function(v){var y=typeof v;return v!=null&&(y=="object"||y=="function")})(b))return!1;var p=x(b);return p=="[object Function]"||p=="[object GeneratorFunction]"||p=="[object AsyncFunction]"||p=="[object Proxy]"}}).call(this)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(t,f,h){f.exports=function(d){return d==null}},{}],448:[function(t,f,h){f.exports=function(d){return d===void 0}},{}],449:[function(t,f,h){(function(d){(function(){var n=/^\[object .+?Constructor\]$/,l=typeof d=="object"&&d&&d.Object===Object&&d,i=typeof self=="object"&&self&&self.Object===Object&&self,r=l||i||Function("return this")();function s(L,Y){return!!(L&&L.length)&&(function(X,ae,$){if(ae!=ae)return(function(M,U,te,ie){for(var se=M.length,le=te+-1;++le<se;)if(U(M[le],le,M))return le;return-1})(X,c,$);for(var Q=$-1,z=X.length;++Q<z;)if(X[Q]===ae)return Q;return-1})(L,Y,0)>-1}function c(L){return L!=L}function u(L,Y){return L.has(Y)}function m(L){var Y=-1,X=Array(L.size);return L.forEach((function(ae){X[++Y]=ae})),X}var x,b=Array.prototype,p=Function.prototype,v=Object.prototype,y=r["__core-js_shared__"],N=(x=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",T=p.toString,_=v.hasOwnProperty,O=v.toString,H=RegExp("^"+T.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=b.splice,V=D(r,"Map"),q=D(r,"Set"),W=D(Object,"create");function B(L){var Y=-1,X=L?L.length:0;for(this.clear();++Y<X;){var ae=L[Y];this.set(ae[0],ae[1])}}function E(L){var Y=-1,X=L?L.length:0;for(this.clear();++Y<X;){var ae=L[Y];this.set(ae[0],ae[1])}}function P(L){var Y=-1,X=L?L.length:0;for(this.clear();++Y<X;){var ae=L[Y];this.set(ae[0],ae[1])}}function A(L){var Y=-1,X=L?L.length:0;for(this.__data__=new P;++Y<X;)this.add(L[Y])}function k(L,Y){for(var X,ae,$=L.length;$--;)if((X=L[$][0])===(ae=Y)||X!=X&&ae!=ae)return $;return-1}function j(L){return!(!R(L)||(Y=L,N&&N in Y))&&((function(X){var ae=R(X)?O.call(X):"";return ae=="[object Function]"||ae=="[object GeneratorFunction]"})(L)||(function(X){var ae=!1;if(X!=null&&typeof X.toString!="function")try{ae=!!(X+"")}catch{}return ae})(L)?H:n).test((function(X){if(X!=null){try{return T.call(X)}catch{}try{return X+""}catch{}}return""})(L));var Y}B.prototype.clear=function(){this.__data__=W?W(null):{}},B.prototype.delete=function(L){return this.has(L)&&delete this.__data__[L]},B.prototype.get=function(L){var Y=this.__data__;if(W){var X=Y[L];return X==="__lodash_hash_undefined__"?void 0:X}return _.call(Y,L)?Y[L]:void 0},B.prototype.has=function(L){var Y=this.__data__;return W?Y[L]!==void 0:_.call(Y,L)},B.prototype.set=function(L,Y){return this.__data__[L]=W&&Y===void 0?"__lodash_hash_undefined__":Y,this},E.prototype.clear=function(){this.__data__=[]},E.prototype.delete=function(L){var Y=this.__data__,X=k(Y,L);return!(X<0)&&(X==Y.length-1?Y.pop():F.call(Y,X,1),!0)},E.prototype.get=function(L){var Y=this.__data__,X=k(Y,L);return X<0?void 0:Y[X][1]},E.prototype.has=function(L){return k(this.__data__,L)>-1},E.prototype.set=function(L,Y){var X=this.__data__,ae=k(X,L);return ae<0?X.push([L,Y]):X[ae][1]=Y,this},P.prototype.clear=function(){this.__data__={hash:new B,map:new(V||E),string:new B}},P.prototype.delete=function(L){return C(this,L).delete(L)},P.prototype.get=function(L){return C(this,L).get(L)},P.prototype.has=function(L){return C(this,L).has(L)},P.prototype.set=function(L,Y){return C(this,L).set(L,Y),this},A.prototype.add=A.prototype.push=function(L){return this.__data__.set(L,"__lodash_hash_undefined__"),this},A.prototype.has=function(L){return this.__data__.has(L)};var S=q&&1/m(new q([,-0]))[1]==1/0?function(L){return new q(L)}:function(){};function C(L,Y){var X,ae,$=L.__data__;return((ae=typeof(X=Y))=="string"||ae=="number"||ae=="symbol"||ae=="boolean"?X!=="__proto__":X===null)?$[typeof Y=="string"?"string":"hash"]:$.map}function D(L,Y){var X=(function(ae,$){return ae?.[$]})(L,Y);return j(X)?X:void 0}function R(L){var Y=typeof L;return!!L&&(Y=="object"||Y=="function")}f.exports=function(L){return L&&L.length?(function(Y,X,ae){var $=-1,Q=s,z=Y.length,M=!0,U=[],te=U;if(z>=200){var ie=S(Y);if(ie)return m(ie);M=!1,Q=u,te=new A}else te=U;e:for(;++$<z;){var se=Y[$],le=se;if(se=se!==0?se:0,M&&le==le){for(var Ne=te.length;Ne--;)if(te[Ne]===le)continue e;U.push(se)}else Q(te,le,ae)||(te!==U&&te.push(le),U.push(se))}return U})(L):[]}}).call(this)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(t,f,h){var d=t("inherits"),n=t("hash-base"),l=t("safe-buffer").Buffer,i=new Array(16);function r(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function s(b,p){return b<<p|b>>>32-p}function c(b,p,v,y,N,T,_){return s(b+(p&v|~p&y)+N+T|0,_)+p|0}function u(b,p,v,y,N,T,_){return s(b+(p&y|v&~y)+N+T|0,_)+p|0}function m(b,p,v,y,N,T,_){return s(b+(p^v^y)+N+T|0,_)+p|0}function x(b,p,v,y,N,T,_){return s(b+(v^(p|~y))+N+T|0,_)+p|0}d(r,n),r.prototype._update=function(){for(var b=i,p=0;p<16;++p)b[p]=this._block.readInt32LE(4*p);var v=this._a,y=this._b,N=this._c,T=this._d;v=c(v,y,N,T,b[0],3614090360,7),T=c(T,v,y,N,b[1],3905402710,12),N=c(N,T,v,y,b[2],606105819,17),y=c(y,N,T,v,b[3],3250441966,22),v=c(v,y,N,T,b[4],4118548399,7),T=c(T,v,y,N,b[5],1200080426,12),N=c(N,T,v,y,b[6],2821735955,17),y=c(y,N,T,v,b[7],4249261313,22),v=c(v,y,N,T,b[8],1770035416,7),T=c(T,v,y,N,b[9],2336552879,12),N=c(N,T,v,y,b[10],4294925233,17),y=c(y,N,T,v,b[11],2304563134,22),v=c(v,y,N,T,b[12],1804603682,7),T=c(T,v,y,N,b[13],4254626195,12),N=c(N,T,v,y,b[14],2792965006,17),v=u(v,y=c(y,N,T,v,b[15],1236535329,22),N,T,b[1],4129170786,5),T=u(T,v,y,N,b[6],3225465664,9),N=u(N,T,v,y,b[11],643717713,14),y=u(y,N,T,v,b[0],3921069994,20),v=u(v,y,N,T,b[5],3593408605,5),T=u(T,v,y,N,b[10],38016083,9),N=u(N,T,v,y,b[15],3634488961,14),y=u(y,N,T,v,b[4],3889429448,20),v=u(v,y,N,T,b[9],568446438,5),T=u(T,v,y,N,b[14],3275163606,9),N=u(N,T,v,y,b[3],4107603335,14),y=u(y,N,T,v,b[8],1163531501,20),v=u(v,y,N,T,b[13],2850285829,5),T=u(T,v,y,N,b[2],4243563512,9),N=u(N,T,v,y,b[7],1735328473,14),v=m(v,y=u(y,N,T,v,b[12],2368359562,20),N,T,b[5],4294588738,4),T=m(T,v,y,N,b[8],2272392833,11),N=m(N,T,v,y,b[11],1839030562,16),y=m(y,N,T,v,b[14],4259657740,23),v=m(v,y,N,T,b[1],2763975236,4),T=m(T,v,y,N,b[4],1272893353,11),N=m(N,T,v,y,b[7],4139469664,16),y=m(y,N,T,v,b[10],3200236656,23),v=m(v,y,N,T,b[13],681279174,4),T=m(T,v,y,N,b[0],3936430074,11),N=m(N,T,v,y,b[3],3572445317,16),y=m(y,N,T,v,b[6],76029189,23),v=m(v,y,N,T,b[9],3654602809,4),T=m(T,v,y,N,b[12],3873151461,11),N=m(N,T,v,y,b[15],530742520,16),v=x(v,y=m(y,N,T,v,b[2],3299628645,23),N,T,b[0],4096336452,6),T=x(T,v,y,N,b[7],1126891415,10),N=x(N,T,v,y,b[14],2878612391,15),y=x(y,N,T,v,b[5],4237533241,21),v=x(v,y,N,T,b[12],1700485571,6),T=x(T,v,y,N,b[3],2399980690,10),N=x(N,T,v,y,b[10],4293915773,15),y=x(y,N,T,v,b[1],2240044497,21),v=x(v,y,N,T,b[8],1873313359,6),T=x(T,v,y,N,b[15],4264355552,10),N=x(N,T,v,y,b[6],2734768916,15),y=x(y,N,T,v,b[13],1309151649,21),v=x(v,y,N,T,b[4],4149444226,6),T=x(T,v,y,N,b[11],3174756917,10),N=x(N,T,v,y,b[2],718787259,15),y=x(y,N,T,v,b[9],3951481745,21),this._a=this._a+v|0,this._b=this._b+y|0,this._c=this._c+N|0,this._d=this._d+T|0},r.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var b=l.allocUnsafe(16);return b.writeInt32LE(this._a,0),b.writeInt32LE(this._b,4),b.writeInt32LE(this._c,8),b.writeInt32LE(this._d,12),b},f.exports=r},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(t,f,h){var d=t("bn.js"),n=t("brorand");function l(i){this.rand=i||new n.Rand}f.exports=l,l.create=function(i){return new l(i)},l.prototype._randbelow=function(i){var r=i.bitLength(),s=Math.ceil(r/8);do var c=new d(this.rand.generate(s));while(c.cmp(i)>=0);return c},l.prototype._randrange=function(i,r){var s=r.sub(i);return i.add(this._randbelow(s))},l.prototype.test=function(i,r,s){var c=i.bitLength(),u=d.mont(i),m=new d(1).toRed(u);r||(r=Math.max(1,c/48|0));for(var x=i.subn(1),b=0;!x.testn(b);b++);for(var p=i.shrn(b),v=x.toRed(u);r>0;r--){var y=this._randrange(new d(2),x);s&&s(y);var N=y.toRed(u).redPow(p);if(N.cmp(m)!==0&&N.cmp(v)!==0){for(var T=1;T<b;T++){if((N=N.redSqr()).cmp(m)===0)return!1;if(N.cmp(v)===0)break}if(T===b)return!1}}return!0},l.prototype.getDivisor=function(i,r){var s=i.bitLength(),c=d.mont(i),u=new d(1).toRed(c);r||(r=Math.max(1,s/48|0));for(var m=i.subn(1),x=0;!m.testn(x);x++);for(var b=i.shrn(x),p=m.toRed(c);r>0;r--){var v=this._randrange(new d(2),m),y=i.gcd(v);if(y.cmpn(1)!==0)return y;var N=v.toRed(c).redPow(b);if(N.cmp(u)!==0&&N.cmp(p)!==0){for(var T=1;T<x;T++){if((N=N.redSqr()).cmp(u)===0)return N.fromRed().subn(1).gcd(i);if(N.cmp(p)===0)break}if(T===x)return(N=N.redSqr()).fromRed().subn(1).gcd(i)}}return!1}},{"bn.js":452,brorand:187}],452:[function(t,f,h){arguments[4][184][0].apply(h,arguments)},{buffer:188,dup:184}],453:[function(t,f,h){function d(n,l){if(!n)throw new Error(l||"Assertion failed")}f.exports=d,d.equal=function(n,l,i){if(n!=l)throw new Error(i||"Assertion failed: "+n+" != "+l)}},{}],454:[function(t,f,h){var d=h;function n(i){return i.length===1?"0"+i:i}function l(i){for(var r="",s=0;s<i.length;s++)r+=n(i[s].toString(16));return r}d.toArray=function(i,r){if(Array.isArray(i))return i.slice();if(!i)return[];var s=[];if(typeof i!="string"){for(var c=0;c<i.length;c++)s[c]=0|i[c];return s}if(r==="hex")for((i=i.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(i="0"+i),c=0;c<i.length;c+=2)s.push(parseInt(i[c]+i[c+1],16));else for(c=0;c<i.length;c++){var u=i.charCodeAt(c),m=u>>8,x=255&u;m?s.push(m,x):s.push(x)}return s},d.zero2=n,d.toHex=l,d.encode=function(i,r){return r==="hex"?l(i):i}},{}],455:[function(t,f,h){f.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(t,f,h){var d=t("asn1.js");h.certificate=t("./certificate");var n=d.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));h.RSAPrivateKey=n;var l=d.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));h.RSAPublicKey=l;var i=d.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())}));h.PublicKey=i;var r=d.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),s=d.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(r),this.key("subjectPrivateKey").octstr())}));h.PrivateKey=s;var c=d.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));h.EncryptedPrivateKey=c;var u=d.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));h.DSAPrivateKey=u,h.DSAparam=d.define("DSAparam",(function(){this.int()}));var m=d.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(x),this.key("publicKey").optional().explicit(1).bitstr())}));h.ECPrivateKey=m;var x=d.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));h.signature=d.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},{"./certificate":457,"asn1.js":170}],457:[function(t,f,h){var d=t("asn1.js"),n=d.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),l=d.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),i=d.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),r=d.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())})),s=d.define("RelativeDistinguishedName",(function(){this.setof(l)})),c=d.define("RDNSequence",(function(){this.seqof(s)})),u=d.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),m=d.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))})),x=d.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),b=d.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(i),this.key("issuer").use(u),this.key("validity").use(m),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(r),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(x).optional())})),p=d.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(b),this.key("signatureAlgorithm").use(i),this.key("signatureValue").bitstr())}));f.exports=p},{"asn1.js":170}],458:[function(t,f,h){var d=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,l=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,i=t("evp_bytestokey"),r=t("browserify-aes"),s=t("safe-buffer").Buffer;f.exports=function(c,u){var m,x=c.toString(),b=x.match(d);if(b){var p="aes"+b[1],v=s.from(b[2],"hex"),y=s.from(b[3].replace(/[\r\n]/g,""),"base64"),N=i(u,v.slice(0,8),parseInt(b[1],10)).key,T=[],_=r.createDecipheriv(p,N,v);T.push(_.update(y)),T.push(_.final()),m=s.concat(T)}else{var O=x.match(l);m=s.from(O[2].replace(/[\r\n]/g,""),"base64")}return{tag:x.match(n)[1],data:m}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(t,f,h){var d=t("./asn1"),n=t("./aesid.json"),l=t("./fixProc"),i=t("browserify-aes"),r=t("pbkdf2"),s=t("safe-buffer").Buffer;function c(u){var m;typeof u!="object"||s.isBuffer(u)||(m=u.passphrase,u=u.key),typeof u=="string"&&(u=s.from(u));var x,b,p=l(u,m),v=p.tag,y=p.data;switch(v){case"CERTIFICATE":b=d.certificate.decode(y,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(b||(b=d.PublicKey.decode(y,"der")),x=b.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return d.RSAPublicKey.decode(b.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return b.subjectPrivateKey=b.subjectPublicKey,{type:"ec",data:b};case"1.2.840.10040.4.1":return b.algorithm.params.pub_key=d.DSAparam.decode(b.subjectPublicKey.data,"der"),{type:"dsa",data:b.algorithm.params};default:throw new Error("unknown key id "+x)}case"ENCRYPTED PRIVATE KEY":y=(function(N,T){var _=N.algorithm.decrypt.kde.kdeparams.salt,O=parseInt(N.algorithm.decrypt.kde.kdeparams.iters.toString(),10),H=n[N.algorithm.decrypt.cipher.algo.join(".")],F=N.algorithm.decrypt.cipher.iv,V=N.subjectPrivateKey,q=parseInt(H.split("-")[1],10)/8,W=r.pbkdf2Sync(T,_,O,q,"sha1"),B=i.createDecipheriv(H,W,F),E=[];return E.push(B.update(V)),E.push(B.final()),s.concat(E)})(y=d.EncryptedPrivateKey.decode(y,"der"),m);case"PRIVATE KEY":switch(x=(b=d.PrivateKey.decode(y,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return d.RSAPrivateKey.decode(b.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:b.algorithm.curve,privateKey:d.ECPrivateKey.decode(b.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return b.algorithm.params.priv_key=d.DSAparam.decode(b.subjectPrivateKey,"der"),{type:"dsa",params:b.algorithm.params};default:throw new Error("unknown key id "+x)}case"RSA PUBLIC KEY":return d.RSAPublicKey.decode(y,"der");case"RSA PRIVATE KEY":return d.RSAPrivateKey.decode(y,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:d.DSAPrivateKey.decode(y,"der")};case"EC PRIVATE KEY":return{curve:(y=d.ECPrivateKey.decode(y,"der")).parameters.value,privateKey:y.privateKey};default:throw new Error("unknown key type "+v)}}f.exports=c,c.signature=d.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(t,f,h){h.pbkdf2=t("./lib/async"),h.pbkdf2Sync=t("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(t,f,h){(function(d){(function(){var n,l,i=t("safe-buffer").Buffer,r=t("./precondition"),s=t("./default-encoding"),c=t("./sync"),u=t("./to-buffer"),m=d.crypto&&d.crypto.subtle,x={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},b=[];function p(){return l||(l=d.process&&d.process.nextTick?d.process.nextTick:d.queueMicrotask?d.queueMicrotask:d.setImmediate?d.setImmediate:d.setTimeout)}function v(y,N,T,_,O){return m.importKey("raw",y,{name:"PBKDF2"},!1,["deriveBits"]).then((function(H){return m.deriveBits({name:"PBKDF2",salt:N,iterations:T,hash:{name:O}},H,_<<3)})).then((function(H){return i.from(H)}))}f.exports=function(y,N,T,_,O,H){typeof O=="function"&&(H=O,O=void 0);var F=x[(O=O||"sha1").toLowerCase()];if(F&&typeof d.Promise=="function"){if(r(T,_),y=u(y,s,"Password"),N=u(N,s,"Salt"),typeof H!="function")throw new Error("No callback provided to pbkdf2");(function(V,q){V.then((function(W){p()((function(){q(null,W)}))}),(function(W){p()((function(){q(W)}))}))})((function(V){if(d.process&&!d.process.browser||!m||!m.importKey||!m.deriveBits)return Promise.resolve(!1);if(b[V]!==void 0)return b[V];var q=v(n=n||i.alloc(8),n,10,128,V).then((function(){return!0})).catch((function(){return!1}));return b[V]=q,q})(F).then((function(V){return V?v(y,N,T,_,F):c(y,N,T,_,O)})),H)}else p()((function(){var V;try{V=c(y,N,T,_,O)}catch(q){return H(q)}H(null,V)}))}}).call(this)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(t,f,h){(function(d,n){(function(){var l;n.process&&n.process.browser?l="utf-8":n.process&&n.process.version?l=parseInt(d.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":l="utf-8",f.exports=l}).call(this)}).call(this,t("_process"),typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(t,f,h){var d=Math.pow(2,30)-1;f.exports=function(n,l){if(typeof n!="number")throw new TypeError("Iterations not a number");if(n<0)throw new TypeError("Bad iterations");if(typeof l!="number")throw new TypeError("Key length not a number");if(l<0||l>d||l!=l)throw new TypeError("Bad key length")}},{}],464:[function(t,f,h){var d=t("create-hash/md5"),n=t("ripemd160"),l=t("sha.js"),i=t("safe-buffer").Buffer,r=t("./precondition"),s=t("./default-encoding"),c=t("./to-buffer"),u=i.alloc(128),m={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function x(b,p,v){var y=(function(F){function V(q){return l(F).update(q).digest()}return F==="rmd160"||F==="ripemd160"?function(q){return new n().update(q).digest()}:F==="md5"?d:V})(b),N=b==="sha512"||b==="sha384"?128:64;p.length>N?p=y(p):p.length<N&&(p=i.concat([p,u],N));for(var T=i.allocUnsafe(N+m[b]),_=i.allocUnsafe(N+m[b]),O=0;O<N;O++)T[O]=54^p[O],_[O]=92^p[O];var H=i.allocUnsafe(N+v+4);T.copy(H,0,0,N),this.ipad1=H,this.ipad2=T,this.opad=_,this.alg=b,this.blocksize=N,this.hash=y,this.size=m[b]}x.prototype.run=function(b,p){return b.copy(p,this.blocksize),this.hash(p).copy(this.opad,this.blocksize),this.hash(this.opad)},f.exports=function(b,p,v,y,N){r(v,y);var T=new x(N=N||"sha1",b=c(b,s,"Password"),(p=c(p,s,"Salt")).length),_=i.allocUnsafe(y),O=i.allocUnsafe(p.length+4);p.copy(O,0,0,p.length);for(var H=0,F=m[N],V=Math.ceil(y/F),q=1;q<=V;q++){O.writeUInt32BE(q,p.length);for(var W=T.run(O,T.ipad1),B=W,E=1;E<v;E++){B=T.run(B,T.ipad2);for(var P=0;P<F;P++)W[P]^=B[P]}W.copy(_,H),H+=F}return _}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(t,f,h){var d=t("safe-buffer").Buffer;f.exports=function(n,l,i){if(d.isBuffer(n))return n;if(typeof n=="string")return d.from(n,l);if(ArrayBuffer.isView(n))return d.from(n.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(t,f,h){(function(d){(function(){d===void 0||!d.version||d.version.indexOf("v0.")===0||d.version.indexOf("v1.")===0&&d.version.indexOf("v1.8.")!==0?f.exports={nextTick:function(n,l,i,r){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var s,c,u=arguments.length;switch(u){case 0:case 1:return d.nextTick(n);case 2:return d.nextTick((function(){n.call(null,l)}));case 3:return d.nextTick((function(){n.call(null,l,i)}));case 4:return d.nextTick((function(){n.call(null,l,i,r)}));default:for(s=new Array(u-1),c=0;c<s.length;)s[c++]=arguments[c];return d.nextTick((function(){n.apply(null,s)}))}}}:f.exports=d}).call(this)}).call(this,t("_process"))},{_process:467}],467:[function(t,f,h){var d,n,l=f.exports={};function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(N){if(d===setTimeout)return setTimeout(N,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(N,0);try{return d(N,0)}catch{try{return d.call(null,N,0)}catch{return d.call(this,N,0)}}}(function(){try{d=typeof setTimeout=="function"?setTimeout:i}catch{d=i}try{n=typeof clearTimeout=="function"?clearTimeout:r}catch{n=r}})();var c,u=[],m=!1,x=-1;function b(){m&&c&&(m=!1,c.length?u=c.concat(u):x=-1,u.length&&p())}function p(){if(!m){var N=s(b);m=!0;for(var T=u.length;T;){for(c=u,u=[];++x<T;)c&&c[x].run();x=-1,T=u.length}c=null,m=!1,(function(_){if(n===clearTimeout)return clearTimeout(_);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(_);try{n(_)}catch{try{return n.call(null,_)}catch{return n.call(this,_)}}})(N)}}function v(N,T){this.fun=N,this.array=T}function y(){}l.nextTick=function(N){var T=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)T[_-1]=arguments[_];u.push(new v(N,T)),u.length!==1||m||s(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=y,l.addListener=y,l.once=y,l.off=y,l.removeListener=y,l.removeAllListeners=y,l.emit=y,l.prependListener=y,l.prependOnceListener=y,l.listeners=function(N){return[]},l.binding=function(N){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(N){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],468:[function(t,f,h){h.publicEncrypt=t("./publicEncrypt"),h.privateDecrypt=t("./privateDecrypt"),h.privateEncrypt=function(d,n){return h.publicEncrypt(d,n,!0)},h.publicDecrypt=function(d,n){return h.privateDecrypt(d,n,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(t,f,h){var d=t("create-hash"),n=t("safe-buffer").Buffer;function l(i){var r=n.allocUnsafe(4);return r.writeUInt32BE(i,0),r}f.exports=function(i,r){for(var s,c=n.alloc(0),u=0;c.length<r;)s=l(u++),c=n.concat([c,d("sha1").update(i).update(s).digest()]);return c.slice(0,r)}},{"create-hash":386,"safe-buffer":494}],470:[function(t,f,h){arguments[4][184][0].apply(h,arguments)},{buffer:188,dup:184}],471:[function(t,f,h){var d=t("parse-asn1"),n=t("./mgf"),l=t("./xor"),i=t("bn.js"),r=t("browserify-rsa"),s=t("create-hash"),c=t("./withPublic"),u=t("safe-buffer").Buffer;f.exports=function(m,x,b){var p;p=m.padding?m.padding:b?1:4;var v,y=d(m),N=y.modulus.byteLength();if(x.length>N||new i(x).cmp(y.modulus)>=0)throw new Error("decryption error");v=b?c(new i(x),y):r(x,y);var T=u.alloc(N-v.length);if(v=u.concat([T,v],N),p===4)return(function(_,O){var H=_.modulus.byteLength(),F=s("sha1").update(u.alloc(0)).digest(),V=F.length;if(O[0]!==0)throw new Error("decryption error");var q=O.slice(1,V+1),W=O.slice(V+1),B=l(q,n(W,V)),E=l(W,n(B,H-V-1));if((function(A,k){A=u.from(A),k=u.from(k);var j=0,S=A.length;A.length!==k.length&&(j++,S=Math.min(A.length,k.length));for(var C=-1;++C<S;)j+=A[C]^k[C];return j})(F,E.slice(0,V)))throw new Error("decryption error");for(var P=V;E[P]===0;)P++;if(E[P++]!==1)throw new Error("decryption error");return E.slice(P)})(y,v);if(p===1)return(function(_,O,H){for(var F=O.slice(0,2),V=2,q=0;O[V++]!==0;)if(V>=O.length){q++;break}var W=O.slice(2,V-1);if((F.toString("hex")!=="0002"&&!H||F.toString("hex")!=="0001"&&H)&&q++,W.length<8&&q++,q)throw new Error("decryption error");return O.slice(V)})(0,v,b);if(p===3)return v;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(t,f,h){var d=t("parse-asn1"),n=t("randombytes"),l=t("create-hash"),i=t("./mgf"),r=t("./xor"),s=t("bn.js"),c=t("./withPublic"),u=t("browserify-rsa"),m=t("safe-buffer").Buffer;f.exports=function(x,b,p){var v;v=x.padding?x.padding:p?1:4;var y,N=d(x);if(v===4)y=(function(T,_){var O=T.modulus.byteLength(),H=_.length,F=l("sha1").update(m.alloc(0)).digest(),V=F.length,q=2*V;if(H>O-q-2)throw new Error("message too long");var W=m.alloc(O-H-q-2),B=O-V-1,E=n(V),P=r(m.concat([F,W,m.alloc(1,1),_],B),i(E,B)),A=r(E,i(P,V));return new s(m.concat([m.alloc(1),A,P],O))})(N,b);else if(v===1)y=(function(T,_,O){var H,F=_.length,V=T.modulus.byteLength();if(F>V-11)throw new Error("message too long");return H=O?m.alloc(V-F-3,255):(function(q){for(var W,B=m.allocUnsafe(q),E=0,P=n(2*q),A=0;E<q;)A===P.length&&(P=n(2*q),A=0),(W=P[A++])&&(B[E++]=W);return B})(V-F-3),new s(m.concat([m.from([0,O?1:2]),H,m.alloc(1),_],V))})(N,b,p);else{if(v!==3)throw new Error("unknown padding");if((y=new s(b)).cmp(N.modulus)>=0)throw new Error("data too long for modulus")}return p?u(y,N):c(y,N)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(t,f,h){var d=t("bn.js"),n=t("safe-buffer").Buffer;f.exports=function(l,i){return n.from(l.toRed(d.mont(i.modulus)).redPow(new d(i.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(t,f,h){f.exports=function(d,n){for(var l=d.length,i=-1;++i<l;)d[i]^=n[i];return d}},{}],475:[function(t,f,h){(function(d,n){(function(){var l=t("safe-buffer").Buffer,i=n.crypto||n.msCrypto;i&&i.getRandomValues?f.exports=function(r,s){if(r>4294967295)throw new RangeError("requested too many random bytes");var c=l.allocUnsafe(r);if(r>0)if(r>65536)for(var u=0;u<r;u+=65536)i.getRandomValues(c.slice(u,u+65536));else i.getRandomValues(c);return typeof s=="function"?d.nextTick((function(){s(null,c)})):c}:f.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,t("_process"),typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(t,f,h){(function(d,n){(function(){function l(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var i=t("safe-buffer"),r=t("randombytes"),s=i.Buffer,c=i.kMaxLength,u=n.crypto||n.msCrypto,m=Math.pow(2,32)-1;function x(v,y){if(typeof v!="number"||v!=v)throw new TypeError("offset must be a number");if(v>m||v<0)throw new TypeError("offset must be a uint32");if(v>c||v>y)throw new RangeError("offset out of range")}function b(v,y,N){if(typeof v!="number"||v!=v)throw new TypeError("size must be a number");if(v>m||v<0)throw new TypeError("size must be a uint32");if(v+y>N||v>c)throw new RangeError("buffer too small")}function p(v,y,N,T){if(d.browser){var _=v.buffer,O=new Uint8Array(_,y,N);return u.getRandomValues(O),T?void d.nextTick((function(){T(null,v)})):v}if(!T)return r(N).copy(v,y),v;r(N,(function(H,F){if(H)return T(H);F.copy(v,y),T(null,v)}))}u&&u.getRandomValues||!d.browser?(h.randomFill=function(v,y,N,T){if(!(s.isBuffer(v)||v instanceof n.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof y=="function")T=y,y=0,N=v.length;else if(typeof N=="function")T=N,N=v.length-y;else if(typeof T!="function")throw new TypeError('"cb" argument must be a function');return x(y,v.length),b(N,y,v.length),p(v,y,N,T)},h.randomFillSync=function(v,y,N){if(y===void 0&&(y=0),!(s.isBuffer(v)||v instanceof n.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return x(y,v.length),N===void 0&&(N=v.length-y),b(N,y,v.length),p(v,y,N)}):(h.randomFill=l,h.randomFillSync=l)}).call(this)}).call(this,t("_process"),typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(t,f,h){var d={};function n(i,r,s){s||(s=Error);var c=(function(u){var m,x;function b(p,v,y){return u.call(this,(function(N,T,_){return typeof r=="string"?r:r(N,T,_)})(p,v,y))||this}return x=u,(m=b).prototype=Object.create(x.prototype),m.prototype.constructor=m,m.__proto__=x,b})(s);c.prototype.name=s.name,c.prototype.code=i,d[i]=c}function l(i,r){if(Array.isArray(i)){var s=i.length;return i=i.map((function(c){return String(c)})),s>2?"one of ".concat(r," ").concat(i.slice(0,s-1).join(", "),", or ")+i[s-1]:s===2?"one of ".concat(r," ").concat(i[0]," or ").concat(i[1]):"of ".concat(r," ").concat(i[0])}return"of ".concat(r," ").concat(String(i))}n("ERR_INVALID_OPT_VALUE",(function(i,r){return'The value "'+r+'" is invalid for option "'+i+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(i,r,s){var c,u,m;if(typeof r=="string"&&(u="not ",r.substr(0,u.length)===u)?(c="must not be",r=r.replace(/^not /,"")):c="must be",(function(b,p,v){return(v===void 0||v>b.length)&&(v=b.length),b.substring(v-p.length,v)===p})(i," argument"))m="The ".concat(i," ").concat(c," ").concat(l(r,"type"));else{var x=(function(b,p,v){return typeof v!="number"&&(v=0),!(v+p.length>b.length)&&b.indexOf(p,v)!==-1})(i,".")?"property":"argument";m='The "'.concat(i,'" ').concat(x," ").concat(c," ").concat(l(r,"type"))}return m+=". Received type ".concat(typeof s)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(i){return"The "+i+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(i){return"Cannot call "+i+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(i){return"Unknown encoding: "+i}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),f.exports.codes=d},{}],478:[function(t,f,h){(function(d){(function(){var n=Object.keys||function(b){var p=[];for(var v in b)p.push(v);return p};f.exports=u;var l=t("./_stream_readable"),i=t("./_stream_writable");t("inherits")(u,l);for(var r=n(i.prototype),s=0;s<r.length;s++){var c=r[s];u.prototype[c]||(u.prototype[c]=i.prototype[c])}function u(b){if(!(this instanceof u))return new u(b);l.call(this,b),i.call(this,b),this.allowHalfOpen=!0,b&&(b.readable===!1&&(this.readable=!1),b.writable===!1&&(this.writable=!1),b.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||d.nextTick(x,this)}function x(b){b.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(t,f,h){f.exports=n;var d=t("./_stream_transform");function n(l){if(!(this instanceof n))return new n(l);d.call(this,l)}t("inherits")(n,d),n.prototype._transform=function(l,i,r){r(null,l)}},{"./_stream_transform":481,inherits:440}],480:[function(t,f,h){(function(d,n){(function(){var l;f.exports=B,B.ReadableState=W,t("events").EventEmitter;var i=function(z,M){return z.listeners(M).length},r=t("./internal/streams/stream"),s=t("buffer").Buffer,c=(n!==void 0?n:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},u,m=t("util");u=m&&m.debuglog?m.debuglog("stream"):function(){};var x,b,p,v=t("./internal/streams/buffer_list"),y=t("./internal/streams/destroy"),N=t("./internal/streams/state").getHighWaterMark,T=t("../errors").codes,_=T.ERR_INVALID_ARG_TYPE,O=T.ERR_STREAM_PUSH_AFTER_EOF,H=T.ERR_METHOD_NOT_IMPLEMENTED,F=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(B,r);var V=y.errorOrDestroy,q=["error","close","destroy","pause","resume"];function W(z,M,U){l=l||t("./_stream_duplex"),z=z||{},typeof U!="boolean"&&(U=M instanceof l),this.objectMode=!!z.objectMode,U&&(this.objectMode=this.objectMode||!!z.readableObjectMode),this.highWaterMark=N(this,z,"readableHighWaterMark",U),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.destroyed=!1,this.defaultEncoding=z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,z.encoding&&(x||(x=t("string_decoder/").StringDecoder),this.decoder=new x(z.encoding),this.encoding=z.encoding)}function B(z){if(l=l||t("./_stream_duplex"),!(this instanceof B))return new B(z);var M=this instanceof l;this._readableState=new W(z,this,M),this.readable=!0,z&&(typeof z.read=="function"&&(this._read=z.read),typeof z.destroy=="function"&&(this._destroy=z.destroy)),r.call(this)}function E(z,M,U,te,ie){u("readableAddChunk",M);var se,le=z._readableState;if(M===null)le.reading=!1,(function(Ne,ke){if(u("onEofChunk"),!ke.ended){if(ke.decoder){var Z=ke.decoder.end();Z&&Z.length&&(ke.buffer.push(Z),ke.length+=ke.objectMode?1:Z.length)}ke.ended=!0,ke.sync?k(Ne):(ke.needReadable=!1,ke.emittedReadable||(ke.emittedReadable=!0,j(Ne)))}})(z,le);else if(ie||(se=(function(Ne,ke){var Z;ce=ke,s.isBuffer(ce)||ce instanceof c||typeof ke=="string"||ke===void 0||Ne.objectMode||(Z=new _("chunk",["string","Buffer","Uint8Array"],ke));var ce;return Z})(le,M)),se)V(z,se);else if(le.objectMode||M&&M.length>0)if(typeof M=="string"||le.objectMode||Object.getPrototypeOf(M)===s.prototype||(M=(function(Ne){return s.from(Ne)})(M)),te)le.endEmitted?V(z,new F):P(z,le,M,!0);else if(le.ended)V(z,new O);else{if(le.destroyed)return!1;le.reading=!1,le.decoder&&!U?(M=le.decoder.write(M),le.objectMode||M.length!==0?P(z,le,M,!1):S(z,le)):P(z,le,M,!1)}else te||(le.reading=!1,S(z,le));return!le.ended&&(le.length<le.highWaterMark||le.length===0)}function P(z,M,U,te){M.flowing&&M.length===0&&!M.sync?(M.awaitDrain=0,z.emit("data",U)):(M.length+=M.objectMode?1:U.length,te?M.buffer.unshift(U):M.buffer.push(U),M.needReadable&&k(z)),S(z,M)}Object.defineProperty(B.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(z){this._readableState&&(this._readableState.destroyed=z)}}),B.prototype.destroy=y.destroy,B.prototype._undestroy=y.undestroy,B.prototype._destroy=function(z,M){M(z)},B.prototype.push=function(z,M){var U,te=this._readableState;return te.objectMode?U=!0:typeof z=="string"&&((M=M||te.defaultEncoding)!==te.encoding&&(z=s.from(z,M),M=""),U=!0),E(this,z,M,!1,U)},B.prototype.unshift=function(z){return E(this,z,null,!0,!1)},B.prototype.isPaused=function(){return this._readableState.flowing===!1},B.prototype.setEncoding=function(z){x||(x=t("string_decoder/").StringDecoder);var M=new x(z);this._readableState.decoder=M,this._readableState.encoding=this._readableState.decoder.encoding;for(var U=this._readableState.buffer.head,te="";U!==null;)te+=M.write(U.data),U=U.next;return this._readableState.buffer.clear(),te!==""&&this._readableState.buffer.push(te),this._readableState.length=te.length,this};function A(z,M){return z<=0||M.length===0&&M.ended?0:M.objectMode?1:z!=z?M.flowing&&M.length?M.buffer.head.data.length:M.length:(z>M.highWaterMark&&(M.highWaterMark=(function(U){return U>=1073741824?U=1073741824:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U})(z)),z<=M.length?z:M.ended?M.length:(M.needReadable=!0,0))}function k(z){var M=z._readableState;u("emitReadable",M.needReadable,M.emittedReadable),M.needReadable=!1,M.emittedReadable||(u("emitReadable",M.flowing),M.emittedReadable=!0,d.nextTick(j,z))}function j(z){var M=z._readableState;u("emitReadable_",M.destroyed,M.length,M.ended),M.destroyed||!M.length&&!M.ended||(z.emit("readable"),M.emittedReadable=!1),M.needReadable=!M.flowing&&!M.ended&&M.length<=M.highWaterMark,Y(z)}function S(z,M){M.readingMore||(M.readingMore=!0,d.nextTick(C,z,M))}function C(z,M){for(;!M.reading&&!M.ended&&(M.length<M.highWaterMark||M.flowing&&M.length===0);){var U=M.length;if(u("maybeReadMore read 0"),z.read(0),U===M.length)break}M.readingMore=!1}function D(z){var M=z._readableState;M.readableListening=z.listenerCount("readable")>0,M.resumeScheduled&&!M.paused?M.flowing=!0:z.listenerCount("data")>0&&z.resume()}function R(z){u("readable nexttick read 0"),z.read(0)}function L(z,M){u("resume",M.reading),M.reading||z.read(0),M.resumeScheduled=!1,z.emit("resume"),Y(z),M.flowing&&!M.reading&&z.read(0)}function Y(z){var M=z._readableState;for(u("flow",M.flowing);M.flowing&&z.read()!==null;);}function X(z,M){return M.length===0?null:(M.objectMode?U=M.buffer.shift():!z||z>=M.length?(U=M.decoder?M.buffer.join(""):M.buffer.length===1?M.buffer.first():M.buffer.concat(M.length),M.buffer.clear()):U=M.buffer.consume(z,M.decoder),U);var U}function ae(z){var M=z._readableState;u("endReadable",M.endEmitted),M.endEmitted||(M.ended=!0,d.nextTick($,M,z))}function $(z,M){if(u("endReadableNT",z.endEmitted,z.length),!z.endEmitted&&z.length===0&&(z.endEmitted=!0,M.readable=!1,M.emit("end"),z.autoDestroy)){var U=M._writableState;(!U||U.autoDestroy&&U.finished)&&M.destroy()}}function Q(z,M){for(var U=0,te=z.length;U<te;U++)if(z[U]===M)return U;return-1}B.prototype.read=function(z){u("read",z),z=parseInt(z,10);var M=this._readableState,U=z;if(z!==0&&(M.emittedReadable=!1),z===0&&M.needReadable&&((M.highWaterMark!==0?M.length>=M.highWaterMark:M.length>0)||M.ended))return u("read: emitReadable",M.length,M.ended),M.length===0&&M.ended?ae(this):k(this),null;if((z=A(z,M))===0&&M.ended)return M.length===0&&ae(this),null;var te,ie=M.needReadable;return u("need readable",ie),(M.length===0||M.length-z<M.highWaterMark)&&u("length less than watermark",ie=!0),M.ended||M.reading?u("reading or ended",ie=!1):ie&&(u("do read"),M.reading=!0,M.sync=!0,M.length===0&&(M.needReadable=!0),this._read(M.highWaterMark),M.sync=!1,M.reading||(z=A(U,M))),(te=z>0?X(z,M):null)===null?(M.needReadable=M.length<=M.highWaterMark,z=0):(M.length-=z,M.awaitDrain=0),M.length===0&&(M.ended||(M.needReadable=!0),U!==z&&M.ended&&ae(this)),te!==null&&this.emit("data",te),te},B.prototype._read=function(z){V(this,new H("_read()"))},B.prototype.pipe=function(z,M){var U=this,te=this._readableState;switch(te.pipesCount){case 0:te.pipes=z;break;case 1:te.pipes=[te.pipes,z];break;default:te.pipes.push(z)}te.pipesCount+=1,u("pipe count=%d opts=%j",te.pipesCount,M);var ie=(!M||M.end!==!1)&&z!==d.stdout&&z!==d.stderr?le:Ae;function se(Ie,Ue){u("onunpipe"),Ie===U&&Ue&&Ue.hasUnpiped===!1&&(Ue.hasUnpiped=!0,u("cleanup"),z.removeListener("close",ve),z.removeListener("finish",De),z.removeListener("drain",Ne),z.removeListener("error",ce),z.removeListener("unpipe",se),U.removeListener("end",le),U.removeListener("end",Ae),U.removeListener("data",Z),ke=!0,!te.awaitDrain||z._writableState&&!z._writableState.needDrain||Ne())}function le(){u("onend"),z.end()}te.endEmitted?d.nextTick(ie):U.once("end",ie),z.on("unpipe",se);var Ne=(function(Ie){return function(){var Ue=Ie._readableState;u("pipeOnDrain",Ue.awaitDrain),Ue.awaitDrain&&Ue.awaitDrain--,Ue.awaitDrain===0&&i(Ie,"data")&&(Ue.flowing=!0,Y(Ie))}})(U);z.on("drain",Ne);var ke=!1;function Z(Ie){u("ondata");var Ue=z.write(Ie);u("dest.write",Ue),Ue===!1&&((te.pipesCount===1&&te.pipes===z||te.pipesCount>1&&Q(te.pipes,z)!==-1)&&!ke&&(u("false write response, pause",te.awaitDrain),te.awaitDrain++),U.pause())}function ce(Ie){u("onerror",Ie),Ae(),z.removeListener("error",ce),i(z,"error")===0&&V(z,Ie)}function ve(){z.removeListener("finish",De),Ae()}function De(){u("onfinish"),z.removeListener("close",ve),Ae()}function Ae(){u("unpipe"),U.unpipe(z)}return U.on("data",Z),(function(Ie,Ue,Ge){if(typeof Ie.prependListener=="function")return Ie.prependListener(Ue,Ge);Ie._events&&Ie._events[Ue]?Array.isArray(Ie._events[Ue])?Ie._events[Ue].unshift(Ge):Ie._events[Ue]=[Ge,Ie._events[Ue]]:Ie.on(Ue,Ge)})(z,"error",ce),z.once("close",ve),z.once("finish",De),z.emit("pipe",U),te.flowing||(u("pipe resume"),U.resume()),z},B.prototype.unpipe=function(z){var M=this._readableState,U={hasUnpiped:!1};if(M.pipesCount===0)return this;if(M.pipesCount===1)return z&&z!==M.pipes||(z||(z=M.pipes),M.pipes=null,M.pipesCount=0,M.flowing=!1,z&&z.emit("unpipe",this,U)),this;if(!z){var te=M.pipes,ie=M.pipesCount;M.pipes=null,M.pipesCount=0,M.flowing=!1;for(var se=0;se<ie;se++)te[se].emit("unpipe",this,{hasUnpiped:!1});return this}var le=Q(M.pipes,z);return le===-1||(M.pipes.splice(le,1),M.pipesCount-=1,M.pipesCount===1&&(M.pipes=M.pipes[0]),z.emit("unpipe",this,U)),this},B.prototype.on=function(z,M){var U=r.prototype.on.call(this,z,M),te=this._readableState;return z==="data"?(te.readableListening=this.listenerCount("readable")>0,te.flowing!==!1&&this.resume()):z==="readable"&&(te.endEmitted||te.readableListening||(te.readableListening=te.needReadable=!0,te.flowing=!1,te.emittedReadable=!1,u("on readable",te.length,te.reading),te.length?k(this):te.reading||d.nextTick(R,this))),U},B.prototype.addListener=B.prototype.on,B.prototype.removeListener=function(z,M){var U=r.prototype.removeListener.call(this,z,M);return z==="readable"&&d.nextTick(D,this),U},B.prototype.removeAllListeners=function(z){var M=r.prototype.removeAllListeners.apply(this,arguments);return z!=="readable"&&z!==void 0||d.nextTick(D,this),M},B.prototype.resume=function(){var z=this._readableState;return z.flowing||(u("resume"),z.flowing=!z.readableListening,(function(M,U){U.resumeScheduled||(U.resumeScheduled=!0,d.nextTick(L,M,U))})(this,z)),z.paused=!1,this},B.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},B.prototype.wrap=function(z){var M=this,U=this._readableState,te=!1;for(var ie in z.on("end",(function(){if(u("wrapped end"),U.decoder&&!U.ended){var le=U.decoder.end();le&&le.length&&M.push(le)}M.push(null)})),z.on("data",(function(le){u("wrapped data"),U.decoder&&(le=U.decoder.write(le)),U.objectMode&&le==null||(U.objectMode||le&&le.length)&&(M.push(le)||(te=!0,z.pause()))})),z)this[ie]===void 0&&typeof z[ie]=="function"&&(this[ie]=(function(le){return function(){return z[le].apply(z,arguments)}})(ie));for(var se=0;se<q.length;se++)z.on(q[se],this.emit.bind(this,q[se]));return this._read=function(le){u("wrapped _read",le),te&&(te=!1,z.resume())},this},typeof Symbol=="function"&&(B.prototype[Symbol.asyncIterator]=function(){return b===void 0&&(b=t("./internal/streams/async_iterator")),b(this)}),Object.defineProperty(B.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(B.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(B.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(z){this._readableState&&(this._readableState.flowing=z)}}),B._fromList=X,Object.defineProperty(B.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(B.from=function(z,M){return p===void 0&&(p=t("./internal/streams/from")),p(B,z,M)})}).call(this)}).call(this,t("_process"),typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(t,f,h){f.exports=u;var d=t("../errors").codes,n=d.ERR_METHOD_NOT_IMPLEMENTED,l=d.ERR_MULTIPLE_CALLBACK,i=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,r=d.ERR_TRANSFORM_WITH_LENGTH_0,s=t("./_stream_duplex");function c(b,p){var v=this._transformState;v.transforming=!1;var y=v.writecb;if(y===null)return this.emit("error",new l);v.writechunk=null,v.writecb=null,p!=null&&this.push(p),y(b);var N=this._readableState;N.reading=!1,(N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}function u(b){if(!(this instanceof u))return new u(b);s.call(this,b),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",m)}function m(){var b=this;typeof this._flush!="function"||this._readableState.destroyed?x(this,null,null):this._flush((function(p,v){x(b,p,v)}))}function x(b,p,v){if(p)return b.emit("error",p);if(v!=null&&b.push(v),b._writableState.length)throw new r;if(b._transformState.transforming)throw new i;return b.push(null)}t("inherits")(u,s),u.prototype.push=function(b,p){return this._transformState.needTransform=!1,s.prototype.push.call(this,b,p)},u.prototype._transform=function(b,p,v){v(new n("_transform()"))},u.prototype._write=function(b,p,v){var y=this._transformState;if(y.writecb=v,y.writechunk=b,y.writeencoding=p,!y.transforming){var N=this._readableState;(y.needTransform||N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}},u.prototype._read=function(b){var p=this._transformState;p.writechunk===null||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},u.prototype._destroy=function(b,p){s.prototype._destroy.call(this,b,(function(v){p(v)}))}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(t,f,h){(function(d,n){(function(){function l(C){var D=this;this.next=null,this.entry=null,this.finish=function(){(function(R,L,Y){var X=R.entry;for(R.entry=null;X;){var ae=X.callback;L.pendingcb--,ae(Y),X=X.next}L.corkedRequestsFree.next=R})(D,C)}}var i;f.exports=B,B.WritableState=W;var r={deprecate:t("util-deprecate")},s=t("./internal/streams/stream"),c=t("buffer").Buffer,u=(n!==void 0?n:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},m,x=t("./internal/streams/destroy"),b=t("./internal/streams/state").getHighWaterMark,p=t("../errors").codes,v=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,N=p.ERR_MULTIPLE_CALLBACK,T=p.ERR_STREAM_CANNOT_PIPE,_=p.ERR_STREAM_DESTROYED,O=p.ERR_STREAM_NULL_VALUES,H=p.ERR_STREAM_WRITE_AFTER_END,F=p.ERR_UNKNOWN_ENCODING,V=x.errorOrDestroy;function q(){}function W(C,D,R){i=i||t("./_stream_duplex"),C=C||{},typeof R!="boolean"&&(R=D instanceof i),this.objectMode=!!C.objectMode,R&&(this.objectMode=this.objectMode||!!C.writableObjectMode),this.highWaterMark=b(this,C,"writableHighWaterMark",R),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=C.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=C.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Y){(function(X,ae){var $=X._writableState,Q=$.sync,z=$.writecb;if(typeof z!="function")throw new N;if((function(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0})($),ae)(function(U,te,ie,se,le){--te.pendingcb,ie?(d.nextTick(le,se),d.nextTick(S,U,te),U._writableState.errorEmitted=!0,V(U,se)):(le(se),U._writableState.errorEmitted=!0,V(U,se),S(U,te))})(X,$,Q,ae,z);else{var M=k($)||X.destroyed;M||$.corked||$.bufferProcessing||!$.bufferedRequest||A(X,$),Q?d.nextTick(P,X,$,M,z):P(X,$,M,z)}})(D,Y)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=C.emitClose!==!1,this.autoDestroy=!!C.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function B(C){var D=this instanceof(i=i||t("./_stream_duplex"));if(!D&&!m.call(B,this))return new B(C);this._writableState=new W(C,this,D),this.writable=!0,C&&(typeof C.write=="function"&&(this._write=C.write),typeof C.writev=="function"&&(this._writev=C.writev),typeof C.destroy=="function"&&(this._destroy=C.destroy),typeof C.final=="function"&&(this._final=C.final)),s.call(this)}function E(C,D,R,L,Y,X,ae){D.writelen=L,D.writecb=ae,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new _("write")):R?C._writev(Y,D.onwrite):C._write(Y,X,D.onwrite),D.sync=!1}function P(C,D,R,L){R||(function(Y,X){X.length===0&&X.needDrain&&(X.needDrain=!1,Y.emit("drain"))})(C,D),D.pendingcb--,L(),S(C,D)}function A(C,D){D.bufferProcessing=!0;var R=D.bufferedRequest;if(C._writev&&R&&R.next){var L=D.bufferedRequestCount,Y=new Array(L),X=D.corkedRequestsFree;X.entry=R;for(var ae=0,$=!0;R;)Y[ae]=R,R.isBuf||($=!1),R=R.next,ae+=1;Y.allBuffers=$,E(C,D,!0,D.length,Y,"",X.finish),D.pendingcb++,D.lastBufferedRequest=null,X.next?(D.corkedRequestsFree=X.next,X.next=null):D.corkedRequestsFree=new l(D),D.bufferedRequestCount=0}else{for(;R;){var Q=R.chunk,z=R.encoding,M=R.callback;if(E(C,D,!1,D.objectMode?1:Q.length,Q,z,M),R=R.next,D.bufferedRequestCount--,D.writing)break}R===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=R,D.bufferProcessing=!1}function k(C){return C.ending&&C.length===0&&C.bufferedRequest===null&&!C.finished&&!C.writing}function j(C,D){C._final((function(R){D.pendingcb--,R&&V(C,R),D.prefinished=!0,C.emit("prefinish"),S(C,D)}))}function S(C,D){var R=k(D);if(R&&((function(Y,X){X.prefinished||X.finalCalled||(typeof Y._final!="function"||X.destroyed?(X.prefinished=!0,Y.emit("prefinish")):(X.pendingcb++,X.finalCalled=!0,d.nextTick(j,Y,X)))})(C,D),D.pendingcb===0&&(D.finished=!0,C.emit("finish"),D.autoDestroy))){var L=C._readableState;(!L||L.autoDestroy&&L.endEmitted)&&C.destroy()}return R}t("inherits")(B,s),W.prototype.getBuffer=function(){for(var C=this.bufferedRequest,D=[];C;)D.push(C),C=C.next;return D},(function(){try{Object.defineProperty(W.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(B,Symbol.hasInstance,{value:function(C){return!!m.call(this,C)||this===B&&C&&C._writableState instanceof W}})):m=function(C){return C instanceof this},B.prototype.pipe=function(){V(this,new T)},B.prototype.write=function(C,D,R){var L,Y=this._writableState,X=!1,ae=!Y.objectMode&&(L=C,c.isBuffer(L)||L instanceof u);return ae&&!c.isBuffer(C)&&(C=(function($){return c.from($)})(C)),typeof D=="function"&&(R=D,D=null),ae?D="buffer":D||(D=Y.defaultEncoding),typeof R!="function"&&(R=q),Y.ending?(function($,Q){var z=new H;V($,z),d.nextTick(Q,z)})(this,R):(ae||(function($,Q,z,M){var U;return z===null?U=new O:typeof z=="string"||Q.objectMode||(U=new v("chunk",["string","Buffer"],z)),!U||(V($,U),d.nextTick(M,U),!1)})(this,Y,C,R))&&(Y.pendingcb++,X=(function($,Q,z,M,U,te){if(!z){var ie=(function(ke,Z,ce){return ke.objectMode||ke.decodeStrings===!1||typeof Z!="string"||(Z=c.from(Z,ce)),Z})(Q,M,U);M!==ie&&(z=!0,U="buffer",M=ie)}var se=Q.objectMode?1:M.length;Q.length+=se;var le=Q.length<Q.highWaterMark;if(le||(Q.needDrain=!0),Q.writing||Q.corked){var Ne=Q.lastBufferedRequest;Q.lastBufferedRequest={chunk:M,encoding:U,isBuf:z,callback:te,next:null},Ne?Ne.next=Q.lastBufferedRequest:Q.bufferedRequest=Q.lastBufferedRequest,Q.bufferedRequestCount+=1}else E($,Q,!1,se,M,U,te);return le})(this,Y,ae,C,D,R)),X},B.prototype.cork=function(){this._writableState.corked++},B.prototype.uncork=function(){var C=this._writableState;C.corked&&(C.corked--,C.writing||C.corked||C.bufferProcessing||!C.bufferedRequest||A(this,C))},B.prototype.setDefaultEncoding=function(C){if(typeof C=="string"&&(C=C.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((C+"").toLowerCase())>-1))throw new F(C);return this._writableState.defaultEncoding=C,this},Object.defineProperty(B.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(B.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),B.prototype._write=function(C,D,R){R(new y("_write()"))},B.prototype._writev=null,B.prototype.end=function(C,D,R){var L=this._writableState;return typeof C=="function"?(R=C,C=null,D=null):typeof D=="function"&&(R=D,D=null),C!=null&&this.write(C,D),L.corked&&(L.corked=1,this.uncork()),L.ending||(function(Y,X,ae){X.ending=!0,S(Y,X),ae&&(X.finished?d.nextTick(ae):Y.once("finish",ae)),X.ended=!0,Y.writable=!1})(this,L,R),this},Object.defineProperty(B.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(B.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(C){this._writableState&&(this._writableState.destroyed=C)}}),B.prototype.destroy=x.destroy,B.prototype._undestroy=x.undestroy,B.prototype._destroy=function(C,D){D(C)}}).call(this)}).call(this,t("_process"),typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(t,f,h){(function(d){(function(){var n;function l(_,O,H){return(O=(function(F){var V=(function(q,W){if(typeof q!="object"||q===null)return q;var B=q[Symbol.toPrimitive];if(B!==void 0){var E=B.call(q,W);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(q)})(F,"string");return typeof V=="symbol"?V:String(V)})(O))in _?Object.defineProperty(_,O,{value:H,enumerable:!0,configurable:!0,writable:!0}):_[O]=H,_}var i=t("./end-of-stream"),r=Symbol("lastResolve"),s=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),m=Symbol("lastPromise"),x=Symbol("handlePromise"),b=Symbol("stream");function p(_,O){return{value:_,done:O}}function v(_){var O=_[r];if(O!==null){var H=_[b].read();H!==null&&(_[m]=null,_[r]=null,_[s]=null,O(p(H,!1)))}}function y(_){d.nextTick(v,_)}var N=Object.getPrototypeOf((function(){})),T=Object.setPrototypeOf((l(n={get stream(){return this[b]},next:function(){var _=this,O=this[c];if(O!==null)return Promise.reject(O);if(this[u])return Promise.resolve(p(void 0,!0));if(this[b].destroyed)return new Promise((function(q,W){d.nextTick((function(){_[c]?W(_[c]):q(p(void 0,!0))}))}));var H,F=this[m];if(F)H=new Promise((function(q,W){return function(B,E){q.then((function(){W[u]?B(p(void 0,!0)):W[x](B,E)}),E)}})(F,this));else{var V=this[b].read();if(V!==null)return Promise.resolve(p(V,!1));H=new Promise(this[x])}return this[m]=H,H}},Symbol.asyncIterator,(function(){return this})),l(n,"return",(function(){var _=this;return new Promise((function(O,H){_[b].destroy(null,(function(F){F?H(F):O(p(void 0,!0))}))}))})),n),N);f.exports=function(_){var O,H=Object.create(T,(l(O={},b,{value:_,writable:!0}),l(O,r,{value:null,writable:!0}),l(O,s,{value:null,writable:!0}),l(O,c,{value:null,writable:!0}),l(O,u,{value:_._readableState.endEmitted,writable:!0}),l(O,x,{value:function(F,V){var q=H[b].read();q?(H[m]=null,H[r]=null,H[s]=null,F(p(q,!1))):(H[r]=F,H[s]=V)},writable:!0}),O));return H[m]=null,i(_,(function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var V=H[s];return V!==null&&(H[m]=null,H[r]=null,H[s]=null,V(F)),void(H[c]=F)}var q=H[r];q!==null&&(H[m]=null,H[r]=null,H[s]=null,q(p(void 0,!0))),H[u]=!0})),_.on("readable",y.bind(null,H)),H}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":486,_process:467}],484:[function(t,f,h){function d(m,x){var b=Object.keys(m);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(m);x&&(p=p.filter((function(v){return Object.getOwnPropertyDescriptor(m,v).enumerable}))),b.push.apply(b,p)}return b}function n(m){for(var x=1;x<arguments.length;x++){var b=arguments[x]!=null?arguments[x]:{};x%2?d(Object(b),!0).forEach((function(p){l(m,p,b[p])})):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(b)):d(Object(b)).forEach((function(p){Object.defineProperty(m,p,Object.getOwnPropertyDescriptor(b,p))}))}return m}function l(m,x,b){return(x=r(x))in m?Object.defineProperty(m,x,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[x]=b,m}function i(m,x){for(var b=0;b<x.length;b++){var p=x[b];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(m,r(p.key),p)}}function r(m){var x=(function(b,p){if(typeof b!="object"||b===null)return b;var v=b[Symbol.toPrimitive];if(v!==void 0){var y=v.call(b,p);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(b)})(m,"string");return typeof x=="symbol"?x:String(x)}var s=t("buffer").Buffer,c=t("util").inspect,u=c&&c.custom||"inspect";f.exports=(function(){function m(){(function(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")})(this,m),this.head=null,this.tail=null,this.length=0}var x,b;return x=m,(b=[{key:"push",value:function(p){var v={data:p,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(p){var v={data:p,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var v=this.head,y=""+v.data;v=v.next;)y+=p+v.data;return y}},{key:"concat",value:function(p){if(this.length===0)return s.alloc(0);for(var v,y,N,T=s.allocUnsafe(p>>>0),_=this.head,O=0;_;)v=_.data,y=T,N=O,s.prototype.copy.call(v,y,N),O+=_.data.length,_=_.next;return T}},{key:"consume",value:function(p,v){var y;return p<this.head.data.length?(y=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):y=p===this.head.data.length?this.shift():v?this._getString(p):this._getBuffer(p),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var v=this.head,y=1,N=v.data;for(p-=N.length;v=v.next;){var T=v.data,_=p>T.length?T.length:p;if(_===T.length?N+=T:N+=T.slice(0,p),(p-=_)==0){_===T.length?(++y,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=T.slice(_));break}++y}return this.length-=y,N}},{key:"_getBuffer",value:function(p){var v=s.allocUnsafe(p),y=this.head,N=1;for(y.data.copy(v),p-=y.data.length;y=y.next;){var T=y.data,_=p>T.length?T.length:p;if(T.copy(v,v.length-p,0,_),(p-=_)==0){_===T.length?(++N,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=T.slice(_));break}++N}return this.length-=N,v}},{key:u,value:function(p,v){return c(this,n(n({},v),{},{depth:0,customInspect:!1}))}}])&&i(x.prototype,b),Object.defineProperty(x,"prototype",{writable:!1}),m})()},{buffer:220,util:188}],485:[function(t,f,h){(function(d){(function(){function n(r,s){i(r,s),l(r)}function l(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function i(r,s){r.emit("error",s)}f.exports={destroy:function(r,s){var c=this,u=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return u||m?(s?s(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(i,this,r)):d.nextTick(i,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,(function(x){!s&&x?c._writableState?c._writableState.errorEmitted?d.nextTick(l,c):(c._writableState.errorEmitted=!0,d.nextTick(n,c,x)):d.nextTick(n,c,x):s?(d.nextTick(l,c),s(x)):d.nextTick(l,c)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,s){var c=r._readableState,u=r._writableState;c&&c.autoDestroy||u&&u.autoDestroy?r.destroy(s):r.emit("error",s)}}}).call(this)}).call(this,t("_process"))},{_process:467}],486:[function(t,f,h){var d=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function n(){}f.exports=function l(i,r,s){if(typeof r=="function")return l(i,null,r);r||(r={}),s=(function(_){var O=!1;return function(){if(!O){O=!0;for(var H=arguments.length,F=new Array(H),V=0;V<H;V++)F[V]=arguments[V];_.apply(this,F)}}})(s||n);var c=r.readable||r.readable!==!1&&i.readable,u=r.writable||r.writable!==!1&&i.writable,m=function(){i.writable||b()},x=i._writableState&&i._writableState.finished,b=function(){u=!1,x=!0,c||s.call(i)},p=i._readableState&&i._readableState.endEmitted,v=function(){c=!1,p=!0,u||s.call(i)},y=function(_){s.call(i,_)},N=function(){var _;return c&&!p?(i._readableState&&i._readableState.ended||(_=new d),s.call(i,_)):u&&!x?(i._writableState&&i._writableState.ended||(_=new d),s.call(i,_)):void 0},T=function(){i.req.on("finish",b)};return(function(_){return _.setHeader&&typeof _.abort=="function"})(i)?(i.on("complete",b),i.on("abort",N),i.req?T():i.on("request",T)):u&&!i._writableState&&(i.on("end",m),i.on("close",m)),i.on("end",v),i.on("finish",b),r.error!==!1&&i.on("error",y),i.on("close",N),function(){i.removeListener("complete",b),i.removeListener("abort",N),i.removeListener("request",T),i.req&&i.req.removeListener("finish",b),i.removeListener("end",m),i.removeListener("close",m),i.removeListener("finish",b),i.removeListener("end",v),i.removeListener("error",y),i.removeListener("close",N)}}},{"../../../errors":477}],487:[function(t,f,h){f.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(t,f,h){var d,n=t("../../../errors").codes,l=n.ERR_MISSING_ARGS,i=n.ERR_STREAM_DESTROYED;function r(x){if(x)throw x}function s(x,b,p,v){v=(function(T){var _=!1;return function(){_||(_=!0,T.apply(void 0,arguments))}})(v);var y=!1;x.on("close",(function(){y=!0})),d===void 0&&(d=t("./end-of-stream")),d(x,{readable:b,writable:p},(function(T){if(T)return v(T);y=!0,v()}));var N=!1;return function(T){if(!y&&!N)return N=!0,(function(_){return _.setHeader&&typeof _.abort=="function"})(x)?x.abort():typeof x.destroy=="function"?x.destroy():void v(T||new i("pipe"))}}function c(x){x()}function u(x,b){return x.pipe(b)}function m(x){return x.length?typeof x[x.length-1]!="function"?r:x.pop():r}f.exports=function(){for(var x=arguments.length,b=new Array(x),p=0;p<x;p++)b[p]=arguments[p];var v,y=m(b);if(Array.isArray(b[0])&&(b=b[0]),b.length<2)throw new l("streams");var N=b.map((function(T,_){var O=_<b.length-1;return s(T,O,_>0,(function(H){v||(v=H),H&&N.forEach(c),O||(N.forEach(c),y(v))}))}));return b.reduce(u)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(t,f,h){var d=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;f.exports={getHighWaterMark:function(n,l,i,r){var s=(function(c,u,m){return c.highWaterMark!=null?c.highWaterMark:u?c[m]:null})(l,r,i);if(s!=null){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new d(r?i:"highWaterMark",s);return Math.floor(s)}return n.objectMode?16:16384}}},{"../../../errors":477}],490:[function(t,f,h){f.exports=t("events").EventEmitter},{events:422}],491:[function(t,f,h){(h=f.exports=t("./lib/_stream_readable.js")).Stream=h,h.Readable=h,h.Writable=t("./lib/_stream_writable.js"),h.Duplex=t("./lib/_stream_duplex.js"),h.Transform=t("./lib/_stream_transform.js"),h.PassThrough=t("./lib/_stream_passthrough.js"),h.finished=t("./lib/internal/streams/end-of-stream.js"),h.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(t,f,h){var d=(function(n){var l=Object.prototype,i=l.hasOwnProperty,r=Object.defineProperty||function(S,C,D){S[C]=D.value},s=typeof Symbol=="function"?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",m=s.toStringTag||"@@toStringTag";function x(S,C,D){return Object.defineProperty(S,C,{value:D,enumerable:!0,configurable:!0,writable:!0}),S[C]}try{x({},"")}catch{x=function(C,D,R){return C[D]=R}}function b(S,C,D,R){var L=C&&C.prototype instanceof y?C:y,Y=Object.create(L.prototype),X=new A(R||[]);return r(Y,"_invoke",{value:W(S,D,X)}),Y}function p(S,C,D){try{return{type:"normal",arg:S.call(C,D)}}catch(R){return{type:"throw",arg:R}}}n.wrap=b;var v={};function y(){}function N(){}function T(){}var _={};x(_,c,(function(){return this}));var O=Object.getPrototypeOf,H=O&&O(O(k([])));H&&H!==l&&i.call(H,c)&&(_=H);var F=T.prototype=y.prototype=Object.create(_);function V(S){["next","throw","return"].forEach((function(C){x(S,C,(function(D){return this._invoke(C,D)}))}))}function q(S,C){var D;r(this,"_invoke",{value:function(R,L){function Y(){return new C((function(X,ae){(function $(Q,z,M,U){var te=p(S[Q],S,z);if(te.type!=="throw"){var ie=te.arg,se=ie.value;return se&&typeof se=="object"&&i.call(se,"__await")?C.resolve(se.__await).then((function(le){$("next",le,M,U)}),(function(le){$("throw",le,M,U)})):C.resolve(se).then((function(le){ie.value=le,M(ie)}),(function(le){return $("throw",le,M,U)}))}U(te.arg)})(R,L,X,ae)}))}return D=D?D.then(Y,Y):Y()}})}function W(S,C,D){var R="suspendedStart";return function(L,Y){if(R==="executing")throw new Error("Generator is already running");if(R==="completed"){if(L==="throw")throw Y;return j()}for(D.method=L,D.arg=Y;;){var X=D.delegate;if(X){var ae=B(X,D);if(ae){if(ae===v)continue;return ae}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(R==="suspendedStart")throw R="completed",D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);R="executing";var $=p(S,C,D);if($.type==="normal"){if(R=D.done?"completed":"suspendedYield",$.arg===v)continue;return{value:$.arg,done:D.done}}$.type==="throw"&&(R="completed",D.method="throw",D.arg=$.arg)}}}function B(S,C){var D=C.method,R=S.iterator[D];if(R===void 0)return C.delegate=null,D==="throw"&&S.iterator.return&&(C.method="return",C.arg=void 0,B(S,C),C.method==="throw")||D!=="return"&&(C.method="throw",C.arg=new TypeError("The iterator does not provide a '"+D+"' method")),v;var L=p(R,S.iterator,C.arg);if(L.type==="throw")return C.method="throw",C.arg=L.arg,C.delegate=null,v;var Y=L.arg;return Y?Y.done?(C[S.resultName]=Y.value,C.next=S.nextLoc,C.method!=="return"&&(C.method="next",C.arg=void 0),C.delegate=null,v):Y:(C.method="throw",C.arg=new TypeError("iterator result is not an object"),C.delegate=null,v)}function E(S){var C={tryLoc:S[0]};1 in S&&(C.catchLoc=S[1]),2 in S&&(C.finallyLoc=S[2],C.afterLoc=S[3]),this.tryEntries.push(C)}function P(S){var C=S.completion||{};C.type="normal",delete C.arg,S.completion=C}function A(S){this.tryEntries=[{tryLoc:"root"}],S.forEach(E,this),this.reset(!0)}function k(S){if(S){var C=S[c];if(C)return C.call(S);if(typeof S.next=="function")return S;if(!isNaN(S.length)){var D=-1,R=function L(){for(;++D<S.length;)if(i.call(S,D))return L.value=S[D],L.done=!1,L;return L.value=void 0,L.done=!0,L};return R.next=R}}return{next:j}}function j(){return{value:void 0,done:!0}}return N.prototype=T,r(F,"constructor",{value:T,configurable:!0}),r(T,"constructor",{value:N,configurable:!0}),N.displayName=x(T,m,"GeneratorFunction"),n.isGeneratorFunction=function(S){var C=typeof S=="function"&&S.constructor;return!!C&&(C===N||(C.displayName||C.name)==="GeneratorFunction")},n.mark=function(S){return Object.setPrototypeOf?Object.setPrototypeOf(S,T):(S.__proto__=T,x(S,m,"GeneratorFunction")),S.prototype=Object.create(F),S},n.awrap=function(S){return{__await:S}},V(q.prototype),x(q.prototype,u,(function(){return this})),n.AsyncIterator=q,n.async=function(S,C,D,R,L){L===void 0&&(L=Promise);var Y=new q(b(S,C,D,R),L);return n.isGeneratorFunction(C)?Y:Y.next().then((function(X){return X.done?X.value:Y.next()}))},V(F),x(F,m,"Generator"),x(F,c,(function(){return this})),x(F,"toString",(function(){return"[object Generator]"})),n.keys=function(S){var C=Object(S),D=[];for(var R in C)D.push(R);return D.reverse(),function L(){for(;D.length;){var Y=D.pop();if(Y in C)return L.value=Y,L.done=!1,L}return L.done=!0,L}},n.values=k,A.prototype={constructor:A,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!S)for(var C in this)C.charAt(0)==="t"&&i.call(this,C)&&!isNaN(+C.slice(1))&&(this[C]=void 0)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var C=this;function D($,Q){return Y.type="throw",Y.arg=S,C.next=$,Q&&(C.method="next",C.arg=void 0),!!Q}for(var R=this.tryEntries.length-1;R>=0;--R){var L=this.tryEntries[R],Y=L.completion;if(L.tryLoc==="root")return D("end");if(L.tryLoc<=this.prev){var X=i.call(L,"catchLoc"),ae=i.call(L,"finallyLoc");if(X&&ae){if(this.prev<L.catchLoc)return D(L.catchLoc,!0);if(this.prev<L.finallyLoc)return D(L.finallyLoc)}else if(X){if(this.prev<L.catchLoc)return D(L.catchLoc,!0)}else{if(!ae)throw new Error("try statement without catch or finally");if(this.prev<L.finallyLoc)return D(L.finallyLoc)}}}},abrupt:function(S,C){for(var D=this.tryEntries.length-1;D>=0;--D){var R=this.tryEntries[D];if(R.tryLoc<=this.prev&&i.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var L=R;break}}L&&(S==="break"||S==="continue")&&L.tryLoc<=C&&C<=L.finallyLoc&&(L=null);var Y=L?L.completion:{};return Y.type=S,Y.arg=C,L?(this.method="next",this.next=L.finallyLoc,v):this.complete(Y)},complete:function(S,C){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&C&&(this.next=C),v},finish:function(S){for(var C=this.tryEntries.length-1;C>=0;--C){var D=this.tryEntries[C];if(D.finallyLoc===S)return this.complete(D.completion,D.afterLoc),P(D),v}},catch:function(S){for(var C=this.tryEntries.length-1;C>=0;--C){var D=this.tryEntries[C];if(D.tryLoc===S){var R=D.completion;if(R.type==="throw"){var L=R.arg;P(D)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(S,C,D){return this.delegate={iterator:k(S),resultName:C,nextLoc:D},this.method==="next"&&(this.arg=void 0),v}},n})(typeof f=="object"?f.exports:{});try{regeneratorRuntime=d}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}},{}],493:[function(t,f,h){var d=t("buffer").Buffer,n=t("inherits"),l=t("hash-base"),i=new Array(16),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],m=[0,1518500249,1859775393,2400959708,2840853838],x=[1352829926,1548603684,1836072691,2053994217,0];function b(){l.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(O,H){return O<<H|O>>>32-H}function v(O,H,F,V,q,W,B,E){return p(O+(H^F^V)+W+B|0,E)+q|0}function y(O,H,F,V,q,W,B,E){return p(O+(H&F|~H&V)+W+B|0,E)+q|0}function N(O,H,F,V,q,W,B,E){return p(O+((H|~F)^V)+W+B|0,E)+q|0}function T(O,H,F,V,q,W,B,E){return p(O+(H&V|F&~V)+W+B|0,E)+q|0}function _(O,H,F,V,q,W,B,E){return p(O+(H^(F|~V))+W+B|0,E)+q|0}n(b,l),b.prototype._update=function(){for(var O=i,H=0;H<16;++H)O[H]=this._block.readInt32LE(4*H);for(var F=0|this._a,V=0|this._b,q=0|this._c,W=0|this._d,B=0|this._e,E=0|this._a,P=0|this._b,A=0|this._c,k=0|this._d,j=0|this._e,S=0;S<80;S+=1){var C,D;S<16?(C=v(F,V,q,W,B,O[r[S]],m[0],c[S]),D=_(E,P,A,k,j,O[s[S]],x[0],u[S])):S<32?(C=y(F,V,q,W,B,O[r[S]],m[1],c[S]),D=T(E,P,A,k,j,O[s[S]],x[1],u[S])):S<48?(C=N(F,V,q,W,B,O[r[S]],m[2],c[S]),D=N(E,P,A,k,j,O[s[S]],x[2],u[S])):S<64?(C=T(F,V,q,W,B,O[r[S]],m[3],c[S]),D=y(E,P,A,k,j,O[s[S]],x[3],u[S])):(C=_(F,V,q,W,B,O[r[S]],m[4],c[S]),D=v(E,P,A,k,j,O[s[S]],x[4],u[S])),F=B,B=W,W=p(q,10),q=V,V=C,E=j,j=k,k=p(A,10),A=P,P=D}var R=this._b+q+k|0;this._b=this._c+W+j|0,this._c=this._d+B+E|0,this._d=this._e+F+P|0,this._e=this._a+V+A|0,this._a=R},b.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var O=d.alloc?d.alloc(20):new d(20);return O.writeInt32LE(this._a,0),O.writeInt32LE(this._b,4),O.writeInt32LE(this._c,8),O.writeInt32LE(this._d,12),O.writeInt32LE(this._e,16),O},f.exports=b},{buffer:220,"hash-base":425,inherits:440}],494:[function(t,f,h){var d=t("buffer"),n=d.Buffer;function l(r,s){for(var c in r)s[c]=r[c]}function i(r,s,c){return n(r,s,c)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?f.exports=d:(l(d,h),h.Buffer=i),i.prototype=Object.create(n.prototype),l(n,i),i.from=function(r,s,c){if(typeof r=="number")throw new TypeError("Argument must not be a number");return n(r,s,c)},i.alloc=function(r,s,c){if(typeof r!="number")throw new TypeError("Argument must be a number");var u=n(r);return s!==void 0?typeof c=="string"?u.fill(s,c):u.fill(s):u.fill(0),u},i.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return n(r)},i.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return d.SlowBuffer(r)}},{buffer:220}],495:[function(t,f,h){(function(d){(function(){var n,l=t("buffer"),i=l.Buffer,r={};for(n in l)l.hasOwnProperty(n)&&n!=="SlowBuffer"&&n!=="Buffer"&&(r[n]=l[n]);var s=r.Buffer={};for(n in i)i.hasOwnProperty(n)&&n!=="allocUnsafe"&&n!=="allocUnsafeSlow"&&(s[n]=i[n]);if(r.Buffer.prototype=i.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(c,u,m){if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof c);if(c&&c.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);return i(c,u,m)}),s.alloc||(s.alloc=function(c,u,m){if(typeof c!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof c);if(c<0||c>=2*(1<<30))throw new RangeError('The value "'+c+'" is invalid for option "size"');var x=i(c);return u&&u.length!==0?typeof m=="string"?x.fill(u,m):x.fill(u):x.fill(0),x}),!r.kStringMaxLength)try{r.kStringMaxLength=d.binding("buffer").kStringMaxLength}catch{}r.constants||(r.constants={MAX_LENGTH:r.kMaxLength},r.kStringMaxLength&&(r.constants.MAX_STRING_LENGTH=r.kStringMaxLength)),f.exports=r}).call(this)}).call(this,t("_process"))},{_process:467,buffer:220}],496:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0});const d=t("xmlchars/xml/1.0/ed5"),n=t("xmlchars/xml/1.1/ed2"),l=t("xmlchars/xmlns/1.0/ed3");var i=d.isS,r=d.isChar,s=d.isNameStartChar,c=d.isNameChar,u=d.S_LIST,m=d.NAME_RE,x=n.isChar,b=l.isNCNameStartChar,p=l.isNCNameChar,v=l.NC_NAME_RE;const y="http://www.w3.org/XML/1998/namespace",N="http://www.w3.org/2000/xmlns/",T={__proto__:null,xml:y,xmlns:N},_={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},O=k=>k===34||k===39,H=[34,39],F=[...H,91,62],V=[...H,60,93],q=[61,63,...u],W=[...u,62,38,60];function B(k,j,S){switch(j){case"xml":S!==y&&k.fail(`xml prefix must be bound to ${y}.`);break;case"xmlns":S!==N&&k.fail(`xmlns prefix must be bound to ${N}.`)}switch(S){case N:k.fail(j===""?`the default namespace may not be set to ${S}.`:`may not assign a prefix (even "xmlns") to the URI ${N}.`);break;case y:switch(j){case"xml":break;case"":k.fail(`the default namespace may not be set to ${S}.`);break;default:k.fail("may not assign the xml namespace to another prefix.")}}}const E=k=>v.test(k),P=k=>m.test(k);h.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const A={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};h.SaxesParser=class{constructor(k){this.opt=k??{},this.fragmentOpt=!!this.opt.fragment;const j=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,j){this.nameStartCheck=b,this.nameCheck=p,this.isName=E,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},T);const S=this.opt.additionalNamespaces;S!=null&&((function(C,D){for(const R of Object.keys(D))B(C,R,D[R])})(this,S),Object.assign(this.ns,S))}else this.nameStartCheck=s,this.nameCheck=c,this.isName=P,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var k;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:j}=this;this.state=j?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=j,this.xmlDeclPossible=!j,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:S}=this.opt;if(S===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");S="1.0"}this.setXMLVersion(S),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(_),(k=this.readyHandler)===null||k===void 0||k.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(k,j){this[A[k]]=j}off(k){this[A[k]]=void 0}makeError(k){var j;let S=(j=this.fileName)!==null&&j!==void 0?j:"";return this.trackPosition&&(S.length>0&&(S+=":"),S+=`${this.line}:${this.column}`),S.length>0&&(S+=": "),new Error(S+k)}fail(k){const j=this.makeError(k),S=this.errorHandler;if(S===void 0)throw j;return S(j),this}write(k){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let j=!1;k===null?(j=!0,k=""):typeof k=="object"&&(k=k.toString()),this.carriedFromPrevious!==void 0&&(k=`${this.carriedFromPrevious}${k}`,this.carriedFromPrevious=void 0);let S=k.length;const C=k.charCodeAt(S-1);!j&&(C===13||C>=55296&&C<=56319)&&(this.carriedFromPrevious=k[S-1],S--,k=k.slice(0,S));const{stateTable:D}=this;for(this.chunk=k,this.i=0;this.i<S;)D[this.state].call(this);return this.chunkPosition+=S,j?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:k,i:j}=this;if(this.prevI=j,this.i=j+1,j>=k.length)return-1;const S=k.charCodeAt(j);if(this.column++,S<55296){if(S>=32||S===9)return S;switch(S){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return k.charCodeAt(j+1)===10&&(this.i=j+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),S}}if(S>56319)return S>=57344&&S<=65533||this.fail("disallowed character."),S;const C=65536+1024*(S-55296)+(k.charCodeAt(j+1)-56320);return this.i=j+2,C>1114111&&this.fail("disallowed character."),C}getCode11(){const{chunk:k,i:j}=this;if(this.prevI=j,this.i=j+1,j>=k.length)return-1;const S=k.charCodeAt(j);if(this.column++,S<55296){if(S>31&&S<127||S>159&&S!==8232||S===9)return S;switch(S){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const D=k.charCodeAt(j+1);D!==10&&D!==133||(this.i=j+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),S}}if(S>56319)return S>=57344&&S<=65533||this.fail("disallowed character."),S;const C=65536+1024*(S-55296)+(k.charCodeAt(j+1)-56320);return this.i=j+2,C>1114111&&this.fail("disallowed character."),C}getCodeNorm(){const k=this.getCode();return k===-2?10:k}unget(){this.i=this.prevI,this.column--}captureTo(k){let{i:j}=this;const{chunk:S}=this;for(;;){const C=this.getCode(),D=C===-2,R=D?10:C;if(R===-1||k.includes(R))return this.text+=S.slice(j,this.prevI),R;D&&(this.text+=S.slice(j,this.prevI)+`
`,j=this.i)}}captureToChar(k){let{i:j}=this;const{chunk:S}=this;for(;;){let C=this.getCode();switch(C){case-2:this.text+=S.slice(j,this.prevI)+`
`,j=this.i,C=10;break;case-1:return this.text+=S.slice(j),!1}if(C===k)return this.text+=S.slice(j,this.prevI),!0}}captureNameChars(){const{chunk:k,i:j}=this;for(;;){const S=this.getCode();if(S===-1)return this.name+=k.slice(j),-1;if(!c(S))return this.name+=k.slice(j,this.prevI),S===-2?10:S}}skipSpaces(){for(;;){const k=this.getCodeNorm();if(k===-1||!i(k))return k}}setXMLVersion(k){this.currentXMLVersion=k,k==="1.0"?(this.isChar=r,this.getCode=this.getCode10):(this.isChar=x,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const k=this.i,j=this.skipSpaces();switch(this.prevI!==k&&(this.xmlDeclPossible=!1),j){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var k;const j=this.captureTo(F);switch(j){case 62:(k=this.doctypeHandler)===null||k===void 0||k.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(j),j===91?this.state=4:O(j)&&(this.state=3,this.q=j)}}sDoctypeQuote(){const k=this.q;this.captureToChar(k)&&(this.text+=String.fromCodePoint(k),this.q=null,this.state=2)}sDTD(){const k=this.captureTo(V);k!==-1&&(this.text+=String.fromCodePoint(k),k===93?this.state=2:k===60?this.state=6:O(k)&&(this.state=5,this.q=k))}sDTDQuoted(){const k=this.q;this.captureToChar(k)&&(this.text+=String.fromCodePoint(k),this.state=4,this.q=null)}sDTDOpenWaka(){const k=this.getCodeNorm();switch(this.text+=String.fromCodePoint(k),k){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const k=String.fromCodePoint(this.getCodeNorm()),j=this.openWakaBang+=k;this.text+=k,j!=="-"&&(this.state=j==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const k=this.getCodeNorm();this.text+=String.fromCodePoint(k),this.state=k===45?10:8}sDTDCommentEnded(){const k=this.getCodeNorm();this.text+=String.fromCodePoint(k),k===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const k=this.getCodeNorm();this.text+=String.fromCodePoint(k),k===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:k}=this;const{chunk:j}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=j.slice(k,this.prevI)+`
`,k=this.i;break;case 59:{const{entityReturnState:S}=this,C=this.entity+j.slice(k,this.prevI);let D;this.state=S,C===""?(this.fail("empty entity name."),D="&;"):(D=this.parseEntity(C),this.entity=""),S===13&&this.textHandler===void 0||(this.text+=D);break e}case-1:this.entity+=j.slice(k);break e}}sOpenWaka(){const k=this.getCode();if(s(k))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(k){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var k;const j=this.getCodeNorm();j===45?(this.state=19,(k=this.commentHandler)===null||k===void 0||k.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(j),this.state=17)}sCommentEnded(){const k=this.getCodeNorm();k!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(k),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const k=this.getCodeNorm();k===93?this.state=22:(this.text+="]"+String.fromCodePoint(k),this.state=20)}sCDataEnding2(){var k;const j=this.getCodeNorm();switch(j){case 62:(k=this.cdataHandler)===null||k===void 0||k.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(j),this.state=20}}sPIFirstChar(){const k=this.getCodeNorm();this.nameStartCheck(k)?(this.piTarget+=String.fromCodePoint(k),this.state=24):k===63||i(k)?(this.fail("processing instruction without a target."),this.state=k===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(k),this.state=24)}sPIRest(){const{chunk:k,i:j}=this;for(;;){const S=this.getCodeNorm();if(S===-1)return void(this.piTarget+=k.slice(j));if(!this.nameCheck(S)){this.piTarget+=k.slice(j,this.prevI);const C=S===63;C||i(S)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=C?33:27):this.state=C?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(S));break}}}sPIBody(){if(this.text.length===0){const k=this.getCodeNorm();k===63?this.state=26:i(k)||(this.text=String.fromCodePoint(k))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var k;const j=this.getCodeNorm();if(j===62){const{piTarget:S}=this;S.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(k=this.piHandler)===null||k===void 0||k.call(this,{target:S,body:this.text}),this.piTarget=this.text="",this.state=13}else j===63?this.text+="?":(this.text+="?"+String.fromCodePoint(j),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const k=this.skipSpaces();k!==63?k!==-1&&(this.state=28,this.name=String.fromCodePoint(k)):this.state=33}sXMLDeclName(){const k=this.captureTo(q);if(k===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(i(k)||k===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=k===61?30:29}}sXMLDeclEq(){const k=this.getCodeNorm();if(k===63)return this.state=33,void this.fail("XML declaration is incomplete.");i(k)||(k!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const k=this.getCodeNorm();if(k===63)return this.state=33,void this.fail("XML declaration is incomplete.");i(k)||(O(k)?this.q=k:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const k=this.captureTo([this.q,63]);if(k===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(k===-1)return;const j=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const S=j;this.xmlDecl.version=S,/^1\.[0-9]+$/.test(S)?this.opt.forceXMLVersion||this.setXMLVersion(S):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(j)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=j;break;case"standalone":j!=="yes"&&j!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=j}this.name="",this.state=32}sXMLDeclSeparator(){const k=this.getCodeNorm();k!==63?(i(k)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var k;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(k=this.xmldeclHandler)===null||k===void 0||k.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var k;const j=this.captureNameChars();if(j===-1)return;const S=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=S.ns=Object.create(null)),(k=this.openTagStartHandler)===null||k===void 0||k.call(this,S),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),j){case 62:this.openTag();break;case 47:this.state=35;break;default:i(j)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const k=this.skipSpaces();k!==-1&&(s(k)?(this.unget(),this.state=37):k===62?this.openTag():k===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const k=this.captureNameChars();k===61?this.state=39:i(k)?this.state=38:k===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):k!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const k=this.skipSpaces();switch(k){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",k===62?this.openTag():s(k)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const k=this.getCodeNorm();O(k)?(this.q=k,this.state=40):i(k)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:k,chunk:j}=this;let{i:S}=this;for(;;)switch(this.getCode()){case k:return this.pushAttrib(this.name,this.text+j.slice(S,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=j.slice(S,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=j.slice(S,this.prevI)+" ",S=this.i;break;case 60:return this.text+=j.slice(S,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=j.slice(S))}}sAttribValueClosed(){const k=this.getCodeNorm();i(k)?this.state=36:k===62?this.openTag():k===47?this.state=35:s(k)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const k=this.captureTo(W);switch(k){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",k===62?this.openTag():this.state=36}}sCloseTag(){const k=this.captureNameChars();k===62?this.closeTag():i(k)?this.state=44:k!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:k,forbiddenState:j}=this;const{chunk:S,textHandler:C}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,C!==void 0){const{text:D}=this,R=S.slice(k,this.prevI);D.length!==0?(C(D+R),this.text=""):R.length!==0&&C(R)}j=0;break e;case 38:this.state=14,this.entityReturnState=13,C!==void 0&&(this.text+=S.slice(k,this.prevI)),j=0;break e;case 93:switch(j){case 0:j=1;break;case 1:j=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:j===2&&this.fail('the string "]]>" is disallowed in char data.'),j=0;break;case-2:C!==void 0&&(this.text+=S.slice(k,this.prevI)+`
`),k=this.i,j=0;break;case-1:C!==void 0&&(this.text+=S.slice(k));break e;default:j=0}this.forbiddenState=j}handleTextOutsideRoot(){let{i:k}=this;const{chunk:j,textHandler:S}=this;let C=!1;e:for(;;){const D=this.getCode();switch(D){case 60:if(this.state=15,S!==void 0){const{text:R}=this,L=j.slice(k,this.prevI);R.length!==0?(S(R+L),this.text=""):L.length!==0&&S(L)}break e;case 38:this.state=14,this.entityReturnState=13,S!==void 0&&(this.text+=j.slice(k,this.prevI)),C=!0;break e;case-2:S!==void 0&&(this.text+=j.slice(k,this.prevI)+`
`),k=this.i;break;case-1:S!==void 0&&(this.text+=j.slice(k));break e;default:i(D)||(C=!0)}}C&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(k,j){var S;const{prefix:C,local:D}=this.qname(k),R={name:k,prefix:C,local:D,value:j};if(this.attribList.push(R),(S=this.attributeHandler)===null||S===void 0||S.call(this,R),C==="xmlns"){const L=j.trim();this.currentXMLVersion==="1.0"&&L===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[D]=L,B(this,D,L)}else if(k==="xmlns"){const L=j.trim();this.topNS[""]=L,B(this,"",L)}}pushAttribPlain(k,j){var S;const C={name:k,value:j};this.attribList.push(C),(S=this.attributeHandler)===null||S===void 0||S.call(this,C)}end(){var k,j;this.sawRoot||this.fail("document must contain a root element.");const{tags:S}=this;for(;S.length>0;){const D=S.pop();this.fail("unclosed tag: "+D.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:C}=this;return C.length!==0&&((k=this.textHandler)===null||k===void 0||k.call(this,C),this.text=""),this._closed=!0,(j=this.endHandler)===null||j===void 0||j.call(this),this._init(),this}resolve(k){var j,S;let C=this.topNS[k];if(C!==void 0)return C;const{tags:D}=this;for(let R=D.length-1;R>=0;R--)if(C=D[R].ns[k],C!==void 0)return C;return C=this.ns[k],C!==void 0?C:(S=(j=this.opt).resolvePrefix)===null||S===void 0?void 0:S.call(j,k)}qname(k){const j=k.indexOf(":");if(j===-1)return{prefix:"",local:k};const S=k.slice(j+1),C=k.slice(0,j);return(C===""||S===""||S.includes(":"))&&this.fail(`malformed name: ${k}.`),{prefix:C,local:S}}processAttribsNS(){var k;const{attribList:j}=this,S=this.tag;{const{prefix:R,local:L}=this.qname(S.name);S.prefix=R,S.local=L;const Y=S.uri=(k=this.resolve(R))!==null&&k!==void 0?k:"";R!==""&&(R==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),Y===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(R)}.`),S.uri=R))}if(j.length===0)return;const{attributes:C}=S,D=new Set;for(const R of j){const{name:L,prefix:Y,local:X}=R;let ae,$;Y===""?(ae=L==="xmlns"?N:"",$=L):(ae=this.resolve(Y),ae===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Y)}.`),ae=Y),$=`{${ae}}${X}`),D.has($)&&this.fail(`duplicate attribute: ${$}.`),D.add($),R.uri=ae,C[L]=R}this.attribList=[]}processAttribsPlain(){const{attribList:k}=this,j=this.tag.attributes;for(const{name:S,value:C}of k)j[S]!==void 0&&this.fail(`duplicate attribute: ${S}.`),j[S]=C;this.attribList=[]}openTag(){var k;this.processAttribs();const{tags:j}=this,S=this.tag;S.isSelfClosing=!1,(k=this.openTagHandler)===null||k===void 0||k.call(this,S),j.push(S),this.state=13,this.name=""}openSelfClosingTag(){var k,j,S;this.processAttribs();const{tags:C}=this,D=this.tag;D.isSelfClosing=!0,(k=this.openTagHandler)===null||k===void 0||k.call(this,D),(j=this.closeTagHandler)===null||j===void 0||j.call(this,D),(this.tag=(S=C[C.length-1])!==null&&S!==void 0?S:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:k,name:j}=this;if(this.state=13,this.name="",j==="")return this.fail("weird empty close tag."),void(this.text+="</>");const S=this.closeTagHandler;let C=k.length;for(;C-- >0;){const D=this.tag=k.pop();if(this.topNS=D.ns,S?.(D),D.name===j)break;this.fail("unexpected close tag.")}C===0?this.closedRoot=!0:C<0&&(this.fail(`unmatched closing tag: ${j}.`),this.text+=`</${j}>`)}parseEntity(k){if(k[0]!=="#"){const S=this.ENTITIES[k];return S!==void 0?S:(this.fail(this.isName(k)?"undefined entity.":"disallowed character in entity name."),`&${k};`)}let j=NaN;return k[1]==="x"&&/^#x[0-9a-f]+$/i.test(k)?j=parseInt(k.slice(2),16):/^#[0-9]+$/.test(k)&&(j=parseInt(k.slice(1),10)),this.isChar(j)?String.fromCodePoint(j):(this.fail("malformed character entity."),`&${k};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(t,f,h){var d=t("safe-buffer").Buffer;function n(l,i){this._block=d.alloc(l),this._finalSize=i,this._blockSize=l,this._len=0}n.prototype.update=function(l,i){typeof l=="string"&&(i=i||"utf8",l=d.from(l,i));for(var r=this._block,s=this._blockSize,c=l.length,u=this._len,m=0;m<c;){for(var x=u%s,b=Math.min(c-m,s-x),p=0;p<b;p++)r[x+p]=l[m+p];m+=b,(u+=b)%s==0&&this._update(r)}return this._len+=c,this},n.prototype.digest=function(l){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var s=(4294967295&r)>>>0,c=(r-s)/4294967296;this._block.writeUInt32BE(c,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var u=this._hash();return l?u.toString(l):u},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},f.exports=n},{"safe-buffer":494}],498:[function(t,f,h){var d=f.exports=function(n){n=n.toLowerCase();var l=d[n];if(!l)throw new Error(n+" is not supported (we accept pull requests)");return new l};d.sha=t("./sha"),d.sha1=t("./sha1"),d.sha224=t("./sha224"),d.sha256=t("./sha256"),d.sha384=t("./sha384"),d.sha512=t("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(t,f,h){var d=t("inherits"),n=t("./hash"),l=t("safe-buffer").Buffer,i=[1518500249,1859775393,-1894007588,-899497514],r=new Array(80);function s(){this.init(),this._w=r,n.call(this,64,56)}function c(m){return m<<30|m>>>2}function u(m,x,b,p){return m===0?x&b|~x&p:m===2?x&b|x&p|b&p:x^b^p}d(s,n),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(m){for(var x,b=this._w,p=0|this._a,v=0|this._b,y=0|this._c,N=0|this._d,T=0|this._e,_=0;_<16;++_)b[_]=m.readInt32BE(4*_);for(;_<80;++_)b[_]=b[_-3]^b[_-8]^b[_-14]^b[_-16];for(var O=0;O<80;++O){var H=~~(O/20),F=0|((x=p)<<5|x>>>27)+u(H,v,y,N)+T+b[O]+i[H];T=N,N=y,y=c(v),v=p,p=F}this._a=p+this._a|0,this._b=v+this._b|0,this._c=y+this._c|0,this._d=N+this._d|0,this._e=T+this._e|0},s.prototype._hash=function(){var m=l.allocUnsafe(20);return m.writeInt32BE(0|this._a,0),m.writeInt32BE(0|this._b,4),m.writeInt32BE(0|this._c,8),m.writeInt32BE(0|this._d,12),m.writeInt32BE(0|this._e,16),m},f.exports=s},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(t,f,h){var d=t("inherits"),n=t("./hash"),l=t("safe-buffer").Buffer,i=[1518500249,1859775393,-1894007588,-899497514],r=new Array(80);function s(){this.init(),this._w=r,n.call(this,64,56)}function c(x){return x<<5|x>>>27}function u(x){return x<<30|x>>>2}function m(x,b,p,v){return x===0?b&p|~b&v:x===2?b&p|b&v|p&v:b^p^v}d(s,n),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(x){for(var b,p=this._w,v=0|this._a,y=0|this._b,N=0|this._c,T=0|this._d,_=0|this._e,O=0;O<16;++O)p[O]=x.readInt32BE(4*O);for(;O<80;++O)p[O]=(b=p[O-3]^p[O-8]^p[O-14]^p[O-16])<<1|b>>>31;for(var H=0;H<80;++H){var F=~~(H/20),V=c(v)+m(F,y,N,T)+_+p[H]+i[F]|0;_=T,T=N,N=u(y),y=v,v=V}this._a=v+this._a|0,this._b=y+this._b|0,this._c=N+this._c|0,this._d=T+this._d|0,this._e=_+this._e|0},s.prototype._hash=function(){var x=l.allocUnsafe(20);return x.writeInt32BE(0|this._a,0),x.writeInt32BE(0|this._b,4),x.writeInt32BE(0|this._c,8),x.writeInt32BE(0|this._d,12),x.writeInt32BE(0|this._e,16),x},f.exports=s},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(t,f,h){var d=t("inherits"),n=t("./sha256"),l=t("./hash"),i=t("safe-buffer").Buffer,r=new Array(64);function s(){this.init(),this._w=r,l.call(this,64,56)}d(s,n),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var c=i.allocUnsafe(28);return c.writeInt32BE(this._a,0),c.writeInt32BE(this._b,4),c.writeInt32BE(this._c,8),c.writeInt32BE(this._d,12),c.writeInt32BE(this._e,16),c.writeInt32BE(this._f,20),c.writeInt32BE(this._g,24),c},f.exports=s},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(t,f,h){var d=t("inherits"),n=t("./hash"),l=t("safe-buffer").Buffer,i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=new Array(64);function s(){this.init(),this._w=r,n.call(this,64,56)}function c(p,v,y){return y^p&(v^y)}function u(p,v,y){return p&v|y&(p|v)}function m(p){return(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10)}function x(p){return(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7)}function b(p){return(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3}d(s,n),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},s.prototype._update=function(p){for(var v,y=this._w,N=0|this._a,T=0|this._b,_=0|this._c,O=0|this._d,H=0|this._e,F=0|this._f,V=0|this._g,q=0|this._h,W=0;W<16;++W)y[W]=p.readInt32BE(4*W);for(;W<64;++W)y[W]=0|(((v=y[W-2])>>>17|v<<15)^(v>>>19|v<<13)^v>>>10)+y[W-7]+b(y[W-15])+y[W-16];for(var B=0;B<64;++B){var E=q+x(H)+c(H,F,V)+i[B]+y[B]|0,P=m(N)+u(N,T,_)|0;q=V,V=F,F=H,H=O+E|0,O=_,_=T,T=N,N=E+P|0}this._a=N+this._a|0,this._b=T+this._b|0,this._c=_+this._c|0,this._d=O+this._d|0,this._e=H+this._e|0,this._f=F+this._f|0,this._g=V+this._g|0,this._h=q+this._h|0},s.prototype._hash=function(){var p=l.allocUnsafe(32);return p.writeInt32BE(this._a,0),p.writeInt32BE(this._b,4),p.writeInt32BE(this._c,8),p.writeInt32BE(this._d,12),p.writeInt32BE(this._e,16),p.writeInt32BE(this._f,20),p.writeInt32BE(this._g,24),p.writeInt32BE(this._h,28),p},f.exports=s},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(t,f,h){var d=t("inherits"),n=t("./sha512"),l=t("./hash"),i=t("safe-buffer").Buffer,r=new Array(160);function s(){this.init(),this._w=r,l.call(this,128,112)}d(s,n),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var c=i.allocUnsafe(48);function u(m,x,b){c.writeInt32BE(m,b),c.writeInt32BE(x,b+4)}return u(this._ah,this._al,0),u(this._bh,this._bl,8),u(this._ch,this._cl,16),u(this._dh,this._dl,24),u(this._eh,this._el,32),u(this._fh,this._fl,40),c},f.exports=s},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(t,f,h){var d=t("inherits"),n=t("./hash"),l=t("safe-buffer").Buffer,i=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],r=new Array(160);function s(){this.init(),this._w=r,n.call(this,128,112)}function c(T,_,O){return O^T&(_^O)}function u(T,_,O){return T&_|O&(T|_)}function m(T,_){return(T>>>28|_<<4)^(_>>>2|T<<30)^(_>>>7|T<<25)}function x(T,_){return(T>>>14|_<<18)^(T>>>18|_<<14)^(_>>>9|T<<23)}function b(T,_){return(T>>>1|_<<31)^(T>>>8|_<<24)^T>>>7}function p(T,_){return(T>>>1|_<<31)^(T>>>8|_<<24)^(T>>>7|_<<25)}function v(T,_){return(T>>>19|_<<13)^(_>>>29|T<<3)^T>>>6}function y(T,_){return(T>>>19|_<<13)^(_>>>29|T<<3)^(T>>>6|_<<26)}function N(T,_){return T>>>0<_>>>0?1:0}d(s,n),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},s.prototype._update=function(T){for(var _=this._w,O=0|this._ah,H=0|this._bh,F=0|this._ch,V=0|this._dh,q=0|this._eh,W=0|this._fh,B=0|this._gh,E=0|this._hh,P=0|this._al,A=0|this._bl,k=0|this._cl,j=0|this._dl,S=0|this._el,C=0|this._fl,D=0|this._gl,R=0|this._hl,L=0;L<32;L+=2)_[L]=T.readInt32BE(4*L),_[L+1]=T.readInt32BE(4*L+4);for(;L<160;L+=2){var Y=_[L-30],X=_[L-30+1],ae=b(Y,X),$=p(X,Y),Q=v(Y=_[L-4],X=_[L-4+1]),z=y(X,Y),M=_[L-14],U=_[L-14+1],te=_[L-32],ie=_[L-32+1],se=$+U|0,le=ae+M+N(se,$)|0;le=(le=le+Q+N(se=se+z|0,z)|0)+te+N(se=se+ie|0,ie)|0,_[L]=le,_[L+1]=se}for(var Ne=0;Ne<160;Ne+=2){le=_[Ne],se=_[Ne+1];var ke=u(O,H,F),Z=u(P,A,k),ce=m(O,P),ve=m(P,O),De=x(q,S),Ae=x(S,q),Ie=i[Ne],Ue=i[Ne+1],Ge=c(q,W,B),Le=c(S,C,D),at=R+Ae|0,ut=E+De+N(at,R)|0;ut=(ut=(ut=ut+Ge+N(at=at+Le|0,Le)|0)+Ie+N(at=at+Ue|0,Ue)|0)+le+N(at=at+se|0,se)|0;var Ce=ve+Z|0,it=ce+ke+N(Ce,ve)|0;E=B,R=D,B=W,D=C,W=q,C=S,q=V+ut+N(S=j+at|0,j)|0,V=F,j=k,F=H,k=A,H=O,A=P,O=ut+it+N(P=at+Ce|0,at)|0}this._al=this._al+P|0,this._bl=this._bl+A|0,this._cl=this._cl+k|0,this._dl=this._dl+j|0,this._el=this._el+S|0,this._fl=this._fl+C|0,this._gl=this._gl+D|0,this._hl=this._hl+R|0,this._ah=this._ah+O+N(this._al,P)|0,this._bh=this._bh+H+N(this._bl,A)|0,this._ch=this._ch+F+N(this._cl,k)|0,this._dh=this._dh+V+N(this._dl,j)|0,this._eh=this._eh+q+N(this._el,S)|0,this._fh=this._fh+W+N(this._fl,C)|0,this._gh=this._gh+B+N(this._gl,D)|0,this._hh=this._hh+E+N(this._hl,R)|0},s.prototype._hash=function(){var T=l.allocUnsafe(64);function _(O,H,F){T.writeInt32BE(O,F),T.writeInt32BE(H,F+4)}return _(this._ah,this._al,0),_(this._bh,this._bl,8),_(this._ch,this._cl,16),_(this._dh,this._dl,24),_(this._eh,this._el,32),_(this._fh,this._fl,40),_(this._gh,this._gl,48),_(this._hh,this._hl,56),T},f.exports=s},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(t,f,h){f.exports=n;var d=t("events").EventEmitter;function n(){d.call(this)}t("inherits")(n,d),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(l,i){var r=this;function s(v){l.writable&&l.write(v)===!1&&r.pause&&r.pause()}function c(){r.readable&&r.resume&&r.resume()}r.on("data",s),l.on("drain",c),l._isStdio||i&&i.end===!1||(r.on("end",m),r.on("close",x));var u=!1;function m(){u||(u=!0,l.end())}function x(){u||(u=!0,typeof l.destroy=="function"&&l.destroy())}function b(v){if(p(),d.listenerCount(this,"error")===0)throw v}function p(){r.removeListener("data",s),l.removeListener("drain",c),r.removeListener("end",m),r.removeListener("close",x),r.removeListener("error",b),l.removeListener("error",b),r.removeListener("end",p),r.removeListener("close",p),l.removeListener("close",p)}return r.on("error",b),l.on("error",b),r.on("end",p),r.on("close",p),l.on("close",p),l.emit("pipe",r),l}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(t,f,h){var d={}.toString;f.exports=Array.isArray||function(n){return d.call(n)=="[object Array]"}},{}],507:[function(t,f,h){f.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(t,f,h){var d=t("process-nextick-args"),n=Object.keys||function(p){var v=[];for(var y in p)v.push(y);return v};f.exports=m;var l=Object.create(t("core-util-is"));l.inherits=t("inherits");var i=t("./_stream_readable"),r=t("./_stream_writable");l.inherits(m,i);for(var s=n(r.prototype),c=0;c<s.length;c++){var u=s[c];m.prototype[u]||(m.prototype[u]=r.prototype[u])}function m(p){if(!(this instanceof m))return new m(p);i.call(this,p),r.call(this,p),p&&p.readable===!1&&(this.readable=!1),p&&p.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,p&&p.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",x)}function x(){this.allowHalfOpen||this._writableState.ended||d.nextTick(b,this)}function b(p){p.end()}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),m.prototype._destroy=function(p,v){this.push(null),this.end(),d.nextTick(v,p)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(t,f,h){f.exports=l;var d=t("./_stream_transform"),n=Object.create(t("core-util-is"));function l(i){if(!(this instanceof l))return new l(i);d.call(this,i)}n.inherits=t("inherits"),n.inherits(l,d),l.prototype._transform=function(i,r,s){s(null,i)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(t,f,h){(function(d,n){(function(){var l=t("process-nextick-args");f.exports=O;var i,r=t("isarray");O.ReadableState=_,t("events").EventEmitter;var s=function(R,L){return R.listeners(L).length},c=t("./internal/streams/stream"),u=t("safe-buffer").Buffer,m=(n!==void 0?n:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},x=Object.create(t("core-util-is"));x.inherits=t("inherits");var b=t("util"),p=void 0;p=b&&b.debuglog?b.debuglog("stream"):function(){};var v,y=t("./internal/streams/BufferList"),N=t("./internal/streams/destroy");x.inherits(O,c);var T=["error","close","destroy","pause","resume"];function _(R,L){R=R||{};var Y=L instanceof(i=i||t("./_stream_duplex"));this.objectMode=!!R.objectMode,Y&&(this.objectMode=this.objectMode||!!R.readableObjectMode);var X=R.highWaterMark,ae=R.readableHighWaterMark,$=this.objectMode?16:16384;this.highWaterMark=X||X===0?X:Y&&(ae||ae===0)?ae:$,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(v||(v=t("string_decoder/").StringDecoder),this.decoder=new v(R.encoding),this.encoding=R.encoding)}function O(R){if(i=i||t("./_stream_duplex"),!(this instanceof O))return new O(R);this._readableState=new _(R,this),this.readable=!0,R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy)),c.call(this)}function H(R,L,Y,X,ae){var $,Q=R._readableState;return L===null?(Q.reading=!1,(function(z,M){if(!M.ended){if(M.decoder){var U=M.decoder.end();U&&U.length&&(M.buffer.push(U),M.length+=M.objectMode?1:U.length)}M.ended=!0,q(z)}})(R,Q)):(ae||($=(function(z,M){var U;te=M,u.isBuffer(te)||te instanceof m||typeof M=="string"||M===void 0||z.objectMode||(U=new TypeError("Invalid non-string/buffer chunk"));var te;return U})(Q,L)),$?R.emit("error",$):Q.objectMode||L&&L.length>0?(typeof L=="string"||Q.objectMode||Object.getPrototypeOf(L)===u.prototype||(L=(function(z){return u.from(z)})(L)),X?Q.endEmitted?R.emit("error",new Error("stream.unshift() after end event")):F(R,Q,L,!0):Q.ended?R.emit("error",new Error("stream.push() after EOF")):(Q.reading=!1,Q.decoder&&!Y?(L=Q.decoder.write(L),Q.objectMode||L.length!==0?F(R,Q,L,!1):B(R,Q)):F(R,Q,L,!1))):X||(Q.reading=!1)),(function(z){return!z.ended&&(z.needReadable||z.length<z.highWaterMark||z.length===0)})(Q)}function F(R,L,Y,X){L.flowing&&L.length===0&&!L.sync?(R.emit("data",Y),R.read(0)):(L.length+=L.objectMode?1:Y.length,X?L.buffer.unshift(Y):L.buffer.push(Y),L.needReadable&&q(R)),B(R,L)}Object.defineProperty(O.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),O.prototype.destroy=N.destroy,O.prototype._undestroy=N.undestroy,O.prototype._destroy=function(R,L){this.push(null),L(R)},O.prototype.push=function(R,L){var Y,X=this._readableState;return X.objectMode?Y=!0:typeof R=="string"&&((L=L||X.defaultEncoding)!==X.encoding&&(R=u.from(R,L),L=""),Y=!0),H(this,R,L,!1,Y)},O.prototype.unshift=function(R){return H(this,R,null,!0,!1)},O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(R){return v||(v=t("string_decoder/").StringDecoder),this._readableState.decoder=new v(R),this._readableState.encoding=R,this};function V(R,L){return R<=0||L.length===0&&L.ended?0:L.objectMode?1:R!=R?L.flowing&&L.length?L.buffer.head.data.length:L.length:(R>L.highWaterMark&&(L.highWaterMark=(function(Y){return Y>=8388608?Y=8388608:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y})(R)),R<=L.length?R:L.ended?L.length:(L.needReadable=!0,0))}function q(R){var L=R._readableState;L.needReadable=!1,L.emittedReadable||(p("emitReadable",L.flowing),L.emittedReadable=!0,L.sync?l.nextTick(W,R):W(R))}function W(R){p("emit readable"),R.emit("readable"),k(R)}function B(R,L){L.readingMore||(L.readingMore=!0,l.nextTick(E,R,L))}function E(R,L){for(var Y=L.length;!L.reading&&!L.flowing&&!L.ended&&L.length<L.highWaterMark&&(p("maybeReadMore read 0"),R.read(0),Y!==L.length);)Y=L.length;L.readingMore=!1}function P(R){p("readable nexttick read 0"),R.read(0)}function A(R,L){L.reading||(p("resume read 0"),R.read(0)),L.resumeScheduled=!1,L.awaitDrain=0,R.emit("resume"),k(R),L.flowing&&!L.reading&&R.read(0)}function k(R){var L=R._readableState;for(p("flow",L.flowing);L.flowing&&R.read()!==null;);}function j(R,L){return L.length===0?null:(L.objectMode?Y=L.buffer.shift():!R||R>=L.length?(Y=L.decoder?L.buffer.join(""):L.buffer.length===1?L.buffer.head.data:L.buffer.concat(L.length),L.buffer.clear()):Y=(function(X,ae,$){var Q;return X<ae.head.data.length?(Q=ae.head.data.slice(0,X),ae.head.data=ae.head.data.slice(X)):Q=X===ae.head.data.length?ae.shift():$?(function(z,M){var U=M.head,te=1,ie=U.data;for(z-=ie.length;U=U.next;){var se=U.data,le=z>se.length?se.length:z;if(le===se.length?ie+=se:ie+=se.slice(0,z),(z-=le)===0){le===se.length?(++te,U.next?M.head=U.next:M.head=M.tail=null):(M.head=U,U.data=se.slice(le));break}++te}return M.length-=te,ie})(X,ae):(function(z,M){var U=u.allocUnsafe(z),te=M.head,ie=1;for(te.data.copy(U),z-=te.data.length;te=te.next;){var se=te.data,le=z>se.length?se.length:z;if(se.copy(U,U.length-z,0,le),(z-=le)===0){le===se.length?(++ie,te.next?M.head=te.next:M.head=M.tail=null):(M.head=te,te.data=se.slice(le));break}++ie}return M.length-=ie,U})(X,ae),Q})(R,L.buffer,L.decoder),Y);var Y}function S(R){var L=R._readableState;if(L.length>0)throw new Error('"endReadable()" called on non-empty stream');L.endEmitted||(L.ended=!0,l.nextTick(C,L,R))}function C(R,L){R.endEmitted||R.length!==0||(R.endEmitted=!0,L.readable=!1,L.emit("end"))}function D(R,L){for(var Y=0,X=R.length;Y<X;Y++)if(R[Y]===L)return Y;return-1}O.prototype.read=function(R){p("read",R),R=parseInt(R,10);var L=this._readableState,Y=R;if(R!==0&&(L.emittedReadable=!1),R===0&&L.needReadable&&(L.length>=L.highWaterMark||L.ended))return p("read: emitReadable",L.length,L.ended),L.length===0&&L.ended?S(this):q(this),null;if((R=V(R,L))===0&&L.ended)return L.length===0&&S(this),null;var X,ae=L.needReadable;return p("need readable",ae),(L.length===0||L.length-R<L.highWaterMark)&&p("length less than watermark",ae=!0),L.ended||L.reading?p("reading or ended",ae=!1):ae&&(p("do read"),L.reading=!0,L.sync=!0,L.length===0&&(L.needReadable=!0),this._read(L.highWaterMark),L.sync=!1,L.reading||(R=V(Y,L))),(X=R>0?j(R,L):null)===null?(L.needReadable=!0,R=0):L.length-=R,L.length===0&&(L.ended||(L.needReadable=!0),Y!==R&&L.ended&&S(this)),X!==null&&this.emit("data",X),X},O.prototype._read=function(R){this.emit("error",new Error("_read() is not implemented"))},O.prototype.pipe=function(R,L){var Y=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=R;break;case 1:X.pipes=[X.pipes,R];break;default:X.pipes.push(R)}X.pipesCount+=1,p("pipe count=%d opts=%j",X.pipesCount,L);var ae=(!L||L.end!==!1)&&R!==d.stdout&&R!==d.stderr?Q:Ne;function $(ke,Z){p("onunpipe"),ke===Y&&Z&&Z.hasUnpiped===!1&&(Z.hasUnpiped=!0,p("cleanup"),R.removeListener("close",se),R.removeListener("finish",le),R.removeListener("drain",z),R.removeListener("error",ie),R.removeListener("unpipe",$),Y.removeListener("end",Q),Y.removeListener("end",Ne),Y.removeListener("data",te),M=!0,!X.awaitDrain||R._writableState&&!R._writableState.needDrain||z())}function Q(){p("onend"),R.end()}X.endEmitted?l.nextTick(ae):Y.once("end",ae),R.on("unpipe",$);var z=(function(ke){return function(){var Z=ke._readableState;p("pipeOnDrain",Z.awaitDrain),Z.awaitDrain&&Z.awaitDrain--,Z.awaitDrain===0&&s(ke,"data")&&(Z.flowing=!0,k(ke))}})(Y);R.on("drain",z);var M=!1,U=!1;function te(ke){p("ondata"),U=!1,R.write(ke)!==!1||U||((X.pipesCount===1&&X.pipes===R||X.pipesCount>1&&D(X.pipes,R)!==-1)&&!M&&(p("false write response, pause",X.awaitDrain),X.awaitDrain++,U=!0),Y.pause())}function ie(ke){p("onerror",ke),Ne(),R.removeListener("error",ie),s(R,"error")===0&&R.emit("error",ke)}function se(){R.removeListener("finish",le),Ne()}function le(){p("onfinish"),R.removeListener("close",se),Ne()}function Ne(){p("unpipe"),Y.unpipe(R)}return Y.on("data",te),(function(ke,Z,ce){if(typeof ke.prependListener=="function")return ke.prependListener(Z,ce);ke._events&&ke._events[Z]?r(ke._events[Z])?ke._events[Z].unshift(ce):ke._events[Z]=[ce,ke._events[Z]]:ke.on(Z,ce)})(R,"error",ie),R.once("close",se),R.once("finish",le),R.emit("pipe",Y),X.flowing||(p("pipe resume"),Y.resume()),R},O.prototype.unpipe=function(R){var L=this._readableState,Y={hasUnpiped:!1};if(L.pipesCount===0)return this;if(L.pipesCount===1)return R&&R!==L.pipes||(R||(R=L.pipes),L.pipes=null,L.pipesCount=0,L.flowing=!1,R&&R.emit("unpipe",this,Y)),this;if(!R){var X=L.pipes,ae=L.pipesCount;L.pipes=null,L.pipesCount=0,L.flowing=!1;for(var $=0;$<ae;$++)X[$].emit("unpipe",this,{hasUnpiped:!1});return this}var Q=D(L.pipes,R);return Q===-1||(L.pipes.splice(Q,1),L.pipesCount-=1,L.pipesCount===1&&(L.pipes=L.pipes[0]),R.emit("unpipe",this,Y)),this},O.prototype.on=function(R,L){var Y=c.prototype.on.call(this,R,L);if(R==="data")this._readableState.flowing!==!1&&this.resume();else if(R==="readable"){var X=this._readableState;X.endEmitted||X.readableListening||(X.readableListening=X.needReadable=!0,X.emittedReadable=!1,X.reading?X.length&&q(this):l.nextTick(P,this))}return Y},O.prototype.addListener=O.prototype.on,O.prototype.resume=function(){var R=this._readableState;return R.flowing||(p("resume"),R.flowing=!0,(function(L,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,l.nextTick(A,L,Y))})(this,R)),this},O.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},O.prototype.wrap=function(R){var L=this,Y=this._readableState,X=!1;for(var ae in R.on("end",(function(){if(p("wrapped end"),Y.decoder&&!Y.ended){var Q=Y.decoder.end();Q&&Q.length&&L.push(Q)}L.push(null)})),R.on("data",(function(Q){p("wrapped data"),Y.decoder&&(Q=Y.decoder.write(Q)),Y.objectMode&&Q==null||(Y.objectMode||Q&&Q.length)&&(L.push(Q)||(X=!0,R.pause()))})),R)this[ae]===void 0&&typeof R[ae]=="function"&&(this[ae]=(function(Q){return function(){return R[Q].apply(R,arguments)}})(ae));for(var $=0;$<T.length;$++)R.on(T[$],this.emit.bind(this,T[$]));return this._read=function(Q){p("wrapped _read",Q),X&&(X=!1,R.resume())},this},Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),O._fromList=j}).call(this)}).call(this,t("_process"),typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(t,f,h){f.exports=i;var d=t("./_stream_duplex"),n=Object.create(t("core-util-is"));function l(c,u){var m=this._transformState;m.transforming=!1;var x=m.writecb;if(!x)return this.emit("error",new Error("write callback called multiple times"));m.writechunk=null,m.writecb=null,u!=null&&this.push(u),x(c);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function i(c){if(!(this instanceof i))return new i(c);d.call(this,c),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",r)}function r(){var c=this;typeof this._flush=="function"?this._flush((function(u,m){s(c,u,m)})):s(this,null,null)}function s(c,u,m){if(u)return c.emit("error",u);if(m!=null&&c.push(m),c._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(c._transformState.transforming)throw new Error("Calling transform done when still transforming");return c.push(null)}n.inherits=t("inherits"),n.inherits(i,d),i.prototype.push=function(c,u){return this._transformState.needTransform=!1,d.prototype.push.call(this,c,u)},i.prototype._transform=function(c,u,m){throw new Error("_transform() is not implemented")},i.prototype._write=function(c,u,m){var x=this._transformState;if(x.writecb=m,x.writechunk=c,x.writeencoding=u,!x.transforming){var b=this._readableState;(x.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},i.prototype._read=function(c){var u=this._transformState;u.writechunk!==null&&u.writecb&&!u.transforming?(u.transforming=!0,this._transform(u.writechunk,u.writeencoding,u.afterTransform)):u.needTransform=!0},i.prototype._destroy=function(c,u){var m=this;d.prototype._destroy.call(this,c,(function(x){u(x),m.emit("close")}))}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(t,f,h){(function(d,n,l){(function(){var i=t("process-nextick-args");function r(B){var E=this;this.next=null,this.entry=null,this.finish=function(){(function(P,A,k){var j=P.entry;for(P.entry=null;j;){var S=j.callback;A.pendingcb--,S(k),j=j.next}A.corkedRequestsFree.next=P})(E,B)}}f.exports=_;var s,c=!d.browser&&["v0.10","v0.9."].indexOf(d.version.slice(0,5))>-1?l:i.nextTick;_.WritableState=T;var u=Object.create(t("core-util-is"));u.inherits=t("inherits");var m={deprecate:t("util-deprecate")},x=t("./internal/streams/stream"),b=t("safe-buffer").Buffer,p=(n!==void 0?n:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},v,y=t("./internal/streams/destroy");function N(){}function T(B,E){s=s||t("./_stream_duplex"),B=B||{};var P=E instanceof s;this.objectMode=!!B.objectMode,P&&(this.objectMode=this.objectMode||!!B.writableObjectMode);var A=B.highWaterMark,k=B.writableHighWaterMark,j=this.objectMode?16:16384;this.highWaterMark=A||A===0?A:P&&(k||k===0)?k:j,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var S=B.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(C){(function(D,R){var L=D._writableState,Y=L.sync,X=L.writecb;if((function($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0})(L),R)(function($,Q,z,M,U){--Q.pendingcb,z?(i.nextTick(U,M),i.nextTick(W,$,Q),$._writableState.errorEmitted=!0,$.emit("error",M)):(U(M),$._writableState.errorEmitted=!0,$.emit("error",M),W($,Q))})(D,L,Y,R,X);else{var ae=V(L);ae||L.corked||L.bufferProcessing||!L.bufferedRequest||F(D,L),Y?c(H,D,L,ae,X):H(D,L,ae,X)}})(E,C)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function _(B){if(s=s||t("./_stream_duplex"),!(v.call(_,this)||this instanceof s))return new _(B);this._writableState=new T(B,this),this.writable=!0,B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final)),x.call(this)}function O(B,E,P,A,k,j,S){E.writelen=A,E.writecb=S,E.writing=!0,E.sync=!0,P?B._writev(k,E.onwrite):B._write(k,j,E.onwrite),E.sync=!1}function H(B,E,P,A){P||(function(k,j){j.length===0&&j.needDrain&&(j.needDrain=!1,k.emit("drain"))})(B,E),E.pendingcb--,A(),W(B,E)}function F(B,E){E.bufferProcessing=!0;var P=E.bufferedRequest;if(B._writev&&P&&P.next){var A=E.bufferedRequestCount,k=new Array(A),j=E.corkedRequestsFree;j.entry=P;for(var S=0,C=!0;P;)k[S]=P,P.isBuf||(C=!1),P=P.next,S+=1;k.allBuffers=C,O(B,E,!0,E.length,k,"",j.finish),E.pendingcb++,E.lastBufferedRequest=null,j.next?(E.corkedRequestsFree=j.next,j.next=null):E.corkedRequestsFree=new r(E),E.bufferedRequestCount=0}else{for(;P;){var D=P.chunk,R=P.encoding,L=P.callback;if(O(B,E,!1,E.objectMode?1:D.length,D,R,L),P=P.next,E.bufferedRequestCount--,E.writing)break}P===null&&(E.lastBufferedRequest=null)}E.bufferedRequest=P,E.bufferProcessing=!1}function V(B){return B.ending&&B.length===0&&B.bufferedRequest===null&&!B.finished&&!B.writing}function q(B,E){B._final((function(P){E.pendingcb--,P&&B.emit("error",P),E.prefinished=!0,B.emit("prefinish"),W(B,E)}))}function W(B,E){var P=V(E);return P&&((function(A,k){k.prefinished||k.finalCalled||(typeof A._final=="function"?(k.pendingcb++,k.finalCalled=!0,i.nextTick(q,A,k)):(k.prefinished=!0,A.emit("prefinish")))})(B,E),E.pendingcb===0&&(E.finished=!0,B.emit("finish"))),P}u.inherits(_,x),T.prototype.getBuffer=function(){for(var B=this.bufferedRequest,E=[];B;)E.push(B),B=B.next;return E},(function(){try{Object.defineProperty(T.prototype,"buffer",{get:m.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(B){return!!v.call(this,B)||this===_&&B&&B._writableState instanceof T}})):v=function(B){return B instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(B,E,P){var A,k=this._writableState,j=!1,S=!k.objectMode&&(A=B,b.isBuffer(A)||A instanceof p);return S&&!b.isBuffer(B)&&(B=(function(C){return b.from(C)})(B)),typeof E=="function"&&(P=E,E=null),S?E="buffer":E||(E=k.defaultEncoding),typeof P!="function"&&(P=N),k.ended?(function(C,D){var R=new Error("write after end");C.emit("error",R),i.nextTick(D,R)})(this,P):(S||(function(C,D,R,L){var Y=!0,X=!1;return R===null?X=new TypeError("May not write null values to stream"):typeof R=="string"||R===void 0||D.objectMode||(X=new TypeError("Invalid non-string/buffer chunk")),X&&(C.emit("error",X),i.nextTick(L,X),Y=!1),Y})(this,k,B,P))&&(k.pendingcb++,j=(function(C,D,R,L,Y,X){if(!R){var ae=(function(M,U,te){return M.objectMode||M.decodeStrings===!1||typeof U!="string"||(U=b.from(U,te)),U})(D,L,Y);L!==ae&&(R=!0,Y="buffer",L=ae)}var $=D.objectMode?1:L.length;D.length+=$;var Q=D.length<D.highWaterMark;if(Q||(D.needDrain=!0),D.writing||D.corked){var z=D.lastBufferedRequest;D.lastBufferedRequest={chunk:L,encoding:Y,isBuf:R,callback:X,next:null},z?z.next=D.lastBufferedRequest:D.bufferedRequest=D.lastBufferedRequest,D.bufferedRequestCount+=1}else O(C,D,!1,$,L,Y,X);return Q})(this,k,S,B,E,P)),j},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,B.writing||B.corked||B.bufferProcessing||!B.bufferedRequest||F(this,B))},_.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(B,E,P){P(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(B,E,P){var A=this._writableState;typeof B=="function"?(P=B,B=null,E=null):typeof E=="function"&&(P=E,E=null),B!=null&&this.write(B,E),A.corked&&(A.corked=1,this.uncork()),A.ending||(function(k,j,S){j.ending=!0,W(k,j),S&&(j.finished?i.nextTick(S):k.once("finish",S)),j.ended=!0,k.writable=!1})(this,A,P)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(B,E){this.end(),E(B)}}).call(this)}).call(this,t("_process"),typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(t,f,h){var d=t("safe-buffer").Buffer,n=t("util");f.exports=(function(){function l(){(function(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")})(this,l),this.head=null,this.tail=null,this.length=0}return l.prototype.push=function(i){var r={data:i,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length},l.prototype.unshift=function(i){var r={data:i,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length},l.prototype.shift=function(){if(this.length!==0){var i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}},l.prototype.clear=function(){this.head=this.tail=null,this.length=0},l.prototype.join=function(i){if(this.length===0)return"";for(var r=this.head,s=""+r.data;r=r.next;)s+=i+r.data;return s},l.prototype.concat=function(i){if(this.length===0)return d.alloc(0);for(var r,s,c,u=d.allocUnsafe(i>>>0),m=this.head,x=0;m;)r=m.data,s=u,c=x,r.copy(s,c),x+=m.data.length,m=m.next;return u},l})(),n&&n.inspect&&n.inspect.custom&&(f.exports.prototype[n.inspect.custom]=function(){var l=n.inspect({length:this.length});return this.constructor.name+" "+l})},{"safe-buffer":520,util:188}],514:[function(t,f,h){var d=t("process-nextick-args");function n(l,i){l.emit("error",i)}f.exports={destroy:function(l,i){var r=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(i?i(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(n,this,l)):d.nextTick(n,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,(function(u){!i&&u?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,d.nextTick(n,r,u)):d.nextTick(n,r,u):i&&i(u)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(t,f,h){arguments[4][490][0].apply(h,arguments)},{dup:490,events:422}],516:[function(t,f,h){f.exports=t("./readable").PassThrough},{"./readable":517}],517:[function(t,f,h){(h=f.exports=t("./lib/_stream_readable.js")).Stream=h,h.Readable=h,h.Writable=t("./lib/_stream_writable.js"),h.Duplex=t("./lib/_stream_duplex.js"),h.Transform=t("./lib/_stream_transform.js"),h.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(t,f,h){f.exports=t("./readable").Transform},{"./readable":517}],519:[function(t,f,h){f.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(t,f,h){arguments[4][217][0].apply(h,arguments)},{buffer:220,dup:217}],521:[function(t,f,h){arguments[4][218][0].apply(h,arguments)},{dup:218,"safe-buffer":520}],522:[function(t,f,h){arguments[4][218][0].apply(h,arguments)},{dup:218,"safe-buffer":494}],523:[function(t,f,h){(function(d,n){(function(){var l=t("process/browser.js").nextTick,i=Function.prototype.apply,r=Array.prototype.slice,s={},c=0;function u(m,x){this._id=m,this._clearFn=x}h.setTimeout=function(){return new u(i.call(setTimeout,window,arguments),clearTimeout)},h.setInterval=function(){return new u(i.call(setInterval,window,arguments),clearInterval)},h.clearTimeout=h.clearInterval=function(m){m.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},h.enroll=function(m,x){clearTimeout(m._idleTimeoutId),m._idleTimeout=x},h.unenroll=function(m){clearTimeout(m._idleTimeoutId),m._idleTimeout=-1},h._unrefActive=h.active=function(m){clearTimeout(m._idleTimeoutId);var x=m._idleTimeout;x>=0&&(m._idleTimeoutId=setTimeout((function(){m._onTimeout&&m._onTimeout()}),x))},h.setImmediate=typeof d=="function"?d:function(m){var x=c++,b=!(arguments.length<2)&&r.call(arguments,1);return s[x]=!0,l((function(){s[x]&&(b?m.apply(null,b):m.call(null),h.clearImmediate(x))})),x},h.clearImmediate=typeof n=="function"?n:function(m){delete s[m]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(t,f,h){(function(d){(function(){function n(l){try{if(!d.localStorage)return!1}catch{return!1}var i=d.localStorage[l];return i!=null&&String(i).toLowerCase()==="true"}f.exports=function(l,i){if(n("noDeprecation"))return l;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(i);n("traceDeprecation")?console.trace(i):console.warn(i),r=!0}return l.apply(this,arguments)}}}).call(this)}).call(this,typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(t,f,h){typeof Object.create=="function"?f.exports=function(d,n){d.super_=n,d.prototype=Object.create(n.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})}:f.exports=function(d,n){d.super_=n;var l=function(){};l.prototype=n.prototype,d.prototype=new l,d.prototype.constructor=d}},{}],526:[function(t,f,h){f.exports=function(d){return d&&typeof d=="object"&&typeof d.copy=="function"&&typeof d.fill=="function"&&typeof d.readUInt8=="function"}},{}],527:[function(t,f,h){(function(d,n){(function(){var l=/%[sdj%]/g;h.format=function(k){if(!T(k)){for(var j=[],S=0;S<arguments.length;S++)j.push(s(arguments[S]));return j.join(" ")}S=1;for(var C=arguments,D=C.length,R=String(k).replace(l,(function(Y){if(Y==="%%")return"%";if(S>=D)return Y;switch(Y){case"%s":return String(C[S++]);case"%d":return Number(C[S++]);case"%j":try{return JSON.stringify(C[S++])}catch{return"[Circular]"}default:return Y}})),L=C[S];S<D;L=C[++S])y(L)||!H(L)?R+=" "+L:R+=" "+s(L);return R},h.deprecate=function(k,j){if(_(n.process))return function(){return h.deprecate(k,j).apply(this,arguments)};if(d.noDeprecation===!0)return k;var S=!1;return function(){if(!S){if(d.throwDeprecation)throw new Error(j);d.traceDeprecation?console.trace(j):console.error(j),S=!0}return k.apply(this,arguments)}};var i,r={};function s(k,j){var S={seen:[],stylize:u};return arguments.length>=3&&(S.depth=arguments[2]),arguments.length>=4&&(S.colors=arguments[3]),v(j)?S.showHidden=j:j&&h._extend(S,j),_(S.showHidden)&&(S.showHidden=!1),_(S.depth)&&(S.depth=2),_(S.colors)&&(S.colors=!1),_(S.customInspect)&&(S.customInspect=!0),S.colors&&(S.stylize=c),m(S,k,S.depth)}function c(k,j){var S=s.styles[j];return S?"\x1B["+s.colors[S][0]+"m"+k+"\x1B["+s.colors[S][1]+"m":k}function u(k,j){return k}function m(k,j,S){if(k.customInspect&&j&&q(j.inspect)&&j.inspect!==h.inspect&&(!j.constructor||j.constructor.prototype!==j)){var C=j.inspect(S,k);return T(C)||(C=m(k,C,S)),C}var D=(function(z,M){if(_(M))return z.stylize("undefined","undefined");if(T(M)){var U="'"+JSON.stringify(M).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(U,"string")}if(N(M))return z.stylize(""+M,"number");if(v(M))return z.stylize(""+M,"boolean");if(y(M))return z.stylize("null","null")})(k,j);if(D)return D;var R=Object.keys(j),L=(function(z){var M={};return z.forEach((function(U,te){M[U]=!0})),M})(R);if(k.showHidden&&(R=Object.getOwnPropertyNames(j)),V(j)&&(R.indexOf("message")>=0||R.indexOf("description")>=0))return x(j);if(R.length===0){if(q(j)){var Y=j.name?": "+j.name:"";return k.stylize("[Function"+Y+"]","special")}if(O(j))return k.stylize(RegExp.prototype.toString.call(j),"regexp");if(F(j))return k.stylize(Date.prototype.toString.call(j),"date");if(V(j))return x(j)}var X,ae="",$=!1,Q=["{","}"];return p(j)&&($=!0,Q=["[","]"]),q(j)&&(ae=" [Function"+(j.name?": "+j.name:"")+"]"),O(j)&&(ae=" "+RegExp.prototype.toString.call(j)),F(j)&&(ae=" "+Date.prototype.toUTCString.call(j)),V(j)&&(ae=" "+x(j)),R.length!==0||$&&j.length!=0?S<0?O(j)?k.stylize(RegExp.prototype.toString.call(j),"regexp"):k.stylize("[Object]","special"):(k.seen.push(j),X=$?(function(z,M,U,te,ie){for(var se=[],le=0,Ne=M.length;le<Ne;++le)A(M,String(le))?se.push(b(z,M,U,te,String(le),!0)):se.push("");return ie.forEach((function(ke){ke.match(/^\d+$/)||se.push(b(z,M,U,te,ke,!0))})),se})(k,j,S,L,R):R.map((function(z){return b(k,j,S,L,z,$)})),k.seen.pop(),(function(z,M,U){return z.reduce((function(te,ie){return ie.indexOf(`
`)>=0,te+ie.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?U[0]+(M===""?"":M+`
 `)+" "+z.join(`,
  `)+" "+U[1]:U[0]+M+" "+z.join(", ")+" "+U[1]})(X,ae,Q)):Q[0]+ae+Q[1]}function x(k){return"["+Error.prototype.toString.call(k)+"]"}function b(k,j,S,C,D,R){var L,Y,X;if((X=Object.getOwnPropertyDescriptor(j,D)||{value:j[D]}).get?Y=X.set?k.stylize("[Getter/Setter]","special"):k.stylize("[Getter]","special"):X.set&&(Y=k.stylize("[Setter]","special")),A(C,D)||(L="["+D+"]"),Y||(k.seen.indexOf(X.value)<0?(Y=y(S)?m(k,X.value,null):m(k,X.value,S-1)).indexOf(`
`)>-1&&(Y=R?Y.split(`
`).map((function(ae){return"  "+ae})).join(`
`).substr(2):`
`+Y.split(`
`).map((function(ae){return"   "+ae})).join(`
`)):Y=k.stylize("[Circular]","special")),_(L)){if(R&&D.match(/^\d+$/))return Y;(L=JSON.stringify(""+D)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(L=L.substr(1,L.length-2),L=k.stylize(L,"name")):(L=L.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),L=k.stylize(L,"string"))}return L+": "+Y}function p(k){return Array.isArray(k)}function v(k){return typeof k=="boolean"}function y(k){return k===null}function N(k){return typeof k=="number"}function T(k){return typeof k=="string"}function _(k){return k===void 0}function O(k){return H(k)&&W(k)==="[object RegExp]"}function H(k){return typeof k=="object"&&k!==null}function F(k){return H(k)&&W(k)==="[object Date]"}function V(k){return H(k)&&(W(k)==="[object Error]"||k instanceof Error)}function q(k){return typeof k=="function"}function W(k){return Object.prototype.toString.call(k)}function B(k){return k<10?"0"+k.toString(10):k.toString(10)}h.debuglog=function(k){if(_(i)&&(i=d.env.NODE_DEBUG||""),k=k.toUpperCase(),!r[k])if(new RegExp("\\b"+k+"\\b","i").test(i)){var j=d.pid;r[k]=function(){var S=h.format.apply(h,arguments);console.error("%s %d: %s",k,j,S)}}else r[k]=function(){};return r[k]},h.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},h.isArray=p,h.isBoolean=v,h.isNull=y,h.isNullOrUndefined=function(k){return k==null},h.isNumber=N,h.isString=T,h.isSymbol=function(k){return typeof k=="symbol"},h.isUndefined=_,h.isRegExp=O,h.isObject=H,h.isDate=F,h.isError=V,h.isFunction=q,h.isPrimitive=function(k){return k===null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||typeof k=="symbol"||k===void 0},h.isBuffer=t("./support/isBuffer");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var k=new Date,j=[B(k.getHours()),B(k.getMinutes()),B(k.getSeconds())].join(":");return[k.getDate(),E[k.getMonth()],j].join(" ")}function A(k,j){return Object.prototype.hasOwnProperty.call(k,j)}h.log=function(){console.log("%s - %s",P(),h.format.apply(h,arguments))},h.inherits=t("inherits"),h._extend=function(k,j){if(!j||!H(j))return k;for(var S=Object.keys(j),C=S.length;C--;)k[S[C]]=j[S[C]];return k}}).call(this)}).call(this,t("_process"),typeof Br<"u"?Br:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),Object.defineProperty(h,"v1",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(h,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(h,"v4",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(h,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(h,"NIL",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(h,"version",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(h,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(h,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(h,"parse",{enumerable:!0,get:function(){return m.default}});var d=x(t("./v1.js")),n=x(t("./v3.js")),l=x(t("./v4.js")),i=x(t("./v5.js")),r=x(t("./nil.js")),s=x(t("./version.js")),c=x(t("./validate.js")),u=x(t("./stringify.js")),m=x(t("./parse.js"));function x(b){return b&&b.__esModule?b:{default:b}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(t,f,h){function d(m){return 14+(m+64>>>9<<4)+1}function n(m,x){const b=(65535&m)+(65535&x);return(m>>16)+(x>>16)+(b>>16)<<16|65535&b}function l(m,x,b,p,v,y){return n((N=n(n(x,m),n(p,y)))<<(T=v)|N>>>32-T,b);var N,T}function i(m,x,b,p,v,y,N){return l(x&b|~x&p,m,x,v,y,N)}function r(m,x,b,p,v,y,N){return l(x&p|b&~p,m,x,v,y,N)}function s(m,x,b,p,v,y,N){return l(x^b^p,m,x,v,y,N)}function c(m,x,b,p,v,y,N){return l(b^(x|~p),m,x,v,y,N)}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var u=function(m){if(typeof m=="string"){const x=unescape(encodeURIComponent(m));m=new Uint8Array(x.length);for(let b=0;b<x.length;++b)m[b]=x.charCodeAt(b)}return(function(x){const b=[],p=32*x.length;for(let v=0;v<p;v+=8){const y=x[v>>5]>>>v%32&255,N=parseInt("0123456789abcdef".charAt(y>>>4&15)+"0123456789abcdef".charAt(15&y),16);b.push(N)}return b})((function(x,b){x[b>>5]|=128<<b%32,x[d(b)-1]=b;let p=1732584193,v=-271733879,y=-1732584194,N=271733878;for(let T=0;T<x.length;T+=16){const _=p,O=v,H=y,F=N;p=i(p,v,y,N,x[T],7,-680876936),N=i(N,p,v,y,x[T+1],12,-389564586),y=i(y,N,p,v,x[T+2],17,606105819),v=i(v,y,N,p,x[T+3],22,-1044525330),p=i(p,v,y,N,x[T+4],7,-176418897),N=i(N,p,v,y,x[T+5],12,1200080426),y=i(y,N,p,v,x[T+6],17,-1473231341),v=i(v,y,N,p,x[T+7],22,-45705983),p=i(p,v,y,N,x[T+8],7,1770035416),N=i(N,p,v,y,x[T+9],12,-1958414417),y=i(y,N,p,v,x[T+10],17,-42063),v=i(v,y,N,p,x[T+11],22,-1990404162),p=i(p,v,y,N,x[T+12],7,1804603682),N=i(N,p,v,y,x[T+13],12,-40341101),y=i(y,N,p,v,x[T+14],17,-1502002290),v=i(v,y,N,p,x[T+15],22,1236535329),p=r(p,v,y,N,x[T+1],5,-165796510),N=r(N,p,v,y,x[T+6],9,-1069501632),y=r(y,N,p,v,x[T+11],14,643717713),v=r(v,y,N,p,x[T],20,-373897302),p=r(p,v,y,N,x[T+5],5,-701558691),N=r(N,p,v,y,x[T+10],9,38016083),y=r(y,N,p,v,x[T+15],14,-660478335),v=r(v,y,N,p,x[T+4],20,-405537848),p=r(p,v,y,N,x[T+9],5,568446438),N=r(N,p,v,y,x[T+14],9,-1019803690),y=r(y,N,p,v,x[T+3],14,-187363961),v=r(v,y,N,p,x[T+8],20,1163531501),p=r(p,v,y,N,x[T+13],5,-1444681467),N=r(N,p,v,y,x[T+2],9,-51403784),y=r(y,N,p,v,x[T+7],14,1735328473),v=r(v,y,N,p,x[T+12],20,-1926607734),p=s(p,v,y,N,x[T+5],4,-378558),N=s(N,p,v,y,x[T+8],11,-2022574463),y=s(y,N,p,v,x[T+11],16,1839030562),v=s(v,y,N,p,x[T+14],23,-35309556),p=s(p,v,y,N,x[T+1],4,-1530992060),N=s(N,p,v,y,x[T+4],11,1272893353),y=s(y,N,p,v,x[T+7],16,-155497632),v=s(v,y,N,p,x[T+10],23,-1094730640),p=s(p,v,y,N,x[T+13],4,681279174),N=s(N,p,v,y,x[T],11,-358537222),y=s(y,N,p,v,x[T+3],16,-722521979),v=s(v,y,N,p,x[T+6],23,76029189),p=s(p,v,y,N,x[T+9],4,-640364487),N=s(N,p,v,y,x[T+12],11,-421815835),y=s(y,N,p,v,x[T+15],16,530742520),v=s(v,y,N,p,x[T+2],23,-995338651),p=c(p,v,y,N,x[T],6,-198630844),N=c(N,p,v,y,x[T+7],10,1126891415),y=c(y,N,p,v,x[T+14],15,-1416354905),v=c(v,y,N,p,x[T+5],21,-57434055),p=c(p,v,y,N,x[T+12],6,1700485571),N=c(N,p,v,y,x[T+3],10,-1894986606),y=c(y,N,p,v,x[T+10],15,-1051523),v=c(v,y,N,p,x[T+1],21,-2054922799),p=c(p,v,y,N,x[T+8],6,1873313359),N=c(N,p,v,y,x[T+15],10,-30611744),y=c(y,N,p,v,x[T+6],15,-1560198380),v=c(v,y,N,p,x[T+13],21,1309151649),p=c(p,v,y,N,x[T+4],6,-145523070),N=c(N,p,v,y,x[T+11],10,-1120210379),y=c(y,N,p,v,x[T+2],15,718787259),v=c(v,y,N,p,x[T+9],21,-343485551),p=n(p,_),v=n(v,O),y=n(y,H),N=n(N,F)}return[p,v,y,N]})((function(x){if(x.length===0)return[];const b=8*x.length,p=new Uint32Array(d(b));for(let v=0;v<b;v+=8)p[v>>5]|=(255&x[v/8])<<v%32;return p})(m),8*m.length))};h.default=u},{}],530:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0,h.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var d,n=(d=t("./validate.js"))&&d.__esModule?d:{default:d},l=function(i){if(!(0,n.default)(i))throw TypeError("Invalid UUID");let r;const s=new Uint8Array(16);return s[0]=(r=parseInt(i.slice(0,8),16))>>>24,s[1]=r>>>16&255,s[2]=r>>>8&255,s[3]=255&r,s[4]=(r=parseInt(i.slice(9,13),16))>>>8,s[5]=255&r,s[6]=(r=parseInt(i.slice(14,18),16))>>>8,s[7]=255&r,s[8]=(r=parseInt(i.slice(19,23),16))>>>8,s[9]=255&r,s[10]=(r=parseInt(i.slice(24,36),16))/1099511627776&255,s[11]=r/4294967296&255,s[12]=r>>>24&255,s[13]=r>>>16&255,s[14]=r>>>8&255,s[15]=255&r,s};h.default=l},{"./validate.js":541}],532:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0,h.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(t,f,h){let d;Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(){if(!d&&(d=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(n)};const n=new Uint8Array(16)},{}],534:[function(t,f,h){function d(i,r,s,c){switch(i){case 0:return r&s^~r&c;case 1:return r^s^c;case 2:return r&s^r&c^s&c;case 3:return r^s^c}}function n(i,r){return i<<r|i>>>32-r}Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var l=function(i){const r=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){const x=unescape(encodeURIComponent(i));i=[];for(let b=0;b<x.length;++b)i.push(x.charCodeAt(b))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);const c=i.length/4+2,u=Math.ceil(c/16),m=new Array(u);for(let x=0;x<u;++x){const b=new Uint32Array(16);for(let p=0;p<16;++p)b[p]=i[64*x+4*p]<<24|i[64*x+4*p+1]<<16|i[64*x+4*p+2]<<8|i[64*x+4*p+3];m[x]=b}m[u-1][14]=8*(i.length-1)/Math.pow(2,32),m[u-1][14]=Math.floor(m[u-1][14]),m[u-1][15]=8*(i.length-1)&4294967295;for(let x=0;x<u;++x){const b=new Uint32Array(80);for(let _=0;_<16;++_)b[_]=m[x][_];for(let _=16;_<80;++_)b[_]=n(b[_-3]^b[_-8]^b[_-14]^b[_-16],1);let p=s[0],v=s[1],y=s[2],N=s[3],T=s[4];for(let _=0;_<80;++_){const O=Math.floor(_/20),H=n(p,5)+d(O,v,y,N)+T+r[O]+b[_]>>>0;T=N,N=y,y=n(v,30)>>>0,v=p,p=H}s[0]=s[0]+p>>>0,s[1]=s[1]+v>>>0,s[2]=s[2]+y>>>0,s[3]=s[3]+N>>>0,s[4]=s[4]+T>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,255&s[0],s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,255&s[1],s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,255&s[2],s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,255&s[3],s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,255&s[4]]};h.default=l},{}],535:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var d,n=(d=t("./validate.js"))&&d.__esModule?d:{default:d};const l=[];for(let r=0;r<256;++r)l.push((r+256).toString(16).substr(1));var i=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const c=(l[r[s+0]]+l[r[s+1]]+l[r[s+2]]+l[r[s+3]]+"-"+l[r[s+4]]+l[r[s+5]]+"-"+l[r[s+6]]+l[r[s+7]]+"-"+l[r[s+8]]+l[r[s+9]]+"-"+l[r[s+10]]+l[r[s+11]]+l[r[s+12]]+l[r[s+13]]+l[r[s+14]]+l[r[s+15]]).toLowerCase();if(!(0,n.default)(c))throw TypeError("Stringified UUID is invalid");return c};h.default=i},{"./validate.js":541}],536:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var d=l(t("./rng.js")),n=l(t("./stringify.js"));function l(m){return m&&m.__esModule?m:{default:m}}let i,r,s=0,c=0;var u=function(m,x,b){let p=x&&b||0;const v=x||new Array(16);let y=(m=m||{}).node||i,N=m.clockseq!==void 0?m.clockseq:r;if(y==null||N==null){const V=m.random||(m.rng||d.default)();y==null&&(y=i=[1|V[0],V[1],V[2],V[3],V[4],V[5]]),N==null&&(N=r=16383&(V[6]<<8|V[7]))}let T=m.msecs!==void 0?m.msecs:Date.now(),_=m.nsecs!==void 0?m.nsecs:c+1;const O=T-s+(_-c)/1e4;if(O<0&&m.clockseq===void 0&&(N=N+1&16383),(O<0||T>s)&&m.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=T,c=_,r=N,T+=122192928e5;const H=(1e4*(268435455&T)+_)%4294967296;v[p++]=H>>>24&255,v[p++]=H>>>16&255,v[p++]=H>>>8&255,v[p++]=255&H;const F=T/4294967296*1e4&268435455;v[p++]=F>>>8&255,v[p++]=255&F,v[p++]=F>>>24&15|16,v[p++]=F>>>16&255,v[p++]=N>>>8|128,v[p++]=255&N;for(let V=0;V<6;++V)v[p+V]=y[V];return x||(0,n.default)(v)};h.default=u},{"./rng.js":533,"./stringify.js":535}],537:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var d=l(t("./v35.js")),n=l(t("./md5.js"));function l(r){return r&&r.__esModule?r:{default:r}}var i=(0,d.default)("v3",48,n.default);h.default=i},{"./md5.js":529,"./v35.js":538}],538:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(s,c,u){function m(x,b,p,v){if(typeof x=="string"&&(x=(function(N){N=unescape(encodeURIComponent(N));const T=[];for(let _=0;_<N.length;++_)T.push(N.charCodeAt(_));return T})(x)),typeof b=="string"&&(b=(0,n.default)(b)),b.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let y=new Uint8Array(16+x.length);if(y.set(b),y.set(x,b.length),y=u(y),y[6]=15&y[6]|c,y[8]=63&y[8]|128,p){v=v||0;for(let N=0;N<16;++N)p[v+N]=y[N];return p}return(0,d.default)(y)}try{m.name=s}catch{}return m.DNS=i,m.URL=r,m},h.URL=h.DNS=void 0;var d=l(t("./stringify.js")),n=l(t("./parse.js"));function l(s){return s&&s.__esModule?s:{default:s}}const i="6ba7b810-9dad-11d1-80b4-00c04fd430c8";h.DNS=i;const r="6ba7b811-9dad-11d1-80b4-00c04fd430c8";h.URL=r},{"./parse.js":531,"./stringify.js":535}],539:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var d=l(t("./rng.js")),n=l(t("./stringify.js"));function l(r){return r&&r.__esModule?r:{default:r}}var i=function(r,s,c){const u=(r=r||{}).random||(r.rng||d.default)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,s){c=c||0;for(let m=0;m<16;++m)s[c+m]=u[m];return s}return(0,n.default)(u)};h.default=i},{"./rng.js":533,"./stringify.js":535}],540:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var d=l(t("./v35.js")),n=l(t("./sha1.js"));function l(r){return r&&r.__esModule?r:{default:r}}var i=(0,d.default)("v5",80,n.default);h.default=i},{"./sha1.js":534,"./v35.js":538}],541:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var d,n=(d=t("./regex.js"))&&d.__esModule?d:{default:d},l=function(i){return typeof i=="string"&&n.default.test(i)};h.default=l},{"./regex.js":532}],542:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=void 0;var d,n=(d=t("./validate.js"))&&d.__esModule?d:{default:d},l=function(i){if(!(0,n.default)(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)};h.default=l},{"./validate.js":541}],543:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.CHAR=`	
\r ---`,h.S=` 	\r
`,h.NAME_START_CHAR=":A-Z_a-z-----------",h.NAME_CHAR="-"+h.NAME_START_CHAR+".0-9--",h.CHAR_RE=new RegExp("^["+h.CHAR+"]$","u"),h.S_RE=new RegExp("^["+h.S+"]+$","u"),h.NAME_START_CHAR_RE=new RegExp("^["+h.NAME_START_CHAR+"]$","u"),h.NAME_CHAR_RE=new RegExp("^["+h.NAME_CHAR+"]$","u"),h.NAME_RE=new RegExp("^["+h.NAME_START_CHAR+"]["+h.NAME_CHAR+"]*$","u"),h.NMTOKEN_RE=new RegExp("^["+h.NAME_CHAR+"]+$","u");function d(n){return n>=65&&n<=90||n>=97&&n<=122||n===58||n===95||n===8204||n===8205||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}h.S_LIST=[32,10,13,9],h.isChar=function(n){return n>=32&&n<=55295||n===10||n===13||n===9||n>=57344&&n<=65533||n>=65536&&n<=1114111},h.isS=function(n){return n===32||n===10||n===13||n===9},h.isNameStartChar=d,h.isNameChar=function(n){return d(n)||n>=48&&n<=57||n===45||n===46||n===183||n>=768&&n<=879||n>=8255&&n<=8256}},{}],544:[function(t,f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.CHAR="---",h.RESTRICTED_CHAR="-\b\v\f---",h.S=` 	\r
`,h.NAME_START_CHAR=":A-Z_a-z-----------",h.NAME_CHAR="-"+h.NAME_START_CHAR+".0-9--",h.CHAR_RE=new RegExp("^["+h.CHAR+"]$","u"),h.RESTRICTED_CHAR_RE=new RegExp("^["+h.RESTRICTED_CHAR+"]$","u"),h.S_RE=new RegExp("^["+h.S+"]+$","u"),h.NAME_START_CHAR_RE=new RegExp("^["+h.NAME_START_CHAR+"]$","u"),h.NAME_CHAR_RE=new RegExp("^["+h.NAME_CHAR+"]$","u"),h.NAME_RE=new RegExp("^["+h.NAME_START_CHAR+"]["+h.NAME_CHAR+"]*$","u"),h.NMTOKEN_RE=new RegExp("^["+h.NAME_CHAR+"]+$","u");function d(n){return n>=65&&n<=90||n>=97&&n<=122||n===58||n===95||n===8204||n===8205||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}h.S_LIST=[32,10,13,9],h.isChar=function(n){return n>=1&&n<=55295||n>=57344&&n<=65533||n>=65536&&n<=1114111},h.isRestrictedChar=function(n){return n>=1&&n<=8||n===11||n===12||n>=14&&n<=31||n>=127&&n<=132||n>=134&&n<=159},h.isCharAndNotRestricted=function(n){return n===9||n===10||n===13||n>31&&n<127||n===133||n>159&&n<=55295||n>=57344&&n<=65533||n>=65536&&n<=1114111},h.isS=function(n){return n===32||n===10||n===13||n===9},h.isNameStartChar=d,h.isNameChar=function(n){return d(n)||n>=48&&n<=57||n===45||n===46||n===183||n>=768&&n<=879||n>=8255&&n<=8256}},{}],545:[function(t,f,h){function d(n){return n>=65&&n<=90||n===95||n>=97&&n<=122||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}Object.defineProperty(h,"__esModule",{value:!0}),h.NC_NAME_START_CHAR="A-Z_a-z------------",h.NC_NAME_CHAR="-"+h.NC_NAME_START_CHAR+".0-9--",h.NC_NAME_START_CHAR_RE=new RegExp("^["+h.NC_NAME_START_CHAR+"]$","u"),h.NC_NAME_CHAR_RE=new RegExp("^["+h.NC_NAME_CHAR+"]$","u"),h.NC_NAME_RE=new RegExp("^["+h.NC_NAME_START_CHAR+"]["+h.NC_NAME_CHAR+"]*$","u"),h.isNCNameStartChar=d,h.isNCNameChar=function(n){return d(n)||n===45||n===46||n>=48&&n<=57||n===183||n>=768&&n<=879||n>=8255&&n<=8256}},{}]},{},[15])(15)}))})(Zf)),Zf.exports}var lb=q_();const $_={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Nu={name:"",address:"",taxNumber:"",taxOffice:"",phone:"",email:"",website:"",logoDataUrl:"",iban:"",bankAccountId:void 0,currency:"TRY"},yl=a=>{if(typeof a=="number"&&Number.isFinite(a))return String(a);if(typeof a=="string"){const o=a.trim();return o||void 0}},Gr=(a,o)=>yl(a?.id)||yl(o)||yl(en()),ku=()=>yl(en())||"",go=a=>a?`companyProfile_${a}`:"companyProfile",Xf=a=>{const o=go(a||"");try{const t=Et.getItem(o)||Et.getItem(`${o}_plain`)||Et.getItem("company");return t?JSON.parse(t):null}catch{return null}},Jf=[],H_=(a,o)=>{const t=typeof a.id=="string"&&a.id.trim()?a.id.trim():null;if(t)return t;const f=a.relatedId?String(a.relatedId):null,h=`${Date.now()}-${o}-${Math.random().toString(36).slice(2,9)}`;return f?`${f}-${h}`:`notif-${h}`},K_=(a,o)=>{if(typeof a=="number"&&Number.isFinite(a))return a;if(typeof a=="string"){const t=Number(a);if(Number.isFinite(t))return t}return o},cb=a=>{const o=((typeof navigator<"u"?navigator.language:"tr")||"tr").slice(0,2);return(Array.isArray(a)?a:[]).map((f,h)=>{const d=H_(f,h),n=d.match(/\b\d{13}\b/),l=n?Number(n[0]):Date.now(),i=K_(f.firstSeenAt,l),r=typeof f.time=="string"&&f.time.trim()?f.time:new Date(i).toLocaleString(o);return{...f,id:d,firstSeenAt:i,time:r}})},db=a=>Array.isArray(a)?a.filter(o=>o!=null).map((o,t)=>{if(typeof o=="object"&&o!==null){const f=o,h=f.id,d=typeof h=="string"||typeof h=="number"?h:`item-${t}`;return{...f,id:d}}return{id:`item-${t}`,description:typeof o=="string"?o:String(o)}}):[],ub=a=>{const o=Number(a);if(!(!Number.isFinite(o)||o<=0))return Math.round(o*100)/100},Ic=a=>{const o=Number(a.stock),t=Number.isFinite(o)?Math.max(0,o):0,f=Number(a.minStock)||0;return{...a,sku:a.code,unitPrice:Number(a.price)||0,costPrice:Number(a.cost)||0,stockQuantity:t,reorderLevel:f,taxRate:ub(a.taxRate),categoryTaxRateOverride:ub(a.categoryTaxRateOverride),status:t===0?"out-of-stock":t<=f?"low":"active"}},G_=["Genel"],W_=[],hm="app:lastPage",fm="app:lastArea",Y_=["summary","dashboard","invoices","expenses","customers","products","suppliers","banks","sales","crm-dashboard","crm-opportunities","crm-leads","crm-contacts","crm-activities","crm-tasks","crm-pipeline","quotes","reports","general-ledger","chart-of-accounts","archive","settings","fiscal-periods","organization-members"],mb=new Set(Y_),Q_=a=>a==="summary"?"summary":a==="crm-pipeline"||a.startsWith("crm-")?"crm":"finance",Z_={success:"border-emerald-200 bg-emerald-50 text-emerald-900",info:"border-indigo-200 bg-indigo-50 text-indigo-900",error:"border-red-200 bg-red-50 text-red-900"},Mc=a=>`${a>=0?"+":""}${a.toFixed(1)}%`,mr=(a,o)=>{he.debug(a,o)},ep=()=>{try{return Er.getItem(hm)||Et.getItem(hm)}catch(a){return mr("app.navigation.lastPage.readFailed",a),null}},X_=a=>{if(a)try{Er.setItem(hm,a),Et.setItem(hm,a)}catch(o){mr("app.navigation.lastPage.persistFailed",{page:a,error:o})}},hb=()=>{try{const a=Er.getItem(fm)||Et.getItem(fm);return a==="summary"||a==="crm"||a==="finance"?a:null}catch(a){return mr("app.navigation.lastArea.readFailed",a),null}},J_=a=>{if(a)try{Er.setItem(fm,a),Et.setItem(fm,a)}catch(o){mr("app.navigation.lastArea.persistFailed",{area:a,error:o})}},eP=a=>a==="crm"?"crm-dashboard":a==="finance"?"dashboard":"summary",tP=()=>{const{isAuthenticated:a,user:o,logout:t,tenant:f}=Gs(),{formatCurrency:h,setCurrency:d}=Jr(),{t:n,i18n:l}=$t(),{prefs:i}=Tv(),r=_t.useCallback((J,de,ne)=>{try{const be=n(J,ne);return be===J?de:String(be)}catch{return de}},[n]),s=_t.useCallback((J,de,ne)=>{for(const be of J)try{const Te=n(be,ne);if(Te!==be)return String(Te)}catch(Te){mr("app.i18n.tOrFirst",{key:be,error:Te})}return de},[n]),[c,u]=G.useState(()=>{const J=ep();if(J)return J;const de=hb();return eP(de||"summary")}),[m,x]=G.useState(()=>{const J=hb();if(J)return J;const de=ep();return Q_(de||"summary")}),[b,p]=G.useState(void 0);G.useEffect(()=>{he.debug("app.navigation.pageChanged",{page:c})},[c]),G.useEffect(()=>{X_(c)},[c]),G.useEffect(()=>{J_(m)},[m]),G.useEffect(()=>{if(c==="summary"){x("summary");return}(c==="crm-pipeline"||c.startsWith("crm-"))&&x("crm")},[c]),G.useEffect(()=>{if(typeof window>"u"||!(mb.has(c)||c.startsWith("customer-history:")||c.startsWith("crm-deal:")||c.startsWith("crm-opportunities:")||c.startsWith("crm-contacts:")||c.startsWith("crm-activities:")||c.startsWith("crm-activities-opp:")||c.startsWith("crm-activities-contact:")||c.startsWith("crm-tasks:")||c.startsWith("crm-tasks-opp:")||c.startsWith("quotes-open:")||c.startsWith("quotes-edit:")||c.startsWith("sales-edit:")||c.startsWith("invoices-edit:")))return;const de=c==="dashboard"?"":c;if(window.location.hash.replace("#","")!==de)try{window.location.hash=de}catch(be){mr("app.hashSync.writeFailed",{targetHash:de,error:be})}},[c]),G.useEffect(()=>{try{c.startsWith("legal-")&&(window.scrollTo({top:0,behavior:"auto"}),window.scrollY>0&&window.scrollTo(0,0))}catch(J){mr("app.navigation.scrollTopFailed",J)}},[c]),G.useEffect(()=>{const J=Qu(),de=o?.isEmailVerified===!0;if(J&&a&&!de){const ne=new Set(["verify-email","verify-notice","landing","about","api"]),be=c.startsWith("legal-");if(!ne.has(c)&&!be){try{window.location.hash="verify-notice"}catch(Te){mr("app.navigation.hashUpdateFailed",Te)}u("verify-notice")}}},[a,o,c]),G.useEffect(()=>{yp.setConfig({googleAnalytics:{measurementId:"G-XXXXXXXXXX",enabled:!0},matomo:{siteId:"1",url:"https://your-matomo-domain.com",enabled:!1},hotjar:{hjid:"0000000",hjsv:"6",enabled:!1}})},[]);const[v,y]=G.useState({name:o?.firstName||"User",email:o?.email||""}),[N,T]=G.useState([]),[_,O]=G.useState(()=>Nu),H=f?.id,F=o?.tenantId,V=o?.id,q=_t.useMemo(()=>{try{return Gr({id:H},F)}catch{return}},[H,F]);G.useEffect(()=>{let J=!1;(async()=>{try{const ne=ku(),be=go(ne),Te=await Ri.getJSON(be),Ve=Te??Xf(ne);if(!J&&Ve&&(O({...Nu,...Ve}),Ve.currency&&d(Ve.currency),!Te))try{await Ri.setJSON(be,Ve)}catch(_e){mr("app.companyCache.secureWriteFailed",_e)}}catch{}})();const de=()=>{(async()=>{try{const ne=ku(),be=go(ne),Te=await Ri.getJSON(be);if(Te){O({...Nu,...Te}),Te.currency&&d(Te.currency);return}const Ve=Xf(ne);Ve&&(O({...Nu,...Ve}),Ve.currency&&d(Ve.currency))}catch(ne){mr("app.companyCache.refreshFailed",ne)}})()};return window.addEventListener("company-profile-updated",de),()=>{J=!0,window.removeEventListener("company-profile-updated",de)}},[d]),G.useEffect(()=>{let J=!1;return(async()=>{try{if(!zn()||!a)return;const{tenantsApi:ne}=await Mr(async()=>{const{tenantsApi:_e}=await Promise.resolve().then(()=>tT);return{tenantsApi:_e}},void 0),be=await ne.getMyTenant();if(!be)return;const Te=(be.settings||{})?.brand||{};try{const _e=q||"",Ke=go(_e),nt=await Ri.getJSON(Ke).catch(()=>null),et=Xf(_e),Je=nt||et,St=!!(Te?.logoDataUrl||Te?.bankAccountId||Te?.country),bt=!!(be?.taxNumber||be?.taxOffice||be?.address||be?.phone||be?.email||be?.website||be?.siretNumber||be?.sirenNumber||be?.tvaNumber||be?.apeCode||be?.rcsNumber||be?.steuernummer||be?.umsatzsteuerID||be?.handelsregisternummer||be?.geschaeftsfuehrer||be?.einNumber||be?.taxId||be?.businessLicenseNumber||be?.stateOfIncorporation);if(!!(Je&&(Je.logoDataUrl||Je.taxNumber||Je.taxOffice||Je.address||Je.phone||Je.email||Je.website||Je.siretNumber||Je.sirenNumber||Je.tvaNumber||Je.apeCode||Je.rcsNumber||Je.steuernummer||Je.umsatzsteuerID||Je.handelsregisternummer||Je.geschaeftsfuehrer||Je.einNumber||Je.taxId||Je.businessLicenseNumber||Je.stateOfIncorporation))&&!St&&!bt)try{await ne.updateMyTenant({companyName:be?.companyName||Je.name||void 0,address:Je.address||void 0,taxNumber:Je.taxNumber||void 0,taxOffice:Je.taxOffice||void 0,phone:Je.phone||void 0,email:Je.email||void 0,website:Je.website||void 0,siretNumber:Je.siretNumber||void 0,sirenNumber:Je.sirenNumber||void 0,apeCode:Je.apeCode||void 0,tvaNumber:Je.tvaNumber||void 0,rcsNumber:Je.rcsNumber||void 0,steuernummer:Je.steuernummer||void 0,umsatzsteuerID:Je.umsatzsteuerID||void 0,handelsregisternummer:Je.handelsregisternummer||void 0,geschaeftsfuehrer:Je.geschaeftsfuehrer||void 0,einNumber:Je.einNumber||void 0,taxId:Je.taxId||void 0,businessLicenseNumber:Je.businessLicenseNumber||void 0,stateOfIncorporation:Je.stateOfIncorporation||void 0,settings:{brand:{logoDataUrl:Je.logoDataUrl||"",bankAccountId:Je.bankAccountId||void 0,country:Je.country||""}}});const Ft=await ne.getMyTenant();Ft&&(be.settings=Ft.settings,be.address=Ft.address,be.taxNumber=Ft.taxNumber,be.taxOffice=Ft.taxOffice,be.phone=Ft.phone,be.email=Ft.email,be.website=Ft.website,Object.assign(be,{siretNumber:Ft.siretNumber,sirenNumber:Ft.sirenNumber,apeCode:Ft.apeCode,tvaNumber:Ft.tvaNumber,rcsNumber:Ft.rcsNumber,steuernummer:Ft.steuernummer,umsatzsteuerID:Ft.umsatzsteuerID,handelsregisternummer:Ft.handelsregisternummer,geschaeftsfuehrer:Ft.geschaeftsfuehrer,einNumber:Ft.einNumber,taxId:Ft.taxId,businessLicenseNumber:Ft.businessLicenseNumber,stateOfIncorporation:Ft.stateOfIncorporation}))}catch{}}catch{}const Ve={name:be.companyName||be.name||"",address:be.address||"",taxNumber:be.taxNumber||"",taxOffice:be.taxOffice||"",phone:be.phone||"",email:be.email||"",website:be.website||"",logoDataUrl:Te.logoDataUrl||"",bankAccountId:Te.bankAccountId||Te.defaultBankAccountId||void 0,currency:be.currency||Te.currency||"TRY",country:Te.country||void 0,mersisNumber:be.mersisNumber||"",kepAddress:be.kepAddress||"",siretNumber:be.siretNumber||"",sirenNumber:be.sirenNumber||"",apeCode:be.apeCode||"",tvaNumber:be.tvaNumber||"",rcsNumber:be.rcsNumber||"",steuernummer:be.steuernummer||"",umsatzsteuerID:be.umsatzsteuerID||"",handelsregisternummer:be.handelsregisternummer||"",geschaeftsfuehrer:be.geschaeftsfuehrer||"",einNumber:be.einNumber||"",taxId:be.taxId||"",businessLicenseNumber:be.businessLicenseNumber||"",stateOfIncorporation:be.stateOfIncorporation||""};if(!J){O(Ve),Ve.currency&&d(Ve.currency);try{const Ke=go(q||"");await Ri.setJSON(Ke,Ve),window.dispatchEvent(new Event("company-profile-updated"))}catch(_e){mr("app.companyCache.backendSyncFailed",_e)}}}catch{}})(),()=>{J=!0}},[a,q,d]);const[W,B]=G.useState(Jf),[E,P]=G.useState(!1),[A,k]=G.useState(!1),j=_t.useCallback(J=>{u(J),k(!1),P(!1),typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})},[]),S=_t.useCallback(J=>{if(x(J),J==="summary"){j("summary");return}if(J==="crm"){j("crm-dashboard");return}j("dashboard")},[j]),C=_t.useCallback(()=>{try{const J=Gr(f,o?.tenantId),de=is("quotes_cache",{tenantId:J,fallbackToBase:!0})??[];return Array.isArray(de)?de:[]}catch(J){return mr("app.summary.quotesCache.readFailed",J),[]}},[f,o?.tenantId]),D=_t.useCallback(J=>{p(J),j("settings")},[j]),R=_t.useCallback(()=>{const J=q;if(!!(J||H||F)&&J){const be=is("notifications",{tenantId:J,fallbackToBase:!1});if(Array.isArray(be)&&be.length>0){B(cb(be));return}B(Jf);return}const ne=is("notifications",{tenantId:void 0,fallbackToBase:!0});if(Array.isArray(ne)&&ne.length>0){B(cb(ne));return}B(Jf)},[q,H,F]);_t.useEffect(()=>{R()},[R]);const[L,Y]=G.useState(!1),[X,ae]=G.useState(!1),[$,Q]=G.useState(!1),[z,M]=G.useState(!1),[U,te]=G.useState(!1),[ie,se]=G.useState(!1),[le,Ne]=G.useState(!1),[ke,Z]=G.useState(!1),[ce,ve]=G.useState(!1),[De,Ae]=G.useState(!1),[Ie,Ue]=G.useState(!1),[Ge,Le]=G.useState(!1),[at,ut]=G.useState(!1),[Ce,it]=G.useState(!1),[xt,jt]=G.useState(!1),[Ee,xe]=G.useState(!1),[Be,$e]=G.useState(!1),[ye,oe]=G.useState(!1),[me,ue]=G.useState(!1),[ze,tt]=G.useState(!1),[kt,we]=G.useState(!1),[st,wt]=G.useState(!1),[pe,Qe]=G.useState(!1),[fe,He]=G.useState(null),[lt,Pe]=G.useState(!1),[rt,je]=G.useState(null),[Me,Ye]=G.useState(null),[dt,mt]=G.useState(null),[yt,Gt]=G.useState(null),[Lt,Oe]=G.useState(null),[ot,ht]=G.useState(null),[It,Tt]=G.useState(null),[Mt,Re]=G.useState(null),[pt,Ot]=G.useState(null),[Se,qe]=G.useState(null),[ft,Ct]=G.useState(null),[er,Rt]=G.useState(null),[Ht,ir]=G.useState(null),[Zt,qt]=G.useState([]),[nr,fr]=G.useState([]),[rr,yr]=G.useState([]),[xr,Rr]=G.useState([]),[jr,Ds]=G.useState([]),[Sr,Wr]=G.useState([]),[Qn,Ws]=G.useState(()=>G_),[Pr,Cr]=G.useState(()=>W_),[es,Fs]=G.useState([]),da=_t.useRef([]),kr=_t.useRef(!1),[mn,kn]=G.useState([]),[Ca,Un]=G.useState(!0),[Ts,zr]=G.useState(null),[Ua,ua]=G.useState(null),tn=_t.useCallback(async()=>{try{const J=await bp(),de=Array.isArray(J)?J.map(Ic):[];Wr(de);try{Ur("products_cache",de,{tenantId:q,mirrorToBase:!0})}catch(ne){mr("app.products.refresh.cacheFailed",ne)}}catch(J){mr("app.products.refresh.failed",J)}},[q]),ps=_t.useMemo(()=>({id:o?.id??null,tenantId:o?.tenantId??null,firstName:o?.firstName??"",lastName:o?.lastName??"",email:o?.email??""}),[o?.id,o?.tenantId,o?.firstName,o?.lastName,o?.email]);G.useEffect(()=>{Ur("customers_cache",Zt,{tenantId:q,mirrorToBase:!0})},[Zt,q]),G.useEffect(()=>{da.current=es},[es]),G.useEffect(()=>{kr.current=Array.isArray(jr)&&jr.length>0},[jr]);const Ys=_t.useCallback(J=>{kn(de=>de.filter(ne=>ne.id!==J))},[]),Xt=_t.useCallback((J,de="info",ne)=>{const be=ne?.id||crypto.randomUUID?.()||Math.random().toString(36).slice(2),Te=typeof ne?.duration=="number"?ne.duration:4e3,Ve=ne?.tone??de,_e={id:be,message:J||n("toasts.common.genericMessage"),tone:Ve,duration:Te};return kn(Ke=>[...Ke,_e]),Te>0&&window.setTimeout(()=>Ys(be),Te),be},[n,Ys]);G.useEffect(()=>{const J=de=>{const{message:ne,tone:be="info",id:Te,duration:Ve}=de.detail||{};ne&&Xt(ne,be,{id:Te,duration:Ve})};return window.addEventListener("showToast",J),()=>{window.removeEventListener("showToast",J)}},[Xt]);const hn=_t.useRef(!1),_s=_t.useCallback(J=>{hn.current=!0;try{J()}finally{setTimeout(()=>{hn.current=!1},0)}},[]),rs=_t.useCallback(J=>{Ds(de=>{const ne=Array.isArray(de)?de:[],be=typeof J=="function"?J(ne):Array.isArray(J)?J:ne;if(!hn.current)try{const Te=q;Ur("sales_cache",be,{tenantId:Te,mirrorToBase:!0}),Ur("sales",be,{tenantId:Te,mirrorToBase:!0}),window.dispatchEvent(new Event("sales-cache-updated"))}catch(Te){he.warn("app.sales.cacheWriteFailed",Te)}return be})},[q]);G.useEffect(()=>{try{const ne=(window.location.pathname||"").match(/\/public\/quote\/(.+)$/);ne&&ne[1]&&ua(decodeURIComponent(ne[1]))}catch(de){mr("app.publicQuote.decodeFailed",de)}(async()=>{const de=zn();if(!de||!a){he.warn("app.bootstrap.tokenMissing",{isAuthenticated:a,hasToken:!!de}),qt([]),fr([]),Wr([]),yr([]),Rr([]),Un(!1);return}try{Un(!0),he.info("app.bootstrap.fetch.start"),he.debug("app.bootstrap.fetch.step",{resource:"customers"});const ne=await Am();he.debug("app.bootstrap.fetch.step",{resource:"suppliers"});const be=await w8();he.debug("app.bootstrap.fetch.step",{resource:"products"});const Te=await bp();he.debug("app.bootstrap.fetch.step",{resource:"invoices"});const Ve=await n8();he.debug("app.bootstrap.fetch.step",{resource:"expenses"});const _e=await f8();he.debug("app.bootstrap.fetch.step",{resource:"sales"});let Ke=[];try{Ke=await c8()}catch(Pt){he.warn("app.bootstrap.salesLoadFailed",Pt)}he.debug("app.bootstrap.fetch.step",{resource:"productCategories"});const nt=await Mr(async()=>{const{productCategoriesApi:Pt}=await Promise.resolve().then(()=>Fc);return{productCategoriesApi:Pt}},void 0).then(({productCategoriesApi:Pt})=>Pt.getAll());he.debug("app.bootstrap.fetch.success",{customers:ne,suppliers:be,products:Te,invoices:Ve,expenses:_e,categories:nt,sales:Ke});const et=Array.isArray(ne)?ne:[],Je=Array.isArray(be)?be:[],St=Array.isArray(Te)?Te:[],bt=Array.isArray(Ve)?Ve:[],Dt=Array.isArray(_e)?_e:[],Ft=Array.isArray(nt)?nt:[];he.info("app.bootstrap.safeSizes",{customers:et.length,suppliers:Je.length,products:St.length,invoices:bt.length,expenses:Dt.length,categories:Ft.length}),qt(et),fr(Je),Cr(Ft);const tr=Ft.map(Pt=>Pt.name);Ws(Pt=>{const Dr=new Set([...Pt,...tr]);return Array.from(Dr)});const Bt=St.map(Ic);Wr(Bt);const vr=Dt.map(Pt=>{let Dr=null;Pt&&typeof Pt.supplier=="object"&&Pt.supplier!==null?Dr=Pt.supplier:typeof Pt?.supplier=="string"&&Pt.supplier.trim()?Dr={name:String(Pt.supplier).trim()}:typeof Pt?.supplierName=="string"&&Pt.supplierName.trim()&&(Dr={name:String(Pt.supplierName).trim()});const lr=String(Dr?.name||"").trim().toLowerCase();return["nosupplier","no supplier","tedariki yok","kein lieferant","aucun fournisseur"].includes(lr)&&(Dr=null),{...Pt,supplier:Dr,expenseDate:typeof Pt.expenseDate=="string"?Pt.expenseDate:new Date(Pt.expenseDate).toISOString().split("T")[0],dueDate:Pt.dueDate||Pt.expenseDate}});if(yr(bt),Rr(vr),Array.isArray(Ke)){const Pt=`${ps.firstName} ${ps.lastName}`.trim()||ps.email||void 0,Dr=Ke.map(lr=>{const us=ns=>ns&&(`${ns.firstName||""} ${ns.lastName||""}`.trim()||ns.name||ns.email)||void 0,Vn=lr?.customer?.name,ws=lr?.customerName,Ka=lr?.customerId?et.find(ns=>String(ns.id)===String(lr.customerId)):void 0,Sn=Vn||ws||Ka?.name||"",Ga=lr?.customerEmail||Ka?.email||"",Lr=Array.isArray(lr?.items)&&lr.items.length>0?lr.items[0]:void 0,Cn=lr?.productId||Lr?.productId,An=lr?.productName||Lr?.productName||Lr?.description||"",Tn=Number(lr?.quantity??Lr?.quantity??1);let Ns=Number(lr?.unitPrice??Lr?.unitPrice??0);const xi=Cn?Bt.find(ns=>String(ns.id)===String(Cn)):void 0,ha=lr?.productUnit||xi?.unit||"";(!Number.isFinite(Ns)||Ns===0)&&Number.isFinite(Number(lr?.subtotal))&&Tn>0&&(Ns=Number(lr.subtotal)/Tn);const Wa=(()=>{const ns=String(lr?.status||"").toLowerCase();return ns==="created"||ns==="invoiced"?"completed":ns==="refunded"?"cancelled":ns==="cancelled"||ns==="completed"||ns==="pending"?ns:"completed"})(),_a=lr?.createdByName||us(lr?.createdBy)||(lr?.createdById&&ps.id&&String(lr.createdById)===String(ps.id)?Pt:void 0),fa=lr?.updatedByName||us(lr?.updatedBy)||(lr?.updatedById&&ps.id&&String(lr.updatedById)===String(ps.id)?Pt:void 0);return{...lr,customerName:Sn,customerEmail:Ga,productId:Cn,productName:An,productUnit:ha,quantity:Tn,unitPrice:Ns,date:lr.saleDate?String(lr.saleDate).slice(0,10):lr.date,amount:Number(lr.total??lr.amount??0),status:Wa,createdByName:_a,updatedByName:fa,createdAt:lr?.createdAt||lr?.createdDate||lr?.createdOn||lr?.saleDate,updatedAt:lr?.updatedAt||lr?.updatedDate||lr?.updatedOn||lr?.saleDate}});rs(lr=>{const us=new Map,Vn=ws=>`${ws?.saleNumber||""}#${ws?.id||""}`;for(const ws of Array.isArray(lr)?lr:[])us.set(Vn(ws),ws);for(const ws of Dr)us.set(Vn(ws),ws);return Array.from(us.values())})}he.debug("app.bootstrap.expenseSample",{sample:vr.slice(0,10).map(Pt=>({id:Pt.id,amount:Pt.amount,status:Pt.status,expenseDate:Pt.expenseDate}))});const ur={tenantId:Gr(f,ps.tenantId),mirrorToBase:!0};Ur("customers_cache",et,ur),Ur("suppliers_cache",Je,ur),Ur("products_cache",Bt,ur),Ur("invoices_cache",bt,ur),Ur("expenses_cache",Dt,ur),Array.isArray(Ke)&&Ur("sales_cache",Ke,ur),he.info("app.bootstrap.cachePersisted")}catch(ne){he.error("app.bootstrap.fetch.failed",ne),Xt(n("toasts.common.dataLoadError"),"error")}finally{Un(!1)}})()},[a,f,ps,rs,Xt,n]),G.useEffect(()=>{Ur("bankAccounts",es,{tenantId:q,mirrorToBase:!0})},[es,q]);const El=_t.useCallback((J=[])=>{he.info("app.sales.simpleList.updated",{count:J.length}),rs(J)},[rs]);G.useEffect(()=>{if(!hn.current)try{const J=q,de=Array.isArray(jr)?jr:[];Ur("sales",de,{tenantId:J,mirrorToBase:!0});const ne=JSON.stringify(de);pl("sales_backup",ne,{tenantId:J,mirrorToBase:!1}),pl("sales_last_seen_ts",Date.now(),{tenantId:J,mirrorToBase:!1})}catch(J){mr("app.sales.persistFailed",J)}},[jr,q]),G.useEffect(()=>{Ur("invoices_cache",rr,{tenantId:q,mirrorToBase:!0})},[rr,q]),G.useEffect(()=>{try{Ur("notifications",W,{tenantId:q,mirrorToBase:!0})}catch(J){mr("app.notifications.persistFailed",J)}},[W,q]),G.useEffect(()=>{if(o){let de=`${o.firstName||""} ${o.lastName||""}`.trim();if(!de){const ne=Nm();if(ne){const be=`${ne.firstName||""} ${ne.lastName||""}`.trim()||ne.name||"";be&&(de=be)}}y(ne=>({name:de||ne.name||"User",email:o.email||ne.email||""})),he.debug("app.auth.userSync",{name:de||"User",email:o.email||""}),o.tenantId!=null&&O2(o.tenantId)}},[o]),_t.useEffect(()=>{const J=de=>{const ne=q,be=mi("sales",ne),Te=mi("sales_cache",ne);if(de.key===be||de.key===Te)try{const Ve=is("sales",{tenantId:ne,fallbackToBase:!1})??[],_e=is("sales_cache",{tenantId:ne,fallbackToBase:!1})??[],Ke=[...Array.isArray(Ve)?Ve:[],...Array.isArray(_e)?_e:[]],nt=new Map;Ke.forEach(Je=>{const St=`${Je.saleNumber||""}#${Je.id||""}`;nt.has(St)||nt.set(St,Je)});const et=Array.from(nt.values());_s(()=>{rs(et)})}catch(Ve){mr("app.sales.storageSyncFailed",Ve)}};return window.addEventListener("storage",J),()=>window.removeEventListener("storage",J)},[q,rs,_s]),G.useEffect(()=>{if(!zn()&&!a){he.info("app.cache.offlineSalesLoad.start");try{const bt=is("sales",{tenantId:void 0,fallbackToBase:!0});Array.isArray(bt)&&bt.length>0&&(rs(bt),he.info("app.cache.offlineSalesLoad.success",{count:bt.length}))}catch(bt){he.error("app.cache.offlineSalesLoad.failed",bt)}Un(!1);return}const de=yl(f?.id)||yl(o?.tenantId)||"";he.info("app.cache.authenticatedLoad.start");const ne=is("bankAccounts",{tenantId:de,fallbackToBase:!1})??[],be=is("bankAccounts",{tenantId:void 0,fallbackToBase:!0})??[];if(!de){Un(!1);return}const Te=is("sales",{tenantId:de,fallbackToBase:!1})??[],Ve=is("sales_cache",{tenantId:de,fallbackToBase:!0})??[],_e=is("customers_cache",{tenantId:de,fallbackToBase:!0})??[],Ke=is("suppliers_cache",{tenantId:de,fallbackToBase:!0})??[],nt=is("products_cache",{tenantId:de,fallbackToBase:!0})??[],et=is("invoices_cache",{tenantId:de,fallbackToBase:!0})??[],Je=is("expenses_cache",{tenantId:de,fallbackToBase:!0})??[],St=ne.length?ne:null;if(ne.length||be.length)try{const bt=[...ne,...be];if(bt.length>0){const Dt=new Map;for(const tr of bt){const Bt=String(tr&&tr.id||"");Bt&&(Dt.has(Bt)||Dt.set(Bt,tr))}const Ft=Array.from(Dt.values());he.info("app.cache.banksLoaded",{count:Ft.length}),Fs(Ft.map(tr=>({...tr,id:String(tr.id)})))}}catch(bt){he.error("app.cache.banksLoadFailed",bt)}if((async()=>{try{const{bankAccountsApi:bt}=await Mr(async()=>{const{bankAccountsApi:Jt}=await import("./bank-accounts-CPNZt_C1.js");return{bankAccountsApi:Jt}},[]),Ft=(await bt.list()).map(Jt=>({...Jt,id:String(Jt.id),accountName:Jt.name})),tr=St??da.current,Bt=Rc("bankUi",{tenantId:de,fallbackToBase:!1})||{},vr=Ft.map(Jt=>{const ur=(Array.isArray(tr)?tr:[]).find(Dr=>String(Dr.id)===String(Jt.id)),Pt=Bt[String(Jt.id)]||{};return{...ur,...Jt,isActive:ur?.isActive!==void 0?ur.isActive:Pt?.isActive!==void 0?Pt.isActive:!0,accountType:ur?.accountType||Pt?.accountType||"checking",balance:Number(ur?.balance??Pt?.balance??0),branchCode:ur?.branchCode||Pt?.branchCode||"",routingNumber:ur?.routingNumber||Pt?.routingNumber||"",swiftBic:ur?.swiftBic||Pt?.swiftBic||""}});Fs(vr);try{Ur("bankAccounts",vr,{tenantId:de,mirrorToBase:!0})}catch(Jt){mr("app.cache.bankAccounts.persistFailed",Jt)}}catch(bt){he.warn("app.cache.bankAccounts.refreshFailed",bt)}})(),Te.length||Ve.length)try{const bt=[...Te,...Ve];let Dt=bt;const Ft=new Map;for(const Pt of Dt){const Dr=`${Pt.saleNumber||""}#${Pt.id||""}`;Ft.has(Dr)||Ft.set(Dr,Pt)}Dt=Array.from(Ft.values());const tr=()=>`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,Bt=new Set,vr=Dt.map(Pt=>{const Dr=String(Pt?.id??"");if(!Dr||Bt.has(Dr)){const lr=tr();return{...Pt,id:lr}}return Bt.add(Dr),{...Pt,id:Dr}}),Jt=Array.isArray(_e)?_e:[],ur=vr.map(Pt=>{const Dr=Pt?.customer?.name,lr=Pt?.customerName,us=Pt?.customerId?Jt.find(Ns=>String(Ns.id)===String(Pt.customerId))?.name:void 0,Vn=Pt?.customerId?Jt.find(Ns=>String(Ns.id)===String(Pt.customerId))?.email:void 0,ws=Dr||lr||us||"",Ka=Pt?.customerEmail||Vn||"",Sn=Array.isArray(Pt?.items)&&Pt.items.length>0?Pt.items[0]:void 0,Ga=Pt?.productId||Sn?.productId,Lr=Pt?.productName||Sn?.productName||Sn?.description||"",Cn=Number(Pt?.quantity??Sn?.quantity??1);let An=Number(Pt?.unitPrice??Sn?.unitPrice??0);(!Number.isFinite(An)||An===0)&&Number.isFinite(Number(Pt?.subtotal))&&Cn>0&&(An=Number(Pt.subtotal)/Cn);const Tn=(()=>{const Ns=String(Pt?.status||"").toLowerCase();return Ns==="created"||Ns==="invoiced"?"completed":Ns==="refunded"?"cancelled":Ns==="cancelled"||Ns==="completed"||Ns==="pending"?Ns:"completed"})();return{...Pt,customerName:ws,customerEmail:Ka,productId:Ga,productName:Lr,quantity:Cn,unitPrice:An,status:Tn}});he.info("app.cache.salesLoaded",{total:(bt||[]).length,filtered:(Dt||[]).length,unique:vr.length}),_s(()=>{rs(ur)})}catch(bt){he.error("app.cache.salesLoadFailed",bt)}if(_e.length&&(he.info("app.cache.customersLoaded",{count:_e.length}),qt(_e)),Ke.length&&(he.info("app.cache.suppliersLoaded",{count:Ke.length}),fr(Ke)),nt.length)try{he.info("app.cache.productsLoaded",{count:nt.length});const bt=nt.map(Dt=>({...Dt,unitPrice:Number(Dt.unitPrice)||0,costPrice:Number(Dt.costPrice)||0,stockQuantity:Number(Dt.stockQuantity)||0,reorderLevel:Number(Dt.reorderLevel)||0}));Wr(bt)}catch(bt){he.error("app.cache.productsLoadFailed",bt)}if(et.length&&(he.info("app.cache.invoicesLoaded",{count:et.length}),yr(et)),Je.length)try{he.info("app.cache.expensesLoaded",{count:Je.length});const bt=Je.map(Dt=>{const Ft=typeof Dt.expenseDate=="string"?Dt.expenseDate:Dt.expenseDate?new Date(Dt.expenseDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],tr=Dt.dueDate||Dt.expenseDate;let Bt=null;Dt&&typeof Dt.supplier=="object"&&Dt.supplier!==null?Bt=Dt.supplier:typeof Dt?.supplier=="string"&&Dt.supplier.trim()?Bt={name:String(Dt.supplier).trim()}:typeof Dt?.supplierName=="string"&&Dt.supplierName.trim()&&(Bt={name:String(Dt.supplierName).trim()});const vr=String(Bt?.name||"").trim().toLowerCase();return["nosupplier","no supplier","tedariki yok","kein lieferant","aucun fournisseur"].includes(vr)&&(Bt=null),{...Dt,expenseDate:Ft,dueDate:tr,supplier:Bt}});Rr(bt)}catch(bt){he.error("app.cache.expensesLoadFailed",bt)}},[a,f?.id,o?.tenantId,rs,_s]),G.useEffect(()=>{const J=f?.id||o?.tenantId;!a||!J||(qt([]),fr([]),Wr([]),yr([]),Rr([]),rs([]),Fs([]))},[f?.id,o?.tenantId,a,rs]),G.useEffect(()=>{const J=()=>{const ne=Date.now(),be=1440*60*1e3;B(Te=>{const Ve=Te.filter(nt=>nt.persistent||nt.repeatDaily||!nt.read||!nt.readAt?!0:ne-nt.readAt<be),_e=Ve.map(nt=>(nt.persistent||nt.repeatDaily)&&nt.read&&nt.readAt&&ne-nt.readAt>=be?(he.debug("app.notifications.persistentReset",{notificationId:nt.id,title:nt.title}),{...nt,read:!1,readAt:void 0}):nt),Ke=Te.length-Ve.length;return Ke>0&&he.info("app.notifications.cleanupRemoved",{count:Ke}),_e})};J();const de=setInterval(J,3600*1e3);return()=>clearInterval(de)},[]);const $i=G.useMemo(()=>W.filter(J=>!J.read).length,[W]),ed=o?.twoFactorEnabled===!0,Dl=_t.useMemo(()=>{try{return Gr(f,F)}catch{return}},[f,F]),Yr=_t.useCallback((J,de,ne="info",be,Te)=>{const Ve=new Set(["invoices","expenses","sales","products","suppliers","quotes"]),_e=be||"",Ke=()=>{try{const bt=Dl,Dt=V?String(V):void 0;return wl({tenantIds:bt?[bt]:void 0,userIds:Dt?[Dt]:void 0})||{}}catch{return{}}};if(_e&&!Ve.has(_e))return;if(_e==="products"){const bt=Te?.relatedId||"";if(!/^low-stock-|^out-of-stock-/.test(bt)||Ke()?.lowStockAlerts===!1)return}if(_e==="sales"&&Ke()?.salesNotifications===!1||_e==="quotes"&&Ke()?.quoteReminders===!1||_e==="invoices"&&Ke()?.invoiceReminders===!1||_e==="expenses"&&Ke()?.expenseAlerts===!1)return;const nt=Te?.relatedId?`${Te.relatedId}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`:`notif-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,et=Date.now(),Je=new Date(et).toLocaleString((navigator.language||"tr").slice(0,2)),St={id:nt,title:J,description:de,time:Je,firstSeenAt:et,type:ne,read:!1,link:be,persistent:Te?.persistent,repeatDaily:Te?.repeatDaily,relatedId:Te?.relatedId,i18nTitleKey:Te?.i18nTitleKey,i18nDescKey:Te?.i18nDescKey,i18nParams:Te?.i18nParams};B(bt=>{if(Te?.relatedId){const Dt=bt.filter(Ft=>Ft.relatedId!==Te.relatedId);return[St,...Dt]}return[St,...bt]}),he.info("app.notifications.created",{id:St.id,type:St.type,category:_e,persistent:!!St.persistent})},[Dl,V]);G.useEffect(()=>{if(!a)return;if(ed){B(be=>be.filter(Te=>Te.relatedId!=="twofa-reminder"));return}const de=s(["security.twofa.reminderTitle","sales.security.twofa.reminderTitle"],"ki Aamal Dorulamay Etkinletirin"),ne=s(["security.twofa.reminderDesc","sales.security.twofa.reminderDesc"],"Hesabnz korumak iin 2FAy etkinletirmeniz nerilir.");Yr(de,ne,"warning",void 0,{persistent:!0,repeatDaily:!0,relatedId:"twofa-reminder",i18nTitleKey:"security.twofa.reminderTitle",i18nDescKey:"security.twofa.reminderDesc"});try{const be=Gr(f,F)||"default",Te=String(V||"anon"),Ve=Rc("twofa_modal_never",{tenantId:be,fallbackToBase:!1})||{};if(Ve[Te])return;const _e=`twofa_modal_shown_session:${be}:${Te}`;Er.getItem(_e)||zr({title:s(["security.twofa.modalTitle","sales.security.twofa.modalTitle"],"Hesabnz Gvenceye Aln"),message:s(["security.twofa.modalMessage","sales.security.twofa.modalMessage"],"ki Aamal Dorulama (2FA) hesap gvenliinizi nemli lde artrr. imdi etkinletirmek ister misiniz?"),tone:"info",confirmLabel:s(["security.twofa.enableNow","sales.security.twofa.enableNow"],"imdi Etkinletir"),cancelLabel:r("common.remindMeLater","Daha Sonra"),extraLabel:s(["security.twofa.neverRemind","sales.security.twofa.neverRemind"],"Bir daha hatrlatma"),onConfirm:()=>{Er.setItem(_e,"1"),D("security"),zr(null)},onCancel:()=>{Er.setItem(_e,"1"),zr(null)},onExtra:()=>{Er.setItem(_e,"1");const nt={...Ve,[Te]:"1"};Tu("twofa_modal_never",nt,{tenantId:be,mirrorToBase:!1}),zr(null)}})}catch(be){mr("app.security.twofaPromptFailed",be)}},[a,ed,V,F,f,H,l.language,Yr,D,r,s]),G.useEffect(()=>{if(!a)return;const J=()=>{const Ve=i.invoiceReminders!==!1,_e=i.expenseAlerts!==!1,Ke=i.lowStockAlerts!==!1,nt=new Date;nt.setHours(0,0,0,0);const et=nt.getTime(),Je=new Date(nt);if(Je.setDate(Je.getDate()+3),Ve&&rr.forEach(St=>{if(St.status==="paid"||St.status==="cancelled")return;const bt=St.dueDate?new Date(St.dueDate):null;if(!bt)return;bt.setHours(0,0,0,0);const Dt=bt.getTime(),Ft=St.customer?.name||r("common.generic.customer","Hesap"),tr=St.invoiceNumber||`#${St.id}`;if(Dt<et){const Bt=Math.floor((et-Dt)/864e5);Yr(r("notifications.invoices.overdue.title","Gecikmi fatura demesi"),r("notifications.invoices.overdue.desc",`${tr} - ${Ft} (${Bt} gn gecikmi)`,{invoiceNumber:tr,customerName:Ft,daysOverdue:Bt}),"danger","invoices",{persistent:!0,repeatDaily:!0,relatedId:`invoice-${St.id}`,i18nTitleKey:"notifications.invoices.overdue.title",i18nDescKey:"notifications.invoices.overdue.desc",i18nParams:{invoiceNumber:tr,customerName:Ft,daysOverdue:Bt}})}else if(Dt<=Je.getTime()){const Bt=Math.ceil((Dt-et)/864e5);Yr(r("notifications.invoices.upcoming.title","Yaklaan fatura demesi"),r("notifications.invoices.upcoming.desc",`${tr} - ${Ft} (${Bt} gn kald)`,{invoiceNumber:tr,customerName:Ft,daysLeft:Bt}),"warning","invoices",{persistent:!0,repeatDaily:!0,relatedId:`invoice-${St.id}`,i18nTitleKey:"notifications.invoices.upcoming.title",i18nDescKey:"notifications.invoices.upcoming.desc",i18nParams:{invoiceNumber:tr,customerName:Ft,daysLeft:Bt}})}}),_e&&xr.forEach(St=>{if(St.status==="paid"||St.status==="cancelled")return;const bt=St.dueDate||St.expenseDate?new Date(St.dueDate||St.expenseDate):null;if(!bt)return;bt.setHours(0,0,0,0);const Dt=bt.getTime(),Ft=St.supplier?.name||St.supplier||r("common.generic.supplier","Tedariki"),tr=St.description||r("common.generic.expense","Gider");if(Dt<et){const Bt=Math.floor((et-Dt)/864e5);Yr(r("notifications.expenses.overdue.title","Gecikmi gider demesi"),r("notifications.expenses.overdue.desc",`${tr} - ${Ft} (${Bt} gn gecikmi)`,{description:tr,supplierName:Ft,daysOverdue:Bt}),"danger","expenses",{persistent:!0,repeatDaily:!0,relatedId:`expense-${St.id}`,i18nTitleKey:"notifications.expenses.overdue.title",i18nDescKey:"notifications.expenses.overdue.desc",i18nParams:{description:tr,supplierName:Ft,daysOverdue:Bt}})}else if(Dt<=Je.getTime()){const Bt=Math.ceil((Dt-et)/864e5);Yr(r("notifications.expenses.upcoming.title","Yaklaan gider demesi"),r("notifications.expenses.upcoming.desc",`${tr} - ${Ft} (${Bt} gn kald)`,{description:tr,supplierName:Ft,daysLeft:Bt}),"warning","expenses",{persistent:!0,repeatDaily:!0,relatedId:`expense-${St.id}`,i18nTitleKey:"notifications.expenses.upcoming.title",i18nDescKey:"notifications.expenses.upcoming.desc",i18nParams:{description:tr,supplierName:Ft,daysLeft:Bt}})}}),Ke)try{Sr.filter(bt=>Number(bt.stockQuantity||0)<=Number(bt.reorderLevel||0)).forEach(bt=>{const Dt=Number(bt.stockQuantity||0),Ft=Number(bt.reorderLevel||0);Dt<=0?Yr(r("notifications.products.outOfStock.title","Stok tkendi"),r("notifications.products.outOfStock.desc",`${bt.name} - Stok tkendi!`,{name:bt.name}),"danger","products",{persistent:!0,repeatDaily:!0,relatedId:`out-of-stock-${bt.id}`,i18nTitleKey:"notifications.products.outOfStock.title",i18nDescKey:"notifications.products.outOfStock.desc",i18nParams:{name:bt.name}}):Yr(r("notifications.products.lowStock.title","Dk stok uyars"),r("notifications.products.lowStock.desc",`${bt.name} - Stok seviyesi minimum limitin altnda! (${Dt}/${Ft})`,{name:bt.name,stock:Dt,min:Ft}),"warning","products",{persistent:!0,repeatDaily:!0,relatedId:`low-stock-${bt.id}`,i18nTitleKey:"notifications.products.lowStock.title",i18nDescKey:"notifications.products.lowStock.desc",i18nParams:{name:bt.name,stock:Dt,min:Ft}})})}catch(St){mr("app.notifications.lowStockCheckFailed",St)}};J();const de=new Date,ne=new Date(de);ne.setHours(9,0,0,0),ne<=de&&ne.setDate(ne.getDate()+1);const be=ne.getTime()-de.getTime(),Te=setTimeout(()=>{J(),setInterval(J,1440*60*1e3)},be);return()=>clearTimeout(Te)},[rr,xr,Sr,a,i,Yr,r]),G.useEffect(()=>{const J=()=>{(async()=>{try{const{productCategoriesApi:de}=await Mr(async()=>{const{productCategoriesApi:be}=await Promise.resolve().then(()=>Fc);return{productCategoriesApi:be}},void 0),ne=await de.getAll();Cr(ne),Ws(be=>{const Te=new Set([...be,...ne.map(Ve=>Ve.name.trim()).filter(Boolean)]);return Array.from(Te).sort((Ve,_e)=>Ve.localeCompare(_e,"tr-TR"))})}catch(de){console.warn("Kategori gncelleme yeniden ykleme hatas:",de)}})()};return window.addEventListener("product-categories-updated",J),()=>window.removeEventListener("product-categories-updated",J)},[]),G.useEffect(()=>{if(!a)return;const J=()=>{try{const ne=Gr(f,o?.tenantId),be=is("quotes_cache",{tenantId:ne,fallbackToBase:!0})??[];if(!Array.isArray(be)||i.quoteReminders===!1)return;const Te=new Date;Te.setHours(0,0,0,0);const Ve=Te.getTime();be.forEach(_e=>{if(!_e?.validUntil)return;const Ke=String(_e.status||"").toLowerCase();if(["accepted","declined","expired"].includes(Ke))return;const nt=new Date(_e.validUntil);nt.setHours(0,0,0,0);const et=nt.getTime(),Je=Math.ceil((et-Ve)/864e5);et<Ve?Yr(r("notifications.quotes.expired.title","Teklif sresi doldu"),r("notifications.quotes.expired.desc",`${_e.quoteNumber||r("common.generic.quote","Teklif")} - sre doldu`,{quoteNumber:_e.quoteNumber||r("common.generic.quote","Teklif")}),"danger","quotes",{persistent:!0,repeatDaily:!0,relatedId:`quote-expired-${_e.id}`,i18nTitleKey:"notifications.quotes.expired.title",i18nDescKey:"notifications.quotes.expired.desc",i18nParams:{quoteNumber:_e.quoteNumber||"Teklif"}}):Je<=3&&Yr(r("notifications.quotes.dueSoon.title","Teklif sresi yaklayor"),r("notifications.quotes.dueSoon.desc",`${_e.quoteNumber||r("common.generic.quote","Teklif")} - ${Je} gn kald`,{quoteNumber:_e.quoteNumber||r("common.generic.quote","Teklif"),diffDays:Je}),"warning","quotes",{persistent:!0,repeatDaily:!0,relatedId:`quote-due-${_e.id}`,i18nTitleKey:"notifications.quotes.dueSoon.title",i18nDescKey:"notifications.quotes.dueSoon.desc",i18nParams:{quoteNumber:_e.quoteNumber||"Teklif",diffDays:Je}})})}catch{}};J();const de=setInterval(J,360*60*1e3);return()=>clearInterval(de)},[a,i,f,f?.id,o?.tenantId,Yr,r]),G.useEffect(()=>{(()=>{B(de=>de.map(ne=>{try{if(ne.relatedId==="twofa-reminder")return{...ne,i18nTitleKey:"security.twofa.reminderTitle",i18nDescKey:"security.twofa.reminderDesc",title:s(["security.twofa.reminderTitle","sales.security.twofa.reminderTitle"],ne.title),description:s(["security.twofa.reminderDesc","sales.security.twofa.reminderDesc"],ne.description)};if(ne.relatedId?.startsWith("out-of-stock-")){const be=ne.relatedId.split("out-of-stock-")[1],Ve=Sr.find(_e=>String(_e.id)===String(be))?.name||"";return{...ne,i18nTitleKey:"notifications.products.outOfStock.title",i18nDescKey:"notifications.products.outOfStock.desc",i18nParams:{name:Ve},title:r("notifications.products.outOfStock.title",ne.title),description:r("notifications.products.outOfStock.desc",ne.description,{name:Ve})}}if(ne.relatedId?.startsWith("low-stock-")){const be=ne.relatedId.split("low-stock-")[1],Te=Sr.find(nt=>String(nt.id)===String(be)),Ve=Te?.name||"",_e=Number(Te?.stockQuantity||0),Ke=Number(Te?.reorderLevel||0);return{...ne,i18nTitleKey:"notifications.products.lowStock.title",i18nDescKey:"notifications.products.lowStock.desc",i18nParams:{name:Ve,stock:_e,min:Ke},title:r("notifications.products.lowStock.title",ne.title),description:r("notifications.products.lowStock.desc",ne.description,{name:Ve,stock:_e,min:Ke})}}if(ne.relatedId?.startsWith("invoice-")){const be=ne.relatedId.split("invoice-")[1],Te=rr.find(nt=>String(nt.id)===String(be)),Ve=Te?.customer?.name||r("common.generic.customer","Hesap"),_e=Te?.invoiceNumber||`#${Te?.id||""}`,Ke=Te?.dueDate?new Date(Te.dueDate):null;if(Ke){const nt=new Date;nt.setHours(0,0,0,0),Ke.setHours(0,0,0,0);const et=nt.getTime(),Je=Ke.getTime();if(Je<et){const St=Math.floor((et-Je)/864e5);return{...ne,i18nTitleKey:"notifications.invoices.overdue.title",i18nDescKey:"notifications.invoices.overdue.desc",i18nParams:{invoiceNumber:_e,customerName:Ve,daysOverdue:St},title:r("notifications.invoices.overdue.title",ne.title),description:r("notifications.invoices.overdue.desc",ne.description,{invoiceNumber:_e,customerName:Ve,daysOverdue:St})}}else{const St=Math.ceil((Je-et)/864e5);return{...ne,i18nTitleKey:"notifications.invoices.upcoming.title",i18nDescKey:"notifications.invoices.upcoming.desc",i18nParams:{invoiceNumber:_e,customerName:Ve,daysLeft:St},title:r("notifications.invoices.upcoming.title",ne.title),description:r("notifications.invoices.upcoming.desc",ne.description,{invoiceNumber:_e,customerName:Ve,daysLeft:St})}}}}if(ne.relatedId?.startsWith("expense-")){const be=ne.relatedId.split("expense-")[1],Te=xr.find(nt=>String(nt.id)===String(be)),Ve=Te?.supplier?.name||Te?.supplier||r("common.generic.supplier","Tedariki"),_e=Te?.description||r("common.generic.expense","Gider"),Ke=Te?.dueDate||Te?.expenseDate?new Date(Te?.dueDate||Te?.expenseDate):null;if(Ke){const nt=new Date;nt.setHours(0,0,0,0),Ke.setHours(0,0,0,0);const et=nt.getTime(),Je=Ke.getTime();if(Je<et){const St=Math.floor((et-Je)/864e5);return{...ne,i18nTitleKey:"notifications.expenses.overdue.title",i18nDescKey:"notifications.expenses.overdue.desc",i18nParams:{description:_e,supplierName:Ve,daysOverdue:St},title:r("notifications.expenses.overdue.title",ne.title),description:r("notifications.expenses.overdue.desc",ne.description,{description:_e,supplierName:Ve,daysOverdue:St})}}else{const St=Math.ceil((Je-et)/864e5);return{...ne,i18nTitleKey:"notifications.expenses.upcoming.title",i18nDescKey:"notifications.expenses.upcoming.desc",i18nParams:{description:_e,supplierName:Ve,daysLeft:St},title:r("notifications.expenses.upcoming.title",ne.title),description:r("notifications.expenses.upcoming.desc",ne.description,{description:_e,supplierName:Ve,daysLeft:St})}}}}if(ne.relatedId?.startsWith("quote-expired-")){const be=ne.relatedId.split("quote-expired-")[1];return{...ne,i18nTitleKey:"notifications.quotes.expired.title",i18nDescKey:"notifications.quotes.expired.desc",i18nParams:{quoteNumber:ne.i18nParams?.quoteNumber||`#${be}`},title:r("notifications.quotes.expired.title",ne.title),description:r("notifications.quotes.expired.desc",ne.description,{quoteNumber:ne.i18nParams?.quoteNumber||`#${be}`})}}if(ne.relatedId?.startsWith("quote-due-")){const be=ne.relatedId.split("quote-due-")[1],Te=ne.i18nParams?.diffDays??0;return{...ne,i18nTitleKey:"notifications.quotes.dueSoon.title",i18nDescKey:"notifications.quotes.dueSoon.desc",i18nParams:{quoteNumber:ne.i18nParams?.quoteNumber||`#${be}`,diffDays:Te},title:r("notifications.quotes.dueSoon.title",ne.title),description:r("notifications.quotes.dueSoon.desc",ne.description,{quoteNumber:ne.i18nParams?.quoteNumber||`#${be}`,diffDays:Te})}}if(!ne.i18nTitleKey&&!ne.i18nDescKey){if(ne.link==="customers")return{...ne,i18nTitleKey:"notifications.customers.created.title",i18nDescKey:"notifications.customers.created.desc",title:ne.i18nParams?r("notifications.customers.created.title",ne.title):ne.title,description:ne.i18nParams?r("notifications.customers.created.desc",ne.description,ne.i18nParams):ne.description};if(ne.link==="suppliers")return{...ne,i18nTitleKey:"notifications.suppliers.created.title",i18nDescKey:"notifications.suppliers.created.desc",title:ne.i18nParams?r("notifications.suppliers.created.title",ne.title):ne.title,description:ne.i18nParams?r("notifications.suppliers.created.desc",ne.description,ne.i18nParams):ne.description};if(ne.link==="invoices"&&!ne.relatedId)return{...ne,i18nTitleKey:"notifications.invoices.created.title",i18nDescKey:"notifications.invoices.created.desc",title:ne.i18nParams?r("notifications.invoices.created.title",ne.title):ne.title,description:ne.i18nParams?r("notifications.invoices.created.desc",ne.description,ne.i18nParams):ne.description};if(ne.link==="expenses"&&!ne.relatedId)return{...ne,i18nTitleKey:"notifications.expenses.created.title",i18nDescKey:"notifications.expenses.created.desc",title:ne.i18nParams?r("notifications.expenses.created.title",ne.title):ne.title,description:ne.i18nParams?r("notifications.expenses.created.desc",ne.description,ne.i18nParams):ne.description};if(ne.link==="sales"&&!ne.relatedId)return{...ne,i18nTitleKey:"notifications.sales.created.title",i18nDescKey:"notifications.sales.created.desc",title:ne.i18nParams?r("notifications.sales.created.title",ne.title):ne.title,description:ne.i18nParams?r("notifications.sales.created.desc",ne.description,ne.i18nParams):ne.description}}}catch(be){mr("app.notifications.relocalizeLegacy",{notificationId:ne?.id,error:be})}return ne.i18nTitleKey||ne.i18nDescKey?ne.relatedId==="twofa-reminder"||String(ne.i18nTitleKey||"").startsWith("security.twofa")||String(ne.i18nDescKey||"").startsWith("security.twofa")?{...ne,title:s(["security.twofa.reminderTitle","sales.security.twofa.reminderTitle"],ne.title,ne.i18nParams),description:s(["security.twofa.reminderDesc","sales.security.twofa.reminderDesc"],ne.description,ne.i18nParams)}:{...ne,title:ne.i18nTitleKey?r(ne.i18nTitleKey,ne.title,ne.i18nParams):ne.title,description:ne.i18nDescKey?r(ne.i18nDescKey,ne.description,ne.i18nParams):ne.description}:{...ne}}))})()},[l.language,rr,xr,Sr,r,s]);const _l=J=>String(J??Date.now());G.useEffect(()=>{const J=()=>{const de=window.location.hash.replace("#","");he.debug("app.hashRouting.hashChange",{hash:de});const ne=(be,Te)=>{he.debug("app.hashRouting.navigate",{hash:de,targetPage:be,...Te}),u(be)};if(mb.has(de)){ne(de,{reason:"hash-direct-match"});return}if(de==="admin")ne("admin");else if(de==="register")ne("register");else if(de==="login")ne("login");else if(de==="forgot-password")ne("forgot-password");else if(de.startsWith("reset-password"))ne("reset-password");else if(de.startsWith("verify-email"))ne("verify-email");else if(de==="verify-notice")ne("verify-notice");else if(de==="help")ne("help");else if(de.startsWith("legal/")){const be=de.replace("legal/","");ne(`legal-${be}`,{legalPage:be})}else if(de==="settings/organization/members")ne("organization-members");else if(de.startsWith("join?token=")){const be=de.replace("join?token=","");ne(`join-organization:${be}`,{token:be})}else if(de==="")if(a||!!zn()){const Te=ep();if(Te){ne(Te,{reason:"hash-empty-restored"});return}ne("dashboard",{reason:"hash-empty-authenticated"})}else ne("landing",{reason:"hash-empty-guest"});else de==="about"?ne("about"):de==="api"?ne("api"):(de.startsWith("customer-history:")||de.startsWith("crm-deal:")||de.startsWith("crm-opportunities:")||de.startsWith("crm-contacts:")||de.startsWith("crm-activities:")||de.startsWith("crm-activities-opp:")||de.startsWith("crm-activities-contact:")||de.startsWith("crm-tasks:")||de.startsWith("crm-tasks-opp:")||de.startsWith("quotes-open:")||de.startsWith("quotes-edit:")||de.startsWith("sales-edit:")||de.startsWith("invoices-edit:"))&&ne(de)};return he.debug("app.hashRouting.initialHash",{hash:window.location.hash}),J(),window.addEventListener("hashchange",J),()=>{window.removeEventListener("hashchange",J)}},[a]);const Ao=J=>typeof window>"u"?!1:window.confirm(J),Va=J=>{O(J),J.currency&&d(J.currency);try{const de=ku(),ne=go(de);Ri.setJSON(ne,J)}catch(de){mr("app.companyUpdate.securePersistFailed",de)}try{const de=$_?.VITE_ENABLE_ENCRYPTION==="true",ne=ku(),be=go(ne),Te=JSON.stringify(J);de?Et.setItem(`${be}_plain`,Te):Et.setItem(be,Te)}catch(de){mr("app.companyUpdate.plainPersistFailed",de)}try{window.dispatchEvent(new Event("company-profile-updated"))}catch(de){mr("app.companyUpdate.dispatchFailed",de)}},hi=_t.useCallback(()=>{const J=String(f?.subscriptionPlan||"").toLowerCase();return J.includes("free")||J.includes("starter")?"free":J.includes("basic")?"basic":J.includes("pro")||J.includes("professional")?"pro":J||"free"},[f?.subscriptionPlan]),qa=_t.useMemo(()=>hi()==="free",[hi]),To=_t.useCallback(()=>{const J=new Date,de=new Date(J.getFullYear(),J.getMonth(),1,0,0,0,0),ne=new Date(J.getFullYear(),J.getMonth()+1,0,23,59,59,999);return rr.filter(be=>{if(be?.isVoided)return!1;const Te=be?.createdAt?new Date(be.createdAt):be?.issueDate?new Date(be.issueDate):null;return!Te||Number.isNaN(Te.getTime())?!1:Te>=de&&Te<=ne}).length},[rr]),Pm=_t.useCallback(()=>{const J=new Date,de=new Date(J.getFullYear(),J.getMonth(),1,0,0,0,0),ne=new Date(J.getFullYear(),J.getMonth()+1,0,23,59,59,999);return xr.filter(be=>{if(be?.isVoided)return!1;const Te=be?.createdAt?new Date(be.createdAt):be?.expenseDate?new Date(be.expenseDate):null;return!Te||Number.isNaN(Te.getTime())?!1:Te>=de&&Te<=ne}).length},[xr]),Im=()=>{P(J=>{const de=!J;if(!J){const ne=Date.now();B(be=>be.map(Te=>Te.read?Te:{...Te,read:!0,readAt:ne}))}return de})},Hi=()=>P(!1),Eo=J=>{if(he.info("app.notifications.clicked",{id:J.id,type:J.type,link:J.link,persistent:!!J.persistent}),J.persistent||J.repeatDaily){const de=Date.now();B(ne=>ne.map(be=>be.id===J.id?{...be,read:!0,readAt:de}:be)),he.debug("app.notifications.persistentHandled",{id:J.id})}else{const de=Date.now();B(ne=>ne.map(be=>be.id===J.id?{...be,read:!0,readAt:de}:be))}Hi();try{if(J.relatedId&&String(J.relatedId).startsWith("twofa")){D("security");return}}catch(de){mr("app.notifications.twofaRedirectFailed",de)}J.link&&j(J.link)},Do=async J=>{try{const de={};typeof J.status<"u"&&(de.status=J.status),typeof J.dueDate<"u"&&(de.dueDate=J.dueDate),typeof J.issueDate<"u"&&(de.issueDate=J.issueDate);const ne=await Nf(String(J.id),de);yr(be=>{const Te=be.map(Ve=>String(Ve.id)===String(ne.id)?ne:Ve);try{const Ve=Gr(f,o?.tenantId);Ur("invoices_cache",Te,{tenantId:Ve,mirrorToBase:!0})}catch(Ve){mr("app.invoices.inlineUpdate.persistFailed",Ve)}return Te}),Xt(n("toasts.invoices.updateSuccess"),"success")}catch(de){console.error("Inline invoice update error:",de),Xt(de?.response?.data?.message||n("toasts.invoices.updateError"),"error")}},td=()=>{u("dashboard"),Hi(),_s(()=>{rs([])}),qt([]),fr([]),Wr([]),yr([]),Rr([]),Fs([]),t()},Aa=()=>k(J=>!J),Pl=()=>k(!1),_o=async J=>{try{const de={name:J.name||"",email:J.email?.trim()||void 0,phone:J.phone?.trim()||void 0,address:J.address?.trim()||void 0,taxNumber:J.taxNumber?.trim()||void 0,company:J.company?.trim()||void 0};if(J.id){const ne=await t8(String(J.id),de);qt(be=>be.map(Te=>Te.id===ne.id?ne:Te)),Xt(n("toasts.customers.updateSuccess"),"success")}else{const ne=(de.email||"").trim().toLowerCase();if(ne){const Te=Zt.find(Ve=>String(Ve?.email||"").trim().toLowerCase()===ne);if(Te){zr({title:n("customers.duplicate.title")||"Hesap zaten kaytl",message:n("customers.duplicate.message",{email:de.email,name:Te.name})||`Bu e-posta (${de.email}) ile bir hesap zaten kaytl (${Te.name}). Ltfen listeden mevcut kayd sein.`,tone:"error",confirmLabel:n("customers.duplicate.openExisting")||"Mevcut hesab a",onConfirm:()=>{mt(Te),Ae(!0),j("customers"),zr(null)}});return}}const be=await Jx(de);qt(Te=>[...Te,be]),Xt(n("toasts.customers.createSuccess"),"success"),Yr(r("notifications.customers.created.title","Yeni hesap eklendi"),r("notifications.customers.created.desc",`${be.name} sisteme kaydedildi.`,{name:be.name}),"success","customers",{i18nTitleKey:"notifications.customers.created.title",i18nDescKey:"notifications.customers.created.desc",i18nParams:{name:be.name}})}}catch(de){console.error("Customer upsert error:",de),console.error("Error details:",de.response?.data);const ne=de?.response?.status,be=de?.response?.data?.message,Te=Array.isArray(be)?be.join(", "):be||de.message||"Hesap kaydedilemedi",Ve=String(J?.email||"").trim().toLowerCase();if(ne===400&&typeof Te=="string"&&(Te.toLowerCase().includes("zaten bir mteri")||Te.toLowerCase().includes("zaten bir hesap")||Te.toLowerCase().includes("duplicate"))){const _e=Zt.find(Ke=>String(Ke?.email||"").trim().toLowerCase()===Ve);if(_e){zr({title:n("customers.duplicate.title")||"Hesap zaten kaytl",message:n("customers.duplicate.message",{email:J.email,name:_e.name})||Te,tone:"error",confirmLabel:n("customers.duplicate.openExisting")||"Mevcut hesab a",onConfirm:()=>{mt(_e),Ae(!0),j("customers"),zr(null)}});return}}Xt(Te,"error")}},rd=async J=>{if(!(typeof window<"u"&&!window.confirm(n("customers.deleteConfirm",{defaultValue:"Bu hesab silmek istediinizden emin misiniz?"}))))try{await r8(String(J)),qt(de=>de.filter(ne=>String(ne.id)!==String(J))),Xt(n("toasts.customers.deleteSuccess"),"success")}catch(de){console.error("Customer delete error:",de),de.response?.data?.relatedInvoices?(je({title:"Hesap Silinemez",message:de.response.data.message,relatedItems:db(de.response.data.relatedInvoices),itemType:"invoice"}),Pe(!0)):Xt(de.response?.data?.message||n("toasts.customers.deleteError"),"error")}},Po=async J=>{try{he.info("app.import.customers.start",{fileName:J.name,fileType:J.type});const de=await J.arrayBuffer(),ne=[];if(J.type==="text/csv"||J.name.toLowerCase().endsWith(".csv")){he.debug("app.import.customers.csvDetected");const Ke=new TextDecoder("utf-8").decode(de).split(`
`).filter(et=>et.trim());if(Ke.length<2){he.warn("app.import.customers.csvInsufficientData",{lineCount:Ke.length}),zr({title:n("common.warning"),message:n("customers.import.noDataFound")});return}const nt=Ke[0].split(",").map(et=>et.trim().replace(/"/g,""));he.debug("app.import.customers.csvHeaders",{headers:nt});for(let et=1;et<Ke.length;et++){const Je=Ke[et].split(",").map(bt=>bt.trim().replace(/"/g,"")),St={};nt.forEach((bt,Dt)=>{St[bt]=Je[Dt]||""}),ne.push(St)}}else{he.debug("app.import.customers.excelDetected");const _e=new lb.Workbook;await _e.xlsx.load(de);const Ke=_e.worksheets[0];if(!Ke){he.warn("app.import.customers.excelNoWorksheet"),zr({title:n("common.warning"),message:n("customers.import.noDataFound")});return}he.debug("app.import.customers.excelWorksheet",{rowCount:Ke.rowCount}),Ke.eachRow((nt,et)=>{if(et===1)return;const Je={};nt.eachCell((St,bt)=>{const Dt=Ke.getRow(1).getCell(bt).value?.toString()||`col${bt}`;Je[Dt]=St.value}),ne.push(Je)})}const be=_e=>String(_e??"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/gi,"").toLowerCase(),Te=_e=>{if(!_e)return;if(_e instanceof Date)return _e.toISOString().split("T")[0];if(typeof _e=="number"){const et=new Date(1899,11,30);return new Date(et.getTime()+_e*864e5).toISOString().split("T")[0]}const Ke=String(_e).trim();if(!Ke)return;const nt=new Date(Ke);if(!Number.isNaN(nt.getTime()))return nt.toISOString().split("T")[0]},Ve=ne.map(_e=>{if(!_e||typeof _e!="object")return null;const Ke=Object.entries(_e).reduce((Jt,[ur,Pt])=>(Jt[be(ur)]=Pt,Jt),{}),nt=(...Jt)=>{for(const ur of Jt)if(Ke[ur]!==void 0&&Ke[ur]!=="")return Ke[ur]},et=nt("name","musteriadi","musteriad","musteri","adsoyad","ad"),Je=et?String(et).trim():"";if(!Je)return null;const St=nt("email","eposta","mail"),bt=nt("phone","telefon","tel","gsm"),Dt=nt("address","adres"),Ft=nt("taxnumber","vergino","vkn","tc","tcno"),tr=nt("company","firma","sirket","unvan"),Bt=nt("createdat","kayittarihi","olusturmatarihi","tarih"),vr=nt("id","musteriid");return{id:vr?String(vr):void 0,name:Je,email:St?String(St).trim():"",phone:bt?String(bt).trim():"",address:Dt?String(Dt).trim():"",taxNumber:Ft?String(Ft).trim():"",company:tr?String(tr).trim():"",createdAt:Te(Bt)}}).filter(_e=>!!_e);if(he.info("app.import.customers.parsed",{count:Ve.length}),Ve.length===0){he.warn("app.import.customers.noValidRecords"),zr({title:n("common.warning"),message:n("customers.import.noCustomersFound")});return}try{he.info("app.import.customers.persist.start",{count:Ve.length});const _e=await Promise.allSettled(Ve.map((et,Je)=>(he.debug("app.import.customers.persist.request",{index:Je,name:et.name||"unknown"}),Jx({name:et.name,email:et.email||void 0,phone:et.phone||void 0,address:et.address||void 0,taxNumber:et.taxNumber||void 0,company:et.company||void 0}).then(St=>(he.debug("app.import.customers.persist.success",{index:Je,customerId:St?.id}),St)).catch(St=>{throw he.warn("app.import.customers.persist.failure",{index:Je,name:et.name||"unknown",error:os(St)}),St})))),Ke=[],nt=[];if(_e.forEach((et,Je)=>{et.status==="fulfilled"?Ke.push(et.value):nt.push({index:Je,reason:et.reason})}),qt(et=>{const Je=[...et];return Ke.forEach(St=>{const bt=Je.findIndex(Dt=>Dt.id===St.id);bt>=0?Je[bt]={...Je[bt],...St}:Je.push(St)}),Je}),he.info("app.import.customers.persist.result",{created:Ke.length,failed:nt.length}),nt.length===0)zr({title:n("common.success"),message:n("customers.import.success",{count:Ke.length})});else{const et=`${n("customers.import.success",{count:Ke.length})}
${nt.length} kayt baarsz.`;zr({title:n("common.warning"),message:et}),he.warn("app.import.customers.persist.partialFailure",{failedCount:nt.length})}}catch(_e){he.error("app.import.customers.persist.exception",_e),zr({title:n("common.error"),message:n("customers.import.error")+`

Detay: `+(_e instanceof Error?_e.message:String(_e))})}}catch(de){he.error("app.import.customers.failed",de),zr({title:n("common.error"),message:n("customers.import.error")+`

Detay: `+(de instanceof Error?de.message:String(de))})}},Io=async J=>{try{he.info("app.import.products.start",{fileName:J.name,fileType:J.type});const de=await J.arrayBuffer(),ne=[];if(J.type==="text/csv"||J.name.toLowerCase().endsWith(".csv")){he.debug("app.import.products.csvDetected");const Ke=new TextDecoder("utf-8").decode(de).split(`
`).filter(et=>et.trim());if(Ke.length<2){zr({title:n("common.warning"),message:n("customers.import.noDataFound")});return}const nt=Ke[0].split(",").map(et=>et.trim().replace(/"/g,""));for(let et=1;et<Ke.length;et++){const Je=Ke[et].split(",").map(bt=>bt.trim().replace(/"/g,"")),St={};nt.forEach((bt,Dt)=>{St[bt]=Je[Dt]??""}),ne.push(St)}}else{he.debug("app.import.products.excelDetected");const _e=new lb.Workbook;await _e.xlsx.load(de);const Ke=_e.worksheets[0];if(!Ke){zr({title:n("common.warning"),message:n("customers.import.noDataFound")});return}Ke.eachRow((nt,et)=>{if(et===1)return;const Je={};nt.eachCell((St,bt)=>{const Dt=Ke.getRow(1).getCell(bt).value?.toString()||`col${bt}`;Je[Dt]=St.value}),ne.push(Je)})}const be=_e=>String(_e??"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/gi,"").toLowerCase(),Te=_e=>{if(_e==null||_e==="")return;if(typeof _e=="number")return _e;const Ke=String(_e).trim();if(/^\d+\.?\d*$/.test(Ke)){const Je=parseFloat(Ke);return Number.isFinite(Je)?Je:void 0}if(Ke.includes(",")){const Je=Ke.replace(/\./g,"").replace(/,/g,"."),St=parseFloat(Je);return Number.isFinite(St)?St:void 0}const nt=Ke.replace(/\s/g,""),et=parseFloat(nt);return Number.isFinite(et)?et:void 0},Ve=ne.map(_e=>{if(!_e||typeof _e!="object")return null;const Ke=Object.entries(_e).reduce((ur,[Pt,Dr])=>(ur[be(Pt)]=Dr,ur),{}),nt=(...ur)=>{for(const Pt of ur)if(Ke[Pt]!==void 0&&Ke[Pt]!=="")return Ke[Pt]},et=String(nt("name","urunadi","urun","productname")??"").trim();if(!et)return null;const Je=String(nt("sku","code","kod","barkod")??"").trim()||void 0,St=Te(nt("unitprice","price","satisfiyati","fiyat")),bt=Te(nt("costprice","cost","maliyet"));let Dt=Te(nt("taxrate","kdv","vergi"));Dt!=null&&(Dt=Math.max(0,Math.min(100,Dt)));const Ft=Te(nt("stockquantity","stock","stok","adet")),tr=Te(nt("reorderlevel","minstock","kritikstok")),Bt=String(nt("unit","birim")??"").trim()||void 0,vr=String(nt("category","kategori")??"").trim()||"Genel",Jt=String(nt("description","aciklama")??"").trim()||void 0;return{name:et,sku:Je,unitPrice:St,costPrice:bt,taxRate:Dt,stockQuantity:Ft,reorderLevel:tr,unit:Bt,category:vr,description:Jt}}).filter(_e=>!!_e);if(he.info("app.import.products.parsed",{count:Ve.length}),Ve.length===0){he.warn("app.import.products.noValidRecords"),zr({title:n("common.warning"),message:n("customers.import.noDataFound")});return}try{he.info("app.import.products.persist.start",{count:Ve.length});const _e=await Promise.allSettled(Ve.map((et,Je)=>{const St={name:et.name,code:et.sku||et.name,price:Number(et.unitPrice??0),cost:et.costPrice!=null?Number(et.costPrice):void 0,stock:et.stockQuantity!=null?Number(et.stockQuantity):void 0,minStock:et.reorderLevel!=null?Number(et.reorderLevel):void 0,unit:et.unit,category:et.category||"Genel",description:et.description,taxRate:et.taxRate!=null?Number(et.taxRate):void 0};return he.debug("app.import.products.persist.request",{index:Je,name:et.name}),ey(St).then(bt=>(he.debug("app.import.products.persist.success",{index:Je,productId:bt?.id}),bt)).catch(bt=>{throw he.warn("app.import.products.persist.failure",{index:Je,name:et.name,error:os(bt)}),bt})})),Ke=[],nt=[];if(_e.forEach((et,Je)=>{et.status==="fulfilled"?Ke.push(et.value):nt.push({index:Je,reason:et.reason})}),Ke.length>0){const et=Ke.map(Ic);Wr(Je=>{const St=[...Je,...et],bt=Gr(f,o?.tenantId);return Ur("products_cache",St,{tenantId:bt,mirrorToBase:!0}),St})}he.info("app.import.products.persist.result",{created:Ke.length,failed:nt.length}),nt.length===0?zr({title:n("common.success"),message:`${Ke.length} rn baaryla ie aktarld!`}):(zr({title:n("common.warning"),message:`${Ke.length} rn ie aktarld, ${nt.length} kayt baarsz.`}),he.warn("app.import.products.persist.partialFailure",{failedCount:nt.length}))}catch(_e){he.error("app.import.products.persist.exception",_e),zr({title:n("common.error"),message:(n("customers.import.error")||"e aktarma hatas")+`

Detay: `+(_e instanceof Error?_e.message:String(_e))})}}catch(de){he.error("app.import.products.failed",de),zr({title:n("common.error"),message:(n("customers.import.error")||"e aktarma hatas")+`

Detay: `+(de instanceof Error?de.message:String(de))})}},sd=async J=>{try{const de={name:J.name||"",email:J.email?.trim()||void 0,phone:J.phone?.trim()||void 0,address:J.address?.trim()||void 0,taxNumber:J.taxNumber?.trim()||void 0};if(J.id){const ne=await k8(String(J.id),de);fr(be=>be.map(Te=>Te.id===ne.id?ne:Te)),Xt(n("toasts.suppliers.updateSuccess"),"success")}else{const ne=await N8(de);fr(be=>[...be,ne]),Xt(n("toasts.suppliers.createSuccess"),"success"),Yr(r("notifications.suppliers.created.title","Yeni tedariki eklendi"),r("notifications.suppliers.created.desc",`${ne.name} sisteme kaydedildi.`,{name:ne.name}),"success","suppliers",{i18nTitleKey:"notifications.suppliers.created.title",i18nDescKey:"notifications.suppliers.created.desc",i18nParams:{name:ne.name}})}}catch(de){console.error("Supplier upsert error:",de);const ne=de.response?.data?.message||de.message||"Tedariki kaydedilemedi";Xt(Array.isArray(ne)?ne.join(", "):ne,"error")}},fn=async J=>{if(!(typeof window<"u"&&!window.confirm(n("suppliers.deleteConfirm",{defaultValue:"Bu tedarikiyi silmek istediinizden emin misiniz?"}))))try{await j8(String(J)),fr(de=>de.filter(ne=>String(ne.id)!==String(J))),Xt(n("toasts.suppliers.deleteSuccess"),"success")}catch(de){console.error("Supplier delete error:",de),de.response?.data?.relatedExpenses?(je({title:"Tedariki Silinemez",message:de.response.data.message,relatedItems:db(de.response.data.relatedExpenses),itemType:"expense"}),Pe(!0)):Xt(de.response?.data?.message||n("toasts.suppliers.deleteError"),"error")}},Ta=async J=>{const de=_e=>_e?Array.isArray(_e.items)&&_e.items.length?_e.items:Array.isArray(_e.lineItems)&&_e.lineItems.length?_e.lineItems:[]:[],ne=_e=>{const Ke=String(_e?.type||"").toLowerCase();return Ke==="refund"||Ke==="return"},be=_e=>{const Ke=new Map;return de(_e).forEach(nt=>{const et=nt?.productId?String(nt.productId):"";if(!et)return;const Je=Number(nt?.quantity)||0;!Number.isFinite(Je)||Je===0||Ke.set(et,(Ke.get(et)||0)+Je)}),Ke},Te=_e=>{!_e||_e.size===0||Wr(Ke=>Ke.map(nt=>{const et=String(nt.id);if(!_e.has(et))return nt;const Je=_e.get(et)||0;if(!Je)return nt;const St=Number(nt.stockQuantity??nt.stock??0)||0,bt=Math.max(0,St+Je),Dt=bt<=0?"out-of-stock":bt<=(nt.reorderLevel||0)?"low":"active";return{...nt,stockQuantity:bt,stock:bt,status:Dt}}))},Ve=async _e=>{if(_e&&Array.isArray(_e.items)&&_e.items.length)return _e;if(!_e?.id)return _e||null;try{return await ll(String(_e.id))}catch(Ke){return mr("app.invoices.update.fetchFailed",Ke),_e||null}};try{if(he.info("app.invoices.upsert.start",{id:J.id,saleId:J.saleId,customerId:J.customerId,customerName:J.customerName,invoiceNumber:J.invoiceNumber}),!J.customerId){console.error(" customerId eksik!",{customerName:J.customerName,availableCustomers:Zt.map(Ke=>({id:Ke.id,name:Ke.name}))}),Xt(n("toasts.sales.customerNotSelected"),"error");return}const _e={customerId:J.customerId,type:J.type||"product",issueDate:J.issueDate||new Date().toISOString().split("T")[0],dueDate:J.dueDate,items:(J.items||J.lineItems||[]).map(Ke=>({productId:Ke.productId,productName:Ke.description||Ke.productName,description:Ke.description||Ke.productName,quantity:Number(Ke.quantity)||1,unitPrice:Number(Ke.unitPrice)||0,total:Number(Ke.total)||0,taxRate:Number(Ke.taxRate??18)})),taxAmount:Number(J.taxAmount||0),discountAmount:Number(J.discountAmount||0),notes:J.notes||"",saleId:J.saleId,refundedInvoiceId:!J.id&&J.originalInvoiceId&&(String((J.type||"").toLowerCase())==="return"||String((J.type||"").toLowerCase())==="refund")?J.originalInvoiceId:void 0};if(he.debug("app.invoices.upsert.payload",{customerId:_e.customerId,items:_e.items.length,firstItem:_e.items[0],taxAmount:_e.taxAmount,discountAmount:_e.discountAmount,saleId:_e.saleId}),J.status&&(_e.status=J.status),!J.id&&qa){const Ke=To(),nt=5;if(Ke>=nt){zr({title:n("plans.limitExceeded.title",{defaultValue:"Plan Limiti Ald"}),message:n("plans.limitExceeded.invoicesMessage",{defaultValue:"Starter/Free planda bir ayda en fazla 5 fatura oluturabilirsiniz. Daha fazla fatura iin plannz ykseltin."})});return}else Ke===nt-1&&Yr(r("notifications.plan.limit.title","Plan limiti uyars"),r("notifications.plan.limit.invoices.desc","Bu ay 5/5 limitine yaklamaktasnz (4/5).",{used:Ke,limit:nt}),"info","invoices",{relatedId:"plan-limit-invoices",i18nTitleKey:"notifications.plan.limit.title",i18nDescKey:"notifications.plan.limit.invoices.desc",i18nParams:{used:Ke,limit:nt}})}if(J.id){const Ke=rr.find(Bt=>String(Bt.id)===String(J.id)),nt=await Ve(Ke),et=ne(nt),Je=await Nf(String(J.id),_e),St=await Ve(Je),bt=ne(St),Dt=St||Je,Ft=rr.map(Bt=>Bt.id===Je.id?Dt:Bt);yr(Ft);try{const Bt=Gr(f,o?.tenantId);Ur("invoices_cache",Ft,{tenantId:Bt,mirrorToBase:!0})}catch(Bt){mr("app.invoices.update.persistFailed",Bt)}const tr=!et&&bt;if(nt&&St&&!tr){const Bt=be(nt),vr=be(St),Jt=new Map;new Set([...Array.from(Bt.keys()),...Array.from(vr.keys())]).forEach(Pt=>{const Dr=(Bt.get(Pt)||0)-(vr.get(Pt)||0);Dr!==0&&Jt.set(Pt,Dr)}),Jt.size&&Te(Jt)}if(tr){try{const Bt=de(St||Je);Wr(vr=>vr.map(Jt=>{const ur=Bt.find(us=>String(us.productId||"")===String(Jt.id));if(!ur)return Jt;const Pt=Number(ur.quantity||0),Dr=Pt<0?Math.abs(Pt):Pt,lr=Number(Jt.stockQuantity||0)+Dr;return{...Jt,stockQuantity:lr,status:lr<=0?"out-of-stock":lr<=(Jt.reorderLevel||0)?"low":"active"}}))}catch(Bt){mr("app.invoices.stockRestoreFailed",Bt)}Je.saleId&&rs(Bt=>Bt.map(vr=>String(vr.id)===String(Je.saleId)?{...vr,status:"refunded"}:vr))}return he.debug("app.invoices.cacheUpdated",{action:"update"}),Xt(n("toasts.invoices.updateSuccess"),"success"),Je}else{try{for(const Je of _e.items||[]){let St;if(Je.productId&&(St=Sr.find(bt=>String(bt.id)===String(Je.productId))),!St&&Je.productName){const bt=String(Je.productName).trim().toLowerCase();St=Sr.find(Dt=>String(Dt.name||"").trim().toLowerCase()===bt)||Sr.find(Dt=>String(Dt.name||"").toLowerCase().includes(bt))}if(St){const bt=Number(St.stock??St.stockQuantity??NaN),Dt=Number(Je.quantity)||0;if(Number.isFinite(bt)&&Dt>bt){Xt(n("validation.insufficientStock",{defaultValue:`Stok yetersiz: ${St.name} (stenen: ${Dt}, Mevcut: ${bt})`}),"error");return}}}}catch(Je){mr("app.invoices.preCreate.stockCheckFailed",Je)}const Ke=await ry(_e);if(he.info("app.invoices.create.success",{id:Ke.id,invoiceNumber:Ke.invoiceNumber,type:Ke.type,customer:Ke.customer,items:Ke.items,lineItems:Ke.lineItems}),!_e.saleId&&_e.items&&_e.items.length>0&&String(_e.type||"").toLowerCase()!=="refund"&&String(_e.type||"").toLowerCase()!=="return"){try{he.debug("app.sales.autoCreate.fromInvoice.start",{invoiceId:Ke.id});const Je=Zt.find(Jt=>Jt.id===_e.customerId),St=Je?.name||J.customerName||"N/A",bt=Je?.email||J.customerEmail||"",Dt=_e.items.map(Jt=>({productId:Jt.productId,productName:Jt.productName||Jt.description||"rn/Hizmet",quantity:Number(Jt.quantity)||1,unitPrice:Number(Jt.unitPrice)||0,taxRate:Number(Jt.taxRate??18)})),Ft={customerId:String(_e.customerId),customerName:St,customerEmail:bt,saleDate:_e.issueDate,items:Dt,discountAmount:Number(_e.discountAmount||0),notes:`${Ke.invoiceNumber} numaral faturadan otomatik oluturuldu.`,invoiceId:Ke.id},tr=await kf(Ft),Bt=Array.isArray(tr?.items)&&tr.items.length>0?tr.items[0]:void 0,vr={...tr,customerName:tr?.customer?.name||St,customerEmail:bt,productId:Bt?.productId,productName:Bt?.productName||Bt?.description||"",quantity:Number(Bt?.quantity??1),unitPrice:Number(Bt?.unitPrice??0),date:tr?.saleDate?String(tr.saleDate).slice(0,10):_e.issueDate,amount:Number(tr?.total??Ke.total??0),status:"completed"};rs(Jt=>[...Jt,vr]);try{const Jt=Array.isArray(Dt)?Dt:[];Wr(ur=>ur.map(Pt=>{const Dr=Jt.find(Vn=>String(Vn.productId||"")===String(Pt.id));if(!Dr)return Pt;const lr=Number(Pt.stockQuantity||0)-Number(Dr.quantity||0),us=lr<0?0:lr;return{...Pt,stockQuantity:us,status:us<=0?"out-of-stock":us<=(Pt.reorderLevel||0)?"low":"active"}}))}catch(Jt){mr("app.sales.autoCreate.stockAdjustFailed",Jt)}try{await Nf(String(Ke.id),{saleId:String(tr.id)}),yr(Jt=>Jt.map(ur=>String(ur.id)===String(Ke.id)?{...ur,saleId:tr.id}:ur))}catch(Jt){he.warn("app.invoices.linkUpdateFailed",Jt)}try{const Jt=Gr(f,o?.tenantId),ur=o?.id?String(o.id):void 0;(wl({tenantIds:Jt?[Jt]:void 0,userIds:ur?[ur]:void 0})||{})?.salesNotifications!==!1&&Yr(r("notifications.sales.created.title","Yeni sat kaydedildi"),r("notifications.sales.created.desc",`${St} - ${String(tr?.items?.[0]?.productName||"")}: ${Number(tr.total)||0}`,{customerName:St,summary:String(tr?.items?.[0]?.productName||""),totalAmount:Number(tr.total)||0}),"success","sales",{i18nTitleKey:"notifications.sales.created.title",i18nDescKey:"notifications.sales.created.desc",i18nParams:{customerName:St,summary:String(tr?.items?.[0]?.productName||""),totalAmount:Number(tr.total)||0}})}catch(Jt){mr("app.sales.autoCreate.notificationFailed",Jt)}}catch(Je){console.error(" Otomatik sat (backend) oluturulamad:",Je),Xt(n("toasts.invoices.createPartialError"),"error")}tn()}const nt=[...rr,Ke];yr(nt);try{const Je=Gr(f,o?.tenantId);Ur("invoices_cache",nt,{tenantId:Je,mirrorToBase:!0})}catch(Je){mr("app.invoices.create.persistFailed",Je)}he.debug("app.invoices.cacheUpdated",{action:"create"}),Xt(n("toasts.invoices.createWithSaleSuccess"),"success");const et=Zt.find(Je=>Je.id===_e.customerId);return Yr(r("notifications.invoices.created.title","Yeni fatura oluturuldu"),r("notifications.invoices.created.desc",`${Ke.invoiceNumber} - ${et?.name||"Hesap"} iin fatura hazr.`,{invoiceNumber:Ke.invoiceNumber,customerName:et?.name||"Hesap"}),"success","invoices",{i18nTitleKey:"notifications.invoices.created.title",i18nDescKey:"notifications.invoices.created.desc",i18nParams:{invoiceNumber:Ke.invoiceNumber,customerName:et?.name||"Hesap"}}),Ke}}catch(_e){console.error("Invoice upsert error:",_e),console.error("Error details:",_e.response?.data);const Ke=os(_e);Xt(Ke,"error")}},Il=async J=>{try{await i8(String(J));const de=rr.filter(ne=>String(ne.id)!==String(J));yr(de);try{const ne=Gr(f,o?.tenantId);Ur("invoices_cache",de,{tenantId:ne,mirrorToBase:!0})}catch(ne){mr("app.invoices.delete.persistFailed",ne)}he.debug("app.invoices.cacheUpdated",{action:"delete"}),Xt(n("invoices.deleteSuccess",{defaultValue:"Fatura silindi"}),"success")}catch(de){console.error("Invoice delete error:",de);const ne=de.response?.data?.message||"";he.warn("app.invoices.cacheUpdateSkipped",{action:"delete"}),ne.includes("locked period")||ne.includes("kilitli dnem")||ne.includes("Cannot modify records")?Xt(n("common.periodLockedError"),"error"):Xt(ne||n("invoices.deleteError"),"error")}},fi=J=>{Rt(String(J))},nd=async(J,de)=>{try{const ne=rr.find(Te=>Te.id===J);await o8(J,de);const be=rr.map(Te=>Te.id===J?{...Te,isVoided:!0,voidReason:de,voidedAt:new Date().toISOString()}:Te);yr(be);try{const Te=Gr(f,o?.tenantId);Ur("invoices_cache",be,{tenantId:Te,mirrorToBase:!0})}catch(Te){mr("app.invoices.void.persistFailed",Te)}if(ne){try{const Te=Array.isArray(ne.items)?ne.items:[];Wr(Ve=>Ve.map(_e=>{const Ke=Te.find(Je=>String(Je.productId||"")===String(_e.id));if(!Ke)return _e;const nt=Number(Ke.quantity||0),et=Number(_e.stockQuantity||0)+nt;return{..._e,stockQuantity:et,status:et<=0?"out-of-stock":et<=(_e.reorderLevel||0)?"low":"active"}}))}catch(Te){mr("app.invoices.void.stockRestoreFailed",Te)}ne.saleId&&rs(Te=>Te.map(Ve=>String(Ve.id)===String(ne.saleId)?{...Ve,status:"cancelled"}:Ve))}Xt(n("toasts.invoices.cancelSuccess"),"success")}catch(ne){console.error("Invoice void error:",ne),Xt(ne.response?.data?.message||n("toasts.invoices.cancelError"),"error")}},Mo=async J=>{try{await l8(J);const de=rr.map(ne=>ne.id===J?{...ne,isVoided:!1,voidReason:void 0,voidedAt:void 0}:ne);yr(de);try{const ne=Gr(f,o?.tenantId);Ur("invoices_cache",de,{tenantId:ne,mirrorToBase:!0})}catch(ne){mr("app.invoices.restore.persistFailed",ne)}Xt(n("toasts.invoices.restoreSuccess"),"success")}catch(de){console.error("Invoice restore error:",de),Xt(de.response?.data?.message||n("toasts.invoices.restoreError"),"error")}},Ml=async J=>{try{if(!J.id&&qa){const ne=Pm(),be=5;if(ne>=be){zr({title:n("plans.limitExceeded.title",{defaultValue:"Plan Limiti Ald"}),message:n("plans.limitExceeded.expensesMessage",{defaultValue:"Starter/Free planda bir ayda en fazla 5 gider kayd oluturabilirsiniz. Daha fazlas iin plannz ykseltin."})});return}else ne===be-1&&Yr(r("notifications.plan.limit.title","Plan limiti uyars"),r("notifications.plan.limit.expenses.desc","Bu ay 5/5 limitine yaklamaktasnz (4/5).",{used:ne,limit:be}),"info","expenses",{relatedId:"plan-limit-expenses",i18nTitleKey:"notifications.plan.limit.title",i18nDescKey:"notifications.plan.limit.expenses.desc",i18nParams:{used:ne,limit:be}})}const de={description:J.description||"",amount:Number(J.amount||0),category:J.category||"other",status:J.status||"pending",date:J.date||J.expenseDate||new Date().toISOString().split("T")[0],supplierId:J.supplierId===null?null:J.supplierId||void 0,notes:J.notes||""};if(J.id){const ne=await g8(String(J.id),de),be={...ne,supplier:ne.supplier||null,expenseDate:ne.expenseDate?typeof ne.expenseDate=="string"?ne.expenseDate:new Date(ne.expenseDate).toISOString().split("T")[0]:de.date,dueDate:ne.dueDate||ne.expenseDate||de.date},Te=xr.map(Ve=>Ve.id===be.id?be:Ve);Rr(Te);try{const Ve=Gr(f,o?.tenantId);Ur("expenses_cache",Te,{tenantId:Ve,mirrorToBase:!0})}catch(Ve){mr("app.expenses.update.persistFailed",Ve)}Xt(n("toasts.expenses.updateSuccess"),"success")}else{const ne=await p8(de),be={...ne,supplier:ne.supplier||null,expenseDate:ne.expenseDate?typeof ne.expenseDate=="string"?ne.expenseDate:new Date(ne.expenseDate).toISOString().split("T")[0]:de.date,dueDate:ne.dueDate||ne.expenseDate||de.date},Te=[...xr,be];Rr(Te);try{const _e=Gr(f,o?.tenantId);Ur("expenses_cache",Te,{tenantId:_e,mirrorToBase:!0})}catch(_e){mr("app.expenses.create.persistFailed",_e)}Xt(n("toasts.expenses.createSuccess"),"success");const Ve=be.supplier?.name||"Tedariki";Yr(r("notifications.expenses.created.title","Yeni gider kaydedildi"),r("notifications.expenses.created.desc",`${Ve} - ${be.description}: ${be.amount} TL`,{supplierName:Ve,description:be.description,amount:be.amount}),"info","expenses",{i18nTitleKey:"notifications.expenses.created.title",i18nDescKey:"notifications.expenses.created.desc",i18nParams:{supplierName:Ve,description:be.description,amount:be.amount}})}}catch(de){console.error("Expense upsert error:",de),console.error("Error details:",de.response?.data);const ne=os(de);Xt(ne,"error")}},Ki=async J=>{if(Ao(n("expenses.deleteConfirm")))try{await y8(String(J));const de=xr.filter(ne=>String(ne.id)!==String(J));Rr(de);try{const ne=Gr(f,o?.tenantId);Ur("expenses_cache",de,{tenantId:ne,mirrorToBase:!0})}catch(ne){mr("app.expenses.delete.persistFailed",ne)}he.debug("app.expenses.cacheUpdated",{action:"delete"}),Xt(n("expenses.deleteSuccess"),"success")}catch(de){console.error("Expense delete error:",de);const ne=de.response?.data?.message||"";he.warn("app.expenses.cacheUpdateSkipped",{action:"delete"}),ne.includes("locked period")||ne.includes("kilitli dnem")||ne.includes("Cannot modify records")?Xt(n("common.periodLockedError"),"error"):Xt(ne||n("expenses.deleteError"),"error")}},Ro=async(J,de)=>{try{await b8(J,de);const ne=xr.map(be=>be.id===J?{...be,isVoided:!0,voidReason:de,voidedAt:new Date().toISOString()}:be);Rr(ne);try{const be=Gr(f,o?.tenantId);Ur("expenses_cache",ne,{tenantId:be,mirrorToBase:!0})}catch(be){mr("app.expenses.void.persistFailed",be)}Xt(n("toasts.expenses.cancelSuccess"),"success")}catch(ne){console.error("Expense void error:",ne),Xt(ne.response?.data?.message||n("toasts.expenses.cancelError"),"error")}},ad=async J=>{try{const de=await x8(String(J.id),J.status),ne={...de,supplier:de.supplier||null,expenseDate:de.expenseDate?typeof de.expenseDate=="string"?de.expenseDate:new Date(de.expenseDate).toISOString().split("T")[0]:J.expenseDate,dueDate:de.dueDate||de.expenseDate||J.expenseDate},be=xr.map(Te=>String(Te.id)===String(ne.id)?ne:Te);Rr(be);try{const Te=Gr(f,o?.tenantId);Ur("expenses_cache",be,{tenantId:Te,mirrorToBase:!0})}catch(Te){mr("app.expenses.inlineStatus.persistFailed",Te)}Xt(n("toasts.expenses.statusUpdateSuccess"),"success")}catch(de){console.error("Expense status update error:",de);const ne=String(de?.response?.data?.message||de?.message||"Gider durumu gncellenemedi");ne.includes("locked period")||ne.includes("kilitli dnem")||ne.includes("Cannot modify records")?Xt(n("common.periodLockedError"),"error"):Xt(ne,"error")}},Mm=async J=>{try{await v8(J);const de=xr.map(ne=>ne.id===J?{...ne,isVoided:!1,voidReason:void 0,voidedAt:void 0}:ne);Rr(de);try{const ne=Gr(f,o?.tenantId);Ur("expenses_cache",de,{tenantId:ne,mirrorToBase:!0})}catch(ne){mr("app.expenses.restore.persistFailed",ne)}Xt(n("toasts.expenses.restoreSuccess"),"success")}catch(de){console.error("Expense restore error:",de),Xt(de.response?.data?.message||n("toasts.expenses.restoreError"),"error")}},Gi=async J=>{if(!J.id){const ne=Array.isArray(J.items)&&J.items.length>0?J.items:J.productId?[{productId:J.productId,quantity:J.quantity||0,productName:J.productName||"",unitPrice:J.unitPrice||0,total:J.amount||0}]:[];for(const be of ne){if(!be?.productId)continue;const Te=Sr.find(Ke=>String(Ke.id)===String(be.productId));if(!Te)continue;const Ve=Number(Te.stockQuantity||0),_e=Number(be.quantity||0);if(Ve<_e){Xt(n("toasts.sales.insufficientStock",{name:Te.name,available:Ve,requested:_e}),"error");return}}}const de=!J?.id;try{let ne;if(J.customerId)ne=String(J.customerId);else if(J.customerName){const et=String(J.customerName).trim().toLowerCase(),Je=String(J.customerEmail||"").trim().toLowerCase(),St=Zt.find(bt=>(bt.name||"").toLowerCase()===et||(bt.email||"").toLowerCase()===Je);St&&(ne=String(St.id))}const be=Number(J.quantity||1),Te=Number(J.unitPrice||J.amount||0),Ve=J.productId?String(J.productId):void 0,_e=J.productName||Sr.find(et=>String(et.id)===String(Ve))?.name||"rn/Hizmet",Ke=(()=>{const et=Sr.find(Je=>String(Je.id)===String(Ve));return et?.taxRate!=null?Number(et.taxRate):18})(),nt={customerId:ne,customerName:ne?void 0:J.customerName,customerEmail:ne?void 0:J.customerEmail,saleDate:J?.date||J?.saleDate||new Date().toISOString().split("T")[0],items:[{productId:Ve,productName:_e,quantity:Number.isFinite(be)?be:1,unitPrice:Number.isFinite(Te)?Te:0,taxRate:Ke}],discountAmount:0,notes:J?.notes||void 0,sourceQuoteId:J?.sourceQuoteId};if(de){const et=await kf(nt),Je={id:et.id,saleNumber:et.saleNumber||J.saleNumber||`SAL-${new Date().toISOString().slice(0,7)}-???`,customerName:J.customerName||et.customer?.name||"",customerEmail:J.customerEmail||et.customer?.email||"",items:Array.isArray(et.items)?et.items:nt.items,productName:_e,quantity:be,unitPrice:Te,amount:Number(et.total??be*Te)||0,total:Number(et.total??be*Te)||0,date:et.saleDate?String(et.saleDate).slice(0,10):nt.saleDate,status:"completed",paymentMethod:J.paymentMethod||"cash",notes:nt.notes,invoiceId:et.invoiceId,createdByName:et?.createdByName||`${o?.firstName||""} ${o?.lastName||""}`.trim()||o?.email||v.name,updatedByName:et?.updatedByName||`${o?.firstName||""} ${o?.lastName||""}`.trim()||o?.email||v.name,createdAt:et?.createdAt||new Date().toISOString(),updatedAt:et?.updatedAt||new Date().toISOString()};rs(St=>[...St,Je]),Xt(n("toasts.sales.createSuccess"),"success")}else{const et=String(J.id),Je={customerId:ne,saleDate:nt.saleDate,items:nt.items,discountAmount:nt.discountAmount,notes:nt.notes},St=await m8(et,Je);rs(bt=>bt.map(Dt=>String(Dt.id)===et?{...Dt,saleNumber:St.saleNumber||Dt.saleNumber,date:St.saleDate?String(St.saleDate).slice(0,10):Dt.date,amount:Number(St.total??Dt.amount)||0,total:Number(St.total??Dt.total)||0,items:Array.isArray(St.items)?St.items:Dt.items,notes:St.notes??Dt.notes,updatedByName:St?.updatedByName||`${o?.firstName||""} ${o?.lastName||""}`.trim()||o?.email||Dt.updatedByName,updatedAt:St?.updatedAt||new Date().toISOString()}:Dt)),Xt(n("toasts.sales.updateSuccess"),"success")}}catch(ne){console.error(" Sales upsert error:",ne),rs(be=>{const Te={...J,id:J.id||`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,saleNumber:J.saleNumber||`SAL-${new Date().toISOString().slice(0,7)}-OFF`,date:J?.date||new Date().toISOString().split("T")[0],amount:J.amount||Number(J.quantity||1)*Number(J.unitPrice||0),createdByName:`${o?.firstName||""} ${o?.lastName||""}`.trim()||o?.email||v.name,updatedByName:`${o?.firstName||""} ${o?.lastName||""}`.trim()||o?.email||v.name,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Ve=be.findIndex(_e=>String(_e.id)===String(Te.id));return Ve>=0?be.map((_e,Ke)=>Ke===Ve?Te:_e):[...be,Te]}),Xt(os(ne)||n("toasts.sales.localSaved"),"info")}if(de){const ne=Array.isArray(J.items)&&J.items.length>0?J.items:J.productId?[{productId:J.productId,quantity:J.quantity||0}]:[];for(const be of ne){if(!be?.productId)continue;const Te=Sr.find(Ke=>String(Ke.id)===String(be.productId));if(!Te)continue;const Ve=Number(be.quantity||0),_e=Number(Te.stockQuantity||0)-Ve;try{const Ke={stock:_e<0?0:_e};await ty(String(Te.id),Ke),Wr(nt=>nt.map(et=>String(et.id)===String(Te.id)?{...et,stockQuantity:_e<0?0:_e,status:_e<=0?"out-of-stock":_e<=(et.reorderLevel||0)?"low":"active"}:et)),_e>0&&_e<=(Te.reorderLevel||0)&&Yr(r("notifications.products.lowStock.title","Dk stok uyars"),r("notifications.products.lowStock.desc",`${Te.name} - Stok seviyesi minimum limitin altnda! (${_e}/${Te.reorderLevel})`,{name:Te.name,stock:_e,min:Te.reorderLevel}),"info","products",{persistent:!0,repeatDaily:!0,relatedId:`low-stock-${Te.id}`}),_e<=0&&Yr(r("notifications.products.outOfStock.title","Stok tkendi"),r("notifications.products.outOfStock.desc",`${Te.name} - Stok tkendi!`,{name:Te.name}),"info","products",{persistent:!0,repeatDaily:!0,relatedId:`out-of-stock-${Te.id}`})}catch(Ke){console.error("Manuel sat - Stok gncellenemedi:",Ke),Xt(n("toasts.sales.stockUpdateFailed"),"error")}}}if(de){const ne=Array.isArray(J.items)&&J.items.length>0?`${J.items[0]?.productName||"rn"}${J.items.length>1?` +${J.items.length-1}`:""}`:`${J.productName}`,be=Array.isArray(J.items)&&J.items.length>0?J.items.reduce((Te,Ve)=>Te+Number(Ve.total||Ve.quantity*Ve.unitPrice||0),0):J.amount||J.quantity*J.unitPrice;Yr(r("notifications.sales.created.title","Yeni sat kaydedildi"),r("notifications.sales.created.desc",`${J.customerName} - ${ne}: ${be} TL`,{customerName:J.customerName,summary:ne,totalAmount:be}),"success","sales"),tn()}},id=_t.useRef(Gi);id.current=Gi;const zo=async(J,de)=>{if(!(!de?.skipConfirm&&!confirm(n("sales.deleteConfirm",{defaultValue:"Bu sat silmek istediinizden emin misiniz?"})))){he.info("app.sales.delete.request",{saleId:J});try{await h8(String(J))}catch(ne){console.error(" Sat backend zerinde silinemedi:",ne),Xt(os(ne)||n("toasts.sales.deleteError"),"error");return}rs(ne=>{const be=ne.filter(Te=>String(Te.id)!==String(J));return he.info("app.sales.delete.success",{remaining:be.length}),be}),Xt(n("toasts.sales.deleteSuccess"),"success"),it(!1),Tt(null)}},od=J=>{ir(String(J))},Rm=async J=>{try{const de=(J?.category?String(J.category):"").trim()||"Genel";ld(de);const ne={name:J.name||"",code:J.sku||`PROD-${Date.now()}`,description:J.description||void 0,price:Number(J.unitPrice??0),cost:Number(J.costPrice??0),stock:Number(J.stockQuantity??0),minStock:Number(J.reorderLevel??0),unit:J.unit||"adet",category:de,taxRate:Number(J.taxRate??18),categoryTaxRateOverride:J.categoryTaxRateOverride?Number(J.categoryTaxRateOverride):void 0};if(he.debug("app.products.upsert.payload",{name:ne.name,category:ne.category,taxRate:ne.taxRate,categoryTaxRateOverride:ne.categoryTaxRateOverride}),J?.id){const be=await ty(String(J.id),ne);Wr(Te=>Te.map(Ve=>Ve.id===be.id?Ic(be):Ve)),Xt(n("toasts.products.updateSuccess"),"success")}else{const be=await ey(ne);Wr(Te=>[...Te,Ic(be)]),Xt(n("toasts.products.createSuccess"),"success"),be.stock<=be.minStock&&Yr(r("notifications.products.lowStock.title","Dk stok uyars"),r("notifications.products.lowStock.desc",`${be.name} - Stok seviyesi minimum limitin altnda! (${be.stock}/${be.minStock})`,{name:be.name,stock:be.stock,min:be.minStock}),"warning","products")}}catch(de){console.error("Product upsert error:",de),console.error("Error details:",de.response?.data);const ne=de.response?.data?.message||de.message||"rn kaydedilemedi";Xt(Array.isArray(ne)?ne.join(", "):ne,"error")}},zm=async J=>{if(Ao(n("products.deleteConfirm",{defaultValue:"Bu rn silmek istediinizden emin misiniz?"})))try{await s8(String(J)),Wr(de=>de.filter(ne=>ne.id!==String(J))),Xt(n("toasts.products.deleteSuccess"),"success")}catch(de){console.error("Product delete error:",de),Xt(de.response?.data?.message||n("toasts.products.deleteError"),"error")}},Zn=(J,de)=>J.localeCompare(de,"tr-TR",{sensitivity:"accent"})===0,ld=async(J,de)=>{const ne=J.trim();if(ne)try{if(de!==void 0){const{productCategoriesApi:be}=await Mr(async()=>{const{productCategoriesApi:Ve}=await Promise.resolve().then(()=>Fc);return{productCategoriesApi:Ve}},void 0),Te=await be.create({name:ne,taxRate:de});he.info("app.productCategories.created",{id:Te.id,name:Te.name}),Cr(Ve=>[...Ve,Te])}Ws(be=>be.some(Ve=>Zn(Ve,ne))?be:[...be,ne].sort((Ve,_e)=>Ve.localeCompare(_e,"tr-TR"))),de!==void 0&&Xt(n("toasts.categories.added",{name:ne,taxRate:de}),"success")}catch(be){console.error("Kategori ekleme hatas:",be),Xt(be.response?.data?.message||n("toasts.categories.addError"),"error")}},cd=(J,de)=>{const ne=J.trim(),be=de.trim();if(!ne||!be)return;let Te=!1;Ws(Ve=>!Ve.some(_e=>Zn(_e,ne))||Ve.some(_e=>!Zn(_e,ne)&&Zn(_e,be))?Ve:(Te=!0,Ve.map(_e=>Zn(_e,ne)?be:_e).sort((_e,Ke)=>_e.localeCompare(Ke,"tr-TR")))),Te&&(Wr(Ve=>Ve.map(_e=>_e?.category&&Zn(_e.category,ne)?{..._e,category:be}:_e)),Xt(n("toasts.categories.updateSuccess"),"success"))},Lm=J=>{const de=J.trim();if(!de)return;const ne="Genel";if(Zn(de,ne))return;let be=!1;Ws(Te=>{const Ve=Te.filter(_e=>!Zn(_e,de));return Ve.length===Te.length?Te:(be=!0,Ve.some(_e=>Zn(_e,ne))||Ve.push(ne),Array.from(new Set(Ve)).sort((_e,Ke)=>_e.localeCompare(Ke,"tr-TR")))}),be&&(Wr(Te=>Te.map(Ve=>Ve?.category&&Zn(Ve.category,de)?{...Ve,category:ne}:Ve)),Xt(n("toasts.categories.deleteSuccess"),"success"))},Om=(J,de)=>{if(de.length){if(J==="delete"){if(!Ao(`${de.length} urunu silmek istiyor musunuz?`))return;Wr(ne=>{const be=ne.filter(Ve=>!de.includes(Ve.id)),Te=ne.length-be.length;return Te>0?Xt(n("toasts.products.bulkRemoved",{count:Te}),"success"):Xt(n("toasts.products.bulkNotFound"),"info"),be});return}if(J==="archive"){Wr(ne=>{let be=0;const Te=ne.map(Ve=>de.includes(Ve.id)?(be+=1,{...Ve,status:"archived"}):Ve);return be>0?Xt(n("toasts.products.bulkArchived",{count:be}),"success"):Xt(n("toasts.products.bulkAlreadyArchived"),"info"),Te});return}if(J==="update-price"){Xt(n("toasts.products.bulkPriceUpdateSaved"),"info");return}J==="assign-category"&&Xt(n("toasts.categories.assignmentInfo"),"info")}},Fm=async J=>{try{const{bankAccountsApi:de}=await Mr(async()=>{const{bankAccountsApi:ne}=await import("./bank-accounts-CPNZt_C1.js");return{bankAccountsApi:ne}},[]);if(J.id){const ne=await de.update(String(J.id),{name:J.accountName,iban:J.iban,bankName:J.bankName,currency:J.currency});Fs(Te=>{const Ve=Te.map(_e=>String(_e.id)!==String(ne.id)?_e:{..._e,...ne,accountName:ne.name,isActive:J.isActive!==!1,accountType:J.accountType||"checking",balance:Number(J.balance)||0,branchCode:J.branchCode||"",routingNumber:J.routingNumber||"",swiftBic:J.swiftBic||""});try{const _e=Gr(f,o?.tenantId);Ur("bankAccounts",Ve,{tenantId:_e,mirrorToBase:!0});const Ke=Rc("bankUi",{tenantId:_e,fallbackToBase:!1})||{};Ke[String(ne.id)]={isActive:J.isActive!==!1,accountType:J.accountType||"checking",balance:Number(J.balance)||0,branchCode:J.branchCode||"",routingNumber:J.routingNumber||"",swiftBic:J.swiftBic||""},Tu("bankUi",Ke,{tenantId:_e,mirrorToBase:!1})}catch(_e){mr("app.banks.update.persistFailed",_e)}return Ve});const be=l.language==="tr"?"Banka hesab gncellendi":l.language==="en"?"Bank account updated":l.language==="fr"?"Compte bancaire mis  jour":l.language==="de"?"Bankkonto aktualisiert":"Bank account updated";Xt(be,"success")}else{const ne=await de.create({name:J.accountName,iban:J.iban,bankName:J.bankName,currency:J.currency});Fs(Te=>{const Ve=[...Te,{...ne,id:String(ne.id),accountName:ne.name,isActive:J.isActive!==!1,accountType:J.accountType||"checking",balance:Number(J.balance)||0,branchCode:J.branchCode||"",routingNumber:J.routingNumber||"",swiftBic:J.swiftBic||""}];try{const _e=Gr(f,o?.tenantId);Ur("bankAccounts",Ve,{tenantId:_e,mirrorToBase:!0});const Ke=Rc("bankUi",{tenantId:_e,fallbackToBase:!1})||{};Ke[String(ne.id)]={isActive:J.isActive!==!1,accountType:J.accountType||"checking",balance:Number(J.balance)||0,branchCode:J.branchCode||"",routingNumber:J.routingNumber||"",swiftBic:J.swiftBic||""},Tu("bankUi",Ke,{tenantId:_e,mirrorToBase:!1})}catch(_e){mr("app.banks.create.persistFailed",_e)}return Ve});const be=l.language==="tr"?"Banka hesab eklendi":l.language==="en"?"Bank account added":l.language==="fr"?"Compte bancaire ajout":l.language==="de"?"Bankkonto hinzugefgt":"Bank account added";Xt(be,"success")}}catch(de){console.error("Bank upsert failed:",de);const ne=l.language==="tr"?"Banka ilemi baarsz":l.language==="en"?"Bank operation failed":l.language==="fr"?"Lopration bancaire a chou":l.language==="de"?"Bankvorgang fehlgeschlagen":"Bank operation failed";Xt(de?.response?.data?.message||ne,"error")}},Bm=async J=>{if(Ao(n("banks.deleteConfirm",{defaultValue:"Bu banka hesabn silmek istediinizden emin misiniz?"})))try{const{bankAccountsApi:de}=await Mr(async()=>{const{bankAccountsApi:be}=await import("./bank-accounts-CPNZt_C1.js");return{bankAccountsApi:be}},[]);await de.remove(String(J)),Fs(be=>be.filter(Te=>String(Te.id)!==String(J)));const ne=l.language==="tr"?"Banka hesab silindi":l.language==="en"?"Bank account deleted":l.language==="fr"?"Compte bancaire supprim":l.language==="de"?"Bankkonto gelscht":"Bank account deleted";Xt(ne,"success")}catch(de){console.error("Bank delete failed:",de),Xt(de?.response?.data?.message||n("toasts.bank.deleteError"),"error")}},pi=J=>{mt(J??null),Y(!0)},Rl=J=>{Gt(J??null),ae(!0)},Ea=_t.useCallback(J=>{if(!J||typeof J!="object")return J;const de=J?.customer?.name||J?.customerName||"",ne=J?.customer?.email||J?.customerEmail||"",be=J?.customer?.address||J?.customerAddress||"";let Te=Array.isArray(J.items)?J.items:[];(!Te||Te.length===0)&&Array.isArray(J.lineItems)&&(Te=J.lineItems.map((nt,et)=>({id:nt?.id||`${Date.now()}-${et}-${Math.random().toString(36).slice(2,8)}`,description:nt?.description||nt?.productName||"",quantity:Number(nt?.quantity)||1,unitPrice:Number(nt?.unitPrice)||0,total:Number(nt?.total)||(Number(nt?.quantity)||1)*(Number(nt?.unitPrice)||0),productId:nt?.productId,unit:nt?.unit,taxRate:Number(nt?.taxRate??18)})));const Ve=()=>{try{if(!Array.isArray(Te)||Te.length===0)return J.type;const nt=new Set,et=new Map;Sr.forEach(bt=>et.set(String(bt.id),bt));const Je=new Map;Pr.forEach(bt=>Je.set((bt.name||"").toLowerCase(),bt));const St=bt=>{if(!bt)return;const Dt=Je.get(String(bt).toLowerCase());if(!Dt)return String(bt);let Ft=Dt;const tr=new Map(Pr.map(Bt=>[Bt.id,Bt]));for(;Ft&&Ft.parentId;)Ft=tr.get(Ft.parentId);return Ft?.name||Dt.name};for(const bt of Te){const Ft=((bt.productId?et.get(String(bt.productId)):void 0)||Sr.find(vr=>(vr.name||"").toLowerCase()===String(bt.productName||bt.description||"").toLowerCase()))?.category,tr=St(Ft)?.toLowerCase()||"",Bt=tr.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"");Bt.includes("hizmet")||tr.includes("hizmet")?nt.add("service"):(Bt.includes("urun")||tr.includes("rn"))&&nt.add("product")}return nt.size===0?J.type:nt.size>1?"general":nt.values().next().value}catch{return J.type}},_e=J.customer||(J.customerId?{id:String(J.customerId),name:de||void 0,email:ne||void 0,address:be||void 0}:void 0),Ke=Ve();return{...J,items:Te,customerName:de,customerEmail:ne,customerAddress:be,customer:_e,type:Ke||J.type}},[Sr,Pr]),Qs=_t.useCallback(async J=>{if(J){let de=J;const ne=Array.isArray(J.items)&&J.items.length>0,be=Array.isArray(J.lineItems)&&J.lineItems.length>0;try{!ne&&!be&&J.id&&(de=await ll(String(J.id)))}catch(Te){console.warn("Fatura detay alnamad, mevcut veri kullanlacak:",Te)}Oe(Ea(de)),Q(!0)}else we(!0)},[Ea]),dd=()=>{we(!1),Oe(fe?{id:_l(fe.id),customerName:fe.name,customerEmail:fe.email,customerAddress:fe.address,status:"draft",issueDate:new Date().toISOString().split("T")[0]}:null),Q(!0)},Um=()=>{we(!1),wt(!0)},Vm=()=>{we(!1),Oe(fe?{_isReturnInvoice:!0,id:_l(fe.id),customerName:fe.name,customerEmail:fe.email,customerAddress:fe.address,status:"draft",issueDate:new Date().toISOString().split("T")[0]}:{_isReturnInvoice:!0}),Q(!0)},qm=J=>{Ye(J),wt(!1),Qe(!0)},$m=async J=>{const de=ne=>Array.isArray(ne)?ne.filter(Boolean).map(be=>{const Te=Math.max(1,Hr(be.quantity)),Ve=Math.max(0,Hr(be.unitPrice)),_e=(()=>{const Je=Hr(be.total);if(Je>0)return Je;const St=Te*Ve;return Number.isFinite(St)?St:0})(),Ke=be.description||be.productName||n("products.name","Product"),nt=Number(be.taxRate),et=Number.isFinite(nt)&&nt>=0?Math.round(nt*100)/100:void 0;return{productId:be.productId,productName:be.productName||Ke,description:Ke,quantity:Te,unitPrice:Ve,total:_e,taxRate:et}}):[];try{he.info("app.invoiceFromSale.request",{saleId:Me?.id,lineItemCount:J.items?.length});let ne=J.customerId;if(!ne&&Me&&(ne=Zt.find(Je=>Je.name===Me.customerName)?.id,he.info("app.invoiceFromSale.customerResolvedFromSale",{saleCustomerName:Me.customerName,foundCustomerId:ne})),!ne&&J.customerName&&(ne=Zt.find(Je=>Je.name===J.customerName)?.id,he.info("app.invoiceFromSale.customerResolvedFromName",{customerName:J.customerName,foundCustomerId:ne})),!ne)throw he.warn("app.invoiceFromSale.customerNotFound",{providedCustomerName:J.customerName,saleCustomerName:Me?.customerName}),Xt(n("toasts.sales.customerNotFound"),"error"),new Error("customerId required");const be=de(J.items);if(!be.length)throw he.warn("app.invoiceFromSale.noLineItems",{saleId:Me?.id}),Xt(n("invoices.noLineItemsError","Faturaya aktarlacak satr bulunamad."),"error"),new Error("lineItems required");const Te={customerId:ne,issueDate:J.issueDate||new Date().toISOString().split("T")[0],dueDate:J.dueDate,type:J.type||"service",lineItems:be,taxAmount:Math.max(0,Hr(J.taxAmount)),discountAmount:Math.max(0,Hr(J.discountAmount)),notes:J.notes?.trim()||"",status:J.status||"draft"};Me?.id&&(Te.saleId=Me.id);const Ve=await ry(Te);he.info("app.invoiceFromSale.success",{invoiceId:Ve.id,invoiceNumber:Ve.invoiceNumber,linkedSaleId:Te.saleId});const _e=Me?.id&&!Ve.saleId?{...Ve,saleId:Me.id}:Ve,Ke=[...rr,_e];yr(Ke);try{const et=Gr(f,o?.tenantId);Ur("invoices_cache",Ke,{tenantId:et,mirrorToBase:!0})}catch(et){he.warn("app.invoiceFromSale.cacheWriteFailed",et)}Me&&(rs(et=>et.map(Je=>Je.id===Me.id?{...Je,invoiceId:Ve.id}:Je)),he.info("app.invoiceFromSale.saleLinked",{saleId:Me.id,invoiceId:Ve.id}));const nt=Zt.find(et=>et.id===ne);return Yr(r("notifications.invoices.created.title","Yeni fatura oluturuldu"),r("notifications.invoices.created.desc",`${Ve.invoiceNumber} - ${nt?.name||"Hesap"} iin fatura hazr.`,{invoiceNumber:Ve.invoiceNumber,customerName:nt?.name||"Hesap"}),"success","invoices",{i18nTitleKey:"notifications.invoices.created.title",i18nDescKey:"notifications.invoices.created.desc",i18nParams:{invoiceNumber:Ve.invoiceNumber,customerName:nt?.name||"Hesap"}}),Xt(n("toasts.invoices.createSuccess"),"success"),Qe(!1),Ye(null),Ve}catch(ne){he.error("app.invoiceFromSale.failed",ne);const be=ne,Te=be.response?.data?.message||be.message||n("toasts.invoices.createError","Fatura oluturulamad");throw Xt(Array.isArray(Te)?Te.join(", "):Te,"error"),ne}},$a=(J,de)=>{ht(J??null),Ct(de??null),M(!0)},ma=_t.useCallback(J=>{if(he.debug("app.saleModal.openRequested",{modalOpen:U,saleId:J?.id,isNewSale:!J}),!U){he.debug("app.saleModal.openImmediate",{saleId:J?.id}),Tt(J||null),te(!0);return}he.debug("app.saleModal.reopenSequenceStart",{saleId:J?.id}),te(!1),setTimeout(()=>{he.debug("app.saleModal.reopenSetSelected",{saleId:J?.id}),Tt(J||null),setTimeout(()=>{he.debug("app.saleModal.reopenFinalize",{saleId:J?.id}),te(!0)},50)},100)},[U]);_t.useEffect(()=>{const J=String(c||"");if(!J.startsWith("sales-edit:")&&!J.startsWith("invoices-edit:"))return;(async()=>{try{if(J.startsWith("sales-edit:")){const ne=J.replace("sales-edit:","").trim();if(!ne)return;const be=await d8(String(ne));ma(be);return}if(J.startsWith("invoices-edit:")){const ne=J.replace("invoices-edit:","").trim();if(!ne)return;const be=await ll(String(ne));await Qs(be)}}catch(ne){console.warn("Deep-link modal open failed:",ne)}})()},[c,ma,Qs]);const Lo=J=>{Ot(J??null),se(!0)},zl=()=>{Ne(!0)},Wi=J=>{Ot(J),Z(!0)},Ll=J=>{qe(J??null),ve(!0)},Ol=()=>{Y(!1),mt(null)},Fl=()=>{ae(!1),Gt(null)},Bl=()=>{Q(!1),Oe(null),He(null);try{String(c||"").startsWith("invoices-edit:")&&(window.location.hash="invoices")}catch{}},Ul=()=>{M(!1),ht(null),Ct(null)},Vl=()=>{he.debug("app.saleModal.closeRequested"),te(!1);try{String(c||"").startsWith("sales-edit:")&&(window.location.hash="sales")}catch{}setTimeout(()=>{he.debug("app.saleModal.selectionCleared"),Tt(null)},100)},Ha=()=>{se(!1),Ot(null)},Hm=()=>{Ne(!1)},ud=()=>{ve(!1),qe(null)},Km=()=>Ae(!1),md=()=>Ue(!1),hd=()=>Le(!1),Yi=()=>ut(!1),Qi=()=>it(!1),Gm=()=>{Z(!1)},Oo=()=>$e(!1),Fo=()=>oe(!1),fd=()=>ue(!1),Bo=J=>{He(J||null),Ae(!1),oe(!1),we(!0)},ql=J=>{yr(de=>de.map(ne=>ne.customerName===J.name&&ne.status!=="paid"?{...ne,status:"paid"}:ne))},$l=J=>{$a(null,{name:J?.name,category:J?.category}),Ue(!1),ue(!1)},Da=_t.useCallback(async J=>{try{let de=J;const ne=Array.isArray(J?.items)&&J.items.length>0,be=Array.isArray(J?.lineItems)&&J.lineItems.length>0;if(!ne&&!be&&J?.id)try{de=await ll(String(J.id))}catch(_e){console.warn("PDF iin fatura detay alnamad, mevcut veri kullanlacak:",_e)}const Te=Ea(de);await(await Mr(()=>import("./pdfGenerator--172hwWR.js").then(_e=>_e.p),[])).generateInvoicePDF(Te,{company:_,lang:l.language})}catch(de){console.error(de)}},[_,l.language,Ea]),gi=_t.useCallback(async J=>{try{let de=J;const ne=Array.isArray(J?.items)&&J.items.length>0,be=Array.isArray(J?.lineItems)&&J.lineItems.length>0;if(!ne&&!be&&J?.id)try{de=await ll(String(J.id))}catch(Te){console.warn("Fatura grntleme: detay alnamad, mevcut veri kullanlacak:",Te)}Oe(Ea(de)),Le(!0)}catch(de){console.error("openInvoiceView failed:",de),Oe(Ea(J)),Le(!0)}},[Ea]);_t.useEffect(()=>{const J=Te=>{const Ve=Te,_e=Ve.detail&&(Ve.detail.invoice||Ve.detail);_e&&Qs(_e)},de=Te=>{const Ve=Te,_e=Ve.detail&&(Ve.detail.invoice||Ve.detail);_e&&Da(_e)},ne=Te=>{const Ve=Te,_e=Ve.detail&&(Ve.detail.quote||Ve.detail);_e&&(Re(_e),xe(!0))},be=Te=>{const Ve=Te,_e=Ve.detail&&(Ve.detail.sale||Ve.detail);_e&&ma(_e)};return window.addEventListener("open-invoice-edit",J),window.addEventListener("download-invoice",de),window.addEventListener("open-quote-edit",ne),window.addEventListener("open-sale-edit",be),()=>{window.removeEventListener("open-invoice-edit",J),window.removeEventListener("download-invoice",de),window.removeEventListener("open-quote-edit",ne),window.removeEventListener("open-sale-edit",be)}},[Qs,Da,ma]);const Uo=async J=>{try{await(await Mr(()=>import("./pdfGenerator--172hwWR.js").then(ne=>ne.p),[])).generateExpensePDF(J,{company:_,lang:l.language})}catch(de){console.error(de)}},Zi=async J=>{try{await(await Mr(()=>import("./pdfGenerator--172hwWR.js").then(ne=>ne.p),[])).generateSalePDF(J,{company:_,lang:l.language})}catch(de){console.error(de)}},Wm=G.useMemo(()=>{const J=new Date,de=J.getMonth(),ne=J.getFullYear(),be=new Date(ne,de-1,1),Te=be.getMonth(),Ve=be.getFullYear(),_e=(Kt,Tr,gs)=>{if(!Kt)return!1;const Qr=new Date(Kt);return!isNaN(Qr.getTime())&&Qr.getMonth()===Tr&&Qr.getFullYear()===gs},Ke=Kt=>Hr(Kt),nt=Kt=>Kt?Kt?.total!=null?Ke(Kt.total):Ke(Kt?.quantity)*Ke(Kt?.unitPrice):0,et=Kt=>Array.isArray(Kt?.items)&&Kt.items.length?Kt.items:Array.isArray(Kt?.lineItems)&&Kt.lineItems.length?Kt.lineItems:[],Je=Kt=>{if(!Kt)return 0;const Tr=et(Kt);if(Tr.length)return Tr.reduce((qn,rn)=>qn+nt(rn),0);if(Kt?.total!=null)return Ke(Kt.total);if(Kt?.amount!=null)return Ke(Kt.amount);const gs=Ke(Kt?.quantity),Qr=Ke(Kt?.unitPrice);return gs>0&&Qr>0?gs*Qr:0},St=Kt=>Ke(Kt?.amount),bt=Kt=>{if(!Kt)return 0;const Tr=Ke(Kt?.total??Kt?.amount);if(Tr>0)return Tr;const gs=et(Kt);return gs.length?gs.reduce((Qr,qn)=>Qr+nt(qn),0):0},Dt=Kt=>{if(!Kt)return 0;const Tr=Ke(Kt?.taxAmount);if(Tr>0)return Tr;const gs=Ke(Kt?.subtotal),Qr=Ke(Kt?.total);if(Qr>0&&gs>=0&&Qr>=gs){const rn=Qr-gs;if(rn>0)return rn}const qn=et(Kt);if(qn.length){const rn=qn.reduce((Vo,yd)=>{const Gl=Ke(yd?.taxRate);return Gl<=0?Vo:Vo+nt(yd)*(Gl/100)},0);if(rn>0)return rn}return 0},Ft=(Kt,Tr)=>Kt.reduce((gs,Qr)=>gs+Tr(Qr),0),tr=Kt=>{const Tr=String(Kt||"").toLowerCase();return Tr.includes("paid")||Tr.includes("den")||Tr.includes("odendi")||Tr.includes("dendi")},Bt=Kt=>{const Tr=String(Kt||"").toLowerCase();return Tr.includes("completed")||Tr.includes("tamam")},vr=Kt=>{try{const Tr=String(Kt?.id||"");if(!Tr)return!1;if(Kt?.invoiceId||rr.some(rn=>String(rn?.saleId||"")===Tr))return!0;const Qr=Kt?.saleNumber||`SAL-${Tr}`;return!!rr.some(rn=>typeof rn?.notes=="string"&&rn.notes.includes(Qr))}catch{return!1}},Jt=xr.filter(Kt=>tr(Kt?.status)),ur=rr.filter(Kt=>tr(Kt.status)&&_e(Kt?.issueDate,de,ne)),Pt=rr.filter(Kt=>tr(Kt.status)&&_e(Kt?.issueDate,Te,Ve)),Dr=jr.filter(Kt=>Bt(Kt?.status)&&_e(Kt?.date||Kt?.saleDate,de,ne)&&!vr(Kt)),lr=jr.filter(Kt=>Bt(Kt?.status)&&_e(Kt?.date||Kt?.saleDate,Te,Ve)&&!vr(Kt)),us=Ft(ur,bt)+Ft(Dr,Je),Vn=Ft(Pt,bt)+Ft(lr,Je),ws=Ft(ur,Dt),Ka=Ft(Pt,Dt),Sn=Ft(Jt.filter(Kt=>_e(Kt?.expenseDate,de,ne)),St),Ga=Ft(Jt.filter(Kt=>_e(Kt?.expenseDate,Te,Ve)),St),Lr=rr.filter(Kt=>!tr(Kt.status)&&Number(Kt?.total??0)>0),Cn=Ft(Lr,bt),An=Lr.filter(Kt=>_e(Kt?.dueDate||Kt?.issueDate,de,ne)).length,Tn=Lr.filter(Kt=>_e(Kt?.dueDate||Kt?.issueDate,Te,Ve)).length,Ns=Kt=>typeof Kt=="string"?Kt.trim().toLowerCase():"",xi=(Kt,Tr)=>{const gs=new Set;return rr.forEach(Qr=>{_e(Qr?.issueDate,Kt,Tr)&&Qr?.customerName&&gs.add(Ns(Qr.customerName))}),jr.forEach(Qr=>{const qn=Qr?.date||Qr?.saleDate;_e(qn,Kt,Tr)&&Qr?.customerName&&gs.add(Ns(Qr.customerName))}),gs.size},ha=xi(de,ne),Wa=xi(Te,Ve),_a=es.reduce((Kt,Tr)=>Tr?.currency&&Tr.currency!=="TRY"?Kt:Kt+Number(Tr?.balance??0),0),fa=(Kt,Tr)=>Kt===0?Tr===0?0:100:(Tr-Kt)/Kt*100,ns=(Kt,Tr)=>fa(Kt,Tr)>=0?"increase":"decrease";return{statsCards:[{title:n("dashboard.totalRevenue"),value:h(us),change:Mc(fa(Vn,us)),changeType:ns(Vn,us),icon:fs,color:"green"},{title:n("dashboard.vatToPay"),value:h(ws),change:Mc(fa(Ka,ws)),changeType:ns(Ka,ws),icon:un,color:"orange",subtitle:n("dashboard.vatToPaySubtitle")},{title:n("dashboard.totalExpense"),value:h(Sn),change:Mc(fa(Ga,Sn)),changeType:ns(Ga,Sn),icon:ja,color:"red"},{title:n("dashboard.pendingInvoices"),value:h(Cn),change:Mc(fa(Tn,An)),changeType:ns(Tn,An),icon:Fr,color:"purple",subtitle:n("stats.all")},{title:n("dashboard.activeCustomers"),value:String(ha),change:Mc(fa(Wa,ha)),changeType:ns(Wa,ha),icon:Ls,color:"blue"}],outstandingAmount:Cn,totalCash:_a}},[rr,xr,jr,es,n,h]),Hl=()=>{const J={customers:Zt,suppliers:nr,invoices:rr,expenses:xr,sales:jr,products:Sr,bankAccounts:es,company:_};he.info("app.data.exported",{payload:J})},Kl=J=>{if(J){if(Array.isArray(J.customers)&&qt(J.customers.map(de=>({...de,id:String(de.id)}))),Array.isArray(J.suppliers)&&fr(J.suppliers.map(de=>({...de,id:String(de.id)}))),Array.isArray(J.invoices)&&yr(J.invoices.map(de=>({...de,id:String(de.id)}))),Array.isArray(J.expenses)&&Rr(J.expenses.map(de=>({...de,id:String(de.id)}))),Array.isArray(J.sales)&&rs(J.sales.map(de=>({...de,id:String(de.id)}))),Array.isArray(J.products)){const de=J.products.map(be=>({...be,id:String(be.id),category:be.category||"Genel"}));Wr(de);const ne=de.map(be=>be.category?String(be.category).trim():"").filter(be=>!!be);ne.length&&Ws(be=>{const Te=new Set(be);return ne.forEach(Ve=>{Te.add(Ve)}),Array.from(Te).sort((Ve,_e)=>Ve.localeCompare(_e,"tr-TR"))})}Array.isArray(J.bankAccounts)&&Fs(J.bankAccounts.map(de=>({...de,id:String(de.id)})))}},jn=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"-mx-4 sm:mx-0",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto px-4 sm:px-0 sm:grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:Wm.statsCards.map(J=>e.jsx("div",{className:"flex-none min-w-[240px] sm:min-w-0",children:e.jsx(A8,{title:J.title,value:J.value,change:J.change,changeType:J.changeType,icon:J.icon,color:J.color,subtitle:J.subtitle})},J.title))})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2 min-w-0",children:[e.jsx(T8,{sales:jr,expenses:xr,invoices:rr}),(()=>{let J=[];try{const de=Gr(f,o?.tenantId),ne=is("quotes_cache",{tenantId:de})??[];Array.isArray(ne)&&(J=ne)}catch(de){mr("app.dashboard.quotesCache.readFailed",de)}return e.jsx(E8,{invoices:rr,expenses:xr,sales:jr,quotes:J,onViewInvoice:de=>{gi(de)},onEditInvoice:de=>Qs(de),onDownloadInvoice:Da,onViewExpense:de=>{ht(de),ut(!0)},onEditExpense:de=>$a(de),onDownloadExpense:Uo,onViewSale:de=>{Tt(de),it(!0)},onEditSale:de=>ma(de),onDownloadSale:Zi,onViewQuote:de=>{Re(de),jt(!0)},onViewAllTransactions:()=>j("general-ledger")})})()]}),e.jsxs("div",{className:"space-y-6 min-w-0",children:[e.jsx(D8,{onNewInvoice:()=>Qs(),onNewExpense:()=>$a(),onNewSale:()=>ma(),onNewQuote:()=>tt(!0),onNewCustomer:()=>pi(),onNewProduct:()=>Lo(),onViewCustomers:()=>j("customers"),onViewSuppliers:()=>j("suppliers"),onViewBanks:()=>j("banks"),onViewProducts:()=>j("products"),customers:Zt,suppliers:nr,banks:es,products:Sr}),e.jsx(u_,{onNavigateToFiscalPeriods:()=>j("fiscal-periods")}),e.jsx(_8,{invoices:rr,expenses:xr,onViewOverdueInvoices:()=>j("invoices"),onViewPendingExpenses:()=>j("expenses")})]})]})]}),Xi=()=>{if(c.startsWith("customer-history:")){const J=_t.lazy(()=>Mr(()=>import("./CustomerHistoryPage-CBurN1z_.js"),[]));return e.jsx(_t.Suspense,{fallback:e.jsx("div",{className:"p-6",children:"Ykleniyor..."}),children:e.jsx(J,{})})}if(c.startsWith("crm-deal:")){const J=c.replace("crm-deal:",""),de=_t.lazy(()=>Mr(()=>import("./CrmDealDetailPage-Dni4K4X-.js"),[]));return e.jsx(_t.Suspense,{fallback:e.jsx("div",{className:"p-6",children:"Ykleniyor..."}),children:e.jsx(de,{opportunityId:J})})}if(c.startsWith("crm-opportunities:")){const J=c.replace("crm-opportunities:","");return e.jsx(Uy,{initialAccountId:J})}if(c.startsWith("crm-contacts:")){const J=c.replace("crm-contacts:","");return e.jsx($y,{initialAccountId:J})}if(c.startsWith("crm-activities:")){const J=c.replace("crm-activities:",""),de=Zt.find(ne=>String(ne.id)===J);return e.jsx(Lc,{accountId:J,accountName:de?.name??""})}if(c.startsWith("crm-activities-opp:")){const J=c.replace("crm-activities-opp:","");return e.jsx(Lc,{opportunityId:J})}if(c.startsWith("crm-activities-contact:")){const J=c.replace("crm-activities-contact:","");return e.jsx(Lc,{contactId:J})}if(c.startsWith("crm-tasks:")){const J=c.replace("crm-tasks:",""),de=Zt.find(ne=>String(ne.id)===J);return e.jsx(Mu,{accountId:J,accountName:de?.name??""})}if(c.startsWith("crm-tasks-opp:")){const J=c.replace("crm-tasks-opp:","");return e.jsx(Mu,{opportunityId:J})}if(c.startsWith("quotes-open:")){const J=c.replace("quotes-open:","");return e.jsx(Qf,{customers:Zt,products:Sr,initialOpenQuoteId:J})}if(c.startsWith("quotes-edit:")){const J=c.replace("quotes-edit:","");return e.jsx(Qf,{customers:Zt,products:Sr,initialOpenQuoteId:J,initialOpenMode:"edit"})}if(c.startsWith("sales-edit:"))return e.jsx(zy,{customers:Zt,sales:jr,invoices:rr,products:Sr,onSalesUpdate:El,onUpsertSale:Gi,onCreateInvoice:Ta,onEditInvoice:J=>Qs(J),onDownloadSale:Zi,onDeleteSale:J=>od(String(J))});if(c.startsWith("invoices-edit:"))return e.jsx(Ay,{invoices:rr,onAddInvoice:()=>Qs(),onEditInvoice:J=>Qs(J),onDeleteInvoice:fi,onViewInvoice:J=>{gi(J)},onUpdateInvoice:Do,onDownloadInvoice:Da,onVoidInvoice:nd,onRestoreInvoice:Mo});switch(c){case"summary":return e.jsx(d_,{invoices:rr,products:Sr,sales:jr,quotes:C()});case"dashboard":return jn();case"crm-dashboard":return e.jsx(l_,{});case"crm-opportunities":return e.jsx(Uy,{});case"crm-leads":return e.jsx(n_,{});case"crm-contacts":return e.jsx($y,{});case"crm-activities":return e.jsx(Lc,{});case"crm-tasks":return e.jsx(Mu,{});case"customers":return e.jsx(JE,{customers:Zt,onAddCustomer:()=>pi(),onEditCustomer:J=>pi(J),onDeleteCustomer:J=>rd(J),onViewCustomer:J=>{mt(J),Ae(!0)},onImportCustomers:Po});case"products":return e.jsx(aD,{products:Sr,categories:Qn,onAddProduct:()=>Lo(),onEditProduct:J=>Lo(J),onDeleteProduct:J=>zm(J),onViewProduct:J=>Wi(J),onAddCategory:zl,onEditCategory:cd,onDeleteCategory:Lm,onBulkAction:Om,onImportProducts:Io});case"suppliers":return e.jsx(oD,{suppliers:nr,onAddSupplier:()=>Rl(),onEditSupplier:J=>Rl(J),onDeleteSupplier:fn,onViewSupplier:J=>{Gt(J),Ue(!0)}});case"invoices":return e.jsx(Ay,{invoices:rr,onAddInvoice:()=>Qs(),onEditInvoice:J=>Qs(J),onDeleteInvoice:fi,onViewInvoice:J=>{gi(J)},onUpdateInvoice:Do,onDownloadInvoice:Da,onVoidInvoice:nd,onRestoreInvoice:Mo});case"expenses":return e.jsx(uD,{expenses:xr,onAddExpense:()=>$a(),onEditExpense:J=>$a(J),onDeleteExpense:J=>Ki(J),onViewExpense:J=>{ht(J),ut(!0)},onUpdateExpense:ad,onDownloadExpense:Uo,onVoidExpense:Ro,onRestoreExpense:Mm});case"banks":return e.jsx(fD,{bankAccounts:es,onAddBank:()=>Ll(),onEditBank:J=>Ll(J),onDeleteBank:J=>Bm(J),onViewBank:J=>{qe(J),$e(!0)}});case"sales":return e.jsx(zy,{customers:Zt,sales:jr,invoices:rr,products:Sr,onSalesUpdate:El,onUpsertSale:Gi,onCreateInvoice:Ta,onEditInvoice:J=>Qs(J),onDownloadSale:Zi,onDeleteSale:J=>od(String(J))});case"crm-pipeline":return e.jsx(QD,{});case"quotes":return e.jsx(Qf,{customers:Zt,products:Sr});case"reports":return e.jsx(SD,{invoices:rr,expenses:xr,sales:jr,customers:Zt,quotes:(()=>{let J=[];try{const de=Gr(f,o?.tenantId),ne=is("quotes_cache",{tenantId:de})??[];Array.isArray(ne)&&(J=ne)}catch(de){mr("app.reports.quotesCache.readFailed",de)}return J})()});case"general-ledger":return e.jsx(ID,{invoices:rr,expenses:xr,sales:jr,onViewInvoice:J=>{gi(J)},onEditInvoice:J=>Qs(J),onViewExpense:J=>{ht(J),ut(!0)},onEditExpense:J=>$a(J),onViewSale:J=>{Tt(J),it(!0)},onEditSale:J=>ma(J),onInvoicesUpdate:yr,onExpensesUpdate:Rr,onSalesUpdate:J=>rs(J)});case"chart-of-accounts":return e.jsx(DD,{accounts:N,onAccountsUpdate:T,invoices:rr,expenses:xr,sales:jr,customers:Zt});case"archive":return e.jsx(PD,{invoices:rr,expenses:xr,sales:jr,customers:Zt,suppliers:nr,onViewInvoice:J=>{gi(J)},onViewExpense:J=>{ht(J),ut(!0)},onViewSale:J=>{Tt(J),it(!0)},onViewCustomer:J=>{mt(J),Ae(!0)},onViewSupplier:J=>{Gt(J),Ue(!0)},onDownloadInvoice:Da,onDownloadExpense:Uo,onDownloadSale:Zi});case"settings":return e.jsx(_f,{name:"settings",children:e.jsx(Df,{user:v,company:_,bankAccounts:es,onUserUpdate:y,onCompanyUpdate:Va,onExportData:Hl,onImportData:Kl,initialTab:b})});case"fiscal-periods":return e.jsx(_f,{name:"fiscal-periods",children:e.jsx(Df,{user:v,company:_,bankAccounts:es,onUserUpdate:y,onCompanyUpdate:Va,onExportData:Hl,onImportData:Kl,initialTab:"fiscal-periods"})});case"admin":return e.jsx(hy,{});case"legal-terms":return e.jsx(Zy,{});case"legal-privacy":return e.jsx(Xy,{});case"legal-subprocessors":return e.jsx(Jy,{});case"legal-dpa":return e.jsx(eb,{});case"legal-cookies":return e.jsx(tb,{});case"legal-imprint":return e.jsx(rb,{});case"legal-email-policy":return e.jsx(sb,{});case"organization-members":return e.jsx(_f,{name:"organization-members",children:e.jsx(Df,{user:v,company:_,bankAccounts:es,onUserUpdate:y,onCompanyUpdate:Va,onExportData:Hl,onImportData:Kl,initialTab:"organization"})});default:if(c.startsWith("join-organization:")){const J=c.replace("join-organization:","");return e.jsx(ib,{token:J,onJoinSuccess:()=>{u("dashboard"),window.location.hash=""},onNavigateHome:()=>{u("landing"),window.location.hash=""},onNavigateDashboard:()=>{u("dashboard"),window.location.hash=""}})}return jn()}},pd=()=>mn.length===0?null:e.jsx("div",{className:"pointer-events-none fixed bottom-6 right-6 z-50 flex w-80 flex-col gap-2",children:mn.map(J=>e.jsx("div",{className:`pointer-events-auto rounded-lg border px-4 py-3 shadow-lg ${Z_[J.tone]}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("span",{className:"text-sm font-medium",children:J.message}),e.jsx("button",{type:"button",onClick:()=>Ys(J.id),className:"rounded text-xs font-semibold text-current transition-opacity hover:opacity-75",children:"X"})]})},J.id))}),gd=()=>e.jsxs(e.Fragment,{children:[ze&&e.jsx(rw,{isOpen:ze,onClose:()=>tt(!1),customers:Zt,products:Sr,onCreate:J=>{try{const de=Gr(f,o?.tenantId),ne=is("quotes_cache",{tenantId:de})??[],be=Array.isArray(ne)?ne:[],Te=be.length+1,Ve=`q${Date.now()}`,_e=`Q-${new Date().getFullYear()}-${String(Te).padStart(4,"0")}`,nt=[{id:Ve,quoteNumber:_e,customerName:J.customer.name,customerId:String(J.customer.id??""),issueDate:J.issueDate,validUntil:J.validUntil,currency:J.currency,total:J.total,status:"draft",version:1,items:J.items},...be];Ur("quotes_cache",nt,{tenantId:de,mirrorToBase:!0}),tt(!1),Xt(n("toasts.quotes.createSuccess"),"success")}catch(de){console.error("Quote create (dashboard) failed:",de),Xt(n("toasts.quotes.createError"),"error")}}}),L&&e.jsx(P8,{isOpen:L,onClose:Ol,onSave:J=>{_o(J),Ol()},customer:dt}),X&&e.jsx(z8,{isOpen:X,onClose:Fl,onSave:J=>{sd(J),Fl()},supplier:yt}),kt&&e.jsx(KT,{isOpen:kt,onClose:()=>we(!1),onSelectNewSale:dd,onSelectExistingSale:Um,onSelectReturn:Vm}),st&&e.jsx(ZT,{isOpen:st,onClose:()=>wt(!1),onSelectSale:qm,sales:fe?jr.filter(J=>J.customerName&&fe?.name&&String(J.customerName)===String(fe.name)||J.customerEmail&&fe?.email&&String(J.customerEmail)===String(fe.email)):jr,existingInvoices:rr}),pe&&Me&&e.jsx(XT,{isOpen:pe,onClose:()=>{Qe(!1),Ye(null)},onSave:$m,sale:Me}),$&&e.jsx($8,{onClose:Bl,onSave:async J=>{await Ta(J),Bl()},invoice:Lt,customers:Zt,products:Sr,invoices:rr}),z&&e.jsx(W8,{isOpen:z,onClose:Ul,onSave:J=>{Ml(J),Ul()},expense:ot,suppliers:nr,supplierInfo:ft}),ie&&e.jsx(I8,{isOpen:ie,onClose:Ha,onSave:J=>{Rm(J),Ha()},categories:Qn,categoryObjects:Pr,product:pt}),U&&e.jsx(Mv,{isOpen:U,onClose:Vl,onSave:J=>{Gi(J),Vl()},sale:It,customers:Zt,products:Sr}),ce&&e.jsx(eT,{isOpen:ce,onClose:ud,onSave:J=>{Fm(J),ud()},bank:Se,bankAccount:Se,country:_?.country}),e.jsx(yE,{isOpen:De,onClose:Km,customer:dt,onEdit:J=>{Ae(!1),setTimeout(()=>pi(J),50)},onCreateInvoice:Bo,onRecordPayment:ql,onViewHistory:J=>{const ne=`customer-history:${encodeURIComponent(String(J?.id||""))}`;Ae(!1);try{window.location.hash=ne}catch(be){he.warn("app.customerHistory.hashNavigationFailed",be),u(ne)}}}),e.jsx(vE,{isOpen:Ie,onClose:md,supplier:yt,onEdit:J=>Rl(J),onCreateExpense:$l,onViewHistory:J=>{Gt(J),ue(!0)}}),e.jsx(lg,{isOpen:Ge,onClose:hd,invoice:Lt,onEdit:J=>Qs(J),onDownload:Da}),e.jsx(Vv,{isOpen:at,onClose:Yi,expense:ot,onEdit:J=>$a(J),onDownload:Uo}),e.jsx(cg,{isOpen:Ce,onClose:Qi,sale:It,onEdit:J=>ma(J),onDelete:zo,onDownload:Zi}),e.jsx(Qv,{isOpen:xt,onClose:()=>jt(!1),quote:Mt,onEdit:J=>{jt(!1),setTimeout(()=>{Re(J),xe(!0)},50)}}),Ee&&e.jsx(Zv,{isOpen:Ee,onClose:()=>xe(!1),quote:Mt,products:Sr,onSave:async J=>{try{const de=await fl(String(J.id),{customerId:J.customerId,customerName:J.customerName,issueDate:J.issueDate,validUntil:J.validUntil,currency:J.currency,total:J.total,items:(J.items||[]).map(ne=>({description:ne.description,quantity:ne.quantity,unitPrice:ne.unitPrice,total:ne.total,productId:ne.productId,unit:ne.unit})),scopeOfWorkHtml:J.scopeOfWorkHtml||"",status:J.status});try{const ne=Gr(f,o?.tenantId),be=is("quotes_cache",{tenantId:ne,fallbackToBase:!0})??[],Te=Array.isArray(be)?be.map(Ve=>String(Ve.id)===String(de.id)?{...Ve,quoteNumber:de.quoteNumber??Ve.quoteNumber,customerName:de.customer?.name||de.customerName||J.customerName,customerId:de.customerId??Ve.customerId,issueDate:String(de.issueDate||J.issueDate).slice(0,10),validUntil:de.validUntil?String(de.validUntil).slice(0,10):J.validUntil||null,currency:de.currency??J.currency,total:Number(de.total??J.total)||0,status:de.status??J.status,version:de.version??Ve.version,scopeOfWorkHtml:de.scopeOfWorkHtml??Ve.scopeOfWorkHtml,items:Array.isArray(de.items)?de.items:Ve.items||J.items||[]}:Ve):[];Ur("quotes_cache",Te,{tenantId:ne,mirrorToBase:!0});try{window.dispatchEvent(new Event("quotes-cache-updated"))}catch(Ve){mr("app.quotes.cache.dispatchFailed",Ve)}}catch(ne){mr("app.quotes.cache.updateFailed",ne)}}catch(de){console.error("Quote update failed:",de)}finally{xe(!1)}}}),e.jsx(bE,{isOpen:ke,onClose:Gm,product:pt,onEdit:J=>Lo(J)}),e.jsx(Ev,{isOpen:le,onClose:Hm,onSubmit:ld,categories:Qn}),e.jsx(NE,{isOpen:Be,onClose:Oo,bankAccount:Se,onEdit:J=>{$e(!1),setTimeout(()=>Ll(J),50)}}),e.jsx(YE,{isOpen:ye,onClose:Fo,customer:dt,invoices:rr.filter(J=>{const de=dt;if(!de)return!1;const ne=String(J?.customerId||J?.customer?.id||""),be=String(de?.id||"");if(ne&&be)return ne===be;const Te=String(J?.customer?.name||J?.customerName||"").trim(),Ve=String(de?.name||"").trim();return Te&&Ve&&Te===Ve}),sales:jr.filter(J=>J.customerName===dt?.name),onViewInvoice:async J=>{Fo(),setTimeout(async()=>{let de=J;const ne=Array.isArray(J?.items)&&J.items.length>0,be=Array.isArray(J?.lineItems)&&J.lineItems.length>0;if(!ne&&!be&&J?.id)try{de=await ll(String(J.id))}catch(Te){console.warn("Gemiten fatura grntleme: detay alnamad, mevcut veri kullanlacak:",Te)}Oe(Ea(de)),Le(!0)},50)},onViewSale:J=>{Fo(),setTimeout(()=>{Tt(J),it(!0)},50)},onViewQuote:J=>{Fo(),setTimeout(()=>{Re(J),jt(!0)},50)},onCreateInvoice:Bo}),e.jsx(QE,{isOpen:me,onClose:fd,supplier:yt,expenses:xr.filter(J=>J.supplier===yt?.name),onViewExpense:J=>{ht(J),ut(!0)},onCreateExpense:$l}),rt&&e.jsx(ZE,{isOpen:lt,onClose:()=>{Pe(!1),je(null)},title:rt.title,message:rt.message,relatedItems:rt.relatedItems,itemType:rt.itemType}),Ts&&e.jsx(Fi,{isOpen:!0,title:Ts.title,message:Ts.message,tone:Ts.tone,confirmLabel:Ts.confirmLabel||n("common.ok"),cancelLabel:Ts.cancelLabel,onConfirm:Ts.onConfirm,onCancel:Ts.onCancel,extraLabel:Ts.extraLabel,onExtra:Ts.onExtra,onClose:()=>zr(null)}),!!er&&e.jsx(ui,{isOpen:!0,title:n("common.confirm",{defaultValue:"Onay"}),message:n("invoices.deleteConfirm",{defaultValue:"Bu faturay silmek istediinizden emin misiniz?"}),confirmText:n("common.delete",{defaultValue:"Sil"}),cancelText:n("common.cancel",{defaultValue:"ptal"}),danger:!0,onConfirm:async()=>{const J=er;Rt(null),await Il(J)},onCancel:()=>Rt(null)}),!!Ht&&e.jsx(ui,{isOpen:!0,title:n("common.confirm",{defaultValue:"Onay"}),message:n("sales.deleteConfirm",{defaultValue:"Bu sat silmek istediinizden emin misiniz?"}),confirmText:n("common.delete",{defaultValue:"Sil"}),cancelText:n("common.cancel",{defaultValue:"ptal"}),danger:!0,onConfirm:async()=>{const J=Ht;ir(null),await zo(J,{skipConfirm:!0})},onCancel:()=>ir(null)})]});if(_t.useEffect(()=>{const J=async()=>{try{const be=Gr(f,o?.tenantId),Te=is("quotes_cache",{tenantId:be,fallbackToBase:!0});if(!Array.isArray(Te)||Te.length===0)return;const Ve=[...Te];let _e=!1;for(const Ke of Ve)if(Ke&&Ke.status==="accepted"){const nt=`quote_converted_${Ke.id}`,et=$u(nt,{tenantId:be,fallbackToBase:!1});if(et==="done"||Ke.convertedToSale||et&&et.startsWith("pending:"))continue;const Je=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`;try{pl(nt,`pending:${Je}`,{tenantId:be,mirrorToBase:!1})}catch(Bt){mr("app.quotes.accepted.lockPersistFailed",Bt)}if($u(nt,{tenantId:be,fallbackToBase:!1})!==`pending:${Je}`)continue;const bt=Array.isArray(Ke.items)?Ke.items:[],Dt=Bt=>{const vr=String(Bt||"");if(!vr)return 18;try{const Jt=Sr.find(Pt=>String(Pt.id)===vr);if(!Jt)return 18;const ur=Number(Jt.categoryTaxRateOverride??Jt.taxRate??18);return Number.isFinite(ur)&&ur>=0?ur:18}catch{return 18}},Ft=bt.map(Bt=>{const vr=Number(Bt?.quantity||1),Jt=Number(Bt?.unitPrice||0),ur=Number(Bt?.total||Jt*vr),Pt=Bt?.productId,Dr=Bt?.description||Bt?.productName||"rn/Hizmet",lr=(()=>{const us=Number(Bt.taxRate);return Number.isFinite(us)&&us>=0?us:Dt(Pt)})();return{productId:Pt,productName:Dr,quantity:vr,unitPrice:Jt,total:ur,taxRate:lr}}),tr=Ft.reduce((Bt,vr)=>Bt+Number(vr.total||0),0);try{const Bt=await kf({customerId:Ke.customerId,customerEmail:Ke.customerEmail||void 0,saleDate:new Date().toISOString().split("T")[0],items:Ft.map(Jt=>({productId:Jt.productId,productName:Jt.productName,quantity:Number(Jt.quantity)||1,unitPrice:Number(Jt.unitPrice)||0,taxRate:Number(Jt.taxRate??18)})),discountAmount:0,notes:"Teklif kabul edildi (otomatik oluturuldu)".trim(),sourceQuoteId:String(Ke.id)}),vr={id:Bt.id,saleNumber:Bt.saleNumber||void 0,customerName:Ke.customerName,customerEmail:Ke.customerEmail||Zt.find(Jt=>String(Jt.id)===String(Ke.customerId))?.email||void 0,items:Array.isArray(Bt.items)?Bt.items:Ft,productName:Ft.length>0?`${Ft[0].productName}${Ft.length>1?` +${Ft.length-1}`:""}`:"Tekliften Sat",quantity:Ft[0]?.quantity||void 0,unitPrice:Ft[0]?.unitPrice||void 0,amount:Number(Bt.total??tr)||tr,total:Number(Bt.total??tr)||tr,date:Bt.saleDate?String(Bt.saleDate).slice(0,10):new Date().toISOString().slice(0,10),status:"completed",sourceQuoteId:String(Ke.id)};rs(Jt=>Jt.some(Pt=>String(Pt.sourceQuoteId||"")===String(Ke.id)||String(Pt.id)===String(Bt.id))?Jt:[...Jt,vr]),tn()}catch(Bt){mr("app.quotes.accepted.remoteConversionFailed",Bt);const vr={customerName:Ke.customerName,productName:Ft.length>0?`${Ft[0].productName}${Ft.length>1?` +${Ft.length-1}`:""}`:"Tekliften Sat",amount:tr,total:tr,items:Ft,date:new Date().toISOString().split("T")[0],status:"completed",sourceType:"quote",sourceQuoteId:String(Ke.id)},Jt=id.current;if(Jt)try{await Jt(vr)}catch(ur){mr("app.quotes.accepted.localSaleUpsertFailed",ur)}}Ke.convertedToSale=!0;try{pl(nt,"done",{tenantId:be,mirrorToBase:!1})}catch(Bt){mr("app.quotes.accepted.lockReleaseFailed",Bt)}_e=!0}_e&&Ur("quotes_cache",Ve,{tenantId:be,mirrorToBase:!0})}catch(be){mr("app.quotes.accepted.processingFailed",be)}},de=be=>{const Te=Gr(f,o?.tenantId),Ve=Te?`quotes_cache_${Te}`:"quotes_cache";be.key===Ve&&J()},ne=()=>{document.visibilityState==="visible"&&J()};return window.addEventListener("storage",de),window.addEventListener("quotes-cache-updated",J),document.addEventListener("visibilitychange",ne),J(),()=>{window.removeEventListener("storage",de),window.removeEventListener("quotes-cache-updated",J),document.removeEventListener("visibilitychange",ne)}},[f,o?.tenantId,Sr,Zt,rs]),Ua)return e.jsx("div",{className:"min-h-screen",children:e.jsx(z_,{quoteId:Ua})});if(c==="admin")return e.jsx(hy,{});if(c==="register")return e.jsx(p_,{});if(c==="landing")return e.jsx(__,{});if(!a&&c==="login")return e.jsx(Gy,{});if(!a&&typeof c=="string"&&c.startsWith("join-organization:")){const J=c.replace("join-organization:","");return e.jsx(ib,{token:J,onJoinSuccess:()=>{u("dashboard"),window.location.hash=""},onNavigateHome:()=>{u("landing"),window.location.hash=""},onNavigateDashboard:()=>{u("dashboard"),window.location.hash=""}})}if(!a&&c==="forgot-password")return e.jsx(g_,{});if(!a&&c==="reset-password")return e.jsx(x_,{});if(!a&&c==="verify-email")return e.jsx(y_,{});if(!a&&c==="verify-notice")return e.jsx(b_,{});if(!a&&c.startsWith("legal-")){const J=()=>{switch(c){case"legal-terms":return e.jsx(Zy,{});case"legal-privacy":return e.jsx(Xy,{});case"legal-subprocessors":return e.jsx(Jy,{});case"legal-dpa":return e.jsx(eb,{});case"legal-cookies":return e.jsx(tb,{});case"legal-imprint":return e.jsx(rb,{});case"legal-email-policy":return e.jsx(sb,{});default:return e.jsx("div",{children:"Legal page not found"})}};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(Ba,{}),e.jsx(nb,{}),e.jsx(ab,{}),J()]})}if(c==="help")return e.jsx(M_,{});if(c==="about")return e.jsx(P_,{});if(c==="api")return e.jsx(I_,{});if(!a)return e.jsx(Gy,{});const xd=(()=>{if(typeof c=="string"&&c.startsWith("customer-history:")){const J=c.split(":")[1];if(J){const de=Zt.find(ne=>String(ne.id)===String(J));if(de?.name)return String(de.name);try{const ne=Gr(f,o?.tenantId),be=is("customers_cache",{tenantId:ne,fallbackToBase:!0});if(Array.isArray(be)){const Te=be.find(Ve=>String(Ve.id)===String(J));if(Te?.name)return String(Te.name)}}catch(ne){mr("app.sidebar.customerCache.readFailed",ne)}}return}})();return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsxs("div",{className:"flex min-h-screen",children:[e.jsx(C8,{currentPage:c,onPageChange:j,invoices:rr,expenses:xr,appArea:m,isOpen:A,onClose:Pl}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx(uw,{}),e.jsx(S8,{user:v,onLogout:td,onNewInvoice:()=>Qs(),onNewSale:()=>ma(),activePage:c,customTitle:xd,onToggleSidebar:Aa,appArea:m,onAppAreaChange:S,notifications:W,unreadCount:$i,isNotificationsOpen:E,onToggleNotifications:Im,onCloseNotifications:Hi,onNotificationClick:Eo,onOpenSettingsProfile:()=>D("profile")}),e.jsx("main",{className:"flex-1 px-3 py-6 sm:px-6 lg:px-8",children:Xi()})]})]}),pd(),gd(),e.jsx(nb,{}),e.jsx(ab,{})]})},rP=()=>e.jsx(GA,{children:e.jsx($A,{children:e.jsx(WA,{children:e.jsxs(ZA,{children:[e.jsx(L_,{}),e.jsx(tP,{})]})})})}),sP=typeof localStorage<"u"&&localStorage.getItem("debug")==="1";sP&&(console.log("=== ENVIRONMENT DEBUG (safe) ==="),console.log("VITE_API_URL:",void 0),console.log("MODE:","production","| DEV:",!1,"| PROD:",!0),console.log("Final API URL will be:",""));window.envDebug=()=>{console.log("Current API Base URL:",void 0)};he.installConsoleMute();he.info(" Comptario uygulamas balatlyor...");const mw=document.getElementById("root");if(!mw)throw new Error("Root element bulunamad!");he.info(" Root element bulundu, uygulama render ediliyor...");const fb=a1.createRoot(mw);try{fb.render(e.jsx(G.StrictMode,{children:e.jsx(GN,{i18n:ls,children:e.jsx(oN,{children:e.jsx(rP,{})})})})),he.info(" Comptario uygulamas baaryla yklendi!")}catch(a){a instanceof Error?(he.error(" Uygulama yklenemedi:",a),he.error("Stack trace:",a.stack)):he.error(" Uygulama yklenemedi:",a),fb.render(e.jsx(G.StrictMode,{children:e.jsxs("div",{style:{color:"red",padding:"40px",textAlign:"center",fontFamily:"Arial, sans-serif"},children:[e.jsx("h1",{children:" Uygulama Yklenemedi"}),e.jsxs("p",{style:{margin:"20px 0"},children:[e.jsx("strong",{children:"Hata:"})," ",a instanceof Error?a.message:String(a)]}),e.jsxs("details",{style:{textAlign:"left",background:"#f8f9fa",padding:"20px",borderRadius:"5px"},children:[e.jsx("summary",{children:"Teknik Detaylar"}),e.jsx("pre",{style:{fontSize:"12px",overflow:"auto"},children:a instanceof Error?a.stack:JSON.stringify(a,null,2)})]}),e.jsx("p",{style:{marginTop:"20px"},children:e.jsx("a",{href:"/clear-storage.html",style:{color:"#007bff"},children:"Storage' temizle ve tekrar dene"})})]})}))}export{Am as A,hs as B,Vr as C,Cs as D,Zr as E,os as F,Ey as G,kP as H,lg as I,NP as J,oE as K,jP as L,SP as M,hr as N,pb as O,Br as P,Qv as Q,_t as R,cg as S,CP as T,Mr as _,Xe as a,Et as b,Nm as c,$u as d,Jr as e,Gs as f,wP as g,n8 as h,ls as i,c8 as j,Xv as k,he as l,e as m,ll as n,fl as o,Wv as p,d8 as q,en as r,Ri as s,AP as t,$t as u,G as v,Lc as w,Mu as x,Bv as y,og as z};
